{"version":3,"sources":["../../src/cell/rscEntry.tsx"],"sourcesContent":["import type { DefaultServerCellComponentProps, Payload } from 'payload'\n\nimport { getTranslation, type I18nClient } from '@payloadcms/translations'\nimport { Link } from '@payloadcms/ui'\nimport { formatAdminURL } from 'payload/shared'\nimport React from 'react'\n\n/**\n * @deprecated - slate will be removed in 4.0. Please [migrate our new, lexical-based rich text editor](https://payloadcms.com/docs/rich-text/migration#migrating-from-slate).\n */\nexport const RscEntrySlateCell: React.FC<\n  {\n    i18n: I18nClient\n    payload: Payload\n  } & DefaultServerCellComponentProps\n> = (props) => {\n  const {\n    cellData,\n    className: classNameFromProps,\n    collectionConfig,\n    field: { admin },\n    field,\n    i18n,\n    link,\n    onClick: onClickFromProps,\n    payload,\n    rowData,\n  } = props\n\n  const classNameFromConfigContext = admin && 'className' in admin ? admin.className : undefined\n\n  const className =\n    classNameFromProps ||\n    (field.admin && 'className' in field.admin ? field.admin.className : null) ||\n    classNameFromConfigContext\n  const adminRoute = payload.config.routes.admin\n  const serverURL = payload.config.serverURL\n\n  const onClick = onClickFromProps\n\n  let WrapElement: React.ComponentType<any> | string = 'span'\n\n  const wrapElementProps: {\n    className?: string\n    href?: string\n    onClick?: () => void\n    prefetch?: false\n    type?: 'button'\n  } = {\n    className,\n  }\n\n  if (link) {\n    wrapElementProps.prefetch = false\n    WrapElement = Link\n    wrapElementProps.href = collectionConfig?.slug\n      ? formatAdminURL({\n          adminRoute,\n          path: `/collections/${collectionConfig?.slug}/${rowData.id}`,\n          serverURL,\n        })\n      : ''\n  }\n\n  if (typeof onClick === 'function') {\n    WrapElement = 'button'\n    wrapElementProps.type = 'button'\n    wrapElementProps.onClick = () => {\n      onClick({\n        cellData,\n        collectionSlug: collectionConfig?.slug,\n        rowData,\n      })\n    }\n  }\n\n  let textContent = ''\n\n  if (cellData) {\n    textContent = cellData?.map((i) => i?.children?.map((c) => c.text)).join(' ')\n  }\n\n  if (!cellData || !textContent?.length) {\n    textContent = i18n.t('general:noLabel', {\n      label: getTranslation(('label' in field ? field.label : null) || 'data', i18n),\n    })\n  }\n\n  return <WrapElement {...wrapElementProps}>{textContent}</WrapElement>\n}\n"],"names":["getTranslation","Link","formatAdminURL","React","RscEntrySlateCell","props","cellData","className","classNameFromProps","collectionConfig","field","admin","i18n","link","onClick","onClickFromProps","payload","rowData","classNameFromConfigContext","undefined","adminRoute","config","routes","serverURL","WrapElement","wrapElementProps","prefetch","href","slug","path","id","type","collectionSlug","textContent","map","i","children","c","text","join","length","t","label"],"mappings":";AAEA,SAASA,cAAc,QAAyB,2BAA0B;AAC1E,SAASC,IAAI,QAAQ,iBAAgB;AACrC,SAASC,cAAc,QAAQ,iBAAgB;AAC/C,OAAOC,WAAW,QAAO;AAEzB;;CAEC,GACD,OAAO,MAAMC,oBAKT,CAACC;IACH,MAAM,EACJC,QAAQ,EACRC,WAAWC,kBAAkB,EAC7BC,gBAAgB,EAChBC,OAAO,EAAEC,KAAK,EAAE,EAChBD,KAAK,EACLE,IAAI,EACJC,IAAI,EACJC,SAASC,gBAAgB,EACzBC,OAAO,EACPC,OAAO,EACR,GAAGZ;IAEJ,MAAMa,6BAA6BP,SAAS,eAAeA,QAAQA,MAAMJ,SAAS,GAAGY;IAErF,MAAMZ,YACJC,sBACCE,CAAAA,MAAMC,KAAK,IAAI,eAAeD,MAAMC,KAAK,GAAGD,MAAMC,KAAK,CAACJ,SAAS,GAAG,IAAG,KACxEW;IACF,MAAME,aAAaJ,QAAQK,MAAM,CAACC,MAAM,CAACX,KAAK;IAC9C,MAAMY,YAAYP,QAAQK,MAAM,CAACE,SAAS;IAE1C,MAAMT,UAAUC;IAEhB,IAAIS,cAAiD;IAErD,MAAMC,mBAMF;QACFlB;IACF;IAEA,IAAIM,MAAM;QACRY,iBAAiBC,QAAQ,GAAG;QAC5BF,cAAcvB;QACdwB,iBAAiBE,IAAI,GAAGlB,kBAAkBmB,OACtC1B,eAAe;YACbkB;YACAS,MAAM,CAAC,aAAa,EAAEpB,kBAAkBmB,KAAK,CAAC,EAAEX,QAAQa,EAAE,EAAE;YAC5DP;QACF,KACA;IACN;IAEA,IAAI,OAAOT,YAAY,YAAY;QACjCU,cAAc;QACdC,iBAAiBM,IAAI,GAAG;QACxBN,iBAAiBX,OAAO,GAAG;YACzBA,QAAQ;gBACNR;gBACA0B,gBAAgBvB,kBAAkBmB;gBAClCX;YACF;QACF;IACF;IAEA,IAAIgB,cAAc;IAElB,IAAI3B,UAAU;QACZ2B,cAAc3B,UAAU4B,IAAI,CAACC,IAAMA,GAAGC,UAAUF,IAAI,CAACG,IAAMA,EAAEC,IAAI,GAAGC,KAAK;IAC3E;IAEA,IAAI,CAACjC,YAAY,CAAC2B,aAAaO,QAAQ;QACrCP,cAAcrB,KAAK6B,CAAC,CAAC,mBAAmB;YACtCC,OAAO1C,eAAe,AAAC,CAAA,WAAWU,QAAQA,MAAMgC,KAAK,GAAG,IAAG,KAAM,QAAQ9B;QAC3E;IACF;IAEA,qBAAO,KAACY;QAAa,GAAGC,gBAAgB;kBAAGQ;;AAC7C,EAAC"}