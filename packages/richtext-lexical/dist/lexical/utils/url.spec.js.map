{"version":3,"file":"url.spec.js","names":["describe","it","expect","absoluteRegExp","relativeOrAnchorRegExp","validateUrl","shouldMatch","forEach","testCase","test","toBe","shouldNotMatch","not","validUrls","url","invalidUrls"],"sources":["../../../src/lexical/utils/url.spec.ts"],"sourcesContent":["import { describe, it, expect } from 'vitest'\nimport { absoluteRegExp, relativeOrAnchorRegExp, validateUrl } from './url.js'\n\ndescribe('Lexical URL Regex Matchers', () => {\n  describe('relativeOrAnchorRegExp', () => {\n    it('validation for links it should match', async () => {\n      const shouldMatch = [\n        '/path/to/resource',\n        '/file-name.html',\n        '/',\n        '/dir/',\n        '/path.with.dots/',\n        '#anchor',\n        '#section-title',\n        '/path#fragment',\n        '/page?id=123',\n        '/page?id=123#section',\n        '/search?q=test',\n        '/?global=true',\n      ]\n\n      shouldMatch.forEach((testCase) => {\n        expect(relativeOrAnchorRegExp.test(testCase)).toBe(true)\n      })\n    })\n\n    it('validation for links it should not match', async () => {\n      const shouldNotMatch = [\n        'match',\n        'http://example.com',\n        'relative/path',\n        'file.html',\n        'some#fragment',\n        '#',\n        '/#',\n        '/path/with spaces',\n        '',\n        'ftp://example.com',\n      ]\n\n      shouldNotMatch.forEach((testCase) => {\n        expect(relativeOrAnchorRegExp.test(testCase)).not.toBe(true)\n      })\n    })\n  })\n\n  describe('absoluteRegExp', () => {\n    it('validation for links it should match', async () => {\n      const shouldMatch = [\n        'http://example.com',\n        'https://example.com',\n        'ftp://files.example.com',\n        'http://example.com/resource',\n        'https://example.com/resource?key=value',\n        'http://example.com/resource#anchor',\n        'http://www.example.com',\n        'https://sub.example.com/path/file',\n        'mailto:email@example.com',\n        'tel:+1234567890',\n        'http://user:pass@example.com',\n        'www.example.com',\n        'www.example.com/resource',\n        'www.example.com/resource?query=1',\n        'www.example.com#fragment',\n      ]\n\n      shouldMatch.forEach((testCase) => {\n        expect(absoluteRegExp.test(testCase)).toBe(true)\n      })\n    })\n\n    it('validation for links it should not match', async () => {\n      const shouldNotMatch = [\n        '/relative/path',\n        '#anchor',\n        'example.com',\n        '://missing.scheme',\n        'http://',\n        'http:/example.com',\n        'ftp://example .com',\n        'http://example',\n        'not-a-url',\n        'http//example.com',\n        'https://example.com/ spaces',\n      ]\n\n      shouldNotMatch.forEach((testCase) => {\n        expect(absoluteRegExp.test(testCase)).not.toBe(true)\n      })\n    })\n  })\n\n  describe('validateUrl', () => {\n    describe('absolute URLs', () => {\n      it('should validate http and https URLs', () => {\n        const validUrls = [\n          'http://example.com',\n          'https://example.com',\n          'http://www.example.com',\n          'https://sub.example.com/path/file',\n          'http://example.com/resource',\n          'https://example.com/resource?key=value',\n          'http://example.com/resource#anchor',\n        ]\n\n        validUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(true)\n        })\n      })\n\n      it('should validate other protocol URLs', () => {\n        const validUrls = ['ftp://files.example.com', 'mailto:email@example.com', 'tel:+1234567890']\n\n        validUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(true)\n        })\n      })\n\n      it('should validate www URLs without protocol', () => {\n        const validUrls = [\n          'www.example.com',\n          'www.example.com/resource',\n          'www.example.com/resource?query=1',\n          'www.example.com#fragment',\n        ]\n\n        validUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(true)\n        })\n      })\n    })\n\n    describe('relative URLs', () => {\n      it('should validate relative paths', () => {\n        const validUrls = [\n          '/path/to/resource',\n          '/file-name.html',\n          '/',\n          '/dir/',\n          '/path.with.dots/',\n          '/path#fragment',\n        ]\n\n        validUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(true)\n        })\n      })\n    })\n\n    describe('anchor links', () => {\n      it('should validate anchor links', () => {\n        const validUrls = ['#anchor', '#section-title']\n\n        validUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(true)\n        })\n      })\n    })\n\n    describe('with query params', () => {\n      it('should validate relative URLs with query parameters', () => {\n        const validUrls = [\n          '/page?id=123',\n          '/search?q=test',\n          '/products?category=electronics&sort=price',\n          '/path?key=value&another=param',\n          '/page?id=123&filter=active',\n          '/?global=true',\n        ]\n\n        validUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(true)\n        })\n      })\n\n      it('should validate absolute URLs with query parameters', () => {\n        const validUrls = [\n          'https://example.com?id=123',\n          'http://example.com/page?key=value',\n          'www.example.com?search=query',\n          'https://example.com/path?a=1&b=2&c=3',\n        ]\n\n        validUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(true)\n        })\n      })\n\n      it('should validate URLs with query parameters and anchors', () => {\n        const validUrls = [\n          '/page?id=123#section',\n          'https://example.com?key=value#anchor',\n          '/search?q=test#results',\n        ]\n\n        validUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(true)\n        })\n      })\n    })\n\n    describe('edge cases', () => {\n      it('should handle the default https:// case', () => {\n        expect(validateUrl('https://')).toBe(true)\n      })\n\n      it('should return false for empty or invalid URLs', () => {\n        const invalidUrls = [\n          '',\n          'not-a-url',\n          'example.com',\n          'relative/path',\n          'file.html',\n          'some#fragment',\n          'http://',\n          'http:/example.com',\n          'http//example.com',\n        ]\n\n        invalidUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(false)\n        })\n      })\n\n      it('should return false for URLs with spaces', () => {\n        const invalidUrls = [\n          '/path/with spaces',\n          'http://example.com/ spaces',\n          'https://example.com/path with spaces',\n        ]\n\n        invalidUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(false)\n        })\n      })\n\n      it('should return false for malformed URLs', () => {\n        const invalidUrls = ['://missing.scheme', 'ftp://example .com', 'http://example', '#', '/#']\n\n        invalidUrls.forEach((url) => {\n          expect(validateUrl(url)).toBe(false)\n        })\n      })\n    })\n  })\n})\n"],"mappings":"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","ignoreList":[]}