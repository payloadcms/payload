{"version":3,"file":"index.js","names":["useLexicalComposerContext","useLexicalEditable","getTranslation","Button","Collapsible","Drawer","EditDepthProvider","ErrorPill","Form","formatDrawerSlug","FormSubmit","Pill","RenderFields","SectionTitle","useConfig","useDocumentForm","useDocumentInfo","useEditDepth","useFormSubmitted","useServerFunctions","useTranslation","abortAndIgnore","$getNodeByKey","deepCopyObjectSimpleWithoutReactComponents","reduceFieldsToValues","React","useCallback","useEffect","useMemo","useRef","v4","uuid","useEditorConfigContext","useLexicalDrawer","$isBlockNode","BlockContent","removeEmptyArrayValues","BlockComponent","props","cacheBuster","className","baseClass","formData","nodeKey","submitted","id","collectionSlug","globalSlug","fieldProps","featureClientSchemaMap","field","parentLexicalRichTextField","initialLexicalFormState","schemaPath","uuidFromContext","fields","parentDocumentFields","onChangeAbortControllerRef","AbortController","editDepth","errorCount","setErrorCount","useState","config","drawerSlug","slug","depth","toggleDrawer","getDocPreferences","setDocFieldPreferences","editor","isEditable","blockType","getFormState","schemaFieldsPath","initialState","setInitialState","cachedFormState","formState","mergedState","Object","fromEntries","entries","map","fieldName","fieldState","initialValue","value","blockName","passesCondition","valid","hasMounted","prevCacheBuster","current","CustomLabel","setCustomLabel","customComponents","BlockLabel","undefined","CustomBlock","setCustomBlock","Block","abortController","awaitInitialState","state","data","docPermissions","docPreferences","documentFormState","excludeFiles","initialBlockData","operation","readOnly","renderAllFields","signal","newFormStateData","update","node","newData","setFields","_components","isCollapsed","setIsCollapsed","collapsed","componentMapRenderedBlockPath","clientSchemaMap","blocksField","clientBlock","blockReferences","blocksMap","blocks","i18n","t","onChange","prevFormState","submit","controller","newFormState","initialBlockFormState","setTimeout","rowErrorCount","formField","values","removeBlock","remove","blockDisplayName","labels","singular","onCollapsedChange","changedCollapsed","then","currentDocPreferences","currentFieldPreferences","name","collapsedArray","newCollapsed","length","includes","push","splice","indexOf","hello","EditButton","_jsx","buttonStyle","disabled","el","icon","onClick","e","preventDefault","stopPropagation","onMouseDown","round","size","tooltip","label","RemoveButton","BlockCollapsible","Actions","children","collapsibleProps","disableBlockName","editButton","fieldHasErrors","Label","CustomPill","removeButton","filter","Boolean","join","collapsibleStyle","header","_jsxs","pillStyle","admin","path","count","withMessage","_Fragment","onToggle","incomingCollapsedState","blockID","BlockDrawer","title","forceRender","parentIndexPath","parentPath","parentSchemaPath","permissions","programmaticSubmit","beforeSubmit","onSubmit","formSchema"],"sources":["../../../../../src/features/blocks/client/component/index.tsx"],"sourcesContent":["'use client'\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext'\nimport { useLexicalEditable } from '@lexical/react/useLexicalEditable'\nimport { getTranslation } from '@payloadcms/translations'\nimport {\n  Button,\n  Collapsible,\n  Drawer,\n  EditDepthProvider,\n  ErrorPill,\n  Form,\n  formatDrawerSlug,\n  FormSubmit,\n  Pill,\n  RenderFields,\n  SectionTitle,\n  useConfig,\n  useDocumentForm,\n  useDocumentInfo,\n  useEditDepth,\n  useFormSubmitted,\n  useServerFunctions,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { abortAndIgnore } from '@payloadcms/ui/shared'\nimport { $getNodeByKey } from 'lexical'\nimport {\n  type BlocksFieldClient,\n  type ClientBlock,\n  type CollapsedPreferences,\n  type FormState,\n} from 'payload'\nimport { deepCopyObjectSimpleWithoutReactComponents, reduceFieldsToValues } from 'payload/shared'\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react'\nimport { v4 as uuid } from 'uuid'\n\nimport type { BlockFields } from '../../server/nodes/BlocksNode.js'\n\nimport { useEditorConfigContext } from '../../../../lexical/config/client/EditorConfigProvider.js'\nimport './index.scss'\nimport { useLexicalDrawer } from '../../../../utilities/fieldsDrawer/useLexicalDrawer.js'\nimport { $isBlockNode } from '../nodes/BlocksNode.js'\nimport { type BlockCollapsibleWithErrorProps, BlockContent } from './BlockContent.js'\nimport { removeEmptyArrayValues } from './removeEmptyArrayValues.js'\n\ntype Props = {\n  /**\n   * Can be modified by the node in order to trigger the re-fetch of the initial state based on the\n   * formData. This is useful when node.setFields() is explicitly called from outside of the form - in\n   * this case, the new field state is likely not reflected in the form state, so we need to re-fetch\n   */\n  readonly cacheBuster: number\n  readonly className: string\n  readonly formData: BlockFields\n  readonly nodeKey: string\n}\n\nexport const BlockComponent: React.FC<Props> = (props) => {\n  const { cacheBuster, className: baseClass, formData, nodeKey } = props\n  const submitted = useFormSubmitted()\n  const { id, collectionSlug, globalSlug } = useDocumentInfo()\n  const {\n    fieldProps: {\n      featureClientSchemaMap,\n      field: parentLexicalRichTextField,\n      initialLexicalFormState,\n      schemaPath,\n    },\n    uuid: uuidFromContext,\n  } = useEditorConfigContext()\n\n  const { fields: parentDocumentFields } = useDocumentForm()\n  const onChangeAbortControllerRef = useRef(new AbortController())\n  const editDepth = useEditDepth()\n  const [errorCount, setErrorCount] = React.useState(0)\n\n  const { config } = useConfig()\n\n  const drawerSlug = formatDrawerSlug({\n    slug: `lexical-blocks-create-${uuidFromContext}-${formData.id}`,\n    depth: editDepth,\n  })\n  const { toggleDrawer } = useLexicalDrawer(drawerSlug)\n\n  // Used for saving collapsed to preferences (and gettin' it from there again)\n  // Remember, these preferences are scoped to the whole document, not just this form. This\n  // is important to consider for the data path used in setDocFieldPreferences\n  const { getDocPreferences, setDocFieldPreferences } = useDocumentInfo()\n  const [editor] = useLexicalComposerContext()\n  const isEditable = useLexicalEditable()\n\n  const blockType = formData.blockType\n\n  const { getFormState } = useServerFunctions()\n  const schemaFieldsPath = `${schemaPath}.lexical_internal_feature.blocks.lexical_blocks.${blockType}.fields`\n\n  const [initialState, setInitialState] = React.useState<false | FormState | undefined>(() => {\n    // Initial form state that was calculated server-side. May have stale values\n    const cachedFormState = initialLexicalFormState?.[formData.id]?.formState\n    if (!cachedFormState) {\n      return false\n    }\n\n    // Merge current formData values into the cached form state\n    // This ensures that when the component remounts (e.g., due to view changes), we don't lose user edits\n    const mergedState = Object.fromEntries(\n      Object.entries(cachedFormState).map(([fieldName, fieldState]) => [\n        fieldName,\n        fieldName in formData\n          ? {\n              ...fieldState,\n              initialValue: formData[fieldName],\n              value: formData[fieldName],\n            }\n          : fieldState,\n      ]),\n    )\n\n    // Manually add blockName, as it's not part of cachedFormState\n    mergedState.blockName = {\n      initialValue: formData.blockName,\n      passesCondition: true,\n      valid: true,\n      value: formData.blockName,\n    }\n\n    return mergedState\n  })\n\n  const hasMounted = useRef(false)\n  const prevCacheBuster = useRef(cacheBuster)\n  useEffect(() => {\n    if (hasMounted.current) {\n      if (prevCacheBuster.current !== cacheBuster) {\n        setInitialState(false)\n      }\n      prevCacheBuster.current = cacheBuster\n    } else {\n      hasMounted.current = true\n    }\n  }, [cacheBuster])\n\n  const [CustomLabel, setCustomLabel] = React.useState<React.ReactNode | undefined>(\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    initialState?.['_components']?.customComponents?.BlockLabel ?? undefined,\n  )\n\n  const [CustomBlock, setCustomBlock] = React.useState<React.ReactNode | undefined>(\n    // @ts-expect-error - vestiges of when tsconfig was not strict. Feel free to improve\n    initialState?.['_components']?.customComponents?.Block ?? undefined,\n  )\n\n  // Initial state for newly created blocks\n  useEffect(() => {\n    const abortController = new AbortController()\n\n    const awaitInitialState = async () => {\n      /*\n       * This will only run if a new block is created. For all existing blocks that are loaded when the document is loaded, or when the form is saved,\n       * this is not run, as the lexical field RSC will fetch the state server-side and pass it to the client. That way, we avoid unnecessary client-side\n       * requests. Though for newly created blocks, we need to fetch the state client-side, as the server doesn't know about the block yet.\n       */\n      const { state } = await getFormState({\n        id,\n        collectionSlug,\n        data: formData,\n        docPermissions: { fields: true },\n        docPreferences: await getDocPreferences(),\n        documentFormState: deepCopyObjectSimpleWithoutReactComponents(parentDocumentFields, {\n          excludeFiles: true,\n        }),\n        globalSlug,\n        initialBlockData: formData,\n        operation: 'update',\n        readOnly: !isEditable,\n        renderAllFields: true,\n        schemaPath: schemaFieldsPath,\n        signal: abortController.signal,\n      })\n\n      if (state) {\n        state.blockName = {\n          initialValue: formData.blockName,\n          passesCondition: true,\n          valid: true,\n          value: formData.blockName,\n        }\n\n        const newFormStateData: BlockFields = reduceFieldsToValues(\n          deepCopyObjectSimpleWithoutReactComponents(state, { excludeFiles: true }),\n          true,\n        ) as BlockFields\n\n        // Things like default values may come back from the server => update the node with the new data\n        editor.update(() => {\n          const node = $getNodeByKey(nodeKey)\n          if (node && $isBlockNode(node)) {\n            const newData = newFormStateData\n            newData.blockType = blockType\n\n            node.setFields(newData, true)\n          }\n        })\n\n        setInitialState(state)\n        setCustomLabel(state._components?.customComponents?.BlockLabel ?? undefined)\n        setCustomBlock(state._components?.customComponents?.Block ?? undefined)\n      }\n    }\n\n    if (formData && !initialState) {\n      void awaitInitialState()\n    }\n\n    return () => {\n      abortAndIgnore(abortController)\n    }\n  }, [\n    getFormState,\n    schemaFieldsPath,\n    isEditable,\n    id,\n    formData,\n    editor,\n    nodeKey,\n    initialState,\n    collectionSlug,\n    globalSlug,\n    getDocPreferences,\n    parentDocumentFields,\n    blockType,\n  ])\n\n  const [isCollapsed, setIsCollapsed] = React.useState<boolean>(\n    initialLexicalFormState?.[formData.id]?.collapsed ?? false,\n  )\n\n  const componentMapRenderedBlockPath = `${schemaPath}.lexical_internal_feature.blocks.lexical_blocks.${blockType}`\n\n  const clientSchemaMap = featureClientSchemaMap['blocks']\n\n  const blocksField: BlocksFieldClient | undefined = clientSchemaMap?.[\n    componentMapRenderedBlockPath\n  ]?.[0] as BlocksFieldClient\n\n  const clientBlock: ClientBlock | undefined = blocksField.blockReferences\n    ? typeof blocksField?.blockReferences?.[0] === 'string'\n      ? config.blocksMap[blocksField?.blockReferences?.[0]]\n      : blocksField?.blockReferences?.[0]\n    : blocksField?.blocks?.[0]\n\n  const { i18n, t } = useTranslation<object, string>()\n\n  const onChange = useCallback(\n    async ({ formState: prevFormState, submit }: { formState: FormState; submit?: boolean }) => {\n      abortAndIgnore(onChangeAbortControllerRef.current)\n\n      const controller = new AbortController()\n      onChangeAbortControllerRef.current = controller\n\n      const { state: newFormState } = await getFormState({\n        id,\n        collectionSlug,\n        docPermissions: {\n          fields: true,\n        },\n        docPreferences: await getDocPreferences(),\n        documentFormState: deepCopyObjectSimpleWithoutReactComponents(parentDocumentFields, {\n          excludeFiles: true,\n        }),\n        formState: prevFormState,\n        globalSlug,\n        initialBlockFormState: prevFormState,\n        operation: 'update',\n        readOnly: !isEditable,\n        renderAllFields: submit ? true : false,\n        schemaPath: schemaFieldsPath,\n        signal: controller.signal,\n      })\n\n      if (!newFormState) {\n        return prevFormState\n      }\n\n      if (prevFormState.blockName) {\n        newFormState.blockName = prevFormState.blockName\n      }\n\n      const newFormStateData: BlockFields = reduceFieldsToValues(\n        removeEmptyArrayValues({\n          fields: deepCopyObjectSimpleWithoutReactComponents(newFormState, { excludeFiles: true }),\n        }),\n        true,\n      ) as BlockFields\n\n      setTimeout(() => {\n        editor.update(() => {\n          const node = $getNodeByKey(nodeKey)\n          if (node && $isBlockNode(node)) {\n            const newData = newFormStateData\n            newData.blockType = blockType\n            node.setFields(newData, true)\n          }\n        })\n      }, 0)\n\n      if (submit) {\n        setCustomLabel(newFormState._components?.customComponents?.BlockLabel ?? undefined)\n        setCustomBlock(newFormState._components?.customComponents?.Block ?? undefined)\n\n        let rowErrorCount = 0\n        for (const formField of Object.values(newFormState)) {\n          if (formField?.valid === false) {\n            rowErrorCount++\n          }\n        }\n        setErrorCount(rowErrorCount)\n      }\n\n      return newFormState\n    },\n\n    [\n      getFormState,\n      id,\n      collectionSlug,\n      getDocPreferences,\n      globalSlug,\n      schemaFieldsPath,\n      blockType,\n      parentDocumentFields,\n      isEditable,\n      editor,\n      nodeKey,\n    ],\n  )\n\n  useEffect(() => {\n    return () => {\n      abortAndIgnore(onChangeAbortControllerRef.current)\n    }\n  }, [])\n\n  const removeBlock = useCallback(() => {\n    editor.update(() => {\n      $getNodeByKey(nodeKey)?.remove()\n    })\n  }, [editor, nodeKey])\n\n  const blockDisplayName = clientBlock?.labels?.singular\n    ? getTranslation(clientBlock.labels.singular, i18n)\n    : clientBlock?.slug\n\n  const onCollapsedChange = useCallback(\n    (changedCollapsed: boolean) => {\n      void getDocPreferences().then((currentDocPreferences) => {\n        const currentFieldPreferences =\n          currentDocPreferences?.fields?.[parentLexicalRichTextField.name]\n\n        const collapsedArray = currentFieldPreferences?.collapsed\n\n        const newCollapsed: CollapsedPreferences =\n          collapsedArray && collapsedArray?.length ? collapsedArray : []\n\n        if (changedCollapsed) {\n          if (!newCollapsed.includes(formData.id)) {\n            newCollapsed.push(formData.id)\n          }\n        } else {\n          if (newCollapsed.includes(formData.id)) {\n            newCollapsed.splice(newCollapsed.indexOf(formData.id), 1)\n          }\n        }\n\n        setDocFieldPreferences(parentLexicalRichTextField.name, {\n          collapsed: newCollapsed,\n          hello: 'hi',\n        })\n      })\n    },\n    [getDocPreferences, parentLexicalRichTextField.name, setDocFieldPreferences, formData.id],\n  )\n\n  const EditButton = useMemo(\n    () => () => (\n      <Button\n        buttonStyle=\"icon-label\"\n        className={`${baseClass}__editButton`}\n        disabled={!isEditable}\n        el=\"button\"\n        icon=\"edit\"\n        onClick={(e) => {\n          e.preventDefault()\n          e.stopPropagation()\n          toggleDrawer()\n          return false\n        }}\n        onMouseDown={(e) => {\n          // Needed to preserve lexical selection for toggleDrawer lexical selection restore.\n          // I believe this is needed due to this button (usually) being inside of a collapsible.\n          e.preventDefault()\n        }}\n        round\n        size=\"small\"\n        tooltip={t('lexical:blocks:inlineBlocks:edit', { label: blockDisplayName })}\n      />\n    ),\n    [baseClass, isEditable, t, blockDisplayName, toggleDrawer],\n  )\n\n  const RemoveButton = useMemo(\n    () => () => (\n      <Button\n        buttonStyle=\"icon-label\"\n        className={`${baseClass}__removeButton`}\n        disabled={!isEditable}\n        icon=\"x\"\n        onClick={(e) => {\n          e.preventDefault()\n          removeBlock()\n        }}\n        round\n        tooltip=\"Remove Block\"\n      />\n    ),\n    [baseClass, isEditable, removeBlock],\n  )\n\n  const BlockCollapsible = useMemo(\n    () =>\n      ({\n        Actions,\n        children,\n        className,\n        collapsibleProps,\n        disableBlockName,\n        editButton,\n        errorCount,\n        fieldHasErrors,\n        Label,\n        Pill: CustomPill,\n        removeButton,\n      }: BlockCollapsibleWithErrorProps) => {\n        return (\n          <div className={`${baseClass}__container ${baseClass}-${blockType}`}>\n            <Collapsible\n              className={[\n                `${baseClass}__row`,\n                fieldHasErrors ? `${baseClass}__row--has-errors` : `${baseClass}__row--no-errors`,\n                className,\n              ]\n                .filter(Boolean)\n                .join(' ')}\n              collapsibleStyle={fieldHasErrors ? 'error' : 'default'}\n              header={\n                <div className={`${baseClass}__block-header`}>\n                  {typeof Label !== 'undefined' ? (\n                    Label\n                  ) : typeof CustomLabel !== 'undefined' ? (\n                    CustomLabel\n                  ) : (\n                    <div className={`${baseClass}__block-label`}>\n                      {typeof CustomPill !== 'undefined' ? (\n                        CustomPill\n                      ) : (\n                        <Pill\n                          className={`${baseClass}__block-pill ${baseClass}__block-pill-${blockType}`}\n                          pillStyle=\"white\"\n                          size=\"small\"\n                        >\n                          {blockDisplayName ?? blockType}\n                        </Pill>\n                      )}\n                      {!disableBlockName && !clientBlock?.admin?.disableBlockName && (\n                        <SectionTitle path=\"blockName\" readOnly={!isEditable} />\n                      )}\n\n                      {fieldHasErrors && (\n                        <ErrorPill count={errorCount ?? 0} i18n={i18n} withMessage />\n                      )}\n                    </div>\n                  )}\n\n                  <div className={`${baseClass}__block-actions`}>\n                    {typeof Actions !== 'undefined' ? (\n                      Actions\n                    ) : (\n                      <>\n                        {(CustomBlock && editButton !== false) || (!CustomBlock && editButton) ? (\n                          <EditButton />\n                        ) : null}\n                        {removeButton !== false && isEditable ? <RemoveButton /> : null}\n                      </>\n                    )}\n                  </div>\n                </div>\n              }\n              isCollapsed={isCollapsed}\n              key={0}\n              onToggle={(incomingCollapsedState) => {\n                onCollapsedChange(incomingCollapsedState)\n                setIsCollapsed(incomingCollapsedState)\n              }}\n              {...(collapsibleProps || {})}\n            >\n              {children}\n            </Collapsible>\n          </div>\n        )\n      },\n    [\n      CustomBlock,\n      CustomLabel,\n      EditButton,\n      RemoveButton,\n      blockDisplayName,\n      baseClass,\n      clientBlock?.admin?.disableBlockName,\n      blockType,\n      i18n,\n      isCollapsed,\n      onCollapsedChange,\n      isEditable,\n    ],\n  )\n\n  const blockID = formData?.id\n\n  const BlockDrawer = useMemo(\n    () => () => (\n      <EditDepthProvider>\n        <Drawer\n          className={''}\n          slug={drawerSlug}\n          title={t(`lexical:blocks:inlineBlocks:${blockID ? 'edit' : 'create'}`, {\n            label: blockDisplayName ?? t('lexical:blocks:inlineBlocks:label'),\n          })}\n        >\n          {initialState ? (\n            <>\n              <RenderFields\n                fields={clientBlock?.fields ?? []}\n                forceRender\n                parentIndexPath=\"\"\n                parentPath=\"\" // See Blocks feature path for details as for why this is empty\n                parentSchemaPath={schemaFieldsPath}\n                permissions={true}\n                readOnly={!isEditable}\n              />\n              <FormSubmit programmaticSubmit={true}>{t('fields:saveChanges')}</FormSubmit>\n            </>\n          ) : null}\n        </Drawer>\n      </EditDepthProvider>\n    ),\n    [\n      initialState,\n      drawerSlug,\n      blockID,\n      blockDisplayName,\n      t,\n      isEditable,\n      clientBlock?.fields,\n      schemaFieldsPath,\n      // DO NOT ADD FORMDATA HERE! Adding formData will kick you out of sub block editors while writing.\n    ],\n  )\n\n  // Memoized Form JSX\n  const Block = useMemo(() => {\n    if (!initialState) {\n      return null\n    }\n    return (\n      <Form\n        beforeSubmit={[\n          async ({ formState }) => {\n            // This is only called when form is submitted from drawer - usually only the case if the block has a custom Block component\n            return await onChange({ formState, submit: true })\n          },\n        ]}\n        el=\"div\"\n        fields={clientBlock?.fields ?? []}\n        initialState={initialState}\n        onChange={[onChange]}\n        onSubmit={(formState, newData) => {\n          // This is only called when form is submitted from drawer - usually only the case if the block has a custom Block component\n          newData.blockType = blockType\n          editor.update(() => {\n            const node = $getNodeByKey(nodeKey)\n            if (node && $isBlockNode(node)) {\n              node.setFields(newData as BlockFields, true)\n            }\n          })\n          toggleDrawer()\n        }}\n        submitted={submitted}\n        uuid={uuid()}\n      >\n        <BlockContent\n          baseClass={baseClass}\n          BlockDrawer={BlockDrawer}\n          Collapsible={BlockCollapsible}\n          CustomBlock={CustomBlock}\n          EditButton={EditButton}\n          errorCount={errorCount}\n          formSchema={clientBlock?.fields ?? []}\n          initialState={initialState}\n          nodeKey={nodeKey}\n          RemoveButton={RemoveButton}\n        />\n      </Form>\n    )\n  }, [\n    BlockCollapsible,\n    BlockDrawer,\n    CustomBlock,\n    blockType,\n    RemoveButton,\n    EditButton,\n    baseClass,\n    editor,\n    errorCount,\n    toggleDrawer,\n    clientBlock?.fields,\n    // DO NOT ADD FORMDATA HERE! Adding formData will kick you out of sub block editors while writing.\n    initialState,\n    nodeKey,\n    onChange,\n    submitted,\n  ])\n\n  if (!clientBlock) {\n    return (\n      <BlockCollapsible disableBlockName={true} fieldHasErrors={true}>\n        <div className={`${baseClass}-not-found`}>\n          Error: Block '{blockType}' not found in the config but exists in the lexical data\n        </div>\n      </BlockCollapsible>\n    )\n  }\n\n  return Block\n}\n"],"mappings":"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","ignoreList":[]}