{"version":3,"file":"jsx.spec.js","names":["describe","it","expect","extractPropsFromJSXPropsString","propsToJSXString","INPUT_AND_OUTPUT","input","output","key","inputFromOutput","object","test","global","packageId","uniqueId","update","hello","something","nested","replace","propsObject","propsString","console","log","toStrictEqual","originalInput","props","replaceAll","toBe"],"sources":["../../../src/utilities/jsx/jsx.spec.ts"],"sourcesContent":["import { describe, it, expect } from 'vitest'\nimport { extractPropsFromJSXPropsString } from './extractPropsFromJSXPropsString.js'\nimport { propsToJSXString } from './jsx.js'\n\ndescribe('jsx', () => {\n  describe('prop string to object', () => {\n    const INPUT_AND_OUTPUT: {\n      input: string\n      inputFromOutput?: string\n      output: Record<string, any>\n    }[] = [\n      {\n        input: 'key=\"value\"',\n        output: {\n          key: 'value',\n        },\n      },\n      {\n        input: \"key='value'\",\n        output: {\n          key: 'value',\n        },\n        inputFromOutput: 'key=\"value\"',\n      },\n      {\n        input: 'key={[1, 2, 3]}',\n        output: {\n          key: [1, 2, 3],\n        },\n      },\n      {\n        input: 'key={[1, 2, 3, [1, 2]]}',\n        output: {\n          key: [1, 2, 3, [1, 2]],\n        },\n      },\n      {\n        input: 'object={4}',\n        output: {\n          object: 4,\n        },\n      },\n      {\n        input: 'object={{\"test\": 1}}',\n        output: {\n          object: { test: 1 },\n        },\n      },\n      {\n        input: 'object={[1, 2, 3, [1, 2]]}',\n        output: {\n          object: [1, 2, 3, [1, 2]],\n        },\n      },\n      {\n        input: 'object={[1, 2]}',\n        output: {\n          object: [1, 2],\n        },\n      },\n      {\n        input: 'key=\"value\" object={{key: \"value\"}}',\n        inputFromOutput: 'key=\"value\" object={{\"key\": \"value\"}}',\n        output: {\n          key: 'value',\n          object: { key: 'value' },\n        },\n      },\n      {\n        input: 'global packageId=\"myId\" uniqueId=\"some unique id!\" update',\n        output: {\n          global: true,\n          packageId: 'myId',\n          uniqueId: 'some unique id!',\n          update: true,\n        },\n      },\n      {\n        input:\n          'global key=\"value\" object={{key: \"value\", something: \"test\", hello: 1}} packageId=\"myId\" uniqueId=\"some unique id!\" update',\n        inputFromOutput:\n          'global key=\"value\" object={{\"hello\": 1, \"key\": \"value\", \"something\": \"test\"}} packageId=\"myId\" uniqueId=\"some unique id!\" update',\n        output: {\n          global: true,\n          key: 'value',\n          object: { hello: 1, key: 'value', something: 'test' },\n          packageId: 'myId',\n          uniqueId: 'some unique id!',\n          update: true,\n        },\n      },\n      {\n        input:\n          'object={{hello: 1, key: \"value\", nested: { key: \"value\" }, something: \"test\", test: [1, 2, 3]}}',\n        inputFromOutput:\n          'object={{\"hello\": 1, \"key\": \"value\", \"nested\": {\"key\": \"value\"}, \"something\": \"test\", \"test\": [1, 2, 3]}}',\n        output: {\n          object: {\n            hello: 1,\n            key: 'value',\n            nested: { key: 'value' },\n            something: 'test',\n            test: [1, 2, 3],\n          },\n        },\n      },\n      {\n        input:\n          'global key=\"value\" object={{hello: 1, key: \"value\", nested: { key: \"value\" }, something: \"test\", test: [1, 2, 3]}} packageId=\"myId\" uniqueId=\"some unique id!\" update',\n        inputFromOutput:\n          'global key=\"value\" object={{\"hello\": 1, \"key\": \"value\", \"nested\": { \"key\": \"value\" }, \"something\": \"test\", \"test\": [1, 2, 3]}} packageId=\"myId\" uniqueId=\"some unique id!\" update',\n        output: {\n          global: true,\n          key: 'value',\n          object: {\n            hello: 1,\n            key: 'value',\n            nested: { key: 'value' },\n            something: 'test',\n            test: [1, 2, 3],\n          },\n          packageId: 'myId',\n          uniqueId: 'some unique id!',\n          update: true,\n        },\n      },\n      {\n        // Test if unquoted property keys in objects within arrays are supprted. This is\n        // supported through the more lenient JSOX parser, instead of using JSON.parse()\n        input: 'key={[1, 2, { hello: \"there\" }]}',\n        inputFromOutput: 'key={[1, 2, { \"hello\": \"there\" }]}',\n        output: {\n          key: [1, 2, { hello: 'there' }],\n        },\n      },\n      {\n        // Test if ` strings work\n        input: `key={[1, 2, { hello: \\`there\\` }]}`,\n        inputFromOutput: 'key={[1, 2, { \"hello\": \"there\" }]}',\n        output: {\n          key: [1, 2, { hello: 'there' }],\n        },\n      },\n      {\n        // Test if multiline ` strings work\n        input: `key={[1, 2, { hello: \\`Hello\nthere\\` }]}`,\n        inputFromOutput: 'key={[1, 2, { \"hello\": \"Hello\\\\nthere\" }]}',\n        output: {\n          key: [1, 2, { hello: 'Hello\\nthere' }],\n        },\n      },\n    ]\n\n    for (const { input, output } of INPUT_AND_OUTPUT) {\n      it(`can correctly convert to object: \"${input.replace(/\\n/g, '\\\\n')}\"`, () => {\n        const propsObject = extractPropsFromJSXPropsString({ propsString: input })\n        console.log({ output, propsObject })\n\n        expect(propsObject).toStrictEqual(output)\n      })\n    }\n\n    for (const { input: originalInput, inputFromOutput, output } of INPUT_AND_OUTPUT) {\n      const input = inputFromOutput || originalInput\n      it(`can correctly convert from object: \"${input.replace(/\\n/g, '\\\\n')}\"`, () => {\n        const propsString = propsToJSXString({ props: output })\n        console.log({ input, propsString })\n\n        expect(propsString.replaceAll(' ', '')).toBe(input.replaceAll(' ', ''))\n      })\n    }\n  })\n})\n"],"mappings":"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","ignoreList":[]}