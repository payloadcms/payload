"use client";import{a as h}from"./chunk-DBWINSQN.js";import{a as f}from"./chunk-F26IQ5RE.js";import{jsx as o,jsxs as c}from"react/jsx-runtime";import{useLexicalComposerContext as S}from"@lexical/react/LexicalComposerContext.js";import{useLexicalEditable as L}from"@lexical/react/useLexicalEditable";import{getTranslation as j}from"@payloadcms/translations";import{Button as b,useConfig as A,usePayloadAPI as B,useTranslation as I}from"@payloadcms/ui";import{$getNodeByKey as P}from"lexical";import{formatAdminURL as k}from"payload/shared";import H,{useCallback as K,useReducer as M,useRef as O,useState as U}from"react";var _={depth:0},Z=R=>{let{className:e,data:{relationTo:g,value:a},nodeKey:s}=R;if(typeof a=="object")throw new Error("Relationship value should be a string or number. The Lexical Relationship component should not receive the populated value object.");let v=O(null),[l]=S(),i=L(),{config:{routes:{api:C},serverURL:N},getEntityConfig:w}=A(),[t]=U(()=>w({collectionSlug:g})),{i18n:x,t:n}=I(),[u,D]=M(r=>r+1,0),[{data:m},{setParams:d}]=B(k({apiRoute:C,path:`/${t.slug}/${a}`,serverURL:N}),{initialParams:_}),{closeDocumentDrawer:p,DocumentDrawer:$,DocumentDrawerToggler:E}=f({id:a,collectionSlug:t.slug}),T=K(()=>{l.update(()=>{P(s)?.remove()})},[l,s]),y=H.useCallback(()=>{d({..._,cacheBust:u}),p(),D()},[u,d,p]);return c("div",{className:`${e}__contents`,contentEditable:!1,ref:v,children:[c("div",{className:`${e}__wrap`,children:[o("p",{className:`${e}__label`,children:n("fields:labelRelationship",{label:t.labels?.singular?j(t.labels?.singular,x):t.slug})}),o(E,{className:`${e}__doc-drawer-toggler`,children:o("p",{className:`${e}__title`,children:m?m[t?.admin?.useAsTitle||"id"]:a})})]}),i&&c("div",{className:`${e}__actions`,children:[o(b,{buttonStyle:"icon-label",className:`${e}__swapButton`,disabled:!i,el:"button",icon:"swap",onClick:()=>{s&&l.dispatchCommand(h,{replace:{nodeKey:s}})},round:!0,tooltip:n("fields:swapRelationship")}),o(b,{buttonStyle:"icon-label",className:`${e}__removeButton`,disabled:!i,icon:"x",onClick:r=>{r.preventDefault(),T()},round:!0,tooltip:n("fields:removeRelationship")})]}),!!a&&o($,{onSave:y})]})};export{Z as RelationshipComponent};
//# sourceMappingURL=RelationshipComponent-BG3DPV3T.js.map
