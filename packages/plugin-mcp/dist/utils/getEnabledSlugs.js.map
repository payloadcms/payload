{"version":3,"sources":["../../src/utils/getEnabledSlugs.ts"],"sourcesContent":["import type { EntityConfig } from '../types.js'\n\nimport { adminEntitySettings } from './adminEntitySettings.js'\n\n/**\n * Extracts enabled slugs from collections or globals configuration.\n * A slug is considered enabled if:\n * 1. enabled is set to true (fully enabled)\n * 2. enabled is an object with at least one operation set to true\n *\n * @param config - The collections or globals configuration object\n * @param configType - The type of configuration ('collection' or 'global')\n * @returns Array of enabled slugs\n */\nexport const getEnabledSlugs = (\n  config: EntityConfig | undefined,\n  configType: 'collection' | 'global',\n): string[] => {\n  return Object.keys(config || {}).filter((slug) => {\n    const entityConfig = config?.[slug]\n    const operations = adminEntitySettings[configType]\n\n    // Check if fully enabled (boolean true)\n    const fullyEnabled =\n      typeof entityConfig?.enabled === 'boolean' && entityConfig?.enabled === true\n\n    if (fullyEnabled) {\n      return true\n    }\n\n    // Check if partially enabled (at least one operation is enabled)\n    const enabled = entityConfig?.enabled\n    if (typeof enabled !== 'boolean' && enabled) {\n      return operations.some((operation) => {\n        const operationEnabled = enabled[operation.name as keyof typeof enabled]\n        return typeof operationEnabled === 'boolean' && operationEnabled === true\n      })\n    }\n\n    return false\n  })\n}\n"],"names":["adminEntitySettings","getEnabledSlugs","config","configType","Object","keys","filter","slug","entityConfig","operations","fullyEnabled","enabled","some","operation","operationEnabled","name"],"mappings":"AAEA,SAASA,mBAAmB,QAAQ,2BAA0B;AAE9D;;;;;;;;;CASC,GACD,OAAO,MAAMC,kBAAkB,CAC7BC,QACAC;IAEA,OAAOC,OAAOC,IAAI,CAACH,UAAU,CAAC,GAAGI,MAAM,CAAC,CAACC;QACvC,MAAMC,eAAeN,QAAQ,CAACK,KAAK;QACnC,MAAME,aAAaT,mBAAmB,CAACG,WAAW;QAElD,wCAAwC;QACxC,MAAMO,eACJ,OAAOF,cAAcG,YAAY,aAAaH,cAAcG,YAAY;QAE1E,IAAID,cAAc;YAChB,OAAO;QACT;QAEA,iEAAiE;QACjE,MAAMC,UAAUH,cAAcG;QAC9B,IAAI,OAAOA,YAAY,aAAaA,SAAS;YAC3C,OAAOF,WAAWG,IAAI,CAAC,CAACC;gBACtB,MAAMC,mBAAmBH,OAAO,CAACE,UAAUE,IAAI,CAAyB;gBACxE,OAAO,OAAOD,qBAAqB,aAAaA,qBAAqB;YACvE;QACF;QAEA,OAAO;IACT;AACF,EAAC"}