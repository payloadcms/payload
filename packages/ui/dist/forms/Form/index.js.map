{"version":3,"file":"index.js","names":["dequal","useRouter","serialize","deepCopyObjectSimpleWithoutReactComponents","getDataByPath","getDataByPathFunc","getSiblingData","getSiblingDataFunc","hasDraftValidationEnabled","reduceFieldsToValues","wait","React","useCallback","useEffect","useReducer","useRef","useState","toast","FieldErrorsToast","useDebouncedEffect","useEffectEvent","useQueue","useThrottledEffect","useAuth","useConfig","useDocumentInfo","useLocale","useOperation","useRouteTransition","useServerFunctions","useTranslation","useUploadHandlers","abortAndIgnore","handleAbortRef","requests","BackgroundProcessingContext","DocumentFormContext","FormContext","FormFieldsContext","FormWatchContext","InitializingContext","ModifiedContext","ProcessingContext","SubmittedContext","useDocumentForm","errorMessages","fieldReducer","initContextState","baseClass","Form","props","id","collectionSlug","docConfig","docPermissions","getDocPreferences","globalSlug","validateDrafts","action","beforeSubmit","children","className","disabled","disabledFromProps","disableSuccessStatus","disableValidationOnSubmit","el","handleResponse","initialState","isDocumentForm","isInitializing","initializingFromProps","onChange","onSubmit","onSuccess","redirect","submitted","submittedFromProps","uuid","waitForAutocomplete","method","undefined","router","documentForm","code","locale","i18n","t","refreshCookie","user","operation","queueTask","getFormState","startRouteTransition","getUploadHandler","config","setDisabled","isMounted","setIsMounted","setSubmitted","isValid","setIsValid","initializing","setInitializing","processing","setProcessing","backgroundProcessing","_setBackgroundProcessing","backgroundProcessingRef","modifiedWhileProcessingRef","setBackgroundProcessing","current","modified","_setModified","setModified","formRef","contextRef","abortResetFormRef","isFirstRenderRef","fieldsReducer","formState","dispatchFields","fields","prevFormState","validateForm","validatedFieldState","data","getData","validationPromises","Object","entries","map","path","field","validatedField","pathSegments","split","passesCondition","validationResult","valid","validate","valueToValidate","value","rows","Array","isArray","blockData","event","preferences","req","payload","siblingData","errorMessage","Promise","all","type","state","submit","options","e","acceptValues","actionArg","context","disableFormWhileProcessing","disableSuccessStatusFromArgs","methodToUse","overrides","overridesFromArgs","skipValidation","disableToast","preventDefault","errorToast","successToast","promise","resolve","reject","hasFormSubmitAction","success","error","loading","stopPropagation","serializableFormState","excludeFiles","revalidatedFormState","reduce","priorOnChange","beforeSubmitFn","result","every","key","formData","createFormData","mergeOverrideData","Boolean","res","toLowerCase","body","headers","language","contentType","get","isJSON","indexOf","json","status","newFormState","prevStateRef","serverState","push","message","errors","fieldErrors","nonFieldErrors","fieldErrs","nonFieldErrs","err","newFieldErrs","newNonFieldErrs","forEach","dataError","_jsx","statusText","console","getFields","getField","dataFromArgs","file","upload","handler","filename","name","clientUploadContext","updateFilename","JSON","stringify","mimeType","size","dataToSerialize","_payload","indices","nullsAsUndefineds","reset","controller","docPreferences","newState","renderAllFields","schemaPath","signal","replaceState","addFieldRow","blockType","rowIndex","rowIndexArg","subFieldState","newRows","length","moveFieldRow","moveFromIndex","moveToIndex","removeFieldRow","replaceFieldRow","currentRows","abortOnChange","optimize","sanitize","handleLocaleChange","classes","filter","join","executeOnChange","onChangeFn","DocumentFormContextComponent","Fragment","documentFormContextProps","El","noValidate","ref","Provider","useAllFormFields","useForm","useFormFields","useFormModified","useFormProcessing","useFormSubmitted","useWatchForm"],"sources":["../../../src/forms/Form/index.tsx"],"sourcesContent":["'use client'\nimport { dequal } from 'dequal/lite' // lite: no need for Map and Set support\nimport { useRouter } from 'next/navigation.js'\nimport { serialize } from 'object-to-formdata'\nimport { type FormState, type PayloadRequest } from 'payload'\nimport {\n  deepCopyObjectSimpleWithoutReactComponents,\n  getDataByPath as getDataByPathFunc,\n  getSiblingData as getSiblingDataFunc,\n  hasDraftValidationEnabled,\n  reduceFieldsToValues,\n  wait,\n} from 'payload/shared'\nimport React, { useCallback, useEffect, useReducer, useRef, useState } from 'react'\nimport { toast } from 'sonner'\n\nimport type {\n  CreateFormData,\n  Context as FormContextType,\n  FormProps,\n  GetDataByPath,\n  Submit,\n  SubmitOptions,\n} from './types.js'\n\nimport { FieldErrorsToast } from '../../elements/Toasts/fieldErrors.js'\nimport { useDebouncedEffect } from '../../hooks/useDebouncedEffect.js'\nimport { useEffectEvent } from '../../hooks/useEffectEvent.js'\nimport { useQueue } from '../../hooks/useQueue.js'\nimport { useThrottledEffect } from '../../hooks/useThrottledEffect.js'\nimport { useAuth } from '../../providers/Auth/index.js'\nimport { useConfig } from '../../providers/Config/index.js'\nimport { useDocumentInfo } from '../../providers/DocumentInfo/index.js'\nimport { useLocale } from '../../providers/Locale/index.js'\nimport { useOperation } from '../../providers/Operation/index.js'\nimport { useRouteTransition } from '../../providers/RouteTransition/index.js'\nimport { useServerFunctions } from '../../providers/ServerFunctions/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { useUploadHandlers } from '../../providers/UploadHandlers/index.js'\nimport { abortAndIgnore, handleAbortRef } from '../../utilities/abortAndIgnore.js'\nimport { requests } from '../../utilities/api.js'\nimport {\n  BackgroundProcessingContext,\n  DocumentFormContext,\n  FormContext,\n  FormFieldsContext,\n  FormWatchContext,\n  InitializingContext,\n  ModifiedContext,\n  ProcessingContext,\n  SubmittedContext,\n  useDocumentForm,\n} from './context.js'\nimport { errorMessages } from './errorMessages.js'\nimport { fieldReducer } from './fieldReducer.js'\nimport { initContextState } from './initContextState.js'\n\nconst baseClass = 'form'\n\nexport const Form: React.FC<FormProps> = (props) => {\n  const { id, collectionSlug, docConfig, docPermissions, getDocPreferences, globalSlug } =\n    useDocumentInfo()\n\n  const validateDrafts = hasDraftValidationEnabled(docConfig)\n\n  const {\n    action,\n    beforeSubmit,\n    children,\n    className,\n    disabled: disabledFromProps,\n    disableSuccessStatus,\n    disableValidationOnSubmit,\n    // fields: fieldsFromProps = collection?.fields || global?.fields,\n    el,\n    handleResponse,\n    initialState, // fully formed initial field state\n    isDocumentForm,\n    isInitializing: initializingFromProps,\n    onChange,\n    onSubmit,\n    onSuccess,\n    redirect,\n    submitted: submittedFromProps,\n    uuid,\n    waitForAutocomplete,\n  } = props\n\n  const method = 'method' in props ? props?.method : undefined\n\n  const router = useRouter()\n\n  const documentForm = useDocumentForm()\n\n  const { code: locale } = useLocale()\n  const { i18n, t } = useTranslation()\n  const { refreshCookie, user } = useAuth()\n  const operation = useOperation()\n  const { queueTask } = useQueue()\n\n  const { getFormState } = useServerFunctions()\n  const { startRouteTransition } = useRouteTransition()\n  const { getUploadHandler } = useUploadHandlers()\n\n  const { config } = useConfig()\n\n  const [disabled, setDisabled] = useState(disabledFromProps || false)\n  const [isMounted, setIsMounted] = useState(false)\n\n  const [submitted, setSubmitted] = useState(false)\n\n  /**\n   * Tracks wether the form state passes validation.\n   * For example the state could be submitted but invalid as field errors have been returned.\n   */\n  const [isValid, setIsValid] = useState(true)\n  const [initializing, setInitializing] = useState(initializingFromProps)\n\n  const [processing, setProcessing] = useState(false)\n\n  /**\n   * Determines whether the form is processing asynchronously in the background, e.g. autosave is running.\n   * Useful to determine whether to disable the form or queue other processes while in flight, e.g. disable manual submits while an autosave is running.\n   */\n  const [backgroundProcessing, _setBackgroundProcessing] = useState(false)\n\n  /**\n   * A ref that can be read within the `setModified` interceptor.\n   * Dependents of this state can read it immediately without needing to wait for a render cycle.\n   */\n  const backgroundProcessingRef = useRef(backgroundProcessing)\n\n  /**\n   * Flag to track if the form was modified _during a submission_, e.g. while autosave is running.\n   * Useful in order to avoid resetting `modified` to false wrongfully after a submit.\n   * For example, if the user modifies a field while the a background process (autosave) is running,\n   * we need to ensure that after the submit completes, the `modified` state remains true.\n   */\n  const modifiedWhileProcessingRef = useRef(false)\n\n  /**\n   * Intercept the `setBackgroundProcessing` method to keep the ref in sync.\n   * See the `backgroundProcessingRef` for more details.\n   */\n  const setBackgroundProcessing = useCallback((backgroundProcessing: boolean) => {\n    backgroundProcessingRef.current = backgroundProcessing\n    _setBackgroundProcessing(backgroundProcessing)\n  }, [])\n\n  const [modified, _setModified] = useState(false)\n\n  /**\n   * Intercept the `setModified` method to track whether the event happened during background processing.\n   * See the `modifiedWhileProcessingRef` ref for more details.\n   */\n  const setModified = useCallback((modified: boolean) => {\n    if (backgroundProcessingRef.current) {\n      modifiedWhileProcessingRef.current = true\n    }\n\n    _setModified(modified)\n  }, [])\n\n  const formRef = useRef<HTMLFormElement>(null)\n  const contextRef = useRef({} as FormContextType)\n  const abortResetFormRef = useRef<AbortController>(null)\n  const isFirstRenderRef = useRef(true)\n\n  const fieldsReducer = useReducer(fieldReducer, {}, () => initialState)\n\n  const [formState, dispatchFields] = fieldsReducer\n\n  contextRef.current.fields = formState\n\n  const prevFormState = useRef(formState)\n\n  const validateForm = useCallback(async () => {\n    const validatedFieldState = {}\n    let isValid = true\n\n    const data = contextRef.current.getData()\n\n    const validationPromises = Object.entries(contextRef.current.fields).map(\n      async ([path, field]) => {\n        const validatedField = field\n        const pathSegments = path ? path.split('.') : []\n\n        if (field.passesCondition !== false) {\n          let validationResult: boolean | string = validatedField.valid\n\n          if ('validate' in field && typeof field.validate === 'function') {\n            let valueToValidate = field.value\n\n            if (field?.rows && Array.isArray(field.rows)) {\n              valueToValidate = contextRef.current.getDataByPath(path)\n            }\n\n            validationResult = await field.validate(valueToValidate, {\n              ...field,\n              id,\n              collectionSlug,\n              // If there is a parent document form, we can get the data from that form\n              blockData: undefined, // Will be expensive to get - not worth to pass to client-side validation, as this can be obtained by the user using `useFormFields()`\n              data: documentForm?.getData ? documentForm.getData() : data,\n              event: 'submit',\n              operation,\n              path: pathSegments,\n              preferences: {} as any,\n              req: {\n                payload: {\n                  config,\n                },\n                t,\n                user,\n              } as unknown as PayloadRequest,\n              siblingData: contextRef.current.getSiblingData(path),\n            })\n\n            if (typeof validationResult === 'string') {\n              validatedField.errorMessage = validationResult\n              validatedField.valid = false\n            } else {\n              validatedField.valid = true\n              validatedField.errorMessage = undefined\n            }\n          }\n\n          if (validatedField.valid === false) {\n            isValid = false\n          }\n        }\n\n        validatedFieldState[path] = validatedField\n      },\n    )\n\n    await Promise.all(validationPromises)\n\n    if (!dequal(contextRef.current.fields, validatedFieldState)) {\n      dispatchFields({ type: 'REPLACE_STATE', state: validatedFieldState })\n    }\n\n    setIsValid(isValid)\n\n    return isValid\n  }, [collectionSlug, config, dispatchFields, id, operation, t, user, documentForm])\n\n  const submit = useCallback<Submit>(\n    async (options, e) => {\n      const {\n        acceptValues = true,\n        action: actionArg = action,\n        context,\n        disableFormWhileProcessing = true,\n        disableSuccessStatus: disableSuccessStatusFromArgs,\n        method: methodToUse = method,\n        overrides: overridesFromArgs = {},\n        skipValidation,\n      } = options || ({} as SubmitOptions)\n\n      const disableToast = disableSuccessStatusFromArgs ?? disableSuccessStatus\n\n      if (disabled) {\n        if (e) {\n          e.preventDefault()\n        }\n        return\n      }\n\n      // create new toast promise which will resolve manually later\n      let errorToast, successToast\n\n      const promise = new Promise((resolve, reject) => {\n        successToast = resolve\n        errorToast = reject\n      })\n\n      const hasFormSubmitAction =\n        actionArg || typeof action === 'string' || typeof action === 'function'\n\n      if (redirect || disableToast || !hasFormSubmitAction) {\n        // Do not show submitting toast, as the promise toast may never disappear under these conditions.\n        // Instead, make successToast() or errorToast() throw toast.success / toast.error\n        successToast = (data) => toast.success(data)\n        errorToast = (data) => toast.error(data)\n      } else {\n        toast.promise(promise, {\n          error: (data) => {\n            return data as string\n          },\n          loading: t('general:submitting'),\n          success: (data) => {\n            return data as string\n          },\n        })\n      }\n\n      if (e) {\n        e.stopPropagation()\n        e.preventDefault()\n      }\n\n      if (disableFormWhileProcessing) {\n        setProcessing(true)\n        setDisabled(true)\n      }\n\n      if (waitForAutocomplete) {\n        await wait(100)\n      }\n\n      const data = reduceFieldsToValues(contextRef.current.fields, true)\n\n      const serializableFormState = deepCopyObjectSimpleWithoutReactComponents(\n        contextRef.current.fields,\n        {\n          excludeFiles: true,\n        },\n      )\n\n      // Execute server side validations\n      if (Array.isArray(beforeSubmit)) {\n        let revalidatedFormState: FormState\n\n        await beforeSubmit.reduce(async (priorOnChange, beforeSubmitFn) => {\n          await priorOnChange\n\n          const result = await beforeSubmitFn({\n            formState: serializableFormState,\n          })\n\n          revalidatedFormState = result\n        }, Promise.resolve())\n\n        const isValid = Object.entries(revalidatedFormState).every(\n          ([, field]) => field.valid !== false,\n        )\n\n        setIsValid(isValid)\n\n        if (!isValid) {\n          setProcessing(false)\n          setSubmitted(true)\n          setDisabled(false)\n          return dispatchFields({ type: 'REPLACE_STATE', state: revalidatedFormState })\n        }\n      }\n\n      const isValid =\n        skipValidation || disableValidationOnSubmit ? true : await contextRef.current.validateForm()\n\n      setIsValid(isValid)\n\n      // If not valid, prevent submission\n      if (!isValid) {\n        errorToast(t('error:correctInvalidFields'))\n        setProcessing(false)\n        setSubmitted(true)\n        setDisabled(false)\n        return\n      }\n\n      let overrides = {}\n\n      if (typeof overridesFromArgs === 'function') {\n        overrides = overridesFromArgs(contextRef.current.fields)\n      } else if (typeof overridesFromArgs === 'object') {\n        overrides = overridesFromArgs\n      }\n\n      // If submit handler comes through via props, run that\n      if (onSubmit) {\n        for (const [key, value] of Object.entries(overrides)) {\n          data[key] = value\n        }\n\n        onSubmit(contextRef.current.fields, data)\n      }\n\n      if (!hasFormSubmitAction) {\n        // No action provided, so we should return. An example where this happens are lexical link drawers. Upon submitting the drawer, we\n        // want to close it without submitting the form. Stuff like validation would be handled by lexical before this, through beforeSubmit\n        setProcessing(false)\n        setSubmitted(true)\n        setDisabled(false)\n        return\n      }\n\n      try {\n        const formData = await contextRef.current.createFormData(overrides, {\n          data,\n          mergeOverrideData: Boolean(typeof overridesFromArgs !== 'function'),\n        })\n\n        let res\n\n        if (typeof actionArg === 'string') {\n          res = await requests[methodToUse.toLowerCase()](actionArg, {\n            body: formData,\n            headers: {\n              'Accept-Language': i18n.language,\n            },\n          })\n        } else if (typeof action === 'function') {\n          res = await action(formData)\n        }\n\n        if (!modifiedWhileProcessingRef.current) {\n          setModified(false)\n        } else {\n          modifiedWhileProcessingRef.current = false\n        }\n\n        setDisabled(false)\n\n        if (typeof handleResponse === 'function') {\n          handleResponse(res, successToast, errorToast)\n          return\n        }\n\n        const contentType = res.headers.get('content-type')\n        const isJSON = contentType && contentType.indexOf('application/json') !== -1\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let json: Record<string, any> = {}\n\n        if (isJSON) {\n          json = await res.json()\n        }\n\n        if (res.status < 400) {\n          if (typeof onSuccess === 'function') {\n            const newFormState = await onSuccess(json, {\n              context,\n              formState: serializableFormState,\n            })\n\n            if (newFormState) {\n              dispatchFields({\n                type: 'MERGE_SERVER_STATE',\n                acceptValues,\n                prevStateRef: prevFormState,\n                serverState: newFormState,\n              })\n            }\n          }\n\n          setSubmitted(false)\n          setProcessing(false)\n\n          if (redirect) {\n            startRouteTransition(() => router.push(redirect))\n          } else if (!disableToast) {\n            successToast(json.message || t('general:submissionSuccessful'))\n          }\n        } else {\n          setProcessing(false)\n          setSubmitted(true)\n\n          // When there was an error submitting a draft,\n          // set the form state to unsubmitted, to not trigger visible form validation on changes after the failed submit.\n          // Also keep the form as modified so the save button remains enabled for retry.\n          if (overridesFromArgs['_status'] === 'draft') {\n            setModified(true)\n\n            if (!validateDrafts) {\n              setSubmitted(false)\n            }\n          }\n\n          contextRef.current = { ...contextRef.current } // triggers rerender of all components that subscribe to form\n\n          if (json.message) {\n            errorToast(json.message)\n            return\n          }\n\n          if (Array.isArray(json.errors)) {\n            const [fieldErrors, nonFieldErrors] = json.errors.reduce(\n              ([fieldErrs, nonFieldErrs], err) => {\n                const newFieldErrs = []\n                const newNonFieldErrs = []\n\n                if (err?.message) {\n                  newNonFieldErrs.push(err)\n                }\n\n                if (Array.isArray(err?.data?.errors)) {\n                  err.data?.errors.forEach((dataError) => {\n                    if (dataError?.path) {\n                      newFieldErrs.push(dataError)\n                    } else {\n                      newNonFieldErrs.push(dataError)\n                    }\n                  })\n                }\n\n                return [\n                  [...fieldErrs, ...newFieldErrs],\n                  [...nonFieldErrs, ...newNonFieldErrs],\n                ]\n              },\n              [[], []],\n            )\n\n            setIsValid(false)\n\n            dispatchFields({\n              type: 'ADD_SERVER_ERRORS',\n              errors: fieldErrors,\n            })\n\n            nonFieldErrors.forEach((err) => {\n              errorToast(<FieldErrorsToast errorMessage={err.message || t('error:unknown')} />)\n            })\n\n            return\n          }\n\n          const message = errorMessages?.[res.status] || res?.statusText || t('error:unknown')\n\n          errorToast(message)\n        }\n\n        return { formState: contextRef.current.fields, res }\n      } catch (err) {\n        console.error('Error submitting form', err) // eslint-disable-line no-console\n        setProcessing(false)\n        setSubmitted(true)\n        setDisabled(false)\n        errorToast(err.message)\n      }\n    },\n    [\n      beforeSubmit,\n      startRouteTransition,\n      action,\n      disableSuccessStatus,\n      disableValidationOnSubmit,\n      disabled,\n      dispatchFields,\n      handleResponse,\n      method,\n      onSubmit,\n      onSuccess,\n      redirect,\n      router,\n      t,\n      i18n,\n      validateDrafts,\n      waitForAutocomplete,\n      setModified,\n      setSubmitted,\n    ],\n  )\n\n  const getFields = useCallback(() => contextRef.current.fields, [])\n\n  const getField = useCallback((path: string) => contextRef.current.fields[path], [])\n\n  const getData = useCallback(() => reduceFieldsToValues(contextRef.current.fields, true), [])\n\n  const getSiblingData = useCallback(\n    (path: string) => getSiblingDataFunc(contextRef.current.fields, path),\n    [],\n  )\n\n  const getDataByPath = useCallback<GetDataByPath>(\n    (path: string) => getDataByPathFunc(contextRef.current.fields, path),\n    [],\n  )\n\n  const createFormData = useCallback<CreateFormData>(\n    async (overrides, { data: dataFromArgs, mergeOverrideData = true }) => {\n      let data = dataFromArgs || reduceFieldsToValues(contextRef.current.fields, true)\n\n      let file = data?.file\n\n      if (docConfig && 'upload' in docConfig && docConfig.upload && file) {\n        delete data.file\n\n        const handler = getUploadHandler({ collectionSlug })\n\n        if (typeof handler === 'function') {\n          let filename = file.name\n          const clientUploadContext = await handler({\n            file,\n            updateFilename: (value) => {\n              filename = value\n            },\n          })\n\n          file = JSON.stringify({\n            clientUploadContext,\n            collectionSlug,\n            filename,\n            mimeType: file.type,\n            size: file.size,\n          })\n        }\n      }\n\n      if (mergeOverrideData) {\n        data = {\n          ...data,\n          ...overrides,\n        }\n      } else {\n        data = overrides\n      }\n\n      const dataToSerialize: Record<string, unknown> = {\n        _payload: JSON.stringify(data),\n      }\n\n      if (docConfig && 'upload' in docConfig && docConfig.upload && file) {\n        dataToSerialize.file = file\n      }\n\n      // nullAsUndefineds is important to allow uploads and relationship fields to clear themselves\n      const formData = serialize(dataToSerialize, {\n        indices: true,\n        nullsAsUndefineds: false,\n      })\n\n      return formData\n    },\n    [collectionSlug, docConfig, getUploadHandler],\n  )\n\n  const reset = useCallback(\n    async (data: unknown) => {\n      const controller = handleAbortRef(abortResetFormRef)\n\n      const docPreferences = await getDocPreferences()\n\n      const { state: newState } = await getFormState({\n        id,\n        collectionSlug,\n        data,\n        docPermissions,\n        docPreferences,\n        globalSlug,\n        locale,\n        operation,\n        renderAllFields: true,\n        schemaPath: collectionSlug ? collectionSlug : globalSlug,\n        signal: controller.signal,\n        skipValidation: true,\n      })\n\n      contextRef.current = { ...initContextState } as FormContextType\n      setModified(false)\n      dispatchFields({ type: 'REPLACE_STATE', state: newState })\n\n      abortResetFormRef.current = null\n    },\n    [\n      collectionSlug,\n      dispatchFields,\n      globalSlug,\n      id,\n      operation,\n      getFormState,\n      docPermissions,\n      getDocPreferences,\n      locale,\n      setModified,\n    ],\n  )\n\n  const replaceState = useCallback(\n    (state: FormState) => {\n      contextRef.current = { ...initContextState } as FormContextType\n      setModified(false)\n      dispatchFields({ type: 'REPLACE_STATE', state })\n    },\n    [dispatchFields, setModified],\n  )\n\n  const addFieldRow: FormContextType['addFieldRow'] = useCallback(\n    ({ blockType, path, rowIndex: rowIndexArg, subFieldState }) => {\n      const newRows: unknown[] = getDataByPath(path) || []\n      const rowIndex = rowIndexArg === undefined ? newRows.length : rowIndexArg\n\n      // dispatch ADD_ROW adds a blank row to local form state.\n      // This performs no form state request, as the debounced onChange effect will do that for us.\n      dispatchFields({\n        type: 'ADD_ROW',\n        blockType,\n        path,\n        rowIndex,\n        subFieldState,\n      })\n\n      setModified(true)\n    },\n    [dispatchFields, getDataByPath, setModified],\n  )\n\n  const moveFieldRow: FormContextType['moveFieldRow'] = useCallback(\n    ({ moveFromIndex, moveToIndex, path }) => {\n      dispatchFields({\n        type: 'MOVE_ROW',\n        moveFromIndex,\n        moveToIndex,\n        path,\n      })\n\n      setModified(true)\n    },\n    [dispatchFields, setModified],\n  )\n\n  const removeFieldRow: FormContextType['removeFieldRow'] = useCallback(\n    ({ path, rowIndex }) => {\n      dispatchFields({ type: 'REMOVE_ROW', path, rowIndex })\n\n      setModified(true)\n    },\n    [dispatchFields, setModified],\n  )\n\n  const replaceFieldRow: FormContextType['replaceFieldRow'] = useCallback(\n    ({ blockType, path, rowIndex: rowIndexArg, subFieldState }) => {\n      const currentRows: unknown[] = getDataByPath(path)\n      const rowIndex = rowIndexArg === undefined ? currentRows.length : rowIndexArg\n\n      dispatchFields({\n        type: 'REPLACE_ROW',\n        blockType,\n        path,\n        rowIndex,\n        subFieldState,\n      })\n\n      setModified(true)\n    },\n    [dispatchFields, getDataByPath, setModified],\n  )\n\n  useEffect(() => {\n    const abortOnChange = abortResetFormRef.current\n\n    return () => {\n      abortAndIgnore(abortOnChange)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (initializingFromProps !== undefined) {\n      setInitializing(initializingFromProps)\n    }\n  }, [initializingFromProps])\n\n  contextRef.current.submit = submit\n  contextRef.current.getFields = getFields\n  contextRef.current.getField = getField\n  contextRef.current.getData = getData\n  contextRef.current.getSiblingData = getSiblingData\n  contextRef.current.getDataByPath = getDataByPath\n  contextRef.current.validateForm = validateForm\n  contextRef.current.createFormData = createFormData\n  contextRef.current.setModified = setModified\n  contextRef.current.setProcessing = setProcessing\n  contextRef.current.setBackgroundProcessing = setBackgroundProcessing\n\n  contextRef.current.setSubmitted = setSubmitted\n  contextRef.current.setIsValid = setIsValid\n  contextRef.current.disabled = disabled\n  contextRef.current.setDisabled = setDisabled\n  contextRef.current.formRef = formRef\n  contextRef.current.reset = reset\n  contextRef.current.replaceState = replaceState\n  contextRef.current.dispatchFields = dispatchFields\n  contextRef.current.addFieldRow = addFieldRow\n  contextRef.current.removeFieldRow = removeFieldRow\n  contextRef.current.moveFieldRow = moveFieldRow\n  contextRef.current.replaceFieldRow = replaceFieldRow\n  contextRef.current.uuid = uuid\n  contextRef.current.initializing = initializing\n  contextRef.current.isValid = isValid\n\n  useEffect(() => {\n    setIsMounted(true)\n  }, [])\n\n  useEffect(() => {\n    if (typeof disabledFromProps === 'boolean') {\n      setDisabled(disabledFromProps)\n    }\n  }, [disabledFromProps])\n\n  useEffect(() => {\n    if (typeof submittedFromProps === 'boolean') {\n      setSubmitted(submittedFromProps)\n    }\n  }, [submittedFromProps])\n\n  useEffect(() => {\n    if (initialState) {\n      contextRef.current = { ...initContextState } as FormContextType\n      dispatchFields({\n        type: 'REPLACE_STATE',\n        optimize: false,\n        sanitize: true,\n        state: initialState,\n      })\n    }\n  }, [initialState, dispatchFields])\n\n  useThrottledEffect(\n    () => {\n      refreshCookie()\n    },\n    15000,\n    [formState],\n  )\n\n  const handleLocaleChange = useEffectEvent(() => {\n    contextRef.current = { ...contextRef.current } // triggers rerender of all components that subscribe to form\n    setModified(false)\n  })\n\n  useEffect(() => {\n    handleLocaleChange()\n  }, [locale])\n\n  const classes = [className, baseClass].filter(Boolean).join(' ')\n\n  const executeOnChange = useEffectEvent((submitted: boolean) => {\n    queueTask(async () => {\n      if (Array.isArray(onChange)) {\n        let serverState: FormState\n\n        for (const onChangeFn of onChange) {\n          // Edit view default onChange is in packages/ui/src/views/Edit/index.tsx. This onChange usually sends a form state request\n          serverState = await onChangeFn({\n            formState: deepCopyObjectSimpleWithoutReactComponents(formState, {\n              excludeFiles: true,\n            }),\n            submitted,\n          })\n        }\n\n        dispatchFields({\n          type: 'MERGE_SERVER_STATE',\n          prevStateRef: prevFormState,\n          serverState,\n        })\n      }\n    })\n  })\n\n  useDebouncedEffect(\n    () => {\n      if ((isFirstRenderRef.current || !dequal(formState, prevFormState.current)) && modified) {\n        executeOnChange(submitted)\n      }\n\n      prevFormState.current = formState\n      isFirstRenderRef.current = false\n    },\n    [modified, submitted, formState],\n    250,\n  )\n\n  const DocumentFormContextComponent: React.FC<any> = isDocumentForm\n    ? DocumentFormContext\n    : React.Fragment\n\n  const documentFormContextProps = isDocumentForm\n    ? {\n        value: contextRef.current,\n      }\n    : {}\n\n  const El: 'form' = (el as unknown as 'form') || 'form'\n\n  return (\n    <El\n      action={typeof action === 'function' ? void action : action}\n      className={classes}\n      method={method}\n      noValidate\n      onSubmit={(e) => void contextRef.current.submit({}, e)}\n      ref={formRef}\n    >\n      <DocumentFormContextComponent {...documentFormContextProps}>\n        <FormContext value={contextRef.current}>\n          <FormWatchContext\n            value={{\n              fields: formState,\n              ...contextRef.current,\n            }}\n          >\n            <SubmittedContext value={submitted}>\n              <InitializingContext value={!isMounted || (isMounted && initializing)}>\n                <ProcessingContext value={processing}>\n                  <BackgroundProcessingContext value={backgroundProcessing}>\n                    <ModifiedContext value={modified}>\n                      {/* eslint-disable-next-line @eslint-react/no-context-provider */}\n                      <FormFieldsContext.Provider value={fieldsReducer}>\n                        {children}\n                      </FormFieldsContext.Provider>\n                    </ModifiedContext>\n                  </BackgroundProcessingContext>\n                </ProcessingContext>\n              </InitializingContext>\n            </SubmittedContext>\n          </FormWatchContext>\n        </FormContext>\n      </DocumentFormContextComponent>\n    </El>\n  )\n}\n\nexport {\n  DocumentFormContext,\n  FormContext,\n  FormFieldsContext,\n  FormWatchContext,\n  ModifiedContext,\n  ProcessingContext,\n  SubmittedContext,\n  useAllFormFields,\n  useDocumentForm,\n  useForm,\n  useFormFields,\n  useFormModified,\n  useFormProcessing,\n  useFormSubmitted,\n  useWatchForm,\n} from './context.js'\n\nexport { FormProps }\n"],"mappings":"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","ignoreList":[]}