{"version":3,"file":"fieldSchemasToFormState.spec.js","names":["describe","it","expect","fieldSchemasToFormState","defaultValue","fieldSchema","name","type","label","state","req","fields","text","value","toBe","data","user","email","locale","args"],"sources":["../../../src/forms/fieldSchemasToFormState/fieldSchemasToFormState.spec.js"],"sourcesContent":["import { describe, it, expect } from 'vitest'\nimport { fieldSchemasToFormState } from './index.js'\n\ndescribe('Form - fieldSchemasToFormState', () => {\n  const defaultValue = 'Default'\n  it('populates default value - normal fields', async () => {\n    const fieldSchema = [\n      {\n        name: 'text',\n        type: 'text',\n        defaultValue,\n        label: 'Text',\n      },\n    ]\n    const state = await fieldSchemasToFormState({ req: {}, fields: fieldSchema })\n    expect(state.text.value).toBe(defaultValue)\n  })\n  it('field value overrides defaultValue - normal fields', async () => {\n    const value = 'value'\n    const data = { text: value }\n    const fieldSchema = [\n      {\n        name: 'text',\n        type: 'text',\n        defaultValue,\n        label: 'Text',\n      },\n    ]\n    const state = await fieldSchemasToFormState({ req: {}, data, fields: fieldSchema })\n    expect(state.text.value).toBe(value)\n  })\n  it('populates default value from a function - normal fields', async () => {\n    const user = { email: 'user@example.com' }\n    const locale = 'en'\n    const fieldSchema = [\n      {\n        name: 'text',\n        type: 'text',\n        defaultValue: (args) => {\n          if (!args.locale) {\n            return 'missing locale'\n          }\n          if (!args.user) {\n            return 'missing user'\n          }\n          return 'Default'\n        },\n        label: 'Text',\n      },\n    ]\n    const state = await fieldSchemasToFormState({\n      req: { locale: 'en', user: {} },\n      fields: fieldSchema,\n      locale,\n      user,\n    })\n    expect(state.text.value).toBe(defaultValue)\n  })\n})\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,EAAE,EAAEC,MAAM,QAAQ;AACrC,SAASC,uBAAuB,QAAQ;AAExCH,QAAA,CAAS,kCAAkC;EACzC,MAAMI,YAAA,GAAe;EACrBH,EAAA,CAAG,2CAA2C;IAC5C,MAAMI,WAAA,GAAc,CAClB;MACEC,IAAA,EAAM;MACNC,IAAA,EAAM;MACNH,YAAA;MACAI,KAAA,EAAO;IACT,EACD;IACD,MAAMC,KAAA,GAAQ,MAAMN,uBAAA,CAAwB;MAAEO,GAAA,EAAK,CAAC;MAAGC,MAAA,EAAQN;IAAY;IAC3EH,MAAA,CAAOO,KAAA,CAAMG,IAAI,CAACC,KAAK,EAAEC,IAAI,CAACV,YAAA;EAChC;EACAH,EAAA,CAAG,sDAAsD;IACvD,MAAMY,KAAA,GAAQ;IACd,MAAME,IAAA,GAAO;MAAEH,IAAA,EAAMC;IAAM;IAC3B,MAAMR,WAAA,GAAc,CAClB;MACEC,IAAA,EAAM;MACNC,IAAA,EAAM;MACNH,YAAA;MACAI,KAAA,EAAO;IACT,EACD;IACD,MAAMC,KAAA,GAAQ,MAAMN,uBAAA,CAAwB;MAAEO,GAAA,EAAK,CAAC;MAAGK,IAAA;MAAMJ,MAAA,EAAQN;IAAY;IACjFH,MAAA,CAAOO,KAAA,CAAMG,IAAI,CAACC,KAAK,EAAEC,IAAI,CAACD,KAAA;EAChC;EACAZ,EAAA,CAAG,2DAA2D;IAC5D,MAAMe,IAAA,GAAO;MAAEC,KAAA,EAAO;IAAmB;IACzC,MAAMC,MAAA,GAAS;IACf,MAAMb,WAAA,GAAc,CAClB;MACEC,IAAA,EAAM;MACNC,IAAA,EAAM;MACNH,YAAA,EAAee,IAAA;QACb,IAAI,CAACA,IAAA,CAAKD,MAAM,EAAE;UAChB,OAAO;QACT;QACA,IAAI,CAACC,IAAA,CAAKH,IAAI,EAAE;UACd,OAAO;QACT;QACA,OAAO;MACT;MACAR,KAAA,EAAO;IACT,EACD;IACD,MAAMC,KAAA,GAAQ,MAAMN,uBAAA,CAAwB;MAC1CO,GAAA,EAAK;QAAEQ,MAAA,EAAQ;QAAMF,IAAA,EAAM,CAAC;MAAE;MAC9BL,MAAA,EAAQN,WAAA;MACRa,MAAA;MACAF;IACF;IACAd,MAAA,CAAOO,KAAA,CAAMG,IAAI,CAACC,KAAK,EAAEC,IAAI,CAACV,YAAA;EAChC;AACF","ignoreList":[]}