{"version":3,"file":"index.js","names":["toWords","React","useMemo","useAuth","useConfig","useTranslation","reduceFieldsToOptions","QueryPresetsGroupByCell","cellData","rowData","i18n","permissions","config","relatedCollection","collectionConfig","collections","find","col","slug","reducedFields","fieldPermissions","fields","_jsx","isDescending","startsWith","fieldName","slice","direction","fieldOption","field","value","displayLabel","label","_jsxs"],"sources":["../../../../../src/elements/QueryPresets/cells/GroupByCell/index.tsx"],"sourcesContent":["import type { DefaultCellComponentProps } from 'payload'\n\nimport { toWords } from 'payload/shared'\nimport React, { useMemo } from 'react'\n\nimport { useAuth } from '../../../../providers/Auth/index.js'\nimport { useConfig } from '../../../../providers/Config/index.js'\nimport { useTranslation } from '../../../../providers/Translation/index.js'\nimport { reduceFieldsToOptions } from '../../../../utilities/reduceFieldsToOptions.js'\n\nexport const QueryPresetsGroupByCell: React.FC<DefaultCellComponentProps> = ({\n  cellData,\n  rowData,\n}) => {\n  const { i18n } = useTranslation()\n  const { permissions } = useAuth()\n  const { config } = useConfig()\n\n  // Get the related collection from the row data\n  const relatedCollection = rowData?.relatedCollection as string\n\n  // Get the collection config for the related collection\n  const collectionConfig = useMemo(() => {\n    if (!relatedCollection) {\n      return null\n    }\n\n    return config.collections?.find((col) => col.slug === relatedCollection)\n  }, [relatedCollection, config.collections])\n\n  // Reduce fields to options to get proper labels\n  const reducedFields = useMemo(() => {\n    if (!collectionConfig) {\n      return []\n    }\n\n    const fieldPermissions = permissions?.collections?.[relatedCollection]?.fields\n\n    return reduceFieldsToOptions({\n      fieldPermissions,\n      fields: collectionConfig.fields,\n      i18n,\n    })\n  }, [collectionConfig, permissions, relatedCollection, i18n])\n\n  if (!cellData || typeof cellData !== 'string') {\n    return <div>No group by selected</div>\n  }\n\n  const isDescending = cellData.startsWith('-')\n  const fieldName = isDescending ? cellData.slice(1) : cellData\n  const direction = isDescending ? 'descending' : 'ascending'\n\n  // Find the field option to get the proper label\n  const fieldOption = reducedFields.find((field) => field.value === fieldName)\n  const displayLabel = fieldOption?.label || toWords(fieldName)\n\n  return (\n    <div>\n      {displayLabel} ({direction})\n    </div>\n  )\n}\n"],"mappings":";AAEA,SAASA,OAAO,QAAQ;AACxB,OAAOC,KAAA,IAASC,OAAO,QAAQ;AAE/B,SAASC,OAAO,QAAQ;AACxB,SAASC,SAAS,QAAQ;AAC1B,SAASC,cAAc,QAAQ;AAC/B,SAASC,qBAAqB,QAAQ;AAEtC,OAAO,MAAMC,uBAAA,GAA+DA,CAAC;EAC3EC,QAAQ;EACRC;AAAO,CACR;EACC,MAAM;IAAEC;EAAI,CAAE,GAAGL,cAAA;EACjB,MAAM;IAAEM;EAAW,CAAE,GAAGR,OAAA;EACxB,MAAM;IAAES;EAAM,CAAE,GAAGR,SAAA;EAEnB;EACA,MAAMS,iBAAA,GAAoBJ,OAAA,EAASI,iBAAA;EAEnC;EACA,MAAMC,gBAAA,GAAmBZ,OAAA,CAAQ;IAC/B,IAAI,CAACW,iBAAA,EAAmB;MACtB,OAAO;IACT;IAEA,OAAOD,MAAA,CAAOG,WAAW,EAAEC,IAAA,CAAMC,GAAA,IAAQA,GAAA,CAAIC,IAAI,KAAKL,iBAAA;EACxD,GAAG,CAACA,iBAAA,EAAmBD,MAAA,CAAOG,WAAW,CAAC;EAE1C;EACA,MAAMI,aAAA,GAAgBjB,OAAA,CAAQ;IAC5B,IAAI,CAACY,gBAAA,EAAkB;MACrB,OAAO,EAAE;IACX;IAEA,MAAMM,gBAAA,GAAmBT,WAAA,EAAaI,WAAA,GAAcF,iBAAA,CAAkB,EAAEQ,MAAA;IAExE,OAAOf,qBAAA,CAAsB;MAC3Bc,gBAAA;MACAC,MAAA,EAAQP,gBAAA,CAAiBO,MAAM;MAC/BX;IACF;EACF,GAAG,CAACI,gBAAA,EAAkBH,WAAA,EAAaE,iBAAA,EAAmBH,IAAA,CAAK;EAE3D,IAAI,CAACF,QAAA,IAAY,OAAOA,QAAA,KAAa,UAAU;IAC7C,oBAAOc,IAAA,CAAC;gBAAI;;EACd;EAEA,MAAMC,YAAA,GAAef,QAAA,CAASgB,UAAU,CAAC;EACzC,MAAMC,SAAA,GAAYF,YAAA,GAAef,QAAA,CAASkB,KAAK,CAAC,KAAKlB,QAAA;EACrD,MAAMmB,SAAA,GAAYJ,YAAA,GAAe,eAAe;EAEhD;EACA,MAAMK,WAAA,GAAcT,aAAA,CAAcH,IAAI,CAAEa,KAAA,IAAUA,KAAA,CAAMC,KAAK,KAAKL,SAAA;EAClE,MAAMM,YAAA,GAAeH,WAAA,EAAaI,KAAA,IAAShC,OAAA,CAAQyB,SAAA;EAEnD,oBACEQ,KAAA,CAAC;eACEF,YAAA,EAAa,MAAGJ,SAAA,EAAU;;AAGjC","ignoreList":[]}