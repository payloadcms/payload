{"version":3,"file":"index.js","names":["c","_c","getTranslation","React","useTranslation","ReactSelect","baseClass","NumberFilter","props","$","disabled","field","t0","onChange","operator","value","admin","hasMany","i18n","t","t1","includes","isMulti","t2","Symbol","for","valueToRender","setValueToRender","useState","t3","selectedOption","newValue","Array","isArray","map","_temp","onSelect","t4","t5","_temp2","useEffect","t6","placeholder","_jsx","isClearable","isCreatable","isSortable","numberOnly","options","className","e","target","type","option","Number","val","index","id","label","toString"],"sources":["../../../../../src/elements/WhereBuilder/Condition/Number/index.tsx"],"sourcesContent":["'use client'\nimport { getTranslation } from '@payloadcms/translations'\nimport React from 'react'\n\nimport type { NumberFilterProps as Props } from './types.js'\n\nimport { useTranslation } from '../../../../providers/Translation/index.js'\nimport { ReactSelect } from '../../../ReactSelect/index.js'\nimport './index.scss'\n\nconst baseClass = 'condition-value-number'\n\nexport const NumberFilter: React.FC<Props> = (props) => {\n  const {\n    disabled,\n    field: { admin, hasMany },\n    onChange,\n    operator,\n    value,\n  } = props\n\n  const { i18n, t } = useTranslation()\n\n  const isMulti = ['in', 'not_in'].includes(operator) || hasMany\n\n  const [valueToRender, setValueToRender] = React.useState<\n    { id: string; label: string; value: { value: number } }[]\n  >([])\n\n  const onSelect = React.useCallback(\n    (selectedOption) => {\n      let newValue\n      if (!selectedOption) {\n        newValue = []\n      } else if (isMulti) {\n        if (Array.isArray(selectedOption)) {\n          newValue = selectedOption.map((option) => Number(option.value?.value || option.value))\n        } else {\n          newValue = [Number(selectedOption.value?.value || selectedOption.value)]\n        }\n      }\n\n      onChange(newValue)\n    },\n    [isMulti, onChange],\n  )\n\n  React.useEffect(() => {\n    if (Array.isArray(value)) {\n      setValueToRender(\n        value.map((val, index) => {\n          return {\n            id: `${val}${index}`, // append index to avoid duplicate keys but allow duplicate numbers\n            label: `${val}`,\n            value: {\n              toString: () => `${val}${index}`,\n              value: (val as any)?.value || val,\n            },\n          }\n        }),\n      )\n    } else {\n      setValueToRender([])\n    }\n  }, [value])\n\n  const placeholder = getTranslation(admin?.placeholder, i18n) || t('general:enterAValue')\n\n  return isMulti ? (\n    <ReactSelect\n      disabled={disabled}\n      isClearable\n      isCreatable\n      isMulti={isMulti}\n      isSortable\n      numberOnly\n      onChange={onSelect}\n      options={[]}\n      placeholder={placeholder}\n      value={valueToRender || []}\n    />\n  ) : (\n    <input\n      className={baseClass}\n      disabled={disabled}\n      onChange={(e) => onChange(e.target.value)}\n      placeholder={placeholder}\n      type=\"number\"\n      value={value as number}\n    />\n  )\n}\n"],"mappings":"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","ignoreList":[]}