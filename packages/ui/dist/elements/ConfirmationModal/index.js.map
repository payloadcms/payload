{"version":3,"file":"index.js","names":["c","_c","Modal","useModal","React","useCallback","useTranslation","Button","drawerZBase","useDrawerDepth","baseClass","ConfirmationModal","props","$","body","cancelLabel","className","confirmingLabel","confirmLabel","heading","modalSlug","onCancel","onCancelFromProps","onConfirm","onConfirmFromProps","editDepth","confirming","setConfirming","useState","closeModal","isModalOpen","t","t0","t1","t2","filter","Boolean","t3","join","t4","t5","_jsx","closeOnBlur","slug","style","zIndex","children","_jsxs","buttonStyle","disabled","id","onClick","size","type"],"sources":["../../../src/elements/ConfirmationModal/index.tsx"],"sourcesContent":["'use client'\nimport { Modal, useModal } from '@faceless-ui/modal'\nimport React, { useCallback } from 'react'\n\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { Button } from '../Button/index.js'\nimport { drawerZBase, useDrawerDepth } from '../Drawer/index.js'\nimport './index.scss'\n\nconst baseClass = 'confirmation-modal'\n\nexport type OnCancel = () => void\n\nexport type ConfirmationModalProps = {\n  body: React.ReactNode\n  cancelLabel?: string\n  className?: string\n  confirmingLabel?: string\n  confirmLabel?: string\n  heading: React.ReactNode\n  modalSlug: string\n  onCancel?: OnCancel\n  onConfirm: () => Promise<void> | void\n}\n\nexport function ConfirmationModal(props: ConfirmationModalProps) {\n  const {\n    body,\n    cancelLabel,\n    className,\n    confirmingLabel,\n    confirmLabel,\n    heading,\n    modalSlug,\n    onCancel: onCancelFromProps,\n    onConfirm: onConfirmFromProps,\n  } = props\n\n  const editDepth = useDrawerDepth()\n\n  const [confirming, setConfirming] = React.useState(false)\n\n  const { closeModal, isModalOpen } = useModal()\n  const { t } = useTranslation()\n\n  const onConfirm = useCallback(async () => {\n    if (!confirming) {\n      setConfirming(true)\n\n      if (typeof onConfirmFromProps === 'function') {\n        await onConfirmFromProps()\n      }\n\n      setConfirming(false)\n      closeModal(modalSlug)\n    }\n  }, [confirming, onConfirmFromProps, closeModal, modalSlug])\n\n  const onCancel = useCallback(() => {\n    if (!confirming) {\n      closeModal(modalSlug)\n\n      if (typeof onCancelFromProps === 'function') {\n        onCancelFromProps()\n      }\n    }\n  }, [confirming, onCancelFromProps, closeModal, modalSlug])\n\n  if (!isModalOpen(modalSlug)) {\n    return null\n  }\n\n  return (\n    <Modal\n      className={[baseClass, className].filter(Boolean).join(' ')}\n      // Fixes https://github.com/payloadcms/payload/issues/13778\n      closeOnBlur={false}\n      slug={modalSlug}\n      style={{\n        zIndex: drawerZBase + editDepth,\n      }}\n    >\n      <div className={`${baseClass}__wrapper`}>\n        <div className={`${baseClass}__content`}>\n          {typeof heading === 'string' ? <h1>{heading}</h1> : heading}\n          {typeof body === 'string' ? <p>{body}</p> : body}\n        </div>\n        <div className={`${baseClass}__controls`}>\n          <Button\n            buttonStyle=\"secondary\"\n            disabled={confirming}\n            id=\"confirm-cancel\"\n            onClick={onCancel}\n            size=\"large\"\n            type=\"button\"\n          >\n            {cancelLabel || t('general:cancel')}\n          </Button>\n          <Button id=\"confirm-action\" onClick={onConfirm} size=\"large\">\n            {confirming\n              ? confirmingLabel || `${t('general:loading')}...`\n              : confirmLabel || t('general:confirm')}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  )\n}\n"],"mappings":"AAAA;;AAAA,SAAAA,CAAA,IAAAC,EAAA;;AACA,SAASC,KAAK,EAAEC,QAAQ,QAAQ;AAChC,OAAOC,KAAA,IAASC,WAAW,QAAQ;AAEnC,SAASC,cAAc,QAAQ;AAC/B,SAASC,MAAM,QAAQ;AACvB,SAASC,WAAW,EAAEC,cAAc,QAAQ;AAC5C,OAAO;AAEP,MAAMC,SAAA,GAAY;AAgBlB,OAAO,SAAAC,kBAAAC,KAAA;EAAA,MAAAC,CAAA,GAAAZ,EAAA;EACL;IAAAa,IAAA;IAAAC,WAAA;IAAAC,SAAA;IAAAC,eAAA;IAAAC,YAAA;IAAAC,OAAA;IAAAC,SAAA;IAAAC,QAAA,EAAAC,iBAAA;IAAAC,SAAA,EAAAC;EAAA,IAUIZ,KAAA;EAEJ,MAAAa,SAAA,GAAkBhB,cAAA;EAElB,OAAAiB,UAAA,EAAAC,aAAA,IAAoCvB,KAAA,CAAAwB,QAAA,MAAe;EAEnD;IAAAC,UAAA;IAAAC;EAAA,IAAoC3B,QAAA;EACpC;IAAA4B;EAAA,IAAczB,cAAA;EAAA,IAAA0B,EAAA;EAAA,IAAAnB,CAAA,QAAAgB,UAAA,IAAAhB,CAAA,QAAAa,UAAA,IAAAb,CAAA,QAAAO,SAAA,IAAAP,CAAA,QAAAW,kBAAA;IAEgBQ,EAAA,SAAAA,CAAA;MAAA,KACvBN,UAAA;QACHC,aAAA,KAAc;QAAA,IAEV,OAAOH,kBAAA,KAAuB;UAAA,MAC1BA,kBAAA;QAAA;QAGRG,aAAA,MAAc;QACdE,UAAA,CAAWT,SAAA;MAAA;IAAA;IAEfP,CAAA,MAAAgB,UAAA;IAAAhB,CAAA,MAAAa,UAAA;IAAAb,CAAA,MAAAO,SAAA;IAAAP,CAAA,MAAAW,kBAAA;IAAAX,CAAA,MAAAmB,EAAA;EAAA;IAAAA,EAAA,GAAAnB,CAAA;EAAA;EAXA,MAAAU,SAAA,GAAkBS,EAWwC;EAAA,IAAAC,EAAA;EAAA,IAAApB,CAAA,QAAAgB,UAAA,IAAAhB,CAAA,QAAAa,UAAA,IAAAb,CAAA,QAAAO,SAAA,IAAAP,CAAA,QAAAS,iBAAA;IAE7BW,EAAA,GAAAA,CAAA;MAAA,KACtBP,UAAA;QACHG,UAAA,CAAWT,SAAA;QAAA,IAEP,OAAOE,iBAAA,KAAsB;UAC/BA,iBAAA;QAAA;MAAA;IAAA;IAGNT,CAAA,MAAAgB,UAAA;IAAAhB,CAAA,MAAAa,UAAA;IAAAb,CAAA,MAAAO,SAAA;IAAAP,CAAA,MAAAS,iBAAA;IAAAT,CAAA,MAAAoB,EAAA;EAAA;IAAAA,EAAA,GAAApB,CAAA;EAAA;EARA,MAAAQ,QAAA,GAAiBY,EAQwC;EAAA,KAEpDH,WAAA,CAAYV,SAAA;IAAA;EAAA;EAAA,IAAAc,EAAA;EAAA,IAAArB,CAAA,SAAAG,SAAA;IAMFkB,EAAA,IAAAxB,SAAA,EAAYM,SAAA,EAAAmB,MAAA,CAAAC,OAAkB;IAAAvB,CAAA,OAAAG,SAAA;IAAAH,CAAA,OAAAqB,EAAA;EAAA;IAAAA,EAAA,GAAArB,CAAA;EAAA;EAA9B,MAAAwB,EAAA,GAAAH,EAA8B,CAAAI,IAAA,CAAc;EAK7C,MAAAC,EAAA,GAAA/B,WAAA,GAAciB,SAAA;EAAA,IAAAe,EAAA;EAAA,IAAA3B,CAAA,SAAAC,IAAA,IAAAD,CAAA,SAAAE,WAAA,IAAAF,CAAA,SAAAK,YAAA,IAAAL,CAAA,SAAAa,UAAA,IAAAb,CAAA,SAAAI,eAAA,IAAAJ,CAAA,SAAAM,OAAA,IAAAN,CAAA,SAAAO,SAAA,IAAAP,CAAA,SAAAQ,QAAA,IAAAR,CAAA,SAAAU,SAAA,IAAAV,CAAA,SAAAkB,CAAA,IAAAlB,CAAA,SAAAwB,EAAA,IAAAxB,CAAA,SAAA0B,EAAA;IAN1BC,EAAA,GAAAC,IAAA,CAAAvC,KAAA;MAAAc,SAAA,EACaqB,EAA4C;MAAAK,WAAA;MAAAC,IAAA,EAGjDvB,SAAA;MAAAwB,KAAA;QAAAC,MAAA,EAEIN;MAAc;MAAAO,QAAA,EAGxBC,KAAA,CAAC;QAAA/B,SAAA,EAAe,GAAAN,SAAA,WAAuB;QAAAoC,QAAA,GACrCC,KAAA,CAAC;UAAA/B,SAAA,EAAe,GAAAN,SAAA,WAAuB;UAAAoC,QAAA,GACpC,OAAO3B,OAAA,KAAY,WAAWsB,IAAA,CAAC;YAAAK,QAAA,EAAI3B;UAAA,C,IAAgBA,OAAA,EACnD,OAAOL,IAAA,KAAS,WAAW2B,IAAA,CAAC;YAAAK,QAAA,EAAGhC;UAAA,C,IAAYA,IAAA;QAAA,C,GAE9CiC,KAAA,CAAC;UAAA/B,SAAA,EAAe,GAAAN,SAAA,YAAwB;UAAAoC,QAAA,GACtCL,IAAA,CAAAlC,MAAA;YAAAyC,WAAA,EACc;YAAAC,QAAA,EACFvB,UAAA;YAAAwB,EAAA,EACP;YAAAC,OAAA,EACM9B,QAAA;YAAA+B,IAAA,EACJ;YAAAC,IAAA,EACA;YAAAP,QAAA,EAEJ/B,WAAA,IAAegB,CAAA,CAAE;UAAA,C,GAEpBU,IAAA,CAAAlC,MAAA;YAAA2C,EAAA,EAAW;YAAAC,OAAA,EAA0B5B,SAAA;YAAA6B,IAAA,EAAgB;YAAAN,QAAA,EAClDpB,UAAA,GACGT,eAAA,IAAmB,GAAGc,CAAA,CAAE,uBAAuB,GAC/Cb,YAAA,IAAgBa,CAAA,CAAE;UAAA,C;;;;;;;;;;;;;;;;;;;;SA5B9BS,E","ignoreList":[]}