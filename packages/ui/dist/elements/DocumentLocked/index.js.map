{"version":3,"file":"index.js","names":["c","_c","React","useEffect","useRouteCache","useRouteTransition","useTranslation","isClientUserObject","Button","Modal","useModal","modalSlug","baseClass","formatDate","date","Intl","DateTimeFormat","day","hour","hour12","minute","month","year","format","Date","DocumentLocked","t0","$","handleGoBack","isActive","onReadOnly","onTakeOver","updatedAt","user","closeModal","openModal","t","clearRouteCache","startRouteTransition","t1","t2","t3","t4","t5","email","id","t6","t7","t8","_jsx","className","closeOnBlur","onClose","slug","children","_jsxs","buttonStyle","onClick","size"],"sources":["../../../src/elements/DocumentLocked/index.tsx"],"sourcesContent":["'use client'\nimport type { ClientUser } from 'payload'\n\nimport React, { useEffect } from 'react'\n\nimport { useRouteCache } from '../../providers/RouteCache/index.js'\nimport { useRouteTransition } from '../../providers/RouteTransition/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { isClientUserObject } from '../../utilities/isClientUserObject.js'\nimport { Button } from '../Button/index.js'\nimport { Modal, useModal } from '../Modal/index.js'\nimport './index.scss'\n\nconst modalSlug = 'document-locked'\n\nconst baseClass = 'document-locked'\n\nconst formatDate = (date) => {\n  if (!date) {\n    return ''\n  }\n  return new Intl.DateTimeFormat('en-US', {\n    day: 'numeric',\n    hour: 'numeric',\n    hour12: true,\n    minute: 'numeric',\n    month: 'short',\n    year: 'numeric',\n  }).format(new Date(date))\n}\n\nexport const DocumentLocked: React.FC<{\n  handleGoBack: () => void\n  isActive: boolean\n  onReadOnly: () => void\n  onTakeOver: () => void\n  updatedAt?: null | number\n  user?: ClientUser | number | string\n}> = ({ handleGoBack, isActive, onReadOnly, onTakeOver, updatedAt, user }) => {\n  const { closeModal, openModal } = useModal()\n  const { t } = useTranslation()\n  const { clearRouteCache } = useRouteCache()\n  const { startRouteTransition } = useRouteTransition()\n\n  useEffect(() => {\n    if (isActive) {\n      openModal(modalSlug)\n    } else {\n      closeModal(modalSlug)\n    }\n  }, [isActive, openModal, closeModal])\n\n  return (\n    <Modal\n      className={baseClass}\n      // Fixes https://github.com/payloadcms/payload/issues/13778\n      closeOnBlur={false}\n      onClose={() => {\n        startRouteTransition(() => handleGoBack())\n      }}\n      slug={modalSlug}\n    >\n      <div className={`${baseClass}__wrapper`}>\n        <div className={`${baseClass}__content`}>\n          <h1>{t('general:documentLocked')}</h1>\n          <p>\n            <strong>\n              {isClientUserObject(user) ? (user.email ?? user.id) : `${t('general:user')}: ${user}`}\n            </strong>{' '}\n            {t('general:currentlyEditing')}\n          </p>\n          <p>\n            {t('general:editedSince')} <strong>{formatDate(updatedAt)}</strong>\n          </p>\n        </div>\n        <div className={`${baseClass}__controls`}>\n          <Button\n            buttonStyle=\"secondary\"\n            id={`${modalSlug}-go-back`}\n            onClick={() => {\n              closeModal(modalSlug)\n              startRouteTransition(() => handleGoBack())\n            }}\n            size=\"large\"\n          >\n            {t('general:goBack')}\n          </Button>\n          <Button\n            buttonStyle=\"secondary\"\n            id={`${modalSlug}-view-read-only`}\n            onClick={() => {\n              onReadOnly()\n              closeModal(modalSlug)\n              clearRouteCache()\n            }}\n            size=\"large\"\n          >\n            {t('general:viewReadOnly')}\n          </Button>\n          <Button\n            buttonStyle=\"primary\"\n            id={`${modalSlug}-take-over`}\n            onClick={() => {\n              onTakeOver()\n              closeModal(modalSlug)\n            }}\n            size=\"large\"\n          >\n            {t('general:takeOver')}\n          </Button>\n        </div>\n      </div>\n    </Modal>\n  )\n}\n"],"mappings":"AAAA;;AAAA,SAAAA,CAAA,IAAAC,EAAA;;AAGA,OAAOC,KAAA,IAASC,SAAS,QAAQ;AAEjC,SAASC,aAAa,QAAQ;AAC9B,SAASC,kBAAkB,QAAQ;AACnC,SAASC,cAAc,QAAQ;AAC/B,SAASC,kBAAkB,QAAQ;AACnC,SAASC,MAAM,QAAQ;AACvB,SAASC,KAAK,EAAEC,QAAQ,QAAQ;AAChC,OAAO;AAEP,MAAMC,SAAA,GAAY;AAElB,MAAMC,SAAA,GAAY;AAElB,MAAMC,UAAA,GAAcC,IAAA;EAClB,IAAI,CAACA,IAAA,EAAM;IACT,OAAO;EACT;EACA,OAAO,IAAIC,IAAA,CAAKC,cAAc,CAAC,SAAS;IACtCC,GAAA,EAAK;IACLC,IAAA,EAAM;IACNC,MAAA,EAAQ;IACRC,MAAA,EAAQ;IACRC,KAAA,EAAO;IACPC,IAAA,EAAM;EACR,GAAGC,MAAM,CAAC,IAAIC,IAAA,CAAKV,IAAA;AACrB;AAEA,OAAO,MAAMW,cAAA,GAORC,EAAA;EAAA,MAAAC,CAAA,GAAA1B,EAAA;EAAC;IAAA2B,YAAA;IAAAC,QAAA;IAAAC,UAAA;IAAAC,UAAA;IAAAC,SAAA;IAAAC;EAAA,IAAAP,EAAmE;EACvE;IAAAQ,UAAA;IAAAC;EAAA,IAAkCzB,QAAA;EAClC;IAAA0B;EAAA,IAAc9B,cAAA;EACd;IAAA+B;EAAA,IAA4BjC,aAAA;EAC5B;IAAAkC;EAAA,IAAiCjC,kBAAA;EAAA,IAAAkC,EAAA;EAAA,IAAAC,EAAA;EAAA,IAAAb,CAAA,QAAAO,UAAA,IAAAP,CAAA,QAAAE,QAAA,IAAAF,CAAA,QAAAQ,SAAA;IAEvBI,EAAA,GAAAA,CAAA;MAAA,IACJV,QAAA;QACFM,SAAA,CAAAxB,SAAU;MAAA;QAEVuB,UAAA,CAAAvB,SAAW;MAAA;IAAA;IAEZ6B,EAAA,IAACX,QAAA,EAAUM,SAAA,EAAWD,UAAA;IAAWP,CAAA,MAAAO,UAAA;IAAAP,CAAA,MAAAE,QAAA;IAAAF,CAAA,MAAAQ,SAAA;IAAAR,CAAA,MAAAY,EAAA;IAAAZ,CAAA,MAAAa,EAAA;EAAA;IAAAD,EAAA,GAAAZ,CAAA;IAAAa,EAAA,GAAAb,CAAA;EAAA;EANpCxB,SAAA,CAAUoC,EAMV,EAAGC,EAAiC;EAAA,IAAAC,EAAA;EAAA,IAAAd,CAAA,QAAAC,YAAA,IAAAD,CAAA,QAAAW,oBAAA;IAOvBG,EAAA,GAAAA,CAAA;MACPH,oBAAA,OAA2BV,YAAA;IAAA;IAC7BD,CAAA,MAAAC,YAAA;IAAAD,CAAA,MAAAW,oBAAA;IAAAX,CAAA,MAAAc,EAAA;EAAA;IAAAA,EAAA,GAAAd,CAAA;EAAA;EAAA,IAAAe,EAAA;EAAA,IAAAf,CAAA,QAAAU,eAAA,IAAAV,CAAA,QAAAO,UAAA,IAAAP,CAAA,SAAAC,YAAA,IAAAD,CAAA,SAAAG,UAAA,IAAAH,CAAA,SAAAI,UAAA,IAAAJ,CAAA,SAAAW,oBAAA,IAAAX,CAAA,SAAAS,CAAA,IAAAT,CAAA,SAAAc,EAAA,IAAAd,CAAA,SAAAK,SAAA,IAAAL,CAAA,SAAAM,IAAA;IAAA,IAAAU,EAAA;IAAA,IAAAhB,CAAA,SAAAS,CAAA,IAAAT,CAAA,SAAAM,IAAA;MAQSU,EAAA,GAAApC,kBAAA,CAAmB0B,IAAA,IAASA,IAAA,CAAAW,KAAA,IAAcX,IAAA,CAAAY,EAAO,GAAI,GAAGT,CAAA,CAAE,oBAAoBH,IAAA,EAAM;MAAAN,CAAA,OAAAS,CAAA;MAAAT,CAAA,OAAAM,IAAA;MAAAN,CAAA,OAAAgB,EAAA;IAAA;MAAAA,EAAA,GAAAhB,CAAA;IAAA;IAAA,IAAAmB,EAAA;IAAA,IAAAnB,CAAA,SAAAO,UAAA,IAAAP,CAAA,SAAAC,YAAA,IAAAD,CAAA,SAAAW,oBAAA;MAY9EQ,EAAA,GAAAA,CAAA;QACPZ,UAAA,CAAAvB,SAAW;QACX2B,oBAAA,OAA2BV,YAAA;MAAA;MAC7BD,CAAA,OAAAO,UAAA;MAAAP,CAAA,OAAAC,YAAA;MAAAD,CAAA,OAAAW,oBAAA;MAAAX,CAAA,OAAAmB,EAAA;IAAA;MAAAA,EAAA,GAAAnB,CAAA;IAAA;IAAA,IAAAoB,EAAA;IAAA,IAAApB,CAAA,SAAAU,eAAA,IAAAV,CAAA,SAAAO,UAAA,IAAAP,CAAA,SAAAG,UAAA;MAQSiB,EAAA,GAAAA,CAAA;QACPjB,UAAA;QACAI,UAAA,CAAAvB,SAAW;QACX0B,eAAA;MAAA;MACFV,CAAA,OAAAU,eAAA;MAAAV,CAAA,OAAAO,UAAA;MAAAP,CAAA,OAAAG,UAAA;MAAAH,CAAA,OAAAoB,EAAA;IAAA;MAAAA,EAAA,GAAApB,CAAA;IAAA;IAAA,IAAAqB,EAAA;IAAA,IAAArB,CAAA,SAAAO,UAAA,IAAAP,CAAA,SAAAI,UAAA;MAQSiB,EAAA,GAAAA,CAAA;QACPjB,UAAA;QACAG,UAAA,CAAAvB,SAAW;MAAA;MACbgB,CAAA,OAAAO,UAAA;MAAAP,CAAA,OAAAI,UAAA;MAAAJ,CAAA,OAAAqB,EAAA;IAAA;MAAAA,EAAA,GAAArB,CAAA;IAAA;IApDRe,EAAA,GAAAO,IAAA,CAAAxC,KAAA;MAAAyC,SAAA,EAAAtC,SAAA;MAAAuC,WAAA;MAAAC,OAAA,EAIWX,EAET;MAAAY,IAAA,EAAA1C,SAAA;MAAA2C,QAAA,EAGAC,KAAA,CAAC;QAAAL,SAAA,EAAe,GAAAtC,SAAA,WAAuB;QAAA0C,QAAA,GACrCC,KAAA,CAAC;UAAAL,SAAA,EAAe,GAAAtC,SAAA,WAAuB;UAAA0C,QAAA,GACrCL,IAAA,CAAC;YAAAK,QAAA,EAAIlB,CAAA,CAAE;UAAA,C,GACPmB,KAAA,CAAC;YAAAD,QAAA,GACCL,IAAA,CAAC;cAAAK,QAAA,EACEX;YAAoF,C,GAC7E,KACTP,CAAA,CAAE;UAAA,C,GAELmB,KAAA,CAAC;YAAAD,QAAA,GACElB,CAAA,CAAE,wBAAuB,KAACa,IAAA,CAAC;cAAAK,QAAA,EAAQzC,UAAA,CAAWmB,SAAA;YAAA,C;;YAGnDuB,KAAA,CAAC;UAAAL,SAAA,EAAe,GAAAtC,SAAA,YAAwB;UAAA0C,QAAA,GACtCL,IAAA,CAAAzC,MAAA;YAAAgD,WAAA,EACc;YAAAX,EAAA,EACR,GAAAlC,SAAA,UAAsB;YAAA8C,OAAA,EACjBX,EAGT;YAAAY,IAAA,EACK;YAAAJ,QAAA,EAEJlB,CAAA,CAAE;UAAA,C,GAELa,IAAA,CAAAzC,MAAA;YAAAgD,WAAA,EACc;YAAAX,EAAA,EACR,GAAAlC,SAAA,iBAA6B;YAAA8C,OAAA,EACxBV,EAIT;YAAAW,IAAA,EACK;YAAAJ,QAAA,EAEJlB,CAAA,CAAE;UAAA,C,GAELa,IAAA,CAAAzC,MAAA;YAAAgD,WAAA,EACc;YAAAX,EAAA,EACR,GAAAlC,SAAA,YAAwB;YAAA8C,OAAA,EACnBT,EAGT;YAAAU,IAAA,EACK;YAAAJ,QAAA,EAEJlB,CAAA,CAAE;UAAA,C;;;;;;;;;;;;;;;;;;SAvDXM,E;CA6DJ","ignoreList":[]}