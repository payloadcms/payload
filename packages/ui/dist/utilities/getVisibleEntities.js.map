{"version":3,"file":"getVisibleEntities.js","names":["isHidden","hidden","user","getVisibleEntities","req","collections","payload","config","map","slug","admin","filter","Boolean","globals"],"sources":["../../src/utilities/getVisibleEntities.ts"],"sourcesContent":["import type { PayloadRequest, VisibleEntities } from 'payload'\n\ntype Hidden = ((args: { user: unknown }) => boolean) | boolean\n\nfunction isHidden(hidden: Hidden | undefined, user: unknown): boolean {\n  if (typeof hidden === 'function') {\n    try {\n      return hidden({ user })\n    } catch {\n      return true\n    }\n  }\n  return !!hidden\n}\n\nexport function getVisibleEntities({ req }: { req: PayloadRequest }): VisibleEntities {\n  return {\n    collections: req.payload.config.collections\n      .map(({ slug, admin: { hidden } }) => (!isHidden(hidden, req.user) ? slug : null))\n      .filter(Boolean),\n    globals: req.payload.config.globals\n      .map(({ slug, admin: { hidden } }) => (!isHidden(hidden, req.user) ? slug : null))\n      .filter(Boolean),\n  }\n}\n"],"mappings":"AAIA,SAASA,SAASC,MAA0B,EAAEC,IAAa;EACzD,IAAI,OAAOD,MAAA,KAAW,YAAY;IAChC,IAAI;MACF,OAAOA,MAAA,CAAO;QAAEC;MAAK;IACvB,EAAE,MAAM;MACN,OAAO;IACT;EACF;EACA,OAAO,CAAC,CAACD,MAAA;AACX;AAEA,OAAO,SAASE,mBAAmB;EAAEC;AAAG,CAA2B;EACjE,OAAO;IACLC,WAAA,EAAaD,GAAA,CAAIE,OAAO,CAACC,MAAM,CAACF,WAAW,CACxCG,GAAG,CAAC,CAAC;MAAEC,IAAI;MAAEC,KAAA,EAAO;QAAET;MAAM;IAAE,CAAE,KAAM,CAACD,QAAA,CAASC,MAAA,EAAQG,GAAA,CAAIF,IAAI,IAAIO,IAAA,GAAO,MAC3EE,MAAM,CAACC,OAAA;IACVC,OAAA,EAAST,GAAA,CAAIE,OAAO,CAACC,MAAM,CAACM,OAAO,CAChCL,GAAG,CAAC,CAAC;MAAEC,IAAI;MAAEC,KAAA,EAAO;QAAET;MAAM;IAAE,CAAE,KAAM,CAACD,QAAA,CAASC,MAAA,EAAQG,GAAA,CAAIF,IAAI,IAAIO,IAAA,GAAO,MAC3EE,MAAM,CAACC,OAAA;EACZ;AACF","ignoreList":[]}