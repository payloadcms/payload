{"version":3,"file":"index.js","names":["React","Fragment","useState","components","Tooltip","EditIcon","useAuth","useTranslation","baseClass","MultiValueLabel","props","data","t0","selectProps","t1","allowEdit","label","relationTo","value","customProps","t2","undefined","draggableProps","onDocumentOpen","permissions","showTooltip","setShowTooltip","t","hasReadPermission","Boolean","collections","read","_jsxs","className","title","children","_jsx","innerProps","onClick","event","id","collectionSlug","openInNewTab","metaKey","ctrlKey","onKeyDown","_temp","onMouseDown","_temp2","onMouseEnter","onMouseLeave","onTouchEnd","_temp3","type","show","e","key","stopPropagation","e_0","e_1"],"sources":["../../../../../src/fields/Relationship/select-components/MultiValueLabel/index.tsx"],"sourcesContent":["'use client'\nimport type { MultiValueProps } from 'react-select'\n\nimport React, { Fragment, useState } from 'react'\nimport { components } from 'react-select'\n\nimport type { ReactSelectAdapterProps } from '../../../../elements/ReactSelect/types.js'\nimport type { Option } from '../../types.js'\n\nimport { Tooltip } from '../../../../elements/Tooltip/index.js'\nimport { EditIcon } from '../../../../icons/Edit/index.js'\nimport { useAuth } from '../../../../providers/Auth/index.js'\nimport { useTranslation } from '../../../../providers/Translation/index.js'\nimport './index.scss'\n\nconst baseClass = 'relationship--multi-value-label'\n\nexport const MultiValueLabel: React.FC<\n  {\n    selectProps: {\n      // TODO Fix this - moduleResolution 16 breaks our declare module\n      customProps: ReactSelectAdapterProps['customProps']\n    }\n  } & MultiValueProps<Option>\n> = (props) => {\n  const {\n    data: { allowEdit, label, relationTo, value },\n    selectProps: { customProps: { draggableProps, onDocumentOpen } = {} } = {},\n  } = props\n\n  const { permissions } = useAuth()\n  const [showTooltip, setShowTooltip] = useState(false)\n  const { t } = useTranslation()\n  const hasReadPermission = Boolean(permissions?.collections?.[relationTo]?.read)\n\n  return (\n    <div className={baseClass} title={label || ''}>\n      <div className={`${baseClass}__content`}>\n        <components.MultiValueLabel\n          {...props}\n          innerProps={{\n            className: `${baseClass}__text`,\n            ...(draggableProps || {}),\n          }}\n        />\n      </div>\n      {relationTo && hasReadPermission && allowEdit !== false && (\n        <Fragment>\n          <button\n            aria-label={`Edit ${label}`}\n            className={`${baseClass}__drawer-toggler`}\n            onClick={(event) => {\n              setShowTooltip(false)\n              onDocumentOpen({\n                id: value,\n                collectionSlug: relationTo,\n                hasReadPermission,\n                openInNewTab: event.metaKey || event.ctrlKey,\n              })\n            }}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') {\n                e.stopPropagation()\n              }\n            }}\n            onMouseDown={(e) => e.stopPropagation()} // prevents react-select dropdown from opening\n            onMouseEnter={() => setShowTooltip(true)}\n            onMouseLeave={() => setShowTooltip(false)}\n            onTouchEnd={(e) => e.stopPropagation()} // prevents react-select dropdown from opening\n            type=\"button\"\n          >\n            <Tooltip className={`${baseClass}__tooltip`} show={showTooltip}>\n              {t('general:editLabel', { label: '' })}\n            </Tooltip>\n            <EditIcon className={`${baseClass}__icon`} />\n          </button>\n        </Fragment>\n      )}\n    </div>\n  )\n}\n"],"mappings":"AAAA;;;AAGA,OAAOA,KAAA,IAASC,QAAQ,EAAEC,QAAQ,QAAQ;AAC1C,SAASC,UAAU,QAAQ;AAK3B,SAASC,OAAO,QAAQ;AACxB,SAASC,QAAQ,QAAQ;AACzB,SAASC,OAAO,QAAQ;AACxB,SAASC,cAAc,QAAQ;AAC/B,OAAO;AAEP,MAAMC,SAAA,GAAY;AAElB,OAAO,MAAMC,eAAA,GAOTC,KAAA;EACF;IAAAC,IAAA,EAAAC,EAAA;IAAAC,WAAA,EAAAC;EAAA,IAGIJ,KAAA;EAFI;IAAAK,SAAA;IAAAC,KAAA;IAAAC,UAAA;IAAAC;EAAA,IAAAN,EAAuC;EAChC;IAAAO,WAAA,EAAAC;EAAA,IAAAN,EAA6D,KAAAO,SAAA,QAA7DP,EAA6D;EAA9C;IAAAQ,cAAA;IAAAC;EAAA,IAAAH,EAAuC,KAAAC,SAAA,QAAvCD,EAAuC;EAGrE;IAAAI;EAAA,IAAwBlB,OAAA;EACxB,OAAAmB,WAAA,EAAAC,cAAA,IAAsCxB,QAAA,MAAS;EAC/C;IAAAyB;EAAA,IAAcpB,cAAA;EACd,MAAAqB,iBAAA,GAA0BC,OAAA,CAAQL,WAAA,EAAAM,WAAA,GAA2Bb,UAAA,GAAAc,IAAa;EAAA,OAGxEC,KAAA,CAAC;IAAAC,SAAA,EAAAzB,SAAA;IAAA0B,KAAA,EAAiClB,KAAA,IAAS;IAAAmB,QAAA,GACzCC,IAAA,CAAC;MAAAH,SAAA,EAAe,GAAAzB,SAAA,WAAuB;MAAA2B,QAAA,EACrCC,IAAA,CAAAjC,UAAA,CAAAM,eAAA;QAAA,GACMC,KAAK;QAAA2B,UAAA;UAAAJ,SAAA,EAEI,GAAAzB,SAAA,QAAoB;UAAA,IAC3Bc,cAAA,MAAoB;QAAA;MAAA,C;QAI7BL,UAAA,IAAcW,iBAAA,IAAqBb,SAAA,UAAc,IAChDqB,IAAA,CAAAnC,QAAA;MAAAkC,QAAA,EACEH,KAAA,CAAC;QAAA,cACa,QAAQhB,KAAA,EAAO;QAAAiB,SAAA,EAChB,GAAAzB,SAAA,kBAA8B;QAAA8B,OAAA,EAAAC,KAAA;UAEvCb,cAAA,MAAe;UACfH,cAAA;YAAAiB,EAAA,EACMtB,KAAA;YAAAuB,cAAA,EACYxB,UAAA;YAAAW,iBAAA;YAAAc,YAAA,EAEFH,KAAA,CAAAI,OAAA,IAAiBJ,KAAA,CAAAK;UAAa,CAC9C;QAAA;QAAAC,SAAA,EAAAC,KAAA;QAAAC,WAAA,EAAAC,MAAA;QAAAC,YAAA,EAAAA,CAAA,KAQkBvB,cAAA,KAAe;QAAAwB,YAAA,EAAAA,CAAA,KACfxB,cAAA,MAAe;QAAAyB,UAAA,EAAAC,MAAA;QAAAC,IAAA,EAE9B;QAAAlB,QAAA,GAELC,IAAA,CAAAhC,OAAA;UAAA6B,SAAA,EAAoB,GAAAzB,SAAA,WAAuB;UAAA8C,IAAA,EAAQ7B,WAAA;UAAAU,QAAA,EAChDR,CAAA,CAAE;YAAAX,KAAA,EAA8B;UAAA,CAAG;QAAA,C,GAEtCoB,IAAA,CAAA/B,QAAA;UAAA4B,SAAA,EAAqB,GAAAzB,SAAA;QAAoB,C;;;;CAMrD;AAxDI,SAAAsC,MAAAS,CAAA;EAAA,IAqCcA,CAAA,CAAAC,GAAA,KAAU;IACZD,CAAA,CAAAE,eAAA,CAAiB;EAAA;AAAA;AAtC7B,SAAAT,OAAAU,GAAA;EAAA,OAyC4BH,GAAA,CAAAE,eAAA,CAAiB;AAAA;AAzC7C,SAAAL,OAAAO,GAAA;EAAA,OA4C2BJ,GAAA,CAAAE,eAAA,CAAiB;AAAA","ignoreList":[]}