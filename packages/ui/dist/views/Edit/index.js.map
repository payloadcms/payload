{"version":3,"file":"index.js","names":["useRouter","useSearchParams","formatAdminURL","hasAutosaveEnabled","React","Fragment","useCallback","useEffect","useMemo","useRef","useState","DocumentControls","DocumentDrawerHeader","useDocumentDrawerContext","DocumentFields","DocumentLocked","DocumentTakeOver","LeaveWithoutSaving","LivePreviewWindow","Upload","Form","useAuth","useConfig","useDocumentEvents","useDocumentInfo","useEditDepth","useLivePreviewContext","usePreviewURL","OperationProvider","useRouteCache","useRouteTransition","useServerFunctions","UploadControlsProvider","useUploadEdits","abortAndIgnore","handleAbortRef","handleBackToDashboard","handleGoBack","handleTakeOver","Auth","SetDocumentStepNav","SetDocumentTitle","baseClass","DefaultEditView","BeforeDocumentControls","Description","EditMenuItems","LivePreview","CustomLivePreview","PreviewButton","PublishButton","SaveButton","SaveDraftButton","Status","CustomUpload","UploadControls","id","action","AfterDocument","AfterFields","apiURL","BeforeFields","collectionSlug","currentEditor","data","disableActions","disableCreate","disableLeaveWithoutSaving","docPermissions","documentIsLocked","documentLockState","getDocPermissions","getDocPreferences","globalSlug","hasPublishPermission","hasSavePermission","incrementVersionCount","initialState","isEditing","isInitializing","isLocked","isTrashed","lastUpdateTime","redirectAfterCreate","redirectAfterDelete","redirectAfterDuplicate","redirectAfterRestore","setCurrentEditor","setData","setDocumentIsLocked","setLastUpdateTime","unlockDocument","updateDocumentEditor","clearDoc","drawerSlug","onDelete","onDuplicate","onRestore","onSave","onSaveFromContext","isInDrawer","Boolean","refreshCookieAsync","user","config","admin","userSlug","routes","adminRoute","serverURL","getEntityConfig","collectionConfig","globalConfig","depth","router","params","reportUpdate","resetUploadEdits","getFormState","startRouteTransition","clearRouteCache","isLivePreviewEnabled","isLivePreviewing","previewWindowType","setURL","setLivePreviewURL","typeofLivePreviewURL","url","livePreviewURL","isPreviewEnabled","setPreviewURL","abortOnChangeRef","abortOnSaveRef","locale","get","entitySlug","slug","operation","auth","undefined","upload","docConfig","lockDocumentsProp","lockDocuments","isLockingEnabled","lockDurationDefault","lockDuration","duration","lockDurationInMilliseconds","autosaveEnabled","isReadOnlyForIncomingUser","setIsReadOnlyForIncomingUser","showTakeOverModal","setShowTakeOverModal","editSessionStartTime","setEditSessionStartTime","Date","now","lockExpiryTime","isLockExpired","preventLeaveWithoutSaving","schemaPathSegments","validateBeforeSubmit","setValidateBeforeSubmit","disableLocalStrategy","nextHrefRef","handleDocumentLocking","lockedState","previousOwnerID","current","lockedUserID","hasShownLockedModal","lastEditedAt","getTime","handlePrevent","nextHref","handleLeaveConfirm","lockUser","isLockOwnedByCurrentUser","nextPath","URL","pathname","isInternalView","some","path","includes","err","console","error","json","ctx","context","formState","controller","document","doc","result","updatedAt","toISOString","redirectRoute","push","docPreferences","previewURL","state","renderAllFields","returnLivePreviewURL","returnLockStatus","returnPreviewURL","schemaPath","join","signal","skipValidation","file","onChange","prevFormState","submitted","currentTime","timeSinceLastUpdate","updateLastEdited","abortOnChange","abortOnSave","shouldShowDocumentLockedModal","isFolderCollection","folders","_jsx","className","filter","_jsxs","disabled","disableValidationOnSubmit","isDocumentForm","method","onSuccess","AfterHeader","showDocumentID","isActive","onReadOnly","onTakeOver","documentLockStateRef","isWithinDoc","onConfirm","onPrevent","pluralLabel","labels","plural","useAsTitle","fallback","toString","customComponents","onDrawerCreateNew","permissions","readOnlyForIncomingUser","email","loginWithUsername","readOnly","requirePassword","useAPIKey","username","verify","uploadConfig","fields","forceSidebarWrap","_Fragment"],"sources":["../../../src/views/Edit/index.tsx"],"sourcesContent":["'use client'\n\nimport type { ClientUser, DocumentViewClientProps } from 'payload'\n\nimport { useRouter, useSearchParams } from 'next/navigation.js'\nimport { formatAdminURL, hasAutosaveEnabled } from 'payload/shared'\nimport React, { Fragment, useCallback, useEffect, useMemo, useRef, useState } from 'react'\n\nimport type { FormProps } from '../../forms/Form/index.js'\nimport type { FormOnSuccess } from '../../forms/Form/types.js'\nimport type { LockedState } from '../../utilities/buildFormState.js'\n\nimport { DocumentControls } from '../../elements/DocumentControls/index.js'\nimport { DocumentDrawerHeader } from '../../elements/DocumentDrawer/DrawerHeader/index.js'\nimport { useDocumentDrawerContext } from '../../elements/DocumentDrawer/Provider.js'\nimport { DocumentFields } from '../../elements/DocumentFields/index.js'\nimport { DocumentLocked } from '../../elements/DocumentLocked/index.js'\nimport { DocumentTakeOver } from '../../elements/DocumentTakeOver/index.js'\nimport { LeaveWithoutSaving } from '../../elements/LeaveWithoutSaving/index.js'\nimport { LivePreviewWindow } from '../../elements/LivePreview/Window/index.js'\nimport { Upload } from '../../elements/Upload/index.js'\nimport { Form } from '../../forms/Form/index.js'\nimport { useAuth } from '../../providers/Auth/index.js'\nimport { useConfig } from '../../providers/Config/index.js'\nimport { useDocumentEvents } from '../../providers/DocumentEvents/index.js'\nimport { useDocumentInfo } from '../../providers/DocumentInfo/index.js'\nimport { useEditDepth } from '../../providers/EditDepth/index.js'\nimport { useLivePreviewContext, usePreviewURL } from '../../providers/LivePreview/context.js'\nimport { OperationProvider } from '../../providers/Operation/index.js'\nimport { useRouteCache } from '../../providers/RouteCache/index.js'\nimport { useRouteTransition } from '../../providers/RouteTransition/index.js'\nimport { useServerFunctions } from '../../providers/ServerFunctions/index.js'\nimport { UploadControlsProvider } from '../../providers/UploadControls/index.js'\nimport { useUploadEdits } from '../../providers/UploadEdits/index.js'\nimport { abortAndIgnore, handleAbortRef } from '../../utilities/abortAndIgnore.js'\nimport { handleBackToDashboard } from '../../utilities/handleBackToDashboard.js'\nimport { handleGoBack } from '../../utilities/handleGoBack.js'\nimport { handleTakeOver } from '../../utilities/handleTakeOver.js'\nimport { Auth } from './Auth/index.js'\nimport { SetDocumentStepNav } from './SetDocumentStepNav/index.js'\nimport { SetDocumentTitle } from './SetDocumentTitle/index.js'\nimport './index.scss'\n\nconst baseClass = 'collection-edit'\n\nexport type OnSaveContext = {\n  getDocPermissions?: boolean\n  incrementVersionCount?: boolean\n}\n\n// This component receives props only on _pages_\n// When rendered within a drawer, props are empty\n// This is solely to support custom edit views which get server-rendered\nexport function DefaultEditView({\n  BeforeDocumentControls,\n  Description,\n  EditMenuItems,\n  LivePreview: CustomLivePreview,\n  PreviewButton,\n  PublishButton,\n  SaveButton,\n  SaveDraftButton,\n  Status,\n  Upload: CustomUpload,\n  UploadControls,\n}: DocumentViewClientProps) {\n  const {\n    id,\n    action,\n    AfterDocument,\n    AfterFields,\n    apiURL,\n    BeforeFields,\n    collectionSlug,\n    currentEditor,\n    data,\n    disableActions,\n    disableCreate,\n    disableLeaveWithoutSaving,\n    docPermissions,\n    documentIsLocked,\n    documentLockState,\n    getDocPermissions,\n    getDocPreferences,\n    globalSlug,\n    hasPublishPermission,\n    hasSavePermission,\n    incrementVersionCount,\n    initialState,\n    isEditing,\n    isInitializing,\n    isLocked,\n    isTrashed,\n    lastUpdateTime,\n    redirectAfterCreate,\n    redirectAfterDelete,\n    redirectAfterDuplicate,\n    redirectAfterRestore,\n    setCurrentEditor,\n    setData,\n    setDocumentIsLocked,\n    setLastUpdateTime,\n    unlockDocument,\n    updateDocumentEditor,\n  } = useDocumentInfo()\n\n  const {\n    clearDoc,\n    drawerSlug,\n    onDelete,\n    onDuplicate,\n    onRestore,\n    onSave: onSaveFromContext,\n  } = useDocumentDrawerContext()\n\n  const isInDrawer = Boolean(drawerSlug)\n\n  const { refreshCookieAsync, user } = useAuth()\n\n  const {\n    config,\n    config: {\n      admin: { user: userSlug },\n      routes: { admin: adminRoute },\n      serverURL,\n    },\n    getEntityConfig,\n  } = useConfig()\n\n  const collectionConfig = getEntityConfig({ collectionSlug })\n  const globalConfig = getEntityConfig({ globalSlug })\n\n  const depth = useEditDepth()\n\n  const router = useRouter()\n  const params = useSearchParams()\n  const { reportUpdate } = useDocumentEvents()\n  const { resetUploadEdits } = useUploadEdits()\n  const { getFormState } = useServerFunctions()\n  const { startRouteTransition } = useRouteTransition()\n  const { clearRouteCache } = useRouteCache()\n  const {\n    isLivePreviewEnabled,\n    isLivePreviewing,\n    previewWindowType,\n    setURL: setLivePreviewURL,\n    typeofLivePreviewURL,\n    url: livePreviewURL,\n  } = useLivePreviewContext()\n  const { isPreviewEnabled, setPreviewURL } = usePreviewURL()\n\n  const abortOnChangeRef = useRef<AbortController>(null)\n  const abortOnSaveRef = useRef<AbortController>(null)\n\n  const locale = params.get('locale')\n\n  const entitySlug = collectionConfig?.slug || globalConfig?.slug\n\n  const operation = collectionSlug && !id ? 'create' : 'update'\n\n  const auth = collectionConfig ? collectionConfig.auth : undefined\n  const upload = collectionConfig ? collectionConfig.upload : undefined\n\n  const docConfig = collectionConfig || globalConfig\n\n  const lockDocumentsProp = docConfig?.lockDocuments !== undefined ? docConfig?.lockDocuments : true\n  const isLockingEnabled = lockDocumentsProp !== false\n\n  const lockDurationDefault = 300 // Default 5 minutes in seconds\n  const lockDuration =\n    typeof lockDocumentsProp === 'object' ? lockDocumentsProp.duration : lockDurationDefault\n  const lockDurationInMilliseconds = lockDuration * 1000\n\n  const autosaveEnabled = hasAutosaveEnabled(docConfig)\n\n  const [isReadOnlyForIncomingUser, setIsReadOnlyForIncomingUser] = useState(false)\n  const [showTakeOverModal, setShowTakeOverModal] = useState(false)\n\n  const [editSessionStartTime, setEditSessionStartTime] = useState(Date.now())\n\n  const lockExpiryTime = lastUpdateTime + lockDurationInMilliseconds\n  const isLockExpired = Date.now() > lockExpiryTime\n\n  const preventLeaveWithoutSaving =\n    !isReadOnlyForIncomingUser &&\n    (typeof disableLeaveWithoutSaving !== 'undefined'\n      ? !disableLeaveWithoutSaving\n      : !autosaveEnabled)\n\n  const schemaPathSegments = useMemo(() => [entitySlug], [entitySlug])\n\n  const [validateBeforeSubmit, setValidateBeforeSubmit] = useState(() => {\n    if (operation === 'create' && auth && !auth.disableLocalStrategy) {\n      return true\n    }\n\n    return false\n  })\n\n  const nextHrefRef = React.useRef<null | string>(null)\n\n  const handleDocumentLocking = useCallback(\n    (lockedState: LockedState) => {\n      setDocumentIsLocked(true)\n      const previousOwnerID =\n        typeof documentLockState.current?.user === 'object'\n          ? documentLockState.current?.user?.id\n          : documentLockState.current?.user\n\n      if (lockedState) {\n        const lockedUserID =\n          typeof lockedState.user === 'string' || typeof lockedState.user === 'number'\n            ? lockedState.user\n            : lockedState.user.id\n\n        if (!documentLockState.current || lockedUserID !== previousOwnerID) {\n          if (previousOwnerID === user.id && lockedUserID !== user.id) {\n            setShowTakeOverModal(true)\n            documentLockState.current.hasShownLockedModal = true\n          }\n\n          documentLockState.current = {\n            hasShownLockedModal: documentLockState.current?.hasShownLockedModal || false,\n            isLocked: true,\n            user: lockedState.user as ClientUser,\n          }\n          setCurrentEditor(lockedState.user as ClientUser)\n        }\n\n        // Update lastUpdateTime when lock state changes\n        if (lockedState.lastEditedAt) {\n          setLastUpdateTime(new Date(lockedState.lastEditedAt).getTime())\n        }\n      }\n    },\n    [documentLockState, setCurrentEditor, setDocumentIsLocked, setLastUpdateTime, user?.id],\n  )\n\n  const handlePrevent = useCallback((nextHref: null | string) => {\n    nextHrefRef.current = nextHref\n  }, [])\n\n  const handleLeaveConfirm = useCallback(async () => {\n    const lockUser = documentLockState.current?.user\n\n    const isLockOwnedByCurrentUser =\n      typeof lockUser === 'object' ? lockUser?.id === user?.id : lockUser === user?.id\n\n    if (isLockingEnabled && documentIsLocked && (id || globalSlug)) {\n      // Check where user is trying to go\n      const nextPath = nextHrefRef.current ? new URL(nextHrefRef.current).pathname : ''\n      const isInternalView = ['/preview', '/api', '/versions'].some((path) =>\n        nextPath.includes(path),\n      )\n\n      // Remove the lock if the user is navigating away from the document view they have locked\n      if (isLockOwnedByCurrentUser && !isInternalView) {\n        try {\n          await unlockDocument(id, collectionSlug ?? globalSlug)\n          setDocumentIsLocked(false)\n          setCurrentEditor(null)\n        } catch (err) {\n          console.error('Failed to unlock before leave', err) // eslint-disable-line no-console\n        }\n      }\n    }\n  }, [\n    collectionSlug,\n    documentIsLocked,\n    documentLockState,\n    globalSlug,\n    id,\n    isLockingEnabled,\n    setCurrentEditor,\n    setDocumentIsLocked,\n    unlockDocument,\n    user?.id,\n  ])\n\n  const onSave: FormOnSuccess<any, OnSaveContext> = useCallback(\n    async (json, ctx) => {\n      const { context, formState } = ctx || {}\n\n      const controller = handleAbortRef(abortOnSaveRef)\n\n      const document = json?.doc || json?.result\n\n      const updatedAt = document?.updatedAt || new Date().toISOString()\n\n      // If we're editing the doc of the logged-in user,\n      // Refresh the cookie to get new permissions\n      if (user && collectionSlug === userSlug && id === user.id) {\n        void refreshCookieAsync()\n      }\n\n      setLastUpdateTime(updatedAt)\n\n      if (context?.incrementVersionCount !== false) {\n        incrementVersionCount()\n      }\n\n      if (typeof setData === 'function') {\n        void setData(document || {})\n      }\n\n      if (typeof onSaveFromContext === 'function') {\n        const operation = id ? 'update' : 'create'\n\n        void onSaveFromContext({\n          ...(json as Record<string, unknown>),\n          context,\n          operation,\n          // @ts-expect-error todo: this is not right, should be under `doc`?\n          updatedAt:\n            operation === 'update'\n              ? new Date().toISOString()\n              : document?.updatedAt || new Date().toISOString(),\n        })\n      }\n\n      if (!isEditing && depth < 2 && redirectAfterCreate !== false) {\n        // Redirect to the same locale if it's been set\n        const redirectRoute = formatAdminURL({\n          adminRoute,\n          path: `/collections/${collectionSlug}/${document?.id}${locale ? `?locale=${locale}` : ''}`,\n        })\n\n        startRouteTransition(() => router.push(redirectRoute))\n      } else {\n        resetUploadEdits()\n      }\n\n      if (context?.getDocPermissions !== false) {\n        await getDocPermissions(json)\n      }\n\n      if (id || globalSlug) {\n        const docPreferences = await getDocPreferences()\n\n        const { livePreviewURL, previewURL, state } = await getFormState({\n          id,\n          collectionSlug,\n          data: document,\n          docPermissions,\n          docPreferences,\n          formState,\n          globalSlug,\n          operation,\n          renderAllFields: false,\n          returnLivePreviewURL: isLivePreviewEnabled && typeofLivePreviewURL === 'function',\n          returnLockStatus: false,\n          returnPreviewURL: isPreviewEnabled,\n          schemaPath: schemaPathSegments.join('.'),\n          signal: controller.signal,\n          skipValidation: true,\n        })\n\n        // For upload collections, clear the file field from the returned state\n        // to prevent the File object from persisting in form state after save\n        if (upload && state) {\n          delete state.file\n        }\n\n        // Unlock the document after save\n        if (isLockingEnabled) {\n          setDocumentIsLocked(false)\n        }\n\n        if (isLivePreviewEnabled && typeofLivePreviewURL === 'function') {\n          setLivePreviewURL(livePreviewURL)\n        }\n\n        if (isPreviewEnabled) {\n          setPreviewURL(previewURL)\n        }\n\n        reportUpdate({\n          id,\n          doc: document,\n          drawerSlug,\n          entitySlug,\n          operation: 'update',\n          updatedAt,\n        })\n\n        abortOnSaveRef.current = null\n\n        return state\n      } else {\n        reportUpdate({\n          id,\n          doc: document,\n          drawerSlug,\n          entitySlug,\n          operation: 'create',\n          updatedAt,\n        })\n      }\n    },\n    [\n      user,\n      collectionSlug,\n      userSlug,\n      id,\n      setLastUpdateTime,\n      setData,\n      onSaveFromContext,\n      isEditing,\n      depth,\n      redirectAfterCreate,\n      globalSlug,\n      refreshCookieAsync,\n      incrementVersionCount,\n      adminRoute,\n      locale,\n      startRouteTransition,\n      router,\n      resetUploadEdits,\n      getDocPermissions,\n      getDocPreferences,\n      getFormState,\n      docPermissions,\n      operation,\n      isLivePreviewEnabled,\n      typeofLivePreviewURL,\n      isPreviewEnabled,\n      schemaPathSegments,\n      upload,\n      isLockingEnabled,\n      reportUpdate,\n      drawerSlug,\n      entitySlug,\n      setDocumentIsLocked,\n      setLivePreviewURL,\n      setPreviewURL,\n    ],\n  )\n\n  const onChange: FormProps['onChange'][0] = useCallback(\n    async ({ formState: prevFormState, submitted }) => {\n      const controller = handleAbortRef(abortOnChangeRef)\n\n      const currentTime = Date.now()\n      const timeSinceLastUpdate = currentTime - editSessionStartTime\n\n      const updateLastEdited = isLockingEnabled && timeSinceLastUpdate >= 10000 // 10 seconds\n\n      if (updateLastEdited) {\n        setEditSessionStartTime(currentTime)\n      }\n\n      const docPreferences = await getDocPreferences()\n\n      const result = await getFormState({\n        id,\n        collectionSlug,\n        docPermissions,\n        docPreferences,\n        formState: prevFormState,\n        globalSlug,\n        operation,\n        renderAllFields: false,\n        returnLockStatus: isLockingEnabled,\n        schemaPath: schemaPathSegments.join('.'),\n        signal: controller.signal,\n        skipValidation: !submitted,\n        updateLastEdited,\n      })\n\n      if (!result) {\n        return\n      }\n\n      const { lockedState, state } = result\n\n      if (isLockingEnabled) {\n        handleDocumentLocking(lockedState)\n      }\n\n      abortOnChangeRef.current = null\n\n      return state\n    },\n    [\n      editSessionStartTime,\n      isLockingEnabled,\n      getDocPreferences,\n      getFormState,\n      id,\n      collectionSlug,\n      docPermissions,\n      globalSlug,\n      operation,\n      schemaPathSegments,\n      handleDocumentLocking,\n    ],\n  )\n\n  // Clean up when the component unmounts or when the document is unlocked\n  useEffect(() => {\n    return () => {\n      setShowTakeOverModal(false)\n    }\n  }, [])\n\n  useEffect(() => {\n    const abortOnChange = abortOnChangeRef.current\n    const abortOnSave = abortOnSaveRef.current\n\n    return () => {\n      abortAndIgnore(abortOnChange)\n      abortAndIgnore(abortOnSave)\n    }\n  }, [])\n\n  const shouldShowDocumentLockedModal =\n    documentIsLocked &&\n    currentEditor &&\n    (typeof currentEditor === 'object'\n      ? currentEditor.id !== user?.id\n      : currentEditor !== user?.id) &&\n    !isReadOnlyForIncomingUser &&\n    !showTakeOverModal &&\n    !documentLockState.current?.hasShownLockedModal &&\n    !isLockExpired\n\n  const isFolderCollection = config.folders && collectionSlug === config.folders?.slug\n\n  return (\n    <main\n      className={[\n        baseClass,\n        (id || globalSlug) && `${baseClass}--is-editing`,\n        globalSlug && `global-edit--${globalSlug}`,\n        collectionSlug && `collection-edit--${collectionSlug}`,\n        isLivePreviewing && previewWindowType === 'iframe' && `${baseClass}--is-live-previewing`,\n      ]\n        .filter(Boolean)\n        .join(' ')}\n    >\n      <OperationProvider operation={operation}>\n        <Form\n          action={action}\n          className={`${baseClass}__form`}\n          disabled={isReadOnlyForIncomingUser || isInitializing || !hasSavePermission || isTrashed}\n          disableValidationOnSubmit={!validateBeforeSubmit}\n          initialState={!isInitializing && initialState}\n          isDocumentForm={true}\n          isInitializing={isInitializing}\n          key={`${isLocked}`}\n          method={id ? 'PATCH' : 'POST'}\n          onChange={[onChange]}\n          onSuccess={onSave}\n        >\n          {isInDrawer && (\n            <DocumentDrawerHeader\n              AfterHeader={Description}\n              drawerSlug={drawerSlug}\n              showDocumentID={!isFolderCollection}\n            />\n          )}\n          {isLockingEnabled && shouldShowDocumentLockedModal && (\n            <DocumentLocked\n              handleGoBack={() => handleGoBack({ adminRoute, collectionSlug, router, serverURL })}\n              isActive={shouldShowDocumentLockedModal}\n              onReadOnly={() => {\n                setIsReadOnlyForIncomingUser(true)\n                setShowTakeOverModal(false)\n              }}\n              onTakeOver={() =>\n                handleTakeOver({\n                  id,\n                  clearRouteCache,\n                  collectionSlug,\n                  documentLockStateRef: documentLockState,\n                  globalSlug,\n                  isLockingEnabled,\n                  isWithinDoc: false,\n                  setCurrentEditor,\n                  updateDocumentEditor,\n                  user,\n                })\n              }\n              updatedAt={lastUpdateTime}\n              user={currentEditor}\n            />\n          )}\n          {isLockingEnabled && showTakeOverModal && (\n            <DocumentTakeOver\n              handleBackToDashboard={() => handleBackToDashboard({ adminRoute, router, serverURL })}\n              isActive={showTakeOverModal}\n              onReadOnly={() => {\n                setIsReadOnlyForIncomingUser(true)\n                setShowTakeOverModal(false)\n              }}\n            />\n          )}\n          {preventLeaveWithoutSaving && (\n            <LeaveWithoutSaving onConfirm={handleLeaveConfirm} onPrevent={handlePrevent} />\n          )}\n          {!isInDrawer && (\n            <SetDocumentStepNav\n              collectionSlug={collectionConfig?.slug}\n              globalSlug={globalConfig?.slug}\n              id={id}\n              isTrashed={isTrashed}\n              pluralLabel={collectionConfig?.labels?.plural}\n              useAsTitle={collectionConfig?.admin?.useAsTitle}\n            />\n          )}\n          <SetDocumentTitle\n            collectionConfig={collectionConfig}\n            config={config}\n            fallback={depth <= 1 ? id?.toString() : undefined}\n            globalConfig={globalConfig}\n          />\n          <DocumentControls\n            apiURL={apiURL}\n            BeforeDocumentControls={BeforeDocumentControls}\n            customComponents={{\n              PreviewButton,\n              PublishButton,\n              SaveButton,\n              SaveDraftButton,\n              Status,\n            }}\n            data={data}\n            disableActions={disableActions || isFolderCollection || isTrashed}\n            disableCreate={disableCreate}\n            EditMenuItems={EditMenuItems}\n            hasPublishPermission={hasPublishPermission}\n            hasSavePermission={hasSavePermission}\n            id={id}\n            isEditing={isEditing}\n            isInDrawer={isInDrawer}\n            isTrashed={isTrashed}\n            onDelete={onDelete}\n            onDrawerCreateNew={clearDoc}\n            onDuplicate={onDuplicate}\n            onRestore={onRestore}\n            onSave={onSave}\n            onTakeOver={() =>\n              handleTakeOver({\n                id,\n                clearRouteCache,\n                collectionSlug,\n                documentLockStateRef: documentLockState,\n                globalSlug,\n                isLockingEnabled,\n                isWithinDoc: true,\n                setCurrentEditor,\n                setIsReadOnlyForIncomingUser,\n                updateDocumentEditor,\n                user,\n              })\n            }\n            permissions={docPermissions}\n            readOnlyForIncomingUser={isReadOnlyForIncomingUser}\n            redirectAfterDelete={redirectAfterDelete}\n            redirectAfterDuplicate={redirectAfterDuplicate}\n            redirectAfterRestore={redirectAfterRestore}\n            slug={collectionConfig?.slug || globalConfig?.slug}\n            user={currentEditor}\n          />\n          <div\n            className={[\n              `${baseClass}__main-wrapper`,\n              previewWindowType === 'popup' && `${baseClass}--detached`,\n            ]\n              .filter(Boolean)\n              .join(' ')}\n          >\n            <div\n              className={[\n                `${baseClass}__main`,\n                previewWindowType === 'popup' && `${baseClass}__main--popup-open`,\n              ]\n                .filter(Boolean)\n                .join(' ')}\n            >\n              <DocumentFields\n                AfterFields={AfterFields}\n                BeforeFields={\n                  BeforeFields || (\n                    <Fragment>\n                      {auth && (\n                        <Auth\n                          className={`${baseClass}__auth`}\n                          collectionSlug={collectionConfig.slug}\n                          disableLocalStrategy={collectionConfig.auth?.disableLocalStrategy}\n                          email={data?.email}\n                          loginWithUsername={auth?.loginWithUsername}\n                          operation={operation}\n                          readOnly={!hasSavePermission}\n                          requirePassword={!id}\n                          setValidateBeforeSubmit={setValidateBeforeSubmit}\n                          // eslint-disable-next-line react-compiler/react-compiler\n                          useAPIKey={auth.useAPIKey}\n                          username={data?.username}\n                          verify={auth.verify}\n                        />\n                      )}\n                      {upload && (\n                        <React.Fragment>\n                          <UploadControlsProvider>\n                            {CustomUpload || (\n                              <Upload\n                                collectionSlug={collectionConfig.slug}\n                                initialState={initialState}\n                                uploadConfig={upload}\n                                UploadControls={UploadControls}\n                              />\n                            )}\n                          </UploadControlsProvider>\n                        </React.Fragment>\n                      )}\n                    </Fragment>\n                  )\n                }\n                Description={Description}\n                docPermissions={docPermissions}\n                fields={docConfig.fields}\n                forceSidebarWrap={isLivePreviewing}\n                isTrashed={isTrashed}\n                readOnly={isReadOnlyForIncomingUser || !hasSavePermission || isTrashed}\n                schemaPathSegments={schemaPathSegments}\n              />\n              {AfterDocument}\n            </div>\n            {isLivePreviewEnabled && !isInDrawer && livePreviewURL && (\n              <>\n                {CustomLivePreview || (\n                  <LivePreviewWindow collectionSlug={collectionSlug} globalSlug={globalSlug} />\n                )}\n              </>\n            )}\n          </div>\n        </Form>\n      </OperationProvider>\n    </main>\n  )\n}\n"],"mappings":"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","ignoreList":[]}