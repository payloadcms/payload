{"version":3,"sources":["../../src/utils/getLatestPackageVersion.ts"],"sourcesContent":["/**\n * Fetches the latest version of a package from the NPM registry.\n *\n * Used in determining the latest version of Payload to use in the generated templates.\n */\nexport async function getLatestPackageVersion({\n  debug = false,\n  packageName = 'payload',\n}: {\n  debug?: boolean\n  /**\n   * Package name to fetch the latest version for based on the NPM registry URL\n   *\n   * Eg. for `'payload'`, it will fetch the version from `https://registry.npmjs.org/payload`\n   *\n   * @default 'payload'\n   */\n  packageName?: string\n}) {\n  try {\n    const response = await fetch(`https://registry.npmjs.org/${packageName}`)\n    const data = (await response.json()) as { 'dist-tags': { latest: string } }\n    const latestVersion = data['dist-tags'].latest\n\n    if (debug) {\n      console.log(`Found latest version of ${packageName}: ${latestVersion}`)\n    }\n\n    return latestVersion\n  } catch (error) {\n    console.error('Error fetching Payload version:', error)\n    throw error\n  }\n}\n"],"names":["getLatestPackageVersion","debug","packageName","response","fetch","data","json","latestVersion","latest","console","log","error"],"mappings":"AAAA;;;;CAIC,GACD,OAAO,eAAeA,wBAAwB,EAC5CC,QAAQ,KAAK,EACbC,cAAc,SAAS,EAWxB;IACC,IAAI;QACF,MAAMC,WAAW,MAAMC,MAAM,CAAC,2BAA2B,EAAEF,aAAa;QACxE,MAAMG,OAAQ,MAAMF,SAASG,IAAI;QACjC,MAAMC,gBAAgBF,IAAI,CAAC,YAAY,CAACG,MAAM;QAE9C,IAAIP,OAAO;YACTQ,QAAQC,GAAG,CAAC,CAAC,wBAAwB,EAAER,YAAY,EAAE,EAAEK,eAAe;QACxE;QAEA,OAAOA;IACT,EAAE,OAAOI,OAAO;QACdF,QAAQE,KAAK,CAAC,mCAAmCA;QACjD,MAAMA;IACR;AACF"}