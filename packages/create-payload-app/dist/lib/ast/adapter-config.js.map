{"version":3,"sources":["../../../src/lib/ast/adapter-config.ts"],"sourcesContent":["/**\n * Centralized adapter configuration\n * Shared across all AST transformation and test files\n */\n\nimport type { DatabaseAdapter, StorageAdapter } from './types.js'\n\nexport type DatabaseAdapterConfig = {\n  adapterName: string\n  configTemplate: (envVar: string) => string\n  packageName: string\n}\n\nexport type StorageAdapterConfig = {\n  adapterName: null | string\n  configTemplate: () => null | string\n  packageName: null | string\n}\n\n/**\n * Database adapter configurations\n */\nexport const DB_ADAPTER_CONFIG: Record<DatabaseAdapter, DatabaseAdapterConfig> = {\n  'd1-sqlite': {\n    adapterName: 'sqliteD1Adapter',\n    configTemplate: () => `sqliteD1Adapter({\n  binding: cloudflare.env.D1,\n})`,\n    packageName: '@payloadcms/db-d1-sqlite',\n  },\n  mongodb: {\n    adapterName: 'mongooseAdapter',\n    configTemplate: (envVar: string) => `mongooseAdapter({\n  url: process.env.${envVar} || '',\n})`,\n    packageName: '@payloadcms/db-mongodb',\n  },\n  postgres: {\n    adapterName: 'postgresAdapter',\n    configTemplate: (envVar: string) => `postgresAdapter({\n  pool: {\n    connectionString: process.env.${envVar} || '',\n  },\n})`,\n    packageName: '@payloadcms/db-postgres',\n  },\n  sqlite: {\n    adapterName: 'sqliteAdapter',\n    configTemplate: () => `sqliteAdapter({\n  client: {\n    url: process.env.DATABASE_URL || '',\n  },\n})`,\n    packageName: '@payloadcms/db-sqlite',\n  },\n  'vercel-postgres': {\n    adapterName: 'vercelPostgresAdapter',\n    configTemplate: () => `vercelPostgresAdapter({\n  pool: {\n    connectionString: process.env.POSTGRES_URL || '',\n  },\n})`,\n    packageName: '@payloadcms/db-vercel-postgres',\n  },\n} as const\n\n/**\n * Storage adapter configurations\n */\nexport const STORAGE_ADAPTER_CONFIG: Record<StorageAdapter, StorageAdapterConfig> = {\n  azureStorage: {\n    adapterName: 'azureStorage',\n    configTemplate: () => `azureStorage({\n    collections: {\n      media: true,\n    },\n    connectionString: process.env.AZURE_STORAGE_CONNECTION_STRING || '',\n    containerName: process.env.AZURE_STORAGE_CONTAINER_NAME || '',\n  })`,\n    packageName: '@payloadcms/storage-azure',\n  },\n  gcsStorage: {\n    adapterName: 'gcsStorage',\n    configTemplate: () => `gcsStorage({\n    collections: {\n      media: true,\n    },\n    bucket: process.env.GCS_BUCKET || '',\n  })`,\n    packageName: '@payloadcms/storage-gcs',\n  },\n  localDisk: {\n    adapterName: null,\n    configTemplate: () => null,\n    packageName: null,\n  },\n  r2Storage: {\n    adapterName: 'r2Storage',\n    configTemplate: () => `r2Storage({\n    bucket: cloudflare.env.R2,\n    collections: { media: true },\n  })`,\n    packageName: '@payloadcms/storage-r2',\n  },\n  s3Storage: {\n    adapterName: 's3Storage',\n    configTemplate: () => `s3Storage({\n    collections: {\n      media: true,\n    },\n    bucket: process.env.S3_BUCKET || '',\n    config: {\n      credentials: {\n        accessKeyId: process.env.S3_ACCESS_KEY_ID || '',\n        secretAccessKey: process.env.S3_SECRET_ACCESS_KEY || '',\n      },\n      region: process.env.S3_REGION || '',\n    },\n  })`,\n    packageName: '@payloadcms/storage-s3',\n  },\n  uploadthingStorage: {\n    adapterName: 'uploadthingStorage',\n    configTemplate: () => `uploadthingStorage({\n    collections: {\n      media: true,\n    },\n    token: process.env.UPLOADTHING_SECRET || '',\n  })`,\n    packageName: '@payloadcms/storage-uploadthing',\n  },\n  vercelBlobStorage: {\n    adapterName: 'vercelBlobStorage',\n    configTemplate: () => `vercelBlobStorage({\n    collections: {\n      media: true,\n    },\n    token: process.env.BLOB_READ_WRITE_TOKEN || '',\n  })`,\n    packageName: '@payloadcms/storage-vercel-blob',\n  },\n} as const\n\n/**\n * Helper to get database adapter package name\n */\nexport function getDbPackageName(adapter: DatabaseAdapter): string {\n  return DB_ADAPTER_CONFIG[adapter].packageName\n}\n\n/**\n * Helper to get database adapter name\n */\nexport function getDbAdapterName(adapter: DatabaseAdapter): string {\n  return DB_ADAPTER_CONFIG[adapter].adapterName\n}\n\n/**\n * Helper to get storage adapter package name\n */\nexport function getStoragePackageName(adapter: StorageAdapter): null | string {\n  return STORAGE_ADAPTER_CONFIG[adapter].packageName\n}\n\n/**\n * Helper to get storage adapter name\n */\nexport function getStorageAdapterName(adapter: StorageAdapter): null | string {\n  return STORAGE_ADAPTER_CONFIG[adapter].adapterName\n}\n"],"names":["DB_ADAPTER_CONFIG","adapterName","configTemplate","packageName","mongodb","envVar","postgres","sqlite","STORAGE_ADAPTER_CONFIG","azureStorage","gcsStorage","localDisk","r2Storage","s3Storage","uploadthingStorage","vercelBlobStorage","getDbPackageName","adapter","getDbAdapterName","getStoragePackageName","getStorageAdapterName"],"mappings":"AAAA;;;CAGC,GAgBD;;CAEC,GACD,OAAO,MAAMA,oBAAoE;IAC/E,aAAa;QACXC,aAAa;QACbC,gBAAgB,IAAM,CAAC;;EAEzB,CAAC;QACCC,aAAa;IACf;IACAC,SAAS;QACPH,aAAa;QACbC,gBAAgB,CAACG,SAAmB,CAAC;mBACtB,EAAEA,OAAO;EAC1B,CAAC;QACCF,aAAa;IACf;IACAG,UAAU;QACRL,aAAa;QACbC,gBAAgB,CAACG,SAAmB,CAAC;;kCAEP,EAAEA,OAAO;;EAEzC,CAAC;QACCF,aAAa;IACf;IACAI,QAAQ;QACNN,aAAa;QACbC,gBAAgB,IAAM,CAAC;;;;EAIzB,CAAC;QACCC,aAAa;IACf;IACA,mBAAmB;QACjBF,aAAa;QACbC,gBAAgB,IAAM,CAAC;;;;EAIzB,CAAC;QACCC,aAAa;IACf;AACF,EAAU;AAEV;;CAEC,GACD,OAAO,MAAMK,yBAAuE;IAClFC,cAAc;QACZR,aAAa;QACbC,gBAAgB,IAAM,CAAC;;;;;;IAMvB,CAAC;QACDC,aAAa;IACf;IACAO,YAAY;QACVT,aAAa;QACbC,gBAAgB,IAAM,CAAC;;;;;IAKvB,CAAC;QACDC,aAAa;IACf;IACAQ,WAAW;QACTV,aAAa;QACbC,gBAAgB,IAAM;QACtBC,aAAa;IACf;IACAS,WAAW;QACTX,aAAa;QACbC,gBAAgB,IAAM,CAAC;;;IAGvB,CAAC;QACDC,aAAa;IACf;IACAU,WAAW;QACTZ,aAAa;QACbC,gBAAgB,IAAM,CAAC;;;;;;;;;;;;IAYvB,CAAC;QACDC,aAAa;IACf;IACAW,oBAAoB;QAClBb,aAAa;QACbC,gBAAgB,IAAM,CAAC;;;;;IAKvB,CAAC;QACDC,aAAa;IACf;IACAY,mBAAmB;QACjBd,aAAa;QACbC,gBAAgB,IAAM,CAAC;;;;;IAKvB,CAAC;QACDC,aAAa;IACf;AACF,EAAU;AAEV;;CAEC,GACD,OAAO,SAASa,iBAAiBC,OAAwB;IACvD,OAAOjB,iBAAiB,CAACiB,QAAQ,CAACd,WAAW;AAC/C;AAEA;;CAEC,GACD,OAAO,SAASe,iBAAiBD,OAAwB;IACvD,OAAOjB,iBAAiB,CAACiB,QAAQ,CAAChB,WAAW;AAC/C;AAEA;;CAEC,GACD,OAAO,SAASkB,sBAAsBF,OAAuB;IAC3D,OAAOT,sBAAsB,CAACS,QAAQ,CAACd,WAAW;AACpD;AAEA;;CAEC,GACD,OAAO,SAASiB,sBAAsBH,OAAuB;IAC3D,OAAOT,sBAAsB,CAACS,QAAQ,CAAChB,WAAW;AACpD"}