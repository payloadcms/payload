{"version":3,"sources":["../../src/lib/configure-plugin-project.ts"],"sourcesContent":["import fse from 'fs-extra'\nimport path from 'path'\n\nimport { toCamelCase, toPascalCase } from '../utils/casing.js'\n\n/**\n * Configures a plugin project by updating all package name placeholders to projectName\n */\nexport const configurePluginProject = ({\n  projectDirPath,\n  projectName,\n}: {\n  projectDirPath: string\n  projectName: string\n}) => {\n  const devPayloadConfigPath = path.resolve(projectDirPath, './dev/payload.config.ts')\n  const devTsConfigPath = path.resolve(projectDirPath, './dev/tsconfig.json')\n  const indexTsPath = path.resolve(projectDirPath, './src/index.ts')\n  const devImportMapPath = path.resolve(projectDirPath, './dev/app/(payload)/admin/importMap.js')\n\n  const devPayloadConfig = fse.readFileSync(devPayloadConfigPath, 'utf8')\n  const devTsConfig = fse.readFileSync(devTsConfigPath, 'utf8')\n  const indexTs = fse.readFileSync(indexTsPath, 'utf-8')\n  const devImportMap = fse.readFileSync(devImportMapPath, 'utf-8')\n\n  const updatedTsConfig = devTsConfig.replaceAll('plugin-package-name-placeholder', projectName)\n  const updatedImportMap = devImportMap.replaceAll('plugin-package-name-placeholder', projectName)\n  let updatedIndexTs = indexTs.replaceAll('plugin-package-name-placeholder', projectName)\n\n  const pluginExportVariableName = toCamelCase(projectName)\n\n  updatedIndexTs = updatedIndexTs.replace(\n    'export const myPlugin',\n    `export const ${pluginExportVariableName}`,\n  )\n\n  updatedIndexTs = updatedIndexTs.replaceAll('MyPluginConfig', `${toPascalCase(projectName)}Config`)\n\n  let updatedPayloadConfig = devPayloadConfig.replace(\n    'plugin-package-name-placeholder',\n    projectName,\n  )\n\n  updatedPayloadConfig = updatedPayloadConfig.replaceAll('myPlugin', pluginExportVariableName)\n\n  fse.writeFileSync(devPayloadConfigPath, updatedPayloadConfig)\n  fse.writeFileSync(devTsConfigPath, updatedTsConfig)\n  fse.writeFileSync(indexTsPath, updatedIndexTs)\n  fse.writeFileSync(devImportMapPath, updatedImportMap)\n}\n"],"names":["fse","path","toCamelCase","toPascalCase","configurePluginProject","projectDirPath","projectName","devPayloadConfigPath","resolve","devTsConfigPath","indexTsPath","devImportMapPath","devPayloadConfig","readFileSync","devTsConfig","indexTs","devImportMap","updatedTsConfig","replaceAll","updatedImportMap","updatedIndexTs","pluginExportVariableName","replace","updatedPayloadConfig","writeFileSync"],"mappings":"AAAA,OAAOA,SAAS,WAAU;AAC1B,OAAOC,UAAU,OAAM;AAEvB,SAASC,WAAW,EAAEC,YAAY,QAAQ,qBAAoB;AAE9D;;CAEC,GACD,OAAO,MAAMC,yBAAyB,CAAC,EACrCC,cAAc,EACdC,WAAW,EAIZ;IACC,MAAMC,uBAAuBN,KAAKO,OAAO,CAACH,gBAAgB;IAC1D,MAAMI,kBAAkBR,KAAKO,OAAO,CAACH,gBAAgB;IACrD,MAAMK,cAAcT,KAAKO,OAAO,CAACH,gBAAgB;IACjD,MAAMM,mBAAmBV,KAAKO,OAAO,CAACH,gBAAgB;IAEtD,MAAMO,mBAAmBZ,IAAIa,YAAY,CAACN,sBAAsB;IAChE,MAAMO,cAAcd,IAAIa,YAAY,CAACJ,iBAAiB;IACtD,MAAMM,UAAUf,IAAIa,YAAY,CAACH,aAAa;IAC9C,MAAMM,eAAehB,IAAIa,YAAY,CAACF,kBAAkB;IAExD,MAAMM,kBAAkBH,YAAYI,UAAU,CAAC,mCAAmCZ;IAClF,MAAMa,mBAAmBH,aAAaE,UAAU,CAAC,mCAAmCZ;IACpF,IAAIc,iBAAiBL,QAAQG,UAAU,CAAC,mCAAmCZ;IAE3E,MAAMe,2BAA2BnB,YAAYI;IAE7Cc,iBAAiBA,eAAeE,OAAO,CACrC,yBACA,CAAC,aAAa,EAAED,0BAA0B;IAG5CD,iBAAiBA,eAAeF,UAAU,CAAC,kBAAkB,GAAGf,aAAaG,aAAa,MAAM,CAAC;IAEjG,IAAIiB,uBAAuBX,iBAAiBU,OAAO,CACjD,mCACAhB;IAGFiB,uBAAuBA,qBAAqBL,UAAU,CAAC,YAAYG;IAEnErB,IAAIwB,aAAa,CAACjB,sBAAsBgB;IACxCvB,IAAIwB,aAAa,CAACf,iBAAiBQ;IACnCjB,IAAIwB,aAAa,CAACd,aAAaU;IAC/BpB,IAAIwB,aAAa,CAACb,kBAAkBQ;AACtC,EAAC"}