{"version":3,"sources":["../../../src/Search/hooks/deleteFromSearch.ts"],"sourcesContent":["import type { DeleteFromSearch } from '../../types.js'\n\nexport const deleteFromSearch: DeleteFromSearch =\n  (pluginConfig) =>\n  async ({ id, collection, req: { payload }, req }) => {\n    const searchSlug = pluginConfig?.searchOverrides?.slug || 'search'\n\n    try {\n      await payload.delete({\n        collection: searchSlug,\n        depth: 0,\n        req,\n        where: {\n          'doc.relationTo': {\n            equals: collection.slug,\n          },\n          'doc.value': {\n            equals: id,\n          },\n        },\n      })\n    } catch (err: unknown) {\n      payload.logger.error({\n        err,\n        msg: `Error deleting ${searchSlug} doc.`,\n      })\n    }\n  }\n"],"names":["deleteFromSearch","pluginConfig","id","collection","req","payload","searchSlug","searchOverrides","slug","delete","depth","where","equals","err","logger","error","msg"],"mappings":"AAEA,OAAO,MAAMA,mBACX,CAACC,eACD,OAAO,EAAEC,EAAE,EAAEC,UAAU,EAAEC,KAAK,EAAEC,OAAO,EAAE,EAAED,GAAG,EAAE;QAC9C,MAAME,aAAaL,cAAcM,iBAAiBC,QAAQ;QAE1D,IAAI;YACF,MAAMH,QAAQI,MAAM,CAAC;gBACnBN,YAAYG;gBACZI,OAAO;gBACPN;gBACAO,OAAO;oBACL,kBAAkB;wBAChBC,QAAQT,WAAWK,IAAI;oBACzB;oBACA,aAAa;wBACXI,QAAQV;oBACV;gBACF;YACF;QACF,EAAE,OAAOW,KAAc;YACrBR,QAAQS,MAAM,CAACC,KAAK,CAAC;gBACnBF;gBACAG,KAAK,CAAC,eAAe,EAAEV,WAAW,KAAK,CAAC;YAC1C;QACF;IACF,EAAC"}