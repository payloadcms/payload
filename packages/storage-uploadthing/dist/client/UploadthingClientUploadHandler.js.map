{"version":3,"sources":["../../src/client/UploadthingClientUploadHandler.ts"],"sourcesContent":["'use client'\nimport { createClientUploadHandler } from '@payloadcms/plugin-cloud-storage/client'\nimport { formatAdminURL } from 'payload/shared'\nimport { genUploader } from 'uploadthing/client'\n\nexport const UploadthingClientUploadHandler = createClientUploadHandler({\n  handler: async ({ apiRoute, collectionSlug, file, serverHandlerPath, serverURL }) => {\n    const endpointRoute = formatAdminURL({\n      apiRoute,\n      path: `${serverHandlerPath}?collectionSlug=${collectionSlug}`,\n      serverURL,\n    })\n    const { uploadFiles } = genUploader({\n      package: 'storage-uploadthing',\n      url: endpointRoute,\n    })\n\n    const res = await uploadFiles('uploader', {\n      files: [file],\n    })\n\n    return { key: res[0]?.key }\n  },\n})\n"],"names":["createClientUploadHandler","formatAdminURL","genUploader","UploadthingClientUploadHandler","handler","apiRoute","collectionSlug","file","serverHandlerPath","serverURL","endpointRoute","path","uploadFiles","package","url","res","files","key"],"mappings":"AAAA;AACA,SAASA,yBAAyB,QAAQ,0CAAyC;AACnF,SAASC,cAAc,QAAQ,iBAAgB;AAC/C,SAASC,WAAW,QAAQ,qBAAoB;AAEhD,OAAO,MAAMC,iCAAiCH,0BAA0B;IACtEI,SAAS,OAAO,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,IAAI,EAAEC,iBAAiB,EAAEC,SAAS,EAAE;QAC9E,MAAMC,gBAAgBT,eAAe;YACnCI;YACAM,MAAM,GAAGH,kBAAkB,gBAAgB,EAAEF,gBAAgB;YAC7DG;QACF;QACA,MAAM,EAAEG,WAAW,EAAE,GAAGV,YAAY;YAClCW,SAAS;YACTC,KAAKJ;QACP;QAEA,MAAMK,MAAM,MAAMH,YAAY,YAAY;YACxCI,OAAO;gBAACT;aAAK;QACf;QAEA,OAAO;YAAEU,KAAKF,GAAG,CAAC,EAAE,EAAEE;QAAI;IAC5B;AACF,GAAE"}