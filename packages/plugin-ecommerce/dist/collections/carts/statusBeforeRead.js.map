{"version":3,"sources":["../../../src/collections/carts/statusBeforeRead.ts"],"sourcesContent":["import type { FieldHook } from 'payload'\n\nexport const statusBeforeRead: FieldHook = ({ data }) => {\n  if (data?.purchasedAt) {\n    return 'purchased'\n  }\n\n  if (data?.createdAt) {\n    const timeNow = new Date().getTime()\n    const createdAt = new Date(data.createdAt).getTime()\n    const differenceToCheck = 7 * 24 * 60 * 60 * 1000 // 7 days\n\n    if (timeNow - createdAt < differenceToCheck) {\n      // If the cart was created within the last 7 days, it is considered 'active'\n      return 'active'\n    }\n  }\n\n  return 'abandoned'\n}\n"],"names":["statusBeforeRead","data","purchasedAt","createdAt","timeNow","Date","getTime","differenceToCheck"],"mappings":"AAEA,OAAO,MAAMA,mBAA8B,CAAC,EAAEC,IAAI,EAAE;IAClD,IAAIA,MAAMC,aAAa;QACrB,OAAO;IACT;IAEA,IAAID,MAAME,WAAW;QACnB,MAAMC,UAAU,IAAIC,OAAOC,OAAO;QAClC,MAAMH,YAAY,IAAIE,KAAKJ,KAAKE,SAAS,EAAEG,OAAO;QAClD,MAAMC,oBAAoB,IAAI,KAAK,KAAK,KAAK,KAAK,SAAS;;QAE3D,IAAIH,UAAUD,YAAYI,mBAAmB;YAC3C,4EAA4E;YAC5E,OAAO;QACT;IACF;IAEA,OAAO;AACT,EAAC"}