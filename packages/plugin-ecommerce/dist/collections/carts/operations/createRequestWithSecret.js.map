{"version":3,"sources":["../../../../src/collections/carts/operations/createRequestWithSecret.ts"],"sourcesContent":["import type { PayloadRequest } from 'payload'\n\n/**\n * Creates a modified request object with the cart secret injected into context.\n * This allows the access control (hasCartSecretAccess) to properly verify guest cart access.\n *\n * @param req - The original PayloadRequest\n * @param secret - The cart secret to inject\n * @returns A new request object with the secret in context, or the original if no secret\n */\nexport const createRequestWithSecret = (\n  req: PayloadRequest | undefined,\n  secret: string | undefined,\n): PayloadRequest | undefined => {\n  if (!secret || !req) {\n    return req\n  }\n\n  return {\n    ...req,\n    context: {\n      ...req.context,\n      cartSecret: secret,\n    },\n  } as PayloadRequest\n}\n"],"names":["createRequestWithSecret","req","secret","context","cartSecret"],"mappings":"AAEA;;;;;;;CAOC,GACD,OAAO,MAAMA,0BAA0B,CACrCC,KACAC;IAEA,IAAI,CAACA,UAAU,CAACD,KAAK;QACnB,OAAOA;IACT;IAEA,OAAO;QACL,GAAGA,GAAG;QACNE,SAAS;YACP,GAAGF,IAAIE,OAAO;YACdC,YAAYF;QACd;IACF;AACF,EAAC"}