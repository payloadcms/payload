{"version":3,"sources":["../../src/fields/variantsFields.ts"],"sourcesContent":["import type { Field } from 'payload'\n\ntype Props = {\n  /**\n   * Slug of the variants collection, defaults to 'variants'.\n   */\n  variantsSlug?: string\n  /**\n   * Slug of the variant types collection, defaults to 'variantTypes'.\n   */\n  variantTypesSlug?: string\n}\n\nexport const variantsFields: (props: Props) => Field[] = ({\n  variantsSlug = 'variants',\n  variantTypesSlug = 'variantTypes',\n}) => {\n  const fields: Field[] = [\n    {\n      name: 'enableVariants',\n      type: 'checkbox',\n      label: ({ t }) =>\n        // @ts-expect-error - translations are not typed in plugins yet\n        t('plugin-ecommerce:enableVariants'),\n    },\n    {\n      name: 'variantTypes',\n      type: 'relationship',\n      admin: {\n        condition: ({ enableVariants }) => Boolean(enableVariants),\n      },\n      hasMany: true,\n      label: ({ t }) =>\n        // @ts-expect-error - translations are not typed in plugins yet\n        t('plugin-ecommerce:variantTypes'),\n      relationTo: variantTypesSlug,\n    },\n    {\n      name: 'variants',\n      type: 'join',\n      admin: {\n        condition: ({ enableVariants, variantTypes }) => {\n          const enabledVariants = Boolean(enableVariants)\n          const hasManyVariantTypes = Array.isArray(variantTypes) && variantTypes.length > 0\n\n          return enabledVariants && hasManyVariantTypes\n        },\n        defaultColumns: ['title', 'options', 'inventory', 'prices', '_status'],\n        disableListColumn: true,\n      },\n      collection: variantsSlug,\n      label: ({ t }) =>\n        // @ts-expect-error - translations are not typed in plugins yet\n        t('plugin-ecommerce:availableVariants'),\n      maxDepth: 2,\n      on: 'product',\n    },\n  ]\n\n  return fields\n}\n"],"names":["variantsFields","variantsSlug","variantTypesSlug","fields","name","type","label","t","admin","condition","enableVariants","Boolean","hasMany","relationTo","variantTypes","enabledVariants","hasManyVariantTypes","Array","isArray","length","defaultColumns","disableListColumn","collection","maxDepth","on"],"mappings":"AAaA,OAAO,MAAMA,iBAA4C,CAAC,EACxDC,eAAe,UAAU,EACzBC,mBAAmB,cAAc,EAClC;IACC,MAAMC,SAAkB;QACtB;YACEC,MAAM;YACNC,MAAM;YACNC,OAAO,CAAC,EAAEC,CAAC,EAAE,GACX,+DAA+D;gBAC/DA,EAAE;QACN;QACA;YACEH,MAAM;YACNC,MAAM;YACNG,OAAO;gBACLC,WAAW,CAAC,EAAEC,cAAc,EAAE,GAAKC,QAAQD;YAC7C;YACAE,SAAS;YACTN,OAAO,CAAC,EAAEC,CAAC,EAAE,GACX,+DAA+D;gBAC/DA,EAAE;YACJM,YAAYX;QACd;QACA;YACEE,MAAM;YACNC,MAAM;YACNG,OAAO;gBACLC,WAAW,CAAC,EAAEC,cAAc,EAAEI,YAAY,EAAE;oBAC1C,MAAMC,kBAAkBJ,QAAQD;oBAChC,MAAMM,sBAAsBC,MAAMC,OAAO,CAACJ,iBAAiBA,aAAaK,MAAM,GAAG;oBAEjF,OAAOJ,mBAAmBC;gBAC5B;gBACAI,gBAAgB;oBAAC;oBAAS;oBAAW;oBAAa;oBAAU;iBAAU;gBACtEC,mBAAmB;YACrB;YACAC,YAAYrB;YACZK,OAAO,CAAC,EAAEC,CAAC,EAAE,GACX,+DAA+D;gBAC/DA,EAAE;YACJgB,UAAU;YACVC,IAAI;QACN;KACD;IAED,OAAOrB;AACT,EAAC"}