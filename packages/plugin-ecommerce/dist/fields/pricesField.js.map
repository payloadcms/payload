{"version":3,"sources":["../../src/fields/pricesField.ts"],"sourcesContent":["import type { GroupField } from 'payload'\n\nimport type { CurrenciesConfig } from '../types/index.js'\n\nimport { amountField } from './amountField.js'\n\ntype Props = {\n  /**\n   * Use this to specify a path for the condition.\n   */\n  conditionalPath?: string\n  currenciesConfig: CurrenciesConfig\n}\n\nexport const pricesField: (props: Props) => GroupField[] = ({\n  conditionalPath,\n  currenciesConfig,\n}) => {\n  const currencies = currenciesConfig.supportedCurrencies\n\n  const fields: GroupField[] = currencies.map((currency) => {\n    const name = `priceIn${currency.code}`\n\n    const path = conditionalPath ? `${conditionalPath}.${name}Enabled` : `${name}Enabled`\n\n    return {\n      type: 'group',\n      admin: {\n        description: 'Prices for this product in different currencies.',\n      },\n      fields: [\n        {\n          type: 'row',\n          fields: [\n            {\n              name: `${name}Enabled`,\n              type: 'checkbox',\n              admin: {\n                style: {\n                  alignSelf: 'baseline',\n                  flex: '0 0 auto',\n                },\n              },\n              label: ({ t }) =>\n                // @ts-expect-error - translations are not typed in plugins yet\n                t('plugin-ecommerce:enableCurrencyPrice', { currency: currency.code }),\n            },\n            amountField({\n              currenciesConfig,\n              currency,\n              overrides: {\n                name,\n                admin: {\n                  condition: (_, siblingData) => Boolean(siblingData?.[path]),\n                  description: ({ t }) =>\n                    // @ts-expect-error - translations are not typed in plugins yet\n                    t('plugin-ecommerce:productPriceDescription'),\n                },\n                // @ts-expect-error - translations are not typed in plugins yet\n                label: ({ t }) => t('plugin-ecommerce:priceIn', { currency: currency.code }),\n              },\n            }),\n          ],\n        },\n      ],\n    }\n  })\n\n  return fields\n}\n"],"names":["amountField","pricesField","conditionalPath","currenciesConfig","currencies","supportedCurrencies","fields","map","currency","name","code","path","type","admin","description","style","alignSelf","flex","label","t","overrides","condition","_","siblingData","Boolean"],"mappings":"AAIA,SAASA,WAAW,QAAQ,mBAAkB;AAU9C,OAAO,MAAMC,cAA8C,CAAC,EAC1DC,eAAe,EACfC,gBAAgB,EACjB;IACC,MAAMC,aAAaD,iBAAiBE,mBAAmB;IAEvD,MAAMC,SAAuBF,WAAWG,GAAG,CAAC,CAACC;QAC3C,MAAMC,OAAO,CAAC,OAAO,EAAED,SAASE,IAAI,EAAE;QAEtC,MAAMC,OAAOT,kBAAkB,GAAGA,gBAAgB,CAAC,EAAEO,KAAK,OAAO,CAAC,GAAG,GAAGA,KAAK,OAAO,CAAC;QAErF,OAAO;YACLG,MAAM;YACNC,OAAO;gBACLC,aAAa;YACf;YACAR,QAAQ;gBACN;oBACEM,MAAM;oBACNN,QAAQ;wBACN;4BACEG,MAAM,GAAGA,KAAK,OAAO,CAAC;4BACtBG,MAAM;4BACNC,OAAO;gCACLE,OAAO;oCACLC,WAAW;oCACXC,MAAM;gCACR;4BACF;4BACAC,OAAO,CAAC,EAAEC,CAAC,EAAE,GACX,+DAA+D;gCAC/DA,EAAE,wCAAwC;oCAAEX,UAAUA,SAASE,IAAI;gCAAC;wBACxE;wBACAV,YAAY;4BACVG;4BACAK;4BACAY,WAAW;gCACTX;gCACAI,OAAO;oCACLQ,WAAW,CAACC,GAAGC,cAAgBC,QAAQD,aAAa,CAACZ,KAAK;oCAC1DG,aAAa,CAAC,EAAEK,CAAC,EAAE,GACjB,+DAA+D;wCAC/DA,EAAE;gCACN;gCACA,+DAA+D;gCAC/DD,OAAO,CAAC,EAAEC,CAAC,EAAE,GAAKA,EAAE,4BAA4B;wCAAEX,UAAUA,SAASE,IAAI;oCAAC;4BAC5E;wBACF;qBACD;gBACH;aACD;QACH;IACF;IAEA,OAAOJ;AACT,EAAC"}