{"version":3,"sources":["../../src/fields/cartItemsField.ts"],"sourcesContent":["import type { ArrayField, Field } from 'payload'\n\nimport type { CurrenciesConfig } from '../types/index.js'\n\nimport { amountField } from './amountField.js'\nimport { currencyField } from './currencyField.js'\n\ntype Props = {\n  /**\n   * Include this in order to enable support for currencies per item in the cart.\n   */\n  currenciesConfig?: CurrenciesConfig\n  enableVariants?: boolean\n  /**\n   * Enables individual prices for each item in the cart.\n   * Defaults to false.\n   */\n  individualPrices?: boolean\n  overrides?: Partial<ArrayField>\n  /**\n   * Slug of the products collection, defaults to 'products'.\n   */\n  productsSlug?: string\n  /**\n   * Slug of the variants collection, defaults to 'variants'.\n   */\n  variantsSlug?: string\n}\n\nexport const cartItemsField: (props?: Props) => ArrayField = (props) => {\n  const {\n    currenciesConfig,\n    enableVariants = false,\n    individualPrices,\n    overrides,\n    productsSlug = 'products',\n    variantsSlug = 'variants',\n  } = props || {}\n\n  const field: ArrayField = {\n    name: 'items',\n    type: 'array',\n    admin: {\n      initCollapsed: true,\n    },\n    fields: [\n      {\n        name: 'product',\n        type: 'relationship',\n        label: ({ t }) =>\n          // @ts-expect-error - translations are not typed in plugins yet\n          t('plugin-ecommerce:product'),\n        relationTo: productsSlug,\n      },\n      ...(enableVariants\n        ? [\n            {\n              name: 'variant',\n              type: 'relationship',\n              label: ({ t }) =>\n                // @ts-expect-error - translations are not typed in plugins yet\n                t('plugin-ecommerce:variant'),\n              relationTo: variantsSlug,\n            } as Field,\n          ]\n        : []),\n      {\n        name: 'quantity',\n        type: 'number',\n        defaultValue: 1,\n        label: ({ t }) =>\n          // @ts-expect-error - translations are not typed in plugins yet\n          t('plugin-ecommerce:quantity'),\n        min: 1,\n        required: true,\n      },\n      ...(currenciesConfig && individualPrices ? [amountField({ currenciesConfig })] : []),\n      ...(currenciesConfig ? [currencyField({ currenciesConfig })] : []),\n    ],\n    label: ({ t }) =>\n      // @ts-expect-error - translations are not typed in plugins yet\n      t('plugin-ecommerce:cart'),\n    ...overrides,\n  }\n\n  return field\n}\n"],"names":["amountField","currencyField","cartItemsField","props","currenciesConfig","enableVariants","individualPrices","overrides","productsSlug","variantsSlug","field","name","type","admin","initCollapsed","fields","label","t","relationTo","defaultValue","min","required"],"mappings":"AAIA,SAASA,WAAW,QAAQ,mBAAkB;AAC9C,SAASC,aAAa,QAAQ,qBAAoB;AAwBlD,OAAO,MAAMC,iBAAgD,CAACC;IAC5D,MAAM,EACJC,gBAAgB,EAChBC,iBAAiB,KAAK,EACtBC,gBAAgB,EAChBC,SAAS,EACTC,eAAe,UAAU,EACzBC,eAAe,UAAU,EAC1B,GAAGN,SAAS,CAAC;IAEd,MAAMO,QAAoB;QACxBC,MAAM;QACNC,MAAM;QACNC,OAAO;YACLC,eAAe;QACjB;QACAC,QAAQ;YACN;gBACEJ,MAAM;gBACNC,MAAM;gBACNI,OAAO,CAAC,EAAEC,CAAC,EAAE,GACX,+DAA+D;oBAC/DA,EAAE;gBACJC,YAAYV;YACd;eACIH,iBACA;gBACE;oBACEM,MAAM;oBACNC,MAAM;oBACNI,OAAO,CAAC,EAAEC,CAAC,EAAE,GACX,+DAA+D;wBAC/DA,EAAE;oBACJC,YAAYT;gBACd;aACD,GACD,EAAE;YACN;gBACEE,MAAM;gBACNC,MAAM;gBACNO,cAAc;gBACdH,OAAO,CAAC,EAAEC,CAAC,EAAE,GACX,+DAA+D;oBAC/DA,EAAE;gBACJG,KAAK;gBACLC,UAAU;YACZ;eACIjB,oBAAoBE,mBAAmB;gBAACN,YAAY;oBAAEI;gBAAiB;aAAG,GAAG,EAAE;eAC/EA,mBAAmB;gBAACH,cAAc;oBAAEG;gBAAiB;aAAG,GAAG,EAAE;SAClE;QACDY,OAAO,CAAC,EAAEC,CAAC,EAAE,GACX,+DAA+D;YAC/DA,EAAE;QACJ,GAAGV,SAAS;IACd;IAEA,OAAOG;AACT,EAAC"}