{"version":3,"sources":["../../src/fields/currencyField.ts"],"sourcesContent":["import type { SelectField } from 'payload'\n\nimport type { CurrenciesConfig } from '../types/index.js'\n\ntype Props = {\n  currenciesConfig: CurrenciesConfig\n  overrides?: Partial<SelectField>\n}\n\nexport const currencyField: (props: Props) => SelectField = ({ currenciesConfig, overrides }) => {\n  const options = currenciesConfig.supportedCurrencies.map((currency) => {\n    const label = currency.label ? `${currency.label} (${currency.code})` : currency.code\n\n    return {\n      label,\n      value: currency.code,\n    }\n  })\n\n  const defaultValue =\n    (currenciesConfig.defaultCurrency ?? currenciesConfig.supportedCurrencies.length === 1)\n      ? currenciesConfig.supportedCurrencies[0]?.code\n      : undefined\n\n  // @ts-expect-error - issue with payload types\n  const field: SelectField = {\n    name: 'currency',\n    type: 'select',\n    label: ({ t }) =>\n      // @ts-expect-error - translations are not typed in plugins yet\n      t('plugin-ecommerce:currency'),\n    ...(defaultValue && { defaultValue }),\n    options,\n    ...overrides,\n    admin: { readOnly: currenciesConfig.supportedCurrencies.length === 1, ...overrides?.admin },\n  }\n\n  return field\n}\n"],"names":["currencyField","currenciesConfig","overrides","options","supportedCurrencies","map","currency","label","code","value","defaultValue","defaultCurrency","length","undefined","field","name","type","t","admin","readOnly"],"mappings":"AASA,OAAO,MAAMA,gBAA+C,CAAC,EAAEC,gBAAgB,EAAEC,SAAS,EAAE;IAC1F,MAAMC,UAAUF,iBAAiBG,mBAAmB,CAACC,GAAG,CAAC,CAACC;QACxD,MAAMC,QAAQD,SAASC,KAAK,GAAG,GAAGD,SAASC,KAAK,CAAC,EAAE,EAAED,SAASE,IAAI,CAAC,CAAC,CAAC,GAAGF,SAASE,IAAI;QAErF,OAAO;YACLD;YACAE,OAAOH,SAASE,IAAI;QACtB;IACF;IAEA,MAAME,eACJ,AAACT,iBAAiBU,eAAe,IAAIV,iBAAiBG,mBAAmB,CAACQ,MAAM,KAAK,IACjFX,iBAAiBG,mBAAmB,CAAC,EAAE,EAAEI,OACzCK;IAEN,8CAA8C;IAC9C,MAAMC,QAAqB;QACzBC,MAAM;QACNC,MAAM;QACNT,OAAO,CAAC,EAAEU,CAAC,EAAE,GACX,+DAA+D;YAC/DA,EAAE;QACJ,GAAIP,gBAAgB;YAAEA;QAAa,CAAC;QACpCP;QACA,GAAGD,SAAS;QACZgB,OAAO;YAAEC,UAAUlB,iBAAiBG,mBAAmB,CAACQ,MAAM,KAAK;YAAG,GAAGV,WAAWgB,KAAK;QAAC;IAC5F;IAEA,OAAOJ;AACT,EAAC"}