{"version":3,"sources":["../../src/utilities/pushTypeScriptProperties.ts"],"sourcesContent":["import type { I18n } from '@payloadcms/translations'\nimport type { JSONSchema4 } from 'json-schema'\nimport type { SanitizedConfig } from 'payload'\n\nimport type { CollectionSlugMap, SanitizedEcommercePluginConfig } from '../types/index.js'\n\nexport const pushTypeScriptProperties = ({\n  collectionSlugMap,\n  jsonSchema,\n}: {\n  collectionSlugMap: CollectionSlugMap\n  config: SanitizedConfig\n  jsonSchema: JSONSchema4\n  sanitizedPluginConfig: SanitizedEcommercePluginConfig\n}): JSONSchema4 => {\n  if (!jsonSchema.properties) {\n    jsonSchema.properties = {}\n  }\n\n  if (Array.isArray(jsonSchema.required)) {\n    jsonSchema.required.push('ecommerce')\n  }\n\n  const requiredCollectionProperties: string[] = []\n  const propertiesMap = new Map<string, { $ref: string }>()\n\n  Object.entries(collectionSlugMap).forEach(([key, slug]) => {\n    propertiesMap.set(key, { $ref: `#/definitions/${slug}` })\n\n    requiredCollectionProperties.push(slug)\n  })\n\n  jsonSchema.properties.ecommerce = {\n    type: 'object',\n    additionalProperties: false,\n    description: 'Generated by the Payload Ecommerce plugin',\n    properties: {\n      collections: {\n        type: 'object',\n        additionalProperties: false,\n        properties: {\n          ...Object.fromEntries(propertiesMap),\n        },\n        required: requiredCollectionProperties,\n      },\n    },\n    required: ['collections'],\n  }\n\n  return jsonSchema\n}\n"],"names":["pushTypeScriptProperties","collectionSlugMap","jsonSchema","properties","Array","isArray","required","push","requiredCollectionProperties","propertiesMap","Map","Object","entries","forEach","key","slug","set","$ref","ecommerce","type","additionalProperties","description","collections","fromEntries"],"mappings":"AAMA,OAAO,MAAMA,2BAA2B,CAAC,EACvCC,iBAAiB,EACjBC,UAAU,EAMX;IACC,IAAI,CAACA,WAAWC,UAAU,EAAE;QAC1BD,WAAWC,UAAU,GAAG,CAAC;IAC3B;IAEA,IAAIC,MAAMC,OAAO,CAACH,WAAWI,QAAQ,GAAG;QACtCJ,WAAWI,QAAQ,CAACC,IAAI,CAAC;IAC3B;IAEA,MAAMC,+BAAyC,EAAE;IACjD,MAAMC,gBAAgB,IAAIC;IAE1BC,OAAOC,OAAO,CAACX,mBAAmBY,OAAO,CAAC,CAAC,CAACC,KAAKC,KAAK;QACpDN,cAAcO,GAAG,CAACF,KAAK;YAAEG,MAAM,CAAC,cAAc,EAAEF,MAAM;QAAC;QAEvDP,6BAA6BD,IAAI,CAACQ;IACpC;IAEAb,WAAWC,UAAU,CAACe,SAAS,GAAG;QAChCC,MAAM;QACNC,sBAAsB;QACtBC,aAAa;QACblB,YAAY;YACVmB,aAAa;gBACXH,MAAM;gBACNC,sBAAsB;gBACtBjB,YAAY;oBACV,GAAGQ,OAAOY,WAAW,CAACd,cAAc;gBACtC;gBACAH,UAAUE;YACZ;QACF;QACAF,UAAU;YAAC;SAAc;IAC3B;IAEA,OAAOJ;AACT,EAAC"}