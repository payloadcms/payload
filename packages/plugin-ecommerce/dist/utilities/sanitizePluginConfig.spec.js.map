{"version":3,"sources":["../../src/utilities/sanitizePluginConfig.spec.ts"],"sourcesContent":["import { describe, it, expect, vitest } from 'vitest'\nimport type { EcommercePluginConfig } from '../types/index.js'\n\nimport { EUR, USD } from '../currencies/index.js'\nimport { sanitizePluginConfig } from './sanitizePluginConfig'\n\ndescribe('sanitizePluginConfig', () => {\n  const mockAccessConfig = {\n    adminOnlyFieldAccess: vitest.fn(),\n    adminOrPublishedStatus: vitest.fn(),\n    customerOnlyFieldAccess: vitest.fn(),\n    isAdmin: vitest.fn(),\n    isAuthenticated: vitest.fn(),\n    isDocumentOwner: vitest.fn(),\n  }\n\n  const minimalConfig: EcommercePluginConfig = {\n    access: mockAccessConfig,\n    customers: {\n      slug: 'users',\n    },\n  }\n\n  describe('customers', () => {\n    it('should default customers slug to \"users\" when undefined', () => {\n      const config: EcommercePluginConfig = {\n        access: mockAccessConfig,\n        customers: undefined as any,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.customers).toEqual({\n        slug: 'users',\n      })\n    })\n\n    it('should preserve custom customers slug', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        customers: {\n          slug: 'custom-users',\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.customers.slug).toBe('custom-users')\n    })\n  })\n\n  describe('addresses', () => {\n    it('should create default addresses config when undefined', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.addresses).toBeDefined()\n      expect(result.addresses.addressFields).toBeDefined()\n      expect(Array.isArray(result.addresses.addressFields)).toBe(true)\n      expect(result.addresses.addressFields.length).toBeGreaterThan(0)\n    })\n\n    it('should create default addresses config when set to true', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        addresses: true,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.addresses).toBeDefined()\n      expect(result.addresses.addressFields).toBeDefined()\n      expect(Array.isArray(result.addresses.addressFields)).toBe(true)\n    })\n\n    it('should use custom addressFields function', () => {\n      const customField = {\n        name: 'customField',\n        type: 'text' as const,\n      }\n\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        addresses: {\n          addressFields: ({ defaultFields }) => [...defaultFields, customField],\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.addresses.addressFields).toBeDefined()\n      const lastField = result.addresses.addressFields[result.addresses.addressFields.length - 1]\n      expect(lastField).toEqual(customField)\n    })\n\n    it('should preserve other address config properties', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        addresses: {\n          addressFields: ({ defaultFields }) => defaultFields,\n          supportedCountries: [\n            { label: 'United States', value: 'US' },\n            { label: 'Canada', value: 'CA' },\n          ],\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.addresses.supportedCountries).toEqual([\n        { label: 'United States', value: 'US' },\n        { label: 'Canada', value: 'CA' },\n      ])\n    })\n  })\n\n  describe('currencies', () => {\n    it('should default to USD when undefined', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.currencies).toEqual({\n        defaultCurrency: 'USD',\n        supportedCurrencies: [USD],\n      })\n    })\n\n    it('should preserve custom currencies config', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        currencies: {\n          defaultCurrency: 'EUR',\n          supportedCurrencies: [USD, EUR],\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.currencies).toEqual({\n        defaultCurrency: 'EUR',\n        supportedCurrencies: [USD, EUR],\n      })\n    })\n  })\n\n  describe('inventory', () => {\n    it('should default inventory config when undefined', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.inventory).toEqual({\n        fieldName: 'inventory',\n      })\n    })\n\n    it('should default inventory config when set to true', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        inventory: true,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.inventory).toEqual({\n        fieldName: 'inventory',\n      })\n    })\n\n    it('should preserve custom inventory config', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        inventory: {\n          fieldName: 'stock',\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.inventory).toEqual({\n        fieldName: 'stock',\n      })\n    })\n\n    it('should allow disabling inventory with false', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        inventory: false,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.inventory).toBe(false)\n    })\n  })\n\n  describe('carts', () => {\n    it('should default carts to object with allowGuestCarts true when undefined', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.carts).toEqual({\n        allowGuestCarts: true,\n      })\n    })\n\n    it('should convert carts true to object with allowGuestCarts true', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        carts: true,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.carts).toEqual({\n        allowGuestCarts: true,\n      })\n    })\n\n    it('should preserve carts false', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        carts: false,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.carts).toBe(false)\n    })\n\n    it('should default allowGuestCarts to true when carts is object without it', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        carts: {} as any,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.carts).toEqual({\n        allowGuestCarts: true,\n      })\n    })\n\n    it('should preserve explicit allowGuestCarts false', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        carts: {\n          allowGuestCarts: false,\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.carts).toEqual({\n        allowGuestCarts: false,\n      })\n    })\n\n    it('should preserve other carts config properties', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        carts: {\n          allowGuestCarts: false,\n          cartsCollectionOverride: vitest.fn() as any,\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.carts).toHaveProperty('allowGuestCarts', false)\n      expect(result.carts).toHaveProperty('cartsCollectionOverride')\n    })\n  })\n\n  describe('orders', () => {\n    it('should default orders to true when undefined', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.orders).toBe(true)\n    })\n\n    it('should preserve orders config', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        orders: false,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.orders).toBe(false)\n    })\n  })\n\n  describe('transactions', () => {\n    it('should default transactions to true when undefined', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.transactions).toBe(true)\n    })\n\n    it('should preserve transactions config', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        transactions: false,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.transactions).toBe(false)\n    })\n  })\n\n  describe('payments', () => {\n    it('should default payments to empty array when undefined', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.payments).toEqual({\n        paymentMethods: [],\n      })\n    })\n\n    it('should default paymentMethods to empty array when not provided', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        payments: {} as any,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.payments.paymentMethods).toEqual([])\n    })\n\n    it('should preserve payment methods', () => {\n      const mockAdapter = {\n        name: 'stripe',\n        label: 'Stripe',\n      } as any\n\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        payments: {\n          paymentMethods: [mockAdapter],\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.payments.paymentMethods).toEqual([mockAdapter])\n    })\n  })\n\n  describe('products', () => {\n    it('should default variants to true when products is object and variants is undefined', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        products: {},\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.products).toEqual({\n        variants: true,\n      })\n    })\n\n    it('should preserve variants config when provided', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        products: {\n          variants: false,\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.products).toEqual({\n        variants: false,\n      })\n    })\n\n    it('should not modify products when set to true', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        products: true,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.products).toBe(true)\n    })\n\n    it('should not modify products when set to false', () => {\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        products: false,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.products).toBe(false)\n    })\n  })\n\n  describe('access', () => {\n    it('should provide default isAuthenticated function', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.access.isAuthenticated).toBeDefined()\n      expect(typeof result.access.isAuthenticated).toBe('function')\n    })\n\n    it('should provide default publicAccess function', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.access.publicAccess).toBeDefined()\n      expect(typeof result.access.publicAccess).toBe('function')\n    })\n\n    it('should allow user-provided access functions to override defaults', () => {\n      const customIsAuthenticated = vitest.fn()\n      const customPublicAccess = vitest.fn()\n\n      const config: EcommercePluginConfig = {\n        ...minimalConfig,\n        access: {\n          ...mockAccessConfig,\n          isAuthenticated: customIsAuthenticated,\n          publicAccess: customPublicAccess,\n        },\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: config })\n\n      expect(result.access.isAuthenticated).toBe(customIsAuthenticated)\n      expect(result.access.publicAccess).toBe(customPublicAccess)\n    })\n\n    it('should preserve all user-provided access functions', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.access.adminOnlyFieldAccess).toBe(mockAccessConfig.adminOnlyFieldAccess)\n      expect(result.access.adminOrPublishedStatus).toBe(mockAccessConfig.adminOrPublishedStatus)\n      expect(result.access.customerOnlyFieldAccess).toBe(mockAccessConfig.customerOnlyFieldAccess)\n      expect(result.access.isAdmin).toBe(mockAccessConfig.isAdmin)\n      expect(result.access.isDocumentOwner).toBe(mockAccessConfig.isDocumentOwner)\n    })\n\n    it('default publicAccess should always return true', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      // @ts-expect-error - ignoring for test\n      expect(result.access.publicAccess()).toBe(true)\n    })\n\n    it('default isAuthenticated should be provided', () => {\n      const result = sanitizePluginConfig({ pluginConfig: minimalConfig })\n\n      expect(result.access.isAuthenticated).toBeDefined()\n      expect(typeof result.access.isAuthenticated).toBe('function')\n    })\n  })\n\n  describe('complete config', () => {\n    it('should handle a fully configured plugin', () => {\n      const fullConfig: EcommercePluginConfig = {\n        access: mockAccessConfig,\n        addresses: {\n          addressFields: ({ defaultFields }) => defaultFields,\n          supportedCountries: [{ label: 'US', value: 'US' }],\n        },\n        carts: {\n          allowGuestCarts: true,\n        },\n        currencies: {\n          defaultCurrency: 'EUR',\n          supportedCurrencies: [USD, EUR],\n        },\n        customers: {\n          slug: 'customers',\n        },\n        inventory: {\n          fieldName: 'stock',\n        },\n        orders: true,\n        payments: {\n          paymentMethods: [],\n        },\n        products: {\n          variants: true,\n        },\n        slugMap: {\n          products: 'items',\n        },\n        transactions: true,\n      }\n\n      const result = sanitizePluginConfig({ pluginConfig: fullConfig })\n\n      expect(result.customers.slug).toBe('customers')\n      expect(result.currencies.defaultCurrency).toBe('EUR')\n      expect(result.inventory).toEqual({ fieldName: 'stock' })\n      expect(result.carts).toHaveProperty('allowGuestCarts', true)\n      expect(result.orders).toBe(true)\n      expect(result.transactions).toBe(true)\n      expect(result.products).toEqual({ variants: true })\n      expect(result.slugMap).toEqual({ products: 'items' })\n    })\n  })\n})\n"],"names":["describe","it","expect","vitest","EUR","USD","sanitizePluginConfig","mockAccessConfig","adminOnlyFieldAccess","fn","adminOrPublishedStatus","customerOnlyFieldAccess","isAdmin","isAuthenticated","isDocumentOwner","minimalConfig","access","customers","slug","config","undefined","result","pluginConfig","toEqual","toBe","addresses","toBeDefined","addressFields","Array","isArray","length","toBeGreaterThan","customField","name","type","defaultFields","lastField","supportedCountries","label","value","currencies","defaultCurrency","supportedCurrencies","inventory","fieldName","carts","allowGuestCarts","cartsCollectionOverride","toHaveProperty","orders","transactions","payments","paymentMethods","mockAdapter","products","variants","publicAccess","customIsAuthenticated","customPublicAccess","fullConfig","slugMap"],"mappings":"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"}