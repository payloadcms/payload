{"version":3,"sources":["../../src/utilities/getvalueAtPath.ts"],"sourcesContent":["/**\n * Safely retrieves a deeply nested value from an object using a dot-notation path.\n *\n * Supports:\n * - Indexed array access (e.g., \"array.0.field1\")\n * - Polymorphic blocks or keyed unions (e.g., \"blocks.0.hero.title\"), where the block key\n *   (e.g., \"hero\") maps to a nested object inside the block item.\n *\n *\n * @param obj - The input object to traverse.\n * @param path - A dot-separated string representing the path to retrieve.\n * @returns The value at the specified path, or undefined if not found.\n */\nexport const getValueAtPath = (obj: unknown, path: string): unknown => {\n  if (!obj || typeof obj !== 'object') {\n    return undefined\n  }\n\n  const parts = path.split('.')\n  let current: any = obj\n\n  for (const part of parts) {\n    if (current == null) {\n      return undefined\n    }\n\n    // If the path part is a number, treat it as an array index\n    if (!isNaN(Number(part))) {\n      current = current[Number(part)]\n      continue\n    }\n\n    // Special case: if current is an array of blocks like [{ hero: { title: '...' } }]\n    // and the path is \"blocks.0.hero.title\", then `part` would be \"hero\"\n    if (Array.isArray(current)) {\n      const idx = Number(parts[parts.indexOf(part) - 1])\n      const blockItem = current[idx]\n\n      if (typeof blockItem === 'object') {\n        const keys = Object.keys(blockItem)\n\n        // Find the key (e.g., \"hero\") that maps to an object\n        const matchingBlock = keys.find(\n          (key) => blockItem[key] && typeof blockItem[key] === 'object',\n        )\n\n        if (matchingBlock && part === matchingBlock) {\n          current = blockItem[matchingBlock]\n          continue\n        }\n      }\n    }\n\n    // Fallback to plain object key access\n    current = current[part]\n  }\n\n  return current\n}\n"],"names":["getValueAtPath","obj","path","undefined","parts","split","current","part","isNaN","Number","Array","isArray","idx","indexOf","blockItem","keys","Object","matchingBlock","find","key"],"mappings":"AAAA;;;;;;;;;;;;CAYC,GACD,OAAO,MAAMA,iBAAiB,CAACC,KAAcC;IAC3C,IAAI,CAACD,OAAO,OAAOA,QAAQ,UAAU;QACnC,OAAOE;IACT;IAEA,MAAMC,QAAQF,KAAKG,KAAK,CAAC;IACzB,IAAIC,UAAeL;IAEnB,KAAK,MAAMM,QAAQH,MAAO;QACxB,IAAIE,WAAW,MAAM;YACnB,OAAOH;QACT;QAEA,2DAA2D;QAC3D,IAAI,CAACK,MAAMC,OAAOF,QAAQ;YACxBD,UAAUA,OAAO,CAACG,OAAOF,MAAM;YAC/B;QACF;QAEA,mFAAmF;QACnF,qEAAqE;QACrE,IAAIG,MAAMC,OAAO,CAACL,UAAU;YAC1B,MAAMM,MAAMH,OAAOL,KAAK,CAACA,MAAMS,OAAO,CAACN,QAAQ,EAAE;YACjD,MAAMO,YAAYR,OAAO,CAACM,IAAI;YAE9B,IAAI,OAAOE,cAAc,UAAU;gBACjC,MAAMC,OAAOC,OAAOD,IAAI,CAACD;gBAEzB,qDAAqD;gBACrD,MAAMG,gBAAgBF,KAAKG,IAAI,CAC7B,CAACC,MAAQL,SAAS,CAACK,IAAI,IAAI,OAAOL,SAAS,CAACK,IAAI,KAAK;gBAGvD,IAAIF,iBAAiBV,SAASU,eAAe;oBAC3CX,UAAUQ,SAAS,CAACG,cAAc;oBAClC;gBACF;YACF;QACF;QAEA,sCAAsC;QACtCX,UAAUA,OAAO,CAACC,KAAK;IACzB;IAEA,OAAOD;AACT,EAAC"}