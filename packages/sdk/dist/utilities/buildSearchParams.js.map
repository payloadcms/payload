{"version":3,"sources":["../../src/utilities/buildSearchParams.ts"],"sourcesContent":["import type { Sort, Where } from 'payload'\n\nimport { stringify } from 'qs-esm'\n\nexport type OperationArgs = {\n  depth?: number\n  draft?: boolean\n  fallbackLocale?: unknown\n  joins?: false | Record<string, unknown>\n  limit?: number\n  locale?: unknown\n  page?: number\n  pagination?: boolean\n  populate?: Record<string, unknown>\n  select?: unknown\n  sort?: Sort\n  where?: Where\n}\n\nexport const buildSearchParams = (args: OperationArgs): string => {\n  const search: Record<string, unknown> = {}\n\n  if (typeof args.depth === 'number') {\n    search.depth = String(args.depth)\n  }\n\n  if (typeof args.page === 'number') {\n    search.page = String(args.page)\n  }\n\n  if (typeof args.limit === 'number') {\n    search.limit = String(args.limit)\n  }\n\n  if (typeof args.draft === 'boolean') {\n    search.draft = String(args.draft)\n  }\n\n  if (typeof args.pagination === 'boolean') {\n    search.pagination = String(args.pagination)\n  }\n\n  if (args.fallbackLocale) {\n    search['fallback-locale'] = String(args.fallbackLocale)\n  }\n\n  if (args.locale) {\n    search.locale = args.locale\n  }\n\n  if (args.sort) {\n    const sanitizedSort = Array.isArray(args.sort) ? args.sort.join(',') : args.sort\n    search.sort = sanitizedSort\n  }\n\n  if (args.select) {\n    search.select = args.select\n  }\n\n  if (args.where) {\n    search.where = args.where\n  }\n\n  if (args.populate) {\n    search.populate = args.populate\n  }\n\n  if (args.joins) {\n    search.joins = args.joins\n  }\n\n  if (Object.keys(search).length > 0) {\n    return stringify(search, { addQueryPrefix: true })\n  }\n\n  return ''\n}\n"],"names":["stringify","buildSearchParams","args","search","depth","String","page","limit","draft","pagination","fallbackLocale","locale","sort","sanitizedSort","Array","isArray","join","select","where","populate","joins","Object","keys","length","addQueryPrefix"],"mappings":"AAEA,SAASA,SAAS,QAAQ,SAAQ;AAiBlC,OAAO,MAAMC,oBAAoB,CAACC;IAChC,MAAMC,SAAkC,CAAC;IAEzC,IAAI,OAAOD,KAAKE,KAAK,KAAK,UAAU;QAClCD,OAAOC,KAAK,GAAGC,OAAOH,KAAKE,KAAK;IAClC;IAEA,IAAI,OAAOF,KAAKI,IAAI,KAAK,UAAU;QACjCH,OAAOG,IAAI,GAAGD,OAAOH,KAAKI,IAAI;IAChC;IAEA,IAAI,OAAOJ,KAAKK,KAAK,KAAK,UAAU;QAClCJ,OAAOI,KAAK,GAAGF,OAAOH,KAAKK,KAAK;IAClC;IAEA,IAAI,OAAOL,KAAKM,KAAK,KAAK,WAAW;QACnCL,OAAOK,KAAK,GAAGH,OAAOH,KAAKM,KAAK;IAClC;IAEA,IAAI,OAAON,KAAKO,UAAU,KAAK,WAAW;QACxCN,OAAOM,UAAU,GAAGJ,OAAOH,KAAKO,UAAU;IAC5C;IAEA,IAAIP,KAAKQ,cAAc,EAAE;QACvBP,MAAM,CAAC,kBAAkB,GAAGE,OAAOH,KAAKQ,cAAc;IACxD;IAEA,IAAIR,KAAKS,MAAM,EAAE;QACfR,OAAOQ,MAAM,GAAGT,KAAKS,MAAM;IAC7B;IAEA,IAAIT,KAAKU,IAAI,EAAE;QACb,MAAMC,gBAAgBC,MAAMC,OAAO,CAACb,KAAKU,IAAI,IAAIV,KAAKU,IAAI,CAACI,IAAI,CAAC,OAAOd,KAAKU,IAAI;QAChFT,OAAOS,IAAI,GAAGC;IAChB;IAEA,IAAIX,KAAKe,MAAM,EAAE;QACfd,OAAOc,MAAM,GAAGf,KAAKe,MAAM;IAC7B;IAEA,IAAIf,KAAKgB,KAAK,EAAE;QACdf,OAAOe,KAAK,GAAGhB,KAAKgB,KAAK;IAC3B;IAEA,IAAIhB,KAAKiB,QAAQ,EAAE;QACjBhB,OAAOgB,QAAQ,GAAGjB,KAAKiB,QAAQ;IACjC;IAEA,IAAIjB,KAAKkB,KAAK,EAAE;QACdjB,OAAOiB,KAAK,GAAGlB,KAAKkB,KAAK;IAC3B;IAEA,IAAIC,OAAOC,IAAI,CAACnB,QAAQoB,MAAM,GAAG,GAAG;QAClC,OAAOvB,UAAUG,QAAQ;YAAEqB,gBAAgB;QAAK;IAClD;IAEA,OAAO;AACT,EAAC"}