{"version":3,"sources":["../../src/globals/update.ts"],"sourcesContent":["import type { GlobalSlug, PayloadTypesShape, SelectType, TypedLocale } from 'payload'\nimport type { DeepPartial } from 'ts-essentials'\n\nimport type { PayloadSDK } from '../index.js'\nimport type {\n  DataFromGlobalSlug,\n  PopulateType,\n  SelectFromGlobalSlug,\n  TransformGlobalWithSelect,\n} from '../types.js'\n\nexport type UpdateGlobalOptions<\n  T extends PayloadTypesShape,\n  TSlug extends GlobalSlug<T>,\n  TSelect extends SelectType,\n> = {\n  /**\n   * The global data to update.\n   */\n  data: DeepPartial<Omit<DataFromGlobalSlug<T, TSlug>, 'id'>>\n  /**\n   * [Control auto-population](https://payloadcms.com/docs/queries/depth) of nested relationship and upload fields.\n   */\n  depth?: number\n  /**\n   * Update documents to a draft.\n   */\n  draft?: boolean\n  /**\n   * Specify a [fallback locale](https://payloadcms.com/docs/configuration/localization) to use for any returned documents.\n   */\n  fallbackLocale?: false | TypedLocale<T>\n  /**\n   * Specify [locale](https://payloadcms.com/docs/configuration/localization) for any returned documents.\n   */\n  locale?: 'all' | TypedLocale<T>\n  /**\n   * Specify [populate](https://payloadcms.com/docs/queries/select#populate) to control which fields to include to the result from populated documents.\n   */\n  populate?: PopulateType<T>\n  /**\n   * Publish the document / documents with a specific locale.\n   */\n  publishSpecificLocale?: TypedLocale<T>\n  /**\n   * Specify [select](https://payloadcms.com/docs/queries/select) to control which fields to include to the result.\n   */\n  select?: TSelect\n  /**\n   * the Global slug to operate against.\n   */\n  slug: TSlug\n}\n\nexport async function updateGlobal<\n  T extends PayloadTypesShape,\n  TSlug extends GlobalSlug<T>,\n  TSelect extends SelectFromGlobalSlug<T, TSlug>,\n>(\n  sdk: PayloadSDK<T>,\n  options: UpdateGlobalOptions<T, TSlug, TSelect>,\n  init?: RequestInit,\n): Promise<TransformGlobalWithSelect<T, TSlug, TSelect>> {\n  const response = await sdk.request({\n    args: options,\n    init,\n    json: options.data,\n    method: 'POST',\n    path: `/globals/${options.slug}`,\n  })\n\n  const { result } = await response.json()\n\n  return result\n}\n"],"names":["updateGlobal","sdk","options","init","response","request","args","json","data","method","path","slug","result"],"mappings":"AAsDA,OAAO,eAAeA,aAKpBC,GAAkB,EAClBC,OAA+C,EAC/CC,IAAkB;IAElB,MAAMC,WAAW,MAAMH,IAAII,OAAO,CAAC;QACjCC,MAAMJ;QACNC;QACAI,MAAML,QAAQM,IAAI;QAClBC,QAAQ;QACRC,MAAM,CAAC,SAAS,EAAER,QAAQS,IAAI,EAAE;IAClC;IAEA,MAAM,EAAEC,MAAM,EAAE,GAAG,MAAMR,SAASG,IAAI;IAEtC,OAAOK;AACT"}