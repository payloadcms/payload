{"version":3,"sources":["../../src/collections/create.ts"],"sourcesContent":["import type {\n  CollectionSlug,\n  PayloadTypesShape,\n  SelectType,\n  TypedLocale,\n  UploadCollectionSlug,\n} from 'payload'\n\nimport type { PayloadSDK } from '../index.js'\nimport type {\n  PopulateType,\n  RequiredDataFromCollectionSlug,\n  TransformCollectionWithSelect,\n} from '../types.js'\n\nimport { resolveFileFromOptions } from '../utilities/resolveFileFromOptions.js'\n\nexport type CreateOptions<\n  T extends PayloadTypesShape,\n  TSlug extends CollectionSlug<T>,\n  TSelect extends SelectType,\n> = {\n  /**\n   * the Collection slug to operate against.\n   */\n  collection: TSlug\n  /**\n   * The data for the document to create.\n   */\n  data: RequiredDataFromCollectionSlug<T, TSlug>\n  /**\n   * [Control auto-population](https://payloadcms.com/docs/queries/depth) of nested relationship and upload fields.\n   */\n  depth?: number\n  /**\n   * Create a **draft** document. [More](https://payloadcms.com/docs/versions/drafts#draft-api)\n   */\n  draft?: boolean\n  /**\n   * Specify a [fallback locale](https://payloadcms.com/docs/configuration/localization) to use for any returned documents.\n   */\n  fallbackLocale?: false | TypedLocale<T>\n  /** File Blob object or URL to the file. Only for upload collections */\n  file?: TSlug extends UploadCollectionSlug<T> ? Blob | string : never\n  /**\n   * Specify [locale](https://payloadcms.com/docs/configuration/localization) for any returned documents.\n   */\n  locale?: 'all' | TypedLocale<T>\n  /**\n   * Specify [populate](https://payloadcms.com/docs/queries/select#populate) to control which fields to include to the result from populated documents.\n   */\n  populate?: PopulateType<T>\n  /**\n   * Specify [select](https://payloadcms.com/docs/queries/select) to control which fields to include to the result.\n   */\n  select?: TSelect\n}\n\nexport async function create<\n  T extends PayloadTypesShape,\n  TSlug extends CollectionSlug<T>,\n  TSelect extends SelectType,\n>(\n  sdk: PayloadSDK<T>,\n  options: CreateOptions<T, TSlug, TSelect>,\n  init?: RequestInit,\n): Promise<TransformCollectionWithSelect<T, TSlug, TSelect>> {\n  let file: Blob | undefined = undefined\n\n  if (options.file) {\n    file = await resolveFileFromOptions(options.file)\n  }\n\n  const response = await sdk.request({\n    args: options,\n    file,\n    init,\n    json: options.data,\n    method: 'POST',\n    path: `/${options.collection}`,\n  })\n\n  const json = await response.json()\n\n  return json.doc\n}\n"],"names":["resolveFileFromOptions","create","sdk","options","init","file","undefined","response","request","args","json","data","method","path","collection","doc"],"mappings":"AAeA,SAASA,sBAAsB,QAAQ,yCAAwC;AA2C/E,OAAO,eAAeC,OAKpBC,GAAkB,EAClBC,OAAyC,EACzCC,IAAkB;IAElB,IAAIC,OAAyBC;IAE7B,IAAIH,QAAQE,IAAI,EAAE;QAChBA,OAAO,MAAML,uBAAuBG,QAAQE,IAAI;IAClD;IAEA,MAAME,WAAW,MAAML,IAAIM,OAAO,CAAC;QACjCC,MAAMN;QACNE;QACAD;QACAM,MAAMP,QAAQQ,IAAI;QAClBC,QAAQ;QACRC,MAAM,CAAC,CAAC,EAAEV,QAAQW,UAAU,EAAE;IAChC;IAEA,MAAMJ,OAAO,MAAMH,SAASG,IAAI;IAEhC,OAAOA,KAAKK,GAAG;AACjB"}