{"version":3,"sources":["../../src/collections/delete.ts"],"sourcesContent":["import type { CollectionSlug, PayloadTypesShape, SelectType, TypedLocale, Where } from 'payload'\n\nimport type { PayloadSDK } from '../index.js'\nimport type {\n  BulkOperationResult,\n  PopulateType,\n  SelectFromCollectionSlug,\n  TransformCollectionWithSelect,\n} from '../types.js'\n\nexport type DeleteBaseOptions<\n  T extends PayloadTypesShape,\n  TSlug extends CollectionSlug<T>,\n  TSelect extends SelectType,\n> = {\n  /**\n   * the Collection slug to operate against.\n   */\n  collection: TSlug\n  /**\n   * [Control auto-population](https://payloadcms.com/docs/queries/depth) of nested relationship and upload fields.\n   */\n  depth?: number\n  draft?: boolean\n  /**\n   * Specify a [fallback locale](https://payloadcms.com/docs/configuration/localization) to use for any returned documents.\n   */\n  fallbackLocale?: false | TypedLocale<T>\n  /**\n   * Specify [locale](https://payloadcms.com/docs/configuration/localization) for any returned documents.\n   */\n  locale?: TypedLocale<T>\n  /**\n   * Specify [populate](https://payloadcms.com/docs/queries/select#populate) to control which fields to include to the result from populated documents.\n   */\n  populate?: PopulateType<T>\n  /**\n   * Specify [select](https://payloadcms.com/docs/queries/select) to control which fields to include to the result.\n   */\n  select?: TSelect\n}\n\nexport type DeleteByIDOptions<\n  T extends PayloadTypesShape,\n  TSlug extends CollectionSlug<T>,\n  TSelect extends SelectFromCollectionSlug<T, TSlug>,\n> = {\n  /**\n   * The ID of the document to delete.\n   */\n  id: number | string\n\n  where?: never\n} & DeleteBaseOptions<T, TSlug, TSelect>\n\nexport type DeleteManyOptions<\n  T extends PayloadTypesShape,\n  TSlug extends CollectionSlug<T>,\n  TSelect extends SelectFromCollectionSlug<T, TSlug>,\n> = {\n  id?: never\n  /**\n   * A filter [query](https://payloadcms.com/docs/queries/overview)\n   */\n  where: Where\n} & DeleteBaseOptions<T, TSlug, TSelect>\n\nexport type DeleteOptions<\n  T extends PayloadTypesShape,\n  TSlug extends CollectionSlug<T>,\n  TSelect extends SelectFromCollectionSlug<T, TSlug>,\n> = DeleteByIDOptions<T, TSlug, TSelect> | DeleteManyOptions<T, TSlug, TSelect>\n\nexport async function deleteOperation<\n  T extends PayloadTypesShape,\n  TSlug extends CollectionSlug<T>,\n  TSelect extends SelectFromCollectionSlug<T, TSlug>,\n>(\n  sdk: PayloadSDK<T>,\n  options: DeleteOptions<T, TSlug, TSelect>,\n  init?: RequestInit,\n): Promise<\n  BulkOperationResult<T, TSlug, TSelect> | TransformCollectionWithSelect<T, TSlug, TSelect>\n> {\n  const response = await sdk.request({\n    args: options,\n    init,\n    method: 'DELETE',\n    path: `/${options.collection}${options.id ? `/${options.id}` : ''}`,\n  })\n\n  const json = await response.json()\n\n  if (options.id) {\n    return json.doc\n  }\n\n  return json\n}\n"],"names":["deleteOperation","sdk","options","init","response","request","args","method","path","collection","id","json","doc"],"mappings":"AAyEA,OAAO,eAAeA,gBAKpBC,GAAkB,EAClBC,OAAyC,EACzCC,IAAkB;IAIlB,MAAMC,WAAW,MAAMH,IAAII,OAAO,CAAC;QACjCC,MAAMJ;QACNC;QACAI,QAAQ;QACRC,MAAM,CAAC,CAAC,EAAEN,QAAQO,UAAU,GAAGP,QAAQQ,EAAE,GAAG,CAAC,CAAC,EAAER,QAAQQ,EAAE,EAAE,GAAG,IAAI;IACrE;IAEA,MAAMC,OAAO,MAAMP,SAASO,IAAI;IAEhC,IAAIT,QAAQQ,EAAE,EAAE;QACd,OAAOC,KAAKC,GAAG;IACjB;IAEA,OAAOD;AACT"}