{"version":3,"sources":["../../src/ui/LengthIndicator.tsx"],"sourcesContent":["'use client'\n\nimport { useTranslation } from '@payloadcms/ui'\nimport React, { Fragment, useEffect, useState } from 'react'\n\nimport type { PluginSEOTranslationKeys, PluginSEOTranslations } from '../translations/index.js'\n\nimport { Pill } from './Pill.js'\n\nexport const LengthIndicator: React.FC<{\n  maxLength?: number\n  minLength?: number\n  text?: string\n}> = (props) => {\n  const { maxLength = 0, minLength = 0, text } = props\n\n  const [labelStyle, setLabelStyle] = useState({\n    backgroundColor: '',\n    color: '',\n  })\n\n  const [label, setLabel] = useState('')\n  const [barWidth, setBarWidth] = useState<number>(0)\n  const { t } = useTranslation<PluginSEOTranslations, PluginSEOTranslationKeys>()\n\n  useEffect(() => {\n    const textLength = text?.length || 0\n\n    if (textLength === 0) {\n      setLabel(t('plugin-seo:missing'))\n      setLabelStyle({\n        backgroundColor: 'red',\n        color: 'white',\n      })\n      setBarWidth(0)\n    } else {\n      const progress = (textLength - minLength) / (maxLength - minLength)\n\n      if (progress < 0) {\n        const ratioUntilMin = textLength / minLength\n\n        if (ratioUntilMin > 0.9) {\n          setLabel(t('plugin-seo:almostThere'))\n          setLabelStyle({\n            backgroundColor: 'orange',\n            color: 'white',\n          })\n        } else {\n          setLabel(t('plugin-seo:tooShort'))\n          setLabelStyle({\n            backgroundColor: 'orangered',\n            color: 'white',\n          })\n        }\n\n        setBarWidth(ratioUntilMin)\n      }\n\n      if (progress >= 0 && progress <= 1) {\n        setLabel(t('plugin-seo:good'))\n        setLabelStyle({\n          backgroundColor: 'green',\n          color: 'white',\n        })\n        setBarWidth(progress)\n      }\n\n      if (progress > 1) {\n        setLabel(t('plugin-seo:tooLong'))\n        setLabelStyle({\n          backgroundColor: 'red',\n          color: 'white',\n        })\n        setBarWidth(1)\n      }\n    }\n  }, [minLength, maxLength, text, t])\n\n  const textLength = text?.length || 0\n\n  const charsUntilMax = maxLength - textLength\n  const charsUntilMin = minLength - textLength\n\n  return (\n    <div\n      style={{\n        alignItems: 'center',\n        display: 'flex',\n        width: '100%',\n      }}\n    >\n      <Pill backgroundColor={labelStyle.backgroundColor} color={labelStyle.color} label={label} />\n      <div\n        style={{\n          flexShrink: 0,\n          lineHeight: 1,\n          marginRight: '10px',\n          whiteSpace: 'nowrap',\n        }}\n      >\n        <small>\n          {t('plugin-seo:characterCount', { current: text?.length || 0, maxLength, minLength })}\n          {(textLength === 0 || charsUntilMin > 0) && (\n            <Fragment>{t('plugin-seo:charactersToGo', { characters: charsUntilMin })}</Fragment>\n          )}\n          {charsUntilMin <= 0 && charsUntilMax >= 0 && (\n            <Fragment>{t('plugin-seo:charactersLeftOver', { characters: charsUntilMax })}</Fragment>\n          )}\n          {charsUntilMax < 0 && (\n            <Fragment>\n              {t('plugin-seo:charactersTooMany', { characters: charsUntilMax * -1 })}\n            </Fragment>\n          )}\n        </small>\n      </div>\n      <div\n        style={{\n          backgroundColor: '#F3F3F3',\n          height: '2px',\n          position: 'relative',\n          width: '100%',\n        }}\n      >\n        <div\n          style={{\n            backgroundColor: labelStyle.backgroundColor,\n            height: '100%',\n            left: 0,\n            position: 'absolute',\n            top: 0,\n            width: `${barWidth * 100}%`,\n          }}\n        />\n      </div>\n    </div>\n  )\n}\n"],"names":["useTranslation","React","Fragment","useEffect","useState","Pill","LengthIndicator","props","maxLength","minLength","text","labelStyle","setLabelStyle","backgroundColor","color","label","setLabel","barWidth","setBarWidth","t","textLength","length","progress","ratioUntilMin","charsUntilMax","charsUntilMin","div","style","alignItems","display","width","flexShrink","lineHeight","marginRight","whiteSpace","small","current","characters","height","position","left","top"],"mappings":"AAAA;;AAEA,SAASA,cAAc,QAAQ,iBAAgB;AAC/C,OAAOC,SAASC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAI5D,SAASC,IAAI,QAAQ,YAAW;AAEhC,OAAO,MAAMC,kBAIR,CAACC;IACJ,MAAM,EAAEC,YAAY,CAAC,EAAEC,YAAY,CAAC,EAAEC,IAAI,EAAE,GAAGH;IAE/C,MAAM,CAACI,YAAYC,cAAc,GAAGR,SAAS;QAC3CS,iBAAiB;QACjBC,OAAO;IACT;IAEA,MAAM,CAACC,OAAOC,SAAS,GAAGZ,SAAS;IACnC,MAAM,CAACa,UAAUC,YAAY,GAAGd,SAAiB;IACjD,MAAM,EAAEe,CAAC,EAAE,GAAGnB;IAEdG,UAAU;QACR,MAAMiB,aAAaV,MAAMW,UAAU;QAEnC,IAAID,eAAe,GAAG;YACpBJ,SAASG,EAAE;YACXP,cAAc;gBACZC,iBAAiB;gBACjBC,OAAO;YACT;YACAI,YAAY;QACd,OAAO;YACL,MAAMI,WAAW,AAACF,CAAAA,aAAaX,SAAQ,IAAMD,CAAAA,YAAYC,SAAQ;YAEjE,IAAIa,WAAW,GAAG;gBAChB,MAAMC,gBAAgBH,aAAaX;gBAEnC,IAAIc,gBAAgB,KAAK;oBACvBP,SAASG,EAAE;oBACXP,cAAc;wBACZC,iBAAiB;wBACjBC,OAAO;oBACT;gBACF,OAAO;oBACLE,SAASG,EAAE;oBACXP,cAAc;wBACZC,iBAAiB;wBACjBC,OAAO;oBACT;gBACF;gBAEAI,YAAYK;YACd;YAEA,IAAID,YAAY,KAAKA,YAAY,GAAG;gBAClCN,SAASG,EAAE;gBACXP,cAAc;oBACZC,iBAAiB;oBACjBC,OAAO;gBACT;gBACAI,YAAYI;YACd;YAEA,IAAIA,WAAW,GAAG;gBAChBN,SAASG,EAAE;gBACXP,cAAc;oBACZC,iBAAiB;oBACjBC,OAAO;gBACT;gBACAI,YAAY;YACd;QACF;IACF,GAAG;QAACT;QAAWD;QAAWE;QAAMS;KAAE;IAElC,MAAMC,aAAaV,MAAMW,UAAU;IAEnC,MAAMG,gBAAgBhB,YAAYY;IAClC,MAAMK,gBAAgBhB,YAAYW;IAElC,qBACE,MAACM;QACCC,OAAO;YACLC,YAAY;YACZC,SAAS;YACTC,OAAO;QACT;;0BAEA,KAACzB;gBAAKQ,iBAAiBF,WAAWE,eAAe;gBAAEC,OAAOH,WAAWG,KAAK;gBAAEC,OAAOA;;0BACnF,KAACW;gBACCC,OAAO;oBACLI,YAAY;oBACZC,YAAY;oBACZC,aAAa;oBACbC,YAAY;gBACd;0BAEA,cAAA,MAACC;;wBACEhB,EAAE,6BAA6B;4BAAEiB,SAAS1B,MAAMW,UAAU;4BAAGb;4BAAWC;wBAAU;wBACjFW,CAAAA,eAAe,KAAKK,gBAAgB,CAAA,mBACpC,KAACvB;sCAAUiB,EAAE,6BAA6B;gCAAEkB,YAAYZ;4BAAc;;wBAEvEA,iBAAiB,KAAKD,iBAAiB,mBACtC,KAACtB;sCAAUiB,EAAE,iCAAiC;gCAAEkB,YAAYb;4BAAc;;wBAE3EA,gBAAgB,mBACf,KAACtB;sCACEiB,EAAE,gCAAgC;gCAAEkB,YAAYb,gBAAgB,CAAC;4BAAE;;;;;0BAK5E,KAACE;gBACCC,OAAO;oBACLd,iBAAiB;oBACjByB,QAAQ;oBACRC,UAAU;oBACVT,OAAO;gBACT;0BAEA,cAAA,KAACJ;oBACCC,OAAO;wBACLd,iBAAiBF,WAAWE,eAAe;wBAC3CyB,QAAQ;wBACRE,MAAM;wBACND,UAAU;wBACVE,KAAK;wBACLX,OAAO,GAAGb,WAAW,IAAI,CAAC,CAAC;oBAC7B;;;;;AAKV,EAAC"}