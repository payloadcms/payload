{"version":3,"sources":["../../../src/fields/Overview/OverviewComponent.tsx"],"sourcesContent":["'use client'\n\nimport type { FormField, UIField } from 'payload'\n\nimport { useAllFormFields, useForm, useTranslation } from '@payloadcms/ui'\nimport React, { useCallback, useEffect, useState } from 'react'\n\nimport type { PluginSEOTranslationKeys, PluginSEOTranslations } from '../../translations/index.js'\n\nimport { defaults } from '../../defaults.js'\n\nconst {\n  description: { maxLength: maxDescDefault, minLength: minDescDefault },\n  title: { maxLength: maxTitleDefault, minLength: minTitleDefault },\n} = defaults\n\ntype OverviewProps = {\n  descriptionOverrides?: {\n    maxLength?: number\n    minLength?: number\n  }\n  descriptionPath?: string\n  imagePath?: string\n  titleOverrides?: {\n    maxLength?: number\n    minLength?: number\n  }\n  titlePath?: string\n} & UIField\n\nexport const OverviewComponent: React.FC<OverviewProps> = ({\n  descriptionOverrides,\n  descriptionPath: descriptionPathFromContext,\n  imagePath: imagePathFromContext,\n  titleOverrides,\n  titlePath: titlePathFromContext,\n}) => {\n  const { getFields } = useForm()\n\n  const descriptionPath = descriptionPathFromContext || 'meta.description'\n  const titlePath = titlePathFromContext || 'meta.title'\n  const imagePath = imagePathFromContext || 'meta.image'\n\n  const [\n    {\n      [descriptionPath]: { value: metaDesc } = {} as FormField,\n      [imagePath]: { value: metaImage } = {} as FormField,\n      [titlePath]: { value: metaTitle } = {} as FormField,\n    },\n  ] = useAllFormFields()\n  const { t } = useTranslation<PluginSEOTranslations, PluginSEOTranslationKeys>()\n\n  const [titleIsValid, setTitleIsValid] = useState<boolean | undefined>()\n  const [descIsValid, setDescIsValid] = useState<boolean | undefined>()\n  const [imageIsValid, setImageIsValid] = useState<boolean | undefined>()\n\n  const minDesc = descriptionOverrides?.minLength || minDescDefault\n  const maxDesc = descriptionOverrides?.maxLength || maxDescDefault\n  const minTitle = titleOverrides?.minLength || minTitleDefault\n  const maxTitle = titleOverrides?.maxLength || maxTitleDefault\n\n  useEffect(() => {\n    if (typeof metaTitle === 'string') {\n      setTitleIsValid(metaTitle.length >= minTitle && metaTitle.length <= maxTitle)\n    }\n    if (typeof metaDesc === 'string') {\n      setDescIsValid(metaDesc.length >= minDesc && metaDesc.length <= maxDesc)\n    }\n    setImageIsValid(Boolean(metaImage))\n  }, [metaTitle, metaDesc, metaImage])\n\n  const testResults = [titleIsValid, descIsValid, imageIsValid]\n\n  const numberOfPasses = testResults.filter(Boolean).length\n\n  return (\n    <div\n      style={{\n        marginBottom: '20px',\n      }}\n    >\n      <div>\n        {t('plugin-seo:checksPassing', { current: numberOfPasses, max: testResults.length })}\n      </div>\n    </div>\n  )\n}\n"],"names":["useAllFormFields","useForm","useTranslation","React","useEffect","useState","defaults","description","maxLength","maxDescDefault","minLength","minDescDefault","title","maxTitleDefault","minTitleDefault","OverviewComponent","descriptionOverrides","descriptionPath","descriptionPathFromContext","imagePath","imagePathFromContext","titleOverrides","titlePath","titlePathFromContext","getFields","value","metaDesc","metaImage","metaTitle","t","titleIsValid","setTitleIsValid","descIsValid","setDescIsValid","imageIsValid","setImageIsValid","minDesc","maxDesc","minTitle","maxTitle","length","Boolean","testResults","numberOfPasses","filter","div","style","marginBottom","current","max"],"mappings":"AAAA;;AAIA,SAASA,gBAAgB,EAAEC,OAAO,EAAEC,cAAc,QAAQ,iBAAgB;AAC1E,OAAOC,SAAsBC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAI/D,SAASC,QAAQ,QAAQ,oBAAmB;AAE5C,MAAM,EACJC,aAAa,EAAEC,WAAWC,cAAc,EAAEC,WAAWC,cAAc,EAAE,EACrEC,OAAO,EAAEJ,WAAWK,eAAe,EAAEH,WAAWI,eAAe,EAAE,EAClE,GAAGR;AAgBJ,OAAO,MAAMS,oBAA6C,CAAC,EACzDC,oBAAoB,EACpBC,iBAAiBC,0BAA0B,EAC3CC,WAAWC,oBAAoB,EAC/BC,cAAc,EACdC,WAAWC,oBAAoB,EAChC;IACC,MAAM,EAAEC,SAAS,EAAE,GAAGvB;IAEtB,MAAMgB,kBAAkBC,8BAA8B;IACtD,MAAMI,YAAYC,wBAAwB;IAC1C,MAAMJ,YAAYC,wBAAwB;IAE1C,MAAM,CACJ,EACE,CAACH,gBAAgB,EAAE,EAAEQ,OAAOC,QAAQ,EAAE,GAAG,CAAC,CAAc,EACxD,CAACP,UAAU,EAAE,EAAEM,OAAOE,SAAS,EAAE,GAAG,CAAC,CAAc,EACnD,CAACL,UAAU,EAAE,EAAEG,OAAOG,SAAS,EAAE,GAAG,CAAC,CAAc,EACpD,CACF,GAAG5B;IACJ,MAAM,EAAE6B,CAAC,EAAE,GAAG3B;IAEd,MAAM,CAAC4B,cAAcC,gBAAgB,GAAG1B;IACxC,MAAM,CAAC2B,aAAaC,eAAe,GAAG5B;IACtC,MAAM,CAAC6B,cAAcC,gBAAgB,GAAG9B;IAExC,MAAM+B,UAAUpB,sBAAsBN,aAAaC;IACnD,MAAM0B,UAAUrB,sBAAsBR,aAAaC;IACnD,MAAM6B,WAAWjB,gBAAgBX,aAAaI;IAC9C,MAAMyB,WAAWlB,gBAAgBb,aAAaK;IAE9CT,UAAU;QACR,IAAI,OAAOwB,cAAc,UAAU;YACjCG,gBAAgBH,UAAUY,MAAM,IAAIF,YAAYV,UAAUY,MAAM,IAAID;QACtE;QACA,IAAI,OAAOb,aAAa,UAAU;YAChCO,eAAeP,SAASc,MAAM,IAAIJ,WAAWV,SAASc,MAAM,IAAIH;QAClE;QACAF,gBAAgBM,QAAQd;IAC1B,GAAG;QAACC;QAAWF;QAAUC;KAAU;IAEnC,MAAMe,cAAc;QAACZ;QAAcE;QAAaE;KAAa;IAE7D,MAAMS,iBAAiBD,YAAYE,MAAM,CAACH,SAASD,MAAM;IAEzD,qBACE,KAACK;QACCC,OAAO;YACLC,cAAc;QAChB;kBAEA,cAAA,KAACF;sBACEhB,EAAE,4BAA4B;gBAAEmB,SAASL;gBAAgBM,KAAKP,YAAYF,MAAM;YAAC;;;AAI1F,EAAC"}