{"version":3,"sources":["../../src/utilities/formatAdminURL.ts"],"sourcesContent":["import type { Config } from '../config/types.js'\n\n/**\n * This function builds correct URLs for admin panel routing.\n * Its primary responsibilities are:\n * 1. Read from your `routes.admin` config and appropriately handle `\"/\"` admin paths\n * 2. Prepend the `basePath` from your Next.js config, if specified\n * 3. Return relative or absolute URLs, as needed\n */\ntype BaseFormatURLArgs = {\n  /**\n   * The subpath of your application, if specified.\n   * @see https://nextjs.org/docs/app/api-reference/config/next-config-js/basePath\n   * @example '/docs'\n   */\n  basePath?: string\n  includeBasePath?: boolean\n  path?: '' | `/${string}` | null\n  /**\n   * Return a relative URL, e.g. ignore `serverURL`.\n   * Useful for route-matching, etc.\n   */\n  relative?: boolean\n} & Pick<Config, 'serverURL'>\n\ntype FormatURLArgs =\n  | ({\n      adminRoute: NonNullable<Config['routes']>['admin']\n      apiRoute?: never\n    } & BaseFormatURLArgs)\n  | ({\n      adminRoute?: never\n      apiRoute: NonNullable<Config['routes']>['api']\n    } & BaseFormatURLArgs)\n\nexport const formatAdminURL = (args: FormatURLArgs): string => {\n  const {\n    adminRoute,\n    apiRoute,\n    includeBasePath: includeBasePathArg,\n    path = '',\n    relative = false,\n    serverURL,\n  } = args\n  const basePath = process.env.NEXT_BASE_PATH || args.basePath || ''\n  const routePath = adminRoute || apiRoute\n  const segments = [routePath && routePath !== '/' && routePath, path && path].filter(Boolean)\n  const pathname = segments.join('') || '/'\n  const pathnameWithBase = (basePath + pathname).replace(/\\/$/, '') || '/'\n  const includeBasePath = includeBasePathArg ?? (adminRoute ? false : true)\n\n  if (relative || !serverURL) {\n    if (includeBasePath && basePath) {\n      return pathnameWithBase\n    }\n    return pathname\n  }\n\n  const serverURLObj = new URL(serverURL)\n  return new URL(pathnameWithBase, serverURLObj.origin).toString()\n}\n"],"names":["formatAdminURL","args","adminRoute","apiRoute","includeBasePath","includeBasePathArg","path","relative","serverURL","basePath","process","env","NEXT_BASE_PATH","routePath","segments","filter","Boolean","pathname","join","pathnameWithBase","replace","serverURLObj","URL","origin","toString"],"mappings":"AAmCA,OAAO,MAAMA,iBAAiB,CAACC;IAC7B,MAAM,EACJC,UAAU,EACVC,QAAQ,EACRC,iBAAiBC,kBAAkB,EACnCC,OAAO,EAAE,EACTC,WAAW,KAAK,EAChBC,SAAS,EACV,GAAGP;IACJ,MAAMQ,WAAWC,QAAQC,GAAG,CAACC,cAAc,IAAIX,KAAKQ,QAAQ,IAAI;IAChE,MAAMI,YAAYX,cAAcC;IAChC,MAAMW,WAAW;QAACD,aAAaA,cAAc,OAAOA;QAAWP,QAAQA;KAAK,CAACS,MAAM,CAACC;IACpF,MAAMC,WAAWH,SAASI,IAAI,CAAC,OAAO;IACtC,MAAMC,mBAAmB,AAACV,CAAAA,WAAWQ,QAAO,EAAGG,OAAO,CAAC,OAAO,OAAO;IACrE,MAAMhB,kBAAkBC,sBAAuBH,CAAAA,aAAa,QAAQ,IAAG;IAEvE,IAAIK,YAAY,CAACC,WAAW;QAC1B,IAAIJ,mBAAmBK,UAAU;YAC/B,OAAOU;QACT;QACA,OAAOF;IACT;IAEA,MAAMI,eAAe,IAAIC,IAAId;IAC7B,OAAO,IAAIc,IAAIH,kBAAkBE,aAAaE,MAAM,EAAEC,QAAQ;AAChE,EAAC"}