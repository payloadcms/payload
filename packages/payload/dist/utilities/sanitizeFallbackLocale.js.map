{"version":3,"sources":["../../src/utilities/sanitizeFallbackLocale.ts"],"sourcesContent":["import type { SanitizedLocalizationConfig } from '../config/types.js'\nimport type { TypedFallbackLocale } from '../index.js'\n\ninterface Args {\n  fallbackLocale: TypedFallbackLocale\n  locale: string\n  localization: SanitizedLocalizationConfig\n}\n\n/**\n * Sanitizes fallbackLocale based on a provided fallbackLocale, locale and localization config\n *\n * Handles the following scenarios:\n * - determines if a fallback locale should be used\n * - determines if a locale specific fallback should be used in place of the default locale\n * - sets the fallbackLocale to 'null' if no fallback locale should be used\n */\nexport const sanitizeFallbackLocale = ({\n  fallbackLocale,\n  locale,\n  localization,\n}: Args): TypedFallbackLocale => {\n  if (fallbackLocale === undefined || fallbackLocale === null) {\n    if (localization && localization.fallback) {\n      // Check for locale specific fallback\n      const localeSpecificFallback = localization.locales.length\n        ? localization.locales.find((localeConfig) => localeConfig.code === locale)?.fallbackLocale\n        : undefined\n\n      if (localeSpecificFallback) {\n        return localeSpecificFallback\n      }\n\n      return localization.defaultLocale\n    }\n\n    return false\n  } else if (Array.isArray(fallbackLocale)) {\n    return fallbackLocale.filter((localeCode) => localization.localeCodes.includes(localeCode))\n  } else if (fallbackLocale) {\n    if (['false', 'none', 'null'].includes(fallbackLocale)) {\n      return false\n    }\n\n    if (localization.localeCodes.includes(fallbackLocale)) {\n      return fallbackLocale\n    }\n  }\n\n  return false\n}\n"],"names":["sanitizeFallbackLocale","fallbackLocale","locale","localization","undefined","fallback","localeSpecificFallback","locales","length","find","localeConfig","code","defaultLocale","Array","isArray","filter","localeCode","localeCodes","includes"],"mappings":"AASA;;;;;;;CAOC,GACD,OAAO,MAAMA,yBAAyB,CAAC,EACrCC,cAAc,EACdC,MAAM,EACNC,YAAY,EACP;IACL,IAAIF,mBAAmBG,aAAaH,mBAAmB,MAAM;QAC3D,IAAIE,gBAAgBA,aAAaE,QAAQ,EAAE;YACzC,qCAAqC;YACrC,MAAMC,yBAAyBH,aAAaI,OAAO,CAACC,MAAM,GACtDL,aAAaI,OAAO,CAACE,IAAI,CAAC,CAACC,eAAiBA,aAAaC,IAAI,KAAKT,SAASD,iBAC3EG;YAEJ,IAAIE,wBAAwB;gBAC1B,OAAOA;YACT;YAEA,OAAOH,aAAaS,aAAa;QACnC;QAEA,OAAO;IACT,OAAO,IAAIC,MAAMC,OAAO,CAACb,iBAAiB;QACxC,OAAOA,eAAec,MAAM,CAAC,CAACC,aAAeb,aAAac,WAAW,CAACC,QAAQ,CAACF;IACjF,OAAO,IAAIf,gBAAgB;QACzB,IAAI;YAAC;YAAS;YAAQ;SAAO,CAACiB,QAAQ,CAACjB,iBAAiB;YACtD,OAAO;QACT;QAEA,IAAIE,aAAac,WAAW,CAACC,QAAQ,CAACjB,iBAAiB;YACrD,OAAOA;QACT;IACF;IAEA,OAAO;AACT,EAAC"}