{"version":3,"sources":["../../../src/collections/endpoints/create.ts"],"sourcesContent":["import { getTranslation } from '@payloadcms/translations'\nimport { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollection } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { createOperation } from '../operations/create.js'\n\nexport const createHandler: PayloadHandler = async (req) => {\n  const collection = getRequestCollection(req)\n\n  const { autosave, depth, draft, populate, select } = parseParams(req.query)\n\n  const publishSpecificLocale = req.query.publishSpecificLocale as string | undefined\n\n  const doc = await createOperation({\n    autosave,\n    collection,\n    data: req.data!,\n    depth,\n    draft,\n    populate,\n    publishSpecificLocale,\n    req,\n    select,\n  })\n\n  return Response.json(\n    {\n      doc,\n      message: req.t('general:successfullyCreated', {\n        label: getTranslation(collection.config.labels.singular, req.i18n),\n      }),\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.CREATED,\n    },\n  )\n}\n"],"names":["getTranslation","status","httpStatus","getRequestCollection","headersWithCors","parseParams","createOperation","createHandler","req","collection","autosave","depth","draft","populate","select","query","publishSpecificLocale","doc","data","Response","json","message","t","label","config","labels","singular","i18n","headers","Headers","CREATED"],"mappings":"AAAA,SAASA,cAAc,QAAQ,2BAA0B;AACzD,SAASC,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,oBAAoB,QAAQ,sCAAqC;AAC1E,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,eAAe,QAAQ,0BAAyB;AAEzD,OAAO,MAAMC,gBAAgC,OAAOC;IAClD,MAAMC,aAAaN,qBAAqBK;IAExC,MAAM,EAAEE,QAAQ,EAAEC,KAAK,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,MAAM,EAAE,GAAGT,YAAYG,IAAIO,KAAK;IAE1E,MAAMC,wBAAwBR,IAAIO,KAAK,CAACC,qBAAqB;IAE7D,MAAMC,MAAM,MAAMX,gBAAgB;QAChCI;QACAD;QACAS,MAAMV,IAAIU,IAAI;QACdP;QACAC;QACAC;QACAG;QACAR;QACAM;IACF;IAEA,OAAOK,SAASC,IAAI,CAClB;QACEH;QACAI,SAASb,IAAIc,CAAC,CAAC,+BAA+B;YAC5CC,OAAOvB,eAAeS,WAAWe,MAAM,CAACC,MAAM,CAACC,QAAQ,EAAElB,IAAImB,IAAI;QACnE;IACF,GACA;QACEC,SAASxB,gBAAgB;YACvBwB,SAAS,IAAIC;YACbrB;QACF;QACAP,QAAQC,WAAW4B,OAAO;IAC5B;AAEJ,EAAC"}