{"version":3,"sources":["../../../src/collections/endpoints/updateByID.ts"],"sourcesContent":["import { status as httpStatus } from 'http-status'\n\nimport type { PayloadHandler } from '../../config/types.js'\n\nimport { getRequestCollectionWithID } from '../../utilities/getRequestEntity.js'\nimport { headersWithCors } from '../../utilities/headersWithCors.js'\nimport { parseParams } from '../../utilities/parseParams/index.js'\nimport { updateByIDOperation } from '../operations/updateByID.js'\n\nexport const updateByIDHandler: PayloadHandler = async (req) => {\n  const { id, collection } = getRequestCollectionWithID(req)\n\n  const { autosave, depth, draft, overrideLock, populate, publishSpecificLocale, select, trash } =\n    parseParams(req.query)\n\n  const doc = await updateByIDOperation({\n    id,\n    autosave,\n    collection,\n    data: req.data!,\n    depth,\n    draft,\n    overrideLock: overrideLock ?? false,\n    populate,\n    publishSpecificLocale,\n    req,\n    select,\n    trash,\n  })\n\n  let message = req.t('general:updatedSuccessfully')\n\n  if (draft) {\n    message = req.t('version:draftSavedSuccessfully')\n  }\n  if (autosave) {\n    message = req.t('version:autosavedSuccessfully')\n  }\n\n  return Response.json(\n    {\n      doc,\n      message,\n    },\n    {\n      headers: headersWithCors({\n        headers: new Headers(),\n        req,\n      }),\n      status: httpStatus.OK,\n    },\n  )\n}\n"],"names":["status","httpStatus","getRequestCollectionWithID","headersWithCors","parseParams","updateByIDOperation","updateByIDHandler","req","id","collection","autosave","depth","draft","overrideLock","populate","publishSpecificLocale","select","trash","query","doc","data","message","t","Response","json","headers","Headers","OK"],"mappings":"AAAA,SAASA,UAAUC,UAAU,QAAQ,cAAa;AAIlD,SAASC,0BAA0B,QAAQ,sCAAqC;AAChF,SAASC,eAAe,QAAQ,qCAAoC;AACpE,SAASC,WAAW,QAAQ,uCAAsC;AAClE,SAASC,mBAAmB,QAAQ,8BAA6B;AAEjE,OAAO,MAAMC,oBAAoC,OAAOC;IACtD,MAAM,EAAEC,EAAE,EAAEC,UAAU,EAAE,GAAGP,2BAA2BK;IAEtD,MAAM,EAAEG,QAAQ,EAAEC,KAAK,EAAEC,KAAK,EAAEC,YAAY,EAAEC,QAAQ,EAAEC,qBAAqB,EAAEC,MAAM,EAAEC,KAAK,EAAE,GAC5Fb,YAAYG,IAAIW,KAAK;IAEvB,MAAMC,MAAM,MAAMd,oBAAoB;QACpCG;QACAE;QACAD;QACAW,MAAMb,IAAIa,IAAI;QACdT;QACAC;QACAC,cAAcA,gBAAgB;QAC9BC;QACAC;QACAR;QACAS;QACAC;IACF;IAEA,IAAII,UAAUd,IAAIe,CAAC,CAAC;IAEpB,IAAIV,OAAO;QACTS,UAAUd,IAAIe,CAAC,CAAC;IAClB;IACA,IAAIZ,UAAU;QACZW,UAAUd,IAAIe,CAAC,CAAC;IAClB;IAEA,OAAOC,SAASC,IAAI,CAClB;QACEL;QACAE;IACF,GACA;QACEI,SAAStB,gBAAgB;YACvBsB,SAAS,IAAIC;YACbnB;QACF;QACAP,QAAQC,WAAW0B,EAAE;IACvB;AAEJ,EAAC"}