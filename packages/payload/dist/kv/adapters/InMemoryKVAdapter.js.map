{"version":3,"sources":["../../../src/kv/adapters/InMemoryKVAdapter.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/require-await */\nimport type { KVAdapter, KVAdapterResult, KVStoreValue } from '../index.js'\n\nexport class InMemoryKVAdapter implements KVAdapter {\n  store = new Map<string, KVStoreValue>()\n\n  async clear(): Promise<void> {\n    this.store.clear()\n  }\n\n  async delete(key: string): Promise<void> {\n    this.store.delete(key)\n  }\n\n  async get<T extends KVStoreValue>(key: string): Promise<null | T> {\n    const value = this.store.get(key) as T | undefined\n\n    if (typeof value === 'undefined') {\n      return null\n    }\n\n    return value\n  }\n\n  async has(key: string): Promise<boolean> {\n    return this.store.has(key)\n  }\n\n  async keys(): Promise<string[]> {\n    return Array.from(this.store.keys())\n  }\n\n  async set(key: string, value: KVStoreValue): Promise<void> {\n    this.store.set(key, value)\n  }\n}\n\nexport const inMemoryKVAdapter = (): KVAdapterResult => {\n  return {\n    init: () => new InMemoryKVAdapter(),\n  }\n}\n"],"names":["InMemoryKVAdapter","store","Map","clear","delete","key","get","value","has","keys","Array","from","set","inMemoryKVAdapter","init"],"mappings":"AAAA,mDAAmD,GAGnD,OAAO,MAAMA;IACXC,QAAQ,IAAIC,MAA2B;IAEvC,MAAMC,QAAuB;QAC3B,IAAI,CAACF,KAAK,CAACE,KAAK;IAClB;IAEA,MAAMC,OAAOC,GAAW,EAAiB;QACvC,IAAI,CAACJ,KAAK,CAACG,MAAM,CAACC;IACpB;IAEA,MAAMC,IAA4BD,GAAW,EAAqB;QAChE,MAAME,QAAQ,IAAI,CAACN,KAAK,CAACK,GAAG,CAACD;QAE7B,IAAI,OAAOE,UAAU,aAAa;YAChC,OAAO;QACT;QAEA,OAAOA;IACT;IAEA,MAAMC,IAAIH,GAAW,EAAoB;QACvC,OAAO,IAAI,CAACJ,KAAK,CAACO,GAAG,CAACH;IACxB;IAEA,MAAMI,OAA0B;QAC9B,OAAOC,MAAMC,IAAI,CAAC,IAAI,CAACV,KAAK,CAACQ,IAAI;IACnC;IAEA,MAAMG,IAAIP,GAAW,EAAEE,KAAmB,EAAiB;QACzD,IAAI,CAACN,KAAK,CAACW,GAAG,CAACP,KAAKE;IACtB;AACF;AAEA,OAAO,MAAMM,oBAAoB;IAC/B,OAAO;QACLC,MAAM,IAAM,IAAId;IAClB;AACF,EAAC"}