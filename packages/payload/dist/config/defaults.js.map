{"version":3,"sources":["../../src/config/defaults.ts"],"sourcesContent":["import type { JobsConfig } from '../queues/config/types/index.js'\nimport type { Config } from './types.js'\n\nimport { defaultAccess } from '../auth/defaultAccess.js'\nimport { foldersSlug, parentFolderFieldName } from '../folders/constants.js'\nimport { databaseKVAdapter } from '../kv/adapters/DatabaseKVAdapter.js'\n\n/**\n * @deprecated - remove in 4.0. This is error-prone, as mutating this object will affect any objects that use the defaults as a base.\n */\nexport const defaults: Omit<Config, 'db' | 'editor' | 'secret'> = {\n  admin: {\n    avatar: 'gravatar',\n    components: {},\n    custom: {},\n    dateFormat: 'MMMM do yyyy, h:mm a',\n    dependencies: {},\n    importMap: {\n      baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,\n    },\n    meta: {\n      defaultOGImageType: 'dynamic',\n      robots: 'noindex, nofollow',\n      titleSuffix: '- Payload',\n    },\n    routes: {\n      account: '/account',\n      browseByFolder: '/browse-by-folder',\n      createFirstUser: '/create-first-user',\n      forgot: '/forgot',\n      inactivity: '/logout-inactivity',\n      login: '/login',\n      logout: '/logout',\n      reset: '/reset',\n      unauthorized: '/unauthorized',\n    },\n    theme: 'all',\n  },\n  auth: {\n    jwtOrder: ['JWT', 'Bearer', 'cookie'],\n  },\n  bin: [],\n  collections: [],\n  cookiePrefix: 'payload',\n  cors: [],\n  csrf: [],\n  custom: {},\n  defaultDepth: 2,\n  defaultMaxTextLength: 40000,\n  endpoints: [],\n  globals: [],\n  graphQL: {\n    disablePlaygroundInProduction: true,\n    maxComplexity: 1000,\n    schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,\n  },\n  hooks: {},\n  i18n: {},\n  jobs: {\n    access: {\n      cancel: defaultAccess,\n      queue: defaultAccess,\n      run: defaultAccess,\n    },\n    deleteJobOnComplete: true,\n    depth: 0,\n  } as JobsConfig,\n\n  localization: false,\n  maxDepth: 10,\n  routes: {\n    admin: '/admin',\n    api: '/api',\n    graphQL: '/graphql',\n    graphQLPlayground: '/graphql-playground',\n  },\n  serverURL: '',\n  telemetry: true,\n  typescript: {\n    autoGenerate: true,\n    outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,\n  },\n  upload: {},\n}\n\nexport const addDefaultsToConfig = (config: Config): Config => {\n  config.admin = {\n    avatar: 'gravatar',\n    components: {},\n    custom: {},\n    dateFormat: 'MMMM do yyyy, h:mm a',\n    dependencies: {},\n    theme: 'all',\n    ...(config.admin || {}),\n    importMap: {\n      baseDir: `${typeof process?.cwd === 'function' ? process.cwd() : ''}`,\n      ...(config?.admin?.importMap || {}),\n    },\n    meta: {\n      defaultOGImageType: 'dynamic',\n      robots: 'noindex, nofollow',\n      titleSuffix: '- Payload',\n      ...(config?.admin?.meta || {}),\n    },\n    routes: {\n      account: '/account',\n      browseByFolder: '/browse-by-folder',\n      createFirstUser: '/create-first-user',\n      forgot: '/forgot',\n      inactivity: '/logout-inactivity',\n      login: '/login',\n      logout: '/logout',\n      reset: '/reset',\n      unauthorized: '/unauthorized',\n      ...(config?.admin?.routes || {}),\n    },\n  }\n\n  config.bin = config.bin ?? []\n  config.collections = config.collections ?? []\n  config.cookiePrefix = config.cookiePrefix ?? 'payload'\n  config.cors = config.cors ?? []\n  config.csrf = config.csrf ?? []\n  config.custom = config.custom ?? {}\n  config.defaultDepth = config.defaultDepth ?? 2\n  config.defaultMaxTextLength = config.defaultMaxTextLength ?? 40000\n  config.endpoints = config.endpoints ?? []\n  config.globals = config.globals ?? []\n  config.graphQL = {\n    disableIntrospectionInProduction: true,\n    disablePlaygroundInProduction: true,\n    maxComplexity: 1000,\n    schemaOutputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/schema.graphql`,\n    ...(config.graphQL || {}),\n  }\n  config.hooks = config.hooks ?? {}\n  config.i18n = config.i18n ?? {}\n  config.jobs = {\n    deleteJobOnComplete: true,\n    depth: 0,\n    ...(config.jobs || {}),\n    access: {\n      cancel: defaultAccess,\n      queue: defaultAccess,\n      run: defaultAccess,\n      ...(config.jobs?.access || {}),\n    },\n  } as JobsConfig\n  config.localization = config.localization ?? false\n  config.maxDepth = config.maxDepth ?? 10\n  config.routes = {\n    admin: '/admin',\n    api: '/api',\n    graphQL: '/graphql',\n    graphQLPlayground: '/graphql-playground',\n    ...(config.routes || {}),\n  }\n  config.serverURL = config.serverURL ?? ''\n  config.telemetry = config.telemetry ?? true\n  config.typescript = {\n    autoGenerate: true,\n    outputFile: `${typeof process?.cwd === 'function' ? process.cwd() : ''}/payload-types.ts`,\n    ...(config.typescript || {}),\n  }\n  config.upload = config.upload ?? {}\n\n  config.auth = {\n    jwtOrder: ['JWT', 'Bearer', 'cookie'],\n    ...(config.auth || {}),\n  }\n\n  config.kv = config.kv ?? databaseKVAdapter()\n\n  if (config.kv?.kvCollection) {\n    config.collections.push(config.kv.kvCollection)\n  }\n\n  if (\n    config.folders !== false &&\n    config.collections.some((collection) => Boolean(collection.folders))\n  ) {\n    config.folders = {\n      slug: config.folders?.slug ?? foldersSlug,\n      browseByFolder: config.folders?.browseByFolder ?? true,\n      collectionOverrides: config.folders?.collectionOverrides || undefined,\n      collectionSpecific: config.folders?.collectionSpecific ?? true,\n      debug: config.folders?.debug ?? false,\n      fieldName: config.folders?.fieldName ?? parentFolderFieldName,\n    }\n  } else {\n    config.folders = false\n  }\n\n  return config\n}\n"],"names":["defaultAccess","foldersSlug","parentFolderFieldName","databaseKVAdapter","defaults","admin","avatar","components","custom","dateFormat","dependencies","importMap","baseDir","process","cwd","meta","defaultOGImageType","robots","titleSuffix","routes","account","browseByFolder","createFirstUser","forgot","inactivity","login","logout","reset","unauthorized","theme","auth","jwtOrder","bin","collections","cookiePrefix","cors","csrf","defaultDepth","defaultMaxTextLength","endpoints","globals","graphQL","disablePlaygroundInProduction","maxComplexity","schemaOutputFile","hooks","i18n","jobs","access","cancel","queue","run","deleteJobOnComplete","depth","localization","maxDepth","api","graphQLPlayground","serverURL","telemetry","typescript","autoGenerate","outputFile","upload","addDefaultsToConfig","config","disableIntrospectionInProduction","kv","kvCollection","push","folders","some","collection","Boolean","slug","collectionOverrides","undefined","collectionSpecific","debug","fieldName"],"mappings":"AAGA,SAASA,aAAa,QAAQ,2BAA0B;AACxD,SAASC,WAAW,EAAEC,qBAAqB,QAAQ,0BAAyB;AAC5E,SAASC,iBAAiB,QAAQ,sCAAqC;AAEvE;;CAEC,GACD,OAAO,MAAMC,WAAqD;IAChEC,OAAO;QACLC,QAAQ;QACRC,YAAY,CAAC;QACbC,QAAQ,CAAC;QACTC,YAAY;QACZC,cAAc,CAAC;QACfC,WAAW;YACTC,SAAS,GAAG,OAAOC,SAASC,QAAQ,aAAaD,QAAQC,GAAG,KAAK,IAAI;QACvE;QACAC,MAAM;YACJC,oBAAoB;YACpBC,QAAQ;YACRC,aAAa;QACf;QACAC,QAAQ;YACNC,SAAS;YACTC,gBAAgB;YAChBC,iBAAiB;YACjBC,QAAQ;YACRC,YAAY;YACZC,OAAO;YACPC,QAAQ;YACRC,OAAO;YACPC,cAAc;QAChB;QACAC,OAAO;IACT;IACAC,MAAM;QACJC,UAAU;YAAC;YAAO;YAAU;SAAS;IACvC;IACAC,KAAK,EAAE;IACPC,aAAa,EAAE;IACfC,cAAc;IACdC,MAAM,EAAE;IACRC,MAAM,EAAE;IACR5B,QAAQ,CAAC;IACT6B,cAAc;IACdC,sBAAsB;IACtBC,WAAW,EAAE;IACbC,SAAS,EAAE;IACXC,SAAS;QACPC,+BAA+B;QAC/BC,eAAe;QACfC,kBAAkB,GAAG,OAAO/B,SAASC,QAAQ,aAAaD,QAAQC,GAAG,KAAK,GAAG,eAAe,CAAC;IAC/F;IACA+B,OAAO,CAAC;IACRC,MAAM,CAAC;IACPC,MAAM;QACJC,QAAQ;YACNC,QAAQjD;YACRkD,OAAOlD;YACPmD,KAAKnD;QACP;QACAoD,qBAAqB;QACrBC,OAAO;IACT;IAEAC,cAAc;IACdC,UAAU;IACVpC,QAAQ;QACNd,OAAO;QACPmD,KAAK;QACLf,SAAS;QACTgB,mBAAmB;IACrB;IACAC,WAAW;IACXC,WAAW;IACXC,YAAY;QACVC,cAAc;QACdC,YAAY,GAAG,OAAOjD,SAASC,QAAQ,aAAaD,QAAQC,GAAG,KAAK,GAAG,iBAAiB,CAAC;IAC3F;IACAiD,QAAQ,CAAC;AACX,EAAC;AAED,OAAO,MAAMC,sBAAsB,CAACC;IAClCA,OAAO5D,KAAK,GAAG;QACbC,QAAQ;QACRC,YAAY,CAAC;QACbC,QAAQ,CAAC;QACTC,YAAY;QACZC,cAAc,CAAC;QACfmB,OAAO;QACP,GAAIoC,OAAO5D,KAAK,IAAI,CAAC,CAAC;QACtBM,WAAW;YACTC,SAAS,GAAG,OAAOC,SAASC,QAAQ,aAAaD,QAAQC,GAAG,KAAK,IAAI;YACrE,GAAImD,QAAQ5D,OAAOM,aAAa,CAAC,CAAC;QACpC;QACAI,MAAM;YACJC,oBAAoB;YACpBC,QAAQ;YACRC,aAAa;YACb,GAAI+C,QAAQ5D,OAAOU,QAAQ,CAAC,CAAC;QAC/B;QACAI,QAAQ;YACNC,SAAS;YACTC,gBAAgB;YAChBC,iBAAiB;YACjBC,QAAQ;YACRC,YAAY;YACZC,OAAO;YACPC,QAAQ;YACRC,OAAO;YACPC,cAAc;YACd,GAAIqC,QAAQ5D,OAAOc,UAAU,CAAC,CAAC;QACjC;IACF;IAEA8C,OAAOjC,GAAG,GAAGiC,OAAOjC,GAAG,IAAI,EAAE;IAC7BiC,OAAOhC,WAAW,GAAGgC,OAAOhC,WAAW,IAAI,EAAE;IAC7CgC,OAAO/B,YAAY,GAAG+B,OAAO/B,YAAY,IAAI;IAC7C+B,OAAO9B,IAAI,GAAG8B,OAAO9B,IAAI,IAAI,EAAE;IAC/B8B,OAAO7B,IAAI,GAAG6B,OAAO7B,IAAI,IAAI,EAAE;IAC/B6B,OAAOzD,MAAM,GAAGyD,OAAOzD,MAAM,IAAI,CAAC;IAClCyD,OAAO5B,YAAY,GAAG4B,OAAO5B,YAAY,IAAI;IAC7C4B,OAAO3B,oBAAoB,GAAG2B,OAAO3B,oBAAoB,IAAI;IAC7D2B,OAAO1B,SAAS,GAAG0B,OAAO1B,SAAS,IAAI,EAAE;IACzC0B,OAAOzB,OAAO,GAAGyB,OAAOzB,OAAO,IAAI,EAAE;IACrCyB,OAAOxB,OAAO,GAAG;QACfyB,kCAAkC;QAClCxB,+BAA+B;QAC/BC,eAAe;QACfC,kBAAkB,GAAG,OAAO/B,SAASC,QAAQ,aAAaD,QAAQC,GAAG,KAAK,GAAG,eAAe,CAAC;QAC7F,GAAImD,OAAOxB,OAAO,IAAI,CAAC,CAAC;IAC1B;IACAwB,OAAOpB,KAAK,GAAGoB,OAAOpB,KAAK,IAAI,CAAC;IAChCoB,OAAOnB,IAAI,GAAGmB,OAAOnB,IAAI,IAAI,CAAC;IAC9BmB,OAAOlB,IAAI,GAAG;QACZK,qBAAqB;QACrBC,OAAO;QACP,GAAIY,OAAOlB,IAAI,IAAI,CAAC,CAAC;QACrBC,QAAQ;YACNC,QAAQjD;YACRkD,OAAOlD;YACPmD,KAAKnD;YACL,GAAIiE,OAAOlB,IAAI,EAAEC,UAAU,CAAC,CAAC;QAC/B;IACF;IACAiB,OAAOX,YAAY,GAAGW,OAAOX,YAAY,IAAI;IAC7CW,OAAOV,QAAQ,GAAGU,OAAOV,QAAQ,IAAI;IACrCU,OAAO9C,MAAM,GAAG;QACdd,OAAO;QACPmD,KAAK;QACLf,SAAS;QACTgB,mBAAmB;QACnB,GAAIQ,OAAO9C,MAAM,IAAI,CAAC,CAAC;IACzB;IACA8C,OAAOP,SAAS,GAAGO,OAAOP,SAAS,IAAI;IACvCO,OAAON,SAAS,GAAGM,OAAON,SAAS,IAAI;IACvCM,OAAOL,UAAU,GAAG;QAClBC,cAAc;QACdC,YAAY,GAAG,OAAOjD,SAASC,QAAQ,aAAaD,QAAQC,GAAG,KAAK,GAAG,iBAAiB,CAAC;QACzF,GAAImD,OAAOL,UAAU,IAAI,CAAC,CAAC;IAC7B;IACAK,OAAOF,MAAM,GAAGE,OAAOF,MAAM,IAAI,CAAC;IAElCE,OAAOnC,IAAI,GAAG;QACZC,UAAU;YAAC;YAAO;YAAU;SAAS;QACrC,GAAIkC,OAAOnC,IAAI,IAAI,CAAC,CAAC;IACvB;IAEAmC,OAAOE,EAAE,GAAGF,OAAOE,EAAE,IAAIhE;IAEzB,IAAI8D,OAAOE,EAAE,EAAEC,cAAc;QAC3BH,OAAOhC,WAAW,CAACoC,IAAI,CAACJ,OAAOE,EAAE,CAACC,YAAY;IAChD;IAEA,IACEH,OAAOK,OAAO,KAAK,SACnBL,OAAOhC,WAAW,CAACsC,IAAI,CAAC,CAACC,aAAeC,QAAQD,WAAWF,OAAO,IAClE;QACAL,OAAOK,OAAO,GAAG;YACfI,MAAMT,OAAOK,OAAO,EAAEI,QAAQzE;YAC9BoB,gBAAgB4C,OAAOK,OAAO,EAAEjD,kBAAkB;YAClDsD,qBAAqBV,OAAOK,OAAO,EAAEK,uBAAuBC;YAC5DC,oBAAoBZ,OAAOK,OAAO,EAAEO,sBAAsB;YAC1DC,OAAOb,OAAOK,OAAO,EAAEQ,SAAS;YAChCC,WAAWd,OAAOK,OAAO,EAAES,aAAa7E;QAC1C;IACF,OAAO;QACL+D,OAAOK,OAAO,GAAG;IACnB;IAEA,OAAOL;AACT,EAAC"}