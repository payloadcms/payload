var PH=Object.create;var Xb=Object.defineProperty;var LH=Object.getOwnPropertyDescriptor;var UH=Object.getOwnPropertyNames;var OH=Object.getPrototypeOf,MH=Object.prototype.hasOwnProperty;var v=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var _H=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of UH(t))!MH.call(e,n)&&n!==r&&Xb(e,n,{get:()=>t[n],enumerable:!(o=LH(t,n))||o.enumerable});return e};var We=(e,t,r)=>(r=e!=null?PH(OH(e)):{},_H(t||!e||!e.__esModule?Xb(r,"default",{value:e,enumerable:!0}):r,e));var ow=w((Ppe,rw)=>{"use strict";var{Duplex:GH}=v("stream");function ew(e){e.emit("close")}function jH(){!this.destroyed&&this._writableState.finished&&this.destroy()}function tw(e){this.removeListener("error",tw),this.destroy(),this.listenerCount("error")===0&&this.emit("error",e)}function HH(e,t){let r=!0,o=new GH({...t,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return e.on("message",function(i,s){let a=!s&&o._readableState.objectMode?i.toString():i;o.push(a)||e.pause()}),e.once("error",function(i){o.destroyed||(r=!1,o.destroy(i))}),e.once("close",function(){o.destroyed||o.push(null)}),o._destroy=function(n,i){if(e.readyState===e.CLOSED){i(n),process.nextTick(ew,o);return}let s=!1;e.once("error",function(l){s=!0,i(l)}),e.once("close",function(){s||i(n),process.nextTick(ew,o)}),r&&e.terminate()},o._final=function(n){if(e.readyState===e.CONNECTING){e.once("open",function(){o._final(n)});return}e._socket!==null&&(e._socket._writableState.finished?(n(),o._readableState.endEmitted&&o.destroy()):(e._socket.once("finish",function(){n()}),e.close()))},o._read=function(){e.isPaused&&e.resume()},o._write=function(n,i,s){if(e.readyState===e.CONNECTING){e.once("open",function(){o._write(n,i,s)});return}e.send(n,s)},o.on("end",jH),o.on("error",tw),o}rw.exports=HH});var dn=w((Lpe,sw)=>{"use strict";var nw=["nodebuffer","arraybuffer","fragments"],iw=typeof Blob<"u";iw&&nw.push("blob");sw.exports={BINARY_TYPES:nw,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:iw,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}});var Bw=w((Upe,Iw)=>{"use strict";var Aw=v("fs"),fn=v("path"),uw=v("os"),dw=typeof __webpack_require__=="function"?__non_webpack_require__:v,VH=process.config&&process.config.variables||{},qH=!!process.env.PREBUILDS_ONLY,aw=process.versions.modules,Hg=JH()?"electron":WH()?"node-webkit":"node",Vg=process.env.npm_config_arch||uw.arch(),qg=process.env.npm_config_platform||uw.platform(),fw=process.env.LIBC||(zH(qg)?"musl":"glibc"),Yg=process.env.ARM_VERSION||(Vg==="arm64"?"8":VH.arm_version)||"",pw=(process.versions.uv||"").split(".")[0];Iw.exports=Do;function Do(e){return dw(Do.resolve(e))}Do.resolve=Do.path=function(e){e=fn.resolve(e||".");try{var t=dw(fn.join(e,"package.json")).name.toUpperCase().replace(/-/g,"_");process.env[t+"_PREBUILD"]&&(e=process.env[t+"_PREBUILD"])}catch{}if(!qH){var r=lw(fn.join(e,"build/Release"),cw);if(r)return r;var o=lw(fn.join(e,"build/Debug"),cw);if(o)return o}var n=a(e);if(n)return n;var i=a(fn.dirname(process.execPath));if(i)return i;var s=["platform="+qg,"arch="+Vg,"runtime="+Hg,"abi="+aw,"uv="+pw,Yg?"armv="+Yg:"","libc="+fw,"node="+process.versions.node,process.versions.electron?"electron="+process.versions.electron:"",typeof __webpack_require__=="function"?"webpack=true":""].filter(Boolean).join(" ");throw new Error("No native build was found for "+s+`
    loaded from: `+e+`
`);function a(l){var c=Wg(fn.join(l,"prebuilds")).map(hw),A=c.filter(gw(qg,Vg)).sort(mw)[0];if(A){var d=fn.join(l,"prebuilds",A.name),f=Wg(d).map(yw),u=f.filter(Ew(Hg,aw)),p=u.sort(Cw(Hg))[0];if(p)return fn.join(d,p.file)}}};function Wg(e){try{return Aw.readdirSync(e)}catch{return[]}}function lw(e,t){var r=Wg(e).filter(t);return r[0]&&fn.join(e,r[0])}function cw(e){return/\.node$/.test(e)}function hw(e){var t=e.split("-");if(t.length===2){var r=t[0],o=t[1].split("+");if(r&&o.length&&o.every(Boolean))return{name:e,platform:r,architectures:o}}}function gw(e,t){return function(r){return r==null||r.platform!==e?!1:r.architectures.includes(t)}}function mw(e,t){return e.architectures.length-t.architectures.length}function yw(e){var t=e.split("."),r=t.pop(),o={file:e,specificity:0};if(r==="node"){for(var n=0;n<t.length;n++){var i=t[n];if(i==="node"||i==="electron"||i==="node-webkit")o.runtime=i;else if(i==="napi")o.napi=!0;else if(i.slice(0,3)==="abi")o.abi=i.slice(3);else if(i.slice(0,2)==="uv")o.uv=i.slice(2);else if(i.slice(0,4)==="armv")o.armv=i.slice(4);else if(i==="glibc"||i==="musl")o.libc=i;else continue;o.specificity++}return o}}function Ew(e,t){return function(r){return!(r==null||r.runtime&&r.runtime!==e&&!YH(r)||r.abi&&r.abi!==t&&!r.napi||r.uv&&r.uv!==pw||r.armv&&r.armv!==Yg||r.libc&&r.libc!==fw)}}function YH(e){return e.runtime==="node"&&e.napi}function Cw(e){return function(t,r){return t.runtime!==r.runtime?t.runtime===e?-1:1:t.abi!==r.abi?t.abi?-1:1:t.specificity!==r.specificity?t.specificity>r.specificity?-1:1:0}}function WH(){return!!(process.versions&&process.versions.nw)}function JH(){return process.versions&&process.versions.electron||process.env.ELECTRON_RUN_AS_NODE?!0:typeof window<"u"&&window.process&&window.process.type==="renderer"}function zH(e){return e==="linux"&&Aw.existsSync("/etc/alpine-release")}Do.parseTags=yw;Do.matchTags=Ew;Do.compareTags=Cw;Do.parseTuple=hw;Do.matchTuple=gw;Do.compareTuples=mw});var $g=w((Mpe,zg)=>{"use strict";var Jg=typeof __webpack_require__=="function"?__non_webpack_require__:v;typeof Jg.addon=="function"?zg.exports=Jg.addon.bind(Jg):zg.exports=Bw()});var bw=w((Gpe,Qw)=>{"use strict";var $H=(e,t,r,o,n)=>{for(var i=0;i<n;i++)r[o+i]=e[i]^t[i&3]},KH=(e,t)=>{let r=e.length;for(var o=0;o<r;o++)e[o]^=t[o&3]};Qw.exports={mask:$H,unmask:KH}});var ww=w((jpe,Kg)=>{"use strict";try{Kg.exports=$g()(__dirname)}catch{Kg.exports=bw()}});var ac=w((Hpe,rd)=>{"use strict";var{EMPTY_BUFFER:ZH}=dn(),Zg=Buffer[Symbol.species];function XH(e,t){if(e.length===0)return ZH;if(e.length===1)return e[0];let r=Buffer.allocUnsafe(t),o=0;for(let n=0;n<e.length;n++){let i=e[n];r.set(i,o),o+=i.length}return o<t?new Zg(r.buffer,r.byteOffset,o):r}function Sw(e,t,r,o,n){for(let i=0;i<n;i++)r[o+i]=e[i]^t[i&3]}function Tw(e,t){for(let r=0;r<e.length;r++)e[r]^=t[r&3]}function eV(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)}function Xg(e){if(Xg.readOnly=!0,Buffer.isBuffer(e))return e;let t;return e instanceof ArrayBuffer?t=new Zg(e):ArrayBuffer.isView(e)?t=new Zg(e.buffer,e.byteOffset,e.byteLength):(t=Buffer.from(e),Xg.readOnly=!1),t}rd.exports={concat:XH,mask:Sw,toArrayBuffer:eV,toBuffer:Xg,unmask:Tw};if(!process.env.WS_NO_BUFFER_UTIL)try{let e=ww();rd.exports.mask=function(t,r,o,n,i){i<48?Sw(t,r,o,n,i):e.mask(t,r,o,n,i)},rd.exports.unmask=function(t,r){t.length<32?Tw(t,r):e.unmask(t,r)}}catch{}});var Dw=w((Vpe,Rw)=>{"use strict";var xw=Symbol("kDone"),em=Symbol("kRun"),tm=class{constructor(t){this[xw]=()=>{this.pending--,this[em]()},this.concurrency=t||1/0,this.jobs=[],this.pending=0}add(t){this.jobs.push(t),this[em]()}[em](){if(this.pending!==this.concurrency&&this.jobs.length){let t=this.jobs.shift();this.pending++,t(this[xw])}}};Rw.exports=tm});var Ac=w((qpe,vw)=>{"use strict";var lc=v("zlib"),Fw=ac(),tV=Dw(),{kStatusCode:kw}=dn(),rV=Buffer[Symbol.species],oV=Buffer.from([0,0,255,255]),id=Symbol("permessage-deflate"),pn=Symbol("total-length"),cc=Symbol("callback"),$n=Symbol("buffers"),nd=Symbol("error"),od,rm=class{constructor(t,r,o){if(this._maxPayload=o|0,this._options=t||{},this._threshold=this._options.threshold!==void 0?this._options.threshold:1024,this._isServer=!!r,this._deflate=null,this._inflate=null,this.params=null,!od){let n=this._options.concurrencyLimit!==void 0?this._options.concurrencyLimit:10;od=new tV(n)}}static get extensionName(){return"permessage-deflate"}offer(){let t={};return this._options.serverNoContextTakeover&&(t.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(t.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(t.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?t.client_max_window_bits=this._options.clientMaxWindowBits:this._options.clientMaxWindowBits==null&&(t.client_max_window_bits=!0),t}accept(t){return t=this.normalizeParams(t),this.params=this._isServer?this.acceptAsServer(t):this.acceptAsClient(t),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){let t=this._deflate[cc];this._deflate.close(),this._deflate=null,t&&t(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(t){let r=this._options,o=t.find(n=>!(r.serverNoContextTakeover===!1&&n.server_no_context_takeover||n.server_max_window_bits&&(r.serverMaxWindowBits===!1||typeof r.serverMaxWindowBits=="number"&&r.serverMaxWindowBits>n.server_max_window_bits)||typeof r.clientMaxWindowBits=="number"&&!n.client_max_window_bits));if(!o)throw new Error("None of the extension offers can be accepted");return r.serverNoContextTakeover&&(o.server_no_context_takeover=!0),r.clientNoContextTakeover&&(o.client_no_context_takeover=!0),typeof r.serverMaxWindowBits=="number"&&(o.server_max_window_bits=r.serverMaxWindowBits),typeof r.clientMaxWindowBits=="number"?o.client_max_window_bits=r.clientMaxWindowBits:(o.client_max_window_bits===!0||r.clientMaxWindowBits===!1)&&delete o.client_max_window_bits,o}acceptAsClient(t){let r=t[0];if(this._options.clientNoContextTakeover===!1&&r.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(!r.client_max_window_bits)typeof this._options.clientMaxWindowBits=="number"&&(r.client_max_window_bits=this._options.clientMaxWindowBits);else if(this._options.clientMaxWindowBits===!1||typeof this._options.clientMaxWindowBits=="number"&&r.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"');return r}normalizeParams(t){return t.forEach(r=>{Object.keys(r).forEach(o=>{let n=r[o];if(n.length>1)throw new Error(`Parameter "${o}" must have only a single value`);if(n=n[0],o==="client_max_window_bits"){if(n!==!0){let i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${o}": ${n}`);n=i}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${o}": ${n}`)}else if(o==="server_max_window_bits"){let i=+n;if(!Number.isInteger(i)||i<8||i>15)throw new TypeError(`Invalid value for parameter "${o}": ${n}`);n=i}else if(o==="client_no_context_takeover"||o==="server_no_context_takeover"){if(n!==!0)throw new TypeError(`Invalid value for parameter "${o}": ${n}`)}else throw new Error(`Unknown parameter "${o}"`);r[o]=n})}),t}decompress(t,r,o){od.add(n=>{this._decompress(t,r,(i,s)=>{n(),o(i,s)})})}compress(t,r,o){od.add(n=>{this._compress(t,r,(i,s)=>{n(),o(i,s)})})}_decompress(t,r,o){let n=this._isServer?"client":"server";if(!this._inflate){let i=`${n}_max_window_bits`,s=typeof this.params[i]!="number"?lc.Z_DEFAULT_WINDOWBITS:this.params[i];this._inflate=lc.createInflateRaw({...this._options.zlibInflateOptions,windowBits:s}),this._inflate[id]=this,this._inflate[pn]=0,this._inflate[$n]=[],this._inflate.on("error",iV),this._inflate.on("data",Nw)}this._inflate[cc]=o,this._inflate.write(t),r&&this._inflate.write(oV),this._inflate.flush(()=>{let i=this._inflate[nd];if(i){this._inflate.close(),this._inflate=null,o(i);return}let s=Fw.concat(this._inflate[$n],this._inflate[pn]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[pn]=0,this._inflate[$n]=[],r&&this.params[`${n}_no_context_takeover`]&&this._inflate.reset()),o(null,s)})}_compress(t,r,o){let n=this._isServer?"server":"client";if(!this._deflate){let i=`${n}_max_window_bits`,s=typeof this.params[i]!="number"?lc.Z_DEFAULT_WINDOWBITS:this.params[i];this._deflate=lc.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:s}),this._deflate[pn]=0,this._deflate[$n]=[],this._deflate.on("data",nV)}this._deflate[cc]=o,this._deflate.write(t),this._deflate.flush(lc.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let i=Fw.concat(this._deflate[$n],this._deflate[pn]);r&&(i=new rV(i.buffer,i.byteOffset,i.length-4)),this._deflate[cc]=null,this._deflate[pn]=0,this._deflate[$n]=[],r&&this.params[`${n}_no_context_takeover`]&&this._deflate.reset(),o(null,i)})}};vw.exports=rm;function nV(e){this[$n].push(e),this[pn]+=e.length}function Nw(e){if(this[pn]+=e.length,this[id]._maxPayload<1||this[pn]<=this[id]._maxPayload){this[$n].push(e);return}this[nd]=new RangeError("Max payload size exceeded"),this[nd].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[nd][kw]=1009,this.removeListener("data",Nw),this.reset()}function iV(e){this[id]._inflate=null,e[kw]=1007,this[cc](e)}});var Lw=w((Ype,Pw)=>{"use strict";function sV(e){let t=e.length,r=0;for(;r<t;)if((e[r]&128)===0)r++;else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192)return!1;r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160)return!1;r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244)return!1;r+=4}else return!1;return!0}Pw.exports=sV});var Uw=w((Wpe,om)=>{"use strict";try{om.exports=$g()(__dirname)}catch{om.exports=Lw()}});var Aa=w((Jpe,sd)=>{"use strict";var{isUtf8:Ow}=v("buffer"),{hasBlob:aV}=dn(),lV=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0];function cV(e){return e>=1e3&&e<=1014&&e!==1004&&e!==1005&&e!==1006||e>=3e3&&e<=4999}function nm(e){let t=e.length,r=0;for(;r<t;)if((e[r]&128)===0)r++;else if((e[r]&224)===192){if(r+1===t||(e[r+1]&192)!==128||(e[r]&254)===192)return!1;r+=2}else if((e[r]&240)===224){if(r+2>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||e[r]===224&&(e[r+1]&224)===128||e[r]===237&&(e[r+1]&224)===160)return!1;r+=3}else if((e[r]&248)===240){if(r+3>=t||(e[r+1]&192)!==128||(e[r+2]&192)!==128||(e[r+3]&192)!==128||e[r]===240&&(e[r+1]&240)===128||e[r]===244&&e[r+1]>143||e[r]>244)return!1;r+=4}else return!1;return!0}function AV(e){return aV&&typeof e=="object"&&typeof e.arrayBuffer=="function"&&typeof e.type=="string"&&typeof e.stream=="function"&&(e[Symbol.toStringTag]==="Blob"||e[Symbol.toStringTag]==="File")}sd.exports={isBlob:AV,isValidStatusCode:cV,isValidUTF8:nm,tokenChars:lV};if(Ow)sd.exports.isValidUTF8=function(e){return e.length<24?nm(e):Ow(e)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{let e=Uw();sd.exports.isValidUTF8=function(t){return t.length<32?nm(t):e(t)}}catch{}});var cm=w((zpe,qw)=>{"use strict";var{Writable:uV}=v("stream"),Mw=Ac(),{BINARY_TYPES:dV,EMPTY_BUFFER:_w,kStatusCode:fV,kWebSocket:pV}=dn(),{concat:im,toArrayBuffer:hV,unmask:gV}=ac(),{isValidStatusCode:mV,isValidUTF8:Gw}=Aa(),ad=Buffer[Symbol.species],Lr=0,jw=1,Hw=2,Vw=3,sm=4,am=5,ld=6,lm=class extends uV{constructor(t={}){super(),this._allowSynchronousEvents=t.allowSynchronousEvents!==void 0?t.allowSynchronousEvents:!0,this._binaryType=t.binaryType||dV[0],this._extensions=t.extensions||{},this._isServer=!!t.isServer,this._maxPayload=t.maxPayload|0,this._skipUTF8Validation=!!t.skipUTF8Validation,this[pV]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=Lr}_write(t,r,o){if(this._opcode===8&&this._state==Lr)return o();this._bufferedBytes+=t.length,this._buffers.push(t),this.startLoop(o)}consume(t){if(this._bufferedBytes-=t,t===this._buffers[0].length)return this._buffers.shift();if(t<this._buffers[0].length){let o=this._buffers[0];return this._buffers[0]=new ad(o.buffer,o.byteOffset+t,o.length-t),new ad(o.buffer,o.byteOffset,t)}let r=Buffer.allocUnsafe(t);do{let o=this._buffers[0],n=r.length-t;t>=o.length?r.set(this._buffers.shift(),n):(r.set(new Uint8Array(o.buffer,o.byteOffset,t),n),this._buffers[0]=new ad(o.buffer,o.byteOffset+t,o.length-t)),t-=o.length}while(t>0);return r}startLoop(t){this._loop=!0;do switch(this._state){case Lr:this.getInfo(t);break;case jw:this.getPayloadLength16(t);break;case Hw:this.getPayloadLength64(t);break;case Vw:this.getMask();break;case sm:this.getData(t);break;case am:case ld:this._loop=!1;return}while(this._loop);this._errored||t()}getInfo(t){if(this._bufferedBytes<2){this._loop=!1;return}let r=this.consume(2);if((r[0]&48)!==0){let n=this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3");t(n);return}let o=(r[0]&64)===64;if(o&&!this._extensions[Mw.extensionName]){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(this._fin=(r[0]&128)===128,this._opcode=r[0]&15,this._payloadLength=r[1]&127,this._opcode===0){if(o){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(!this._fragmented){let n=this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}this._opcode=this._fragmented}else if(this._opcode===1||this._opcode===2){if(this._fragmented){let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}this._compressed=o}else if(this._opcode>7&&this._opcode<11){if(!this._fin){let n=this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN");t(n);return}if(o){let n=this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1");t(n);return}if(this._payloadLength>125||this._opcode===8&&this._payloadLength===1){let n=this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH");t(n);return}}else{let n=this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE");t(n);return}if(!this._fin&&!this._fragmented&&(this._fragmented=this._opcode),this._masked=(r[1]&128)===128,this._isServer){if(!this._masked){let n=this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK");t(n);return}}else if(this._masked){let n=this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK");t(n);return}this._payloadLength===126?this._state=jw:this._payloadLength===127?this._state=Hw:this.haveLength(t)}getPayloadLength16(t){if(this._bufferedBytes<2){this._loop=!1;return}this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(t)}getPayloadLength64(t){if(this._bufferedBytes<8){this._loop=!1;return}let r=this.consume(8),o=r.readUInt32BE(0);if(o>Math.pow(2,21)-1){let n=this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH");t(n);return}this._payloadLength=o*Math.pow(2,32)+r.readUInt32BE(4),this.haveLength(t)}haveLength(t){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){let r=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");t(r);return}this._masked?this._state=Vw:this._state=sm}getMask(){if(this._bufferedBytes<4){this._loop=!1;return}this._mask=this.consume(4),this._state=sm}getData(t){let r=_w;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength){this._loop=!1;return}r=this.consume(this._payloadLength),this._masked&&(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])!==0&&gV(r,this._mask)}if(this._opcode>7){this.controlMessage(r,t);return}if(this._compressed){this._state=am,this.decompress(r,t);return}r.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(r)),this.dataMessage(t)}decompress(t,r){this._extensions[Mw.extensionName].decompress(t,this._fin,(n,i)=>{if(n)return r(n);if(i.length){if(this._messageLength+=i.length,this._messageLength>this._maxPayload&&this._maxPayload>0){let s=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");r(s);return}this._fragments.push(i)}this.dataMessage(r),this._state===Lr&&this.startLoop(r)})}dataMessage(t){if(!this._fin){this._state=Lr;return}let r=this._messageLength,o=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],this._opcode===2){let n;this._binaryType==="nodebuffer"?n=im(o,r):this._binaryType==="arraybuffer"?n=hV(im(o,r)):this._binaryType==="blob"?n=new Blob(o):n=o,this._allowSynchronousEvents?(this.emit("message",n,!0),this._state=Lr):(this._state=ld,setImmediate(()=>{this.emit("message",n,!0),this._state=Lr,this.startLoop(t)}))}else{let n=im(o,r);if(!this._skipUTF8Validation&&!Gw(n)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");t(i);return}this._state===am||this._allowSynchronousEvents?(this.emit("message",n,!1),this._state=Lr):(this._state=ld,setImmediate(()=>{this.emit("message",n,!1),this._state=Lr,this.startLoop(t)}))}}controlMessage(t,r){if(this._opcode===8){if(t.length===0)this._loop=!1,this.emit("conclude",1005,_w),this.end();else{let o=t.readUInt16BE(0);if(!mV(o)){let i=this.createError(RangeError,`invalid status code ${o}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");r(i);return}let n=new ad(t.buffer,t.byteOffset+2,t.length-2);if(!this._skipUTF8Validation&&!Gw(n)){let i=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");r(i);return}this._loop=!1,this.emit("conclude",o,n),this.end()}this._state=Lr;return}this._allowSynchronousEvents?(this.emit(this._opcode===9?"ping":"pong",t),this._state=Lr):(this._state=ld,setImmediate(()=>{this.emit(this._opcode===9?"ping":"pong",t),this._state=Lr,this.startLoop(r)}))}createError(t,r,o,n,i){this._loop=!1,this._errored=!0;let s=new t(o?`Invalid WebSocket frame: ${r}`:r);return Error.captureStackTrace(s,this.createError),s.code=i,s[fV]=n,s}};qw.exports=lm});var dm=w((Kpe,Jw)=>{"use strict";var{Duplex:$pe}=v("stream"),{randomFillSync:yV}=v("crypto"),Yw=Ac(),{EMPTY_BUFFER:EV,kWebSocket:CV,NOOP:IV}=dn(),{isBlob:ua,isValidStatusCode:BV}=Aa(),{mask:Ww,toBuffer:Yi}=ac(),Ur=Symbol("kByteLength"),QV=Buffer.alloc(4),cd=8*1024,Wi,da=cd,lo=0,bV=1,wV=2,Am=class e{constructor(t,r,o){this._extensions=r||{},o&&(this._generateMask=o,this._maskBuffer=Buffer.alloc(4)),this._socket=t,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=lo,this.onerror=IV,this[CV]=void 0}static frame(t,r){let o,n=!1,i=2,s=!1;r.mask&&(o=r.maskBuffer||QV,r.generateMask?r.generateMask(o):(da===cd&&(Wi===void 0&&(Wi=Buffer.alloc(cd)),yV(Wi,0,cd),da=0),o[0]=Wi[da++],o[1]=Wi[da++],o[2]=Wi[da++],o[3]=Wi[da++]),s=(o[0]|o[1]|o[2]|o[3])===0,i=6);let a;typeof t=="string"?(!r.mask||s)&&r[Ur]!==void 0?a=r[Ur]:(t=Buffer.from(t),a=t.length):(a=t.length,n=r.mask&&r.readOnly&&!s);let l=a;a>=65536?(i+=8,l=127):a>125&&(i+=2,l=126);let c=Buffer.allocUnsafe(n?a+i:i);return c[0]=r.fin?r.opcode|128:r.opcode,r.rsv1&&(c[0]|=64),c[1]=l,l===126?c.writeUInt16BE(a,2):l===127&&(c[2]=c[3]=0,c.writeUIntBE(a,4,6)),r.mask?(c[1]|=128,c[i-4]=o[0],c[i-3]=o[1],c[i-2]=o[2],c[i-1]=o[3],s?[c,t]:n?(Ww(t,o,c,i,a),[c]):(Ww(t,o,t,0,a),[c,t])):[c,t]}close(t,r,o,n){let i;if(t===void 0)i=EV;else{if(typeof t!="number"||!BV(t))throw new TypeError("First argument must be a valid error code number");if(r===void 0||!r.length)i=Buffer.allocUnsafe(2),i.writeUInt16BE(t,0);else{let a=Buffer.byteLength(r);if(a>123)throw new RangeError("The message must not be greater than 123 bytes");i=Buffer.allocUnsafe(2+a),i.writeUInt16BE(t,0),typeof r=="string"?i.write(r,2):i.set(r,2)}}let s={[Ur]:i.length,fin:!0,generateMask:this._generateMask,mask:o,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};this._state!==lo?this.enqueue([this.dispatch,i,!1,s,n]):this.sendFrame(e.frame(i,s),n)}ping(t,r,o){let n,i;if(typeof t=="string"?(n=Buffer.byteLength(t),i=!1):ua(t)?(n=t.size,i=!1):(t=Yi(t),n=t.length,i=Yi.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Ur]:n,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};ua(t)?this._state!==lo?this.enqueue([this.getBlobData,t,!1,s,o]):this.getBlobData(t,!1,s,o):this._state!==lo?this.enqueue([this.dispatch,t,!1,s,o]):this.sendFrame(e.frame(t,s),o)}pong(t,r,o){let n,i;if(typeof t=="string"?(n=Buffer.byteLength(t),i=!1):ua(t)?(n=t.size,i=!1):(t=Yi(t),n=t.length,i=Yi.readOnly),n>125)throw new RangeError("The data size must not be greater than 125 bytes");let s={[Ur]:n,fin:!0,generateMask:this._generateMask,mask:r,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};ua(t)?this._state!==lo?this.enqueue([this.getBlobData,t,!1,s,o]):this.getBlobData(t,!1,s,o):this._state!==lo?this.enqueue([this.dispatch,t,!1,s,o]):this.sendFrame(e.frame(t,s),o)}send(t,r,o){let n=this._extensions[Yw.extensionName],i=r.binary?2:1,s=r.compress,a,l;typeof t=="string"?(a=Buffer.byteLength(t),l=!1):ua(t)?(a=t.size,l=!1):(t=Yi(t),a=t.length,l=Yi.readOnly),this._firstFragment?(this._firstFragment=!1,s&&n&&n.params[n._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(s=a>=n._threshold),this._compress=s):(s=!1,i=0),r.fin&&(this._firstFragment=!0);let c={[Ur]:a,fin:r.fin,generateMask:this._generateMask,mask:r.mask,maskBuffer:this._maskBuffer,opcode:i,readOnly:l,rsv1:s};ua(t)?this._state!==lo?this.enqueue([this.getBlobData,t,this._compress,c,o]):this.getBlobData(t,this._compress,c,o):this._state!==lo?this.enqueue([this.dispatch,t,this._compress,c,o]):this.dispatch(t,this._compress,c,o)}getBlobData(t,r,o,n){this._bufferedBytes+=o[Ur],this._state=wV,t.arrayBuffer().then(i=>{if(this._socket.destroyed){let a=new Error("The socket was closed while the blob was being read");process.nextTick(um,this,a,n);return}this._bufferedBytes-=o[Ur];let s=Yi(i);r?this.dispatch(s,r,o,n):(this._state=lo,this.sendFrame(e.frame(s,o),n),this.dequeue())}).catch(i=>{process.nextTick(SV,this,i,n)})}dispatch(t,r,o,n){if(!r){this.sendFrame(e.frame(t,o),n);return}let i=this._extensions[Yw.extensionName];this._bufferedBytes+=o[Ur],this._state=bV,i.compress(t,o.fin,(s,a)=>{if(this._socket.destroyed){let l=new Error("The socket was closed while data was being compressed");um(this,l,n);return}this._bufferedBytes-=o[Ur],this._state=lo,o.readOnly=!1,this.sendFrame(e.frame(a,o),n),this.dequeue()})}dequeue(){for(;this._state===lo&&this._queue.length;){let t=this._queue.shift();this._bufferedBytes-=t[3][Ur],Reflect.apply(t[0],this,t.slice(1))}}enqueue(t){this._bufferedBytes+=t[3][Ur],this._queue.push(t)}sendFrame(t,r){t.length===2?(this._socket.cork(),this._socket.write(t[0]),this._socket.write(t[1],r),this._socket.uncork()):this._socket.write(t[0],r)}};Jw.exports=Am;function um(e,t,r){typeof r=="function"&&r(t);for(let o=0;o<e._queue.length;o++){let n=e._queue[o],i=n[n.length-1];typeof i=="function"&&i(t)}}function SV(e,t,r){um(e,t,r),e.onerror(t)}});var oS=w((Zpe,rS)=>{"use strict";var{kForOnEventAttribute:uc,kListener:fm}=dn(),zw=Symbol("kCode"),$w=Symbol("kData"),Kw=Symbol("kError"),Zw=Symbol("kMessage"),Xw=Symbol("kReason"),fa=Symbol("kTarget"),eS=Symbol("kType"),tS=Symbol("kWasClean"),hn=class{constructor(t){this[fa]=null,this[eS]=t}get target(){return this[fa]}get type(){return this[eS]}};Object.defineProperty(hn.prototype,"target",{enumerable:!0});Object.defineProperty(hn.prototype,"type",{enumerable:!0});var Ji=class extends hn{constructor(t,r={}){super(t),this[zw]=r.code===void 0?0:r.code,this[Xw]=r.reason===void 0?"":r.reason,this[tS]=r.wasClean===void 0?!1:r.wasClean}get code(){return this[zw]}get reason(){return this[Xw]}get wasClean(){return this[tS]}};Object.defineProperty(Ji.prototype,"code",{enumerable:!0});Object.defineProperty(Ji.prototype,"reason",{enumerable:!0});Object.defineProperty(Ji.prototype,"wasClean",{enumerable:!0});var pa=class extends hn{constructor(t,r={}){super(t),this[Kw]=r.error===void 0?null:r.error,this[Zw]=r.message===void 0?"":r.message}get error(){return this[Kw]}get message(){return this[Zw]}};Object.defineProperty(pa.prototype,"error",{enumerable:!0});Object.defineProperty(pa.prototype,"message",{enumerable:!0});var dc=class extends hn{constructor(t,r={}){super(t),this[$w]=r.data===void 0?null:r.data}get data(){return this[$w]}};Object.defineProperty(dc.prototype,"data",{enumerable:!0});var TV={addEventListener(e,t,r={}){for(let n of this.listeners(e))if(!r[uc]&&n[fm]===t&&!n[uc])return;let o;if(e==="message")o=function(i,s){let a=new dc("message",{data:s?i:i.toString()});a[fa]=this,Ad(t,this,a)};else if(e==="close")o=function(i,s){let a=new Ji("close",{code:i,reason:s.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});a[fa]=this,Ad(t,this,a)};else if(e==="error")o=function(i){let s=new pa("error",{error:i,message:i.message});s[fa]=this,Ad(t,this,s)};else if(e==="open")o=function(){let i=new hn("open");i[fa]=this,Ad(t,this,i)};else return;o[uc]=!!r[uc],o[fm]=t,r.once?this.once(e,o):this.on(e,o)},removeEventListener(e,t){for(let r of this.listeners(e))if(r[fm]===t&&!r[uc]){this.removeListener(e,r);break}}};rS.exports={CloseEvent:Ji,ErrorEvent:pa,Event:hn,EventTarget:TV,MessageEvent:dc};function Ad(e,t,r){typeof e=="object"&&e.handleEvent?e.handleEvent.call(e,r):e.call(t,r)}});var pm=w((Xpe,nS)=>{"use strict";var{tokenChars:fc}=Aa();function Fo(e,t,r){e[t]===void 0?e[t]=[r]:e[t].push(r)}function xV(e){let t=Object.create(null),r=Object.create(null),o=!1,n=!1,i=!1,s,a,l=-1,c=-1,A=-1,d=0;for(;d<e.length;d++)if(c=e.charCodeAt(d),s===void 0)if(A===-1&&fc[c]===1)l===-1&&(l=d);else if(d!==0&&(c===32||c===9))A===-1&&l!==-1&&(A=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);A===-1&&(A=d);let u=e.slice(l,A);c===44?(Fo(t,u,r),r=Object.create(null)):s=u,l=A=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);else if(a===void 0)if(A===-1&&fc[c]===1)l===-1&&(l=d);else if(c===32||c===9)A===-1&&l!==-1&&(A=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);A===-1&&(A=d),Fo(r,e.slice(l,A),!0),c===44&&(Fo(t,s,r),r=Object.create(null),s=void 0),l=A=-1}else if(c===61&&l!==-1&&A===-1)a=e.slice(l,d),l=A=-1;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(n){if(fc[c]!==1)throw new SyntaxError(`Unexpected character at index ${d}`);l===-1?l=d:o||(o=!0),n=!1}else if(i)if(fc[c]===1)l===-1&&(l=d);else if(c===34&&l!==-1)i=!1,A=d;else if(c===92)n=!0;else throw new SyntaxError(`Unexpected character at index ${d}`);else if(c===34&&e.charCodeAt(d-1)===61)i=!0;else if(A===-1&&fc[c]===1)l===-1&&(l=d);else if(l!==-1&&(c===32||c===9))A===-1&&(A=d);else if(c===59||c===44){if(l===-1)throw new SyntaxError(`Unexpected character at index ${d}`);A===-1&&(A=d);let u=e.slice(l,A);o&&(u=u.replace(/\\/g,""),o=!1),Fo(r,a,u),c===44&&(Fo(t,s,r),r=Object.create(null),s=void 0),a=void 0,l=A=-1}else throw new SyntaxError(`Unexpected character at index ${d}`);if(l===-1||i||c===32||c===9)throw new SyntaxError("Unexpected end of input");A===-1&&(A=d);let f=e.slice(l,A);return s===void 0?Fo(t,f,r):(a===void 0?Fo(r,f,!0):o?Fo(r,a,f.replace(/\\/g,"")):Fo(r,a,f),Fo(t,s,r)),t}function RV(e){return Object.keys(e).map(t=>{let r=e[t];return Array.isArray(r)||(r=[r]),r.map(o=>[t].concat(Object.keys(o).map(n=>{let i=o[n];return Array.isArray(i)||(i=[i]),i.map(s=>s===!0?n:`${n}=${s}`).join("; ")})).join("; ")).join(", ")}).join(", ")}nS.exports={format:RV,parse:xV}});var Em=w((rhe,gS)=>{"use strict";var DV=v("events"),FV=v("https"),kV=v("http"),aS=v("net"),NV=v("tls"),{randomBytes:vV,createHash:PV}=v("crypto"),{Duplex:ehe,Readable:the}=v("stream"),{URL:hm}=v("url"),Kn=Ac(),LV=cm(),UV=dm(),{isBlob:OV}=Aa(),{BINARY_TYPES:iS,EMPTY_BUFFER:ud,GUID:MV,kForOnEventAttribute:gm,kListener:_V,kStatusCode:GV,kWebSocket:It,NOOP:lS}=dn(),{EventTarget:{addEventListener:jV,removeEventListener:HV}}=oS(),{format:VV,parse:qV}=pm(),{toBuffer:YV}=ac(),WV=30*1e3,cS=Symbol("kAborted"),mm=[8,13],gn=["CONNECTING","OPEN","CLOSING","CLOSED"],JV=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/,tt=class e extends DV{constructor(t,r,o){super(),this._binaryType=iS[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=ud,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=e.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,t!==null?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,r===void 0?r=[]:Array.isArray(r)||(typeof r=="object"&&r!==null?(o=r,r=[]):r=[r]),AS(this,t,r,o)):(this._autoPong=o.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(t){iS.includes(t)&&(this._binaryType=t,this._receiver&&(this._receiver._binaryType=t))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(t,r,o){let n=new LV({allowSynchronousEvents:o.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:o.maxPayload,skipUTF8Validation:o.skipUTF8Validation}),i=new UV(t,this._extensions,o.generateMask);this._receiver=n,this._sender=i,this._socket=t,n[It]=this,i[It]=this,t[It]=this,n.on("conclude",KV),n.on("drain",ZV),n.on("error",XV),n.on("message",eq),n.on("ping",tq),n.on("pong",rq),i.onerror=oq,t.setTimeout&&t.setTimeout(0),t.setNoDelay&&t.setNoDelay(),r.length>0&&t.unshift(r),t.on("close",fS),t.on("data",fd),t.on("end",pS),t.on("error",hS),this._readyState=e.OPEN,this.emit("open")}emitClose(){if(!this._socket){this._readyState=e.CLOSED,this.emit("close",this._closeCode,this._closeMessage);return}this._extensions[Kn.extensionName]&&this._extensions[Kn.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=e.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(t,r){if(this.readyState!==e.CLOSED){if(this.readyState===e.CONNECTING){Cr(this,this._req,"WebSocket was closed before the connection was established");return}if(this.readyState===e.CLOSING){this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end();return}this._readyState=e.CLOSING,this._sender.close(t,r,!this._isServer,o=>{o||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),dS(this)}}pause(){this.readyState===e.CONNECTING||this.readyState===e.CLOSED||(this._paused=!0,this._socket.pause())}ping(t,r,o){if(this.readyState===e.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(o=t,t=r=void 0):typeof r=="function"&&(o=r,r=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==e.OPEN){ym(this,t,o);return}r===void 0&&(r=!this._isServer),this._sender.ping(t||ud,r,o)}pong(t,r,o){if(this.readyState===e.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof t=="function"?(o=t,t=r=void 0):typeof r=="function"&&(o=r,r=void 0),typeof t=="number"&&(t=t.toString()),this.readyState!==e.OPEN){ym(this,t,o);return}r===void 0&&(r=!this._isServer),this._sender.pong(t||ud,r,o)}resume(){this.readyState===e.CONNECTING||this.readyState===e.CLOSED||(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(t,r,o){if(this.readyState===e.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if(typeof r=="function"&&(o=r,r={}),typeof t=="number"&&(t=t.toString()),this.readyState!==e.OPEN){ym(this,t,o);return}let n={binary:typeof t!="string",mask:!this._isServer,compress:!0,fin:!0,...r};this._extensions[Kn.extensionName]||(n.compress=!1),this._sender.send(t||ud,n,o)}terminate(){if(this.readyState!==e.CLOSED){if(this.readyState===e.CONNECTING){Cr(this,this._req,"WebSocket was closed before the connection was established");return}this._socket&&(this._readyState=e.CLOSING,this._socket.destroy())}}};Object.defineProperty(tt,"CONNECTING",{enumerable:!0,value:gn.indexOf("CONNECTING")});Object.defineProperty(tt.prototype,"CONNECTING",{enumerable:!0,value:gn.indexOf("CONNECTING")});Object.defineProperty(tt,"OPEN",{enumerable:!0,value:gn.indexOf("OPEN")});Object.defineProperty(tt.prototype,"OPEN",{enumerable:!0,value:gn.indexOf("OPEN")});Object.defineProperty(tt,"CLOSING",{enumerable:!0,value:gn.indexOf("CLOSING")});Object.defineProperty(tt.prototype,"CLOSING",{enumerable:!0,value:gn.indexOf("CLOSING")});Object.defineProperty(tt,"CLOSED",{enumerable:!0,value:gn.indexOf("CLOSED")});Object.defineProperty(tt.prototype,"CLOSED",{enumerable:!0,value:gn.indexOf("CLOSED")});["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(tt.prototype,e,{enumerable:!0})});["open","error","close","message"].forEach(e=>{Object.defineProperty(tt.prototype,`on${e}`,{enumerable:!0,get(){for(let t of this.listeners(e))if(t[gm])return t[_V];return null},set(t){for(let r of this.listeners(e))if(r[gm]){this.removeListener(e,r);break}typeof t=="function"&&this.addEventListener(e,t,{[gm]:!0})}})});tt.prototype.addEventListener=jV;tt.prototype.removeEventListener=HV;gS.exports=tt;function AS(e,t,r,o){let n={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:mm[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=n.autoPong,!mm.includes(n.protocolVersion))throw new RangeError(`Unsupported protocol version: ${n.protocolVersion} (supported versions: ${mm.join(", ")})`);let i;if(t instanceof hm)i=t;else try{i=new hm(t)}catch{throw new SyntaxError(`Invalid URL: ${t}`)}i.protocol==="http:"?i.protocol="ws:":i.protocol==="https:"&&(i.protocol="wss:"),e._url=i.href;let s=i.protocol==="wss:",a=i.protocol==="ws+unix:",l;if(i.protocol!=="ws:"&&!s&&!a?l=`The URL's protocol must be one of "ws:", "wss:", "http:", "https", or "ws+unix:"`:a&&!i.pathname?l="The URL's pathname is empty":i.hash&&(l="The URL contains a fragment identifier"),l){let h=new SyntaxError(l);if(e._redirects===0)throw h;dd(e,h);return}let c=s?443:80,A=vV(16).toString("base64"),d=s?FV.request:kV.request,f=new Set,u;if(n.createConnection=n.createConnection||(s?$V:zV),n.defaultPort=n.defaultPort||c,n.port=i.port||c,n.host=i.hostname.startsWith("[")?i.hostname.slice(1,-1):i.hostname,n.headers={...n.headers,"Sec-WebSocket-Version":n.protocolVersion,"Sec-WebSocket-Key":A,Connection:"Upgrade",Upgrade:"websocket"},n.path=i.pathname+i.search,n.timeout=n.handshakeTimeout,n.perMessageDeflate&&(u=new Kn(n.perMessageDeflate!==!0?n.perMessageDeflate:{},!1,n.maxPayload),n.headers["Sec-WebSocket-Extensions"]=VV({[Kn.extensionName]:u.offer()})),r.length){for(let h of r){if(typeof h!="string"||!JV.test(h)||f.has(h))throw new SyntaxError("An invalid or duplicated subprotocol was specified");f.add(h)}n.headers["Sec-WebSocket-Protocol"]=r.join(",")}if(n.origin&&(n.protocolVersion<13?n.headers["Sec-WebSocket-Origin"]=n.origin:n.headers.Origin=n.origin),(i.username||i.password)&&(n.auth=`${i.username}:${i.password}`),a){let h=n.path.split(":");n.socketPath=h[0],n.path=h[1]}let p;if(n.followRedirects){if(e._redirects===0){e._originalIpc=a,e._originalSecure=s,e._originalHostOrSocketPath=a?n.socketPath:i.host;let h=o&&o.headers;if(o={...o,headers:{}},h)for(let[g,m]of Object.entries(h))o.headers[g.toLowerCase()]=m}else if(e.listenerCount("redirect")===0){let h=a?e._originalIpc?n.socketPath===e._originalHostOrSocketPath:!1:e._originalIpc?!1:i.host===e._originalHostOrSocketPath;(!h||e._originalSecure&&!s)&&(delete n.headers.authorization,delete n.headers.cookie,h||delete n.headers.host,n.auth=void 0)}n.auth&&!o.headers.authorization&&(o.headers.authorization="Basic "+Buffer.from(n.auth).toString("base64")),p=e._req=d(n),e._redirects&&e.emit("redirect",e.url,p)}else p=e._req=d(n);n.timeout&&p.on("timeout",()=>{Cr(e,p,"Opening handshake has timed out")}),p.on("error",h=>{p===null||p[cS]||(p=e._req=null,dd(e,h))}),p.on("response",h=>{let g=h.headers.location,m=h.statusCode;if(g&&n.followRedirects&&m>=300&&m<400){if(++e._redirects>n.maxRedirects){Cr(e,p,"Maximum redirects exceeded");return}p.abort();let y;try{y=new hm(g,t)}catch{let I=new SyntaxError(`Invalid URL: ${g}`);dd(e,I);return}AS(e,y,r,o)}else e.emit("unexpected-response",p,h)||Cr(e,p,`Unexpected server response: ${h.statusCode}`)}),p.on("upgrade",(h,g,m)=>{if(e.emit("upgrade",h),e.readyState!==tt.CONNECTING)return;p=e._req=null;let y=h.headers.upgrade;if(y===void 0||y.toLowerCase()!=="websocket"){Cr(e,g,"Invalid Upgrade header");return}let E=PV("sha1").update(A+MV).digest("base64");if(h.headers["sec-websocket-accept"]!==E){Cr(e,g,"Invalid Sec-WebSocket-Accept header");return}let I=h.headers["sec-websocket-protocol"],C;if(I!==void 0?f.size?f.has(I)||(C="Server sent an invalid subprotocol"):C="Server sent a subprotocol but none was requested":f.size&&(C="Server sent no subprotocol"),C){Cr(e,g,C);return}I&&(e._protocol=I);let B=h.headers["sec-websocket-extensions"];if(B!==void 0){if(!u){Cr(e,g,"Server sent a Sec-WebSocket-Extensions header but no extension was requested");return}let R;try{R=qV(B)}catch{Cr(e,g,"Invalid Sec-WebSocket-Extensions header");return}let x=Object.keys(R);if(x.length!==1||x[0]!==Kn.extensionName){Cr(e,g,"Server indicated an extension that was not requested");return}try{u.accept(R[Kn.extensionName])}catch{Cr(e,g,"Invalid Sec-WebSocket-Extensions header");return}e._extensions[Kn.extensionName]=u}e.setSocket(g,m,{allowSynchronousEvents:n.allowSynchronousEvents,generateMask:n.generateMask,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation})}),n.finishRequest?n.finishRequest(p,e):p.end()}function dd(e,t){e._readyState=tt.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function zV(e){return e.path=e.socketPath,aS.connect(e)}function $V(e){return e.path=void 0,!e.servername&&e.servername!==""&&(e.servername=aS.isIP(e.host)?"":e.host),NV.connect(e)}function Cr(e,t,r){e._readyState=tt.CLOSING;let o=new Error(r);Error.captureStackTrace(o,Cr),t.setHeader?(t[cS]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick(dd,e,o)):(t.destroy(o),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function ym(e,t,r){if(t){let o=OV(t)?t.size:YV(t).length;e._socket?e._sender._bufferedBytes+=o:e._bufferedAmount+=o}if(r){let o=new Error(`WebSocket is not open: readyState ${e.readyState} (${gn[e.readyState]})`);process.nextTick(r,o)}}function KV(e,t){let r=this[It];r._closeFrameReceived=!0,r._closeMessage=t,r._closeCode=e,r._socket[It]!==void 0&&(r._socket.removeListener("data",fd),process.nextTick(uS,r._socket),e===1005?r.close():r.close(e,t))}function ZV(){let e=this[It];e.isPaused||e._socket.resume()}function XV(e){let t=this[It];t._socket[It]!==void 0&&(t._socket.removeListener("data",fd),process.nextTick(uS,t._socket),t.close(e[GV])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function sS(){this[It].emitClose()}function eq(e,t){this[It].emit("message",e,t)}function tq(e){let t=this[It];t._autoPong&&t.pong(e,!this._isServer,lS),t.emit("ping",e)}function rq(e){this[It].emit("pong",e)}function uS(e){e.resume()}function oq(e){let t=this[It];t.readyState!==tt.CLOSED&&(t.readyState===tt.OPEN&&(t._readyState=tt.CLOSING,dS(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function dS(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),WV)}function fS(){let e=this[It];this.removeListener("close",fS),this.removeListener("data",fd),this.removeListener("end",pS),e._readyState=tt.CLOSING;let t;!this._readableState.endEmitted&&!e._closeFrameReceived&&!e._receiver._writableState.errorEmitted&&(t=e._socket.read())!==null&&e._receiver.write(t),e._receiver.end(),this[It]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",sS),e._receiver.on("finish",sS))}function fd(e){this[It]._receiver.write(e)||this.pause()}function pS(){let e=this[It];e._readyState=tt.CLOSING,e._receiver.end(),this.end()}function hS(){let e=this[It];this.removeListener("error",hS),this.on("error",lS),e&&(e._readyState=tt.CLOSING,this.destroy())}});var yS=w((ohe,mS)=>{"use strict";var{tokenChars:nq}=Aa();function iq(e){let t=new Set,r=-1,o=-1,n=0;for(n;n<e.length;n++){let s=e.charCodeAt(n);if(o===-1&&nq[s]===1)r===-1&&(r=n);else if(n!==0&&(s===32||s===9))o===-1&&r!==-1&&(o=n);else if(s===44){if(r===-1)throw new SyntaxError(`Unexpected character at index ${n}`);o===-1&&(o=n);let a=e.slice(r,o);if(t.has(a))throw new SyntaxError(`The "${a}" subprotocol is duplicated`);t.add(a),r=o=-1}else throw new SyntaxError(`Unexpected character at index ${n}`)}if(r===-1||o!==-1)throw new SyntaxError("Unexpected end of input");let i=e.slice(r,n);if(t.has(i))throw new SyntaxError(`The "${i}" subprotocol is duplicated`);return t.add(i),t}mS.exports={parse:iq}});var wS=w((ihe,bS)=>{"use strict";var sq=v("events"),pd=v("http"),{Duplex:nhe}=v("stream"),{createHash:aq}=v("crypto"),ES=pm(),zi=Ac(),lq=yS(),cq=Em(),{GUID:Aq,kWebSocket:uq}=dn(),dq=/^[+/0-9A-Za-z]{22}==$/,CS=0,IS=1,QS=2,Cm=class extends sq{constructor(t,r){if(super(),t={allowSynchronousEvents:!0,autoPong:!0,maxPayload:100*1024*1024,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:cq,...t},t.port==null&&!t.server&&!t.noServer||t.port!=null&&(t.server||t.noServer)||t.server&&t.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(t.port!=null?(this._server=pd.createServer((o,n)=>{let i=pd.STATUS_CODES[426];n.writeHead(426,{"Content-Length":i.length,"Content-Type":"text/plain"}),n.end(i)}),this._server.listen(t.port,t.host,t.backlog,r)):t.server&&(this._server=t.server),this._server){let o=this.emit.bind(this,"connection");this._removeListeners=fq(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(n,i,s)=>{this.handleUpgrade(n,i,s,o)}})}t.perMessageDeflate===!0&&(t.perMessageDeflate={}),t.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=t,this._state=CS}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(t){if(this._state===QS){t&&this.once("close",()=>{t(new Error("The server is not running"))}),process.nextTick(pc,this);return}if(t&&this.once("close",t),this._state!==IS)if(this._state=IS,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients?this.clients.size?this._shouldEmitClose=!0:process.nextTick(pc,this):process.nextTick(pc,this);else{let r=this._server;this._removeListeners(),this._removeListeners=this._server=null,r.close(()=>{pc(this)})}}shouldHandle(t){if(this.options.path){let r=t.url.indexOf("?");if((r!==-1?t.url.slice(0,r):t.url)!==this.options.path)return!1}return!0}handleUpgrade(t,r,o,n){r.on("error",BS);let i=t.headers["sec-websocket-key"],s=t.headers.upgrade,a=+t.headers["sec-websocket-version"];if(t.method!=="GET"){$i(this,t,r,405,"Invalid HTTP method");return}if(s===void 0||s.toLowerCase()!=="websocket"){$i(this,t,r,400,"Invalid Upgrade header");return}if(i===void 0||!dq.test(i)){$i(this,t,r,400,"Missing or invalid Sec-WebSocket-Key header");return}if(a!==8&&a!==13){$i(this,t,r,400,"Missing or invalid Sec-WebSocket-Version header");return}if(!this.shouldHandle(t)){hc(r,400);return}let l=t.headers["sec-websocket-protocol"],c=new Set;if(l!==void 0)try{c=lq.parse(l)}catch{$i(this,t,r,400,"Invalid Sec-WebSocket-Protocol header");return}let A=t.headers["sec-websocket-extensions"],d={};if(this.options.perMessageDeflate&&A!==void 0){let f=new zi(this.options.perMessageDeflate,!0,this.options.maxPayload);try{let u=ES.parse(A);u[zi.extensionName]&&(f.accept(u[zi.extensionName]),d[zi.extensionName]=f)}catch{$i(this,t,r,400,"Invalid or unacceptable Sec-WebSocket-Extensions header");return}}if(this.options.verifyClient){let f={origin:t.headers[`${a===8?"sec-websocket-origin":"origin"}`],secure:!!(t.socket.authorized||t.socket.encrypted),req:t};if(this.options.verifyClient.length===2){this.options.verifyClient(f,(u,p,h,g)=>{if(!u)return hc(r,p||401,h,g);this.completeUpgrade(d,i,c,t,r,o,n)});return}if(!this.options.verifyClient(f))return hc(r,401)}this.completeUpgrade(d,i,c,t,r,o,n)}completeUpgrade(t,r,o,n,i,s,a){if(!i.readable||!i.writable)return i.destroy();if(i[uq])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>CS)return hc(i,503);let c=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${aq("sha1").update(r+Aq).digest("base64")}`],A=new this.options.WebSocket(null,void 0,this.options);if(o.size){let d=this.options.handleProtocols?this.options.handleProtocols(o,n):o.values().next().value;d&&(c.push(`Sec-WebSocket-Protocol: ${d}`),A._protocol=d)}if(t[zi.extensionName]){let d=t[zi.extensionName].params,f=ES.format({[zi.extensionName]:[d]});c.push(`Sec-WebSocket-Extensions: ${f}`),A._extensions=t}this.emit("headers",c,n),i.write(c.concat(`\r
`).join(`\r
`)),i.removeListener("error",BS),A.setSocket(i,s,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(A),A.on("close",()=>{this.clients.delete(A),this._shouldEmitClose&&!this.clients.size&&process.nextTick(pc,this)})),a(A,n)}};bS.exports=Cm;function fq(e,t){for(let r of Object.keys(t))e.on(r,t[r]);return function(){for(let o of Object.keys(t))e.removeListener(o,t[o])}}function pc(e){e._state=QS,e.emit("close")}function BS(){this.destroy()}function hc(e,t,r,o){r=r||pd.STATUS_CODES[t],o={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...o},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${pd.STATUS_CODES[t]}\r
`+Object.keys(o).map(n=>`${n}: ${o[n]}`).join(`\r
`)+`\r
\r
`+r)}function $i(e,t,r,o,n){if(e.listenerCount("wsClientError")){let i=new Error(n);Error.captureStackTrace(i,$i),e.emit("wsClientError",i,r,t)}else hc(r,o,n)}});var PS=w((Xge,vS)=>{"use strict";var Sq=function(){function e(r,o){if(typeof r!="function")throw new TypeError("DataLoader must be constructed with a function which accepts "+("Array<key> and returns Promise<Array<value>>, but got: "+r+"."));this._batchLoadFn=r,this._maxBatchSize=Dq(o),this._batchScheduleFn=Fq(o),this._cacheKeyFn=kq(o),this._cacheMap=Nq(o),this._batch=null,this.name=vq(o)}var t=e.prototype;return t.load=function(o){if(o==null)throw new TypeError("The loader.load() function must be called with a value, "+("but got: "+String(o)+"."));var n=xq(this),i=this._cacheMap,s;if(i){s=this._cacheKeyFn(o);var a=i.get(s);if(a){var l=n.cacheHits||(n.cacheHits=[]);return new Promise(function(A){l.push(function(){A(a)})})}}n.keys.push(o);var c=new Promise(function(A,d){n.callbacks.push({resolve:A,reject:d})});return i&&i.set(s,c),c},t.loadMany=function(o){if(!NS(o))throw new TypeError("The loader.loadMany() function must be called with Array<key> "+("but got: "+o+"."));for(var n=[],i=0;i<o.length;i++)n.push(this.load(o[i]).catch(function(s){return s}));return Promise.all(n)},t.clear=function(o){var n=this._cacheMap;if(n){var i=this._cacheKeyFn(o);n.delete(i)}return this},t.clearAll=function(){var o=this._cacheMap;return o&&o.clear(),this},t.prime=function(o,n){var i=this._cacheMap;if(i){var s=this._cacheKeyFn(o);if(i.get(s)===void 0){var a;n instanceof Error?(a=Promise.reject(n),a.catch(function(){})):a=Promise.resolve(n),i.set(s,a)}}return this},e}(),Tq=typeof process=="object"&&typeof process.nextTick=="function"?function(e){Qm||(Qm=Promise.resolve()),Qm.then(function(){process.nextTick(e)})}:typeof setImmediate=="function"?function(e){setImmediate(e)}:function(e){setTimeout(e)},Qm;function xq(e){var t=e._batch;if(t!==null&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;var r={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=r,e._batchScheduleFn(function(){Rq(e,r)}),r}function Rq(e,t){if(t.hasDispatched=!0,t.keys.length===0){wm(t);return}var r;try{r=e._batchLoadFn(t.keys)}catch(o){return bm(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function "+("errored synchronously: "+String(o)+".")))}if(!r||typeof r.then!="function")return bm(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise: "+String(r)+".")));r.then(function(o){if(!NS(o))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise of an Array: "+String(o)+"."));if(o.length!==t.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys."+(`

Keys:
`+String(t.keys))+(`

Values:
`+String(o)));wm(t);for(var n=0;n<t.callbacks.length;n++){var i=o[n];i instanceof Error?t.callbacks[n].reject(i):t.callbacks[n].resolve(i)}}).catch(function(o){bm(e,t,o)})}function bm(e,t,r){wm(t);for(var o=0;o<t.keys.length;o++)e.clear(t.keys[o]),t.callbacks[o].reject(r)}function wm(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function Dq(e){var t=!e||e.batch!==!1;if(!t)return 1;var r=e&&e.maxBatchSize;if(r===void 0)return 1/0;if(typeof r!="number"||r<1)throw new TypeError("maxBatchSize must be a positive number: "+r);return r}function Fq(e){var t=e&&e.batchScheduleFn;if(t===void 0)return Tq;if(typeof t!="function")throw new TypeError("batchScheduleFn must be a function: "+t);return t}function kq(e){var t=e&&e.cacheKeyFn;if(t===void 0)return function(r){return r};if(typeof t!="function")throw new TypeError("cacheKeyFn must be a function: "+t);return t}function Nq(e){var t=!e||e.cache!==!1;if(!t)return null;var r=e&&e.cacheMap;if(r===void 0)return new Map;if(r!==null){var o=["get","set","delete","clear"],n=o.filter(function(i){return r&&typeof r[i]!="function"});if(n.length!==0)throw new TypeError("Custom cacheMap missing methods: "+n.join(", "))}return r}function vq(e){return e&&e.name?e.name:null}function NS(e){return typeof e=="object"&&e!==null&&typeof e.length=="number"&&(e.length===0||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}vS.exports=Sq});var Sa=w((eme,GS)=>{"use strict";var Sm=Math.floor(Math.random()*16777215),LS=Ue.index=parseInt(Math.random()*16777215,10),US=(typeof process>"u"||typeof process.pid!="number"?Math.floor(Math.random()*1e5):process.pid)%65535,OS=(()=>{try{return _Buffer}catch{try{return Buffer}catch{return null}}})(),yd=function(e){return!!(e!=null&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))},_S=[];for(Zt=0;Zt<256;Zt++)_S[Zt]=(Zt<=15?"0":"")+Zt.toString(16);var Zt,MS=new RegExp("^[0-9a-fA-F]{24}$"),mc=[];Zt=0;for(;Zt<10;)mc[48+Zt]=Zt++;for(;Zt<16;)mc[55+Zt]=mc[87+Zt]=Zt++;function Ue(e){if(!(this instanceof Ue))return new Ue(e);if(e&&(e instanceof Ue||e._bsontype==="ObjectID"))return e;if(this._bsontype="ObjectID",e==null||typeof e=="number"){this.id=this.generate(e);return}var t=Ue.isValid(e);if(!t&&e!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(t&&typeof e=="string"&&e.length===24)return Ue.createFromHexString(e);if(e!=null&&e.length===12)this.id=e;else{if(e!=null&&typeof e.toHexString=="function")return e;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}}GS.exports=Ue;Ue.default=Ue;Ue.createFromTime=function(e){return e=parseInt(e,10)%4294967295,new Ue(Lq(8,e)+"0000000000000000")};Ue.createFromHexString=function(e){if(typeof e>"u"||e!=null&&e.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var t="",r=0;r<24;)t+=String.fromCharCode(mc[e.charCodeAt(r++)]<<4|mc[e.charCodeAt(r++)]);return new Ue(t)};Ue.isValid=function(e){return e==null?!1:typeof e=="number"?!0:typeof e=="string"?e.length===12||e.length===24&&MS.test(e):e instanceof Ue?!0:yd(e)?Ue.isValid(e.toString("hex")):typeof e.toHexString=="function"&&OS&&(e.id instanceof OS||typeof e.id=="string")?e.id.length===12||e.id.length===24&&MS.test(e.id):!1};Ue.prototype={constructor:Ue,toHexString:function(){if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id.length===24)return this.id;if(yd(this.id))return this.id.toString("hex");for(var e="",t=0;t<this.id.length;t++)e+=_S[this.id.charCodeAt(t)];return e},equals:function(e){return e instanceof Ue?this.toString()===e.toString():typeof e=="string"&&Ue.isValid(e)&&e.length===12&&yd(this.id)?e===this.id.toString("binary"):typeof e=="string"&&Ue.isValid(e)&&e.length===24?e.toLowerCase()===this.toHexString():typeof e=="string"&&Ue.isValid(e)&&e.length===12?e===this.id:e!=null&&(e instanceof Ue||e.toHexString)?e.toHexString()===this.toHexString():!1},getTimestamp:function(){var e=new Date,t;return yd(this.id)?t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24:t=this.id.charCodeAt(3)|this.id.charCodeAt(2)<<8|this.id.charCodeAt(1)<<16|this.id.charCodeAt(0)<<24,e.setTime(Math.floor(t)*1e3),e},generate:function(e){typeof e!="number"&&(e=~~(Date.now()/1e3)),e=parseInt(e,10)%4294967295;var t=Pq();return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255,Sm>>16&255,Sm>>8&255,Sm&255,US>>8&255,US&255,t>>16&255,t>>8&255,t&255)}};function Pq(){return LS=(LS+1)%16777215}function Lq(e,t){return t=t.toString(16),t.length===e?t:"00000000".substring(t.length,e)+t}var Uq=Symbol&&Symbol.for&&Symbol.for("nodejs.util.inspect.custom")||"inspect";Ue.prototype[Uq]=function(){return"ObjectID("+this+")"};Ue.prototype.toJSON=Ue.prototype.toHexString;Ue.prototype.toString=Ue.prototype.toHexString});var BT=w((OCe,IT)=>{"use strict";IT.exports=function(t,r){let o=t.length,n=0;for(let i=0;i<o;++i)n|=t[i]^r[i];return n===0}});var wT=w((MCe,bT)=>{"use strict";var QT=v("crypto"),bY=BT();bT.exports=function(t,r){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(r))throw new Error("Both scmp args must be Buffers");return t.length!==r.length?!1:QT.timingSafeEqual?QT.timingSafeEqual(t,r):bY(t,r)}});var Pc=w(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.regexpCode=Te.getEsmExportName=Te.getProperty=Te.safeStringify=Te.stringify=Te.strConcat=Te.addCodeArg=Te.str=Te._=Te.nil=Te._Code=Te.Name=Te.IDENTIFIER=Te._CodeOrName=void 0;var Nc=class{};Te._CodeOrName=Nc;Te.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var ls=class extends Nc{constructor(t){if(super(),!Te.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};Te.Name=ls;var _r=class extends Nc{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,o)=>`${r}${o}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,o)=>(o instanceof ls&&(r[o.str]=(r[o.str]||0)+1),r),{})}};Te._Code=_r;Te.nil=new _r("");function RT(e,...t){let r=[e[0]],o=0;for(;o<t.length;)qm(r,t[o]),r.push(e[++o]);return new _r(r)}Te._=RT;var Vm=new _r("+");function DT(e,...t){let r=[vc(e[0])],o=0;for(;o<t.length;)r.push(Vm),qm(r,t[o]),r.push(Vm,vc(e[++o]));return SY(r),new _r(r)}Te.str=DT;function qm(e,t){t instanceof _r?e.push(...t._items):t instanceof ls?e.push(t):e.push(RY(t))}Te.addCodeArg=qm;function SY(e){let t=1;for(;t<e.length-1;){if(e[t]===Vm){let r=TY(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function TY(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof ls||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof ls))return`"${e}${t.slice(1)}`}function xY(e,t){return t.emptyStr()?e:e.emptyStr()?t:DT`${e}${t}`}Te.strConcat=xY;function RY(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:vc(Array.isArray(e)?e.join(","):e)}function DY(e){return new _r(vc(e))}Te.stringify=DY;function vc(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}Te.safeStringify=vc;function FY(e){return typeof e=="string"&&Te.IDENTIFIER.test(e)?new _r(`.${e}`):RT`[${e}]`}Te.getProperty=FY;function kY(e){if(typeof e=="string"&&Te.IDENTIFIER.test(e))return new _r(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}Te.getEsmExportName=kY;function NY(e){return new _r(e.toString())}Te.regexpCode=NY});var Jm=w(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.ValueScope=tr.ValueScopeName=tr.Scope=tr.varKinds=tr.UsedValueState=void 0;var er=Pc(),Ym=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},Md;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(Md||(tr.UsedValueState=Md={}));tr.varKinds={const:new er.Name("const"),let:new er.Name("let"),var:new er.Name("var")};var _d=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof er.Name?t:this.name(t)}name(t){return new er.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,o;if(!((o=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||o===void 0)&&o.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};tr.Scope=_d;var Gd=class extends er.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:o}){this.value=t,this.scopePath=(0,er._)`.${new er.Name(r)}[${o}]`}};tr.ValueScopeName=Gd;var vY=(0,er._)`\n`,Wm=class extends _d{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?vY:er.nil}}get(){return this._scope}name(t){return new Gd(t,this._newName(t))}value(t,r){var o;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let n=this.toName(t),{prefix:i}=n,s=(o=r.key)!==null&&o!==void 0?o:r.ref,a=this._values[i];if(a){let A=a.get(s);if(A)return A}else a=this._values[i]=new Map;a.set(s,n);let l=this._scope[i]||(this._scope[i]=[]),c=l.length;return l[c]=r.ref,n.setValue(r,{property:i,itemIndex:c}),n}getValue(t,r){let o=this._values[t];if(o)return o.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,o=>{if(o.scopePath===void 0)throw new Error(`CodeGen: name "${o}" has no value`);return(0,er._)`${t}${o.scopePath}`})}scopeCode(t=this._values,r,o){return this._reduceValues(t,n=>{if(n.value===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return n.value.code},r,o)}_reduceValues(t,r,o={},n){let i=er.nil;for(let s in t){let a=t[s];if(!a)continue;let l=o[s]=o[s]||new Map;a.forEach(c=>{if(l.has(c))return;l.set(c,Md.Started);let A=r(c);if(A){let d=this.opts.es5?tr.varKinds.var:tr.varKinds.const;i=(0,er._)`${i}${d} ${c} = ${A};${this.opts._n}`}else if(A=n?.(c))i=(0,er._)`${i}${A}${this.opts._n}`;else throw new Ym(c);l.set(c,Md.Completed)})}return i}};tr.ValueScope=Wm});var me=w(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.or=ge.and=ge.not=ge.CodeGen=ge.operators=ge.varKinds=ge.ValueScopeName=ge.ValueScope=ge.Scope=ge.Name=ge.regexpCode=ge.stringify=ge.getProperty=ge.nil=ge.strConcat=ge.str=ge._=void 0;var Be=Pc(),Ao=Jm(),ri=Pc();Object.defineProperty(ge,"_",{enumerable:!0,get:function(){return ri._}});Object.defineProperty(ge,"str",{enumerable:!0,get:function(){return ri.str}});Object.defineProperty(ge,"strConcat",{enumerable:!0,get:function(){return ri.strConcat}});Object.defineProperty(ge,"nil",{enumerable:!0,get:function(){return ri.nil}});Object.defineProperty(ge,"getProperty",{enumerable:!0,get:function(){return ri.getProperty}});Object.defineProperty(ge,"stringify",{enumerable:!0,get:function(){return ri.stringify}});Object.defineProperty(ge,"regexpCode",{enumerable:!0,get:function(){return ri.regexpCode}});Object.defineProperty(ge,"Name",{enumerable:!0,get:function(){return ri.Name}});var qd=Jm();Object.defineProperty(ge,"Scope",{enumerable:!0,get:function(){return qd.Scope}});Object.defineProperty(ge,"ValueScope",{enumerable:!0,get:function(){return qd.ValueScope}});Object.defineProperty(ge,"ValueScopeName",{enumerable:!0,get:function(){return qd.ValueScopeName}});Object.defineProperty(ge,"varKinds",{enumerable:!0,get:function(){return qd.varKinds}});ge.operators={GT:new Be._Code(">"),GTE:new Be._Code(">="),LT:new Be._Code("<"),LTE:new Be._Code("<="),EQ:new Be._Code("==="),NEQ:new Be._Code("!=="),NOT:new Be._Code("!"),OR:new Be._Code("||"),AND:new Be._Code("&&"),ADD:new Be._Code("+")};var In=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},zm=class extends In{constructor(t,r,o){super(),this.varKind=t,this.name=r,this.rhs=o}render({es5:t,_n:r}){let o=t?Ao.varKinds.var:this.varKind,n=this.rhs===void 0?"":` = ${this.rhs}`;return`${o} ${this.name}${n};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=Na(this.rhs,t,r)),this}get names(){return this.rhs instanceof Be._CodeOrName?this.rhs.names:{}}},jd=class extends In{constructor(t,r,o){super(),this.lhs=t,this.rhs=r,this.sideEffects=o}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof Be.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Na(this.rhs,t,r),this}get names(){let t=this.lhs instanceof Be.Name?{}:{...this.lhs.names};return Vd(t,this.rhs)}},$m=class extends jd{constructor(t,r,o,n){super(t,o,n),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},Km=class extends In{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},Zm=class extends In{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},Xm=class extends In{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},ey=class extends In{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=Na(this.code,t,r),this}get names(){return this.code instanceof Be._CodeOrName?this.code.names:{}}},Lc=class extends In{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,o)=>r+o.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let o=t[r].optimizeNodes();Array.isArray(o)?t.splice(r,1,...o):o?t[r]=o:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:o}=this,n=o.length;for(;n--;){let i=o[n];i.optimizeNames(t,r)||(PY(t,i.names),o.splice(n,1))}return o.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>us(t,r.names),{})}},Bn=class extends Lc{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},ty=class extends Lc{},ka=class extends Bn{};ka.kind="else";var cs=class e extends Bn{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let o=r.optimizeNodes();r=this.else=Array.isArray(o)?new ka(o):o}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(FT(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var o;if(this.else=(o=this.else)===null||o===void 0?void 0:o.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=Na(this.condition,t,r),this}get names(){let t=super.names;return Vd(t,this.condition),this.else&&us(t,this.else.names),t}};cs.kind="if";var As=class extends Bn{};As.kind="for";var ry=class extends As{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=Na(this.iteration,t,r),this}get names(){return us(super.names,this.iteration.names)}},oy=class extends As{constructor(t,r,o,n){super(),this.varKind=t,this.name=r,this.from=o,this.to=n}render(t){let r=t.es5?Ao.varKinds.var:this.varKind,{name:o,from:n,to:i}=this;return`for(${r} ${o}=${n}; ${o}<${i}; ${o}++)`+super.render(t)}get names(){let t=Vd(super.names,this.from);return Vd(t,this.to)}},Hd=class extends As{constructor(t,r,o,n){super(),this.loop=t,this.varKind=r,this.name=o,this.iterable=n}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=Na(this.iterable,t,r),this}get names(){return us(super.names,this.iterable.names)}},Uc=class extends Bn{constructor(t,r,o){super(),this.name=t,this.args=r,this.async=o}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};Uc.kind="func";var Oc=class extends Lc{render(t){return"return "+super.render(t)}};Oc.kind="return";var ny=class extends Bn{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var o,n;return super.optimizeNames(t,r),(o=this.catch)===null||o===void 0||o.optimizeNames(t,r),(n=this.finally)===null||n===void 0||n.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&us(t,this.catch.names),this.finally&&us(t,this.finally.names),t}},Mc=class extends Bn{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};Mc.kind="catch";var _c=class extends Bn{render(t){return"finally"+super.render(t)}};_c.kind="finally";var iy=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new Ao.Scope({parent:t}),this._nodes=[new ty]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let o=this._extScope.value(t,r);return(this._values[o.prefix]||(this._values[o.prefix]=new Set)).add(o),o}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,o,n){let i=this._scope.toName(r);return o!==void 0&&n&&(this._constants[i.str]=o),this._leafNode(new zm(t,i,o)),i}const(t,r,o){return this._def(Ao.varKinds.const,t,r,o)}let(t,r,o){return this._def(Ao.varKinds.let,t,r,o)}var(t,r,o){return this._def(Ao.varKinds.var,t,r,o)}assign(t,r,o){return this._leafNode(new jd(t,r,o))}add(t,r){return this._leafNode(new $m(t,ge.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==Be.nil&&this._leafNode(new ey(t)),this}object(...t){let r=["{"];for(let[o,n]of t)r.length>1&&r.push(","),r.push(o),(o!==n||this.opts.es5)&&(r.push(":"),(0,Be.addCodeArg)(r,n));return r.push("}"),new Be._Code(r)}if(t,r,o){if(this._blockNode(new cs(t)),r&&o)this.code(r).else().code(o).endIf();else if(r)this.code(r).endIf();else if(o)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new cs(t))}else(){return this._elseNode(new ka)}endIf(){return this._endBlockNode(cs,ka)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new ry(t),r)}forRange(t,r,o,n,i=this.opts.es5?Ao.varKinds.var:Ao.varKinds.let){let s=this._scope.toName(t);return this._for(new oy(i,s,r,o),()=>n(s))}forOf(t,r,o,n=Ao.varKinds.const){let i=this._scope.toName(t);if(this.opts.es5){let s=r instanceof Be.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,Be._)`${s}.length`,a=>{this.var(i,(0,Be._)`${s}[${a}]`),o(i)})}return this._for(new Hd("of",n,i,r),()=>o(i))}forIn(t,r,o,n=this.opts.es5?Ao.varKinds.var:Ao.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,Be._)`Object.keys(${r})`,o);let i=this._scope.toName(t);return this._for(new Hd("in",n,i,r),()=>o(i))}endFor(){return this._endBlockNode(As)}label(t){return this._leafNode(new Km(t))}break(t){return this._leafNode(new Zm(t))}return(t){let r=new Oc;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(Oc)}try(t,r,o){if(!r&&!o)throw new Error('CodeGen: "try" without "catch" and "finally"');let n=new ny;if(this._blockNode(n),this.code(t),r){let i=this.name("e");this._currNode=n.catch=new Mc(i),r(i)}return o&&(this._currNode=n.finally=new _c,this.code(o)),this._endBlockNode(Mc,_c)}throw(t){return this._leafNode(new Xm(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let o=this._nodes.length-r;if(o<0||t!==void 0&&o!==t)throw new Error(`CodeGen: wrong number of nodes: ${o} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=Be.nil,o,n){return this._blockNode(new Uc(t,r,o)),n&&this.code(n).endFunc(),this}endFunc(){return this._endBlockNode(Uc)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let o=this._currNode;if(o instanceof t||r&&o instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof cs))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};ge.CodeGen=iy;function us(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function Vd(e,t){return t instanceof Be._CodeOrName?us(e,t.names):e}function Na(e,t,r){if(e instanceof Be.Name)return o(e);if(!n(e))return e;return new Be._Code(e._items.reduce((i,s)=>(s instanceof Be.Name&&(s=o(s)),s instanceof Be._Code?i.push(...s._items):i.push(s),i),[]));function o(i){let s=r[i.str];return s===void 0||t[i.str]!==1?i:(delete t[i.str],s)}function n(i){return i instanceof Be._Code&&i._items.some(s=>s instanceof Be.Name&&t[s.str]===1&&r[s.str]!==void 0)}}function PY(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function FT(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,Be._)`!${sy(e)}`}ge.not=FT;var LY=kT(ge.operators.AND);function UY(...e){return e.reduce(LY)}ge.and=UY;var OY=kT(ge.operators.OR);function MY(...e){return e.reduce(OY)}ge.or=MY;function kT(e){return(t,r)=>t===Be.nil?r:r===Be.nil?t:(0,Be._)`${sy(t)} ${e} ${sy(r)}`}function sy(e){return e instanceof Be.Name?e:(0,Be._)`(${e})`}});var xe=w(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.checkStrictMode=ye.getErrorPath=ye.Type=ye.useFunc=ye.setEvaluated=ye.evaluatedPropsToName=ye.mergeEvaluated=ye.eachItem=ye.unescapeJsonPointer=ye.escapeJsonPointer=ye.escapeFragment=ye.unescapeFragment=ye.schemaRefOrVal=ye.schemaHasRulesButRef=ye.schemaHasRules=ye.checkUnknownRules=ye.alwaysValidSchema=ye.toHash=void 0;var qe=me(),_Y=Pc();function GY(e){let t={};for(let r of e)t[r]=!0;return t}ye.toHash=GY;function jY(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(PT(e,t),!LT(t,e.self.RULES.all))}ye.alwaysValidSchema=jY;function PT(e,t=e.schema){let{opts:r,self:o}=e;if(!r.strictSchema||typeof t=="boolean")return;let n=o.RULES.keywords;for(let i in t)n[i]||MT(e,`unknown keyword: "${i}"`)}ye.checkUnknownRules=PT;function LT(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}ye.schemaHasRules=LT;function HY(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}ye.schemaHasRulesButRef=HY;function VY({topSchemaRef:e,schemaPath:t},r,o,n){if(!n){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,qe._)`${r}`}return(0,qe._)`${e}${t}${(0,qe.getProperty)(o)}`}ye.schemaRefOrVal=VY;function qY(e){return UT(decodeURIComponent(e))}ye.unescapeFragment=qY;function YY(e){return encodeURIComponent(ly(e))}ye.escapeFragment=YY;function ly(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}ye.escapeJsonPointer=ly;function UT(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}ye.unescapeJsonPointer=UT;function WY(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}ye.eachItem=WY;function NT({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:o}){return(n,i,s,a)=>{let l=s===void 0?i:s instanceof qe.Name?(i instanceof qe.Name?e(n,i,s):t(n,i,s),s):i instanceof qe.Name?(t(n,s,i),i):r(i,s);return a===qe.Name&&!(l instanceof qe.Name)?o(n,l):l}}ye.mergeEvaluated={props:NT({mergeNames:(e,t,r)=>e.if((0,qe._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,qe._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,qe._)`${r} || {}`).code((0,qe._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,qe._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,qe._)`${r} || {}`),cy(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:OT}),items:NT({mergeNames:(e,t,r)=>e.if((0,qe._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,qe._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,qe._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,qe._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function OT(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,qe._)`{}`);return t!==void 0&&cy(e,r,t),r}ye.evaluatedPropsToName=OT;function cy(e,t,r){Object.keys(r).forEach(o=>e.assign((0,qe._)`${t}${(0,qe.getProperty)(o)}`,!0))}ye.setEvaluated=cy;var vT={};function JY(e,t){return e.scopeValue("func",{ref:t,code:vT[t.code]||(vT[t.code]=new _Y._Code(t.code))})}ye.useFunc=JY;var ay;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(ay||(ye.Type=ay={}));function zY(e,t,r){if(e instanceof qe.Name){let o=t===ay.Num;return r?o?(0,qe._)`"[" + ${e} + "]"`:(0,qe._)`"['" + ${e} + "']"`:o?(0,qe._)`"/" + ${e}`:(0,qe._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,qe.getProperty)(e).toString():"/"+ly(e)}ye.getErrorPath=zY;function MT(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}ye.checkStrictMode=MT});var Qn=w(Ay=>{"use strict";Object.defineProperty(Ay,"__esModule",{value:!0});var Lt=me(),$Y={data:new Lt.Name("data"),valCxt:new Lt.Name("valCxt"),instancePath:new Lt.Name("instancePath"),parentData:new Lt.Name("parentData"),parentDataProperty:new Lt.Name("parentDataProperty"),rootData:new Lt.Name("rootData"),dynamicAnchors:new Lt.Name("dynamicAnchors"),vErrors:new Lt.Name("vErrors"),errors:new Lt.Name("errors"),this:new Lt.Name("this"),self:new Lt.Name("self"),scope:new Lt.Name("scope"),json:new Lt.Name("json"),jsonPos:new Lt.Name("jsonPos"),jsonLen:new Lt.Name("jsonLen"),jsonPart:new Lt.Name("jsonPart")};Ay.default=$Y});var Gc=w(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.extendErrors=Ut.resetErrorsCount=Ut.reportExtraError=Ut.reportError=Ut.keyword$DataError=Ut.keywordError=void 0;var we=me(),Yd=xe(),Wt=Qn();Ut.keywordError={message:({keyword:e})=>(0,we.str)`must pass "${e}" keyword validation`};Ut.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,we.str)`"${e}" keyword must be ${t} ($data)`:(0,we.str)`"${e}" keyword is invalid ($data)`};function KY(e,t=Ut.keywordError,r,o){let{it:n}=e,{gen:i,compositeRule:s,allErrors:a}=n,l=jT(e,t,r);o??(s||a)?_T(i,l):GT(n,(0,we._)`[${l}]`)}Ut.reportError=KY;function ZY(e,t=Ut.keywordError,r){let{it:o}=e,{gen:n,compositeRule:i,allErrors:s}=o,a=jT(e,t,r);_T(n,a),i||s||GT(o,Wt.default.vErrors)}Ut.reportExtraError=ZY;function XY(e,t){e.assign(Wt.default.errors,t),e.if((0,we._)`${Wt.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,we._)`${Wt.default.vErrors}.length`,t),()=>e.assign(Wt.default.vErrors,null)))}Ut.resetErrorsCount=XY;function eW({gen:e,keyword:t,schemaValue:r,data:o,errsCount:n,it:i}){if(n===void 0)throw new Error("ajv implementation error");let s=e.name("err");e.forRange("i",n,Wt.default.errors,a=>{e.const(s,(0,we._)`${Wt.default.vErrors}[${a}]`),e.if((0,we._)`${s}.instancePath === undefined`,()=>e.assign((0,we._)`${s}.instancePath`,(0,we.strConcat)(Wt.default.instancePath,i.errorPath))),e.assign((0,we._)`${s}.schemaPath`,(0,we.str)`${i.errSchemaPath}/${t}`),i.opts.verbose&&(e.assign((0,we._)`${s}.schema`,r),e.assign((0,we._)`${s}.data`,o))})}Ut.extendErrors=eW;function _T(e,t){let r=e.const("err",t);e.if((0,we._)`${Wt.default.vErrors} === null`,()=>e.assign(Wt.default.vErrors,(0,we._)`[${r}]`),(0,we._)`${Wt.default.vErrors}.push(${r})`),e.code((0,we._)`${Wt.default.errors}++`)}function GT(e,t){let{gen:r,validateName:o,schemaEnv:n}=e;n.$async?r.throw((0,we._)`new ${e.ValidationError}(${t})`):(r.assign((0,we._)`${o}.errors`,t),r.return(!1))}var ds={keyword:new we.Name("keyword"),schemaPath:new we.Name("schemaPath"),params:new we.Name("params"),propertyName:new we.Name("propertyName"),message:new we.Name("message"),schema:new we.Name("schema"),parentSchema:new we.Name("parentSchema")};function jT(e,t,r){let{createErrors:o}=e.it;return o===!1?(0,we._)`{}`:tW(e,t,r)}function tW(e,t,r={}){let{gen:o,it:n}=e,i=[rW(n,r),oW(e,r)];return nW(e,t,i),o.object(...i)}function rW({errorPath:e},{instancePath:t}){let r=t?(0,we.str)`${e}${(0,Yd.getErrorPath)(t,Yd.Type.Str)}`:e;return[Wt.default.instancePath,(0,we.strConcat)(Wt.default.instancePath,r)]}function oW({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:o}){let n=o?t:(0,we.str)`${t}/${e}`;return r&&(n=(0,we.str)`${n}${(0,Yd.getErrorPath)(r,Yd.Type.Str)}`),[ds.schemaPath,n]}function nW(e,{params:t,message:r},o){let{keyword:n,data:i,schemaValue:s,it:a}=e,{opts:l,propertyName:c,topSchemaRef:A,schemaPath:d}=a;o.push([ds.keyword,n],[ds.params,typeof t=="function"?t(e):t||(0,we._)`{}`]),l.messages&&o.push([ds.message,typeof r=="function"?r(e):r]),l.verbose&&o.push([ds.schema,s],[ds.parentSchema,(0,we._)`${A}${d}`],[Wt.default.data,i]),c&&o.push([ds.propertyName,c])}});var VT=w(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.boolOrEmptySchema=va.topBoolOrEmptySchema=void 0;var iW=Gc(),sW=me(),aW=Qn(),lW={message:"boolean schema is false"};function cW(e){let{gen:t,schema:r,validateName:o}=e;r===!1?HT(e,!1):typeof r=="object"&&r.$async===!0?t.return(aW.default.data):(t.assign((0,sW._)`${o}.errors`,null),t.return(!0))}va.topBoolOrEmptySchema=cW;function AW(e,t){let{gen:r,schema:o}=e;o===!1?(r.var(t,!1),HT(e)):r.var(t,!0)}va.boolOrEmptySchema=AW;function HT(e,t){let{gen:r,data:o}=e,n={gen:r,keyword:"false schema",data:o,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,iW.reportError)(n,lW,void 0,t)}});var uy=w(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.getRules=Pa.isJSONType=void 0;var uW=["string","number","integer","boolean","null","object","array"],dW=new Set(uW);function fW(e){return typeof e=="string"&&dW.has(e)}Pa.isJSONType=fW;function pW(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Pa.getRules=pW});var dy=w(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.shouldUseRule=oi.shouldUseGroup=oi.schemaHasRulesForType=void 0;function hW({schema:e,self:t},r){let o=t.RULES.types[r];return o&&o!==!0&&qT(e,o)}oi.schemaHasRulesForType=hW;function qT(e,t){return t.rules.some(r=>YT(e,r))}oi.shouldUseGroup=qT;function YT(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(o=>e[o]!==void 0))}oi.shouldUseRule=YT});var jc=w(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.reportTypeError=Ot.checkDataTypes=Ot.checkDataType=Ot.coerceAndCheckDataType=Ot.getJSONTypes=Ot.getSchemaTypes=Ot.DataType=void 0;var gW=uy(),mW=dy(),yW=Gc(),fe=me(),WT=xe(),La;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(La||(Ot.DataType=La={}));function EW(e){let t=JT(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Ot.getSchemaTypes=EW;function JT(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(gW.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Ot.getJSONTypes=JT;function CW(e,t){let{gen:r,data:o,opts:n}=e,i=IW(t,n.coerceTypes),s=t.length>0&&!(i.length===0&&t.length===1&&(0,mW.schemaHasRulesForType)(e,t[0]));if(s){let a=py(t,o,n.strictNumbers,La.Wrong);r.if(a,()=>{i.length?BW(e,t,i):hy(e)})}return s}Ot.coerceAndCheckDataType=CW;var zT=new Set(["string","number","integer","boolean","null"]);function IW(e,t){return t?e.filter(r=>zT.has(r)||t==="array"&&r==="array"):[]}function BW(e,t,r){let{gen:o,data:n,opts:i}=e,s=o.let("dataType",(0,fe._)`typeof ${n}`),a=o.let("coerced",(0,fe._)`undefined`);i.coerceTypes==="array"&&o.if((0,fe._)`${s} == 'object' && Array.isArray(${n}) && ${n}.length == 1`,()=>o.assign(n,(0,fe._)`${n}[0]`).assign(s,(0,fe._)`typeof ${n}`).if(py(t,n,i.strictNumbers),()=>o.assign(a,n))),o.if((0,fe._)`${a} !== undefined`);for(let c of r)(zT.has(c)||c==="array"&&i.coerceTypes==="array")&&l(c);o.else(),hy(e),o.endIf(),o.if((0,fe._)`${a} !== undefined`,()=>{o.assign(n,a),QW(e,a)});function l(c){switch(c){case"string":o.elseIf((0,fe._)`${s} == "number" || ${s} == "boolean"`).assign(a,(0,fe._)`"" + ${n}`).elseIf((0,fe._)`${n} === null`).assign(a,(0,fe._)`""`);return;case"number":o.elseIf((0,fe._)`${s} == "boolean" || ${n} === null
              || (${s} == "string" && ${n} && ${n} == +${n})`).assign(a,(0,fe._)`+${n}`);return;case"integer":o.elseIf((0,fe._)`${s} === "boolean" || ${n} === null
              || (${s} === "string" && ${n} && ${n} == +${n} && !(${n} % 1))`).assign(a,(0,fe._)`+${n}`);return;case"boolean":o.elseIf((0,fe._)`${n} === "false" || ${n} === 0 || ${n} === null`).assign(a,!1).elseIf((0,fe._)`${n} === "true" || ${n} === 1`).assign(a,!0);return;case"null":o.elseIf((0,fe._)`${n} === "" || ${n} === 0 || ${n} === false`),o.assign(a,null);return;case"array":o.elseIf((0,fe._)`${s} === "string" || ${s} === "number"
              || ${s} === "boolean" || ${n} === null`).assign(a,(0,fe._)`[${n}]`)}}}function QW({gen:e,parentData:t,parentDataProperty:r},o){e.if((0,fe._)`${t} !== undefined`,()=>e.assign((0,fe._)`${t}[${r}]`,o))}function fy(e,t,r,o=La.Correct){let n=o===La.Correct?fe.operators.EQ:fe.operators.NEQ,i;switch(e){case"null":return(0,fe._)`${t} ${n} null`;case"array":i=(0,fe._)`Array.isArray(${t})`;break;case"object":i=(0,fe._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=s((0,fe._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=s();break;default:return(0,fe._)`typeof ${t} ${n} ${e}`}return o===La.Correct?i:(0,fe.not)(i);function s(a=fe.nil){return(0,fe.and)((0,fe._)`typeof ${t} == "number"`,a,r?(0,fe._)`isFinite(${t})`:fe.nil)}}Ot.checkDataType=fy;function py(e,t,r,o){if(e.length===1)return fy(e[0],t,r,o);let n,i=(0,WT.toHash)(e);if(i.array&&i.object){let s=(0,fe._)`typeof ${t} != "object"`;n=i.null?s:(0,fe._)`!${t} || ${s}`,delete i.null,delete i.array,delete i.object}else n=fe.nil;i.number&&delete i.integer;for(let s in i)n=(0,fe.and)(n,fy(s,t,r,o));return n}Ot.checkDataTypes=py;var bW={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,fe._)`{type: ${e}}`:(0,fe._)`{type: ${t}}`};function hy(e){let t=wW(e);(0,yW.reportError)(t,bW)}Ot.reportTypeError=hy;function wW(e){let{gen:t,data:r,schema:o}=e,n=(0,WT.schemaRefOrVal)(e,o,"type");return{gen:t,keyword:"type",data:r,schema:o.type,schemaCode:n,schemaValue:n,parentSchema:o,params:{},it:e}}});var KT=w(Wd=>{"use strict";Object.defineProperty(Wd,"__esModule",{value:!0});Wd.assignDefaults=void 0;var Ua=me(),SW=xe();function TW(e,t){let{properties:r,items:o}=e.schema;if(t==="object"&&r)for(let n in r)$T(e,n,r[n].default);else t==="array"&&Array.isArray(o)&&o.forEach((n,i)=>$T(e,i,n.default))}Wd.assignDefaults=TW;function $T(e,t,r){let{gen:o,compositeRule:n,data:i,opts:s}=e;if(r===void 0)return;let a=(0,Ua._)`${i}${(0,Ua.getProperty)(t)}`;if(n){(0,SW.checkStrictMode)(e,`default is ignored for: ${a}`);return}let l=(0,Ua._)`${a} === undefined`;s.useDefaults==="empty"&&(l=(0,Ua._)`${l} || ${a} === null || ${a} === ""`),o.if(l,(0,Ua._)`${a} = ${(0,Ua.stringify)(r)}`)}});var Gr=w(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.validateUnion=Oe.validateArray=Oe.usePattern=Oe.callValidateCode=Oe.schemaProperties=Oe.allSchemaProperties=Oe.noPropertyInData=Oe.propertyInData=Oe.isOwnProperty=Oe.hasPropFunc=Oe.reportMissingProp=Oe.checkMissingProp=Oe.checkReportMissingProp=void 0;var Ze=me(),gy=xe(),ni=Qn(),xW=xe();function RW(e,t){let{gen:r,data:o,it:n}=e;r.if(yy(r,o,t,n.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Ze._)`${t}`},!0),e.error()})}Oe.checkReportMissingProp=RW;function DW({gen:e,data:t,it:{opts:r}},o,n){return(0,Ze.or)(...o.map(i=>(0,Ze.and)(yy(e,t,i,r.ownProperties),(0,Ze._)`${n} = ${i}`)))}Oe.checkMissingProp=DW;function FW(e,t){e.setParams({missingProperty:t},!0),e.error()}Oe.reportMissingProp=FW;function ZT(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Ze._)`Object.prototype.hasOwnProperty`})}Oe.hasPropFunc=ZT;function my(e,t,r){return(0,Ze._)`${ZT(e)}.call(${t}, ${r})`}Oe.isOwnProperty=my;function kW(e,t,r,o){let n=(0,Ze._)`${t}${(0,Ze.getProperty)(r)} !== undefined`;return o?(0,Ze._)`${n} && ${my(e,t,r)}`:n}Oe.propertyInData=kW;function yy(e,t,r,o){let n=(0,Ze._)`${t}${(0,Ze.getProperty)(r)} === undefined`;return o?(0,Ze.or)(n,(0,Ze.not)(my(e,t,r))):n}Oe.noPropertyInData=yy;function XT(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Oe.allSchemaProperties=XT;function NW(e,t){return XT(t).filter(r=>!(0,gy.alwaysValidSchema)(e,t[r]))}Oe.schemaProperties=NW;function vW({schemaCode:e,data:t,it:{gen:r,topSchemaRef:o,schemaPath:n,errorPath:i},it:s},a,l,c){let A=c?(0,Ze._)`${e}, ${t}, ${o}${n}`:t,d=[[ni.default.instancePath,(0,Ze.strConcat)(ni.default.instancePath,i)],[ni.default.parentData,s.parentData],[ni.default.parentDataProperty,s.parentDataProperty],[ni.default.rootData,ni.default.rootData]];s.opts.dynamicRef&&d.push([ni.default.dynamicAnchors,ni.default.dynamicAnchors]);let f=(0,Ze._)`${A}, ${r.object(...d)}`;return l!==Ze.nil?(0,Ze._)`${a}.call(${l}, ${f})`:(0,Ze._)`${a}(${f})`}Oe.callValidateCode=vW;var PW=(0,Ze._)`new RegExp`;function LW({gen:e,it:{opts:t}},r){let o=t.unicodeRegExp?"u":"",{regExp:n}=t.code,i=n(r,o);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Ze._)`${n.code==="new RegExp"?PW:(0,xW.useFunc)(e,n)}(${r}, ${o})`})}Oe.usePattern=LW;function UW(e){let{gen:t,data:r,keyword:o,it:n}=e,i=t.name("valid");if(n.allErrors){let a=t.let("valid",!0);return s(()=>t.assign(a,!1)),a}return t.var(i,!0),s(()=>t.break()),i;function s(a){let l=t.const("len",(0,Ze._)`${r}.length`);t.forRange("i",0,l,c=>{e.subschema({keyword:o,dataProp:c,dataPropType:gy.Type.Num},i),t.if((0,Ze.not)(i),a)})}}Oe.validateArray=UW;function OW(e){let{gen:t,schema:r,keyword:o,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,gy.alwaysValidSchema)(n,l))&&!n.opts.unevaluated)return;let s=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((l,c)=>{let A=e.subschema({keyword:o,schemaProp:c,compositeRule:!0},a);t.assign(s,(0,Ze._)`${s} || ${a}`),e.mergeValidEvaluated(A,a)||t.if((0,Ze.not)(s))})),e.result(s,()=>e.reset(),()=>e.error(!0))}Oe.validateUnion=OW});var rx=w(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.validateKeywordUsage=Po.validSchemaType=Po.funcKeywordCode=Po.macroKeywordCode=void 0;var Jt=me(),fs=Qn(),MW=Gr(),_W=Gc();function GW(e,t){let{gen:r,keyword:o,schema:n,parentSchema:i,it:s}=e,a=t.macro.call(s.self,n,i,s),l=tx(r,o,a);s.opts.validateSchema!==!1&&s.self.validateSchema(a,!0);let c=r.name("valid");e.subschema({schema:a,schemaPath:Jt.nil,errSchemaPath:`${s.errSchemaPath}/${o}`,topSchemaRef:l,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}Po.macroKeywordCode=GW;function jW(e,t){var r;let{gen:o,keyword:n,schema:i,parentSchema:s,$data:a,it:l}=e;VW(l,t);let c=!a&&t.compile?t.compile.call(l.self,i,s,l):t.validate,A=tx(o,n,c),d=o.let("valid");e.block$data(d,f),e.ok((r=t.valid)!==null&&r!==void 0?r:d);function f(){if(t.errors===!1)h(),t.modifying&&ex(e),g(()=>e.error());else{let m=t.async?u():p();t.modifying&&ex(e),g(()=>HW(e,m))}}function u(){let m=o.let("ruleErrs",null);return o.try(()=>h((0,Jt._)`await `),y=>o.assign(d,!1).if((0,Jt._)`${y} instanceof ${l.ValidationError}`,()=>o.assign(m,(0,Jt._)`${y}.errors`),()=>o.throw(y))),m}function p(){let m=(0,Jt._)`${A}.errors`;return o.assign(m,null),h(Jt.nil),m}function h(m=t.async?(0,Jt._)`await `:Jt.nil){let y=l.opts.passContext?fs.default.this:fs.default.self,E=!("compile"in t&&!a||t.schema===!1);o.assign(d,(0,Jt._)`${m}${(0,MW.callValidateCode)(e,A,y,E)}`,t.modifying)}function g(m){var y;o.if((0,Jt.not)((y=t.valid)!==null&&y!==void 0?y:d),m)}}Po.funcKeywordCode=jW;function ex(e){let{gen:t,data:r,it:o}=e;t.if(o.parentData,()=>t.assign(r,(0,Jt._)`${o.parentData}[${o.parentDataProperty}]`))}function HW(e,t){let{gen:r}=e;r.if((0,Jt._)`Array.isArray(${t})`,()=>{r.assign(fs.default.vErrors,(0,Jt._)`${fs.default.vErrors} === null ? ${t} : ${fs.default.vErrors}.concat(${t})`).assign(fs.default.errors,(0,Jt._)`${fs.default.vErrors}.length`),(0,_W.extendErrors)(e)},()=>e.error())}function VW({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function tx(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,Jt.stringify)(r)})}function qW(e,t,r=!1){return!t.length||t.some(o=>o==="array"?Array.isArray(e):o==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==o||r&&typeof e>"u")}Po.validSchemaType=qW;function YW({schema:e,opts:t,self:r,errSchemaPath:o},n,i){if(Array.isArray(n.keyword)?!n.keyword.includes(i):n.keyword!==i)throw new Error("ajv implementation error");let s=n.dependencies;if(s?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${i}: ${s.join(",")}`);if(n.validateSchema&&!n.validateSchema(e[i])){let l=`keyword "${i}" value is invalid at path "${o}": `+r.errorsText(n.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}Po.validateKeywordUsage=YW});var nx=w(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.extendSubschemaMode=ii.extendSubschemaData=ii.getSubschema=void 0;var Lo=me(),ox=xe();function WW(e,{keyword:t,schemaProp:r,schema:o,schemaPath:n,errSchemaPath:i,topSchemaRef:s}){if(t!==void 0&&o!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,Lo._)`${e.schemaPath}${(0,Lo.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,Lo._)`${e.schemaPath}${(0,Lo.getProperty)(t)}${(0,Lo.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ox.escapeFragment)(r)}`}}if(o!==void 0){if(n===void 0||i===void 0||s===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:n,topSchemaRef:s,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}ii.getSubschema=WW;function JW(e,t,{dataProp:r,dataPropType:o,data:n,dataTypes:i,propertyName:s}){if(n!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:c,dataPathArr:A,opts:d}=t,f=a.let("data",(0,Lo._)`${t.data}${(0,Lo.getProperty)(r)}`,!0);l(f),e.errorPath=(0,Lo.str)`${c}${(0,ox.getErrorPath)(r,o,d.jsPropertySyntax)}`,e.parentDataProperty=(0,Lo._)`${r}`,e.dataPathArr=[...A,e.parentDataProperty]}if(n!==void 0){let c=n instanceof Lo.Name?n:a.let("data",n,!0);l(c),s!==void 0&&(e.propertyName=s)}i&&(e.dataTypes=i);function l(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}ii.extendSubschemaData=JW;function zW(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:o,createErrors:n,allErrors:i}){o!==void 0&&(e.compositeRule=o),n!==void 0&&(e.createErrors=n),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}ii.extendSubschemaMode=zW});var Ey=w((bIe,ix)=>{"use strict";ix.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var o,n,i;if(Array.isArray(t)){if(o=t.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!e(t[n],r[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),o=i.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=o;n--!==0;){var s=i[n];if(!e(t[s],r[s]))return!1}return!0}return t!==t&&r!==r}});var ax=w((wIe,sx)=>{"use strict";var si=sx.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var o=typeof r=="function"?r:r.pre||function(){},n=r.post||function(){};Jd(t,o,n,e,"",e)};si.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};si.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};si.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};si.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Jd(e,t,r,o,n,i,s,a,l,c){if(o&&typeof o=="object"&&!Array.isArray(o)){t(o,n,i,s,a,l,c);for(var A in o){var d=o[A];if(Array.isArray(d)){if(A in si.arrayKeywords)for(var f=0;f<d.length;f++)Jd(e,t,r,d[f],n+"/"+A+"/"+f,i,n,A,o,f)}else if(A in si.propsKeywords){if(d&&typeof d=="object")for(var u in d)Jd(e,t,r,d[u],n+"/"+A+"/"+$W(u),i,n,A,o,u)}else(A in si.keywords||e.allKeys&&!(A in si.skipKeywords))&&Jd(e,t,r,d,n+"/"+A,i,n,A,o)}r(o,n,i,s,a,l,c)}}function $W(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var Hc=w(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.getSchemaRefs=rr.resolveUrl=rr.normalizeId=rr._getFullPath=rr.getFullPath=rr.inlineRef=void 0;var KW=xe(),ZW=Ey(),XW=ax(),eJ=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function tJ(e,t=!0){return typeof e=="boolean"?!0:t===!0?!Cy(e):t?lx(e)<=t:!1}rr.inlineRef=tJ;var rJ=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function Cy(e){for(let t in e){if(rJ.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(Cy)||typeof r=="object"&&Cy(r))return!0}return!1}function lx(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!eJ.has(r)&&(typeof e[r]=="object"&&(0,KW.eachItem)(e[r],o=>t+=lx(o)),t===1/0))return 1/0}return t}function cx(e,t="",r){r!==!1&&(t=Oa(t));let o=e.parse(t);return Ax(e,o)}rr.getFullPath=cx;function Ax(e,t){return e.serialize(t).split("#")[0]+"#"}rr._getFullPath=Ax;var oJ=/#\/?$/;function Oa(e){return e?e.replace(oJ,""):""}rr.normalizeId=Oa;function nJ(e,t,r){return r=Oa(r),e.resolve(t,r)}rr.resolveUrl=nJ;var iJ=/^[a-z_][-a-z0-9._]*$/i;function sJ(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:o}=this.opts,n=Oa(e[r]||t),i={"":n},s=cx(o,n,!1),a={},l=new Set;return XW(e,{allKeys:!0},(d,f,u,p)=>{if(p===void 0)return;let h=s+f,g=i[p];typeof d[r]=="string"&&(g=m.call(this,d[r])),y.call(this,d.$anchor),y.call(this,d.$dynamicAnchor),i[f]=g;function m(E){let I=this.opts.uriResolver.resolve;if(E=Oa(g?I(g,E):E),l.has(E))throw A(E);l.add(E);let C=this.refs[E];return typeof C=="string"&&(C=this.refs[C]),typeof C=="object"?c(d,C.schema,E):E!==Oa(h)&&(E[0]==="#"?(c(d,a[E],E),a[E]=d):this.refs[E]=h),E}function y(E){if(typeof E=="string"){if(!iJ.test(E))throw new Error(`invalid anchor "${E}"`);m.call(this,`#${E}`)}}}),a;function c(d,f,u){if(f!==void 0&&!ZW(d,f))throw A(u)}function A(d){return new Error(`reference "${d}" resolves to more than one schema`)}}rr.getSchemaRefs=sJ});var Yc=w(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.getData=ai.KeywordCxt=ai.validateFunctionCode=void 0;var hx=VT(),ux=jc(),By=dy(),zd=jc(),aJ=KT(),qc=rx(),Iy=nx(),K=me(),le=Qn(),lJ=Hc(),bn=xe(),Vc=Gc();function cJ(e){if(yx(e)&&(Ex(e),mx(e))){dJ(e);return}gx(e,()=>(0,hx.topBoolOrEmptySchema)(e))}ai.validateFunctionCode=cJ;function gx({gen:e,validateName:t,schema:r,schemaEnv:o,opts:n},i){n.code.es5?e.func(t,(0,K._)`${le.default.data}, ${le.default.valCxt}`,o.$async,()=>{e.code((0,K._)`"use strict"; ${dx(r,n)}`),uJ(e,n),e.code(i)}):e.func(t,(0,K._)`${le.default.data}, ${AJ(n)}`,o.$async,()=>e.code(dx(r,n)).code(i))}function AJ(e){return(0,K._)`{${le.default.instancePath}="", ${le.default.parentData}, ${le.default.parentDataProperty}, ${le.default.rootData}=${le.default.data}${e.dynamicRef?(0,K._)`, ${le.default.dynamicAnchors}={}`:K.nil}}={}`}function uJ(e,t){e.if(le.default.valCxt,()=>{e.var(le.default.instancePath,(0,K._)`${le.default.valCxt}.${le.default.instancePath}`),e.var(le.default.parentData,(0,K._)`${le.default.valCxt}.${le.default.parentData}`),e.var(le.default.parentDataProperty,(0,K._)`${le.default.valCxt}.${le.default.parentDataProperty}`),e.var(le.default.rootData,(0,K._)`${le.default.valCxt}.${le.default.rootData}`),t.dynamicRef&&e.var(le.default.dynamicAnchors,(0,K._)`${le.default.valCxt}.${le.default.dynamicAnchors}`)},()=>{e.var(le.default.instancePath,(0,K._)`""`),e.var(le.default.parentData,(0,K._)`undefined`),e.var(le.default.parentDataProperty,(0,K._)`undefined`),e.var(le.default.rootData,le.default.data),t.dynamicRef&&e.var(le.default.dynamicAnchors,(0,K._)`{}`)})}function dJ(e){let{schema:t,opts:r,gen:o}=e;gx(e,()=>{r.$comment&&t.$comment&&Ix(e),mJ(e),o.let(le.default.vErrors,null),o.let(le.default.errors,0),r.unevaluated&&fJ(e),Cx(e),CJ(e)})}function fJ(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,K._)`${r}.evaluated`),t.if((0,K._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,K._)`${e.evaluated}.props`,(0,K._)`undefined`)),t.if((0,K._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,K._)`${e.evaluated}.items`,(0,K._)`undefined`))}function dx(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,K._)`/*# sourceURL=${r} */`:K.nil}function pJ(e,t){if(yx(e)&&(Ex(e),mx(e))){hJ(e,t);return}(0,hx.boolOrEmptySchema)(e,t)}function mx({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function yx(e){return typeof e.schema!="boolean"}function hJ(e,t){let{schema:r,gen:o,opts:n}=e;n.$comment&&r.$comment&&Ix(e),yJ(e),EJ(e);let i=o.const("_errs",le.default.errors);Cx(e,i),o.var(t,(0,K._)`${i} === ${le.default.errors}`)}function Ex(e){(0,bn.checkUnknownRules)(e),gJ(e)}function Cx(e,t){if(e.opts.jtd)return fx(e,[],!1,t);let r=(0,ux.getSchemaTypes)(e.schema),o=(0,ux.coerceAndCheckDataType)(e,r);fx(e,r,!o,t)}function gJ(e){let{schema:t,errSchemaPath:r,opts:o,self:n}=e;t.$ref&&o.ignoreKeywordsWithRef&&(0,bn.schemaHasRulesButRef)(t,n.RULES)&&n.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function mJ(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,bn.checkStrictMode)(e,"default is ignored in the schema root")}function yJ(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,lJ.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function EJ(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ix({gen:e,schemaEnv:t,schema:r,errSchemaPath:o,opts:n}){let i=r.$comment;if(n.$comment===!0)e.code((0,K._)`${le.default.self}.logger.log(${i})`);else if(typeof n.$comment=="function"){let s=(0,K.str)`${o}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,K._)`${le.default.self}.opts.$comment(${i}, ${s}, ${a}.schema)`)}}function CJ(e){let{gen:t,schemaEnv:r,validateName:o,ValidationError:n,opts:i}=e;r.$async?t.if((0,K._)`${le.default.errors} === 0`,()=>t.return(le.default.data),()=>t.throw((0,K._)`new ${n}(${le.default.vErrors})`)):(t.assign((0,K._)`${o}.errors`,le.default.vErrors),i.unevaluated&&IJ(e),t.return((0,K._)`${le.default.errors} === 0`))}function IJ({gen:e,evaluated:t,props:r,items:o}){r instanceof K.Name&&e.assign((0,K._)`${t}.props`,r),o instanceof K.Name&&e.assign((0,K._)`${t}.items`,o)}function fx(e,t,r,o){let{gen:n,schema:i,data:s,allErrors:a,opts:l,self:c}=e,{RULES:A}=c;if(i.$ref&&(l.ignoreKeywordsWithRef||!(0,bn.schemaHasRulesButRef)(i,A))){n.block(()=>Qx(e,"$ref",A.all.$ref.definition));return}l.jtd||BJ(e,t),n.block(()=>{for(let f of A.rules)d(f);d(A.post)});function d(f){(0,By.shouldUseGroup)(i,f)&&(f.type?(n.if((0,zd.checkDataType)(f.type,s,l.strictNumbers)),px(e,f),t.length===1&&t[0]===f.type&&r&&(n.else(),(0,zd.reportTypeError)(e)),n.endIf()):px(e,f),a||n.if((0,K._)`${le.default.errors} === ${o||0}`))}}function px(e,t){let{gen:r,schema:o,opts:{useDefaults:n}}=e;n&&(0,aJ.assignDefaults)(e,t.type),r.block(()=>{for(let i of t.rules)(0,By.shouldUseRule)(o,i)&&Qx(e,i.keyword,i.definition,t.type)})}function BJ(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(QJ(e,t),e.opts.allowUnionTypes||bJ(e,t),wJ(e,e.dataTypes))}function QJ(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Bx(e.dataTypes,r)||Qy(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),TJ(e,t)}}function bJ(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Qy(e,"use allowUnionTypes to allow union type keyword")}function wJ(e,t){let r=e.self.RULES.all;for(let o in r){let n=r[o];if(typeof n=="object"&&(0,By.shouldUseRule)(e.schema,n)){let{type:i}=n.definition;i.length&&!i.some(s=>SJ(t,s))&&Qy(e,`missing type "${i.join(",")}" for keyword "${o}"`)}}}function SJ(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Bx(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function TJ(e,t){let r=[];for(let o of e.dataTypes)Bx(t,o)?r.push(o):t.includes("integer")&&o==="number"&&r.push("integer");e.dataTypes=r}function Qy(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,bn.checkStrictMode)(e,t,e.opts.strictTypes)}var $d=class{constructor(t,r,o){if((0,qc.validateKeywordUsage)(t,r,o),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=o,this.data=t.data,this.schema=t.schema[o],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,bn.schemaRefOrVal)(t,this.schema,o,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",bx(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,qc.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${o} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",le.default.errors))}result(t,r,o){this.failResult((0,K.not)(t),r,o)}failResult(t,r,o){this.gen.if(t),o?o():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,K.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,K._)`${r} !== undefined && (${(0,K.or)(this.invalid$data(),t)})`)}error(t,r,o){if(r){this.setParams(r),this._error(t,o),this.setParams({});return}this._error(t,o)}_error(t,r){(t?Vc.reportExtraError:Vc.reportError)(this,this.def.error,r)}$dataError(){(0,Vc.reportError)(this,this.def.$dataError||Vc.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,Vc.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,o=K.nil){this.gen.block(()=>{this.check$data(t,o),r()})}check$data(t=K.nil,r=K.nil){if(!this.$data)return;let{gen:o,schemaCode:n,schemaType:i,def:s}=this;o.if((0,K.or)((0,K._)`${n} === undefined`,r)),t!==K.nil&&o.assign(t,!0),(i.length||s.validateSchema)&&(o.elseIf(this.invalid$data()),this.$dataError(),t!==K.nil&&o.assign(t,!1)),o.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:o,def:n,it:i}=this;return(0,K.or)(s(),a());function s(){if(o.length){if(!(r instanceof K.Name))throw new Error("ajv implementation error");let l=Array.isArray(o)?o:[o];return(0,K._)`${(0,zd.checkDataTypes)(l,r,i.opts.strictNumbers,zd.DataType.Wrong)}`}return K.nil}function a(){if(n.validateSchema){let l=t.scopeValue("validate$data",{ref:n.validateSchema});return(0,K._)`!${l}(${r})`}return K.nil}}subschema(t,r){let o=(0,Iy.getSubschema)(this.it,t);(0,Iy.extendSubschemaData)(o,this.it,t),(0,Iy.extendSubschemaMode)(o,t);let n={...this.it,...o,items:void 0,props:void 0};return pJ(n,r),n}mergeEvaluated(t,r){let{it:o,gen:n}=this;o.opts.unevaluated&&(o.props!==!0&&t.props!==void 0&&(o.props=bn.mergeEvaluated.props(n,t.props,o.props,r)),o.items!==!0&&t.items!==void 0&&(o.items=bn.mergeEvaluated.items(n,t.items,o.items,r)))}mergeValidEvaluated(t,r){let{it:o,gen:n}=this;if(o.opts.unevaluated&&(o.props!==!0||o.items!==!0))return n.if(r,()=>this.mergeEvaluated(t,K.Name)),!0}};ai.KeywordCxt=$d;function Qx(e,t,r,o){let n=new $d(e,r,t);"code"in r?r.code(n,o):n.$data&&r.validate?(0,qc.funcKeywordCode)(n,r):"macro"in r?(0,qc.macroKeywordCode)(n,r):(r.compile||r.validate)&&(0,qc.funcKeywordCode)(n,r)}var xJ=/^\/(?:[^~]|~0|~1)*$/,RJ=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function bx(e,{dataLevel:t,dataNames:r,dataPathArr:o}){let n,i;if(e==="")return le.default.rootData;if(e[0]==="/"){if(!xJ.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);n=e,i=le.default.rootData}else{let c=RJ.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);let A=+c[1];if(n=c[2],n==="#"){if(A>=t)throw new Error(l("property/index",A));return o[t-A]}if(A>t)throw new Error(l("data",A));if(i=r[t-A],!n)return i}let s=i,a=n.split("/");for(let c of a)c&&(i=(0,K._)`${i}${(0,K.getProperty)((0,bn.unescapeJsonPointer)(c))}`,s=(0,K._)`${s} && ${i}`);return s;function l(c,A){return`Cannot access ${c} ${A} levels up, current level is ${t}`}}ai.getData=bx});var Kd=w(wy=>{"use strict";Object.defineProperty(wy,"__esModule",{value:!0});var by=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};wy.default=by});var Wc=w(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0});var Sy=Hc(),Ty=class extends Error{constructor(t,r,o,n){super(n||`can't resolve reference ${o} from id ${r}`),this.missingRef=(0,Sy.resolveUrl)(t,r,o),this.missingSchema=(0,Sy.normalizeId)((0,Sy.getFullPath)(t,this.missingRef))}};xy.default=Ty});var Xd=w(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.resolveSchema=jr.getCompilingSchema=jr.resolveRef=jr.compileSchema=jr.SchemaEnv=void 0;var uo=me(),DJ=Kd(),ps=Qn(),fo=Hc(),wx=xe(),FJ=Yc(),Ma=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let o;typeof t.schema=="object"&&(o=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,fo.normalizeId)(o?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=o?.$async,this.refs={}}};jr.SchemaEnv=Ma;function Dy(e){let t=Sx.call(this,e);if(t)return t;let r=(0,fo.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:o,lines:n}=this.opts.code,{ownProperties:i}=this.opts,s=new uo.CodeGen(this.scope,{es5:o,lines:n,ownProperties:i}),a;e.$async&&(a=s.scopeValue("Error",{ref:DJ.default,code:(0,uo._)`require("ajv/dist/runtime/validation_error").default`}));let l=s.scopeName("validate");e.validateName=l;let c={gen:s,allErrors:this.opts.allErrors,data:ps.default.data,parentData:ps.default.parentData,parentDataProperty:ps.default.parentDataProperty,dataNames:[ps.default.data],dataPathArr:[uo.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:s.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,uo.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:uo.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,uo._)`""`,opts:this.opts,self:this},A;try{this._compilations.add(e),(0,FJ.validateFunctionCode)(c),s.optimize(this.opts.code.optimize);let d=s.toString();A=`${s.scopeRefs(ps.default.scope)}return ${d}`,this.opts.code.process&&(A=this.opts.code.process(A,e));let u=new Function(`${ps.default.self}`,`${ps.default.scope}`,A)(this,this.scope.get());if(this.scope.value(l,{ref:u}),u.errors=null,u.schema=e.schema,u.schemaEnv=e,e.$async&&(u.$async=!0),this.opts.code.source===!0&&(u.source={validateName:l,validateCode:d,scopeValues:s._values}),this.opts.unevaluated){let{props:p,items:h}=c;u.evaluated={props:p instanceof uo.Name?void 0:p,items:h instanceof uo.Name?void 0:h,dynamicProps:p instanceof uo.Name,dynamicItems:h instanceof uo.Name},u.source&&(u.source.evaluated=(0,uo.stringify)(u.evaluated))}return e.validate=u,e}catch(d){throw delete e.validate,delete e.validateName,A&&this.logger.error("Error compiling schema, function code:",A),d}finally{this._compilations.delete(e)}}jr.compileSchema=Dy;function kJ(e,t,r){var o;r=(0,fo.resolveUrl)(this.opts.uriResolver,t,r);let n=e.refs[r];if(n)return n;let i=PJ.call(this,e,r);if(i===void 0){let s=(o=e.localRefs)===null||o===void 0?void 0:o[r],{schemaId:a}=this.opts;s&&(i=new Ma({schema:s,schemaId:a,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=NJ.call(this,i)}jr.resolveRef=kJ;function NJ(e){return(0,fo.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Dy.call(this,e)}function Sx(e){for(let t of this._compilations)if(vJ(t,e))return t}jr.getCompilingSchema=Sx;function vJ(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function PJ(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Zd.call(this,e,t)}function Zd(e,t){let r=this.opts.uriResolver.parse(t),o=(0,fo._getFullPath)(this.opts.uriResolver,r),n=(0,fo.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&o===n)return Ry.call(this,r,e);let i=(0,fo.normalizeId)(o),s=this.refs[i]||this.schemas[i];if(typeof s=="string"){let a=Zd.call(this,e,s);return typeof a?.schema!="object"?void 0:Ry.call(this,r,a)}if(typeof s?.schema=="object"){if(s.validate||Dy.call(this,s),i===(0,fo.normalizeId)(t)){let{schema:a}=s,{schemaId:l}=this.opts,c=a[l];return c&&(n=(0,fo.resolveUrl)(this.opts.uriResolver,n,c)),new Ma({schema:a,schemaId:l,root:e,baseId:n})}return Ry.call(this,r,s)}}jr.resolveSchema=Zd;var LJ=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ry(e,{baseId:t,schema:r,root:o}){var n;if(((n=e.fragment)===null||n===void 0?void 0:n[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,wx.unescapeFragment)(a)];if(l===void 0)return;r=l;let c=typeof r=="object"&&r[this.opts.schemaId];!LJ.has(a)&&c&&(t=(0,fo.resolveUrl)(this.opts.uriResolver,t,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,wx.schemaHasRulesButRef)(r,this.RULES)){let a=(0,fo.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=Zd.call(this,o,a)}let{schemaId:s}=this.opts;if(i=i||new Ma({schema:r,schemaId:s,root:o,baseId:t}),i.schema!==i.root.schema)return i}});var Tx=w((FIe,UJ)=>{UJ.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Rx=w((kIe,xx)=>{"use strict";var OJ={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};xx.exports={HEX:OJ}});var Ux=w((NIe,Lx)=>{"use strict";var{HEX:MJ}=Rx();function Nx(e){if(Px(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:GJ(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function Fy(e,t=!1){let r="",o=!0;for(let n of e){if(MJ[n]===void 0)return;n!=="0"&&o===!0&&(o=!1),o||(r+=n)}return t&&r.length===0&&(r="0"),r}function _J(e){let t=0,r={error:!1,address:"",zone:""},o=[],n=[],i=!1,s=!1,a=!1;function l(){if(n.length){if(i===!1){let c=Fy(n);if(c!==void 0)o.push(c);else return r.error=!0,!1}n.length=0}return!0}for(let c=0;c<e.length;c++){let A=e[c];if(!(A==="["||A==="]"))if(A===":"){if(s===!0&&(a=!0),!l())break;if(t++,o.push(":"),t>7){r.error=!0;break}c-1>=0&&e[c-1]===":"&&(s=!0);continue}else if(A==="%"){if(!l())break;i=!0}else{n.push(A);continue}}return n.length&&(i?r.zone=n.join(""):a?o.push(n.join("")):o.push(Fy(n))),r.address=o.join(""),r}function vx(e,t={}){if(Px(e,":")<2)return{host:e,isIPV6:!1};let r=_J(e);if(r.error)return{host:e,isIPV6:!1};{let o=r.address,n=r.address;return r.zone&&(o+="%"+r.zone,n+="%25"+r.zone),{host:o,escapedHost:n,isIPV6:!0}}}function GJ(e,t){let r="",o=!0,n=e.length;for(let i=0;i<n;i++){let s=e[i];s==="0"&&o?(i+1<=n&&e[i+1]===t||i+1===n)&&(r+=s,o=!1):(s===t?o=!0:o=!1,r+=s)}return r}function Px(e,t){let r=0;for(let o=0;o<e.length;o++)e[o]===t&&r++;return r}var Dx=/^\.\.?\//u,Fx=/^\/\.(?:\/|$)/u,kx=/^\/\.\.(?:\/|$)/u,jJ=/^\/?(?:.|\n)*?(?=\/|$)/u;function HJ(e){let t=[];for(;e.length;)if(e.match(Dx))e=e.replace(Dx,"");else if(e.match(Fx))e=e.replace(Fx,"/");else if(e.match(kx))e=e.replace(kx,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(jJ);if(r){let o=r[0];e=e.slice(o.length),t.push(o)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function VJ(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function qJ(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let o=unescape(e.host),n=Nx(o);if(n.isIPV4)o=n.host;else{let i=vx(n.host,{isIPV4:!1});i.isIPV6===!0?o=`[${i.escapedHost}]`:o=e.host}r.push(o)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}Lx.exports={recomposeAuthority:qJ,normalizeComponentEncoding:VJ,removeDotSegments:HJ,normalizeIPv4:Nx,normalizeIPv6:vx,stringArrayToHexStripped:Fy}});var Hx=w((vIe,jx)=>{"use strict";var YJ=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,WJ=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Ox(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function Mx(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function _x(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function JJ(e){return e.secure=Ox(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function zJ(e){if((e.port===(Ox(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function $J(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(WJ);if(r){let o=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let n=`${o}:${t.nid||e.nid}`,i=ky[n];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function KJ(e,t){let r=t.scheme||e.scheme||"urn",o=e.nid.toLowerCase(),n=`${r}:${t.nid||o}`,i=ky[n];i&&(e=i.serialize(e,t));let s=e,a=e.nss;return s.path=`${o||t.nid}:${a}`,t.skipEscape=!0,s}function ZJ(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!YJ.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function XJ(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var Gx={scheme:"http",domainHost:!0,parse:Mx,serialize:_x},ez={scheme:"https",domainHost:Gx.domainHost,parse:Mx,serialize:_x},ef={scheme:"ws",domainHost:!0,parse:JJ,serialize:zJ},tz={scheme:"wss",domainHost:ef.domainHost,parse:ef.parse,serialize:ef.serialize},rz={scheme:"urn",parse:$J,serialize:KJ,skipNormalize:!0},oz={scheme:"urn:uuid",parse:ZJ,serialize:XJ,skipNormalize:!0},ky={http:Gx,https:ez,ws:ef,wss:tz,urn:rz,"urn:uuid":oz};jx.exports=ky});var qx=w((PIe,rf)=>{"use strict";var{normalizeIPv6:nz,normalizeIPv4:iz,removeDotSegments:Jc,recomposeAuthority:sz,normalizeComponentEncoding:tf}=Ux(),Ny=Hx();function az(e,t){return typeof e=="string"?e=Uo(wn(e,t),t):typeof e=="object"&&(e=wn(Uo(e,t),t)),e}function lz(e,t,r){let o=Object.assign({scheme:"null"},r),n=Vx(wn(e,o),wn(t,o),o,!0);return Uo(n,{...o,skipEscape:!0})}function Vx(e,t,r,o){let n={};return o||(e=wn(Uo(e,r),r),t=wn(Uo(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=Jc(t.path||""),n.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=Jc(t.path||""),n.query=t.query):(t.path?(t.path.charAt(0)==="/"?n.path=Jc(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?n.path="/"+t.path:e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path,n.path=Jc(n.path)),n.query=t.query):(n.path=e.path,t.query!==void 0?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function cz(e,t,r){return typeof e=="string"?(e=unescape(e),e=Uo(tf(wn(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Uo(tf(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Uo(tf(wn(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Uo(tf(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Uo(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},o=Object.assign({},t),n=[],i=Ny[(o.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,o),r.path!==void 0&&(o.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),o.reference!=="suffix"&&r.scheme&&n.push(r.scheme,":");let s=sz(r,o);if(s!==void 0&&(o.reference!=="suffix"&&n.push("//"),n.push(s),r.path&&r.path.charAt(0)!=="/"&&n.push("/")),r.path!==void 0){let a=r.path;!o.absolutePath&&(!i||!i.absolutePath)&&(a=Jc(a)),s===void 0&&(a=a.replace(/^\/\//u,"/%2F")),n.push(a)}return r.query!==void 0&&n.push("?",r.query),r.fragment!==void 0&&n.push("#",r.fragment),n.join("")}var Az=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function uz(e){let t=0;for(let r=0,o=e.length;r<o;++r)if(t=e.charCodeAt(r),t>126||Az[t])return!0;return!1}var dz=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function wn(e,t){let r=Object.assign({},t),o={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},n=e.indexOf("%")!==-1,i=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let s=e.match(dz);if(s){if(o.scheme=s[1],o.userinfo=s[3],o.host=s[4],o.port=parseInt(s[5],10),o.path=s[6]||"",o.query=s[7],o.fragment=s[8],isNaN(o.port)&&(o.port=s[5]),o.host){let l=iz(o.host);if(l.isIPV4===!1){let c=nz(l.host,{isIPV4:!1});o.host=c.host.toLowerCase(),i=c.isIPV6}else o.host=l.host,i=!0}o.scheme===void 0&&o.userinfo===void 0&&o.host===void 0&&o.port===void 0&&!o.path&&o.query===void 0?o.reference="same-document":o.scheme===void 0?o.reference="relative":o.fragment===void 0?o.reference="absolute":o.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==o.reference&&(o.error=o.error||"URI is not a "+r.reference+" reference.");let a=Ny[(r.scheme||o.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&o.host&&(r.domainHost||a&&a.domainHost)&&i===!1&&uz(o.host))try{o.host=URL.domainToASCII(o.host.toLowerCase())}catch(l){o.error=o.error||"Host's domain name can not be converted to ASCII: "+l}(!a||a&&!a.skipNormalize)&&(n&&o.scheme!==void 0&&(o.scheme=unescape(o.scheme)),n&&o.host!==void 0&&(o.host=unescape(o.host)),o.path!==void 0&&o.path.length&&(o.path=escape(unescape(o.path))),o.fragment!==void 0&&o.fragment.length&&(o.fragment=encodeURI(decodeURIComponent(o.fragment)))),a&&a.parse&&a.parse(o,r)}else o.error=o.error||"URI can not be parsed.";return o}var vy={SCHEMES:Ny,normalize:az,resolve:lz,resolveComponents:Vx,equal:cz,serialize:Uo,parse:wn};rf.exports=vy;rf.exports.default=vy;rf.exports.fastUri=vy});var Wx=w(Py=>{"use strict";Object.defineProperty(Py,"__esModule",{value:!0});var Yx=qx();Yx.code='require("ajv/dist/runtime/uri").default';Py.default=Yx});var tR=w(Dt=>{"use strict";Object.defineProperty(Dt,"__esModule",{value:!0});Dt.CodeGen=Dt.Name=Dt.nil=Dt.stringify=Dt.str=Dt._=Dt.KeywordCxt=void 0;var fz=Yc();Object.defineProperty(Dt,"KeywordCxt",{enumerable:!0,get:function(){return fz.KeywordCxt}});var _a=me();Object.defineProperty(Dt,"_",{enumerable:!0,get:function(){return _a._}});Object.defineProperty(Dt,"str",{enumerable:!0,get:function(){return _a.str}});Object.defineProperty(Dt,"stringify",{enumerable:!0,get:function(){return _a.stringify}});Object.defineProperty(Dt,"nil",{enumerable:!0,get:function(){return _a.nil}});Object.defineProperty(Dt,"Name",{enumerable:!0,get:function(){return _a.Name}});Object.defineProperty(Dt,"CodeGen",{enumerable:!0,get:function(){return _a.CodeGen}});var pz=Kd(),Zx=Wc(),hz=uy(),zc=Xd(),gz=me(),$c=Hc(),of=jc(),Uy=xe(),Jx=Tx(),mz=Wx(),Xx=(e,t)=>new RegExp(e,t);Xx.code="new RegExp";var yz=["removeAdditional","useDefaults","coerceTypes"],Ez=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),Cz={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},Iz={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},zx=200;function Bz(e){var t,r,o,n,i,s,a,l,c,A,d,f,u,p,h,g,m,y,E,I,C,B,R,x,S;let Q=e.strict,T=(t=e.code)===null||t===void 0?void 0:t.optimize,D=T===!0||T===void 0?1:T||0,k=(o=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&o!==void 0?o:Xx,P=(n=e.uriResolver)!==null&&n!==void 0?n:mz.default;return{strictSchema:(s=(i=e.strictSchema)!==null&&i!==void 0?i:Q)!==null&&s!==void 0?s:!0,strictNumbers:(l=(a=e.strictNumbers)!==null&&a!==void 0?a:Q)!==null&&l!==void 0?l:!0,strictTypes:(A=(c=e.strictTypes)!==null&&c!==void 0?c:Q)!==null&&A!==void 0?A:"log",strictTuples:(f=(d=e.strictTuples)!==null&&d!==void 0?d:Q)!==null&&f!==void 0?f:"log",strictRequired:(p=(u=e.strictRequired)!==null&&u!==void 0?u:Q)!==null&&p!==void 0?p:!1,code:e.code?{...e.code,optimize:D,regExp:k}:{optimize:D,regExp:k},loopRequired:(h=e.loopRequired)!==null&&h!==void 0?h:zx,loopEnum:(g=e.loopEnum)!==null&&g!==void 0?g:zx,meta:(m=e.meta)!==null&&m!==void 0?m:!0,messages:(y=e.messages)!==null&&y!==void 0?y:!0,inlineRefs:(E=e.inlineRefs)!==null&&E!==void 0?E:!0,schemaId:(I=e.schemaId)!==null&&I!==void 0?I:"$id",addUsedSchema:(C=e.addUsedSchema)!==null&&C!==void 0?C:!0,validateSchema:(B=e.validateSchema)!==null&&B!==void 0?B:!0,validateFormats:(R=e.validateFormats)!==null&&R!==void 0?R:!0,unicodeRegExp:(x=e.unicodeRegExp)!==null&&x!==void 0?x:!0,int32range:(S=e.int32range)!==null&&S!==void 0?S:!0,uriResolver:P}}var Kc=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...Bz(t)};let{es5:r,lines:o}=this.opts.code;this.scope=new gz.ValueScope({scope:{},prefixes:Ez,es5:r,lines:o}),this.logger=xz(t.logger);let n=t.validateFormats;t.validateFormats=!1,this.RULES=(0,hz.getRules)(),$x.call(this,Cz,t,"NOT SUPPORTED"),$x.call(this,Iz,t,"DEPRECATED","warn"),this._metaOpts=Sz.call(this),t.formats&&bz.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&wz.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),Qz.call(this),t.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:o}=this.opts,n=Jx;o==="id"&&(n={...Jx},n.id=n.$id,delete n.$id),r&&t&&this.addMetaSchema(n,n[o],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let o;if(typeof t=="string"){if(o=this.getSchema(t),!o)throw new Error(`no schema with key or ref "${t}"`)}else o=this.compile(t);let n=o(r);return"$async"in o||(this.errors=o.errors),n}compile(t,r){let o=this._addSchema(t,r);return o.validate||this._compileSchemaEnv(o)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:o}=this.opts;return n.call(this,t,r);async function n(A,d){await i.call(this,A.$schema);let f=this._addSchema(A,d);return f.validate||s.call(this,f)}async function i(A){A&&!this.getSchema(A)&&await n.call(this,{$ref:A},!0)}async function s(A){try{return this._compileSchemaEnv(A)}catch(d){if(!(d instanceof Zx.default))throw d;return a.call(this,d),await l.call(this,d.missingSchema),s.call(this,A)}}function a({missingSchema:A,missingRef:d}){if(this.refs[A])throw new Error(`AnySchema ${A} is loaded but ${d} cannot be resolved`)}async function l(A){let d=await c.call(this,A);this.refs[A]||await i.call(this,d.$schema),this.refs[A]||this.addSchema(d,A,r)}async function c(A){let d=this._loading[A];if(d)return d;try{return await(this._loading[A]=o(A))}finally{delete this._loading[A]}}}addSchema(t,r,o,n=this.opts.validateSchema){if(Array.isArray(t)){for(let s of t)this.addSchema(s,void 0,o,n);return this}let i;if(typeof t=="object"){let{schemaId:s}=this.opts;if(i=t[s],i!==void 0&&typeof i!="string")throw new Error(`schema ${s} must be string`)}return r=(0,$c.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(t,o,r,n,!0),this}addMetaSchema(t,r,o=this.opts.validateSchema){return this.addSchema(t,r,!0,o),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let o;if(o=t.$schema,o!==void 0&&typeof o!="string")throw new Error("$schema must be a string");if(o=o||this.opts.defaultMeta||this.defaultMeta(),!o)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let n=this.validate(o,t);if(!n&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return n}getSchema(t){let r;for(;typeof(r=Kx.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:o}=this.opts,n=new zc.SchemaEnv({schema:{},schemaId:o});if(r=zc.resolveSchema.call(this,n,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=Kx.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let o=t[this.opts.schemaId];return o&&(o=(0,$c.normalizeId)(o),delete this.schemas[o],delete this.refs[o]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let o;if(typeof t=="string")o=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=o);else if(typeof t=="object"&&r===void 0){if(r=t,o=r.keyword,Array.isArray(o)&&!o.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(Dz.call(this,o,r),!r)return(0,Uy.eachItem)(o,i=>Ly.call(this,i)),this;kz.call(this,r);let n={...r,type:(0,of.getJSONTypes)(r.type),schemaType:(0,of.getJSONTypes)(r.schemaType)};return(0,Uy.eachItem)(o,n.type.length===0?i=>Ly.call(this,i,n):i=>n.type.forEach(s=>Ly.call(this,i,n,s))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let o of r.rules){let n=o.rules.findIndex(i=>i.keyword===t);n>=0&&o.rules.splice(n,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:o="data"}={}){return!t||t.length===0?"No errors":t.map(n=>`${o}${n.instancePath} ${n.message}`).reduce((n,i)=>n+r+i)}$dataMetaSchema(t,r){let o=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let n of r){let i=n.split("/").slice(1),s=t;for(let a of i)s=s[a];for(let a in o){let l=o[a];if(typeof l!="object")continue;let{$data:c}=l.definition,A=s[a];c&&A&&(s[a]=eR(A))}}return t}_removeAllSchemas(t,r){for(let o in t){let n=t[o];(!r||r.test(o))&&(typeof n=="string"?delete t[o]:n&&!n.meta&&(this._cache.delete(n.schema),delete t[o]))}}_addSchema(t,r,o,n=this.opts.validateSchema,i=this.opts.addUsedSchema){let s,{schemaId:a}=this.opts;if(typeof t=="object")s=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(t);if(l!==void 0)return l;o=(0,$c.normalizeId)(s||o);let c=$c.getSchemaRefs.call(this,t,o);return l=new zc.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:o,localRefs:c}),this._cache.set(l.schema,l),i&&!o.startsWith("#")&&(o&&this._checkUnique(o),this.refs[o]=l),n&&this.validateSchema(t,!0),l}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):zc.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{zc.compileSchema.call(this,t)}finally{this.opts=r}}};Kc.ValidationError=pz.default;Kc.MissingRefError=Zx.default;Dt.default=Kc;function $x(e,t,r,o="error"){for(let n in e){let i=n;i in t&&this.logger[o](`${r}: option ${n}. ${e[i]}`)}}function Kx(e){return e=(0,$c.normalizeId)(e),this.schemas[e]||this.refs[e]}function Qz(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function bz(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function wz(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function Sz(){let e={...this.opts};for(let t of yz)delete e[t];return e}var Tz={log(){},warn(){},error(){}};function xz(e){if(e===!1)return Tz;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var Rz=/^[a-z_$][a-z0-9_$:-]*$/i;function Dz(e,t){let{RULES:r}=this;if((0,Uy.eachItem)(e,o=>{if(r.keywords[o])throw new Error(`Keyword ${o} is already defined`);if(!Rz.test(o))throw new Error(`Keyword ${o} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function Ly(e,t,r){var o;let n=t?.post;if(r&&n)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,s=n?i.post:i.rules.find(({type:l})=>l===r);if(s||(s={type:r,rules:[]},i.rules.push(s)),i.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,of.getJSONTypes)(t.type),schemaType:(0,of.getJSONTypes)(t.schemaType)}};t.before?Fz.call(this,s,a,t.before):s.rules.push(a),i.all[e]=a,(o=t.implements)===null||o===void 0||o.forEach(l=>this.addKeyword(l))}function Fz(e,t,r){let o=e.rules.findIndex(n=>n.keyword===r);o>=0?e.rules.splice(o,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function kz(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=eR(t)),e.validateSchema=this.compile(t,!0))}var Nz={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function eR(e){return{anyOf:[e,Nz]}}});var rR=w(Oy=>{"use strict";Object.defineProperty(Oy,"__esModule",{value:!0});var vz={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Oy.default=vz});var sR=w(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.callRef=hs.getValidate=void 0;var Pz=Wc(),oR=Gr(),or=me(),Ga=Qn(),nR=Xd(),nf=xe(),Lz={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:o}=e,{baseId:n,schemaEnv:i,validateName:s,opts:a,self:l}=o,{root:c}=i;if((r==="#"||r==="#/")&&n===c.baseId)return d();let A=nR.resolveRef.call(l,c,n,r);if(A===void 0)throw new Pz.default(o.opts.uriResolver,n,r);if(A instanceof nR.SchemaEnv)return f(A);return u(A);function d(){if(i===c)return sf(e,s,i,i.$async);let p=t.scopeValue("root",{ref:c});return sf(e,(0,or._)`${p}.validate`,c,c.$async)}function f(p){let h=iR(e,p);sf(e,h,p,p.$async)}function u(p){let h=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,or.stringify)(p)}:{ref:p}),g=t.name("valid"),m=e.subschema({schema:p,dataTypes:[],schemaPath:or.nil,topSchemaRef:h,errSchemaPath:r},g);e.mergeEvaluated(m),e.ok(g)}}};function iR(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,or._)`${r.scopeValue("wrapper",{ref:t})}.validate`}hs.getValidate=iR;function sf(e,t,r,o){let{gen:n,it:i}=e,{allErrors:s,schemaEnv:a,opts:l}=i,c=l.passContext?Ga.default.this:or.nil;o?A():d();function A(){if(!a.$async)throw new Error("async schema referenced by sync schema");let p=n.let("valid");n.try(()=>{n.code((0,or._)`await ${(0,oR.callValidateCode)(e,t,c)}`),u(t),s||n.assign(p,!0)},h=>{n.if((0,or._)`!(${h} instanceof ${i.ValidationError})`,()=>n.throw(h)),f(h),s||n.assign(p,!1)}),e.ok(p)}function d(){e.result((0,oR.callValidateCode)(e,t,c),()=>u(t),()=>f(t))}function f(p){let h=(0,or._)`${p}.errors`;n.assign(Ga.default.vErrors,(0,or._)`${Ga.default.vErrors} === null ? ${h} : ${Ga.default.vErrors}.concat(${h})`),n.assign(Ga.default.errors,(0,or._)`${Ga.default.vErrors}.length`)}function u(p){var h;if(!i.opts.unevaluated)return;let g=(h=r?.validate)===null||h===void 0?void 0:h.evaluated;if(i.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(i.props=nf.mergeEvaluated.props(n,g.props,i.props));else{let m=n.var("props",(0,or._)`${p}.evaluated.props`);i.props=nf.mergeEvaluated.props(n,m,i.props,or.Name)}if(i.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(i.items=nf.mergeEvaluated.items(n,g.items,i.items));else{let m=n.var("items",(0,or._)`${p}.evaluated.items`);i.items=nf.mergeEvaluated.items(n,m,i.items,or.Name)}}}hs.callRef=sf;hs.default=Lz});var aR=w(My=>{"use strict";Object.defineProperty(My,"__esModule",{value:!0});var Uz=rR(),Oz=sR(),Mz=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Uz.default,Oz.default];My.default=Mz});var lR=w(_y=>{"use strict";Object.defineProperty(_y,"__esModule",{value:!0});var af=me(),li=af.operators,lf={maximum:{okStr:"<=",ok:li.LTE,fail:li.GT},minimum:{okStr:">=",ok:li.GTE,fail:li.LT},exclusiveMaximum:{okStr:"<",ok:li.LT,fail:li.GTE},exclusiveMinimum:{okStr:">",ok:li.GT,fail:li.LTE}},_z={message:({keyword:e,schemaCode:t})=>(0,af.str)`must be ${lf[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,af._)`{comparison: ${lf[e].okStr}, limit: ${t}}`},Gz={keyword:Object.keys(lf),type:"number",schemaType:"number",$data:!0,error:_z,code(e){let{keyword:t,data:r,schemaCode:o}=e;e.fail$data((0,af._)`${r} ${lf[t].fail} ${o} || isNaN(${r})`)}};_y.default=Gz});var cR=w(Gy=>{"use strict";Object.defineProperty(Gy,"__esModule",{value:!0});var Zc=me(),jz={message:({schemaCode:e})=>(0,Zc.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,Zc._)`{multipleOf: ${e}}`},Hz={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:jz,code(e){let{gen:t,data:r,schemaCode:o,it:n}=e,i=n.opts.multipleOfPrecision,s=t.let("res"),a=i?(0,Zc._)`Math.abs(Math.round(${s}) - ${s}) > 1e-${i}`:(0,Zc._)`${s} !== parseInt(${s})`;e.fail$data((0,Zc._)`(${o} === 0 || (${s} = ${r}/${o}, ${a}))`)}};Gy.default=Hz});var uR=w(jy=>{"use strict";Object.defineProperty(jy,"__esModule",{value:!0});function AR(e){let t=e.length,r=0,o=0,n;for(;o<t;)r++,n=e.charCodeAt(o++),n>=55296&&n<=56319&&o<t&&(n=e.charCodeAt(o),(n&64512)===56320&&o++);return r}jy.default=AR;AR.code='require("ajv/dist/runtime/ucs2length").default'});var dR=w(Hy=>{"use strict";Object.defineProperty(Hy,"__esModule",{value:!0});var gs=me(),Vz=xe(),qz=uR(),Yz={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,gs.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,gs._)`{limit: ${e}}`},Wz={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Yz,code(e){let{keyword:t,data:r,schemaCode:o,it:n}=e,i=t==="maxLength"?gs.operators.GT:gs.operators.LT,s=n.opts.unicode===!1?(0,gs._)`${r}.length`:(0,gs._)`${(0,Vz.useFunc)(e.gen,qz.default)}(${r})`;e.fail$data((0,gs._)`${s} ${i} ${o}`)}};Hy.default=Wz});var fR=w(Vy=>{"use strict";Object.defineProperty(Vy,"__esModule",{value:!0});var Jz=Gr(),cf=me(),zz={message:({schemaCode:e})=>(0,cf.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,cf._)`{pattern: ${e}}`},$z={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:zz,code(e){let{data:t,$data:r,schema:o,schemaCode:n,it:i}=e,s=i.opts.unicodeRegExp?"u":"",a=r?(0,cf._)`(new RegExp(${n}, ${s}))`:(0,Jz.usePattern)(e,o);e.fail$data((0,cf._)`!${a}.test(${t})`)}};Vy.default=$z});var pR=w(qy=>{"use strict";Object.defineProperty(qy,"__esModule",{value:!0});var Xc=me(),Kz={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Xc.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Xc._)`{limit: ${e}}`},Zz={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Kz,code(e){let{keyword:t,data:r,schemaCode:o}=e,n=t==="maxProperties"?Xc.operators.GT:Xc.operators.LT;e.fail$data((0,Xc._)`Object.keys(${r}).length ${n} ${o}`)}};qy.default=Zz});var hR=w(Yy=>{"use strict";Object.defineProperty(Yy,"__esModule",{value:!0});var eA=Gr(),tA=me(),Xz=xe(),e$={message:({params:{missingProperty:e}})=>(0,tA.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,tA._)`{missingProperty: ${e}}`},t$={keyword:"required",type:"object",schemaType:"array",$data:!0,error:e$,code(e){let{gen:t,schema:r,schemaCode:o,data:n,$data:i,it:s}=e,{opts:a}=s;if(!i&&r.length===0)return;let l=r.length>=a.loopRequired;if(s.allErrors?c():A(),a.strictRequired){let u=e.parentSchema.properties,{definedProperties:p}=e.it;for(let h of r)if(u?.[h]===void 0&&!p.has(h)){let g=s.schemaEnv.baseId+s.errSchemaPath,m=`required property "${h}" is not defined at "${g}" (strictRequired)`;(0,Xz.checkStrictMode)(s,m,s.opts.strictRequired)}}function c(){if(l||i)e.block$data(tA.nil,d);else for(let u of r)(0,eA.checkReportMissingProp)(e,u)}function A(){let u=t.let("missing");if(l||i){let p=t.let("valid",!0);e.block$data(p,()=>f(u,p)),e.ok(p)}else t.if((0,eA.checkMissingProp)(e,r,u)),(0,eA.reportMissingProp)(e,u),t.else()}function d(){t.forOf("prop",o,u=>{e.setParams({missingProperty:u}),t.if((0,eA.noPropertyInData)(t,n,u,a.ownProperties),()=>e.error())})}function f(u,p){e.setParams({missingProperty:u}),t.forOf(u,o,()=>{t.assign(p,(0,eA.propertyInData)(t,n,u,a.ownProperties)),t.if((0,tA.not)(p),()=>{e.error(),t.break()})},tA.nil)}}};Yy.default=t$});var gR=w(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0});var rA=me(),r$={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,rA.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,rA._)`{limit: ${e}}`},o$={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:r$,code(e){let{keyword:t,data:r,schemaCode:o}=e,n=t==="maxItems"?rA.operators.GT:rA.operators.LT;e.fail$data((0,rA._)`${r}.length ${n} ${o}`)}};Wy.default=o$});var Af=w(Jy=>{"use strict";Object.defineProperty(Jy,"__esModule",{value:!0});var mR=Ey();mR.code='require("ajv/dist/runtime/equal").default';Jy.default=mR});var yR=w($y=>{"use strict";Object.defineProperty($y,"__esModule",{value:!0});var zy=jc(),Ft=me(),n$=xe(),i$=Af(),s$={message:({params:{i:e,j:t}})=>(0,Ft.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Ft._)`{i: ${e}, j: ${t}}`},a$={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:s$,code(e){let{gen:t,data:r,$data:o,schema:n,parentSchema:i,schemaCode:s,it:a}=e;if(!o&&!n)return;let l=t.let("valid"),c=i.items?(0,zy.getSchemaTypes)(i.items):[];e.block$data(l,A,(0,Ft._)`${s} === false`),e.ok(l);function A(){let p=t.let("i",(0,Ft._)`${r}.length`),h=t.let("j");e.setParams({i:p,j:h}),t.assign(l,!0),t.if((0,Ft._)`${p} > 1`,()=>(d()?f:u)(p,h))}function d(){return c.length>0&&!c.some(p=>p==="object"||p==="array")}function f(p,h){let g=t.name("item"),m=(0,zy.checkDataTypes)(c,g,a.opts.strictNumbers,zy.DataType.Wrong),y=t.const("indices",(0,Ft._)`{}`);t.for((0,Ft._)`;${p}--;`,()=>{t.let(g,(0,Ft._)`${r}[${p}]`),t.if(m,(0,Ft._)`continue`),c.length>1&&t.if((0,Ft._)`typeof ${g} == "string"`,(0,Ft._)`${g} += "_"`),t.if((0,Ft._)`typeof ${y}[${g}] == "number"`,()=>{t.assign(h,(0,Ft._)`${y}[${g}]`),e.error(),t.assign(l,!1).break()}).code((0,Ft._)`${y}[${g}] = ${p}`)})}function u(p,h){let g=(0,n$.useFunc)(t,i$.default),m=t.name("outer");t.label(m).for((0,Ft._)`;${p}--;`,()=>t.for((0,Ft._)`${h} = ${p}; ${h}--;`,()=>t.if((0,Ft._)`${g}(${r}[${p}], ${r}[${h}])`,()=>{e.error(),t.assign(l,!1).break(m)})))}}};$y.default=a$});var ER=w(Zy=>{"use strict";Object.defineProperty(Zy,"__esModule",{value:!0});var Ky=me(),l$=xe(),c$=Af(),A$={message:"must be equal to constant",params:({schemaCode:e})=>(0,Ky._)`{allowedValue: ${e}}`},u$={keyword:"const",$data:!0,error:A$,code(e){let{gen:t,data:r,$data:o,schemaCode:n,schema:i}=e;o||i&&typeof i=="object"?e.fail$data((0,Ky._)`!${(0,l$.useFunc)(t,c$.default)}(${r}, ${n})`):e.fail((0,Ky._)`${i} !== ${r}`)}};Zy.default=u$});var CR=w(Xy=>{"use strict";Object.defineProperty(Xy,"__esModule",{value:!0});var oA=me(),d$=xe(),f$=Af(),p$={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,oA._)`{allowedValues: ${e}}`},h$={keyword:"enum",schemaType:"array",$data:!0,error:p$,code(e){let{gen:t,data:r,$data:o,schema:n,schemaCode:i,it:s}=e;if(!o&&n.length===0)throw new Error("enum must have non-empty array");let a=n.length>=s.opts.loopEnum,l,c=()=>l??(l=(0,d$.useFunc)(t,f$.default)),A;if(a||o)A=t.let("valid"),e.block$data(A,d);else{if(!Array.isArray(n))throw new Error("ajv implementation error");let u=t.const("vSchema",i);A=(0,oA.or)(...n.map((p,h)=>f(u,h)))}e.pass(A);function d(){t.assign(A,!1),t.forOf("v",i,u=>t.if((0,oA._)`${c()}(${r}, ${u})`,()=>t.assign(A,!0).break()))}function f(u,p){let h=n[p];return typeof h=="object"&&h!==null?(0,oA._)`${c()}(${r}, ${u}[${p}])`:(0,oA._)`${r} === ${h}`}}};Xy.default=h$});var IR=w(eE=>{"use strict";Object.defineProperty(eE,"__esModule",{value:!0});var g$=lR(),m$=cR(),y$=dR(),E$=fR(),C$=pR(),I$=hR(),B$=gR(),Q$=yR(),b$=ER(),w$=CR(),S$=[g$.default,m$.default,y$.default,E$.default,C$.default,I$.default,B$.default,Q$.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},b$.default,w$.default];eE.default=S$});var rE=w(nA=>{"use strict";Object.defineProperty(nA,"__esModule",{value:!0});nA.validateAdditionalItems=void 0;var ms=me(),tE=xe(),T$={message:({params:{len:e}})=>(0,ms.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ms._)`{limit: ${e}}`},x$={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:T$,code(e){let{parentSchema:t,it:r}=e,{items:o}=t;if(!Array.isArray(o)){(0,tE.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}BR(e,o)}};function BR(e,t){let{gen:r,schema:o,data:n,keyword:i,it:s}=e;s.items=!0;let a=r.const("len",(0,ms._)`${n}.length`);if(o===!1)e.setParams({len:t.length}),e.pass((0,ms._)`${a} <= ${t.length}`);else if(typeof o=="object"&&!(0,tE.alwaysValidSchema)(s,o)){let c=r.var("valid",(0,ms._)`${a} <= ${t.length}`);r.if((0,ms.not)(c),()=>l(c)),e.ok(c)}function l(c){r.forRange("i",t.length,a,A=>{e.subschema({keyword:i,dataProp:A,dataPropType:tE.Type.Num},c),s.allErrors||r.if((0,ms.not)(c),()=>r.break())})}}nA.validateAdditionalItems=BR;nA.default=x$});var oE=w(iA=>{"use strict";Object.defineProperty(iA,"__esModule",{value:!0});iA.validateTuple=void 0;var QR=me(),uf=xe(),R$=Gr(),D$={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return bR(e,"additionalItems",t);r.items=!0,!(0,uf.alwaysValidSchema)(r,t)&&e.ok((0,R$.validateArray)(e))}};function bR(e,t,r=e.schema){let{gen:o,parentSchema:n,data:i,keyword:s,it:a}=e;A(n),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=uf.mergeEvaluated.items(o,r.length,a.items));let l=o.name("valid"),c=o.const("len",(0,QR._)`${i}.length`);r.forEach((d,f)=>{(0,uf.alwaysValidSchema)(a,d)||(o.if((0,QR._)`${c} > ${f}`,()=>e.subschema({keyword:s,schemaProp:f,dataProp:f},l)),e.ok(l))});function A(d){let{opts:f,errSchemaPath:u}=a,p=r.length,h=p===d.minItems&&(p===d.maxItems||d[t]===!1);if(f.strictTuples&&!h){let g=`"${s}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${u}"`;(0,uf.checkStrictMode)(a,g,f.strictTuples)}}}iA.validateTuple=bR;iA.default=D$});var wR=w(nE=>{"use strict";Object.defineProperty(nE,"__esModule",{value:!0});var F$=oE(),k$={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,F$.validateTuple)(e,"items")};nE.default=k$});var TR=w(iE=>{"use strict";Object.defineProperty(iE,"__esModule",{value:!0});var SR=me(),N$=xe(),v$=Gr(),P$=rE(),L$={message:({params:{len:e}})=>(0,SR.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,SR._)`{limit: ${e}}`},U$={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:L$,code(e){let{schema:t,parentSchema:r,it:o}=e,{prefixItems:n}=r;o.items=!0,!(0,N$.alwaysValidSchema)(o,t)&&(n?(0,P$.validateAdditionalItems)(e,n):e.ok((0,v$.validateArray)(e)))}};iE.default=U$});var xR=w(sE=>{"use strict";Object.defineProperty(sE,"__esModule",{value:!0});var Hr=me(),df=xe(),O$={message:({params:{min:e,max:t}})=>t===void 0?(0,Hr.str)`must contain at least ${e} valid item(s)`:(0,Hr.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Hr._)`{minContains: ${e}}`:(0,Hr._)`{minContains: ${e}, maxContains: ${t}}`},M$={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:O$,code(e){let{gen:t,schema:r,parentSchema:o,data:n,it:i}=e,s,a,{minContains:l,maxContains:c}=o;i.opts.next?(s=l===void 0?1:l,a=c):s=1;let A=t.const("len",(0,Hr._)`${n}.length`);if(e.setParams({min:s,max:a}),a===void 0&&s===0){(0,df.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&s>a){(0,df.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,df.alwaysValidSchema)(i,r)){let h=(0,Hr._)`${A} >= ${s}`;a!==void 0&&(h=(0,Hr._)`${h} && ${A} <= ${a}`),e.pass(h);return}i.items=!0;let d=t.name("valid");a===void 0&&s===1?u(d,()=>t.if(d,()=>t.break())):s===0?(t.let(d,!0),a!==void 0&&t.if((0,Hr._)`${n}.length > 0`,f)):(t.let(d,!1),f()),e.result(d,()=>e.reset());function f(){let h=t.name("_valid"),g=t.let("count",0);u(h,()=>t.if(h,()=>p(g)))}function u(h,g){t.forRange("i",0,A,m=>{e.subschema({keyword:"contains",dataProp:m,dataPropType:df.Type.Num,compositeRule:!0},h),g()})}function p(h){t.code((0,Hr._)`${h}++`),a===void 0?t.if((0,Hr._)`${h} >= ${s}`,()=>t.assign(d,!0).break()):(t.if((0,Hr._)`${h} > ${a}`,()=>t.assign(d,!1).break()),s===1?t.assign(d,!0):t.if((0,Hr._)`${h} >= ${s}`,()=>t.assign(d,!0)))}}};sE.default=M$});var FR=w(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.validateSchemaDeps=Oo.validatePropertyDeps=Oo.error=void 0;var aE=me(),_$=xe(),sA=Gr();Oo.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let o=t===1?"property":"properties";return(0,aE.str)`must have ${o} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:o}})=>(0,aE._)`{property: ${e},
    missingProperty: ${o},
    depsCount: ${t},
    deps: ${r}}`};var G$={keyword:"dependencies",type:"object",schemaType:"object",error:Oo.error,code(e){let[t,r]=j$(e);RR(e,t),DR(e,r)}};function j$({schema:e}){let t={},r={};for(let o in e){if(o==="__proto__")continue;let n=Array.isArray(e[o])?t:r;n[o]=e[o]}return[t,r]}function RR(e,t=e.schema){let{gen:r,data:o,it:n}=e;if(Object.keys(t).length===0)return;let i=r.let("missing");for(let s in t){let a=t[s];if(a.length===0)continue;let l=(0,sA.propertyInData)(r,o,s,n.opts.ownProperties);e.setParams({property:s,depsCount:a.length,deps:a.join(", ")}),n.allErrors?r.if(l,()=>{for(let c of a)(0,sA.checkReportMissingProp)(e,c)}):(r.if((0,aE._)`${l} && (${(0,sA.checkMissingProp)(e,a,i)})`),(0,sA.reportMissingProp)(e,i),r.else())}}Oo.validatePropertyDeps=RR;function DR(e,t=e.schema){let{gen:r,data:o,keyword:n,it:i}=e,s=r.name("valid");for(let a in t)(0,_$.alwaysValidSchema)(i,t[a])||(r.if((0,sA.propertyInData)(r,o,a,i.opts.ownProperties),()=>{let l=e.subschema({keyword:n,schemaProp:a},s);e.mergeValidEvaluated(l,s)},()=>r.var(s,!0)),e.ok(s))}Oo.validateSchemaDeps=DR;Oo.default=G$});var NR=w(lE=>{"use strict";Object.defineProperty(lE,"__esModule",{value:!0});var kR=me(),H$=xe(),V$={message:"property name must be valid",params:({params:e})=>(0,kR._)`{propertyName: ${e.propertyName}}`},q$={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:V$,code(e){let{gen:t,schema:r,data:o,it:n}=e;if((0,H$.alwaysValidSchema)(n,r))return;let i=t.name("valid");t.forIn("key",o,s=>{e.setParams({propertyName:s}),e.subschema({keyword:"propertyNames",data:s,dataTypes:["string"],propertyName:s,compositeRule:!0},i),t.if((0,kR.not)(i),()=>{e.error(!0),n.allErrors||t.break()})}),e.ok(i)}};lE.default=q$});var AE=w(cE=>{"use strict";Object.defineProperty(cE,"__esModule",{value:!0});var ff=Gr(),po=me(),Y$=Qn(),pf=xe(),W$={message:"must NOT have additional properties",params:({params:e})=>(0,po._)`{additionalProperty: ${e.additionalProperty}}`},J$={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:W$,code(e){let{gen:t,schema:r,parentSchema:o,data:n,errsCount:i,it:s}=e;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:l}=s;if(s.props=!0,l.removeAdditional!=="all"&&(0,pf.alwaysValidSchema)(s,r))return;let c=(0,ff.allSchemaProperties)(o.properties),A=(0,ff.allSchemaProperties)(o.patternProperties);d(),e.ok((0,po._)`${i} === ${Y$.default.errors}`);function d(){t.forIn("key",n,g=>{!c.length&&!A.length?p(g):t.if(f(g),()=>p(g))})}function f(g){let m;if(c.length>8){let y=(0,pf.schemaRefOrVal)(s,o.properties,"properties");m=(0,ff.isOwnProperty)(t,y,g)}else c.length?m=(0,po.or)(...c.map(y=>(0,po._)`${g} === ${y}`)):m=po.nil;return A.length&&(m=(0,po.or)(m,...A.map(y=>(0,po._)`${(0,ff.usePattern)(e,y)}.test(${g})`))),(0,po.not)(m)}function u(g){t.code((0,po._)`delete ${n}[${g}]`)}function p(g){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){u(g);return}if(r===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,pf.alwaysValidSchema)(s,r)){let m=t.name("valid");l.removeAdditional==="failing"?(h(g,m,!1),t.if((0,po.not)(m),()=>{e.reset(),u(g)})):(h(g,m),a||t.if((0,po.not)(m),()=>t.break()))}}function h(g,m,y){let E={keyword:"additionalProperties",dataProp:g,dataPropType:pf.Type.Str};y===!1&&Object.assign(E,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(E,m)}}};cE.default=J$});var LR=w(dE=>{"use strict";Object.defineProperty(dE,"__esModule",{value:!0});var z$=Yc(),vR=Gr(),uE=xe(),PR=AE(),$$={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:o,data:n,it:i}=e;i.opts.removeAdditional==="all"&&o.additionalProperties===void 0&&PR.default.code(new z$.KeywordCxt(i,PR.default,"additionalProperties"));let s=(0,vR.allSchemaProperties)(r);for(let d of s)i.definedProperties.add(d);i.opts.unevaluated&&s.length&&i.props!==!0&&(i.props=uE.mergeEvaluated.props(t,(0,uE.toHash)(s),i.props));let a=s.filter(d=>!(0,uE.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let l=t.name("valid");for(let d of a)c(d)?A(d):(t.if((0,vR.propertyInData)(t,n,d,i.opts.ownProperties)),A(d),i.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(l);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function A(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},l)}}};dE.default=$$});var _R=w(fE=>{"use strict";Object.defineProperty(fE,"__esModule",{value:!0});var UR=Gr(),hf=me(),OR=xe(),MR=xe(),K$={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:o,parentSchema:n,it:i}=e,{opts:s}=i,a=(0,UR.allSchemaProperties)(r),l=a.filter(h=>(0,OR.alwaysValidSchema)(i,r[h]));if(a.length===0||l.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=s.strictSchema&&!s.allowMatchingProperties&&n.properties,A=t.name("valid");i.props!==!0&&!(i.props instanceof hf.Name)&&(i.props=(0,MR.evaluatedPropsToName)(t,i.props));let{props:d}=i;f();function f(){for(let h of a)c&&u(h),i.allErrors?p(h):(t.var(A,!0),p(h),t.if(A))}function u(h){for(let g in c)new RegExp(h).test(g)&&(0,OR.checkStrictMode)(i,`property ${g} matches pattern ${h} (use allowMatchingProperties)`)}function p(h){t.forIn("key",o,g=>{t.if((0,hf._)`${(0,UR.usePattern)(e,h)}.test(${g})`,()=>{let m=l.includes(h);m||e.subschema({keyword:"patternProperties",schemaProp:h,dataProp:g,dataPropType:MR.Type.Str},A),i.opts.unevaluated&&d!==!0?t.assign((0,hf._)`${d}[${g}]`,!0):!m&&!i.allErrors&&t.if((0,hf.not)(A),()=>t.break())})})}}};fE.default=K$});var GR=w(pE=>{"use strict";Object.defineProperty(pE,"__esModule",{value:!0});var Z$=xe(),X$={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:o}=e;if((0,Z$.alwaysValidSchema)(o,r)){e.fail();return}let n=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},n),e.failResult(n,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};pE.default=X$});var jR=w(hE=>{"use strict";Object.defineProperty(hE,"__esModule",{value:!0});var e4=Gr(),t4={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:e4.validateUnion,error:{message:"must match a schema in anyOf"}};hE.default=t4});var HR=w(gE=>{"use strict";Object.defineProperty(gE,"__esModule",{value:!0});var gf=me(),r4=xe(),o4={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,gf._)`{passingSchemas: ${e.passing}}`},n4={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:o4,code(e){let{gen:t,schema:r,parentSchema:o,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(n.opts.discriminator&&o.discriminator)return;let i=r,s=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");e.setParams({passing:a}),t.block(c),e.result(s,()=>e.reset(),()=>e.error(!0));function c(){i.forEach((A,d)=>{let f;(0,r4.alwaysValidSchema)(n,A)?t.var(l,!0):f=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},l),d>0&&t.if((0,gf._)`${l} && ${s}`).assign(s,!1).assign(a,(0,gf._)`[${a}, ${d}]`).else(),t.if(l,()=>{t.assign(s,!0),t.assign(a,d),f&&e.mergeEvaluated(f,gf.Name)})})}}};gE.default=n4});var VR=w(mE=>{"use strict";Object.defineProperty(mE,"__esModule",{value:!0});var i4=xe(),s4={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:o}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let n=t.name("valid");r.forEach((i,s)=>{if((0,i4.alwaysValidSchema)(o,i))return;let a=e.subschema({keyword:"allOf",schemaProp:s},n);e.ok(n),e.mergeEvaluated(a)})}};mE.default=s4});var WR=w(yE=>{"use strict";Object.defineProperty(yE,"__esModule",{value:!0});var mf=me(),YR=xe(),a4={message:({params:e})=>(0,mf.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,mf._)`{failingKeyword: ${e.ifClause}}`},l4={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:a4,code(e){let{gen:t,parentSchema:r,it:o}=e;r.then===void 0&&r.else===void 0&&(0,YR.checkStrictMode)(o,'"if" without "then" and "else" is ignored');let n=qR(o,"then"),i=qR(o,"else");if(!n&&!i)return;let s=t.let("valid",!0),a=t.name("_valid");if(l(),e.reset(),n&&i){let A=t.let("ifClause");e.setParams({ifClause:A}),t.if(a,c("then",A),c("else",A))}else n?t.if(a,c("then")):t.if((0,mf.not)(a),c("else"));e.pass(s,()=>e.error(!0));function l(){let A=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(A)}function c(A,d){return()=>{let f=e.subschema({keyword:A},a);t.assign(s,a),e.mergeValidEvaluated(f,s),d?t.assign(d,(0,mf._)`${A}`):e.setParams({ifClause:A})}}}};function qR(e,t){let r=e.schema[t];return r!==void 0&&!(0,YR.alwaysValidSchema)(e,r)}yE.default=l4});var JR=w(EE=>{"use strict";Object.defineProperty(EE,"__esModule",{value:!0});var c4=xe(),A4={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,c4.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};EE.default=A4});var zR=w(CE=>{"use strict";Object.defineProperty(CE,"__esModule",{value:!0});var u4=rE(),d4=wR(),f4=oE(),p4=TR(),h4=xR(),g4=FR(),m4=NR(),y4=AE(),E4=LR(),C4=_R(),I4=GR(),B4=jR(),Q4=HR(),b4=VR(),w4=WR(),S4=JR();function T4(e=!1){let t=[I4.default,B4.default,Q4.default,b4.default,w4.default,S4.default,m4.default,y4.default,g4.default,E4.default,C4.default];return e?t.push(d4.default,p4.default):t.push(u4.default,f4.default),t.push(h4.default),t}CE.default=T4});var $R=w(IE=>{"use strict";Object.defineProperty(IE,"__esModule",{value:!0});var lt=me(),x4={message:({schemaCode:e})=>(0,lt.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,lt._)`{format: ${e}}`},R4={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:x4,code(e,t){let{gen:r,data:o,$data:n,schema:i,schemaCode:s,it:a}=e,{opts:l,errSchemaPath:c,schemaEnv:A,self:d}=a;if(!l.validateFormats)return;n?f():u();function f(){let p=r.scopeValue("formats",{ref:d.formats,code:l.code.formats}),h=r.const("fDef",(0,lt._)`${p}[${s}]`),g=r.let("fType"),m=r.let("format");r.if((0,lt._)`typeof ${h} == "object" && !(${h} instanceof RegExp)`,()=>r.assign(g,(0,lt._)`${h}.type || "string"`).assign(m,(0,lt._)`${h}.validate`),()=>r.assign(g,(0,lt._)`"string"`).assign(m,h)),e.fail$data((0,lt.or)(y(),E()));function y(){return l.strictSchema===!1?lt.nil:(0,lt._)`${s} && !${m}`}function E(){let I=A.$async?(0,lt._)`(${h}.async ? await ${m}(${o}) : ${m}(${o}))`:(0,lt._)`${m}(${o})`,C=(0,lt._)`(typeof ${m} == "function" ? ${I} : ${m}.test(${o}))`;return(0,lt._)`${m} && ${m} !== true && ${g} === ${t} && !${C}`}}function u(){let p=d.formats[i];if(!p){y();return}if(p===!0)return;let[h,g,m]=E(p);h===t&&e.pass(I());function y(){if(l.strictSchema===!1){d.logger.warn(C());return}throw new Error(C());function C(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function E(C){let B=C instanceof RegExp?(0,lt.regexpCode)(C):l.code.formats?(0,lt._)`${l.code.formats}${(0,lt.getProperty)(i)}`:void 0,R=r.scopeValue("formats",{key:i,ref:C,code:B});return typeof C=="object"&&!(C instanceof RegExp)?[C.type||"string",C.validate,(0,lt._)`${R}.validate`]:["string",C,R]}function I(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!A.$async)throw new Error("async format in sync schema");return(0,lt._)`await ${m}(${o})`}return typeof g=="function"?(0,lt._)`${m}(${o})`:(0,lt._)`${m}.test(${o})`}}}};IE.default=R4});var KR=w(BE=>{"use strict";Object.defineProperty(BE,"__esModule",{value:!0});var D4=$R(),F4=[D4.default];BE.default=F4});var ZR=w(ja=>{"use strict";Object.defineProperty(ja,"__esModule",{value:!0});ja.contentVocabulary=ja.metadataVocabulary=void 0;ja.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ja.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var eD=w(QE=>{"use strict";Object.defineProperty(QE,"__esModule",{value:!0});var k4=aR(),N4=IR(),v4=zR(),P4=KR(),XR=ZR(),L4=[k4.default,N4.default,(0,v4.default)(),P4.default,XR.metadataVocabulary,XR.contentVocabulary];QE.default=L4});var rD=w(yf=>{"use strict";Object.defineProperty(yf,"__esModule",{value:!0});yf.DiscrError=void 0;var tD;(function(e){e.Tag="tag",e.Mapping="mapping"})(tD||(yf.DiscrError=tD={}))});var nD=w(wE=>{"use strict";Object.defineProperty(wE,"__esModule",{value:!0});var Ha=me(),bE=rD(),oD=Xd(),U4=Wc(),O4=xe(),M4={message:({params:{discrError:e,tagName:t}})=>e===bE.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Ha._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},_4={keyword:"discriminator",type:"object",schemaType:"object",error:M4,code(e){let{gen:t,data:r,schema:o,parentSchema:n,it:i}=e,{oneOf:s}=n;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=o.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(o.mapping)throw new Error("discriminator: mapping is not supported");if(!s)throw new Error("discriminator: requires oneOf keyword");let l=t.let("valid",!1),c=t.const("tag",(0,Ha._)`${r}${(0,Ha.getProperty)(a)}`);t.if((0,Ha._)`typeof ${c} == "string"`,()=>A(),()=>e.error(!1,{discrError:bE.DiscrError.Tag,tag:c,tagName:a})),e.ok(l);function A(){let u=f();t.if(!1);for(let p in u)t.elseIf((0,Ha._)`${c} === ${p}`),t.assign(l,d(u[p]));t.else(),e.error(!1,{discrError:bE.DiscrError.Mapping,tag:c,tagName:a}),t.endIf()}function d(u){let p=t.name("valid"),h=e.subschema({keyword:"oneOf",schemaProp:u},p);return e.mergeEvaluated(h,Ha.Name),p}function f(){var u;let p={},h=m(n),g=!0;for(let I=0;I<s.length;I++){let C=s[I];if(C?.$ref&&!(0,O4.schemaHasRulesButRef)(C,i.self.RULES)){let R=C.$ref;if(C=oD.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,R),C instanceof oD.SchemaEnv&&(C=C.schema),C===void 0)throw new U4.default(i.opts.uriResolver,i.baseId,R)}let B=(u=C?.properties)===null||u===void 0?void 0:u[a];if(typeof B!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(h||m(C)),y(B,I)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function m({required:I}){return Array.isArray(I)&&I.includes(a)}function y(I,C){if(I.const)E(I.const,C);else if(I.enum)for(let B of I.enum)E(B,C);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function E(I,C){if(typeof I!="string"||I in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[I]=C}}}};wE.default=_4});var iD=w((QBe,G4)=>{G4.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var aD=w((Xe,SE)=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.MissingRefError=Xe.ValidationError=Xe.CodeGen=Xe.Name=Xe.nil=Xe.stringify=Xe.str=Xe._=Xe.KeywordCxt=Xe.Ajv=void 0;var j4=tR(),H4=eD(),V4=nD(),sD=iD(),q4=["/properties"],Ef="http://json-schema.org/draft-07/schema",Va=class extends j4.default{_addVocabularies(){super._addVocabularies(),H4.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(V4.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(sD,q4):sD;this.addMetaSchema(t,Ef,!1),this.refs["http://json-schema.org/schema"]=Ef}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Ef)?Ef:void 0)}};Xe.Ajv=Va;SE.exports=Xe=Va;SE.exports.Ajv=Va;Object.defineProperty(Xe,"__esModule",{value:!0});Xe.default=Va;var Y4=Yc();Object.defineProperty(Xe,"KeywordCxt",{enumerable:!0,get:function(){return Y4.KeywordCxt}});var qa=me();Object.defineProperty(Xe,"_",{enumerable:!0,get:function(){return qa._}});Object.defineProperty(Xe,"str",{enumerable:!0,get:function(){return qa.str}});Object.defineProperty(Xe,"stringify",{enumerable:!0,get:function(){return qa.stringify}});Object.defineProperty(Xe,"nil",{enumerable:!0,get:function(){return qa.nil}});Object.defineProperty(Xe,"Name",{enumerable:!0,get:function(){return qa.Name}});Object.defineProperty(Xe,"CodeGen",{enumerable:!0,get:function(){return qa.CodeGen}});var W4=Kd();Object.defineProperty(Xe,"ValidationError",{enumerable:!0,get:function(){return W4.default}});var J4=Wc();Object.defineProperty(Xe,"MissingRefError",{enumerable:!0,get:function(){return J4.default}})});var ID=w(vE=>{"use strict";vE.read=function(e,t,r,o,n){var i,s,a=n*8-o-1,l=(1<<a)-1,c=l>>1,A=-7,d=r?n-1:0,f=r?-1:1,u=e[t+d];for(d+=f,i=u&(1<<-A)-1,u>>=-A,A+=a;A>0;i=i*256+e[t+d],d+=f,A-=8);for(s=i&(1<<-A)-1,i>>=-A,A+=o;A>0;s=s*256+e[t+d],d+=f,A-=8);if(i===0)i=1-c;else{if(i===l)return s?NaN:(u?-1:1)*(1/0);s=s+Math.pow(2,o),i=i-c}return(u?-1:1)*s*Math.pow(2,i-o)};vE.write=function(e,t,r,o,n,i){var s,a,l,c=i*8-n-1,A=(1<<c)-1,d=A>>1,f=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=o?0:i-1,p=o?1:-1,h=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=A):(s=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?t+=f/l:t+=f*Math.pow(2,1-d),t*l>=2&&(s++,l/=2),s+d>=A?(a=0,s=A):s+d>=1?(a=(t*l-1)*Math.pow(2,n),s=s+d):(a=t*Math.pow(2,d-1)*Math.pow(2,n),s=0));n>=8;e[r+u]=a&255,u+=p,a/=256,n-=8);for(s=s<<n|a,c+=n;c>0;e[r+u]=s&255,u+=p,s/=256,c-=8);e[r+u-p]|=h*128}});var qD=w((Zbe,VD)=>{"use strict";var x8=function(t){return R8(t)&&!D8(t)};function R8(e){return!!e&&typeof e=="object"}function D8(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||N8(e)}var F8=typeof Symbol=="function"&&Symbol.for,k8=F8?Symbol.for("react.element"):60103;function N8(e){return e.$$typeof===k8}function v8(e){return Array.isArray(e)?[]:{}}function gA(e,t){return t.clone!==!1&&t.isMergeableObject(e)?$a(v8(e),e,t):e}function P8(e,t,r){return e.concat(t).map(function(o){return gA(o,r)})}function L8(e,t){if(!t.customMerge)return $a;var r=t.customMerge(e);return typeof r=="function"?r:$a}function U8(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function jD(e){return Object.keys(e).concat(U8(e))}function HD(e,t){try{return t in e}catch{return!1}}function O8(e,t){return HD(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function M8(e,t,r){var o={};return r.isMergeableObject(e)&&jD(e).forEach(function(n){o[n]=gA(e[n],r)}),jD(t).forEach(function(n){O8(e,n)||(HD(e,n)&&r.isMergeableObject(t[n])?o[n]=L8(n,r)(e[n],t[n],r):o[n]=gA(t[n],r))}),o}function $a(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||P8,r.isMergeableObject=r.isMergeableObject||x8,r.cloneUnlessOtherwiseSpecified=gA;var o=Array.isArray(t),n=Array.isArray(e),i=o===n;return i?o?r.arrayMerge(e,t,r):M8(e,t,r):gA(t,r)}$a.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(o,n){return $a(o,n,r)},{})};var _8=$a;VD.exports=_8});var XD=w((Lwe,ZD)=>{"use strict";function V8(e){return e>=55296&&e<=56319}function q8(e){return e>=56320&&e<=57343}ZD.exports=function(t,r,o){if(typeof r!="string")throw new Error("Input must be string");for(var n=r.length,i=0,s,a,l=0;l<n;l+=1){if(s=r.charCodeAt(l),a=r[l],V8(s)&&q8(r.charCodeAt(l+1))&&(l+=1,a+=r[l]),i+=t(a),i===o)return r.slice(0,l+1);if(i>o)return r.slice(0,l-a.length+1)}return r}});var tF=w((Uwe,eF)=>{"use strict";var Y8=XD(),W8=Buffer.byteLength.bind(Buffer);eF.exports=Y8.bind(null,W8)});var kf=w((Owe,oF)=>{"use strict";var J8=tF(),z8=/[\/\?<>\\:\*\|"]/g,$8=/[\x00-\x1f\x80-\x9f]/g,K8=/^\.+$/,Z8=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,X8=/[\. ]+$/;function rF(e,t){if(typeof e!="string")throw new Error("Input must be string");var r=e.replace(z8,t).replace($8,t).replace(K8,t).replace(Z8,t).replace(X8,t);return J8(r,255)}oF.exports=function(e,t){var r=t&&t.replacement||"",o=rF(e,r);return r===""?o:rF(o,"")}});var lF=w((aF,Nf)=>{"use strict";(function(e){"use strict";let t="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${t}\\.${t}\\.${t}\\.${t}$`,"i"),threeOctet:new RegExp(`^${t}\\.${t}\\.${t}$`,"i"),twoOctet:new RegExp(`^${t}\\.${t}$`,"i"),longValue:new RegExp(`^${t}$`,"i")},o=new RegExp("^0[0-7]+$","i"),n=new RegExp("^0x[a-f0-9]+$","i"),i="%[0-9a-z]{1,}",s="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(i,"i"),native:new RegExp(`^(::)?(${s})?([0-9a-f]+)?(::)?(${i})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${t}\\.${t}\\.${t}\\.${t}(${i})?)$`,"i"),transitional:new RegExp(`^((?:${s})|(?:::)(?:${s})?)${t}\\.${t}\\.${t}\\.${t}(${i})?$`,"i")};function l(u,p){if(u.indexOf("::")!==u.lastIndexOf("::"))return null;let h=0,g=-1,m=(u.match(a.zoneIndex)||[])[0],y,E;for(m&&(m=m.substring(1),u=u.replace(/%.+$/,""));(g=u.indexOf(":",g+1))>=0;)h++;if(u.substr(0,2)==="::"&&h--,u.substr(-2,2)==="::"&&h--,h>p)return null;for(E=p-h,y=":";E--;)y+="0:";return u=u.replace("::",y),u[0]===":"&&(u=u.slice(1)),u[u.length-1]===":"&&(u=u.slice(0,-1)),p=function(){let I=u.split(":"),C=[];for(let B=0;B<I.length;B++)C.push(parseInt(I[B],16));return C}(),{parts:p,zoneId:m}}function c(u,p,h,g){if(u.length!==p.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let m=0,y;for(;g>0;){if(y=h-g,y<0&&(y=0),u[m]>>y!==p[m]>>y)return!1;g-=h,m+=1}return!0}function A(u){if(n.test(u))return parseInt(u,16);if(u[0]==="0"&&!isNaN(parseInt(u[1],10))){if(o.test(u))return parseInt(u,8);throw new Error(`ipaddr: cannot parse ${u} as octal`)}return parseInt(u,10)}function d(u,p){for(;u.length<p;)u=`0${u}`;return u}let f={};f.IPv4=function(){function u(p){if(p.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let h,g;for(h=0;h<p.length;h++)if(g=p[h],!(0<=g&&g<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=p}return u.prototype.SpecialRanges={unspecified:[[new u([0,0,0,0]),8]],broadcast:[[new u([255,255,255,255]),32]],multicast:[[new u([224,0,0,0]),4]],linkLocal:[[new u([169,254,0,0]),16]],loopback:[[new u([127,0,0,0]),8]],carrierGradeNat:[[new u([100,64,0,0]),10]],private:[[new u([10,0,0,0]),8],[new u([172,16,0,0]),12],[new u([192,168,0,0]),16]],reserved:[[new u([192,0,0,0]),24],[new u([192,0,2,0]),24],[new u([192,88,99,0]),24],[new u([198,18,0,0]),15],[new u([198,51,100,0]),24],[new u([203,0,113,0]),24],[new u([240,0,0,0]),4]],as112:[[new u([192,175,48,0]),24],[new u([192,31,196,0]),24]],amt:[[new u([192,52,193,0]),24]]},u.prototype.kind=function(){return"ipv4"},u.prototype.match=function(p,h){let g;if(h===void 0&&(g=p,p=g[0],h=g[1]),p.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return c(this.octets,p.octets,8,h)},u.prototype.prefixLengthFromSubnetMask=function(){let p=0,h=!1,g={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},m,y,E;for(m=3;m>=0;m-=1)if(y=this.octets[m],y in g){if(E=g[y],h&&E!==0)return null;E!==8&&(h=!0),p+=E}else return null;return 32-p},u.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},u.prototype.toByteArray=function(){return this.octets.slice(0)},u.prototype.toIPv4MappedAddress=function(){return f.IPv6.parse(`::ffff:${this.toString()}`)},u.prototype.toNormalizedString=function(){return this.toString()},u.prototype.toString=function(){return this.octets.join(".")},u}(),f.IPv4.broadcastAddressFromCIDR=function(u){try{let p=this.parseCIDR(u),h=p[0].toByteArray(),g=this.subnetMaskFromPrefixLength(p[1]).toByteArray(),m=[],y=0;for(;y<4;)m.push(parseInt(h[y],10)|parseInt(g[y],10)^255),y++;return new this(m)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.isIPv4=function(u){return this.parser(u)!==null},f.IPv4.isValid=function(u){try{return new this(this.parser(u)),!0}catch{return!1}},f.IPv4.isValidCIDR=function(u){try{return this.parseCIDR(u),!0}catch{return!1}},f.IPv4.isValidFourPartDecimal=function(u){return!!(f.IPv4.isValid(u)&&u.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},f.IPv4.networkAddressFromCIDR=function(u){let p,h,g,m,y;try{for(p=this.parseCIDR(u),g=p[0].toByteArray(),y=this.subnetMaskFromPrefixLength(p[1]).toByteArray(),m=[],h=0;h<4;)m.push(parseInt(g[h],10)&parseInt(y[h],10)),h++;return new this(m)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},f.IPv4.parse=function(u){let p=this.parser(u);if(p===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(p)},f.IPv4.parseCIDR=function(u){let p;if(p=u.match(/^(.+)\/(\d+)$/)){let h=parseInt(p[2]);if(h>=0&&h<=32){let g=[this.parse(p[1]),h];return Object.defineProperty(g,"toString",{value:function(){return this.join("/")}}),g}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},f.IPv4.parser=function(u){let p,h,g;if(p=u.match(r.fourOctet))return function(){let m=p.slice(1,6),y=[];for(let E=0;E<m.length;E++)h=m[E],y.push(A(h));return y}();if(p=u.match(r.longValue)){if(g=A(p[1]),g>4294967295||g<0)throw new Error("ipaddr: address outside defined range");return function(){let m=[],y;for(y=0;y<=24;y+=8)m.push(g>>y&255);return m}().reverse()}else return(p=u.match(r.twoOctet))?function(){let m=p.slice(1,4),y=[];if(g=A(m[1]),g>16777215||g<0)throw new Error("ipaddr: address outside defined range");return y.push(A(m[0])),y.push(g>>16&255),y.push(g>>8&255),y.push(g&255),y}():(p=u.match(r.threeOctet))?function(){let m=p.slice(1,5),y=[];if(g=A(m[2]),g>65535||g<0)throw new Error("ipaddr: address outside defined range");return y.push(A(m[0])),y.push(A(m[1])),y.push(g>>8&255),y.push(g&255),y}():null},f.IPv4.subnetMaskFromPrefixLength=function(u){if(u=parseInt(u),u<0||u>32)throw new Error("ipaddr: invalid IPv4 prefix length");let p=[0,0,0,0],h=0,g=Math.floor(u/8);for(;h<g;)p[h]=255,h++;return g<4&&(p[g]=Math.pow(2,u%8)-1<<8-u%8),new this(p)},f.IPv6=function(){function u(p,h){let g,m;if(p.length===16)for(this.parts=[],g=0;g<=14;g+=2)this.parts.push(p[g]<<8|p[g+1]);else if(p.length===8)this.parts=p;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(g=0;g<this.parts.length;g++)if(m=this.parts[g],!(0<=m&&m<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");h&&(this.zoneId=h)}return u.prototype.SpecialRanges={unspecified:[new u([0,0,0,0,0,0,0,0]),128],linkLocal:[new u([65152,0,0,0,0,0,0,0]),10],multicast:[new u([65280,0,0,0,0,0,0,0]),8],loopback:[new u([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new u([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new u([0,0,0,0,0,65535,0,0]),96],discard:[new u([256,0,0,0,0,0,0,0]),64],rfc6145:[new u([0,0,0,0,65535,0,0,0]),96],rfc6052:[new u([100,65435,0,0,0,0,0,0]),96],"6to4":[new u([8194,0,0,0,0,0,0,0]),16],teredo:[new u([8193,0,0,0,0,0,0,0]),32],benchmarking:[new u([8193,2,0,0,0,0,0,0]),48],amt:[new u([8193,3,0,0,0,0,0,0]),32],as112v6:[[new u([8193,4,274,0,0,0,0,0]),48],[new u([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new u([8193,16,0,0,0,0,0,0]),28],orchid2:[new u([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new u([8193,48,0,0,0,0,0,0]),28],reserved:[[new u([8193,0,0,0,0,0,0,0]),23],[new u([8193,3512,0,0,0,0,0,0]),32]]},u.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},u.prototype.kind=function(){return"ipv6"},u.prototype.match=function(p,h){let g;if(h===void 0&&(g=p,p=g[0],h=g[1]),p.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return c(this.parts,p.parts,16,h)},u.prototype.prefixLengthFromSubnetMask=function(){let p=0,h=!1,g={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},m,y;for(let E=7;E>=0;E-=1)if(m=this.parts[E],m in g){if(y=g[m],h&&y!==0)return null;y!==16&&(h=!0),p+=y}else return null;return 128-p},u.prototype.range=function(){return f.subnetMatch(this,this.SpecialRanges)},u.prototype.toByteArray=function(){let p,h=[],g=this.parts;for(let m=0;m<g.length;m++)p=g[m],h.push(p>>8),h.push(p&255);return h},u.prototype.toFixedLengthString=function(){let p=function(){let g=[];for(let m=0;m<this.parts.length;m++)g.push(d(this.parts[m].toString(16),4));return g}.call(this).join(":"),h="";return this.zoneId&&(h=`%${this.zoneId}`),p+h},u.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let p=this.parts.slice(-2),h=p[0],g=p[1];return new f.IPv4([h>>8,h&255,g>>8,g&255])},u.prototype.toNormalizedString=function(){let p=function(){let g=[];for(let m=0;m<this.parts.length;m++)g.push(this.parts[m].toString(16));return g}.call(this).join(":"),h="";return this.zoneId&&(h=`%${this.zoneId}`),p+h},u.prototype.toRFC5952String=function(){let p=/((^|:)(0(:|$)){2,})/g,h=this.toNormalizedString(),g=0,m=-1,y;for(;y=p.exec(h);)y[0].length>m&&(g=y.index,m=y[0].length);return m<0?h:`${h.substring(0,g)}::${h.substring(g+m)}`},u.prototype.toString=function(){return this.toRFC5952String()},u}(),f.IPv6.broadcastAddressFromCIDR=function(u){try{let p=this.parseCIDR(u),h=p[0].toByteArray(),g=this.subnetMaskFromPrefixLength(p[1]).toByteArray(),m=[],y=0;for(;y<16;)m.push(parseInt(h[y],10)|parseInt(g[y],10)^255),y++;return new this(m)}catch(p){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${p})`)}},f.IPv6.isIPv6=function(u){return this.parser(u)!==null},f.IPv6.isValid=function(u){if(typeof u=="string"&&u.indexOf(":")===-1)return!1;try{let p=this.parser(u);return new this(p.parts,p.zoneId),!0}catch{return!1}},f.IPv6.isValidCIDR=function(u){if(typeof u=="string"&&u.indexOf(":")===-1)return!1;try{return this.parseCIDR(u),!0}catch{return!1}},f.IPv6.networkAddressFromCIDR=function(u){let p,h,g,m,y;try{for(p=this.parseCIDR(u),g=p[0].toByteArray(),y=this.subnetMaskFromPrefixLength(p[1]).toByteArray(),m=[],h=0;h<16;)m.push(parseInt(g[h],10)&parseInt(y[h],10)),h++;return new this(m)}catch(E){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${E})`)}},f.IPv6.parse=function(u){let p=this.parser(u);if(p.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(p.parts,p.zoneId)},f.IPv6.parseCIDR=function(u){let p,h,g;if((h=u.match(/^(.+)\/(\d+)$/))&&(p=parseInt(h[2]),p>=0&&p<=128))return g=[this.parse(h[1]),p],Object.defineProperty(g,"toString",{value:function(){return this.join("/")}}),g;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},f.IPv6.parser=function(u){let p,h,g,m,y,E;if(g=u.match(a.deprecatedTransitional))return this.parser(`::ffff:${g[1]}`);if(a.native.test(u))return l(u,8);if((g=u.match(a.transitional))&&(E=g[6]||"",p=g[1],g[1].endsWith("::")||(p=p.slice(0,-1)),p=l(p+E,6),p.parts)){for(y=[parseInt(g[2]),parseInt(g[3]),parseInt(g[4]),parseInt(g[5])],h=0;h<y.length;h++)if(m=y[h],!(0<=m&&m<=255))return null;return p.parts.push(y[0]<<8|y[1]),p.parts.push(y[2]<<8|y[3]),{parts:p.parts,zoneId:p.zoneId}}return null},f.IPv6.subnetMaskFromPrefixLength=function(u){if(u=parseInt(u),u<0||u>128)throw new Error("ipaddr: invalid IPv6 prefix length");let p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0,g=Math.floor(u/8);for(;h<g;)p[h]=255,h++;return g<16&&(p[g]=Math.pow(2,u%8)-1<<8-u%8),new this(p)},f.fromByteArray=function(u){let p=u.length;if(p===4)return new f.IPv4(u);if(p===16)return new f.IPv6(u);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},f.isValid=function(u){return f.IPv6.isValid(u)||f.IPv4.isValid(u)},f.isValidCIDR=function(u){return f.IPv6.isValidCIDR(u)||f.IPv4.isValidCIDR(u)},f.parse=function(u){if(f.IPv6.isValid(u))return f.IPv6.parse(u);if(f.IPv4.isValid(u))return f.IPv4.parse(u);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},f.parseCIDR=function(u){try{return f.IPv6.parseCIDR(u)}catch{try{return f.IPv4.parseCIDR(u)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},f.process=function(u){let p=this.parse(u);return p.kind()==="ipv6"&&p.isIPv4MappedAddress()?p.toIPv4Address():p},f.subnetMatch=function(u,p,h){let g,m,y,E;h==null&&(h="unicast");for(m in p)if(Object.prototype.hasOwnProperty.call(p,m)){for(y=p[m],y[0]&&!(y[0]instanceof Array)&&(y=[y]),g=0;g<y.length;g++)if(E=y[g],u.kind()===E[0].kind()&&u.match.apply(u,E))return m}return h},typeof Nf<"u"&&Nf.exports?Nf.exports=f:e.ipaddr=f})(aF)});var Me=w((Vwe,cF)=>{"use strict";cF.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var JE=w((qwe,fF)=>{"use strict";var Xa=0,jE=1e3,HE=(jE>>1)-1,Dn,VE=Symbol("kFastTimer"),Fn=[],qE=-2,YE=-1,uF=0,AF=1;function WE(){Xa+=HE;let e=0,t=Fn.length;for(;e<t;){let r=Fn[e];r._state===uF?(r._idleStart=Xa-HE,r._state=AF):r._state===AF&&Xa>=r._idleStart+r._idleTimeout&&(r._state=YE,r._idleStart=-1,r._onTimeout(r._timerArg)),r._state===YE?(r._state=qE,--t!==0&&(Fn[e]=Fn[t])):++e}Fn.length=t,Fn.length!==0&&dF()}function dF(){Dn?Dn.refresh():(clearTimeout(Dn),Dn=setTimeout(WE,HE),Dn.unref&&Dn.unref())}var vf=class{[VE]=!0;_state=qE;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(t,r,o){this._onTimeout=t,this._idleTimeout=r,this._timerArg=o,this.refresh()}refresh(){this._state===qE&&Fn.push(this),(!Dn||Fn.length===1)&&dF(),this._state=uF}clear(){this._state=YE,this._idleStart=-1}};fF.exports={setTimeout(e,t,r){return t<=jE?setTimeout(e,t,r):new vf(e,t,r)},clearTimeout(e){e[VE]?e.clear():clearTimeout(e)},setFastTimeout(e,t,r){return new vf(e,t,r)},clearFastTimeout(e){e.clear()},now(){return Xa},tick(e=0){Xa+=e-jE+1,WE(),WE()},reset(){Xa=0,Fn.length=0,clearTimeout(Dn),Dn=null},kFastTimer:VE}});var Ee=w((Ywe,pF)=>{"use strict";var ot=class extends Error{constructor(t,r){super(t,r),this.name="UndiciError",this.code="UND_ERR"}},zE=class extends ot{constructor(t){super(t),this.name="ConnectTimeoutError",this.message=t||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},$E=class extends ot{constructor(t){super(t),this.name="HeadersTimeoutError",this.message=t||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},KE=class extends ot{constructor(t){super(t),this.name="HeadersOverflowError",this.message=t||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},ZE=class extends ot{constructor(t){super(t),this.name="BodyTimeoutError",this.message=t||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},XE=class extends ot{constructor(t,r,o,n){super(t),this.name="ResponseStatusCodeError",this.message=t||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=n,this.status=r,this.statusCode=r,this.headers=o}},eC=class extends ot{constructor(t){super(t),this.name="InvalidArgumentError",this.message=t||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},tC=class extends ot{constructor(t){super(t),this.name="InvalidReturnValueError",this.message=t||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},Pf=class extends ot{constructor(t){super(t),this.name="AbortError",this.message=t||"The operation was aborted"}},rC=class extends Pf{constructor(t){super(t),this.name="AbortError",this.message=t||"Request aborted",this.code="UND_ERR_ABORTED"}},oC=class extends ot{constructor(t){super(t),this.name="InformationalError",this.message=t||"Request information",this.code="UND_ERR_INFO"}},nC=class extends ot{constructor(t){super(t),this.name="RequestContentLengthMismatchError",this.message=t||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},iC=class extends ot{constructor(t){super(t),this.name="ResponseContentLengthMismatchError",this.message=t||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},sC=class extends ot{constructor(t){super(t),this.name="ClientDestroyedError",this.message=t||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},aC=class extends ot{constructor(t){super(t),this.name="ClientClosedError",this.message=t||"The client is closed",this.code="UND_ERR_CLOSED"}},lC=class extends ot{constructor(t,r){super(t),this.name="SocketError",this.message=t||"Socket error",this.code="UND_ERR_SOCKET",this.socket=r}},cC=class extends ot{constructor(t){super(t),this.name="NotSupportedError",this.message=t||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},AC=class extends ot{constructor(t){super(t),this.name="MissingUpstreamError",this.message=t||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},uC=class extends Error{constructor(t,r,o){super(t),this.name="HTTPParserError",this.code=r?`HPE_${r}`:void 0,this.data=o?o.toString():void 0}},dC=class extends ot{constructor(t){super(t),this.name="ResponseExceededMaxSizeError",this.message=t||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},fC=class extends ot{constructor(t,r,{headers:o,data:n}){super(t),this.name="RequestRetryError",this.message=t||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=r,this.data=n,this.headers=o}},pC=class extends ot{constructor(t,r,{headers:o,body:n}){super(t),this.name="ResponseError",this.message=t||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=r,this.body=n,this.headers=o}},hC=class extends ot{constructor(t,r,o={}){super(r,{cause:t,...o}),this.name="SecureProxyConnectionError",this.message=r||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=t}};pF.exports={AbortError:Pf,HTTPParserError:uC,UndiciError:ot,HeadersTimeoutError:$E,HeadersOverflowError:KE,BodyTimeoutError:ZE,RequestContentLengthMismatchError:nC,ConnectTimeoutError:zE,ResponseStatusCodeError:XE,InvalidArgumentError:eC,InvalidReturnValueError:tC,RequestAbortedError:rC,ClientDestroyedError:sC,ClientClosedError:aC,InformationalError:oC,SocketError:lC,NotSupportedError:cC,ResponseContentLengthMismatchError:iC,BalancedPoolMissingUpstreamError:AC,ResponseExceededMaxSizeError:dC,RequestRetryError:fC,ResponseError:pC,SecureProxyConnectionError:hC}});var Uf=w((Wwe,gF)=>{"use strict";var gC=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"],Lf={};Object.setPrototypeOf(Lf,null);var hF={};Object.setPrototypeOf(hF,null);function e3(e){let t=hF[e];return t===void 0&&(t=Buffer.from(e)),t}for(let e=0;e<gC.length;++e){let t=gC[e],r=t.toLowerCase();Lf[t]=Lf[r]=r}gF.exports={wellknownHeaderNames:gC,headerNameLowerCasedRecord:Lf,getHeaderNameAsBuffer:e3}});var CF=w((Jwe,EF)=>{"use strict";var{wellknownHeaderNames:mF,headerNameLowerCasedRecord:t3}=Uf(),mC=class e{value=null;left=null;middle=null;right=null;code;constructor(t,r,o){if(o===void 0||o>=t.length)throw new TypeError("Unreachable");if((this.code=t.charCodeAt(o))>127)throw new TypeError("key must be ascii string");t.length!==++o?this.middle=new e(t,r,o):this.value=r}add(t,r){let o=t.length;if(o===0)throw new TypeError("Unreachable");let n=0,i=this;for(;;){let s=t.charCodeAt(n);if(s>127)throw new TypeError("key must be ascii string");if(i.code===s)if(o===++n){i.value=r;break}else if(i.middle!==null)i=i.middle;else{i.middle=new e(t,r,n);break}else if(i.code<s)if(i.left!==null)i=i.left;else{i.left=new e(t,r,n);break}else if(i.right!==null)i=i.right;else{i.right=new e(t,r,n);break}}}search(t){let r=t.length,o=0,n=this;for(;n!==null&&o<r;){let i=t[o];for(i<=90&&i>=65&&(i|=32);n!==null;){if(i===n.code){if(r===++o)return n;n=n.middle;break}n=n.code<i?n.left:n.right}}return null}},Of=class{node=null;insert(t,r){this.node===null?this.node=new mC(t,r,0):this.node.add(t,r)}lookup(t){return this.node?.search(t)?.value??null}},yF=new Of;for(let e=0;e<mF.length;++e){let t=t3[mF[e]];yF.insert(t,t)}EF.exports={TernarySearchTree:Of,tree:yF}});var ue=w((zwe,_F)=>{"use strict";var yA=v("node:assert"),{kDestroyed:bF,kBodyUsed:el,kListeners:_f,kBody:IF}=Me(),{IncomingMessage:r3}=v("node:http"),wF=v("node:stream"),o3=v("node:net"),{Blob:n3}=v("node:buffer"),i3=v("node:util"),{stringify:s3}=v("node:querystring"),{EventEmitter:a3}=v("node:events"),Mf=JE(),{InvalidArgumentError:Bt,ConnectTimeoutError:l3}=Ee(),{headerNameLowerCasedRecord:c3}=Uf(),{tree:SF}=CF(),[A3,u3]=process.versions.node.split(".",2).map(e=>Number(e)),jf=class{constructor(t){this[IF]=t,this[el]=!1}async*[Symbol.asyncIterator](){yA(!this[el],"disturbed"),this[el]=!0,yield*this[IF]}};function BF(){}function d3(e){return Hf(e)?(FF(e)===0&&e.on("data",function(){yA(!1)}),typeof e.readableDidRead!="boolean"&&(e[el]=!1,a3.prototype.on.call(e,"data",function(){this[el]=!0})),e):e&&typeof e.pipeTo=="function"?new jf(e):e&&typeof e!="string"&&!ArrayBuffer.isView(e)&&DF(e)?new jf(e):e}function Hf(e){return e&&typeof e=="object"&&typeof e.pipe=="function"&&typeof e.on=="function"}function TF(e){if(e===null)return!1;if(e instanceof n3)return!0;if(typeof e!="object")return!1;{let t=e[Symbol.toStringTag];return(t==="Blob"||t==="File")&&("stream"in e&&typeof e.stream=="function"||"arrayBuffer"in e&&typeof e.arrayBuffer=="function")}}function f3(e,t){if(e.includes("?")||e.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let r=s3(t);return r&&(e+="?"+r),e}function xF(e){let t=parseInt(e,10);return t===Number(e)&&t>=0&&t<=65535}function Gf(e){return e!=null&&e[0]==="h"&&e[1]==="t"&&e[2]==="t"&&e[3]==="p"&&(e[4]===":"||e[4]==="s"&&e[5]===":")}function RF(e){if(typeof e=="string"){if(e=new URL(e),!Gf(e.origin||e.protocol))throw new Bt("Invalid URL protocol: the URL must start with `http:` or `https:`.");return e}if(!e||typeof e!="object")throw new Bt("Invalid URL: The URL argument must be a non-null object.");if(!(e instanceof URL)){if(e.port!=null&&e.port!==""&&xF(e.port)===!1)throw new Bt("Invalid URL: port must be a valid integer or a string representation of an integer.");if(e.path!=null&&typeof e.path!="string")throw new Bt("Invalid URL path: the path must be a string or null/undefined.");if(e.pathname!=null&&typeof e.pathname!="string")throw new Bt("Invalid URL pathname: the pathname must be a string or null/undefined.");if(e.hostname!=null&&typeof e.hostname!="string")throw new Bt("Invalid URL hostname: the hostname must be a string or null/undefined.");if(e.origin!=null&&typeof e.origin!="string")throw new Bt("Invalid URL origin: the origin must be a string or null/undefined.");if(!Gf(e.origin||e.protocol))throw new Bt("Invalid URL protocol: the URL must start with `http:` or `https:`.");let t=e.port!=null?e.port:e.protocol==="https:"?443:80,r=e.origin!=null?e.origin:`${e.protocol||""}//${e.hostname||""}:${t}`,o=e.path!=null?e.path:`${e.pathname||""}${e.search||""}`;return r[r.length-1]==="/"&&(r=r.slice(0,r.length-1)),o&&o[0]!=="/"&&(o=`/${o}`),new URL(`${r}${o}`)}if(!Gf(e.origin||e.protocol))throw new Bt("Invalid URL protocol: the URL must start with `http:` or `https:`.");return e}function p3(e){if(e=RF(e),e.pathname!=="/"||e.search||e.hash)throw new Bt("invalid url");return e}function h3(e){if(e[0]==="["){let r=e.indexOf("]");return yA(r!==-1),e.substring(1,r)}let t=e.indexOf(":");return t===-1?e:e.substring(0,t)}function g3(e){if(!e)return null;yA(typeof e=="string");let t=h3(e);return o3.isIP(t)?"":t}function m3(e){return JSON.parse(JSON.stringify(e))}function y3(e){return e!=null&&typeof e[Symbol.asyncIterator]=="function"}function DF(e){return e!=null&&(typeof e[Symbol.iterator]=="function"||typeof e[Symbol.asyncIterator]=="function")}function FF(e){if(e==null)return 0;if(Hf(e)){let t=e._readableState;return t&&t.objectMode===!1&&t.ended===!0&&Number.isFinite(t.length)?t.length:null}else{if(TF(e))return e.size!=null?e.size:null;if(PF(e))return e.byteLength}return null}function kF(e){return e&&!!(e.destroyed||e[bF]||wF.isDestroyed?.(e))}function NF(e,t){e==null||!Hf(e)||kF(e)||(typeof e.destroy=="function"?(Object.getPrototypeOf(e).constructor===r3&&(e.socket=null),e.destroy(t)):t&&queueMicrotask(()=>{e.emit("error",t)}),e.destroyed!==!0&&(e[bF]=!0))}var E3=/timeout=(\d+)/;function C3(e){let t=e.match(E3);return t?parseInt(t[1],10)*1e3:null}function vF(e){return typeof e=="string"?c3[e]??e.toLowerCase():SF.lookup(e)??e.toString("latin1").toLowerCase()}function I3(e){return SF.lookup(e)??e.toString("latin1").toLowerCase()}function B3(e,t){t===void 0&&(t={});for(let r=0;r<e.length;r+=2){let o=vF(e[r]),n=t[o];if(n)typeof n=="string"&&(n=[n],t[o]=n),n.push(e[r+1].toString("utf8"));else{let i=e[r+1];typeof i=="string"?t[o]=i:t[o]=Array.isArray(i)?i.map(s=>s.toString("utf8")):i.toString("utf8")}}return"content-length"in t&&"content-disposition"in t&&(t["content-disposition"]=Buffer.from(t["content-disposition"]).toString("latin1")),t}function Q3(e){let t=e.length,r=new Array(t),o=!1,n=-1,i,s,a=0;for(let l=0;l<t;l+=2)i=e[l],s=e[l+1],typeof i!="string"&&(i=i.toString()),typeof s!="string"&&(s=s.toString("utf8")),a=i.length,a===14&&i[7]==="-"&&(i==="content-length"||i.toLowerCase()==="content-length")?o=!0:a===19&&i[7]==="-"&&(i==="content-disposition"||i.toLowerCase()==="content-disposition")&&(n=l+1),r[l]=i,r[l+1]=s;return o&&n!==-1&&(r[n]=Buffer.from(r[n]).toString("latin1")),r}function b3(e){if(!Array.isArray(e))throw new TypeError("expected headers to be an array");return e.map(t=>Buffer.from(t))}function PF(e){return e instanceof Uint8Array||Buffer.isBuffer(e)}function w3(e,t,r){if(!e||typeof e!="object")throw new Bt("handler must be an object");if(typeof e.onRequestStart!="function"){if(typeof e.onConnect!="function")throw new Bt("invalid onConnect method");if(typeof e.onError!="function")throw new Bt("invalid onError method");if(typeof e.onBodySent!="function"&&e.onBodySent!==void 0)throw new Bt("invalid onBodySent method");if(r||t==="CONNECT"){if(typeof e.onUpgrade!="function")throw new Bt("invalid onUpgrade method")}else{if(typeof e.onHeaders!="function")throw new Bt("invalid onHeaders method");if(typeof e.onData!="function")throw new Bt("invalid onData method");if(typeof e.onComplete!="function")throw new Bt("invalid onComplete method")}}}function S3(e){return!!(e&&(wF.isDisturbed(e)||e[el]))}function T3(e){return{localAddress:e.localAddress,localPort:e.localPort,remoteAddress:e.remoteAddress,remotePort:e.remotePort,remoteFamily:e.remoteFamily,timeout:e.timeout,bytesWritten:e.bytesWritten,bytesRead:e.bytesRead}}function x3(e){let t;return new ReadableStream({async start(){t=e[Symbol.asyncIterator]()},pull(r){async function o(){let{done:n,value:i}=await t.next();if(n)queueMicrotask(()=>{r.close(),r.byobRequest?.respond(0)});else{let s=Buffer.isBuffer(i)?i:Buffer.from(i);if(s.byteLength)r.enqueue(new Uint8Array(s));else return await o()}}return o()},async cancel(){await t.return()},type:"bytes"})}function R3(e){return e&&typeof e=="object"&&typeof e.append=="function"&&typeof e.delete=="function"&&typeof e.get=="function"&&typeof e.getAll=="function"&&typeof e.has=="function"&&typeof e.set=="function"&&e[Symbol.toStringTag]==="FormData"}function D3(e,t){return"addEventListener"in e?(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)):(e.once("abort",t),()=>e.removeListener("abort",t))}var LF=typeof String.prototype.toWellFormed=="function"?e=>`${e}`.toWellFormed():i3.toUSVString,F3=typeof String.prototype.isWellFormed=="function"?e=>`${e}`.isWellFormed():e=>LF(e)===`${e}`;function UF(e){switch(e){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return e>=33&&e<=126}}function k3(e){if(e.length===0)return!1;for(let t=0;t<e.length;++t)if(!UF(e.charCodeAt(t)))return!1;return!0}var N3=/[^\t\x20-\x7e\x80-\xff]/;function v3(e){return!N3.test(e)}var P3=/^bytes (\d+)-(\d+)\/(\d+)?$/;function L3(e){if(e==null||e==="")return{start:0,end:null,size:null};let t=e?e.match(P3):null;return t?{start:parseInt(t[1]),end:t[2]?parseInt(t[2]):null,size:t[3]?parseInt(t[3]):null}:null}function U3(e,t,r){return(e[_f]??=[]).push([t,r]),e.on(t,r),e}function O3(e){if(e[_f]!=null){for(let[t,r]of e[_f])e.removeListener(t,r);e[_f]=null}return e}function M3(e,t,r){try{t.onError(r),yA(t.aborted)}catch(o){e.emit("error",o)}}var _3=process.platform==="win32"?(e,t)=>{if(!t.timeout)return BF;let r=null,o=null,n=Mf.setFastTimeout(()=>{r=setImmediate(()=>{o=setImmediate(()=>QF(e.deref(),t))})},t.timeout);return()=>{Mf.clearFastTimeout(n),clearImmediate(r),clearImmediate(o)}}:(e,t)=>{if(!t.timeout)return BF;let r=null,o=Mf.setFastTimeout(()=>{r=setImmediate(()=>{QF(e.deref(),t)})},t.timeout);return()=>{Mf.clearFastTimeout(o),clearImmediate(r)}};function QF(e,t){if(e==null)return;let r="Connect Timeout Error";Array.isArray(e.autoSelectFamilyAttemptedAddresses)?r+=` (attempted addresses: ${e.autoSelectFamilyAttemptedAddresses.join(", ")},`:r+=` (attempted address: ${t.hostname}:${t.port},`,r+=` timeout: ${t.timeout}ms)`,NF(e,new l3(r))}var OF=Object.create(null);OF.enumerable=!0;var yC={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},MF={...yC,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(yC,null);Object.setPrototypeOf(MF,null);_F.exports={kEnumerableProperty:OF,isDisturbed:S3,toUSVString:LF,isUSVString:F3,isBlobLike:TF,parseOrigin:p3,parseURL:RF,getServerName:g3,isStream:Hf,isIterable:DF,isAsyncIterable:y3,isDestroyed:kF,headerNameToString:vF,bufferToLowerCasedHeaderName:I3,addListener:U3,removeAllListeners:O3,errorRequest:M3,parseRawHeaders:Q3,encodeRawHeaders:b3,parseHeaders:B3,parseKeepAliveTimeout:C3,destroy:NF,bodyLength:FF,deepClone:m3,ReadableStreamFrom:x3,isBuffer:PF,assertRequestHandler:w3,getSocketInfo:T3,isFormDataLike:R3,serializePathWithQuery:f3,addAbortListener:D3,isValidHTTPToken:k3,isValidHeaderValue:v3,isTokenCharCode:UF,parseRangeHeader:L3,normalizedMethodRecordsBase:yC,normalizedMethodRecords:MF,isValidPort:xF,isHttpOrHttpsPrefixed:Gf,nodeMajor:A3,nodeMinor:u3,safeHTTPMethods:Object.freeze(["GET","HEAD","OPTIONS","TRACE"]),wrapRequestBody:d3,setupConnectTimeout:_3}});var IC=w(($we,qF)=>{"use strict";var{kConnected:GF,kPending:jF,kRunning:HF,kSize:VF,kFree:G3,kQueued:j3}=Me(),EC=class{constructor(t){this.connected=t[GF],this.pending=t[jF],this.running=t[HF],this.size=t[VF]}},CC=class{constructor(t){this.connected=t[GF],this.free=t[G3],this.pending=t[jF],this.queued=t[j3],this.running=t[HF],this.size=t[VF]}};qF.exports={ClientStats:EC,PoolStats:CC}});var kn=w((Kwe,$F)=>{"use strict";var ze=v("node:diagnostics_channel"),BC=v("node:util"),Is=BC.debuglog("undici"),EA=BC.debuglog("fetch"),Vf=BC.debuglog("websocket"),H3={beforeConnect:ze.channel("undici:client:beforeConnect"),connected:ze.channel("undici:client:connected"),connectError:ze.channel("undici:client:connectError"),sendHeaders:ze.channel("undici:client:sendHeaders"),create:ze.channel("undici:request:create"),bodySent:ze.channel("undici:request:bodySent"),headers:ze.channel("undici:request:headers"),trailers:ze.channel("undici:request:trailers"),error:ze.channel("undici:request:error"),open:ze.channel("undici:websocket:open"),close:ze.channel("undici:websocket:close"),socketError:ze.channel("undici:websocket:socket_error"),ping:ze.channel("undici:websocket:ping"),pong:ze.channel("undici:websocket:pong")},YF=!1;function zF(e=Is){YF||(YF=!0,ze.subscribe("undici:client:beforeConnect",t=>{let{connectParams:{version:r,protocol:o,port:n,host:i}}=t;e("connecting to %s%s using %s%s",i,n?`:${n}`:"",o,r)}),ze.subscribe("undici:client:connected",t=>{let{connectParams:{version:r,protocol:o,port:n,host:i}}=t;e("connected to %s%s using %s%s",i,n?`:${n}`:"",o,r)}),ze.subscribe("undici:client:connectError",t=>{let{connectParams:{version:r,protocol:o,port:n,host:i},error:s}=t;e("connection to %s%s using %s%s errored - %s",i,n?`:${n}`:"",o,r,s.message)}),ze.subscribe("undici:client:sendHeaders",t=>{let{request:{method:r,path:o,origin:n}}=t;e("sending request to %s %s/%s",r,n,o)}))}var WF=!1;function V3(e=Is){WF||(WF=!0,ze.subscribe("undici:request:headers",t=>{let{request:{method:r,path:o,origin:n},response:{statusCode:i}}=t;e("received response to %s %s/%s - HTTP %d",r,n,o,i)}),ze.subscribe("undici:request:trailers",t=>{let{request:{method:r,path:o,origin:n}}=t;e("trailers received from %s %s/%s",r,n,o)}),ze.subscribe("undici:request:error",t=>{let{request:{method:r,path:o,origin:n},error:i}=t;e("request to %s %s/%s errored - %s",r,n,o,i.message)}))}var JF=!1;function q3(e=Vf){JF||(JF=!0,ze.subscribe("undici:websocket:open",t=>{let{address:{address:r,port:o}}=t;e("connection opened %s%s",r,o?`:${o}`:"")}),ze.subscribe("undici:websocket:close",t=>{let{websocket:r,code:o,reason:n}=t;e("closed connection to %s - %s %s",r.url,o,n)}),ze.subscribe("undici:websocket:socket_error",t=>{e("connection errored - %s",t.message)}),ze.subscribe("undici:websocket:ping",t=>{e("ping received")}),ze.subscribe("undici:websocket:pong",t=>{e("pong received")}))}(Is.enabled||EA.enabled)&&(zF(EA.enabled?EA:Is),V3(EA.enabled?EA:Is));Vf.enabled&&(zF(Is.enabled?Is:Vf),q3(Vf));$F.exports={channels:H3}});var tk=w((Zwe,ek)=>{"use strict";var{InvalidArgumentError:rt,NotSupportedError:Y3}=Ee(),Vo=v("node:assert"),{isValidHTTPToken:XF,isValidHeaderValue:KF,isStream:W3,destroy:J3,isBuffer:z3,isFormDataLike:$3,isIterable:K3,isBlobLike:Z3,serializePathWithQuery:X3,assertRequestHandler:e5,getServerName:t5,normalizedMethodRecords:r5}=ue(),{channels:qo}=kn(),{headerNameLowerCasedRecord:ZF}=Uf(),o5=/[^\u0021-\u00ff]/,Yr=Symbol("handler"),QC=class{constructor(t,{path:r,method:o,body:n,headers:i,query:s,idempotent:a,blocking:l,upgrade:c,headersTimeout:A,bodyTimeout:d,reset:f,expectContinue:u,servername:p,throwOnError:h},g){if(typeof r!="string")throw new rt("path must be a string");if(r[0]!=="/"&&!(r.startsWith("http://")||r.startsWith("https://"))&&o!=="CONNECT")throw new rt("path must be an absolute URL or start with a slash");if(o5.test(r))throw new rt("invalid request path");if(typeof o!="string")throw new rt("method must be a string");if(r5[o]===void 0&&!XF(o))throw new rt("invalid request method");if(c&&typeof c!="string")throw new rt("upgrade must be a string");if(A!=null&&(!Number.isFinite(A)||A<0))throw new rt("invalid headersTimeout");if(d!=null&&(!Number.isFinite(d)||d<0))throw new rt("invalid bodyTimeout");if(f!=null&&typeof f!="boolean")throw new rt("invalid reset");if(u!=null&&typeof u!="boolean")throw new rt("invalid expectContinue");if(h!=null)throw new rt("invalid throwOnError");if(this.headersTimeout=A,this.bodyTimeout=d,this.method=o,this.abort=null,n==null)this.body=null;else if(W3(n)){this.body=n;let m=this.body._readableState;(!m||!m.autoDestroy)&&(this.endHandler=function(){J3(this)},this.body.on("end",this.endHandler)),this.errorHandler=y=>{this.abort?this.abort(y):this.error=y},this.body.on("error",this.errorHandler)}else if(z3(n))this.body=n.byteLength?n:null;else if(ArrayBuffer.isView(n))this.body=n.buffer.byteLength?Buffer.from(n.buffer,n.byteOffset,n.byteLength):null;else if(n instanceof ArrayBuffer)this.body=n.byteLength?Buffer.from(n):null;else if(typeof n=="string")this.body=n.length?Buffer.from(n):null;else if($3(n)||K3(n)||Z3(n))this.body=n;else throw new rt("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=c||null,this.path=s?X3(r,s):r,this.origin=t,this.idempotent=a??(o==="HEAD"||o==="GET"),this.blocking=l??this.method!=="HEAD",this.reset=f??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=u??!1,Array.isArray(i)){if(i.length%2!==0)throw new rt("headers array must be even");for(let m=0;m<i.length;m+=2)qf(this,i[m],i[m+1])}else if(i&&typeof i=="object")if(i[Symbol.iterator])for(let m of i){if(!Array.isArray(m)||m.length!==2)throw new rt("headers must be in key-value pair format");qf(this,m[0],m[1])}else{let m=Object.keys(i);for(let y=0;y<m.length;++y)qf(this,m[y],i[m[y]])}else if(i!=null)throw new rt("headers must be an object or an array");e5(g,o,c),this.servername=p||t5(this.host)||null,this[Yr]=g,qo.create.hasSubscribers&&qo.create.publish({request:this})}onBodySent(t){if(this[Yr].onBodySent)try{return this[Yr].onBodySent(t)}catch(r){this.abort(r)}}onRequestSent(){if(qo.bodySent.hasSubscribers&&qo.bodySent.publish({request:this}),this[Yr].onRequestSent)try{return this[Yr].onRequestSent()}catch(t){this.abort(t)}}onConnect(t){if(Vo(!this.aborted),Vo(!this.completed),this.error)t(this.error);else return this.abort=t,this[Yr].onConnect(t)}onResponseStarted(){return this[Yr].onResponseStarted?.()}onHeaders(t,r,o,n){Vo(!this.aborted),Vo(!this.completed),qo.headers.hasSubscribers&&qo.headers.publish({request:this,response:{statusCode:t,headers:r,statusText:n}});try{return this[Yr].onHeaders(t,r,o,n)}catch(i){this.abort(i)}}onData(t){Vo(!this.aborted),Vo(!this.completed);try{return this[Yr].onData(t)}catch(r){return this.abort(r),!1}}onUpgrade(t,r,o){return Vo(!this.aborted),Vo(!this.completed),this[Yr].onUpgrade(t,r,o)}onComplete(t){this.onFinally(),Vo(!this.aborted),Vo(!this.completed),this.completed=!0,qo.trailers.hasSubscribers&&qo.trailers.publish({request:this,trailers:t});try{return this[Yr].onComplete(t)}catch(r){this.onError(r)}}onError(t){if(this.onFinally(),qo.error.hasSubscribers&&qo.error.publish({request:this,error:t}),!this.aborted)return this.aborted=!0,this[Yr].onError(t)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(t,r){return qf(this,t,r),this}};function qf(e,t,r){if(r&&typeof r=="object"&&!Array.isArray(r))throw new rt(`invalid ${t} header`);if(r===void 0)return;let o=ZF[t];if(o===void 0&&(o=t.toLowerCase(),ZF[o]===void 0&&!XF(o)))throw new rt("invalid header key");if(Array.isArray(r)){let n=[];for(let i=0;i<r.length;i++)if(typeof r[i]=="string"){if(!KF(r[i]))throw new rt(`invalid ${t} header`);n.push(r[i])}else if(r[i]===null)n.push("");else{if(typeof r[i]=="object")throw new rt(`invalid ${t} header`);n.push(`${r[i]}`)}r=n}else if(typeof r=="string"){if(!KF(r))throw new rt(`invalid ${t} header`)}else r===null?r="":r=`${r}`;if(e.host===null&&o==="host"){if(typeof r!="string")throw new rt("invalid host header");e.host=r}else if(e.contentLength===null&&o==="content-length"){if(e.contentLength=parseInt(r,10),!Number.isFinite(e.contentLength))throw new rt("invalid content-length header")}else if(e.contentType===null&&o==="content-type")e.contentType=r,e.headers.push(t,r);else{if(o==="transfer-encoding"||o==="keep-alive"||o==="upgrade")throw new rt(`invalid ${o} header`);if(o==="connection"){let n=typeof r=="string"?r.toLowerCase():null;if(n!=="close"&&n!=="keep-alive")throw new rt("invalid connection header");n==="close"&&(e.reset=!0)}else{if(o==="expect")throw new Y3("expect header not supported");e.headers.push(t,r)}}}ek.exports=QC});var Yf=w((Xwe,ok)=>{"use strict";var{InvalidArgumentError:n5}=Ee();ok.exports=class rk{#e;constructor(t){this.#e=t}static wrap(t){return t.onRequestStart?t:new rk(t)}onConnect(t,r){return this.#e.onConnect?.(t,r)}onHeaders(t,r,o,n){return this.#e.onHeaders?.(t,r,o,n)}onUpgrade(t,r,o){return this.#e.onUpgrade?.(t,r,o)}onData(t){return this.#e.onData?.(t)}onComplete(t){return this.#e.onComplete?.(t)}onError(t){if(!this.#e.onError)throw t;return this.#e.onError?.(t)}onRequestStart(t,r){this.#e.onConnect?.(o=>t.abort(o),r)}onRequestUpgrade(t,r,o,n){let i=[];for(let[s,a]of Object.entries(o))i.push(Buffer.from(s),Array.isArray(a)?a.map(l=>Buffer.from(l)):Buffer.from(a));this.#e.onUpgrade?.(r,i,n)}onResponseStart(t,r,o,n){let i=[];for(let[s,a]of Object.entries(o))i.push(Buffer.from(s),Array.isArray(a)?a.map(l=>Buffer.from(l)):Buffer.from(a));this.#e.onHeaders?.(r,i,()=>t.resume(),n)===!1&&t.pause()}onResponseData(t,r){this.#e.onData?.(r)===!1&&t.pause()}onResponseEnd(t,r){let o=[];for(let[n,i]of Object.entries(r))o.push(Buffer.from(n),Array.isArray(i)?i.map(s=>Buffer.from(s)):Buffer.from(i));this.#e.onComplete?.(o)}onResponseError(t,r){if(!this.#e.onError)throw new n5("invalid onError method");this.#e.onError?.(r)}}});var CA=w((eSe,nk)=>{"use strict";var i5=v("node:events"),s5=Yf(),a5=e=>(t,r)=>e(t,s5.wrap(r)),bC=class extends i5{dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...t){let r=Array.isArray(t[0])?t[0]:t,o=this.dispatch.bind(this);for(let n of r)if(n!=null){if(typeof n!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof n}`);if(o=n(o),o=a5(o),o==null||typeof o!="function"||o.length!==2)throw new TypeError("invalid interceptor")}return new Proxy(this,{get:(n,i)=>i==="dispatch"?o:n[i]})}};nk.exports=bC});var ak=w((tSe,sk)=>{"use strict";var{parseHeaders:wC}=ue(),{InvalidArgumentError:l5}=Ee(),SC=Symbol("resume"),TC=class{#e=!1;#t=null;#r=!1;#o;[SC]=null;constructor(t){this.#o=t}pause(){this.#e=!0}resume(){this.#e&&(this.#e=!1,this[SC]?.())}abort(t){this.#r||(this.#r=!0,this.#t=t,this.#o(t))}get aborted(){return this.#r}get reason(){return this.#t}get paused(){return this.#e}};sk.exports=class ik{#e;#t;constructor(t){this.#e=t}static unwrap(t){return t.onRequestStart?new ik(t):t}onConnect(t,r){this.#t=new TC(t),this.#e.onRequestStart?.(this.#t,r)}onUpgrade(t,r,o){this.#e.onRequestUpgrade?.(this.#t,t,wC(r),o)}onHeaders(t,r,o,n){return this.#t[SC]=o,this.#e.onResponseStart?.(this.#t,t,wC(r),n),!this.#t.paused}onData(t){return this.#e.onResponseData?.(this.#t,t),!this.#t.paused}onComplete(t){this.#e.onResponseEnd?.(this.#t,wC(t))}onError(t){if(!this.#e.onResponseError)throw new l5("invalid onError method");this.#e.onResponseError?.(this.#t,t)}}});var Bs=w((rSe,lk)=>{"use strict";var c5=CA(),A5=ak(),{ClientDestroyedError:xC,ClientClosedError:u5,InvalidArgumentError:Wf}=Ee(),{kDestroy:d5,kClose:f5,kClosed:IA,kDestroyed:tl,kDispatch:p5}=Me(),Nn=Symbol("onDestroyed"),rl=Symbol("onClosed"),RC=class extends c5{constructor(){super(),this[tl]=!1,this[Nn]=null,this[IA]=!1,this[rl]=[]}get destroyed(){return this[tl]}get closed(){return this[IA]}close(t){if(t===void 0)return new Promise((o,n)=>{this.close((i,s)=>i?n(i):o(s))});if(typeof t!="function")throw new Wf("invalid callback");if(this[tl]){queueMicrotask(()=>t(new xC,null));return}if(this[IA]){this[rl]?this[rl].push(t):queueMicrotask(()=>t(null,null));return}this[IA]=!0,this[rl].push(t);let r=()=>{let o=this[rl];this[rl]=null;for(let n=0;n<o.length;n++)o[n](null,null)};this[f5]().then(()=>this.destroy()).then(()=>{queueMicrotask(r)})}destroy(t,r){if(typeof t=="function"&&(r=t,t=null),r===void 0)return new Promise((n,i)=>{this.destroy(t,(s,a)=>s?i(s):n(a))});if(typeof r!="function")throw new Wf("invalid callback");if(this[tl]){this[Nn]?this[Nn].push(r):queueMicrotask(()=>r(null,null));return}t||(t=new xC),this[tl]=!0,this[Nn]=this[Nn]||[],this[Nn].push(r);let o=()=>{let n=this[Nn];this[Nn]=null;for(let i=0;i<n.length;i++)n[i](null,null)};this[d5](t).then(()=>{queueMicrotask(o)})}dispatch(t,r){if(!r||typeof r!="object")throw new Wf("handler must be an object");r=A5.unwrap(r);try{if(!t||typeof t!="object")throw new Wf("opts must be an object.");if(this[tl]||this[Nn])throw new xC;if(this[IA])throw new u5;return this[p5](t,r)}catch(o){if(typeof r.onError!="function")throw o;return r.onError(o),!1}}};lk.exports=RC});var BA=w((iSe,uk)=>{"use strict";var h5=v("node:net"),ck=v("node:assert"),Ak=ue(),{InvalidArgumentError:g5}=Ee(),DC,FC;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?FC=class{constructor(t){this._maxCachedSessions=t,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(r=>{if(this._sessionCache.size<this._maxCachedSessions)return;let o=this._sessionCache.get(r);o!==void 0&&o.deref()===void 0&&this._sessionCache.delete(r)})}get(t){let r=this._sessionCache.get(t);return r?r.deref():null}set(t,r){this._maxCachedSessions!==0&&(this._sessionCache.set(t,new WeakRef(r)),this._sessionRegistry.register(r,t))}}:FC=class{constructor(t){this._maxCachedSessions=t,this._sessionCache=new Map}get(t){return this._sessionCache.get(t)}set(t,r){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:o}=this._sessionCache.keys().next();this._sessionCache.delete(o)}this._sessionCache.set(t,r)}}};function m5({allowH2:e,maxCachedSessions:t,socketPath:r,timeout:o,session:n,...i}){if(t!=null&&(!Number.isInteger(t)||t<0))throw new g5("maxCachedSessions must be a positive integer or zero");let s={path:r,...i},a=new FC(t??100);return o=o??1e4,e=e??!1,function({hostname:c,host:A,protocol:d,port:f,servername:u,localAddress:p,httpSocket:h},g){let m;if(d==="https:"){DC||(DC=v("node:tls")),u=u||s.servername||Ak.getServerName(A)||null;let E=u||c;ck(E);let I=n||a.get(E)||null;f=f||443,m=DC.connect({highWaterMark:16384,...s,servername:u,session:I,localAddress:p,ALPNProtocols:e?["http/1.1","h2"]:["http/1.1"],socket:h,port:f,host:c}),m.on("session",function(C){a.set(E,C)})}else ck(!h,"httpSocket can only be sent on TLS update"),f=f||80,m=h5.connect({highWaterMark:64*1024,...s,localAddress:p,port:f,host:c});if(s.keepAlive==null||s.keepAlive){let E=s.keepAliveInitialDelay===void 0?6e4:s.keepAliveInitialDelay;m.setKeepAlive(!0,E)}let y=Ak.setupConnectTimeout(new WeakRef(m),{timeout:o,hostname:c,port:f});return m.setNoDelay(!0).once(d==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(y),g){let E=g;g=null,E(null,this)}}).on("error",function(E){if(queueMicrotask(y),g){let I=g;g=null,I(E)}}),m}}uk.exports=m5});var dk=w(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.enumToMap=void 0;function y5(e,t=[],r=[]){var o,n;let i=((o=t?.length)!==null&&o!==void 0?o:0)===0,s=((n=r?.length)!==null&&n!==void 0?n:0)===0;return Object.fromEntries(Object.entries(e).filter(([,a])=>typeof a=="number"&&(i||t.includes(a))&&(s||!r.includes(a))))}Jf.enumToMap=y5});var fk=w(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.SPECIAL_HEADERS=b.MINOR=b.MAJOR=b.HTAB_SP_VCHAR_OBS_TEXT=b.QUOTED_STRING=b.CONNECTION_TOKEN_CHARS=b.HEADER_CHARS=b.TOKEN=b.HEX=b.URL_CHAR=b.USERINFO_CHARS=b.MARK=b.ALPHANUM=b.NUM=b.HEX_MAP=b.NUM_MAP=b.ALPHA=b.STATUSES_HTTP=b.H_METHOD_MAP=b.METHOD_MAP=b.METHODS_RTSP=b.METHODS_ICE=b.METHODS_HTTP=b.HEADER_STATE=b.FINISH=b.STATUSES=b.METHODS=b.LENIENT_FLAGS=b.FLAGS=b.TYPE=b.ERROR=void 0;var E5=dk();b.ERROR={OK:0,INTERNAL:1,STRICT:2,CR_EXPECTED:25,LF_EXPECTED:3,UNEXPECTED_CONTENT_LENGTH:4,UNEXPECTED_SPACE:30,CLOSED_CONNECTION:5,INVALID_METHOD:6,INVALID_URL:7,INVALID_CONSTANT:8,INVALID_VERSION:9,INVALID_HEADER_TOKEN:10,INVALID_CONTENT_LENGTH:11,INVALID_CHUNK_SIZE:12,INVALID_STATUS:13,INVALID_EOF_STATE:14,INVALID_TRANSFER_ENCODING:15,CB_MESSAGE_BEGIN:16,CB_HEADERS_COMPLETE:17,CB_MESSAGE_COMPLETE:18,CB_CHUNK_HEADER:19,CB_CHUNK_COMPLETE:20,PAUSED:21,PAUSED_UPGRADE:22,PAUSED_H2_UPGRADE:23,USER:24,CB_URL_COMPLETE:26,CB_STATUS_COMPLETE:27,CB_METHOD_COMPLETE:32,CB_VERSION_COMPLETE:33,CB_HEADER_FIELD_COMPLETE:28,CB_HEADER_VALUE_COMPLETE:29,CB_CHUNK_EXTENSION_NAME_COMPLETE:34,CB_CHUNK_EXTENSION_VALUE_COMPLETE:35,CB_RESET:31};b.TYPE={BOTH:0,REQUEST:1,RESPONSE:2};b.FLAGS={CONNECTION_KEEP_ALIVE:1,CONNECTION_CLOSE:2,CONNECTION_UPGRADE:4,CHUNKED:8,UPGRADE:16,CONTENT_LENGTH:32,SKIPBODY:64,TRAILING:128,TRANSFER_ENCODING:512};b.LENIENT_FLAGS={HEADERS:1,CHUNKED_LENGTH:2,KEEP_ALIVE:4,TRANSFER_ENCODING:8,VERSION:16,DATA_AFTER_CLOSE:32,OPTIONAL_LF_AFTER_CR:64,OPTIONAL_CRLF_AFTER_CHUNK:128,OPTIONAL_CR_BEFORE_LF:256,SPACES_AFTER_CHUNK_SIZE:512};b.METHODS={DELETE:0,GET:1,HEAD:2,POST:3,PUT:4,CONNECT:5,OPTIONS:6,TRACE:7,COPY:8,LOCK:9,MKCOL:10,MOVE:11,PROPFIND:12,PROPPATCH:13,SEARCH:14,UNLOCK:15,BIND:16,REBIND:17,UNBIND:18,ACL:19,REPORT:20,MKACTIVITY:21,CHECKOUT:22,MERGE:23,"M-SEARCH":24,NOTIFY:25,SUBSCRIBE:26,UNSUBSCRIBE:27,PATCH:28,PURGE:29,MKCALENDAR:30,LINK:31,UNLINK:32,SOURCE:33,PRI:34,DESCRIBE:35,ANNOUNCE:36,SETUP:37,PLAY:38,PAUSE:39,TEARDOWN:40,GET_PARAMETER:41,SET_PARAMETER:42,REDIRECT:43,RECORD:44,FLUSH:45,QUERY:46};b.STATUSES={CONTINUE:100,SWITCHING_PROTOCOLS:101,PROCESSING:102,EARLY_HINTS:103,RESPONSE_IS_STALE:110,REVALIDATION_FAILED:111,DISCONNECTED_OPERATION:112,HEURISTIC_EXPIRATION:113,MISCELLANEOUS_WARNING:199,OK:200,CREATED:201,ACCEPTED:202,NON_AUTHORITATIVE_INFORMATION:203,NO_CONTENT:204,RESET_CONTENT:205,PARTIAL_CONTENT:206,MULTI_STATUS:207,ALREADY_REPORTED:208,TRANSFORMATION_APPLIED:214,IM_USED:226,MISCELLANEOUS_PERSISTENT_WARNING:299,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,SEE_OTHER:303,NOT_MODIFIED:304,USE_PROXY:305,SWITCH_PROXY:306,TEMPORARY_REDIRECT:307,PERMANENT_REDIRECT:308,BAD_REQUEST:400,UNAUTHORIZED:401,PAYMENT_REQUIRED:402,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,NOT_ACCEPTABLE:406,PROXY_AUTHENTICATION_REQUIRED:407,REQUEST_TIMEOUT:408,CONFLICT:409,GONE:410,LENGTH_REQUIRED:411,PRECONDITION_FAILED:412,PAYLOAD_TOO_LARGE:413,URI_TOO_LONG:414,UNSUPPORTED_MEDIA_TYPE:415,RANGE_NOT_SATISFIABLE:416,EXPECTATION_FAILED:417,IM_A_TEAPOT:418,PAGE_EXPIRED:419,ENHANCE_YOUR_CALM:420,MISDIRECTED_REQUEST:421,UNPROCESSABLE_ENTITY:422,LOCKED:423,FAILED_DEPENDENCY:424,TOO_EARLY:425,UPGRADE_REQUIRED:426,PRECONDITION_REQUIRED:428,TOO_MANY_REQUESTS:429,REQUEST_HEADER_FIELDS_TOO_LARGE_UNOFFICIAL:430,REQUEST_HEADER_FIELDS_TOO_LARGE:431,LOGIN_TIMEOUT:440,NO_RESPONSE:444,RETRY_WITH:449,BLOCKED_BY_PARENTAL_CONTROL:450,UNAVAILABLE_FOR_LEGAL_REASONS:451,CLIENT_CLOSED_LOAD_BALANCED_REQUEST:460,INVALID_X_FORWARDED_FOR:463,REQUEST_HEADER_TOO_LARGE:494,SSL_CERTIFICATE_ERROR:495,SSL_CERTIFICATE_REQUIRED:496,HTTP_REQUEST_SENT_TO_HTTPS_PORT:497,INVALID_TOKEN:498,CLIENT_CLOSED_REQUEST:499,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,GATEWAY_TIMEOUT:504,HTTP_VERSION_NOT_SUPPORTED:505,VARIANT_ALSO_NEGOTIATES:506,INSUFFICIENT_STORAGE:507,LOOP_DETECTED:508,BANDWIDTH_LIMIT_EXCEEDED:509,NOT_EXTENDED:510,NETWORK_AUTHENTICATION_REQUIRED:511,WEB_SERVER_UNKNOWN_ERROR:520,WEB_SERVER_IS_DOWN:521,CONNECTION_TIMEOUT:522,ORIGIN_IS_UNREACHABLE:523,TIMEOUT_OCCURED:524,SSL_HANDSHAKE_FAILED:525,INVALID_SSL_CERTIFICATE:526,RAILGUN_ERROR:527,SITE_IS_OVERLOADED:529,SITE_IS_FROZEN:530,IDENTITY_PROVIDER_AUTHENTICATION_ERROR:561,NETWORK_READ_TIMEOUT:598,NETWORK_CONNECT_TIMEOUT:599};b.FINISH={SAFE:0,SAFE_WITH_CB:1,UNSAFE:2};b.HEADER_STATE={GENERAL:0,CONNECTION:1,CONTENT_LENGTH:2,TRANSFER_ENCODING:3,UPGRADE:4,CONNECTION_KEEP_ALIVE:5,CONNECTION_CLOSE:6,CONNECTION_UPGRADE:7,TRANSFER_ENCODING_CHUNKED:8};b.METHODS_HTTP=[b.METHODS.DELETE,b.METHODS.GET,b.METHODS.HEAD,b.METHODS.POST,b.METHODS.PUT,b.METHODS.CONNECT,b.METHODS.OPTIONS,b.METHODS.TRACE,b.METHODS.COPY,b.METHODS.LOCK,b.METHODS.MKCOL,b.METHODS.MOVE,b.METHODS.PROPFIND,b.METHODS.PROPPATCH,b.METHODS.SEARCH,b.METHODS.UNLOCK,b.METHODS.BIND,b.METHODS.REBIND,b.METHODS.UNBIND,b.METHODS.ACL,b.METHODS.REPORT,b.METHODS.MKACTIVITY,b.METHODS.CHECKOUT,b.METHODS.MERGE,b.METHODS["M-SEARCH"],b.METHODS.NOTIFY,b.METHODS.SUBSCRIBE,b.METHODS.UNSUBSCRIBE,b.METHODS.PATCH,b.METHODS.PURGE,b.METHODS.MKCALENDAR,b.METHODS.LINK,b.METHODS.UNLINK,b.METHODS.PRI,b.METHODS.SOURCE,b.METHODS.QUERY];b.METHODS_ICE=[b.METHODS.SOURCE];b.METHODS_RTSP=[b.METHODS.OPTIONS,b.METHODS.DESCRIBE,b.METHODS.ANNOUNCE,b.METHODS.SETUP,b.METHODS.PLAY,b.METHODS.PAUSE,b.METHODS.TEARDOWN,b.METHODS.GET_PARAMETER,b.METHODS.SET_PARAMETER,b.METHODS.REDIRECT,b.METHODS.RECORD,b.METHODS.FLUSH,b.METHODS.GET,b.METHODS.POST];b.METHOD_MAP=(0,E5.enumToMap)(b.METHODS);b.H_METHOD_MAP=Object.fromEntries(Object.entries(b.METHODS).filter(([e])=>e.startsWith("H")));b.STATUSES_HTTP=[b.STATUSES.CONTINUE,b.STATUSES.SWITCHING_PROTOCOLS,b.STATUSES.PROCESSING,b.STATUSES.EARLY_HINTS,b.STATUSES.RESPONSE_IS_STALE,b.STATUSES.REVALIDATION_FAILED,b.STATUSES.DISCONNECTED_OPERATION,b.STATUSES.HEURISTIC_EXPIRATION,b.STATUSES.MISCELLANEOUS_WARNING,b.STATUSES.OK,b.STATUSES.CREATED,b.STATUSES.ACCEPTED,b.STATUSES.NON_AUTHORITATIVE_INFORMATION,b.STATUSES.NO_CONTENT,b.STATUSES.RESET_CONTENT,b.STATUSES.PARTIAL_CONTENT,b.STATUSES.MULTI_STATUS,b.STATUSES.ALREADY_REPORTED,b.STATUSES.TRANSFORMATION_APPLIED,b.STATUSES.IM_USED,b.STATUSES.MISCELLANEOUS_PERSISTENT_WARNING,b.STATUSES.MULTIPLE_CHOICES,b.STATUSES.MOVED_PERMANENTLY,b.STATUSES.FOUND,b.STATUSES.SEE_OTHER,b.STATUSES.NOT_MODIFIED,b.STATUSES.USE_PROXY,b.STATUSES.SWITCH_PROXY,b.STATUSES.TEMPORARY_REDIRECT,b.STATUSES.PERMANENT_REDIRECT,b.STATUSES.BAD_REQUEST,b.STATUSES.UNAUTHORIZED,b.STATUSES.PAYMENT_REQUIRED,b.STATUSES.FORBIDDEN,b.STATUSES.NOT_FOUND,b.STATUSES.METHOD_NOT_ALLOWED,b.STATUSES.NOT_ACCEPTABLE,b.STATUSES.PROXY_AUTHENTICATION_REQUIRED,b.STATUSES.REQUEST_TIMEOUT,b.STATUSES.CONFLICT,b.STATUSES.GONE,b.STATUSES.LENGTH_REQUIRED,b.STATUSES.PRECONDITION_FAILED,b.STATUSES.PAYLOAD_TOO_LARGE,b.STATUSES.URI_TOO_LONG,b.STATUSES.UNSUPPORTED_MEDIA_TYPE,b.STATUSES.RANGE_NOT_SATISFIABLE,b.STATUSES.EXPECTATION_FAILED,b.STATUSES.IM_A_TEAPOT,b.STATUSES.PAGE_EXPIRED,b.STATUSES.ENHANCE_YOUR_CALM,b.STATUSES.MISDIRECTED_REQUEST,b.STATUSES.UNPROCESSABLE_ENTITY,b.STATUSES.LOCKED,b.STATUSES.FAILED_DEPENDENCY,b.STATUSES.TOO_EARLY,b.STATUSES.UPGRADE_REQUIRED,b.STATUSES.PRECONDITION_REQUIRED,b.STATUSES.TOO_MANY_REQUESTS,b.STATUSES.REQUEST_HEADER_FIELDS_TOO_LARGE_UNOFFICIAL,b.STATUSES.REQUEST_HEADER_FIELDS_TOO_LARGE,b.STATUSES.LOGIN_TIMEOUT,b.STATUSES.NO_RESPONSE,b.STATUSES.RETRY_WITH,b.STATUSES.BLOCKED_BY_PARENTAL_CONTROL,b.STATUSES.UNAVAILABLE_FOR_LEGAL_REASONS,b.STATUSES.CLIENT_CLOSED_LOAD_BALANCED_REQUEST,b.STATUSES.INVALID_X_FORWARDED_FOR,b.STATUSES.REQUEST_HEADER_TOO_LARGE,b.STATUSES.SSL_CERTIFICATE_ERROR,b.STATUSES.SSL_CERTIFICATE_REQUIRED,b.STATUSES.HTTP_REQUEST_SENT_TO_HTTPS_PORT,b.STATUSES.INVALID_TOKEN,b.STATUSES.CLIENT_CLOSED_REQUEST,b.STATUSES.INTERNAL_SERVER_ERROR,b.STATUSES.NOT_IMPLEMENTED,b.STATUSES.BAD_GATEWAY,b.STATUSES.SERVICE_UNAVAILABLE,b.STATUSES.GATEWAY_TIMEOUT,b.STATUSES.HTTP_VERSION_NOT_SUPPORTED,b.STATUSES.VARIANT_ALSO_NEGOTIATES,b.STATUSES.INSUFFICIENT_STORAGE,b.STATUSES.LOOP_DETECTED,b.STATUSES.BANDWIDTH_LIMIT_EXCEEDED,b.STATUSES.NOT_EXTENDED,b.STATUSES.NETWORK_AUTHENTICATION_REQUIRED,b.STATUSES.WEB_SERVER_UNKNOWN_ERROR,b.STATUSES.WEB_SERVER_IS_DOWN,b.STATUSES.CONNECTION_TIMEOUT,b.STATUSES.ORIGIN_IS_UNREACHABLE,b.STATUSES.TIMEOUT_OCCURED,b.STATUSES.SSL_HANDSHAKE_FAILED,b.STATUSES.INVALID_SSL_CERTIFICATE,b.STATUSES.RAILGUN_ERROR,b.STATUSES.SITE_IS_OVERLOADED,b.STATUSES.SITE_IS_FROZEN,b.STATUSES.IDENTITY_PROVIDER_AUTHENTICATION_ERROR,b.STATUSES.NETWORK_READ_TIMEOUT,b.STATUSES.NETWORK_CONNECT_TIMEOUT];b.ALPHA=[];for(let e=65;e<=90;e++)b.ALPHA.push(String.fromCharCode(e)),b.ALPHA.push(String.fromCharCode(e+32));b.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};b.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};b.NUM=["0","1","2","3","4","5","6","7","8","9"];b.ALPHANUM=b.ALPHA.concat(b.NUM);b.MARK=["-","_",".","!","~","*","'","(",")"];b.USERINFO_CHARS=b.ALPHANUM.concat(b.MARK).concat(["%",";",":","&","=","+","$",","]);b.URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(b.ALPHANUM);b.HEX=b.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);b.TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(b.ALPHANUM);b.HEADER_CHARS=["	"];for(let e=32;e<=255;e++)e!==127&&b.HEADER_CHARS.push(e);b.CONNECTION_TOKEN_CHARS=b.HEADER_CHARS.filter(e=>e!==44);b.QUOTED_STRING=["	"," "];for(let e=33;e<=255;e++)e!==34&&e!==92&&b.QUOTED_STRING.push(e);b.HTAB_SP_VCHAR_OBS_TEXT=["	"," "];for(let e=33;e<=126;e++)b.HTAB_SP_VCHAR_OBS_TEXT.push(e);for(let e=128;e<=255;e++)b.HTAB_SP_VCHAR_OBS_TEXT.push(e);b.MAJOR=b.NUM_MAP;b.MINOR=b.MAJOR;b.SPECIAL_HEADERS={connection:b.HEADER_STATE.CONNECTION,"content-length":b.HEADER_STATE.CONTENT_LENGTH,"proxy-connection":b.HEADER_STATE.CONNECTION,"transfer-encoding":b.HEADER_STATE.TRANSFER_ENCODING,upgrade:b.HEADER_STATE.UPGRADE}});var NC=w((lSe,pk)=>{"use strict";var{Buffer:C5}=v("node:buffer"),I5="AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAn9/AGABfwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAzQzBQYAAAMAAAAAAAADAQMAAwMDAAACAAAAAAICAgICAgICAgIBAQEBAQEBAQEDAAADAAAABAUBcAESEgUDAQACBggBfwFBgNgECwfFBygGbWVtb3J5AgALX2luaXRpYWxpemUACBlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQALbGxodHRwX2luaXQACRhsbGh0dHBfc2hvdWxkX2tlZXBfYWxpdmUANgxsbGh0dHBfYWxsb2MACwZtYWxsb2MAOAtsbGh0dHBfZnJlZQAMBGZyZWUADA9sbGh0dHBfZ2V0X3R5cGUADRVsbGh0dHBfZ2V0X2h0dHBfbWFqb3IADhVsbGh0dHBfZ2V0X2h0dHBfbWlub3IADxFsbGh0dHBfZ2V0X21ldGhvZAAQFmxsaHR0cF9nZXRfc3RhdHVzX2NvZGUAERJsbGh0dHBfZ2V0X3VwZ3JhZGUAEgxsbGh0dHBfcmVzZXQAEw5sbGh0dHBfZXhlY3V0ZQAUFGxsaHR0cF9zZXR0aW5nc19pbml0ABUNbGxodHRwX2ZpbmlzaAAWDGxsaHR0cF9wYXVzZQAXDWxsaHR0cF9yZXN1bWUAGBtsbGh0dHBfcmVzdW1lX2FmdGVyX3VwZ3JhZGUAGRBsbGh0dHBfZ2V0X2Vycm5vABoXbGxodHRwX2dldF9lcnJvcl9yZWFzb24AGxdsbGh0dHBfc2V0X2Vycm9yX3JlYXNvbgAcFGxsaHR0cF9nZXRfZXJyb3JfcG9zAB0RbGxodHRwX2Vycm5vX25hbWUAHhJsbGh0dHBfbWV0aG9kX25hbWUAHxJsbGh0dHBfc3RhdHVzX25hbWUAIBpsbGh0dHBf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a0E+aiECCyABIAI2AhwgAUIANwIQIAJBAnRBsNYAaiEAAkBBhNQAKAIAIgNBASACdCIHcUUEQCAAIAE2AgBBhNQAIAMgB3I2AgAgASAANgIYIAEgATYCCCABIAE2AgwMAQsgBEEZIAJBAXZrQQAgAkEfRxt0IQIgACgCACEAAkADQCAAIgMoAgRBeHEgBEYNASACQR12IQAgAkEBdCECIAMgAEEEcWpBEGoiBygCACIADQALIAcgATYCACABIAM2AhggASABNgIMIAEgATYCCAwBCyADKAIIIgAgATYCDCADIAE2AgggAUEANgIYIAEgAzYCDCABIAA2AggLQaDUAEGg1AAoAgBBAWsiAEF/IAAbNgIACwsHACAALQAoCwcAIAAtACoLBwAgAC0AKwsHACAALQApCwcAIAAvATQLBwAgAC0AMAtAAQR/IAAoAhghASAALwEuIQIgAC0AKCEDIAAoAjghBCAAEDcgACAENgI4IAAgAzoAKCAAIAI7AS4gACABNgIYC8X4AQIHfwN+IAEgAmohBAJAIAAiAygCDCIADQAgAygCBARAIAMgATYCBAsjAEEQayIJJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAC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AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAMCfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJ/AkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAMCfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCACDtQBAAECAwQFBgcICQoLDA0ODxARFBUWFxgZGhscHR4fICEjJCUnKCmIA4cDhQOEA/wC9QLuAusC6ALmAuMC4ALfAt0C2wLWAtUC1ALTAtICygLJAsgCxwLGAsUCxALDAr0CvAK6ArkCuAK3ArYCtQK0ArICsQKsAqoCqAKnAqYCpQKkAqMCogKhAqACnwKbApoCmQKYApcCkAKIAoQCgwKCAvkB9gH1AfQB8wHyAfEB8AHvAe0B6wHoAeMB4QHgAd8B3gHdAdwB2wHaAdkB2AHX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QEBAQEBAQEBAQEBAAEALQQAhAiADQQA2AhwgA0G3CzYCECADQQI2AgwgAyABQQFqNgIUDIEDCyADQS9qIQIDQCABIARGBEBBISECDIIDCwJAAkACQCABLQAAIgBBCWsOGAIAKioBKioqKioqKioqKioqKioqKioqAigLIAFBAWohASADQS9qLQAAQQFxRQ0LDBkLIAFBAWohAQwYCyABQQFqIQEgAi0AAEECcQ0AC0EAIQIgA0EANgIcIAMgATYCFCADQc4UNgIQIANBDDYCDAyAAwsgAUEBaiEBC0EAIQACQCADKAI4IgJFDQAgAigCVCICRQ0AIAMgAhEAACEACyAADQEM0QILIANCADcDIAw8CyAAQRVGBEAgA0EkNgIcIAMgATYCFCADQYYaNgIQIANBFTYCDEEAIQIM/QILQQAhAiADQQA2AhwgAyABNgIUIANB4g02AhAgA0EUNgIMDPwCCyADKAIEIQBBACECIANBADYCBCADIAAgASAMp2oiARAxIgBFDSsgA0EHNgIcIAMgATYCFCADIAA2AgwM+wILIAMtAC5BwABxRQ0BC0EAIQACQCADKAI4IgJFDQAgAigCUCICRQ0AIAMgAhEAACEACyAARQ0rIABBFUYEQCADQQo2AhwgAyABNgIUIANB8Rg2AhAgA0EVNgIMQQAhAgz6AgtBACECIANBADYCHCADIAE2AhQgA0GLDDYCECADQRM2AgwM+QILQQAhAiADQQA2AhwgAyABNgIUIANBsRQ2AhAgA0ECNgIMDPgCC0EAIQIgA0EANgIcIAMgATYCFCADQYwUNgIQIANBGTYCDAz3AgtBACECIANBADYCHCADIAE2AhQgA0HRHDYCECADQRk2AgwM9gILIABBFUYNPUEAIQIgA0EANgIcIAMgATYCFCADQaIPNgIQIANBIjYCDAz1AgsgAygCBCEAQQAhAiADQQA2AgQgAyAAIAEQMiIARQ0oIANBDTYCHCADIAE2AhQgAyAANgIMDPQCCyAAQRVGDTpBACECIANBADYCHCADIAE2AhQgA0GiDzYCECADQSI2AgwM8wILIAMoAgQhAEEAIQIgA0EANgIEIAMgACABEDIiAEUEQCABQQFqIQEMKAsgA0EONgIcIAMgADYCDCADIAFBAWo2AhQM8gILIABBFUYNN0EAIQIgA0EANgIcIAMgATYCFCADQaIPNgIQIANBIjYCDAzxAgsgAygCBCEAQQAhAiADQQA2AgQgAyAAIAEQMiIARQRAIAFBAWohAQwnCyADQQ82AhwgAyAANgIMIAMgAUEBajYCFAzwAgtBACECIANBADYCHCADIAE2AhQgA0HoFjYCECADQRk2AgwM7wILIABBFUYNM0EAIQIgA0EANgIcIAMgATYCFCADQc4MNgIQIANBIzYCDAzuAgsgAygCBCEAQQAhAiADQQA2AgQgAyAAIAEQMyIARQ0lIANBETYCHCADIAE2AhQgAyAANgIMDO0CCyAAQRVGDTBBACECIANBADYCHCADIAE2AhQgA0HODDYCECADQSM2AgwM7AILIAMoAgQhAEEAIQIgA0EANgIEIAMgACABEDMiAEUEQCABQQFqIQEMJQsgA0ESNgIcIAMgADYCDCADIAFBAWo2AhQM6wILIANBL2otAABBAXFFDQELQRUhAgzPAgtBACECIANBADYCHCADIAE2AhQgA0HoFjYCECADQRk2AgwM6AILIABBO0cNACABQQFqIQEMDAtBACECIANBADYCHCADIAE2AhQgA0GYFzYCECADQQI2AgwM5gILIABBFUYNKEEAIQIgA0EANgIcIAMgATYCFCADQc4MNgIQIANBIzYCDAzlAgsgA0EUNgIcIAMgATYCFCADIAA2AgwM5AILIAMoAgQhAEEAIQIgA0EANgIEIAMgACABEDMiAEUEQCABQQFqIQEM3AILIANBFTYCHCADIAA2AgwgAyABQQFqNgIUDOMCCyADKAIEIQBBACECIANBADYCBCADIAAgARAzIgBFBEAgAUEBaiEBDNoCCyADQRc2AhwgAyAANgIMIAMgAUEBajYCFAziAgsgAEEVRg0jQQAhAiADQQA2AhwgAyABNgIUIANBzgw2AhAgA0EjNgIMDOECCyADKAIEIQBBACECIANBADYCBCADIAAgARAzIgBFBEAgAUEBaiEBDB0LIANBGTYCHCADIAA2AgwgAyABQQFqNgIUDOACCyADKAIEIQBBACECIANBADYCBCADIAAgARAzIgBFBEAgAUEBaiEBDNYCCyADQRo2AhwgAyAANgIMIAMgAUEBajYCFAzfAgsgAEEVRg0fQQAhAiADQQA2AhwgAyABNgIUIANBog82AhAgA0EiNgIMDN4CCyADKAIEIQBBACEC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DLMCCyABIARGBEBB6QEhAgyzAgsgAS0AAEHIAEYNASADQQE6ACgLQbYBIQIMlwILQcoBIQIMlgILIAEgBEcEQCADQQw2AgggAyABNgIEQckBIQIMlgILQegBIQIMrwILIAEgBEYEQEHnASECDK8CCyABLQAAQcgARw0EIAFBAWohAUHIASECDJQCCyABIARGBEBB5gEhAgyuAgsCQAJAIAEtAABBxQBrDhAABQUFBQUFBQUFBQUFBQUBBQsgAUEBaiEBQcYBIQIMlAILIAFBAWohAUHHASECDJMCC0HlASECIAEgBEYNrAIgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB99MAai0AAEcNAyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAMrQILIAMoAgQhACADQgA3AwAgAyAAIAZBAWoiARAtIgBFBEBB1AEhAgyTAgsgA0HkATYCHCADIAE2AhQgAyAANgIMQQAhAgysAgtB4wEhAiABIARGDasCIAMoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQfXTAGotAABHDQIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADKwCCyADQYEEOwEoIAMoAgQhACADQgA3AwAgAyAAIAZBAWoiARAtIgANAwwCCyADQQA2AgALQQAhAiADQQA2AhwgAyABNgIUIANB0B42AhAgA0EINgIMDKkCC0HFASECDI4CCyADQeIBNgIcIAMgATYCFCADIAA2AgxBACECDKcCC0EAIQACQCADKAI4IgJFDQAgAigCOCICRQ0AIAMgAhEAACEACyAARQ1lIABBFUcEQCADQQA2AhwgAyABNgIUIANB1A42AhAgA0EgNgIMQQAhAgynAgsgA0GFATYCHCADIAE2AhQgA0HXGjYCECADQRU2AgxBACECDKYCC0HhASECIAQgASIARg2lAiAEIAFrIAMoAgAiAWohBSAAIAFrQQRqIQYCQANAIAAtAAAgAUHw0wBqLQAARw0BIAFBBEYNAyABQQFqIQEgBCAAQQFqIgBHDQALIAMgBTYCAAymAgsgA0EANgIcIAMgADYCFCADQYQ3NgIQIANBCDYCDCADQQA2AgBBACECDKUCCyABIARHBEAgA0ENNgIIIAMgATYCBEHCASECDIsCC0HgASECDKQCCyADQQA2AgAgBkEBaiEBC0HDASECDIgCCyABIARGBEBB3wEhAgyiAgsgAS0AAEEwayIAQf8BcUEKSQRAIAMgADoAKiABQQFqIQFBwQEhAgyIAgsgAygCBCEAIANBADYCBCADIAAgARAuIgBFDYgCIANB3gE2AhwgAyABNgIUIAMgADYCDEEAIQIMoQILIAEgBEYEQEHdASECDKECCwJAIAEtAABBLkYEQCABQQFqIQEMAQsgAygCBCEAIANBADYCBCADIAAgARAuIgBFDYkCIANB3AE2AhwgAyABNgIUIAMgADYCDEEAIQIMoQILQcABIQIMhgILIAEgBEYEQEHbASECDKACC0EAIQBBASEFQQEhB0EAIQICQAJAAkACQAJAAn8CQAJAAkACQAJAAkACQCABLQAAQTBrDgoKCQABAgMEBQYICwtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshAkEAIQVBACEHDAILQQkhAkEBIQBBACEFQQAhBwwBC0EAIQVBASECCyADIAI6ACsgAUEBaiEBAkACQCADLQAuQRBxDQACQAJAAkAgAy0AKg4DAQACBAsgB0UNAwwCCyAADQEMAgsgBUUNAQsgAygCBCEAIANBADYCBCADIAAgARAuIgBFDQIgA0HYATYCHCADIAE2AhQgAyAANgIMQQAhAgyiAgsgAygCBCEAIANBADYCBCADIAAgARAuIgBFDYsCIANB2QE2AhwgAyABNgIUIAMgADYCDEEAIQIMoQILIAMoAgQhACADQQA2AgQgAyAAIAEQLiIARQ2JAiADQdoBNgIcIAMgATYCFCADIAA2AgwMoAILQb8BIQIMhQILQQAhAAJAIAMoAjgiAkUNACACKAI8IgJFDQAgAyACEQAAIQALAkAgAARAIABBFUYNASADQQA2AhwgAyABNgIUIANBnA02AhAgA0EhNgIMQQAhAgygAgtBvgEhAgyFAgsgA0HXATYCHCADIAE2AhQgA0HWGTYCECADQRU2AgxBACECDJ4CCyABIARGBEBB1wEhAgyeAgsCQCABLQAAQSBGBEAgA0EAOwE0IAFBAWohAQwBCyADQQA2AhwgAyABNgIUIANB6xA2AhAgA0EJNgIMQQAhAgyeAgtBvQEhAgyDAgsgASAERgRAQdYBIQIM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LgsgAUEBaiEBQZcBIQIM2AELIAFBAWohAUEiDCsLIAEgBEYEQEGvASECDPEBCyABLQAAQdAARw0rIAFBAWohAUGWASECDNYBCyABIARGBEBBrgEhAgzwAQsCQAJAIAEtAABBxgBrDgsALCwsLCwsLCwsASwLIAFBAWohAUGUASECDNYBCyABQQFqIQFBlQEhAgzVAQtBrQEhAiABIARGDe4BIAMoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQazTAGotAABHDSggAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADO8BCyADQQA2AgAgBkEBaiEBQQ0MKAtBrAEhAiABIARGDe0BIAMoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQeHTAGotAABHDScgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADO4BCyADQQA2AgAgBkEBaiEBQQwMJwtBqwEhAiABIARGDewBIAMoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQarTAGotAABHDSYgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADO0BCyADQQA2AgAgBkEBaiEBQQMMJgtBqgEhAiABIARGDesBIAMoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQajTAGotAABHDSUgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADOwBCyADQQA2AgAgBkEBaiEBQSYMJQsgASAERgRAQakBIQIM6wELAkACQCABLQAAQdQAaw4CAAEnCyABQQFqIQFBjwEhAgzRAQsgAUEBaiEBQZABIQIM0AELQagBIQIgASAERg3pASADKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGm0wBqLQAARw0jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzqAQsgA0EANgIAIAZBAWohAUEnDCMLQacBIQIgASAERg3oASADKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGk0wBqLQAARw0iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzpAQsgA0EANgIAIAZBAWohAUEcDCILQaYBIQIgASAERg3nASADKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGe0wBqLQAARw0hIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzoAQsgA0EANgIAIAZBAWohAUEGDCELQaUBIQIgASAERg3mASADKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEGZ0wBqLQAARw0gIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAznAQsgA0EANgIAIAZBAWohAUEZDCALIAEgBEYEQEGkASECDOYBCwJAAkACQAJAIAEtAABBLWsOIwAkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJAEkJCQkJAIkJCQDJAsgAUEBaiEBQYQBIQIMzgELIAFBAWohAUGFASECDM0BCyABQQFqIQFBigEhAgzMAQsgAUEBaiEBQYsBIQIMywELQaMBIQIgASAERg3kASADKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGX0wBqLQAARw0eIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzlAQsgA0EANgIAIAZBAWohAUELDB4LIAEgBEYEQEGiASECDOQBCwJAAkAgAS0AAEHBAGsOAwAgASALIAFBAWohAUGGASECDMoBCyABQQFqIQFBiQEhAgzJAQsgASAERgRAQaEBIQIM4wELAkACQCABLQAAQcEAaw4PAB8fHx8fHx8fHx8fHx8BHwsgAUEBaiEBQYcBIQIMyQELIAFBAWohAUGIASECDMgBCyABIARGBEBBoAEhAgziAQsgAS0AAEHMAEcNHCABQQFqIQFBCgwbC0GfASECIAEgBEYN4AEgAygCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBkdMAai0AAEcNGiAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM4QELIANBADYCACAGQQFqIQFBHgwaC0GeASECIAEgBEYN3wEgAygCACIAIAQgAWtqIQUgASAAa0EGaiEGAkADQCABLQAAIABBitMAai0AAEcNGSAAQQZGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM4AELIANBADYCACAGQQFqIQFBFQwZC0GdASECIAEgBEYN3gEgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABBh9MAai0AAEcNGCAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM3wELIANBADYCACAGQQFqIQFBFwwYC0GcASECIAEgBEYN3QEgAygCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBgdMAai0AAEcNFyAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM3gELIANBADYCACAGQQFqIQFBGAwXCyABIARGBEBBmwEhAgzdAQsCQAJAIAEtAABByQBrDgcAGRkZGRkBGQsgAUEBaiEBQYEBIQIMwwELIAFBAWohAUGCASECDMIBC0GaASECIAEgBEYN2wEgAygCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB5tMAai0AAEcNFSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM3AELIANBADYCACAGQQFqIQFBCQwVC0GZASECIAEgBEYN2gEgAygCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB5NMAai0AAEcNFCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM2wELIANBADYCACAGQQFqIQFBHwwUC0GYASECIAEgBEYN2QEgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB/tIAai0AAEcNEyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM2gELIANBADYCACAGQQFqIQFBAgwTC0GXASECIAEgBEYN2AEgAygCACIAIAQgAWtqIQUgASAAa0EBaiEGA0AgAS0AACAAQfzSAGotAABHDREgAEEBRg0CIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADNgBCyABIARGBEBBlgEhAgzYAQtBASABLQAAQd8ARw0RGiABQQFqIQFB/QAhAgy9AQsgA0EANgIAIAZBAWohAUH+ACECDLwBC0GVASECIAEgBEYN1QEgAygCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABBxNMAai0AAEcNDyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM1gELIANBADYCACAGQQFqIQFBKQwPC0GUASECIAEgBEYN1AEgAygCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABB+NIAai0AAEcNDiAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM1QELIANBADYCACAGQQFqIQFBLQwOCyABIARGBEBBkwEhAgzUAQsgAS0AAEHFAEcNDiABQQFqIQFB+gAhAgy5AQsgASAERgRAQZIBIQIM0wELAkACQCABLQAAQcwAaw4IAA8PDw8PDwEPCyABQQFqIQFB+AAhAgy5AQsgAUEBaiEBQfkAIQIMuAELQZEBIQIgASAERg3RASADKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHz0gBqLQAARw0LIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzSAQsgA0EANgIAIAZBAWohAUEjDAsLQZABIQIgASAERg3QASADKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHw0gBqLQAARw0KIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzRAQsgA0EANgIAIAZBAWohAUEADAoLIAEgBEYEQEGPASECDNABCwJAAkAgAS0AAEHIAGsOCAAMDAwMDAwBDAsgAUEBaiEBQfMAIQIMtgELIAFBAWohAUH2ACECDLUBCyABIARGBEBBjgEhAgzPAQsCQAJAIAEtAABBzgBrDgMACwELCyABQQFqIQFB9AAhAgy1AQsgAUEBaiEBQfUAIQIMtAELIAEgBEYEQEGNASECDM4BCyABLQAAQdkARw0IIAFBAWohAUEIDAcLQYwBIQIgASAERg3MASADKAIAIgAgBCABa2ohBSABIABrQQNqIQYCQANAIAEtAAAgAEHs0gBqLQAARw0GIABBA0YNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzNAQsgA0EANgIAIAZBAWohAUEFDAYLQYsBIQIgASAERg3LASADKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHm0gBqLQAARw0FIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzMAQsgA0EANgIAIAZBAWohAUEWDAULQYoBIQIgASAERg3KASADKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHh0wBqLQAARw0EIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzLAQsgA0EANgIAIAZBAWohAUEQDAQLIAEgBEYEQEGJASECDMoBCwJAAkAgAS0AAEHDAGsODAAGBgYGBgYGBgYGAQYLIAFBAWohAUHvACECDLABCyABQQFqIQFB8AAhAgyvAQtBiAEhAiABIARGDcgBIAMoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQeDSAGotAABHDQIgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADMkBCyADQQA2AgAgBkEBaiEBQSQMAgsgA0EANgIADAILIAEgBEYEQEGHASECDMcBCyABLQAAQcwARw0BIAFBAWohAUETCzoAKSADKAIEIQAgA0EANgIEIAMgACABEC0iAA0CDAELQQAhAiADQQA2AhwgAyABNgIUIANB6R42AhAgA0EGNgIMDMQBC0HuACECDKkBCyADQYYBNgIcIAMgATYCFCADIAA2AgxBACECDMIBC0EAIQACQCADKAI4IgJFDQAgAigCOCICRQ0AIAMgAhEAACEACyAARQ0AIABBFUYNASADQQA2AhwgAyABNgIUIANB1A42AhAgA0EgNgIMQQAhAgzBAQtB7QAhAgymAQsgA0GFATYCHCADIAE2AhQgA0HXGjYCECADQRU2AgxBACECDL8BCyABIARGBEBBhQEhAgy/AQsCQCABLQAAQSBGBEAgAUEBaiEBDAELIANBADYCHCADIAE2AhQgA0GGHjYCECADQQY2AgxBACECDL8BC0ECIQIMpAELA0AgAS0AAEEgRw0CIAQgAUEBaiIBRw0AC0GEASECDL0BCyABIARGBEBBgwEhAgy9AQsCQCABLQAAQQlrDgRAAABAAAtB6wAhAgyiAQsgAy0AKUEFRgRAQewAIQIMogELQeoAIQIMoQELIAEgBEYEQEGCASECDLsBCyADQQ82AgggAyABNgIEDAoLIAEgBEYEQEGBASECDLoBCwJAIAEtAABBCWsOBD0AAD0AC0HpACECDJ8BCyABIARHBEAgA0EPNgIIIAMgATYCBEHnACECDJ8BC0GAASECDLgBCwJAIAEgBEcEQANAIAEtAABB4M4Aai0AACIAQQNHBEACQCAAQQFrDgI/AAQLQeYAIQIMoQELIAQgAUEBaiIBRw0AC0H+ACECDLkBC0H+ACECDLgBCyADQQA2AhwgAyABNgIUIANBxh82AhAgA0EHNgIMQQAhAgy3AQsgASAERgRAQf8AIQIMtwELAkACQAJAIAEtAABB4NAAai0AAEEBaw4DPAIAAQtB6AAhAgyeAQsgA0EANgIcIAMgATYCFCADQYYSNgIQIANBBzYCDEEAIQIMtwELQeAAIQIMnAELIAEgBEcEQCABQQFqIQFB5QAhAgycAQtB/QAhAgy1AQsgBCABIgBGBEBB/AAhAgy1AQsgAC0AACIBQS9GBEAgAEEBaiEBQeQAIQIMmwELIAFBCWsiAkEXSw0BIAAhAUEBIAJ0QZuAgARxDTcMAQsgBCABIgBGBEBB+wAhAgy0AQsgAC0AAEEvRw0AIABBAWohAQwDC0EAIQIgA0EANgIcIAMgADYCFCADQcYfNgIQIANBBzYCDAyyAQsCQAJAAkACQAJAA0AgAS0AAEHgzABqLQAAIgBBBUcEQAJAAkAgAEEBaw4IPQUGBwgABAEIC0HhACECDJ8BCyABQQFqIQFB4wAhAgyeAQsgBCABQQFqIgFHDQALQfoAIQIMtgELIAFBAWoMFAsgAygCBCEAIANBADYCBCADIAAgARArIgBFDR4gA0HbADYCHCADIAE2AhQgAyAANgIMQQAhAgy0AQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDR4gA0HdADYCHCADIAE2AhQgAyAANgIMQQAhAgyzAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDR4gA0HwADYCHCADIAE2AhQgAyAANgIMQQAhAgyyAQsgA0EANgIcIAMgATYCFCADQcsPNgIQIANBBzYCDEEAIQIMsQELIAEgBEYEQEH5ACECDLEBCwJAIAEtAABB4MwAai0AAEEBaw4INAQFBgAIAgMHCyABQQFqIQELQQMhAgyVAQsgAUEBagwNC0EAIQIgA0EANgIcIANBoxI2AhAgA0EHNgIMIAMgAUEBajYCFAytAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDRYgA0HbADYCHCADIAE2AhQgAyAANgIMQQAhAgysAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDRYgA0HdADYCHCADIAE2AhQgAyAANgIMQQAhAgyrAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDRYgA0HwADYCHCADIAE2AhQgAyAANgIMQQAhAgyqAQsgA0EANgIcIAMgATYCFCADQcsPNgIQIANBBzYCDEEAIQIMqQELQeIAIQIMjgELIAEgBEYEQEH4ACECDKgBCyABQQFqDAILIAEgBEYEQEH3ACECDKcBCyABQQFqDAELIAEgBEYNASABQQFqCyEBQQQhAgyKAQtB9gAhAgyjAQsDQCABLQAAQeDKAGotAAAiAEECRwRAIABBAUcEQEHfACECDIsBCwwnCyAEIAFBAWoiAUcNAAtB9QAhAgyiAQsgASAERgRAQfQAIQIMogELAkAgAS0AAEEJaw43JQMGJQQGBgYGBgYGBgYGBgYGBgYGBgYFBgYCBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGAAYLIAFBAWoLIQFBBSECDIYBCyABQQFqDAYLIAMoAgQhACADQQA2AgQgAyAAIAEQKyIARQ0IIANB2wA2AhwgAyABNgIUIAMgADYCDEEAIQIMngELIAMoAgQhACADQQA2AgQgAyAAIAEQKyIARQ0IIANB3QA2AhwgAyABNgIUIAMgADYCDEEAIQIMnQELIAMoAgQhACADQQA2AgQgAyAAIAEQKyIARQ0IIANB8AA2AhwgAyABNgIUIAMgADYCDEEAIQIMnAELIANBADYCHCADIAE2AhQgA0G8EzYCECADQQc2AgxBACECDJsBCwJAAkACQAJAA0AgAS0AAEHgyABqLQAAIgBBBUcEQAJAIABBAWsOBiQDBAUGAAYLQd4AIQIMhgELIAQgAUEBaiIBRw0AC0HzACECDJ4BCyADKAIEIQAgA0EANgIEIAMgACABECsiAEUNByADQdsANgIcIAMgATYCFCADIAA2AgxBACECDJ0BCyADKAIEIQAgA0EANgIEIAMgACABECsiAEUNByADQd0ANgIcIAMgATYCFCADIAA2AgxBACECDJwBCyADKAIEIQAgA0EANgIEIAMgACABECsiAEUNByADQfAANgIcIAMgATYCFCADIAA2AgxBACECDJsBCyADQQA2AhwgAyABNgIUIANB3Ag2AhAgA0EHNgIMQQAhAgyaAQsgASAERg0BIAFBAWoLIQFBBiECDH4LQfIAIQIMlwELAkACQAJAAkADQCABLQAAQeDGAGotAAAiAEEFRwRAIABBAWsOBB8CAwQFCyAEIAFBAWoiAUcNAAtB8QAhAgyaAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDQMgA0HbADYCHCADIAE2AhQgAyAANgIMQQAhAgyZAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDQMgA0HdADYCHCADIAE2AhQgAyAANgIMQQAhAgyYAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDQMgA0HwADYCHCADIAE2AhQgAyAANgIMQQAhAgyXAQsgA0EANgIcIAMgATYCFCADQbQKNgIQIANBBzYCDEEAIQIMlgELQc4AIQIMewtB0AAhAgx6C0HdACECDHkLIAEgBEYEQEHwACECDJMBCwJAIAEtAABBCWsOBBYAABYACyABQQFqIQFB3AAhAgx4CyABIARGBEBB7wAhAgySAQsCQCABLQAAQQlrDgQVAAAVAAtBACEAAkAgAygCOCICRQ0AIAIoAjAiAkUNACADIAIRAAAhAAsgAEUEQEHTASECDHgLIABBFUcEQCADQQA2AhwgAyABNgIUIANBwQ02AhAgA0EaNgIMQQAhAgySAQsgA0HuADYCHCADIAE2AhQgA0HwGTYCECADQRU2AgxBACECDJEBC0HtACECIAEgBEYNkAEgAygCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABB18YAai0AAEcNBCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAMkQELIANBADYCACAGQQFqIQEgAy0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACECIANBADYCHCADIAE2AhQgA0HlCTYCECADQQg2AgwMkAELQewAIQIgASAERg2PASADKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHUxgBqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAyQAQsgA0EANgIAIAZBAWohASADLQApQSFGDQMgA0EANgIcIAMgATYCFCADQYkKNgIQIANBCDYCDEEAIQIMjwELQesAIQIgASAERg2OASADKAIAIgAgBCABa2ohBSABIABrQQNqIQYCQANAIAEtAAAgAEHQxgBqLQAARw0CIABBA0YNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAyPAQsgA0EANgIAIAZBAWohASADLQApIgBBI0kNAiAAQS5GDQIgA0EANgIcIAMgATYCFCADQcEJNgIQIANBCDYCDEEAIQIMjgELIANBADYCAAtBACECIANBADYCHCADIAE2AhQgA0GENzYCECADQQg2AgwMjAELQdgAIQIMcQsgASAERwRAIANBDTYCCCADIAE2AgRB1wAhAgxxC0HqACECDIoBCyABIARGBEBB6QAhAgyKAQsgAS0AAEEwayIAQf8BcUEKSQRAIAMgADoAKiABQQFqIQFB1gAhAgxwCyADKAIEIQAgA0EANgIEIAMgACABEC4iAEUNdCADQegANgIcIAMgATYCFCADIAA2AgxBACECDIkBCyABIARGBEBB5wAhAgyJAQsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAMoAgQhACADQQA2AgQgAyAAIAEQLiIARQ11IANB5gA2AhwgAyABNgIUIAMgADYCDEEAIQIMiQELQdUAIQIMbgsgASAERgRAQeUAIQIMiAELQQAhAEEBIQVBASEHQQAhAgJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAEtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyECQQAhBUEAIQcMAgtBCSECQQEhAEEAIQVBACEHDAELQQAhBUEBIQILIAMgAjoAKyABQQFqIQECQAJAIAMtAC5BEHENAAJAAkACQCADLQAqDgMBAAIECyAHRQ0DDAILIAANAQwCCyAFRQ0BCyADKAIEIQAgA0EANgIEIAMgACABEC4iAEUNAiADQeIANgIcIAMgATYCFCADIAA2AgxBACECDIoBCyADKAIEIQAgA0EANgIEIAMgACABEC4iAEUNdyADQeMANgIcIAMgATYCFCADIAA2AgxBACECDIkBCyADKAIEIQAgA0EANgIEIAMgACABEC4iAEUNdSADQeQANgIcIAMgATYCFCADIAA2AgwMiAELQdMAIQIMbQsgAy0AKUEiRg2AAUHSACECDGwLQQAhAAJAIAMoAjgiAkUNACACKAI8IgJFDQAgAyACEQAAIQALIABFBEBB1AAhAgxsCyAAQRVHBEAgA0EANgIcIAMgATYCFCADQZwNNgIQIANBITYCDEEAIQIMhgELIANB4QA2AhwgAyABNgIUIANB1hk2AhAgA0EVNgIMQQAhAgyFAQsgASAERgRAQeAAIQIMhQELAkACQAJAAkACQCABLQAAQQprDgQBBAQABAsgAUEBaiEBDAELIAFBAWohASADQS9qLQAAQQFxRQ0BC0HRACECDGwLIANBADYCHCADIAE2AhQgA0GIETYCECADQQk2AgxBACECDIUBCyADQQA2AhwgAyABNgIUIANBiBE2AhAgA0EJNgIMQQAhAgyEAQsgASAERgRAQd8AIQIMhAELIAEtAABBCkYEQCABQQFqIQEMCQsgAy0ALkHAAHENCCADQQA2AhwgAyABNgIUIANBiBE2AhAgA0ECNgIMQQAhAgyDAQsgASAERgRAQd0AIQIMgwELIAEtAAAiAkENRgRAIAFBAWohAUHPACECDGkLIAEhACACQQlrDgQFAQEFAQsgBCABIgBGBEBB3AAhAgyCAQsgAC0AAEEKRw0AIABBAWoMAgtBACECIANBADYCHCADIAA2AhQgA0G1LDYCECADQQc2AgwMgAELIAEgBEYEQEHbACECDIABCwJAIAEtAABBCWsOBAMAAAMACyABQQFqCyEBQc0AIQIMZAsgASAERgRAQdoAIQIMfgsgAS0AAEEJaw4EAAEBAAELQQAhAiADQQA2AhwgA0HsETYCECADQQc2AgwgAyABQQFqNgIUDHwLIANBgBI7ASpBACEAAkAgAygCOCICRQ0AIAIoAjAiAkUNACADIAIRAAAhAAsgAEUNACAAQRVHDQEgA0HZADYCHCADIAE2AhQgA0HwGTYCECADQRU2AgxBACECDHsLQcwAIQIMYAsgA0EANgIcIAMgATYCFCADQcENNgIQIANBGjYCDEEAIQIMeQsgASAERgRAQdkAIQIMeQsgAS0AAEEgRw06IAFBAWohASADLQAuQQFxDTogA0EANgIcIAMgATYCFCADQa0bNgIQIANBHjYCDEEAIQIMeAsgASAERgRAQdgAIQIMeAsCQAJAAkACQAJAIAEtAAAiAEEKaw4EAgMD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AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQTBrDjcVFAABAgMEBQYHFhYWFhYWFggJCgsMDRYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWDg8QERITFgtCAiEKDBQLQgMhCgwTC0IEIQoMEgtCBSEKDBELQgYhCgwQC0IHIQoMDwtCCCEKDA4LQgkhCgwNC0IKIQoMDAtCCyEKDAsLQgwhCgwKC0INIQoMCQtCDiEKDAgLQg8hCgwHC0IKIQoMBgtCCyEKDAULQgwhCgwEC0INIQoMAwtCDiEKDAILQg8hCgwBC0IBIQoLIAFBAWohASADKQMgIgtC//////////8PWARAIAMgC0IEhiAKhDcDIAwCC0EAIQIgA0EANgIcIAMgATYCFCADQa0JNgIQIANBDDYCDAwfC0ElIQIMBAtBJiECDAMLIAMgAToALCADQQA2AgAgB0EBaiEBQQwhAgwCCyADQQA2AgAgBkEBaiEBQQohAgwBCyABQQFqIQFBCCECDAALAAtBACECIANBADYCHCADIAE2AhQgA0HVEDYCECADQQk2AgwMGAtBACECIANBADYCHCADIAE2AhQgA0HXCjYCECADQQk2AgwMFwtBACECIANBADYCHCADIAE2AhQgA0G/EDYCECADQQk2AgwMFgtBACECIANBADYCHCADIAE2AhQgA0GkETYCECADQQk2AgwMFQtBACECIANBADYCHCADIAE2AhQgA0HVEDYCECADQQk2AgwMFAtBACECIANBADYCHCADIAE2AhQgA0HXCjYCECADQQk2AgwMEwtBACECIANBADYCHCADIAE2AhQgA0G/EDYCECADQQk2AgwMEgtBACECIANBADYCHCADIAE2AhQgA0GkETYCECADQQk2AgwMEQtBACECIANBADYCHCADIAE2AhQgA0G/FjYCECADQQ82AgwMEAtBACECIANBADYCHCADIAE2AhQgA0G/FjYCECADQQ82AgwMDwtBACECIANBADYCHCADIAE2AhQgA0HIEjYCECADQQs2AgwMDgtBACECIANBADYCHCADIAE2AhQgA0GVCTYCECADQQs2AgwMDQtBACECIANBADYCHCADIAE2AhQgA0HpDzYCECADQQo2AgwMDAtBACECIANBADYCHCADIAE2AhQgA0GDEDYCECADQQo2AgwMCwtBACECIANBADYCHCADIAE2AhQgA0GmHDYCECADQQI2AgwMCgtBACECIANBADYCHCADIAE2AhQgA0HFFTYCECADQQI2AgwMCQtBACECIANBADYCHCADIAE2AhQgA0H/FzYCECADQQI2AgwMCAtBACECIANBADYCHCADIAE2AhQgA0HKFzYCECADQQI2AgwMBwsgA0ECNgIcIAMgATYCFCADQZQdNgIQIANBFjYCDEEAIQIMBgtB3gAhAiABIARGDQUgCUEIaiEHIAMoAgAhBQJAAkAgASAERwRAIAVBxsYAaiEIIAQgBWogAWshBiAFQX9zQQpqIgUgAWohAANAIAEtAAAgCC0AAEcEQEECIQgMAwsgBUUEQEEAIQggACEBDAMLIAVBAWshBSAIQQFqIQggBCABQQFqIgFHDQALIAYhBSAEIQELIAdBATYCACADIAU2AgAMAQsgA0EANgIAIAcgCDYCAAsgByABNgIEIAkoAgwhACAJKAIIDgMBBQIACwALIANBADYCHCADQa0dNgIQIANBFzYCDCADIABBAWo2AhRBACECDAMLIANBADYCHCADIAA2AhQgA0HCHTYCECADQQk2AgxBACECDAILIAEgBEYEQEEoIQIMAgsgA0EJNgIIIAMgATYCBEEnIQIMAQsgASAERgRAQQEhAgwBCwNAAkACQAJAIAEtAABBCmsOBAABAQABCyABQQFqIQEMAQsgAUEBaiEBIAMtAC5BIHENAEEAIQIgA0EANgIcIAMgATYCFCADQYwgNgIQIANBBTYCDAwCC0EBIQIgASAERw0ACwsgCUEQaiQAIAJFBEAgAygCDCEADAELIAMgAjYCHEEAIQAgAygCBCIBRQ0AIAMgASAEIAMoAggRAQAiAUUNACADIAQ2AhQgAyABNgIMIAEhAAsgAAu+AgECfyAAQQA6AAAgAEHcAGoiAUEBa0EAOgAAIABBADoAAiAAQQA6AAEgAUEDa0EAOgAAIAFBAmtBADoAACAAQQA6AAMgAUEEa0EAOgAAQQAgAGtBA3EiASAAaiIAQQA2AgBB3AAgAWtBfHEiAiAAaiIBQQRrQQA2AgACQCACQQlJDQAgAEEANgIIIABBADYCBCABQQhrQQA2AgAgAUEMa0EANgIAIAJBGUkNACAAQQA2AhggAEEANgIUIABBADYC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YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBFeHBlY3RlZCBMRiBhZnRlciBoZWFkZXJzAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMAVXNlciBjYWxsYmFjayBlcnJvcgBgb25fcmVzZXRgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19oZWFkZXJgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2JlZ2luYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlYCBjYWxsYmFjayBlcnJvcgBgb25fc3RhdHVzX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdmVyc2lvbl9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3VybF9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX3ZhbHVlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21ldGhvZF9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl9maWVsZF9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lYCBjYWxsYmFjayBlcnJvcgBVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNlcnZlcgBJbnZhbGlkIGhlYWRlciB2YWx1ZSBjaGFyAEludmFsaWQgaGVhZGVyIGZpZWxkIGNoYXIAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl92ZXJzaW9uAEludmFsaWQgbWlub3IgdmVyc2lvbgBJbnZhbGlkIG1ham9yIHZlcnNpb24ARXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgdmVyc2lvbgBFeHBlY3RlZCBDUkxGIGFmdGVyIHZlcnNpb24ASW52YWxpZCBIVFRQIHZlcnNpb24ASW52YWxpZCBoZWFkZXIgdG9rZW4AU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl91cmwASW52YWxpZCBjaGFyYWN0ZXJzIGluIHVybABVbmV4cGVjdGVkIHN0YXJ0IGNoYXIgaW4gdXJsAERvdWJsZSBAIGluIHVybABFbXB0eSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXJhY3RlciBpbiBDb250ZW50LUxlbmd0aABUcmFuc2Zlci1FbmNvZGluZyBjYW4ndCBiZSBwcmVzZW50IHdpdGggQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcATWlzc2luZyBleHBlY3RlZCBDUiBhZnRlciBjaHVuayBzaXplAEV4cGVjdGVkIExGIGFmdGVyIGNodW5rIHNpemUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgQ1IgYWZ0ZXIgaGVhZGVyIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUATWlzc2luZyBleHBlY3RlZCBDUiBhZnRlciBjaHVuayBleHRlbnNpb24gdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIHF1b3RlZC1wYWlyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGVkIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGVkIHZhbHVlAFBhdXNlZCBieSBvbl9oZWFkZXJzX2NvbXBsZXRlAEludmFsaWQgRU9GIHN0YXRlAG9uX3Jlc2V0IHBhdXNlAG9uX2NodW5rX2hlYWRlciBwYXVzZQBvbl9tZXNzYWdlX2JlZ2luIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZSBwYXVzZQBvbl9zdGF0dXNfY29tcGxldGUgcGF1c2UAb25fdmVyc2lvbl9jb21wbGV0ZSBwYXVzZQBvbl91cmxfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX3ZhbHVlX2NvbXBsZXRlIHBhdXNlAG9uX21lc3NhZ2VfY29tcGxldGUgcGF1c2UAb25fbWV0aG9kX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl9maWVsZF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fbmFtZSBwYXVzZQBVbmV4cGVjdGVkIHNwYWNlIGFmdGVyIHN0YXJ0IGxpbmUATWlzc2luZyBleHBlY3RlZCBDUiBhZnRlciByZXNwb25zZSBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAE1pc3NpbmcgZXhwZWN0ZWQgQ1IgYWZ0ZXIgY2h1bmsgZXh0ZW5zaW9uIG5hbWUASW52YWxpZCBzdGF0dXMgY29kZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABNaXNzaW5nIGV4cGVjdGVkIENSIGFmdGVyIGNodW5rIGRhdGEARXhwZWN0ZWQgTEYgYWZ0ZXIgY2h1bmsgZGF0YQBVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AARGF0YSBhZnRlciBgQ29ubmVjdGlvbjogY2xvc2VgAFNXSVRDSF9QUk9YWQBVU0VfUFJPWFkATUtBQ1RJVklUWQBVTlBST0NFU1NBQkxFX0VOVElUWQBRVUVSWQBDT1BZAE1PVkVEX1BFUk1BTkVOVExZAFRPT19FQVJMWQBOT1RJRlkARkFJTEVEX0RFUEVOREVOQ1kAQkFEX0dBVEVXQVkAUExBWQBQVVQAQ0hFQ0tPVVQAR0FURVdBWV9USU1FT1VUAFJFUVVFU1RfVElNRU9VVABORVRXT1JLX0NPTk5FQ1RfVElNRU9VVABDT05ORUNUSU9OX1RJTUVPVVQATE9HSU5fVElNRU9VVABORVRXT1JLX1JFQURfVElNRU9VVABQT1NUAE1JU0RJUkVDVEVEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfTE9BRF9CQUxBTkNFRF9SRVFVRVNUAEJBRF9SRVFVRVNUAEhUVFBfUkVRVUVTVF9TRU5UX1RPX0hUVFBTX1BPUlQAUkVQT1JUAElNX0FfVEVBUE9UAFJFU0VUX0NPTlRFTlQATk9fQ09OVEVOVABQQVJUSUFMX0NPTlRFTlQASFBFX0lOVkFMSURfQ09OU1RBTlQASFBFX0NCX1JFU0VUAEdFVABIUEVfU1RSSUNUAENPTkZMSUNUAFRFTVBPUkFSWV9SRURJUkVDVABQRVJNQU5FTlRfUkVESVJFQ1QAQ09OTkVDVABNVUxUSV9TVEFUVVMASFBFX0lOVkFMSURfU1RBVFVTAFRPT19NQU5ZX1JFUVVFU1RTAEVBUkxZX0hJTlRTAFVOQVZBSUxBQkxFX0ZPUl9MRUdBTF9SRUFTT05TAE9QVElPTlMAU1dJVENISU5HX1BST1RPQ09MUwBWQVJJQU5UX0FMU09fTkVHT1RJQVRFUwBNVUxUSVBMRV9DSE9JQ0VTAElOVEVSTkFMX1NFUlZFUl9FUlJPUgBXRUJfU0VSVkVSX1VOS05PV05fRVJST1IAUkFJTEdVTl9FUlJPUgBJREVOVElUWV9QUk9WSURFUl9BVVRIRU5USUNBVElPTl9FUlJPUgBTU0xfQ0VSVElGSUNBVEVfRVJST1IASU5WQUxJRF9YX0ZPUldBUkRFRF9GT1IAU0VUX1BBUkFNRVRFUgBHRVRfUEFSQU1FVEVSAEhQRV9VU0VSAFNFRV9PVEhFUgBIUEVfQ0JfQ0hVTktfSEVBREVSAEV4cGVjdGVkIExGIGFmdGVyIENSAE1LQ0FMRU5EQVIAU0VUVVAAV0VCX1NFUlZFUl9JU19ET1dOAFRFQVJET1dOAEhQRV9DTE9TRURfQ09OTkVDVElPTgBIRVVSSVNUSUNfRVhQSVJBVElPTgBESVNDT05ORUNURURfT1BFUkFUSU9OAE5PTl9BVVRIT1JJVEFUSVZFX0lORk9STUFUSU9OAEhQRV9JTlZBTElEX1ZFUlNJT04ASFBFX0NCX01FU1NBR0VfQkVHSU4AU0lURV9JU19GUk9aRU4ASFBFX0lOVkFMSURfSEVBREVSX1RPS0VOAElOVkFMSURfVE9LRU4ARk9SQklEREVOAEVOSEFOQ0VfWU9VUl9DQUxNAEhQRV9JTlZBTElEX1VSTABCTE9DS0VEX0JZX1BBUkVOVEFMX0NPTlRST0wATUtDT0wAQUNMAEhQRV9JTlRFUk5BTABSRVFVRVNUX0hFQURFUl9GSUVMRFNfVE9PX0xBUkdFX1VOT0ZGSUNJQUwASFBFX09LAFVOTElOSwBVTkxPQ0sAUFJJAFJFVFJZX1dJVEgASFBFX0lOVkFMSURfQ09OVEVOVF9MRU5HVEgASFBFX1VORVhQRUNURURfQ09OVEVOVF9MRU5HVEgARkxVU0gAUFJPUFBBVENIAE0tU0VBUkNIAFVSSV9UT09fTE9ORwBQUk9DRVNTSU5HAE1JU0NFTExBTkVPVVNfUEVSU0lTVEVOVF9XQVJOSU5HAE1JU0NFTExBTkVPVVNfV0FSTklORwBIUEVfSU5WQUxJRF9UUkFOU0ZFUl9FTkNPRElORwBFeHBlY3RlZCBDUkxGAEhQRV9JTlZBTElEX0NIVU5LX1NJWkUATU9WRQBDT05USU5VRQBIUEVfQ0JfU1RBVFVTX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJTX0NPTVBMRVRFAEhQRV9DQl9WRVJTSU9OX0NPTVBMRVRFAEhQRV9DQl9VUkxfQ09NUExFVEUASFBFX0NCX0NIVU5LX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX05BTUVfQ09NUExFVEUASFBFX0NCX01FU1NBR0VfQ09NUExFVEUASFBFX0NCX01FVEhPRF9DT01QTEVURQBIUEVfQ0JfSEVBREVSX0ZJRUxEX0NPTVBMRVRFAERFTEVURQBIUEVfSU5WQUxJRF9FT0ZfU1RBVEUASU5WQUxJRF9TU0xfQ0VSVElGSUNBVEUAUEFVU0UATk9fUkVTUE9OU0UAVU5TVVBQT1JURURfTUVESUFfVFlQRQBHT05FAE5PVF9BQ0NFUFRBQkxFAFNFUlZJQ0VfVU5BVkFJTEFCTEUAUkFOR0VfTk9UX1NBVElTRklBQkxFAE9SSUdJTl9JU19VTlJFQUNIQUJMRQBSRVNQT05TRV9JU19TVEFMRQBQVVJHRQBNRVJHRQBSRVFVRVNUX0hFQURFUl9GSUVMRFNfVE9PX0xBUkdFAFJFUVVFU1RfSEVBREVSX1RPT19MQVJHRQBQQVlMT0FEX1RPT19MQVJHRQBJTlNVRkZJQ0lFTlRfU1RPUkFHRQBIUEVfUEFVU0VEX1VQR1JBREUASFBFX1BBVVNFRF9IMl9VUEdSQURFAFNPVVJDRQBBTk5PVU5DRQBUUkFDRQBIUEVfVU5FWFBFQ1RFRF9TUEFDRQBERVNDUklCRQBVTlNVQlNDUklCRQBSRUNPUkQASFBFX0lOVkFMSURfTUVUSE9EAE5PVF9GT1VORABQUk9QRklORABVTkJJTkQAUkVCSU5EAFVOQVVUSE9SSVpFRABNRVRIT0RfTk9UX0FMTE9XRUQASFRUUF9WRVJTSU9OX05PVF9TVVBQT1JURUQAQUxSRUFEWV9SRVBPUlRFRABBQ0NFUFRFRABOT1RfSU1QTEVNRU5URUQATE9PUF9ERVRFQ1RFRABIUEVfQ1JfRVhQRUNURUQASFBFX0xGX0VYUEVDVEVEAENSRUFURUQASU1fVVNFRABIUEVfUEFVU0VEAFRJTUVPVVRfT0NDVVJFRABQQVlNRU5UX1JFUVVJUkVEAFBSRUNPTkRJVElPTl9SRVFVSVJFRABQUk9YWV9BVVRIRU5USUNBVElPTl9SRVFVSVJFRABORVRXT1JLX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAExFTkdUSF9SRVFVSVJFRABTU0xfQ0VSVElGSUNBVEVfUkVRVUlSRUQAVVBHUkFERV9SRVFVSVJFRABQQUdFX0VYUElSRUQAUFJFQ09ORElUSU9OX0ZBSUxFRABFWFBFQ1RBVElPTl9GQUlMRUQAUkVWQUxJREFUSU9OX0ZBSUxFRABTU0xfSEFORFNIQUtFX0ZBSUxFRABMT0NLRUQAVFJBTlNGT1JNQVRJT05fQVBQTElFRABOT1RfTU9ESUZJRUQATk9UX0VYVEVOREVEAEJBTkRXSURUSF9MSU1JVF9FWENFRURFRABTSVRFX0lTX09WRVJMT0FERUQASEVBRABFeHBlY3RlZCBIVFRQLwAAUhUAABoVAAAPEgAA5BkAAJEVAAAJFAAALRkAAOQUAADpEQAAaRQAAKEUAAB2FQAAQxYAAF4SAACUFwAAFxYAAH0UAAB/FgAAQRcAALMTAADDFgAABBoAAL0YAADQGAAAoBMAANQZAACvFgAAaBYAAHAXAADZFgAA/BgAAP4RAABZFwAAlxYAABwXAAD2FgAAjRcAAAsSAAB/GwAALhEAALMQAABJEgAArRIAAPYYAABoEAAAYhUAABAVAABaFgAAShkAALUVAADBFQAAYBUAAFwZAABaGQAAUxkAABYVAACtEQAAQhAAALcQAABXGAAAvxUAAIkQAAAcGQAAGhkAALkVAABRGAAA3BMAAFsVAABZFQAA5hgAAGcVAAARGQAA7RgAAOcTAACuEAAAwhcAAAAUAACSEwAAhBMAAEASAAAmGQAArxUAAGIQAEHpOQsBAQBBgDoL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB6jsLBAEAAAIAQYE8C14DBAMDAwMDAAADAwADAwADAwMDAwMDAwMDAAUAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAwADAEHqPQsEAQAAAgBBgT4LXgMAAwMDAwMAAAMDAAMDAAMDAwMDAwMDAwMABAAFAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwADAAMAQeA/Cw1sb3NlZWVwLWFsaXZlAEH5PwsBAQBBkMAAC+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnBAAsBAQBBkMIAC+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGhxAALXgEAAQEBAQEAAAEBAAEBAAEBAQEBAQEBAQEAAAAAAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAAEAQYDGAAshZWN0aW9uZW50LWxlbmd0aG9ucm94eS1jb25uZWN0aW9uAEGwxgALK3JhbnNmZXItZW5jb2RpbmdwZ3JhZGUNCg0KU00NCg0KVFRQL0NFL1RTUC8AQenGAAsFAQIAAQMAQYDHAAtfBAUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUAQenIAAsFAQIAAQMAQYDJAAtfBAUFBgUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUAQenKAAsEAQAAAQBBgcsAC14CAgACAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAEHpzAALBQECAAEDAEGAzQALXwQFAAAFBQUFBQUFBQUFBQYFBQUFBQUFBQUFBQUABQAHCAUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQAFAAUABQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUAAAAFAEHpzgALBQEBAAEBAEGAzwALAQEAQZrPAAtBAgAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQenQAAsFAQEAAQEAQYDRAAsBAQBBitEACwYCAAAAAAIAQaHRAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB4NIAC5oBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRVVFUllPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==",kC;Object.defineProperty(pk,"exports",{get:()=>kC||(kC=C5.from(I5,"base64"))})});var gk=w((cSe,hk)=>{"use strict";var{Buffer:B5}=v("node:buffer"),Q5="AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAn9/AGABfwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAzQzBQYAAAMAAAAAAAADAQMAAwMDAAACAAAAAAICAgICAgICAgIBAQEBAQEBAQEDAAADAAAABAUBcAESEgUDAQACBggBfwFBgNgECwfFBygGbWVtb3J5AgALX2luaXRpYWxpemUACBlfX2luZGlyZWN0X2Z1bmN0aW9uX3RhYmxlAQALbGxodHRwX2luaXQACRhsbGh0dHBfc2hvdWxkX2tlZXBfYWxpdmUANgxsbGh0dHBfYWxsb2MACwZtYWxsb2MAOAtsbGh0dHBfZnJlZQAMBGZyZWUADA9sbGh0dHBfZ2V0X3R5cGUADRVsbGh0dHBfZ2V0X2h0dHBfbWFqb3IADhVsbGh0dHBfZ2V0X2h0dHBfbWlub3IADxFsbGh0dHBfZ2V0X21ldGhvZAAQFmxsaHR0cF9nZXRfc3RhdHVzX2NvZGUAERJsbGh0dHBfZ2V0X3VwZ3JhZGUAEgxsbGh0dHBfcmVzZXQAEw5sbGh0dHBfZXhlY3V0ZQAUFGxsaHR0cF9zZXR0aW5nc19pbml0ABUNbGxodHRwX2ZpbmlzaAAWDGxsaHR0cF9wYXVzZQAXDWxsaHR0cF9yZXN1bWUAGBtsbGh0dHBfcmVzdW1lX2FmdGVyX3VwZ3JhZGUAGRBsbGh0dHBfZ2V0X2Vycm5vABoXbGxodHRwX2dldF9lcnJvcl9yZWFzb24AGxdsbGh0dHBfc2V0X2Vycm9yX3JlYXNvbgAcFGxsaHR0cF9nZXRfZXJyb3JfcG9zAB0RbGxodHRwX2Vycm5vX25hbWUAHhJsbGh0dHBfbWV0aG9kX25hbWUAHxJsbGh0dHBfc3RhdHVzX25hbWUAIBpsbGh0dHBf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a0E+aiECCyABIAI2AhwgAUIANwIQIAJBAnRBsNYAaiEAAkBBhNQAKAIAIgNBASACdCIHcUUEQCAAIAE2AgBBhNQAIAMgB3I2AgAgASAANgIYIAEgATYCCCABIAE2AgwMAQsgBEEZIAJBAXZrQQAgAkEfRxt0IQIgACgCACEAAkADQCAAIgMoAgRBeHEgBEYNASACQR12IQAgAkEBdCECIAMgAEEEcWpBEGoiBygCACIADQALIAcgATYCACABIAM2AhggASABNgIMIAEgATYCCAwBCyADKAIIIgAgATYCDCADIAE2AgggAUEANgIYIAEgAzYCDCABIAA2AggLQaDUAEGg1AAoAgBBAWsiAEF/IAAbNgIACwsHACAALQAoCwcAIAAtACoLBwAgAC0AKwsHACAALQApCwcAIAAvATQLBwAgAC0AMAtAAQR/IAAoAhghASAALwEuIQIgAC0AKCEDIAAoAjghBCAAEDcgACAENgI4IAAgAzoAKCAAIAI7AS4gACABNgIYC8X4AQIHfwN+IAEgAmohBAJAIAAiAygCDCIADQAgAygCBARAIAMgATYCBAsjAEEQayIJJAACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAC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AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAMCfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJ/AkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAMCfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCACDtQBAAECAwQFBgcICQoLDA0ODxARFBUWFxgZGhscHR4fICEjJCUnKCmIA4cDhQOEA/wC9QLuAusC6ALmAuMC4ALfAt0C2wLWAtUC1ALTAtICygLJAsgCxwLGAsUCxALDAr0CvAK6ArkCuAK3ArYCtQK0ArICsQKsAqoCqAKnAqYCpQKkAqMCogKhAqACnwKbApoCmQKYApcCkAKIAoQCgwKCAvkB9gH1AfQB8wHyAfEB8AHvAe0B6wHoAeMB4QHgAd8B3gHdAdwB2wHaAdkB2AHX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QEBAQEBAQEBAQEBAAEALQQAhAiADQQA2AhwgA0G3CzYCECADQQI2AgwgAyABQQFqNgIUDIEDCyADQS9qIQIDQCABIARGBEBBISECDIIDCwJAAkACQCABLQAAIgBBCWsOGAIAKioBKioqKioqKioqKioqKioqKioqAigLIAFBAWohASADQS9qLQAAQQFxRQ0LDBkLIAFBAWohAQwYCyABQQFqIQEgAi0AAEECcQ0AC0EAIQIgA0EANgIcIAMgATYCFCADQc4UNgIQIANBDDYCDAyAAwsgAUEBaiEBC0EAIQACQCADKAI4IgJFDQAgAigCVCICRQ0AIAMgAhEAACEACyAADQEM0QILIANCADcDIAw8CyAAQRVGBEAgA0EkNgIcIAMgATYCFCADQYYaNgIQIANBFTYCDEEAIQIM/QILQQAhAiADQQA2AhwgAyABNgIUIANB4g02AhAgA0EUNgIMDPwCCyADKAIEIQBBACECIANBADYCBCADIAAgASAMp2oiARAxIgBFDSsgA0EHNgIcIAMgATYCFCADIAA2AgwM+wILIAMtAC5BwABxRQ0BC0EAIQACQCADKAI4IgJFDQAgAigCUCICRQ0AIAMgAhEAACEACyAARQ0rIABBFUYEQCADQQo2AhwgAyABNgIUIANB8Rg2AhAgA0EVNgIMQQAhAgz6AgtBACECIANBADYCHCADIAE2AhQgA0GLDDYCECADQRM2AgwM+QILQQAhAiADQQA2AhwgAyABNgIUIANBsRQ2AhAgA0ECNgIMDPgCC0EAIQIgA0EANgIcIAMgATYCFCADQYwUNgIQIANBGTYCDAz3AgtBACECIANBADYCHCADIAE2AhQgA0HRHDYCECADQRk2AgwM9gILIABBFUYNPUEAIQIgA0EANgIcIAMgATYCFCADQaIPNgIQIANBIjYCDAz1AgsgAygCBCEAQQAhAiADQQA2AgQgAyAAIAEQMiIARQ0oIANBDTYCHCADIAE2AhQgAyAANgIMDPQCCyAAQRVGDTpBACECIANBADYCHCADIAE2AhQgA0GiDzYCECADQSI2AgwM8wILIAMoAgQhAEEAIQIgA0EANgIEIAMgACABEDIiAEUEQCABQQFqIQEMKAsgA0EONgIcIAMgADYCDCADIAFBAWo2AhQM8gILIABBFUYNN0EAIQIgA0EANgIcIAMgATYCFCADQaIPNgIQIANBIjYCDAzxAgsgAygCBCEAQQAhAiADQQA2AgQgAyAAIAEQMiIARQRAIAFBAWohAQwnCyADQQ82AhwgAyAANgIMIAMgAUEBajYCFAzwAgtBACECIANBADYCHCADIAE2AhQgA0HoFjYCECADQRk2AgwM7wILIABBFUYNM0EAIQIgA0EANgIcIAMgATYCFCADQc4MNgIQIANBIzYCDAzuAgsgAygCBCEAQQAhAiADQQA2AgQgAyAAIAEQMyIARQ0lIANBETYCHCADIAE2AhQgAyAANgIMDO0CCyAAQRVGDTBBACECIANBADYCHCADIAE2AhQgA0HODDYCECADQSM2AgwM7AILIAMoAgQhAEEAIQIgA0EANgIEIAMgACABEDMiAEUEQCABQQFqIQEMJQsgA0ESNgIcIAMgADYCDCADIAFBAWo2AhQM6wILIANBL2otAABBAXFFDQELQRUhAgzPAgtBACECIANBADYCHCADIAE2AhQgA0HoFjYCECADQRk2AgwM6AILIABBO0cNACABQQFqIQEMDAtBACECIANBADYCHCADIAE2AhQgA0GYFzYCECADQQI2AgwM5gILIABBFUYNKEEAIQIgA0EANgIcIAMgATYCFCADQc4MNgIQIANBIzYCDAzlAgsgA0EUNgIcIAMgATYCFCADIAA2AgwM5AILIAMoAgQhAEEAIQIgA0EANgIEIAMgACABEDMiAEUEQCABQQFqIQEM3AILIANBFTYCHCADIAA2AgwgAyABQQFqNgIUDOMCCyADKAIEIQBBACECIANBADYCBCADIAAgARAzIgBFBEAgAUEBaiEBDNoCCyADQRc2AhwgAyAANgIMIAMgAUEBajYCFAziAgsgAEEVRg0jQQAhAiADQQA2AhwgAyABNgIUIANBzgw2AhAgA0EjNgIMDOECCyADKAIEIQBBACECIANBADYCBCADIAAgARAzIgBFBEAgAUEBaiEBDB0LIANBGTYCHCADIAA2AgwgAyABQQFqNgIUDOACCyADKAIEIQBBACECIANBADYCBCADIAAgARAzIgBFBEAgAUEBaiEBDNYCCyADQRo2AhwgAyAANgIMIAMgAUEBajYCFAzfAgsgAEEVRg0fQQAhAiADQQA2AhwgAyABNgIUIANBog82AhAgA0EiNgIMDN4CCyADKAIEIQBBACEC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DLMCCyABIARGBEBB6QEhAgyzAgsgAS0AAEHIAEYNASADQQE6ACgLQbYBIQIMlwILQcoBIQIMlgILIAEgBEcEQCADQQw2AgggAyABNgIEQckBIQIMlgILQegBIQIMrwILIAEgBEYEQEHnASECDK8CCyABLQAAQcgARw0EIAFBAWohAUHIASECDJQCCyABIARGBEBB5gEhAgyuAgsCQAJAIAEtAABBxQBrDhAABQUFBQUFBQUFBQUFBQUBBQsgAUEBaiEBQcYBIQIMlAILIAFBAWohAUHHASECDJMCC0HlASECIAEgBEYNrAIgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB99MAai0AAEcNAyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAMrQILIAMoAgQhACADQgA3AwAgAyAAIAZBAWoiARAtIgBFBEBB1AEhAgyTAgsgA0HkATYCHCADIAE2AhQgAyAANgIMQQAhAgysAgtB4wEhAiABIARGDasCIAMoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQfXTAGotAABHDQIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADKwCCyADQYEEOwEoIAMoAgQhACADQgA3AwAgAyAAIAZBAWoiARAtIgANAwwCCyADQQA2AgALQQAhAiADQQA2AhwgAyABNgIUIANB0B42AhAgA0EINgIMDKkCC0HFASECDI4CCyADQeIBNgIcIAMgATYCFCADIAA2AgxBACECDKcCC0EAIQACQCADKAI4IgJFDQAgAigCOCICRQ0AIAMgAhEAACEACyAARQ1lIABBFUcEQCADQQA2AhwgAyABNgIUIANB1A42AhAgA0EgNgIMQQAhAgynAgsgA0GFATYCHCADIAE2AhQgA0HXGjYCECADQRU2AgxBACECDKYCC0HhASECIAQgASIARg2lAiAEIAFrIAMoAgAiAWohBSAAIAFrQQRqIQYCQANAIAAtAAAgAUHw0wBqLQAARw0BIAFBBEYNAyABQQFqIQEgBCAAQQFqIgBHDQALIAMgBTYCAAymAgsgA0EANgIcIAMgADYCFCADQYQ3NgIQIANBCDYCDCADQQA2AgBBACECDKUCCyABIARHBEAgA0ENNgIIIAMgATYCBEHCASECDIsCC0HgASECDKQCCyADQQA2AgAgBkEBaiEBC0HDASECDIgCCyABIARGBEBB3wEhAgyiAgsgAS0AAEEwayIAQf8BcUEKSQRAIAMgADoAKiABQQFqIQFBwQEhAgyIAgsgAygCBCEAIANBADYCBCADIAAgARAuIgBFDYgCIANB3gE2AhwgAyABNgIUIAMgADYCDEEAIQIMoQILIAEgBEYEQEHdASECDKECCwJAIAEtAABBLkYEQCABQQFqIQEMAQsgAygCBCEAIANBADYCBCADIAAgARAuIgBFDYkCIANB3AE2AhwgAyABNgIUIAMgADYCDEEAIQIMoQILQcABIQIMhgILIAEgBEYEQEHbASECDKACC0EAIQBBASEFQQEhB0EAIQICQAJAAkACQAJAAn8CQAJAAkACQAJAAkACQCABLQAAQTBrDgoKCQABAgMEBQYICwtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshAkEAIQVBACEHDAILQQkhAkEBIQBBACEFQQAhBwwBC0EAIQVBASECCyADIAI6ACsgAUEBaiEBAkACQCADLQAuQRBxDQACQAJAAkAgAy0AKg4DAQACBAsgB0UNAwwCCyAADQEMAgsgBUUNAQsgAygCBCEAIANBADYCBCADIAAgARAuIgBFDQIgA0HYATYCHCADIAE2AhQgAyAANgIMQQAhAgyiAgsgAygCBCEAIANBADYCBCADIAAgARAuIgBFDYsCIANB2QE2AhwgAyABNgIUIAMgADYCDEEAIQIMoQILIAMoAgQhACADQQA2AgQgAyAAIAEQLiIARQ2JAiADQdoBNgIcIAMgATYCFCADIAA2AgwMoAILQb8BIQIMhQILQQAhAAJAIAMoAjgiAkUNACACKAI8IgJFDQAgAyACEQAAIQALAkAgAARAIABBFUYNASADQQA2AhwgAyABNgIUIANBnA02AhAgA0EhNgIMQQAhAgygAgtBvgEhAgyFAgsgA0HXATYCHCADIAE2AhQgA0HWGTYCECADQRU2AgxBACECDJ4CCyABIARGBEBB1wEhAgyeAgsCQCABLQAAQSBGBEAgA0EAOwE0IAFBAWohAQwBCyADQQA2AhwgAyABNgIUIANB6xA2AhAgA0EJNgIMQQAhAgyeAgtBvQEhAgyDAgsgASAERgRAQdYBIQIMnQILAkAgAS0AAEEwa0H/AXEiAkEKSQRAIAFBAWohAQJAIAMvATQiAEGZM0sNACADIABBCmwiADsBNCAAQf7/A3EgAkH//wNzSw0AIAMgACACajsBNAwCC0EAIQIgA0EANgIcIAMgATYCFCADQYAdNgIQIANBDTYCDAyeAgsgA0EANgIcIAMgATYCFCADQYAdNgIQIANBDTYCDEEAIQIMnQILQbwBIQIMggILIAEgBEYEQEHVASECDJwCCwJAIAEtAABBMGtB/wFxIgJBCkkEQCABQQFqIQECQCADLwE0IgBBmTNLDQAgAyAAQQpsIgA7ATQgAEH+/wNxIAJB//8Dc0sNACADIAAgAmo7ATQMAgtBACECIANBADYCHCADIAE2AhQgA0GAHTYCECADQQ02AgwMnQILIANBADYCHCADIAE2AhQgA0GAHTYCECADQQ02AgxBACECDJwCC0G7ASECDIECCyABIARGBEBB1AEhAgybAgsCQCABLQAAQTBrQf8BcSICQQpJBEAgAUEBaiEBAkAgAy8BNCIAQZkzSw0AIAMgAEEKbCIAOwE0IABB/v8DcSACQf//A3NLDQAgAyAAIAJqOwE0DAILQQAhAiADQQA2AhwgAyABNgIUIANBgB02AhAgA0ENNgIMDJwCCyADQQA2AhwgAyABNgIUIANBgB02AhAgA0ENNgIMQQAhAgybAgtBugEhAgyAAgsgASAERgRAQdMBIQIMmgILAkACQAJAAkAgAS0AAEEKaw4XAgMDAAMDAwMDAwMDAwMDAwMDAwMDAwEDCyABQQFqDAULIAFBAWohAUG5ASECDIECCyABQQFqIQEgA0Evai0AAEEBcQ0IIANBADYCHCADIAE2AhQgA0GFCzYCECADQQ02AgxBACECDJoCCyADQQA2AhwgAyABNgIUIANBhQs2AhAgA0ENNgIMQQAhAgyZAgsgASAERwRAIANBDjYCCCADIAE2AgRBASECDP8BC0HSASECDJgCCwJAAkADQAJAIAEtAABBCmsOBAIAAAMACyAEIAFBAWoiAUcNAAtB0QEhAgyZAgsgAygCBCEAIANBADYCBCADIAAgARAsIgBFBEAgAUEBaiEBDAQLIANB0AE2AhwgAyAANgIMIAMgAUEBajYCFEEAIQIMmAILIAMoAgQhACADQQA2AgQgAyAAIAEQLCIADQEgAUEBagshAUG3ASECDPwBCyADQc8BNgIcIAMgADYCDCADIAFBAWo2AhRBACECDJUCC0G4ASECDPoBCyADQS9qLQAAQQFxDQEgA0EANgIcIAMgATYCFCADQc8bNgIQIANBGTYCDEEAIQIMkwILIAEgBEYEQEHPASECDJMCCwJAAkACQCABLQAAQQprDgQBAgIAAgsgAUEBaiEBDAILIAFBAWohAQwBCyADLQAuQcAAcUUNAQtBACEAAkAgAygCOCICRQ0AIAIoAjQiAkUNACADIAIRAAAhAAsgAEUNlgEgAEEVRgRAIANB2QA2AhwgAyABNgIUIANBvRk2AhAgA0EVNgIMQQAhAgySAgsgA0EANgIcIAMgATYCFCADQfgMNgIQIANBGzYCDEEAIQIMkQILIANBADYCHCADIAE2AhQgA0HHJzYCECADQQI2AgxBACECDJACCyABIARHBEAgA0EMNgIIIAMgATYCBEG1ASECDPYBC0HOASECDI8CCyABIARGBEBBzQEhAgyPAgsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBwQBrDhUAAQIDWgQFBlpaWgcICQoLDA0ODxBaCyABQQFqIQFB8QAhAgyEAgsgAUEBaiEBQfIAIQIMgwILIAFBAWohAUH3ACECDIICCyABQQFqIQFB+wAhAgyBAgsgAUEBaiEBQfwAIQIMgAILIAFBAWohAUH/ACECDP8BCyABQQFqIQFBgAEhAgz+AQsgAUEBaiEBQYMBIQIM/QELIAFBAWohAUGMASECDPwBCyABQQFqIQFBjQEhAgz7AQsgAUEBaiEBQY4BIQIM+gELIAFBAWohAUGbASECDPkBCyABQQFqIQFBnAEhAgz4AQsgAUEBaiEBQaIBIQIM9wELIAFBAWohAUGqASECDPYBCyABQQFqIQFBrQEhAgz1AQsgAUEBaiEBQbQBIQIM9AELIAEgBEYEQEHMASECDI4CCyABLQAAQc4ARw1IIAFBAWohAUGzASECDPMBCyABIARGBEBBywEhAgyNAgsCQAJAAkAgAS0AAEHCAGsOEgBKSkpKSkpKSkoBSkpKSkpKAkoLIAFBAWohAUGuASECDPQBCyABQQFqIQFBsQEhAgzzAQsgAUEBaiEBQbIBIQIM8gELQcoBIQIgASAERg2LAiADKAIAIgAgBCABa2ohBSABIABrQQdqIQYCQANAIAEtAAAgAEHo0wBqLQAARw1FIABBB0YNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAyMAgsgA0EANgIAIAZBAWohAUEbDEULIAEgBEYEQEHJASECDIsCCwJAAkAgAS0AAEHJAGsOBwBHR0dHRwFHCyABQQFqIQFBrwEhAgzxAQsgAUEBaiEBQbABIQIM8AELQcgBIQIgASAERg2JAiADKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHm0wBqLQAARw1DIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAyKAgsgA0EANgIAIAZBAWohAUEPDEMLQccBIQIgASAERg2IAiADKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHk0wBqLQAARw1CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAyJAgsgA0EANgIAIAZBAWohAUEgDEILQcYBIQIgASAERg2HAiADKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHh0wBqLQAARw1BIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAyIAgsgA0EANgIAIAZBAWohAUESDEELIAEgBEYEQEHFASECDIcCCwJAAkAgAS0AAEHFAGsODgBDQ0NDQ0NDQ0NDQ0MBQwsgAUEBaiEBQasBIQIM7QELIAFBAWohAUGsASECDOwBC0HEASECIAEgBEYNhQIgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB3tMAai0AAEcNPyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAMhgILIANBADYCACAGQQFqIQFBBww/C0HDASECIAEgBEYNhAIgAygCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABB2NMAai0AAEcNPiAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAMhQILIANBADYCACAGQQFqIQFBKAw+CyABIARGBEBBwgEhAgyEAgsCQAJAAkAgAS0AAEHFAGsOEQBBQUFBQUFBQUEBQUFBQUECQQsgAUEBaiEBQacBIQIM6wELIAFBAWohAUGoASECDOoBCyABQQFqIQFBqQEhAgzpAQtBwQEhAiABIARGDYICIAMoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQdHTAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADIMCCyADQQA2AgAgBkEBaiEBQRoMPAtBwAEhAiABIARGDYECIAMoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQc3TAGotAABHDTsgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADIICCyADQQA2AgAgBkEBaiEBQSEMOwsgASAERgRAQb8BIQIMgQILAkACQCABLQAAQcEAaw4UAD09PT09PT09PT09PT09PT09PQE9CyABQQFqIQFBowEhAgznAQsgAUEBaiEBQaYBIQIM5gELIAEgBEYEQEG+ASECDIACCwJAAkAgAS0AAEHVAGsOCwA8PDw8PDw8PDwBPAsgAUEBaiEBQaQBIQIM5gELIAFBAWohAUGlASECDOUBC0G9ASECIAEgBEYN/gEgAygCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABBxNMAai0AAEcNOCAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM/wELIANBADYCACAGQQFqIQFBKgw4CyABIARGBEBBvAEhAgz+AQsgAS0AAEHQAEcNOCABQQFqIQFBJQw3C0G7ASECIAEgBEYN/AEgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABBwdMAai0AAEcNNiAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM/QELIANBADYCACAGQQFqIQFBDgw2CyABIARGBEBBugEhAgz8AQsgAS0AAEHFAEcNNiABQQFqIQFBoQEhAgzhAQsgASAERgRAQbkBIQIM+wELAkACQAJAAkAgAS0AAEHCAGsODwABAjk5OTk5OTk5OTk5AzkLIAFBAWohAUGdASECDOMBCyABQQFqIQFBngEhAgziAQsgAUEBaiEBQZ8BIQIM4QELIAFBAWohAUGgASECDOABC0G4ASECIAEgBEYN+QEgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABBvtMAai0AAEcNMyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM+gELIANBADYCACAGQQFqIQFBFAwzC0G3ASECIAEgBEYN+AEgAygCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBudMAai0AAEcNMiAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM+QELIANBADYCACAGQQFqIQFBKwwyC0G2ASECIAEgBEYN9wEgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABBttMAai0AAEcNMSAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM+AELIANBADYCACAGQQFqIQFBLAwxC0G1ASECIAEgBEYN9gEgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB4dMAai0AAEcNMCAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM9wELIANBADYCACAGQQFqIQFBEQwwC0G0ASECIAEgBEYN9QEgAygCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBstMAai0AAEcNLyAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM9gELIANBADYCACAGQQFqIQFBLgwvCyABIARGBEBBswEhAgz1AQsCQAJAAkACQAJAIAEtAABBwQBrDhUANDQ0NDQ0NDQ0NAE0NAI0NAM0NAQ0CyABQQFqIQFBkQEhAgzeAQsgAUEBaiEBQZIBIQIM3QELIAFBAWohAUGTASECDNwBCyABQQFqIQFBmAEhAgzbAQsgAUEBaiEBQZoBIQIM2gELIAEgBEYEQEGyASECDPQBCwJAAkAgAS0AAEHSAGsOAwAwATALIAFBAWohAUGZASECDNoBCyABQQFqIQFBBAwtC0GxASECIAEgBEYN8gEgAygCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBsNMAai0AAEcNLCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM8wELIANBADYCACAGQQFqIQFBHQwsCyABIARGBEBBsAEhAgzyAQsCQAJAIAEtAABByQBrDgcBLi4uLi4ALgsgAUEBaiEBQZcBIQIM2AELIAFBAWohAUEiDCsLIAEgBEYEQEGvASECDPEBCyABLQAAQdAARw0rIAFBAWohAUGWASECDNYBCyABIARGBEBBrgEhAgzwAQsCQAJAIAEtAABBxgBrDgsALCwsLCwsLCwsASwLIAFBAWohAUGUASECDNYBCyABQQFqIQFBlQEhAgzVAQtBrQEhAiABIARGDe4BIAMoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQazTAGotAABHDSggAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADO8BCyADQQA2AgAgBkEBaiEBQQ0MKAtBrAEhAiABIARGDe0BIAMoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQeHTAGotAABHDScgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADO4BCyADQQA2AgAgBkEBaiEBQQwMJwtBqwEhAiABIARGDewBIAMoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQarTAGotAABHDSYgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADO0BCyADQQA2AgAgBkEBaiEBQQMMJgtBqgEhAiABIARGDesBIAMoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQajTAGotAABHDSUgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADOwBCyADQQA2AgAgBkEBaiEBQSYMJQsgASAERgRAQakBIQIM6wELAkACQCABLQAAQdQAaw4CAAEnCyABQQFqIQFBjwEhAgzRAQsgAUEBaiEBQZABIQIM0AELQagBIQIgASAERg3pASADKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGm0wBqLQAARw0jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzqAQsgA0EANgIAIAZBAWohAUEnDCMLQacBIQIgASAERg3oASADKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGk0wBqLQAARw0iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzpAQsgA0EANgIAIAZBAWohAUEcDCILQaYBIQIgASAERg3nASADKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGe0wBqLQAARw0hIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzoAQsgA0EANgIAIAZBAWohAUEGDCELQaUBIQIgASAERg3mASADKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEGZ0wBqLQAARw0gIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAznAQsgA0EANgIAIAZBAWohAUEZDCALIAEgBEYEQEGkASECDOYBCwJAAkACQAJAIAEtAABBLWsOIwAkJCQkJCQkJCQkJCQkJCQkJCQkJCQkJAEkJCQkJAIkJCQDJAsgAUEBaiEBQYQBIQIMzgELIAFBAWohAUGFASECDM0BCyABQQFqIQFBigEhAgzMAQsgAUEBaiEBQYsBIQIMywELQaMBIQIgASAERg3kASADKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGX0wBqLQAARw0eIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzlAQsgA0EANgIAIAZBAWohAUELDB4LIAEgBEYEQEGiASECDOQBCwJAAkAgAS0AAEHBAGsOAwAgASALIAFBAWohAUGGASECDMoBCyABQQFqIQFBiQEhAgzJAQsgASAERgRAQaEBIQIM4wELAkACQCABLQAAQcEAaw4PAB8fHx8fHx8fHx8fHx8BHwsgAUEBaiEBQYcBIQIMyQELIAFBAWohAUGIASECDMgBCyABIARGBEBBoAEhAgziAQsgAS0AAEHMAEcNHCABQQFqIQFBCgwbC0GfASECIAEgBEYN4AEgAygCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBkdMAai0AAEcNGiAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM4QELIANBADYCACAGQQFqIQFBHgwaC0GeASECIAEgBEYN3wEgAygCACIAIAQgAWtqIQUgASAAa0EGaiEGAkADQCABLQAAIABBitMAai0AAEcNGSAAQQZGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM4AELIANBADYCACAGQQFqIQFBFQwZC0GdASECIAEgBEYN3gEgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABBh9MAai0AAEcNGCAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM3wELIANBADYCACAGQQFqIQFBFwwYC0GcASECIAEgBEYN3QEgAygCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBgdMAai0AAEcNFyAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM3gELIANBADYCACAGQQFqIQFBGAwXCyABIARGBEBBmwEhAgzdAQsCQAJAIAEtAABByQBrDgcAGRkZGRkBGQsgAUEBaiEBQYEBIQIMwwELIAFBAWohAUGCASECDMIBC0GaASECIAEgBEYN2wEgAygCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB5tMAai0AAEcNFSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM3AELIANBADYCACAGQQFqIQFBCQwVC0GZASECIAEgBEYN2gEgAygCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB5NMAai0AAEcNFCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM2wELIANBADYCACAGQQFqIQFBHwwUC0GYASECIAEgBEYN2QEgAygCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB/tIAai0AAEcNEyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM2gELIANBADYCACAGQQFqIQFBAgwTC0GXASECIAEgBEYN2AEgAygCACIAIAQgAWtqIQUgASAAa0EBaiEGA0AgAS0AACAAQfzSAGotAABHDREgAEEBRg0CIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADNgBCyABIARGBEBBlgEhAgzYAQtBASABLQAAQd8ARw0RGiABQQFqIQFB/QAhAgy9AQsgA0EANgIAIAZBAWohAUH+ACECDLwBC0GVASECIAEgBEYN1QEgAygCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABBxNMAai0AAEcNDyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM1gELIANBADYCACAGQQFqIQFBKQwPC0GUASECIAEgBEYN1AEgAygCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABB+NIAai0AAEcNDiAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAM1QELIANBADYCACAGQQFqIQFBLQwOCyABIARGBEBBkwEhAgzUAQsgAS0AAEHFAEcNDiABQQFqIQFB+gAhAgy5AQsgASAERgRAQZIBIQIM0wELAkACQCABLQAAQcwAaw4IAA8PDw8PDwEPCyABQQFqIQFB+AAhAgy5AQsgAUEBaiEBQfkAIQIMuAELQZEBIQIgASAERg3RASADKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHz0gBqLQAARw0LIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzSAQsgA0EANgIAIAZBAWohAUEjDAsLQZABIQIgASAERg3QASADKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHw0gBqLQAARw0KIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzRAQsgA0EANgIAIAZBAWohAUEADAoLIAEgBEYEQEGPASECDNABCwJAAkAgAS0AAEHIAGsOCAAMDAwMDAwBDAsgAUEBaiEBQfMAIQIMtgELIAFBAWohAUH2ACECDLUBCyABIARGBEBBjgEhAgzPAQsCQAJAIAEtAABBzgBrDgMACwELCyABQQFqIQFB9AAhAgy1AQsgAUEBaiEBQfUAIQIMtAELIAEgBEYEQEGNASECDM4BCyABLQAAQdkARw0IIAFBAWohAUEIDAcLQYwBIQIgASAERg3MASADKAIAIgAgBCABa2ohBSABIABrQQNqIQYCQANAIAEtAAAgAEHs0gBqLQAARw0GIABBA0YNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzNAQsgA0EANgIAIAZBAWohAUEFDAYLQYsBIQIgASAERg3LASADKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHm0gBqLQAARw0FIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzMAQsgA0EANgIAIAZBAWohAUEWDAULQYoBIQIgASAERg3KASADKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHh0wBqLQAARw0EIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAzLAQsgA0EANgIAIAZBAWohAUEQDAQLIAEgBEYEQEGJASECDMoBCwJAAkAgAS0AAEHDAGsODAAGBgYGBgYGBgYGAQYLIAFBAWohAUHvACECDLABCyABQQFqIQFB8AAhAgyvAQtBiAEhAiABIARGDcgBIAMoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQeDSAGotAABHDQIgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAyAFNgIADMkBCyADQQA2AgAgBkEBaiEBQSQMAgsgA0EANgIADAILIAEgBEYEQEGHASECDMcBCyABLQAAQcwARw0BIAFBAWohAUETCzoAKSADKAIEIQAgA0EANgIEIAMgACABEC0iAA0CDAELQQAhAiADQQA2AhwgAyABNgIUIANB6R42AhAgA0EGNgIMDMQBC0HuACECDKkBCyADQYYBNgIcIAMgATYCFCADIAA2AgxBACECDMIBC0EAIQACQCADKAI4IgJFDQAgAigCOCICRQ0AIAMgAhEAACEACyAARQ0AIABBFUYNASADQQA2AhwgAyABNgIUIANB1A42AhAgA0EgNgIMQQAhAgzBAQtB7QAhAgymAQsgA0GFATYCHCADIAE2AhQgA0HXGjYCECADQRU2AgxBACECDL8BCyABIARGBEBBhQEhAgy/AQsCQCABLQAAQSBGBEAgAUEBaiEBDAELIANBADYCHCADIAE2AhQgA0GGHjYCECADQQY2AgxBACECDL8BC0ECIQIMpAELA0AgAS0AAEEgRw0CIAQgAUEBaiIBRw0AC0GEASECDL0BCyABIARGBEBBgwEhAgy9AQsCQCABLQAAQQlrDgRAAABAAAtB6wAhAgyiAQsgAy0AKUEFRgRAQewAIQIMogELQeoAIQIMoQELIAEgBEYEQEGCASECDLsBCyADQQ82AgggAyABNgIEDAoLIAEgBEYEQEGBASECDLoBCwJAIAEtAABBCWsOBD0AAD0AC0HpACECDJ8BCyABIARHBEAgA0EPNgIIIAMgATYCBEHnACECDJ8BC0GAASECDLgBCwJAIAEgBEcEQANAIAEtAABB4M4Aai0AACIAQQNHBEACQCAAQQFrDgI/AAQLQeYAIQIMoQELIAQgAUEBaiIBRw0AC0H+ACECDLkBC0H+ACECDLgBCyADQQA2AhwgAyABNgIUIANBxh82AhAgA0EHNgIMQQAhAgy3AQsgASAERgRAQf8AIQIMtwELAkACQAJAIAEtAABB4NAAai0AAEEBaw4DPAIAAQtB6AAhAgyeAQsgA0EANgIcIAMgATYCFCADQYYSNgIQIANBBzYCDEEAIQIMtwELQeAAIQIMnAELIAEgBEcEQCABQQFqIQFB5QAhAgycAQtB/QAhAgy1AQsgBCABIgBGBEBB/AAhAgy1AQsgAC0AACIBQS9GBEAgAEEBaiEBQeQAIQIMmwELIAFBCWsiAkEXSw0BIAAhAUEBIAJ0QZuAgARxDTcMAQsgBCABIgBGBEBB+wAhAgy0AQsgAC0AAEEvRw0AIABBAWohAQwDC0EAIQIgA0EANgIcIAMgADYCFCADQcYfNgIQIANBBzYCDAyyAQsCQAJAAkACQAJAA0AgAS0AAEHgzABqLQAAIgBBBUcEQAJAAkAgAEEBaw4IPQUGBwgABAEIC0HhACECDJ8BCyABQQFqIQFB4wAhAgyeAQsgBCABQQFqIgFHDQALQfoAIQIMtgELIAFBAWoMFAsgAygCBCEAIANBADYCBCADIAAgARArIgBFDR4gA0HbADYCHCADIAE2AhQgAyAANgIMQQAhAgy0AQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDR4gA0HdADYCHCADIAE2AhQgAyAANgIMQQAhAgyzAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDR4gA0HwADYCHCADIAE2AhQgAyAANgIMQQAhAgyyAQsgA0EANgIcIAMgATYCFCADQcsPNgIQIANBBzYCDEEAIQIMsQELIAEgBEYEQEH5ACECDLEBCwJAIAEtAABB4MwAai0AAEEBaw4INAQFBgAIAgMHCyABQQFqIQELQQMhAgyVAQsgAUEBagwNC0EAIQIgA0EANgIcIANBoxI2AhAgA0EHNgIMIAMgAUEBajYCFAytAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDRYgA0HbADYCHCADIAE2AhQgAyAANgIMQQAhAgysAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDRYgA0HdADYCHCADIAE2AhQgAyAANgIMQQAhAgyrAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDRYgA0HwADYCHCADIAE2AhQgAyAANgIMQQAhAgyqAQsgA0EANgIcIAMgATYCFCADQcsPNgIQIANBBzYCDEEAIQIMqQELQeIAIQIMjgELIAEgBEYEQEH4ACECDKgBCyABQQFqDAILIAEgBEYEQEH3ACECDKcBCyABQQFqDAELIAEgBEYNASABQQFqCyEBQQQhAgyKAQtB9gAhAgyjAQsDQCABLQAAQeDKAGotAAAiAEECRwRAIABBAUcEQEHfACECDIsBCwwnCyAEIAFBAWoiAUcNAAtB9QAhAgyiAQsgASAERgRAQfQAIQIMogELAkAgAS0AAEEJaw43JQMGJQQGBgYGBgYGBgYGBgYGBgYGBgYFBgYCBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGBgYGAAYLIAFBAWoLIQFBBSECDIYBCyABQQFqDAYLIAMoAgQhACADQQA2AgQgAyAAIAEQKyIARQ0IIANB2wA2AhwgAyABNgIUIAMgADYCDEEAIQIMngELIAMoAgQhACADQQA2AgQgAyAAIAEQKyIARQ0IIANB3QA2AhwgAyABNgIUIAMgADYCDEEAIQIMnQELIAMoAgQhACADQQA2AgQgAyAAIAEQKyIARQ0IIANB8AA2AhwgAyABNgIUIAMgADYCDEEAIQIMnAELIANBADYCHCADIAE2AhQgA0G8EzYCECADQQc2AgxBACECDJsBCwJAAkACQAJAA0AgAS0AAEHgyABqLQAAIgBBBUcEQAJAIABBAWsOBiQDBAUGAAYLQd4AIQIMhgELIAQgAUEBaiIBRw0AC0HzACECDJ4BCyADKAIEIQAgA0EANgIEIAMgACABECsiAEUNByADQdsANgIcIAMgATYCFCADIAA2AgxBACECDJ0BCyADKAIEIQAgA0EANgIEIAMgACABECsiAEUNByADQd0ANgIcIAMgATYCFCADIAA2AgxBACECDJwBCyADKAIEIQAgA0EANgIEIAMgACABECsiAEUNByADQfAANgIcIAMgATYCFCADIAA2AgxBACECDJsBCyADQQA2AhwgAyABNgIUIANB3Ag2AhAgA0EHNgIMQQAhAgyaAQsgASAERg0BIAFBAWoLIQFBBiECDH4LQfIAIQIMlwELAkACQAJAAkADQCABLQAAQeDGAGotAAAiAEEFRwRAIABBAWsOBB8CAwQFCyAEIAFBAWoiAUcNAAtB8QAhAgyaAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDQMgA0HbADYCHCADIAE2AhQgAyAANgIMQQAhAgyZAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDQMgA0HdADYCHCADIAE2AhQgAyAANgIMQQAhAgyYAQsgAygCBCEAIANBADYCBCADIAAgARArIgBFDQMgA0HwADYCHCADIAE2AhQgAyAANgIMQQAhAgyXAQsgA0EANgIcIAMgATYCFCADQbQKNgIQIANBBzYCDEEAIQIMlgELQc4AIQIMewtB0AAhAgx6C0HdACECDHkLIAEgBEYEQEHwACECDJMBCwJAIAEtAABBCWsOBBYAABYACyABQQFqIQFB3AAhAgx4CyABIARGBEBB7wAhAgySAQsCQCABLQAAQQlrDgQVAAAVAAtBACEAAkAgAygCOCICRQ0AIAIoAjAiAkUNACADIAIRAAAhAAsgAEUEQEHTASECDHgLIABBFUcEQCADQQA2AhwgAyABNgIUIANBwQ02AhAgA0EaNgIMQQAhAgySAQsgA0HuADYCHCADIAE2AhQgA0HwGTYCECADQRU2AgxBACECDJEBC0HtACECIAEgBEYNkAEgAygCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABB18YAai0AAEcNBCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyADIAU2AgAMkQELIANBADYCACAGQQFqIQEgAy0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACECIANBADYCHCADIAE2AhQgA0HlCTYCECADQQg2AgwMkAELQewAIQIgASAERg2PASADKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHUxgBqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAyQAQsgA0EANgIAIAZBAWohASADLQApQSFGDQMgA0EANgIcIAMgATYCFCADQYkKNgIQIANBCDYCDEEAIQIMjwELQesAIQIgASAERg2OASADKAIAIgAgBCABa2ohBSABIABrQQNqIQYCQANAIAEtAAAgAEHQxgBqLQAARw0CIABBA0YNASAAQQFqIQAgBCABQQFqIgFHDQALIAMgBTYCAAyPAQsgA0EANgIAIAZBAWohASADLQApIgBBI0kNAiAAQS5GDQIgA0EANgIcIAMgATYCFCADQcEJNgIQIANBCDYCDEEAIQIMjgELIANBADYCAAtBACECIANBADYCHCADIAE2AhQgA0GENzYCECADQQg2AgwMjAELQdgAIQIMcQsgASAERwRAIANBDTYCCCADIAE2AgRB1wAhAgxxC0HqACECDIoBCyABIARGBEBB6QAhAgyKAQsgAS0AAEEwayIAQf8BcUEKSQRAIAMgADoAKiABQQFqIQFB1gAhAgxwCyADKAIEIQAgA0EANgIEIAMgACABEC4iAEUNdCADQegANgIcIAMgATYCFCADIAA2AgxBACECDIkBCyABIARGBEBB5wAhAgyJAQsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAMoAgQhACADQQA2AgQgAyAAIAEQLiIARQ11IANB5gA2AhwgAyABNgIUIAMgADYCDEEAIQIMiQELQdUAIQIMbgsgASAERgRAQeUAIQIMiAELQQAhAEEBIQVBASEHQQAhAgJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAEtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyECQQAhBUEAIQcMAgtBCSECQQEhAEEAIQVBACEHDAELQQAhBUEBIQILIAMgAjoAKyABQQFqIQECQAJAIAMtAC5BEHENAAJAAkACQCADLQAqDgMBAAIECyAHRQ0DDAILIAANAQwCCyAFRQ0BCyADKAIEIQAgA0EANgIEIAMgACABEC4iAEUNAiADQeIANgIcIAMgATYCFCADIAA2AgxBACECDIoBCyADKAIEIQAgA0EANgIEIAMgACABEC4iAEUNdyADQeMANgIcIAMgATYCFCADIAA2AgxBACECDIkBCyADKAIEIQAgA0EANgIEIAMgACABEC4iAEUNdSADQeQANgIcIAMgATYCFCADIAA2AgwMiAELQdMAIQIMbQsgAy0AKUEiRg2AAUHSACECDGwLQQAhAAJAIAMoAjgiAkUNACACKAI8IgJFDQAgAyACEQAAIQALIABFBEBB1AAhAgxsCyAAQRVHBEAgA0EANgIcIAMgATYCFCADQZwNNgIQIANBITYCDEEAIQIMhgELIANB4QA2AhwgAyABNgIUIANB1hk2AhAgA0EVNgIMQQAhAgyFAQsgASAERgRAQeAAIQIMhQELAkACQAJAAkACQCABLQAAQQprDgQBBAQABAsgAUEBaiEBDAELIAFBAWohASADQS9qLQAAQQFxRQ0BC0HRACECDGwLIANBADYCHCADIAE2AhQgA0GIETYCECADQQk2AgxBACECDIUBCyADQQA2AhwgAyABNgIUIANBiBE2AhAgA0EJNgIMQQAhAgyEAQsgASAERgRAQd8AIQIMhAELIAEtAABBCkYEQCABQQFqIQEMCQsgAy0ALkHAAHENCCADQQA2AhwgAyABNgIUIANBiBE2AhAgA0ECNgIMQQAhAgyDAQsgASAERgRAQd0AIQIMgwELIAEtAAAiAkENRgRAIAFBAWohAUHPACECDGkLIAEhACACQQlrDgQFAQEFAQsgBCABIgBGBEBB3AAhAgyCAQsgAC0AAEEKRw0AIABBAWoMAgtBACECIANBADYCHCADIAA2AhQgA0G1LDYCECADQQc2AgwMgAELIAEgBEYEQEHbACECDIABCwJAIAEtAABBCWsOBAMAAAMACyABQQFqCyEBQc0AIQIMZAsgASAERgRAQdoAIQIMfgsgAS0AAEEJaw4EAAEBAAELQQAhAiADQQA2AhwgA0HsETYCECADQQc2AgwgAyABQQFqNgIUDHwLIANBgBI7ASpBACEAAkAgAygCOCICRQ0AIAIoAjAiAkUNACADIAIRAAAhAAsgAEUNACAAQRVHDQEgA0HZADYCHCADIAE2AhQgA0HwGTYCECADQRU2AgxBACECDHsLQcwAIQIMYAsgA0EANgIcIAMgATYCFCADQcENNgIQIANBGjYCDEEAIQIMeQsgASAERgRAQdkAIQIMeQsgAS0AAEEgRw06IAFBAWohASADLQAuQQFxDTogA0EANgIcIAMgATYCFCADQa0bNgIQIANBHjYCDEEAIQIMeAsgASAERgRAQdgAIQIMeAsCQAJAAkACQAJAIAEtAAAiAEEKaw4EAgMD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AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQTBrDjcVFAABAgMEBQYHFhYWFhYWFggJCgsMDRYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWDg8QERITFgtCAiEKDBQLQgMhCgwTC0IEIQoMEgtCBSEKDBELQgYhCgwQC0IHIQoMDwtCCCEKDA4LQgkhCgwNC0IKIQoMDAtCCyEKDAsLQgwhCgwKC0INIQoMCQtCDiEKDAgLQg8hCgwHC0IKIQoMBgtCCyEKDAULQgwhCgwEC0INIQoMAwtCDiEKDAILQg8hCgwBC0IBIQoLIAFBAWohASADKQMgIgtC//////////8PWARAIAMgC0IEhiAKhDcDIAwCC0EAIQIgA0EANgIcIAMgATYCFCADQa0JNgIQIANBDDYCDAwfC0ElIQIMBAtBJiECDAMLIAMgAToALCADQQA2AgAgB0EBaiEBQQwhAgwCCyADQQA2AgAgBkEBaiEBQQohAgwBCyABQQFqIQFBCCECDAALAAtBACECIANBADYCHCADIAE2AhQgA0HVEDYCECADQQk2AgwMGAtBACECIANBADYCHCADIAE2AhQgA0HXCjYCECADQQk2AgwMFwtBACECIANBADYCHCADIAE2AhQgA0G/EDYCECADQQk2AgwMFgtBACECIANBADYCHCADIAE2AhQgA0GkETYCECADQQk2AgwMFQtBACECIANBADYCHCADIAE2AhQgA0HVEDYCECADQQk2AgwMFAtBACECIANBADYCHCADIAE2AhQgA0HXCjYCECADQQk2AgwMEwtBACECIANBADYCHCADIAE2AhQgA0G/EDYCECADQQk2AgwMEgtBACECIANBADYCHCADIAE2AhQgA0GkETYCECADQQk2AgwMEQtBACECIANBADYCHCADIAE2AhQgA0G/FjYCECADQQ82AgwMEAtBACECIANBADYCHCADIAE2AhQgA0G/FjYCECADQQ82AgwMDwtBACECIANBADYCHCADIAE2AhQgA0HIEjYCECADQQs2AgwMDgtBACECIANBADYCHCADIAE2AhQgA0GVCTYCECADQQs2AgwMDQtBACECIANBADYCHCADIAE2AhQgA0HpDzYCECADQQo2AgwMDAtBACECIANBADYCHCADIAE2AhQgA0GDEDYCECADQQo2AgwMCwtBACECIANBADYCHCADIAE2AhQgA0GmHDYCECADQQI2AgwMCgtBACECIANBADYCHCADIAE2AhQgA0HFFTYCECADQQI2AgwMCQtBACECIANBADYCHCADIAE2AhQgA0H/FzYCECADQQI2AgwMCAtBACECIANBADYCHCADIAE2AhQgA0HKFzYCECADQQI2AgwMBwsgA0ECNgIcIAMgATYCFCADQZQdNgIQIANBFjYCDEEAIQIMBgtB3gAhAiABIARGDQUgCUEIaiEHIAMoAgAhBQJAAkAgASAERwRAIAVBxsYAaiEIIAQgBWogAWshBiAFQX9zQQpqIgUgAWohAANAIAEtAAAgCC0AAEcEQEECIQgMAwsgBUUEQEEAIQggACEBDAMLIAVBAWshBSAIQQFqIQggBCABQQFqIgFHDQALIAYhBSAEIQELIAdBATYCACADIAU2AgAMAQsgA0EANgIAIAcgCDYCAAsgByABNgIEIAkoAgwhACAJKAIIDgMBBQIACwALIANBADYCHCADQa0dNgIQIANBFzYCDCADIABBAWo2AhRBACECDAMLIANBADYCHCADIAA2AhQgA0HCHTYCECADQQk2AgxBACECDAILIAEgBEYEQEEoIQIMAgsgA0EJNgIIIAMgATYCBEEnIQIMAQsgASAERgRAQQEhAgwBCwNAAkACQAJAIAEtAABBCmsOBAABAQABCyABQQFqIQEMAQsgAUEBaiEBIAMtAC5BIHENAEEAIQIgA0EANgIcIAMgATYCFCADQYwgNgIQIANBBTYCDAwCC0EBIQIgASAERw0ACwsgCUEQaiQAIAJFBEAgAygCDCEADAELIAMgAjYCHEEAIQAgAygCBCIBRQ0AIAMgASAEIAMoAggRAQAiAUUNACADIAQ2AhQgAyABNgIMIAEhAAsgAAu+AgECfyAAQQA6AAAgAEHcAGoiAUEBa0EAOgAAIABBADoAAiAAQQA6AAEgAUEDa0EAOgAAIAFBAmtBADoAACAAQQA6AAMgAUEEa0EAOgAAQQAgAGtBA3EiASAAaiIAQQA2AgBB3AAgAWtBfHEiAiAAaiIBQQRrQQA2AgACQCACQQlJDQAgAEEANgIIIABBADYCBCABQQhrQQA2AgAgAUEMa0EANgIAIAJBGUkNACAAQQA2AhggAEEANgIUIABBADYC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U3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMARXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVycwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgAVHJhbnNmZXItRW5jb2RpbmcgY2FuJ3QgYmUgcHJlc2VudCB3aXRoIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAE1pc3NpbmcgZXhwZWN0ZWQgQ1IgYWZ0ZXIgY2h1bmsgc2l6ZQBFeHBlY3RlZCBMRiBhZnRlciBjaHVuayBzaXplAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIENSIGFmdGVyIGhlYWRlciB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgQ1IgYWZ0ZXIgY2h1bmsgZXh0ZW5zaW9uIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBxdW90ZWQtcGFpciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAE1pc3NpbmcgZXhwZWN0ZWQgQ1IgYWZ0ZXIgcmVzcG9uc2UgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBNaXNzaW5nIGV4cGVjdGVkIENSIGFmdGVyIGNodW5rIGV4dGVuc2lvbiBuYW1lAEludmFsaWQgc3RhdHVzIGNvZGUAUGF1c2Ugb24gQ09OTkVDVC9VcGdyYWRlAFBhdXNlIG9uIFBSSS9VcGdyYWRlAEV4cGVjdGVkIEhUVFAvMiBDb25uZWN0aW9uIFByZWZhY2UAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9tZXRob2QARXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgbWV0aG9kAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25faGVhZGVyX2ZpZWxkAFBhdXNlZABJbnZhbGlkIHdvcmQgZW5jb3VudGVyZWQASW52YWxpZCBtZXRob2QgZW5jb3VudGVyZWQATWlzc2luZyBleHBlY3RlZCBDUiBhZnRlciBjaHVuayBkYXRhAEV4cGVjdGVkIExGIGFmdGVyIGNodW5rIGRhdGEAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzY2hlbWEAUmVxdWVzdCBoYXMgaW52YWxpZCBgVHJhbnNmZXItRW5jb2RpbmdgAERhdGEgYWZ0ZXIgYENvbm5lY3Rpb246IGNsb3NlYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAUVVFUlkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBFeHBlY3RlZCBMRiBhZnRlciBDUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAFIVAAAaFQAADxIAAOQZAACRFQAACRQAAC0ZAADkFAAA6REAAGkUAAChFAAAdhUAAEMWAABeEgAAlBcAABcWAAB9FAAAfxYAAEEXAACzEwAAwxYAAAQaAAC9GAAA0BgAAKATAADUGQAArxYAAGgWAABwFwAA2RYAAPwYAAD+EQAAWRcAAJcWAAAcFwAA9hYAAI0XAAALEgAAfxsAAC4RAACzEAAASRIAAK0SAAD2GAAAaBAAAGIVAAAQFQAAWhYAAEoZAAC1FQAAwRUAAGAVAABcGQAAWhkAAFMZAAAWFQAArREAAEIQAAC3EAAAVxgAAL8VAACJEAAAHBkAABoZAAC5FQAAURgAANwTAABbFQAAWRUAAOYYAABnFQAAERkAAO0YAADnEwAArhAAAMIXAAAAFAAAkhMAAIQTAABAEgAAJhkAAK8VAABiEABB6TkLAQEAQYA6C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAwEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQeo7CwQBAAACAEGBPAteAwQDAwMDAwAAAwMAAwMAAwMDAwMDAwMDAwAFAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAMAAwBB6j0LBAEAAAIAQYE+C14DAAMDAwMDAAADAwADAwADAwMDAwMDAwMDAAQABQAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAwADAEHgPwsNbG9zZWVlcC1hbGl2ZQBB+T8LAQEAQZDAAAvgAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5wQALAQEAQZDCAAvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBocQAC14BAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGAxgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBsMYACytyYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNClNNDQoNClRUUC9DRS9UU1AvAEHpxgALBQECAAEDAEGAxwALXwQFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFAEHpyAALBQECAAEDAEGAyQALXwQFBQYFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFAEHpygALBAEAAAEAQYHLAAteAgIAAgICAgICAgICAgICAgICAgICAgICAgICAgICAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgBB6cwACwUBAgABAwBBgM0AC18EBQAABQUFBQUFBQUFBQUGBQUFBQUFBQUFBQUFAAUABwgFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUABQAFAAUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFAAAABQBB6c4ACwUBAQABAQBBgM8ACwEBAEGazwALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEHp0AALBQEBAAEBAEGA0QALAQEAQYrRAAsGAgAAAAACAEGh0QALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQeDSAAuaAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VVRVJZT1JESVJFQ1RPUlRSQ0hQQVJBTUVURVJVUkNFQlNDUklCRUFSRE9XTkFDRUlORE5LQ0tVQlNDUklCRUhUVFAvQURUUC8=",vC;Object.defineProperty(hk,"exports",{get:()=>vC||(vC=B5.from(Q5,"base64"))})});var QA=w((ASe,bk)=>{"use strict";var mk=["GET","HEAD","POST"],b5=new Set(mk),w5=[101,204,205,304],yk=[301,302,303,307,308],S5=new Set(yk),Ek=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],T5=new Set(Ek),Ck=["no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],x5=["",...Ck],R5=new Set(Ck),D5=["follow","manual","error"],Ik=["GET","HEAD","OPTIONS","TRACE"],F5=new Set(Ik),k5=["navigate","same-origin","no-cors","cors"],N5=["omit","same-origin","include"],v5=["default","no-store","reload","no-cache","force-cache","only-if-cached"],P5=["content-encoding","content-language","content-location","content-type","content-length"],L5=["half"],Bk=["CONNECT","TRACE","TRACK"],U5=new Set(Bk),Qk=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],O5=new Set(Qk);bk.exports={subresource:Qk,forbiddenMethods:Bk,requestBodyHeader:P5,referrerPolicy:x5,requestRedirect:D5,requestMode:k5,requestCredentials:N5,requestCache:v5,redirectStatus:yk,corsSafeListedMethods:mk,nullBodyStatus:w5,safeMethods:Ik,badPorts:Ek,requestDuplex:L5,subresourceSet:O5,badPortsSet:T5,redirectStatusSet:S5,corsSafeListedMethodsSet:b5,safeMethodsSet:F5,forbiddenMethodsSet:U5,referrerPolicyTokens:R5}});var LC=w((uSe,wk)=>{"use strict";var PC=Symbol.for("undici.globalOrigin.1");function M5(){return globalThis[PC]}function _5(e){if(e===void 0){Object.defineProperty(globalThis,PC,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let t=new URL(e);if(t.protocol!=="http:"&&t.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${t.protocol}`);Object.defineProperty(globalThis,PC,{value:t,writable:!0,enumerable:!1,configurable:!1})}wk.exports={getGlobalOrigin:M5,setGlobalOrigin:_5}});var Sr=w((dSe,kk)=>{"use strict";var $f=v("node:assert"),G5=new TextEncoder,bA=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,j5=/[\u000A\u000D\u0009\u0020]/,H5=/[\u0009\u000A\u000C\u000D\u0020]/g,V5=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function q5(e){$f(e.protocol==="data:");let t=xk(e,!0);t=t.slice(5);let r={position:0},o=ol(",",t,r),n=o.length;if(o=K5(o,!0,!0),r.position>=t.length)return"failure";r.position++;let i=t.slice(n+1),s=Rk(i);if(/;(\u0020){0,}base64$/i.test(o)){let l=Fk(s);if(s=W5(l),s==="failure")return"failure";o=o.slice(0,-6),o=o.replace(/(\u0020)+$/,""),o=o.slice(0,-1)}o.startsWith(";")&&(o="text/plain"+o);let a=UC(o);return a==="failure"&&(a=UC("text/plain;charset=US-ASCII")),{mimeType:a,body:s}}function xk(e,t=!1){if(!t)return e.href;let r=e.href,o=e.hash.length,n=o===0?r:r.substring(0,r.length-o);return!o&&r.endsWith("#")?n.slice(0,-1):n}function Kf(e,t,r){let o="";for(;r.position<t.length&&e(t[r.position]);)o+=t[r.position],r.position++;return o}function ol(e,t,r){let o=t.indexOf(e,r.position),n=r.position;return o===-1?(r.position=t.length,t.slice(n)):(r.position=o,t.slice(n,r.position))}function Rk(e){let t=G5.encode(e);return Y5(t)}function Sk(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function Tk(e){return e>=48&&e<=57?e-48:(e&223)-55}function Y5(e){let t=e.length,r=new Uint8Array(t),o=0;for(let n=0;n<t;++n){let i=e[n];i!==37?r[o++]=i:i===37&&!(Sk(e[n+1])&&Sk(e[n+2]))?r[o++]=37:(r[o++]=Tk(e[n+1])<<4|Tk(e[n+2]),n+=2)}return t===o?r:r.subarray(0,o)}function UC(e){e=zf(e,!0,!0);let t={position:0},r=ol("/",e,t);if(r.length===0||!bA.test(r)||t.position>=e.length)return"failure";t.position++;let o=ol(";",e,t);if(o=zf(o,!1,!0),o.length===0||!bA.test(o))return"failure";let n=r.toLowerCase(),i=o.toLowerCase(),s={type:n,subtype:i,parameters:new Map,essence:`${n}/${i}`};for(;t.position<e.length;){t.position++,Kf(c=>j5.test(c),e,t);let a=Kf(c=>c!==";"&&c!=="=",e,t);if(a=a.toLowerCase(),t.position<e.length){if(e[t.position]===";")continue;t.position++}if(t.position>=e.length)break;let l=null;if(e[t.position]==='"')l=Dk(e,t,!0),ol(";",e,t);else if(l=ol(";",e,t),l=zf(l,!1,!0),l.length===0)continue;a.length!==0&&bA.test(a)&&(l.length===0||V5.test(l))&&!s.parameters.has(a)&&s.parameters.set(a,l)}return s}function W5(e){e=e.replace(H5,"");let t=e.length;if(t%4===0&&e.charCodeAt(t-1)===61&&(--t,e.charCodeAt(t-1)===61&&--t),t%4===1||/[^+/0-9A-Za-z]/.test(e.length===t?e:e.substring(0,t)))return"failure";let r=Buffer.from(e,"base64");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}function Dk(e,t,r=!1){let o=t.position,n="";for($f(e[t.position]==='"'),t.position++;n+=Kf(s=>s!=='"'&&s!=="\\",e,t),!(t.position>=e.length);){let i=e[t.position];if(t.position++,i==="\\"){if(t.position>=e.length){n+="\\";break}n+=e[t.position],t.position++}else{$f(i==='"');break}}return r?n:e.slice(o,t.position)}function J5(e){$f(e!=="failure");let{parameters:t,essence:r}=e,o=r;for(let[n,i]of t.entries())o+=";",o+=n,o+="=",bA.test(i)||(i=i.replace(/(\\|")/g,"\\$1"),i='"'+i,i+='"'),o+=i;return o}function z5(e){return e===13||e===10||e===9||e===32}function zf(e,t=!0,r=!0){return OC(e,t,r,z5)}function $5(e){return e===13||e===10||e===9||e===12||e===32}function K5(e,t=!0,r=!0){return OC(e,t,r,$5)}function OC(e,t,r,o){let n=0,i=e.length-1;if(t)for(;n<e.length&&o(e.charCodeAt(n));)n++;if(r)for(;i>0&&o(e.charCodeAt(i));)i--;return n===0&&i===e.length-1?e:e.slice(n,i+1)}function Fk(e){let t=e.length;if(65535>t)return String.fromCharCode.apply(null,e);let r="",o=0,n=65535;for(;o<t;)o+n>t&&(n=t-o),r+=String.fromCharCode.apply(null,e.subarray(o,o+=n));return r}function Z5(e){switch(e.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return e.subtype.endsWith("+json")?"application/json":e.subtype.endsWith("+xml")?"application/xml":""}kk.exports={dataURLProcessor:q5,URLSerializer:xk,collectASequenceOfCodePoints:Kf,collectASequenceOfCodePointsFast:ol,stringPercentDecode:Rk,parseMIMEType:UC,collectAnHTTPQuotedString:Dk,serializeAMimeType:J5,removeChars:OC,removeHTTPWhitespace:zf,minimizeSupportedMimeType:Z5,HTTP_TOKEN_CODEPOINTS:bA,isomorphicDecode:Fk}});var kt=w((fSe,vk)=>{"use strict";var{types:Qs,inspect:X5}=v("node:util"),{markAsUncloneable:e9}=v("node:worker_threads"),{toUSVString:t9}=ue(),MC=1,_C=2,Zf=3,Xf=4,GC=5,jC=6,HC=7,Yo=8,Nk=Function.call.bind(Function.prototype[Symbol.hasInstance]),L={converters:{},util:{},errors:{},is:{}};L.errors.exception=function(e){return new TypeError(`${e.header}: ${e.message}`)};L.errors.conversionFailed=function(e){let t=e.types.length===1?"":" one of",r=`${e.argument} could not be converted to${t}: ${e.types.join(", ")}.`;return L.errors.exception({header:e.prefix,message:r})};L.errors.invalidArgument=function(e){return L.errors.exception({header:e.prefix,message:`"${e.value}" is an invalid ${e.type}.`})};L.brandCheck=function(e,t){if(!Nk(t,e)){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}};L.brandCheckMultiple=function(e){let t=e.map(r=>L.util.MakeTypeAssertion(r));return r=>{if(t.every(o=>!o(r))){let o=new TypeError("Illegal invocation");throw o.code="ERR_INVALID_THIS",o}}};L.argumentLengthCheck=function({length:e},t,r){if(e<t)throw L.errors.exception({message:`${t} argument${t!==1?"s":""} required, but${e?" only":""} ${e} found.`,header:r})};L.illegalConstructor=function(){throw L.errors.exception({header:"TypeError",message:"Illegal constructor"})};L.util.MakeTypeAssertion=function(e){return t=>Nk(e,t)};L.util.Type=function(e){switch(typeof e){case"undefined":return MC;case"boolean":return _C;case"string":return Zf;case"symbol":return Xf;case"number":return GC;case"bigint":return jC;case"function":case"object":return e===null?HC:Yo}};L.util.Types={UNDEFINED:MC,BOOLEAN:_C,STRING:Zf,SYMBOL:Xf,NUMBER:GC,BIGINT:jC,NULL:HC,OBJECT:Yo};L.util.TypeValueToString=function(e){switch(L.util.Type(e)){case MC:return"Undefined";case _C:return"Boolean";case Zf:return"String";case Xf:return"Symbol";case GC:return"Number";case jC:return"BigInt";case HC:return"Null";case Yo:return"Object"}};L.util.markAsUncloneable=e9||(()=>{});L.util.ConvertToInt=function(e,t,r,o){let n,i;t===64?(n=Math.pow(2,53)-1,r==="unsigned"?i=0:i=Math.pow(-2,53)+1):r==="unsigned"?(i=0,n=Math.pow(2,t)-1):(i=Math.pow(-2,t)-1,n=Math.pow(2,t-1)-1);let s=Number(e);if(s===0&&(s=0),o?.enforceRange===!0){if(Number.isNaN(s)||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY)throw L.errors.exception({header:"Integer conversion",message:`Could not convert ${L.util.Stringify(e)} to an integer.`});if(s=L.util.IntegerPart(s),s<i||s>n)throw L.errors.exception({header:"Integer conversion",message:`Value must be between ${i}-${n}, got ${s}.`});return s}return!Number.isNaN(s)&&o?.clamp===!0?(s=Math.min(Math.max(s,i),n),Math.floor(s)%2===0?s=Math.floor(s):s=Math.ceil(s),s):Number.isNaN(s)||s===0&&Object.is(0,s)||s===Number.POSITIVE_INFINITY||s===Number.NEGATIVE_INFINITY?0:(s=L.util.IntegerPart(s),s=s%Math.pow(2,t),r==="signed"&&s>=Math.pow(2,t)-1?s-Math.pow(2,t):s)};L.util.IntegerPart=function(e){let t=Math.floor(Math.abs(e));return e<0?-1*t:t};L.util.Stringify=function(e){switch(L.util.Type(e)){case Xf:return`Symbol(${e.description})`;case Yo:return X5(e);case Zf:return`"${e}"`;default:return`${e}`}};L.sequenceConverter=function(e){return(t,r,o,n)=>{if(L.util.Type(t)!==Yo)throw L.errors.exception({header:r,message:`${o} (${L.util.Stringify(t)}) is not iterable.`});let i=typeof n=="function"?n():t?.[Symbol.iterator]?.(),s=[],a=0;if(i===void 0||typeof i.next!="function")throw L.errors.exception({header:r,message:`${o} is not iterable.`});for(;;){let{done:l,value:c}=i.next();if(l)break;s.push(e(c,r,`${o}[${a++}]`))}return s}};L.recordConverter=function(e,t){return(r,o,n)=>{if(L.util.Type(r)!==Yo)throw L.errors.exception({header:o,message:`${n} ("${L.util.TypeValueToString(r)}") is not an Object.`});let i={};if(!Qs.isProxy(r)){let a=[...Object.getOwnPropertyNames(r),...Object.getOwnPropertySymbols(r)];for(let l of a){let c=L.util.Stringify(l),A=e(l,o,`Key ${c} in ${n}`),d=t(r[l],o,`${n}[${c}]`);i[A]=d}return i}let s=Reflect.ownKeys(r);for(let a of s)if(Reflect.getOwnPropertyDescriptor(r,a)?.enumerable){let c=e(a,o,n),A=t(r[a],o,n);i[c]=A}return i}};L.interfaceConverter=function(e,t){return(r,o,n)=>{if(!e(r))throw L.errors.exception({header:o,message:`Expected ${n} ("${L.util.Stringify(r)}") to be an instance of ${t}.`});return r}};L.dictionaryConverter=function(e){return(t,r,o)=>{let n={};if(t!=null&&L.util.Type(t)!==Yo)throw L.errors.exception({header:r,message:`Expected ${t} to be one of: Null, Undefined, Object.`});for(let i of e){let{key:s,defaultValue:a,required:l,converter:c}=i;if(l===!0&&(t==null||!Object.hasOwn(t,s)))throw L.errors.exception({header:r,message:`Missing required key "${s}".`});let A=t?.[s],d=a!==void 0;if(d&&A===void 0&&(A=a()),l||d||A!==void 0){if(A=c(A,r,`${o}.${s}`),i.allowedValues&&!i.allowedValues.includes(A))throw L.errors.exception({header:r,message:`${A} is not an accepted type. Expected one of ${i.allowedValues.join(", ")}.`});n[s]=A}}return n}};L.nullableConverter=function(e){return(t,r,o)=>t===null?t:e(t,r,o)};L.is.ReadableStream=L.util.MakeTypeAssertion(ReadableStream);L.is.Blob=L.util.MakeTypeAssertion(Blob);L.is.URLSearchParams=L.util.MakeTypeAssertion(URLSearchParams);L.is.File=L.util.MakeTypeAssertion(globalThis.File??v("node:buffer").File);L.is.URL=L.util.MakeTypeAssertion(URL);L.is.AbortSignal=L.util.MakeTypeAssertion(AbortSignal);L.is.MessagePort=L.util.MakeTypeAssertion(MessagePort);L.converters.DOMString=function(e,t,r,o){if(e===null&&o?.legacyNullToEmptyString)return"";if(typeof e=="symbol")throw L.errors.exception({header:t,message:`${r} is a symbol, which cannot be converted to a DOMString.`});return String(e)};L.converters.ByteString=function(e,t,r){if(typeof e=="symbol")throw L.errors.exception({header:t,message:`${r} is a symbol, which cannot be converted to a ByteString.`});let o=String(e);for(let n=0;n<o.length;n++)if(o.charCodeAt(n)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${n} has a value of ${o.charCodeAt(n)} which is greater than 255.`);return o};L.converters.USVString=t9;L.converters.boolean=function(e){return!!e};L.converters.any=function(e){return e};L.converters["long long"]=function(e,t,r){return L.util.ConvertToInt(e,64,"signed",void 0,t,r)};L.converters["unsigned long long"]=function(e,t,r){return L.util.ConvertToInt(e,64,"unsigned",void 0,t,r)};L.converters["unsigned long"]=function(e,t,r){return L.util.ConvertToInt(e,32,"unsigned",void 0,t,r)};L.converters["unsigned short"]=function(e,t,r,o){return L.util.ConvertToInt(e,16,"unsigned",o,t,r)};L.converters.ArrayBuffer=function(e,t,r,o){if(L.util.Type(e)!==Yo||!Qs.isAnyArrayBuffer(e))throw L.errors.conversionFailed({prefix:t,argument:`${r} ("${L.util.Stringify(e)}")`,types:["ArrayBuffer"]});if(o?.allowShared===!1&&Qs.isSharedArrayBuffer(e))throw L.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.resizable||e.growable)throw L.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};L.converters.TypedArray=function(e,t,r,o,n){if(L.util.Type(e)!==Yo||!Qs.isTypedArray(e)||e.constructor.name!==t.name)throw L.errors.conversionFailed({prefix:r,argument:`${o} ("${L.util.Stringify(e)}")`,types:[t.name]});if(n?.allowShared===!1&&Qs.isSharedArrayBuffer(e.buffer))throw L.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.buffer.resizable||e.buffer.growable)throw L.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};L.converters.DataView=function(e,t,r,o){if(L.util.Type(e)!==Yo||!Qs.isDataView(e))throw L.errors.exception({header:t,message:`${r} is not a DataView.`});if(o?.allowShared===!1&&Qs.isSharedArrayBuffer(e.buffer))throw L.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(e.buffer.resizable||e.buffer.growable)throw L.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return e};L.converters["sequence<ByteString>"]=L.sequenceConverter(L.converters.ByteString);L.converters["sequence<sequence<ByteString>>"]=L.sequenceConverter(L.converters["sequence<ByteString>"]);L.converters["record<ByteString, ByteString>"]=L.recordConverter(L.converters.ByteString,L.converters.ByteString);L.converters.Blob=L.interfaceConverter(L.is.Blob,"Blob");L.converters.AbortSignal=L.interfaceConverter(L.is.AbortSignal,"AbortSignal");vk.exports={webidl:L}});var $t=w((pSe,$k)=>{"use strict";var{Transform:r9}=v("node:stream"),Pk=v("node:zlib"),{redirectStatusSet:o9,referrerPolicyTokens:n9,badPortsSet:i9}=QA(),{getGlobalOrigin:Lk}=LC(),{collectASequenceOfCodePoints:bs,collectAnHTTPQuotedString:s9,removeChars:a9,parseMIMEType:l9}=Sr(),{performance:c9}=v("node:perf_hooks"),{ReadableStreamFrom:A9,isValidHTTPToken:Uk,normalizedMethodRecordsBase:u9}=ue(),Ts=v("node:assert"),{isUint8Array:d9}=v("node:util/types"),{webidl:fi}=kt(),Ok=[],tp;try{tp=v("node:crypto");let e=["sha256","sha384","sha512"];Ok=tp.getHashes().filter(t=>e.includes(t))}catch{}function Mk(e){let t=e.urlList,r=t.length;return r===0?null:t[r-1].toString()}function f9(e,t){if(!o9.has(e.status))return null;let r=e.headersList.get("location",!0);return r!==null&&Gk(r)&&(_k(r)||(r=p9(r)),r=new URL(r,Mk(e))),r&&!r.hash&&(r.hash=t),r}function _k(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r>126||r<32)return!1}return!0}function p9(e){return Buffer.from(e,"binary").toString("utf8")}function Ss(e){return e.urlList[e.urlList.length-1]}function h9(e){let t=Ss(e);return Jk(t)&&i9.has(t.port)?"blocked":"allowed"}function g9(e){return e instanceof Error||e?.constructor?.name==="Error"||e?.constructor?.name==="DOMException"}function m9(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(!(r===9||r>=32&&r<=126||r>=128&&r<=255))return!1}return!0}var y9=Uk;function Gk(e){return(e[0]==="	"||e[0]===" "||e[e.length-1]==="	"||e[e.length-1]===" "||e.includes(`
`)||e.includes("\r")||e.includes("\0"))===!1}function E9(e){let t=(e.headersList.get("referrer-policy",!0)??"").split(","),r="";if(t.length)for(let o=t.length;o!==0;o--){let n=t[o-1].trim();if(n9.has(n)){r=n;break}}return r}function C9(e,t){let r=E9(t);r!==""&&(e.referrerPolicy=r)}function I9(){return"allowed"}function B9(){return"success"}function Q9(){return"success"}function b9(e){let t=null;t=e.mode,e.headersList.set("sec-fetch-mode",t,!0)}function w9(e){let t=e.origin;if(!(t==="client"||t===void 0)){if(e.responseTainting==="cors"||e.mode==="websocket")e.headersList.append("origin",t,!0);else if(e.method!=="GET"&&e.method!=="HEAD"){switch(e.referrerPolicy){case"no-referrer":t=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":e.origin&&qC(e.origin)&&!qC(Ss(e))&&(t=null);break;case"same-origin":wA(e,Ss(e))||(t=null);break;default:}e.headersList.append("origin",t,!0)}}}function nl(e,t){return e}function S9(e,t,r){return!e?.startTime||e.startTime<t?{domainLookupStartTime:t,domainLookupEndTime:t,connectionStartTime:t,connectionEndTime:t,secureConnectionStartTime:t,ALPNNegotiatedProtocol:e?.ALPNNegotiatedProtocol}:{domainLookupStartTime:nl(e.domainLookupStartTime,r),domainLookupEndTime:nl(e.domainLookupEndTime,r),connectionStartTime:nl(e.connectionStartTime,r),connectionEndTime:nl(e.connectionEndTime,r),secureConnectionStartTime:nl(e.secureConnectionStartTime,r),ALPNNegotiatedProtocol:e.ALPNNegotiatedProtocol}}function T9(e){return nl(c9.now(),e)}function x9(e){return{startTime:e.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:e.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}function jk(){return{referrerPolicy:"strict-origin-when-cross-origin"}}function R9(e){return{referrerPolicy:e.referrerPolicy}}function D9(e){let t=e.referrerPolicy;Ts(t);let r=null;if(e.referrer==="client"){let i=Lk();if(!i||i.origin==="null")return"no-referrer";r=new URL(i)}else fi.is.URL(e.referrer)&&(r=e.referrer);let o=VC(r),n=VC(r,!0);switch(o.toString().length>4096&&(o=n),t){case"no-referrer":return"no-referrer";case"origin":return n??VC(r,!0);case"unsafe-url":return o;case"strict-origin":{let i=Ss(e);return ws(o)&&!ws(i)?"no-referrer":n}case"strict-origin-when-cross-origin":{let i=Ss(e);return wA(o,i)?o:ws(o)&&!ws(i)?"no-referrer":n}case"same-origin":return wA(e,o)?o:"no-referrer";case"origin-when-cross-origin":return wA(e,o)?o:n;case"no-referrer-when-downgrade":{let i=Ss(e);return ws(o)&&!ws(i)?"no-referrer":n}}}function VC(e,t=!1){return Ts(fi.is.URL(e)),e=new URL(e),Wk(e)?"no-referrer":(e.username="",e.password="",e.hash="",t===!0&&(e.pathname="",e.search=""),e)}var F9=new RegExp("^(?:(?:127\\.)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){2}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[1-9]))$"),k9=new RegExp("^(?:(?:(?:0{1,4}):){7}(?:(?:0{0,3}1))|(?:(?:0{1,4}):){1,6}(?::(?:0{0,3}1))|(?:::(?:0{0,3}1))|)$");function Hk(e){return e.includes(":")?(e[0]==="["&&e[e.length-1]==="]"&&(e=e.slice(1,-1)),k9.test(e)):F9.test(e)}function N9(e){return e==null||e==="null"?!1:(e=new URL(e),!!(e.protocol==="https:"||e.protocol==="wss:"||Hk(e.hostname)||e.hostname==="localhost"||e.hostname==="localhost."||e.hostname.endsWith(".localhost")||e.hostname.endsWith(".localhost.")||e.protocol==="file:"))}function ws(e){return fi.is.URL(e)?e.href==="about:blank"||e.href==="about:srcdoc"||e.protocol==="data:"||e.protocol==="blob:"?!0:N9(e.origin):!1}function v9(e,t){if(tp===void 0)return!0;let r=Vk(t);if(r==="no metadata"||r.length===0)return!0;let o=L9(r),n=U9(r,o);for(let i of n){let s=i.algo,a=i.hash,l=tp.createHash(s).update(e).digest("base64");if(l[l.length-1]==="="&&(l[l.length-2]==="="?l=l.slice(0,-2):l=l.slice(0,-1)),O9(l,a))return!0}return!1}var P9=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function Vk(e){let t=[],r=!0;for(let o of e.split(" ")){r=!1;let n=P9.exec(o);if(n===null||n.groups===void 0||n.groups.algo===void 0)continue;let i=n.groups.algo.toLowerCase();Ok.includes(i)&&t.push(n.groups)}return r===!0?"no metadata":t}function L9(e){let t=e[0].algo;if(t[3]==="5")return t;for(let r=1;r<e.length;++r){let o=e[r];if(o.algo[3]==="5"){t="sha512";break}else{if(t[3]==="3")continue;o.algo[3]==="3"&&(t="sha384")}}return t}function U9(e,t){if(e.length===1)return e;let r=0;for(let o=0;o<e.length;++o)e[o].algo===t&&(e[r++]=e[o]);return e.length=r,e}function O9(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r]){if(e[r]==="+"&&t[r]==="-"||e[r]==="/"&&t[r]==="_")continue;return!1}return!0}function M9(e){}function wA(e,t){return e.origin===t.origin&&e.origin==="null"||e.protocol===t.protocol&&e.hostname===t.hostname&&e.port===t.port}function _9(){let e,t;return{promise:new Promise((o,n)=>{e=o,t=n}),resolve:e,reject:t}}function G9(e){return e.controller.state==="aborted"}function j9(e){return e.controller.state==="aborted"||e.controller.state==="terminated"}function H9(e){return u9[e.toLowerCase()]??e}function V9(e){let t=JSON.stringify(e);if(t===void 0)throw new TypeError("Value is not JSON serializable");return Ts(typeof t=="string"),t}var q9=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function qk(e,t,r=0,o=1){class n{#e;#t;#r;constructor(s,a){this.#e=s,this.#t=a,this.#r=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${e} Iterator.`);let s=this.#r,a=t(this.#e),l=a.length;if(s>=l)return{value:void 0,done:!0};let{[r]:c,[o]:A}=a[s];this.#r=s+1;let d;switch(this.#t){case"key":d=c;break;case"value":d=A;break;case"key+value":d=[c,A];break}return{value:d,done:!1}}}return delete n.prototype.constructor,Object.setPrototypeOf(n.prototype,q9),Object.defineProperties(n.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${e} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(i,s){return new n(i,s)}}function Y9(e,t,r,o=0,n=1){let i=qk(e,r,o,n),s={keys:{writable:!0,enumerable:!0,configurable:!0,value:function(){return fi.brandCheck(this,t),i(this,"key")}},values:{writable:!0,enumerable:!0,configurable:!0,value:function(){return fi.brandCheck(this,t),i(this,"value")}},entries:{writable:!0,enumerable:!0,configurable:!0,value:function(){return fi.brandCheck(this,t),i(this,"key+value")}},forEach:{writable:!0,enumerable:!0,configurable:!0,value:function(l,c=globalThis){if(fi.brandCheck(this,t),fi.argumentLengthCheck(arguments,1,`${e}.forEach`),typeof l!="function")throw new TypeError(`Failed to execute 'forEach' on '${e}': parameter 1 is not of type 'Function'.`);for(let{0:A,1:d}of i(this,"key+value"))l.call(c,d,A,this)}}};return Object.defineProperties(t.prototype,{...s,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:s.entries.value}})}function W9(e,t,r){let o=t,n=r,i;try{i=e.stream.getReader()}catch(s){n(s);return}Yk(i,o,n)}function J9(e){try{e.close(),e.byobRequest?.respond(0)}catch(t){if(!t.message.includes("Controller is already closed")&&!t.message.includes("ReadableStream is already closed"))throw t}}var z9=/[^\x00-\xFF]/;function ep(e){return Ts(!z9.test(e)),e}async function Yk(e,t,r){let o=[],n=0;try{do{let{done:i,value:s}=await e.read();if(i){t(Buffer.concat(o,n));return}if(!d9(s)){r(TypeError("Received non-Uint8Array chunk"));return}o.push(s),n+=s.length}while(!0)}catch(i){r(i)}}function Wk(e){Ts("protocol"in e);let t=e.protocol;return t==="about:"||t==="blob:"||t==="data:"}function qC(e){return typeof e=="string"&&e[5]===":"&&e[0]==="h"&&e[1]==="t"&&e[2]==="t"&&e[3]==="p"&&e[4]==="s"||e.protocol==="https:"}function Jk(e){Ts("protocol"in e);let t=e.protocol;return t==="http:"||t==="https:"}function $9(e,t){let r=e;if(!r.startsWith("bytes"))return"failure";let o={position:5};if(t&&bs(l=>l==="	"||l===" ",r,o),r.charCodeAt(o.position)!==61)return"failure";o.position++,t&&bs(l=>l==="	"||l===" ",r,o);let n=bs(l=>{let c=l.charCodeAt(0);return c>=48&&c<=57},r,o),i=n.length?Number(n):null;if(t&&bs(l=>l==="	"||l===" ",r,o),r.charCodeAt(o.position)!==45)return"failure";o.position++,t&&bs(l=>l==="	"||l===" ",r,o);let s=bs(l=>{let c=l.charCodeAt(0);return c>=48&&c<=57},r,o),a=s.length?Number(s):null;return o.position<r.length||a===null&&i===null||i>a?"failure":{rangeStartValue:i,rangeEndValue:a}}function K9(e,t,r){let o="bytes ";return o+=ep(`${e}`),o+="-",o+=ep(`${t}`),o+="/",o+=ep(`${r}`),o}var YC=class extends r9{#e;constructor(t){super(),this.#e=t}_transform(t,r,o){if(!this._inflateStream){if(t.length===0){o();return}this._inflateStream=(t[0]&15)===8?Pk.createInflate(this.#e):Pk.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",n=>this.destroy(n))}this._inflateStream.write(t,r,o)}_final(t){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),t()}};function Z9(e){return new YC(e)}function X9(e){let t=null,r=null,o=null,n=zk("content-type",e);if(n===null)return"failure";for(let i of n){let s=l9(i);s==="failure"||s.essence==="*/*"||(o=s,o.essence!==r?(t=null,o.parameters.has("charset")&&(t=o.parameters.get("charset")),r=o.essence):!o.parameters.has("charset")&&t!==null&&o.parameters.set("charset",t))}return o??"failure"}function eK(e){let t=e,r={position:0},o=[],n="";for(;r.position<t.length;){if(n+=bs(i=>i!=='"'&&i!==",",t,r),r.position<t.length)if(t.charCodeAt(r.position)===34){if(n+=s9(t,r),r.position<t.length)continue}else Ts(t.charCodeAt(r.position)===44),r.position++;n=a9(n,!0,!0,i=>i===9||i===32),o.push(n),n=""}return o}function zk(e,t){let r=t.get(e,!0);return r===null?null:eK(r)}var tK=new TextDecoder;function rK(e){return e.length===0?"":(e[0]===239&&e[1]===187&&e[2]===191&&(e=e.subarray(3)),tK.decode(e))}var WC=class{get baseUrl(){return Lk()}get origin(){return this.baseUrl?.origin}policyContainer=jk()},JC=class{settingsObject=new WC},oK=new JC;$k.exports={isAborted:G9,isCancelled:j9,isValidEncodedURL:_k,createDeferredPromise:_9,ReadableStreamFrom:A9,tryUpgradeRequestToAPotentiallyTrustworthyURL:M9,clampAndCoarsenConnectionTimingInfo:S9,coarsenedSharedCurrentTime:T9,determineRequestsReferrer:D9,makePolicyContainer:jk,clonePolicyContainer:R9,appendFetchMetadata:b9,appendRequestOriginHeader:w9,TAOCheck:Q9,corsCheck:B9,crossOriginResourcePolicyCheck:I9,createOpaqueTimingInfo:x9,setRequestReferrerPolicyOnRedirect:C9,isValidHTTPToken:Uk,requestBadPort:h9,requestCurrentURL:Ss,responseURL:Mk,responseLocationURL:f9,isURLPotentiallyTrustworthy:ws,isValidReasonPhrase:m9,sameOrigin:wA,normalizeMethod:H9,serializeJavascriptValueToJSONString:V9,iteratorMixin:Y9,createIterator:qk,isValidHeaderName:y9,isValidHeaderValue:Gk,isErrorLike:g9,fullyReadBody:W9,bytesMatch:v9,readableStreamClose:J9,isomorphicEncode:ep,urlIsLocal:Wk,urlHasHttpsScheme:qC,urlIsHttpHttpsScheme:Jk,readAllBytes:Yk,simpleRangeHeaderValue:$9,buildContentRange:K9,parseMetadata:Vk,createInflate:Z9,extractMimeType:X9,getDecodeSplit:zk,utf8DecodeBytes:rK,environmentSettingsObject:oK,isOriginIPPotentiallyTrustworthy:Hk}});var rp=w((hSe,Xk)=>{"use strict";var{iteratorMixin:nK}=$t(),{kEnumerableProperty:il}=ue(),{webidl:ve}=kt(),{File:iK}=v("node:buffer"),Kk=v("node:util"),Zk=globalThis.File??iK,vn=class e{#e=[];constructor(t){if(ve.util.markAsUncloneable(this),t!==void 0)throw ve.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]})}append(t,r,o=void 0){ve.brandCheck(this,e);let n="FormData.append";ve.argumentLengthCheck(arguments,2,n),t=ve.converters.USVString(t),arguments.length===3||ve.is.Blob(r)?(r=ve.converters.Blob(r,n,"value"),o!==void 0&&(o=ve.converters.USVString(o))):r=ve.converters.USVString(r);let i=zC(t,r,o);this.#e.push(i)}delete(t){ve.brandCheck(this,e),ve.argumentLengthCheck(arguments,1,"FormData.delete"),t=ve.converters.USVString(t),this.#e=this.#e.filter(o=>o.name!==t)}get(t){ve.brandCheck(this,e),ve.argumentLengthCheck(arguments,1,"FormData.get"),t=ve.converters.USVString(t);let o=this.#e.findIndex(n=>n.name===t);return o===-1?null:this.#e[o].value}getAll(t){return ve.brandCheck(this,e),ve.argumentLengthCheck(arguments,1,"FormData.getAll"),t=ve.converters.USVString(t),this.#e.filter(o=>o.name===t).map(o=>o.value)}has(t){return ve.brandCheck(this,e),ve.argumentLengthCheck(arguments,1,"FormData.has"),t=ve.converters.USVString(t),this.#e.findIndex(o=>o.name===t)!==-1}set(t,r,o=void 0){ve.brandCheck(this,e);let n="FormData.set";ve.argumentLengthCheck(arguments,2,n),t=ve.converters.USVString(t),arguments.length===3||ve.is.Blob(r)?(r=ve.converters.Blob(r,n,"value"),o!==void 0&&(o=ve.converters.USVString(o))):r=ve.converters.USVString(r);let i=zC(t,r,o),s=this.#e.findIndex(a=>a.name===t);s!==-1?this.#e=[...this.#e.slice(0,s),i,...this.#e.slice(s+1).filter(a=>a.name!==t)]:this.#e.push(i)}[Kk.inspect.custom](t,r){let o=this.#e.reduce((i,s)=>(i[s.name]?Array.isArray(i[s.name])?i[s.name].push(s.value):i[s.name]=[i[s.name],s.value]:i[s.name]=s.value,i),{__proto__:null});r.depth??=t,r.colors??=!0;let n=Kk.formatWithOptions(r,o);return`FormData ${n.slice(n.indexOf("]")+2)}`}static getFormDataState(t){return t.#e}static setFormDataState(t,r){t.#e=r}},{getFormDataState:sK,setFormDataState:aK}=vn;Reflect.deleteProperty(vn,"getFormDataState");Reflect.deleteProperty(vn,"setFormDataState");nK("FormData",vn,sK,"name","value");Object.defineProperties(vn.prototype,{append:il,delete:il,get:il,getAll:il,has:il,set:il,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function zC(e,t,r){if(typeof t!="string"){if(ve.is.File(t)||(t=new Zk([t],"blob",{type:t.type})),r!==void 0){let o={type:t.type,lastModified:t.lastModified};t=new Zk([t],r,o)}}return{name:e,value:t}}ve.is.FormData=ve.util.MakeTypeAssertion(vn);Xk.exports={FormData:vn,makeEntry:zC,setFormDataState:aK}});var nN=w((gSe,oN)=>{"use strict";var{isUSVString:eN,bufferToLowerCasedHeaderName:lK}=ue(),{utf8DecodeBytes:cK}=$t(),{HTTP_TOKEN_CODEPOINTS:AK,isomorphicDecode:tN}=Sr(),{makeEntry:uK}=rp(),{webidl:dK}=kt(),op=v("node:assert"),{File:fK}=v("node:buffer"),pK=globalThis.File??fK,hK=Buffer.from('form-data; name="'),gK=Buffer.from("filename"),mK=Buffer.from("--"),yK=Buffer.from(`--\r
`);function EK(e){for(let t=0;t<e.length;++t)if((e.charCodeAt(t)&-128)!==0)return!1;return!0}function CK(e){let t=e.length;if(t<27||t>70)return!1;for(let r=0;r<t;++r){let o=e.charCodeAt(r);if(!(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||o===39||o===45||o===95))return!1}return!0}function IK(e,t){op(t!=="failure"&&t.essence==="multipart/form-data");let r=t.parameters.get("boundary");if(r===void 0)throw Wr("missing boundary in content-type header");let o=Buffer.from(`--${r}`,"utf8"),n=[],i={position:0};for(;e[i.position]===13&&e[i.position+1]===10;)i.position+=2;let s=e.length;for(;e[s-1]===10&&e[s-2]===13;)s-=2;for(s!==e.length&&(e=e.subarray(0,s));;){if(e.subarray(i.position,i.position+o.length).equals(o))i.position+=o.length;else throw Wr("expected a value starting with -- and the boundary");if(i.position===e.length-2&&np(e,mK,i)||i.position===e.length-4&&np(e,yK,i))return n;if(e[i.position]!==13||e[i.position+1]!==10)throw Wr("expected CRLF");i.position+=2;let a=BK(e,i),{name:l,filename:c,contentType:A,encoding:d}=a;i.position+=2;let f;{let p=e.indexOf(o.subarray(2),i.position);if(p===-1)throw Wr("expected boundary after body");f=e.subarray(i.position,p-4),i.position+=f.length,d==="base64"&&(f=Buffer.from(f.toString(),"base64"))}if(e[i.position]!==13||e[i.position+1]!==10)throw Wr("expected CRLF");i.position+=2;let u;c!==null?(A??="text/plain",EK(A)||(A=""),u=new pK([f],c,{type:A})):u=cK(Buffer.from(f)),op(eN(l)),op(typeof u=="string"&&eN(u)||dK.is.File(u)),n.push(uK(l,u,c))}}function BK(e,t){let r=null,o=null,n=null,i=null;for(;;){if(e[t.position]===13&&e[t.position+1]===10){if(r===null)throw Wr("header name is null");return{name:r,filename:o,contentType:n,encoding:i}}let s=Pn(a=>a!==10&&a!==13&&a!==58,e,t);if(s=$C(s,!0,!0,a=>a===9||a===32),!AK.test(s.toString()))throw Wr("header name does not match the field-name token production");if(e[t.position]!==58)throw Wr("expected :");switch(t.position++,Pn(a=>a===32||a===9,e,t),lK(s)){case"content-disposition":{if(r=o=null,!np(e,hK,t))throw Wr('expected form-data; name=" for content-disposition header');if(t.position+=17,r=rN(e,t),e[t.position]===59&&e[t.position+1]===32){let a={position:t.position+2};if(np(e,gK,a))if(e[a.position+8]===42){a.position+=10,Pn(c=>c===32||c===9,e,a);let l=Pn(c=>c!==32&&c!==13&&c!==10,e,a);if(l[0]!==117&&l[0]!==85||l[1]!==116&&l[1]!==84||l[2]!==102&&l[2]!==70||l[3]!==45||l[4]!==56)throw Wr("unknown encoding, expected utf-8''");o=decodeURIComponent(new TextDecoder().decode(l.subarray(7))),t.position=a.position}else t.position+=11,Pn(l=>l===32||l===9,e,t),t.position++,o=rN(e,t)}break}case"content-type":{let a=Pn(l=>l!==10&&l!==13,e,t);a=$C(a,!1,!0,l=>l===9||l===32),n=tN(a);break}case"content-transfer-encoding":{let a=Pn(l=>l!==10&&l!==13,e,t);a=$C(a,!1,!0,l=>l===9||l===32),i=tN(a);break}default:Pn(a=>a!==10&&a!==13,e,t)}if(e[t.position]!==13&&e[t.position+1]!==10)throw Wr("expected CRLF");t.position+=2}}function rN(e,t){op(e[t.position-1]===34);let r=Pn(o=>o!==10&&o!==13&&o!==34,e,t);if(e[t.position]!==34)throw Wr('expected "');return t.position++,r=new TextDecoder().decode(r).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),r}function Pn(e,t,r){let o=r.position;for(;o<t.length&&e(t[o]);)++o;return t.subarray(r.position,r.position=o)}function $C(e,t,r,o){let n=0,i=e.length-1;if(t)for(;n<e.length&&o(e[n]);)n++;if(r)for(;i>0&&o(e[i]);)i--;return n===0&&i===e.length-1?e:e.subarray(n,i+1)}function np(e,t,r){if(e.length<t.length)return!1;for(let o=0;o<t.length;o++)if(t[o]!==e[r.position+o])return!1;return!0}function Wr(e){return new TypeError("Failed to parse body as FormData.",{cause:new TypeError(e)})}oN.exports={multipartFormDataParser:IK,validateBoundary:CK}});var al=w((mSe,uN)=>{"use strict";var sp=ue(),{ReadableStreamFrom:QK,readableStreamClose:bK,createDeferredPromise:wK,fullyReadBody:SK,extractMimeType:TK,utf8DecodeBytes:aN}=$t(),{FormData:iN,setFormDataState:xK}=rp(),{webidl:Ln}=kt(),{Blob:RK}=v("node:buffer"),KC=v("node:assert"),{isErrored:lN,isDisturbed:DK}=v("node:stream"),{isArrayBuffer:FK}=v("node:util/types"),{serializeAMimeType:kK}=Sr(),{multipartFormDataParser:NK}=nN(),ZC;try{let e=v("node:crypto");ZC=t=>e.randomInt(0,t)}catch{ZC=e=>Math.floor(Math.random()*e)}var ip=new TextEncoder;function vK(){}var XC=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,eI;XC&&(eI=new FinalizationRegistry(e=>{let t=e.deref();t&&!t.locked&&!DK(t)&&!lN(t)&&t.cancel("Response object has been garbage collected").catch(vK)}));function cN(e,t=!1){let r=null;Ln.is.ReadableStream(e)?r=e:Ln.is.Blob(e)?r=e.stream():r=new ReadableStream({async pull(l){let c=typeof n=="string"?ip.encode(n):n;c.byteLength&&l.enqueue(c),queueMicrotask(()=>bK(l))},start(){},type:"bytes"}),KC(Ln.is.ReadableStream(r));let o=null,n=null,i=null,s=null;if(typeof e=="string")n=e,s="text/plain;charset=UTF-8";else if(Ln.is.URLSearchParams(e))n=e.toString(),s="application/x-www-form-urlencoded;charset=UTF-8";else if(FK(e))n=new Uint8Array(e.slice());else if(ArrayBuffer.isView(e))n=new Uint8Array(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength));else if(Ln.is.FormData(e)){let l=`----formdata-undici-0${`${ZC(1e11)}`.padStart(11,"0")}`,c=`--${l}\r
Content-Disposition: form-data`;let A=g=>g.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),d=g=>g.replace(/\r?\n|\r/g,`\r
`),f=[],u=new Uint8Array([13,10]);i=0;let p=!1;for(let[g,m]of e)if(typeof m=="string"){let y=ip.encode(c+`; name="${A(d(g))}"\r
\r
${d(m)}\r
`);f.push(y),i+=y.byteLength}else{let y=ip.encode(`${c}; name="${A(d(g))}"`+(m.name?`; filename="${A(m.name)}"`:"")+`\r
Content-Type: ${m.type||"application/octet-stream"}\r
\r
`);f.push(y,m,u),typeof m.size=="number"?i+=y.byteLength+m.size+u.byteLength:p=!0}let h=ip.encode(`--${l}--\r
`);f.push(h),i+=h.byteLength,p&&(i=null),n=e,o=async function*(){for(let g of f)g.stream?yield*g.stream():yield g},s=`multipart/form-data; boundary=${l}`}else if(Ln.is.Blob(e))n=e,i=e.size,e.type&&(s=e.type);else if(typeof e[Symbol.asyncIterator]=="function"){if(t)throw new TypeError("keepalive");if(sp.isDisturbed(e)||e.locked)throw new TypeError("Response body object should not be disturbed or locked");r=Ln.is.ReadableStream(e)?e:QK(e)}if((typeof n=="string"||sp.isBuffer(n))&&(i=Buffer.byteLength(n)),o!=null){let l;r=new ReadableStream({async start(){l=o(e)[Symbol.asyncIterator]()},async pull(c){let{value:A,done:d}=await l.next();if(d)queueMicrotask(()=>{c.close(),c.byobRequest?.respond(0)});else if(!lN(r)){let f=new Uint8Array(A);f.byteLength&&c.enqueue(f)}return c.desiredSize>0},async cancel(c){await l.return()},type:"bytes"})}return[{stream:r,source:n,length:i},s]}function PK(e,t=!1){return Ln.is.ReadableStream(e)&&(KC(!sp.isDisturbed(e),"The body has already been consumed."),KC(!e.locked,"The stream is locked.")),cN(e,t)}function LK(e,t){let[r,o]=t.stream.tee();return XC&&eI.register(e,new WeakRef(r)),t.stream=r,{stream:o,length:t.length,source:t.source}}function UK(e){if(e.aborted)throw new DOMException("The operation was aborted.","AbortError")}function OK(e,t){return{blob(){return sl(this,o=>{let n=sN(t(this));return n===null?n="":n&&(n=kK(n)),new RK([o],{type:n})},e,t)},arrayBuffer(){return sl(this,o=>new Uint8Array(o).buffer,e,t)},text(){return sl(this,aN,e,t)},json(){return sl(this,_K,e,t)},formData(){return sl(this,o=>{let n=sN(t(this));if(n!==null)switch(n.essence){case"multipart/form-data":{let i=NK(o,n),s=new iN;return xK(s,i),s}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(o.toString()),s=new iN;for(let[a,l]of i)s.append(a,l);return s}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},e,t)},bytes(){return sl(this,o=>new Uint8Array(o),e,t)}}}function MK(e,t){Object.assign(e.prototype,OK(e,t))}async function sl(e,t,r,o){Ln.brandCheck(e,r);let n=o(e);if(AN(n))throw new TypeError("Body is unusable: Body has already been read");UK(n);let i=wK(),s=l=>i.reject(l),a=l=>{try{i.resolve(t(l))}catch(c){s(c)}};return n.body==null?(a(Buffer.allocUnsafe(0)),i.promise):(SK(n.body,a,s),i.promise)}function AN(e){let t=e.body;return t!=null&&(t.stream.locked||sp.isDisturbed(t.stream))}function _K(e){return JSON.parse(aN(e))}function sN(e){let t=e.headersList,r=TK(t);return r==="failure"?null:r}uN.exports={extractBody:cN,safelyExtractBody:PK,cloneBody:LK,mixinBody:MK,streamRegistry:eI,hasFinalizationRegistry:XC,bodyUnusable:AN}});var BN=w((ySe,IN)=>{"use strict";var ie=v("node:assert"),se=ue(),{channels:dN}=kn(),tI=JE(),{RequestContentLengthMismatchError:xs,ResponseContentLengthMismatchError:GK,RequestAbortedError:yN,HeadersTimeoutError:jK,HeadersOverflowError:HK,SocketError:xA,InformationalError:ll,BodyTimeoutError:VK,HTTPParserError:qK,ResponseExceededMaxSizeError:YK}=Ee(),{kUrl:EN,kReset:ir,kClient:cI,kParser:st,kBlocking:RA,kRunning:Mt,kPending:WK,kSize:fN,kWriting:hi,kQueue:go,kNoRef:SA,kKeepAliveDefaultTimeout:JK,kHostHeader:zK,kPendingIdx:$K,kRunningIdx:Jr,kError:zr,kPipelining:cp,kSocket:cl,kKeepAliveTimeoutValue:up,kMaxHeadersSize:KK,kKeepAliveMaxTimeout:ZK,kKeepAliveTimeoutThreshold:XK,kHeadersTimeout:e6,kBodyTimeout:t6,kStrictContentLength:nI,kMaxRequests:pN,kCounter:r6,kMaxResponseSize:o6,kOnError:n6,kResume:pi,kHTTPContext:CN,kClosed:iI}=Me(),Wo=fk(),i6=Buffer.alloc(0),ap=Buffer[Symbol.species],s6=se.removeAllListeners,rI;async function a6(){let e=process.env.JEST_WORKER_ID?NC():void 0,t;try{t=await WebAssembly.compile(gk())}catch{t=await WebAssembly.compile(e||NC())}return await WebAssembly.instantiate(t,{env:{wasm_on_url:(r,o,n)=>0,wasm_on_status:(r,o,n)=>{ie(Ct.ptr===r);let i=o-zo+Jo.byteOffset;return Ct.onStatus(new ap(Jo.buffer,i,n))},wasm_on_message_begin:r=>(ie(Ct.ptr===r),Ct.onMessageBegin()),wasm_on_header_field:(r,o,n)=>{ie(Ct.ptr===r);let i=o-zo+Jo.byteOffset;return Ct.onHeaderField(new ap(Jo.buffer,i,n))},wasm_on_header_value:(r,o,n)=>{ie(Ct.ptr===r);let i=o-zo+Jo.byteOffset;return Ct.onHeaderValue(new ap(Jo.buffer,i,n))},wasm_on_headers_complete:(r,o,n,i)=>(ie(Ct.ptr===r),Ct.onHeadersComplete(o,n===1,i===1)),wasm_on_body:(r,o,n)=>{ie(Ct.ptr===r);let i=o-zo+Jo.byteOffset;return Ct.onBody(new ap(Jo.buffer,i,n))},wasm_on_message_complete:r=>(ie(Ct.ptr===r),Ct.onMessageComplete())}})}var oI=null,sI=a6();sI.catch();var Ct=null,Jo=null,lp=0,zo=null,l6=0,TA=1,Al=2|TA,Ap=4|TA,aI=8|l6,lI=class{constructor(t,r,{exports:o}){this.llhttp=o,this.ptr=this.llhttp.llhttp_alloc(Wo.TYPE.RESPONSE),this.client=t,this.socket=r,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=0,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=t[KK],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=t[o6]}setTimeout(t,r){t!==this.timeoutValue||r&TA^this.timeoutType&TA?(this.timeout&&(tI.clearTimeout(this.timeout),this.timeout=null),t&&(r&TA?this.timeout=tI.setFastTimeout(hN,t,new WeakRef(this)):(this.timeout=setTimeout(hN,t,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=t):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=r}resume(){this.socket.destroyed||!this.paused||(ie(this.ptr!=null),ie(Ct===null),this.llhttp.llhttp_resume(this.ptr),ie(this.timeoutType===Ap),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||i6),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let t=this.socket.read();if(t===null)break;this.execute(t)}}execute(t){ie(Ct===null),ie(this.ptr!=null),ie(!this.paused);let{socket:r,llhttp:o}=this;t.length>lp&&(zo&&o.free(zo),lp=Math.ceil(t.length/4096)*4096,zo=o.malloc(lp)),new Uint8Array(o.memory.buffer,zo,lp).set(t);try{let n;try{Jo=t,Ct=this,n=o.llhttp_execute(this.ptr,zo,t.length)}catch(i){throw i}finally{Ct=null,Jo=null}if(n!==Wo.ERROR.OK){let i=t.subarray(o.llhttp_get_error_pos(this.ptr)-zo);if(n===Wo.ERROR.PAUSED_UPGRADE)this.onUpgrade(i);else if(n===Wo.ERROR.PAUSED)this.paused=!0,r.unshift(i);else{let s=o.llhttp_get_error_reason(this.ptr),a="";if(s){let l=new Uint8Array(o.memory.buffer,s).indexOf(0);a="Response does not match the HTTP/1.1 protocol ("+Buffer.from(o.memory.buffer,s,l).toString()+")"}throw new qK(a,Wo.ERROR[n],i)}}}catch(n){se.destroy(r,n)}}destroy(){ie(Ct===null),ie(this.ptr!=null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&tI.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(t){return this.statusText=t.toString(),0}onMessageBegin(){let{socket:t,client:r}=this;if(t.destroyed)return-1;let o=r[go][r[Jr]];return o?(o.onResponseStarted(),0):-1}onHeaderField(t){let r=this.headers.length;return(r&1)===0?this.headers.push(t):this.headers[r-1]=Buffer.concat([this.headers[r-1],t]),this.trackHeader(t.length),0}onHeaderValue(t){let r=this.headers.length;(r&1)===1?(this.headers.push(t),r+=1):this.headers[r-1]=Buffer.concat([this.headers[r-1],t]);let o=this.headers[r-2];if(o.length===10){let n=se.bufferToLowerCasedHeaderName(o);n==="keep-alive"?this.keepAlive+=t.toString():n==="connection"&&(this.connection+=t.toString())}else o.length===14&&se.bufferToLowerCasedHeaderName(o)==="content-length"&&(this.contentLength+=t.toString());return this.trackHeader(t.length),0}trackHeader(t){this.headersSize+=t,this.headersSize>=this.headersMaxSize&&se.destroy(this.socket,new HK)}onUpgrade(t){let{upgrade:r,client:o,socket:n,headers:i,statusCode:s}=this;ie(r),ie(o[cl]===n),ie(!n.destroyed),ie(!this.paused),ie((i.length&1)===0);let a=o[go][o[Jr]];ie(a),ie(a.upgrade||a.method==="CONNECT"),this.statusCode=0,this.statusText="",this.shouldKeepAlive=!1,this.headers=[],this.headersSize=0,n.unshift(t),n[st].destroy(),n[st]=null,n[cI]=null,n[zr]=null,s6(n),o[cl]=null,o[CN]=null,o[go][o[Jr]++]=null,o.emit("disconnect",o[EN],[o],new ll("upgrade"));try{a.onUpgrade(s,i,n)}catch(l){se.destroy(n,l)}o[pi]()}onHeadersComplete(t,r,o){let{client:n,socket:i,headers:s,statusText:a}=this;if(i.destroyed)return-1;let l=n[go][n[Jr]];if(!l)return-1;if(ie(!this.upgrade),ie(this.statusCode<200),t===100)return se.destroy(i,new xA("bad response",se.getSocketInfo(i))),-1;if(r&&!l.upgrade)return se.destroy(i,new xA("bad upgrade",se.getSocketInfo(i))),-1;if(ie(this.timeoutType===Al),this.statusCode=t,this.shouldKeepAlive=o||l.method==="HEAD"&&!i[ir]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let A=l.bodyTimeout!=null?l.bodyTimeout:n[t6];this.setTimeout(A,Ap)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(l.method==="CONNECT")return ie(n[Mt]===1),this.upgrade=!0,2;if(r)return ie(n[Mt]===1),this.upgrade=!0,2;if(ie((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&n[cp]){let A=this.keepAlive?se.parseKeepAliveTimeout(this.keepAlive):null;if(A!=null){let d=Math.min(A-n[XK],n[ZK]);d<=0?i[ir]=!0:n[up]=d}else n[up]=n[JK]}else i[ir]=!0;let c=l.onHeaders(t,s,this.resume,a)===!1;return l.aborted?-1:l.method==="HEAD"||t<200?1:(i[RA]&&(i[RA]=!1,n[pi]()),c?Wo.ERROR.PAUSED:0)}onBody(t){let{client:r,socket:o,statusCode:n,maxResponseSize:i}=this;if(o.destroyed)return-1;let s=r[go][r[Jr]];return ie(s),ie(this.timeoutType===Ap),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),ie(n>=200),i>-1&&this.bytesRead+t.length>i?(se.destroy(o,new YK),-1):(this.bytesRead+=t.length,s.onData(t)===!1?Wo.ERROR.PAUSED:0)}onMessageComplete(){let{client:t,socket:r,statusCode:o,upgrade:n,headers:i,contentLength:s,bytesRead:a,shouldKeepAlive:l}=this;if(r.destroyed&&(!o||l))return-1;if(n)return 0;ie(o>=100),ie((this.headers.length&1)===0);let c=t[go][t[Jr]];if(ie(c),this.statusCode=0,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,o<200)return 0;if(c.method!=="HEAD"&&s&&a!==parseInt(s,10))return se.destroy(r,new GK),-1;if(c.onComplete(i),t[go][t[Jr]++]=null,r[hi])return ie(t[Mt]===0),se.destroy(r,new ll("reset")),Wo.ERROR.PAUSED;if(l){if(r[ir]&&t[Mt]===0)return se.destroy(r,new ll("reset")),Wo.ERROR.PAUSED;t[cp]==null||t[cp]===1?setImmediate(()=>t[pi]()):t[pi]()}else return se.destroy(r,new ll("reset")),Wo.ERROR.PAUSED;return 0}};function hN(e){let{socket:t,timeoutType:r,client:o,paused:n}=e.deref();r===Al?(!t[hi]||t.writableNeedDrain||o[Mt]>1)&&(ie(!n,"cannot be paused while waiting for headers"),se.destroy(t,new jK)):r===Ap?n||se.destroy(t,new VK):r===aI&&(ie(o[Mt]===0&&o[up]),se.destroy(t,new ll("socket idle timeout")))}async function c6(e,t){if(e[cl]=t,!oI){let r=()=>{};t.on("error",r),oI=await sI,sI=null,t.off("error",r)}if(t.errored)throw t.errored;if(t.destroyed)throw new xA("destroyed");return t[SA]=!1,t[hi]=!1,t[ir]=!1,t[RA]=!1,t[st]=new lI(e,t,oI),se.addListener(t,"error",A6),se.addListener(t,"readable",u6),se.addListener(t,"end",d6),se.addListener(t,"close",f6),t[iI]=!1,t.on("close",p6),{version:"h1",defaultPipelining:1,write(r){return m6(e,r)},resume(){h6(e)},destroy(r,o){t[iI]?queueMicrotask(o):(t.on("close",o),t.destroy(r))},get destroyed(){return t.destroyed},busy(r){return!!(t[hi]||t[ir]||t[RA]||r&&(e[Mt]>0&&!r.idempotent||e[Mt]>0&&(r.upgrade||r.method==="CONNECT")||e[Mt]>0&&se.bodyLength(r.body)!==0&&(se.isStream(r.body)||se.isAsyncIterable(r.body)||se.isFormDataLike(r.body))))}}}function A6(e){ie(e.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let t=this[st];if(e.code==="ECONNRESET"&&t.statusCode&&!t.shouldKeepAlive){t.onMessageComplete();return}this[zr]=e,this[cI][n6](e)}function u6(){this[st]?.readMore()}function d6(){let e=this[st];if(e.statusCode&&!e.shouldKeepAlive){e.onMessageComplete();return}se.destroy(this,new xA("other side closed",se.getSocketInfo(this)))}function f6(){let e=this[st];e&&(!this[zr]&&e.statusCode&&!e.shouldKeepAlive&&e.onMessageComplete(),this[st].destroy(),this[st]=null);let t=this[zr]||new xA("closed",se.getSocketInfo(this)),r=this[cI];if(r[cl]=null,r[CN]=null,r.destroyed){ie(r[WK]===0);let o=r[go].splice(r[Jr]);for(let n=0;n<o.length;n++){let i=o[n];se.errorRequest(r,i,t)}}else if(r[Mt]>0&&t.code!=="UND_ERR_INFO"){let o=r[go][r[Jr]];r[go][r[Jr]++]=null,se.errorRequest(r,o,t)}r[$K]=r[Jr],ie(r[Mt]===0),r.emit("disconnect",r[EN],[r],t),r[pi]()}function p6(){this[iI]=!0}function h6(e){let t=e[cl];if(t&&!t.destroyed){if(e[fN]===0?!t[SA]&&t.unref&&(t.unref(),t[SA]=!0):t[SA]&&t.ref&&(t.ref(),t[SA]=!1),e[fN]===0)t[st].timeoutType!==aI&&t[st].setTimeout(e[up],aI);else if(e[Mt]>0&&t[st].statusCode<200&&t[st].timeoutType!==Al){let r=e[go][e[Jr]],o=r.headersTimeout!=null?r.headersTimeout:e[e6];t[st].setTimeout(o,Al)}}}function g6(e){return e!=="GET"&&e!=="HEAD"&&e!=="OPTIONS"&&e!=="TRACE"&&e!=="CONNECT"}function m6(e,t){let{method:r,path:o,host:n,upgrade:i,blocking:s,reset:a}=t,{body:l,headers:c,contentLength:A}=t,d=r==="PUT"||r==="POST"||r==="PATCH"||r==="QUERY"||r==="PROPFIND"||r==="PROPPATCH";if(se.isFormDataLike(l)){rI||(rI=al().extractBody);let[g,m]=rI(l);t.contentType==null&&c.push("content-type",m),l=g.stream,A=g.length}else se.isBlobLike(l)&&t.contentType==null&&l.type&&c.push("content-type",l.type);l&&typeof l.read=="function"&&l.read(0);let f=se.bodyLength(l);if(A=f??A,A===null&&(A=t.contentLength),A===0&&!d&&(A=null),g6(r)&&A>0&&t.contentLength!==null&&t.contentLength!==A){if(e[nI])return se.errorRequest(e,t,new xs),!1;process.emitWarning(new xs)}let u=e[cl],p=g=>{t.aborted||t.completed||(se.errorRequest(e,t,g||new yN),se.destroy(l),se.destroy(u,new ll("aborted")))};try{t.onConnect(p)}catch(g){se.errorRequest(e,t,g)}if(t.aborted)return!1;r==="HEAD"&&(u[ir]=!0),(i||r==="CONNECT")&&(u[ir]=!0),a!=null&&(u[ir]=a),e[pN]&&u[r6]++>=e[pN]&&(u[ir]=!0),s&&(u[RA]=!0);let h=`${r} ${o} HTTP/1.1\r
`;if(typeof n=="string"?h+=`host: ${n}\r
`:h+=e[zK],i?h+=`connection: upgrade\r
upgrade: ${i}\r
`:e[cp]&&!u[ir]?h+=`connection: keep-alive\r
`:h+=`connection: close\r
`,Array.isArray(c))for(let g=0;g<c.length;g+=2){let m=c[g+0],y=c[g+1];if(Array.isArray(y))for(let E=0;E<y.length;E++)h+=`${m}: ${y[E]}\r
`;else h+=`${m}: ${y}\r
`}return dN.sendHeaders.hasSubscribers&&dN.sendHeaders.publish({request:t,headers:h,socket:u}),!l||f===0?gN(p,null,e,t,u,A,h,d):se.isBuffer(l)?gN(p,l,e,t,u,A,h,d):se.isBlobLike(l)?typeof l.stream=="function"?mN(p,l.stream(),e,t,u,A,h,d):E6(p,l,e,t,u,A,h,d):se.isStream(l)?y6(p,l,e,t,u,A,h,d):se.isIterable(l)?mN(p,l,e,t,u,A,h,d):ie(!1),!0}function y6(e,t,r,o,n,i,s,a){ie(i!==0||r[Mt]===0,"stream body cannot be pipelined");let l=!1,c=new dp({abort:e,socket:n,request:o,contentLength:i,client:r,expectsPayload:a,header:s}),A=function(p){if(!l)try{!c.write(p)&&this.pause&&this.pause()}catch(h){se.destroy(this,h)}},d=function(){l||t.resume&&t.resume()},f=function(){if(queueMicrotask(()=>{t.removeListener("error",u)}),!l){let p=new yN;queueMicrotask(()=>u(p))}},u=function(p){if(!l){if(l=!0,ie(n.destroyed||n[hi]&&r[Mt]<=1),n.off("drain",d).off("error",u),t.removeListener("data",A).removeListener("end",u).removeListener("close",f),!p)try{c.end()}catch(h){p=h}c.destroy(p),p&&(p.code!=="UND_ERR_INFO"||p.message!=="reset")?se.destroy(t,p):se.destroy(t)}};t.on("data",A).on("end",u).on("error",u).on("close",f),t.resume&&t.resume(),n.on("drain",d).on("error",u),t.errorEmitted??t.errored?setImmediate(()=>u(t.errored)):(t.endEmitted??t.readableEnded)&&setImmediate(()=>u(null)),(t.closeEmitted??t.closed)&&setImmediate(f)}function gN(e,t,r,o,n,i,s,a){try{t?se.isBuffer(t)&&(ie(i===t.byteLength,"buffer body must have content length"),n.cork(),n.write(`${s}content-length: ${i}\r
\r
`,"latin1"),n.write(t),n.uncork(),o.onBodySent(t),!a&&o.reset!==!1&&(n[ir]=!0)):i===0?n.write(`${s}content-length: 0\r
\r
`,"latin1"):(ie(i===null,"no body must not have content length"),n.write(`${s}\r
`,"latin1")),o.onRequestSent(),r[pi]()}catch(l){e(l)}}async function E6(e,t,r,o,n,i,s,a){ie(i===t.size,"blob body must have content length");try{if(i!=null&&i!==t.size)throw new xs;let l=Buffer.from(await t.arrayBuffer());n.cork(),n.write(`${s}content-length: ${i}\r
\r
`,"latin1"),n.write(l),n.uncork(),o.onBodySent(l),o.onRequestSent(),!a&&o.reset!==!1&&(n[ir]=!0),r[pi]()}catch(l){e(l)}}async function mN(e,t,r,o,n,i,s,a){ie(i!==0||r[Mt]===0,"iterator body cannot be pipelined");let l=null;function c(){if(l){let f=l;l=null,f()}}let A=()=>new Promise((f,u)=>{ie(l===null),n[zr]?u(n[zr]):l=f});n.on("close",c).on("drain",c);let d=new dp({abort:e,socket:n,request:o,contentLength:i,client:r,expectsPayload:a,header:s});try{for await(let f of t){if(n[zr])throw n[zr];d.write(f)||await A()}d.end()}catch(f){d.destroy(f)}finally{n.off("close",c).off("drain",c)}}var dp=class{constructor({abort:t,socket:r,request:o,contentLength:n,client:i,expectsPayload:s,header:a}){this.socket=r,this.request=o,this.contentLength=n,this.client=i,this.bytesWritten=0,this.expectsPayload=s,this.header=a,this.abort=t,r[hi]=!0}write(t){let{socket:r,request:o,contentLength:n,client:i,bytesWritten:s,expectsPayload:a,header:l}=this;if(r[zr])throw r[zr];if(r.destroyed)return!1;let c=Buffer.byteLength(t);if(!c)return!0;if(n!==null&&s+c>n){if(i[nI])throw new xs;process.emitWarning(new xs)}r.cork(),s===0&&(!a&&o.reset!==!1&&(r[ir]=!0),n===null?r.write(`${l}transfer-encoding: chunked\r
`,"latin1"):r.write(`${l}content-length: ${n}\r
\r
`,"latin1")),n===null&&r.write(`\r
${c.toString(16)}\r
`,"latin1"),this.bytesWritten+=c;let A=r.write(t);return r.uncork(),o.onBodySent(t),A||r[st].timeout&&r[st].timeoutType===Al&&r[st].timeout.refresh&&r[st].timeout.refresh(),A}end(){let{socket:t,contentLength:r,client:o,bytesWritten:n,expectsPayload:i,header:s,request:a}=this;if(a.onRequestSent(),t[hi]=!1,t[zr])throw t[zr];if(!t.destroyed){if(n===0?i?t.write(`${s}content-length: 0\r
\r
`,"latin1"):t.write(`${s}\r
`,"latin1"):r===null&&t.write(`\r
0\r
\r
`,"latin1"),r!==null&&n!==r){if(o[nI])throw new xs;process.emitWarning(new xs)}t[st].timeout&&t[st].timeoutType===Al&&t[st].timeout.refresh&&t[st].timeout.refresh(),o[pi]()}}destroy(t){let{socket:r,client:o,abort:n}=this;r[hi]=!1,t&&(ie(o[Mt]<=1,"pipeline should only contain this request"),n(t))}};IN.exports=c6});var RN=w((ESe,xN)=>{"use strict";var Kr=v("node:assert"),{pipeline:C6}=v("node:stream"),Re=ue(),{RequestContentLengthMismatchError:AI,RequestAbortedError:I6,SocketError:FA,InformationalError:fp}=Ee(),{kUrl:DA,kReset:hp,kClient:Rs,kRunning:gp,kPending:B6,kQueue:gi,kPendingIdx:dI,kRunningIdx:mo,kError:yo,kSocket:ct,kStrictContentLength:Q6,kOnError:mp,kMaxConcurrentStreams:TN,kHTTP2Session:$o,kResume:Un,kSize:b6,kHTTPContext:fI,kClosed:uI,kBodyTimeout:w6}=Me(),{channels:QN}=kn(),$r=Symbol("open streams"),bN,pp;try{pp=v("node:http2")}catch{pp={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:S6,HTTP2_HEADER_METHOD:T6,HTTP2_HEADER_PATH:x6,HTTP2_HEADER_SCHEME:R6,HTTP2_HEADER_CONTENT_LENGTH:D6,HTTP2_HEADER_EXPECT:F6,HTTP2_HEADER_STATUS:k6}}=pp;function N6(e){let t=[];for(let[r,o]of Object.entries(e))if(Array.isArray(o))for(let n of o)t.push(Buffer.from(r),Buffer.from(n));else t.push(Buffer.from(r),Buffer.from(o));return t}async function v6(e,t){e[ct]=t;let r=pp.connect(e[DA],{createConnection:()=>t,peerMaxConcurrentStreams:e[TN],settings:{enablePush:!1}});return r[$r]=0,r[Rs]=e,r[ct]=t,r[$o]=null,Re.addListener(r,"error",L6),Re.addListener(r,"frameError",U6),Re.addListener(r,"end",O6),Re.addListener(r,"goaway",M6),Re.addListener(r,"close",_6),r.unref(),e[$o]=r,t[$o]=r,Re.addListener(t,"error",j6),Re.addListener(t,"end",H6),Re.addListener(t,"close",G6),t[uI]=!1,t.on("close",V6),{version:"h2",defaultPipelining:1/0,write(o){return Y6(e,o)},resume(){P6(e)},destroy(o,n){t[uI]?queueMicrotask(n):t.destroy(o).on("close",n)},get destroyed(){return t.destroyed},busy(){return!1}}}function P6(e){let t=e[ct];t?.destroyed===!1&&(e[b6]===0||e[TN]===0?(t.unref(),e[$o].unref()):(t.ref(),e[$o].ref()))}function L6(e){Kr(e.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[ct][yo]=e,this[Rs][mp](e)}function U6(e,t,r){if(r===0){let o=new fp(`HTTP/2: "frameError" received - type ${e}, code ${t}`);this[ct][yo]=o,this[Rs][mp](o)}}function O6(){let e=new FA("other side closed",Re.getSocketInfo(this[ct]));this.destroy(e),Re.destroy(this[ct],e)}function M6(e){let t=this[yo]||new FA(`HTTP/2: "GOAWAY" frame received with code ${e}`,Re.getSocketInfo(this[ct])),r=this[Rs];if(r[ct]=null,r[fI]=null,this.close(),this[$o]=null,Re.destroy(this[ct],t),r[mo]<r[gi].length){let o=r[gi][r[mo]];r[gi][r[mo]++]=null,Re.errorRequest(r,o,t),r[dI]=r[mo]}Kr(r[gp]===0),r.emit("disconnect",r[DA],[r],t),r.emit("connectionError",r[DA],[r],t),r[Un]()}function _6(){let{[Rs]:e}=this,{[ct]:t}=e,r=this[ct][yo]||this[yo]||new FA("closed",Re.getSocketInfo(t));if(e[ct]=null,e[fI]=null,e.destroyed){Kr(e[B6]===0);let o=e[gi].splice(e[mo]);for(let n=0;n<o.length;n++){let i=o[n];Re.errorRequest(e,i,r)}}}function G6(){let e=this[yo]||new FA("closed",Re.getSocketInfo(this)),t=this[$o][Rs];t[ct]=null,t[fI]=null,this[$o]!==null&&this[$o].destroy(e),t[dI]=t[mo],Kr(t[gp]===0),t.emit("disconnect",t[DA],[t],e),t[Un]()}function j6(e){Kr(e.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[yo]=e,this[Rs][mp](e)}function H6(){Re.destroy(this,new FA("other side closed",Re.getSocketInfo(this)))}function V6(){this[uI]=!0}function q6(e){return e!=="GET"&&e!=="HEAD"&&e!=="OPTIONS"&&e!=="TRACE"&&e!=="CONNECT"}function Y6(e,t){let r=t.bodyTimeout??e[w6],o=e[$o],{method:n,path:i,host:s,upgrade:a,expectContinue:l,signal:c,headers:A}=t,{body:d}=t;if(a)return Re.errorRequest(e,t,new Error("Upgrade not supported for H2")),!1;let f={};for(let C=0;C<A.length;C+=2){let B=A[C+0],R=A[C+1];if(Array.isArray(R))for(let x=0;x<R.length;x++)f[B]?f[B]+=`, ${R[x]}`:f[B]=R[x];else f[B]?f[B]+=`, ${R}`:f[B]=R}let u=null,{hostname:p,port:h}=e[DA];f[S6]=s||`${p}${h?`:${h}`:""}`,f[T6]=n;let g=C=>{t.aborted||t.completed||(C=C||new I6,Re.errorRequest(e,t,C),u!=null&&(u.removeAllListeners("data"),u.close(),e[mp](C),e[Un]()),Re.destroy(d,C))};try{t.onConnect(g)}catch(C){Re.errorRequest(e,t,C)}if(t.aborted)return!1;if(n==="CONNECT")return o.ref(),u=o.request(f,{endStream:!1,signal:c}),u.pending?u.once("ready",()=>{t.onUpgrade(null,null,u),++o[$r],e[gi][e[mo]++]=null}):(t.onUpgrade(null,null,u),++o[$r],e[gi][e[mo]++]=null),u.once("close",()=>{o[$r]-=1,o[$r]===0&&o.unref()}),u.setTimeout(r),!0;f[x6]=i,f[R6]="https";let m=n==="PUT"||n==="POST"||n==="PATCH";d&&typeof d.read=="function"&&d.read(0);let y=Re.bodyLength(d);if(Re.isFormDataLike(d)){bN??=al().extractBody;let[C,B]=bN(d);f["content-type"]=B,d=C.stream,y=C.length}if(y==null&&(y=t.contentLength),(y===0||!m)&&(y=null),q6(n)&&y>0&&t.contentLength!=null&&t.contentLength!==y){if(e[Q6])return Re.errorRequest(e,t,new AI),!1;process.emitWarning(new AI)}if(y!=null&&(Kr(d,"no body must not have content length"),f[D6]=`${y}`),o.ref(),QN.sendHeaders.hasSubscribers){let C="";for(let B in f)C+=`${B}: ${f[B]}\r
`;QN.sendHeaders.publish({request:t,headers:C,socket:o[ct]})}let E=n==="GET"||n==="HEAD"||d===null;return l?(f[F6]="100-continue",u=o.request(f,{endStream:E,signal:c}),u.once("continue",I)):(u=o.request(f,{endStream:E,signal:c}),I()),++o[$r],u.setTimeout(r),u.once("response",C=>{let{[k6]:B,...R}=C;if(t.onResponseStarted(),t.aborted){u.removeAllListeners("data");return}t.onHeaders(Number(B),N6(R),u.resume.bind(u),"")===!1&&u.pause()}),u.on("data",C=>{t.onData(C)===!1&&u.pause()}),u.once("end",C=>{u.removeAllListeners("data"),u.state?.state==null||u.state.state<6?(!t.aborted&&!t.completed&&t.onComplete({}),e[gi][e[mo]++]=null,e[Un]()):(--o[$r],o[$r]===0&&o.unref(),g(C??new fp("HTTP/2: stream half-closed (remote)")),e[gi][e[mo]++]=null,e[dI]=e[mo],e[Un]())}),u.once("close",()=>{u.removeAllListeners("data"),o[$r]-=1,o[$r]===0&&o.unref()}),u.once("error",function(C){u.removeAllListeners("data"),g(C)}),u.once("frameError",(C,B)=>{u.removeAllListeners("data"),g(new fp(`HTTP/2: "frameError" received - type ${C}, code ${B}`))}),u.on("aborted",()=>{u.removeAllListeners("data")}),u.on("timeout",()=>{let C=new fp(`HTTP/2: "stream timeout after ${r}"`);u.removeAllListeners("data"),o[$r]-=1,o[$r]===0&&o.unref(),g(C)}),u.once("trailers",C=>{t.aborted||t.completed||t.onComplete(C)}),!0;function I(){!d||y===0?wN(g,u,null,e,t,e[ct],y,m):Re.isBuffer(d)?wN(g,u,d,e,t,e[ct],y,m):Re.isBlobLike(d)?typeof d.stream=="function"?SN(g,u,d.stream(),e,t,e[ct],y,m):J6(g,u,d,e,t,e[ct],y,m):Re.isStream(d)?W6(g,e[ct],m,u,d,e,t,y):Re.isIterable(d)?SN(g,u,d,e,t,e[ct],y,m):Kr(!1)}}function wN(e,t,r,o,n,i,s,a){try{r!=null&&Re.isBuffer(r)&&(Kr(s===r.byteLength,"buffer body must have content length"),t.cork(),t.write(r),t.uncork(),t.end(),n.onBodySent(r)),a||(i[hp]=!0),n.onRequestSent(),o[Un]()}catch(l){e(l)}}function W6(e,t,r,o,n,i,s,a){Kr(a!==0||i[gp]===0,"stream body cannot be pipelined");let l=C6(n,o,A=>{A?(Re.destroy(l,A),e(A)):(Re.removeAllListeners(l),s.onRequestSent(),r||(t[hp]=!0),i[Un]())});Re.addListener(l,"data",c);function c(A){s.onBodySent(A)}}async function J6(e,t,r,o,n,i,s,a){Kr(s===r.size,"blob body must have content length");try{if(s!=null&&s!==r.size)throw new AI;let l=Buffer.from(await r.arrayBuffer());t.cork(),t.write(l),t.uncork(),t.end(),n.onBodySent(l),n.onRequestSent(),a||(i[hp]=!0),o[Un]()}catch(l){e(l)}}async function SN(e,t,r,o,n,i,s,a){Kr(s!==0||o[gp]===0,"iterator body cannot be pipelined");let l=null;function c(){if(l){let d=l;l=null,d()}}let A=()=>new Promise((d,f)=>{Kr(l===null),i[yo]?f(i[yo]):l=d});t.on("close",c).on("drain",c);try{for await(let d of r){if(i[yo])throw i[yo];let f=t.write(d);n.onBodySent(d),f||await A()}t.end(),n.onRequestSent(),a||(i[hp]=!0),o[Un]()}catch(d){e(d)}finally{t.off("close",c).off("drain",c)}}xN.exports=v6});var ks=w((CSe,UN)=>{"use strict";var On=v("node:assert"),NN=v("node:net"),kA=v("node:http"),Ds=ue(),{ClientStats:z6}=IC(),{channels:ul}=kn(),$6=tk(),K6=Bs(),{InvalidArgumentError:At,InformationalError:Z6,ClientDestroyedError:X6}=Ee(),eZ=BA(),{kUrl:Ko,kServerName:mi,kClient:tZ,kBusy:pI,kConnect:rZ,kResuming:Fs,kRunning:UA,kPending:OA,kSize:LA,kQueue:Eo,kConnected:oZ,kConnecting:dl,kNeedDrain:Ei,kKeepAliveDefaultTimeout:DN,kHostHeader:nZ,kPendingIdx:Co,kRunningIdx:Mn,kError:iZ,kPipelining:yp,kKeepAliveTimeoutValue:sZ,kMaxHeadersSize:aZ,kKeepAliveMaxTimeout:lZ,kKeepAliveTimeoutThreshold:cZ,kHeadersTimeout:AZ,kBodyTimeout:uZ,kStrictContentLength:dZ,kConnector:NA,kMaxRequests:hI,kCounter:fZ,kClose:pZ,kDestroy:hZ,kDispatch:gZ,kLocalAddress:vA,kMaxResponseSize:mZ,kOnError:yZ,kHTTPContext:ut,kMaxConcurrentStreams:EZ,kResume:PA}=Me(),CZ=BN(),IZ=RN(),yi=Symbol("kClosedResolve"),BZ=kA&&kA.maxHeaderSize&&Number.isInteger(kA.maxHeaderSize)&&kA.maxHeaderSize>0?()=>kA.maxHeaderSize:()=>{throw new At("http module not available or http.maxHeaderSize invalid")},FN=()=>{};function vN(e){return e[yp]??e[ut]?.defaultPipelining??1}var gI=class extends K6{constructor(t,{maxHeaderSize:r,headersTimeout:o,socketTimeout:n,requestTimeout:i,connectTimeout:s,bodyTimeout:a,idleTimeout:l,keepAlive:c,keepAliveTimeout:A,maxKeepAliveTimeout:d,keepAliveMaxTimeout:f,keepAliveTimeoutThreshold:u,socketPath:p,pipelining:h,tls:g,strictContentLength:m,maxCachedSessions:y,connect:E,maxRequestsPerClient:I,localAddress:C,maxResponseSize:B,autoSelectFamily:R,autoSelectFamilyAttemptTimeout:x,maxConcurrentStreams:S,allowH2:Q}={}){if(c!==void 0)throw new At("unsupported keepAlive, use pipelining=0 instead");if(n!==void 0)throw new At("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(i!==void 0)throw new At("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(l!==void 0)throw new At("unsupported idleTimeout, use keepAliveTimeout instead");if(d!==void 0)throw new At("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(r!=null){if(!Number.isInteger(r)||r<1)throw new At("invalid maxHeaderSize")}else r=BZ();if(p!=null&&typeof p!="string")throw new At("invalid socketPath");if(s!=null&&(!Number.isFinite(s)||s<0))throw new At("invalid connectTimeout");if(A!=null&&(!Number.isFinite(A)||A<=0))throw new At("invalid keepAliveTimeout");if(f!=null&&(!Number.isFinite(f)||f<=0))throw new At("invalid keepAliveMaxTimeout");if(u!=null&&!Number.isFinite(u))throw new At("invalid keepAliveTimeoutThreshold");if(o!=null&&(!Number.isInteger(o)||o<0))throw new At("headersTimeout must be a positive integer or zero");if(a!=null&&(!Number.isInteger(a)||a<0))throw new At("bodyTimeout must be a positive integer or zero");if(E!=null&&typeof E!="function"&&typeof E!="object")throw new At("connect must be a function or an object");if(I!=null&&(!Number.isInteger(I)||I<0))throw new At("maxRequestsPerClient must be a positive number");if(C!=null&&(typeof C!="string"||NN.isIP(C)===0))throw new At("localAddress must be valid string IP address");if(B!=null&&(!Number.isInteger(B)||B<-1))throw new At("maxResponseSize must be a positive number");if(x!=null&&(!Number.isInteger(x)||x<-1))throw new At("autoSelectFamilyAttemptTimeout must be a positive number");if(Q!=null&&typeof Q!="boolean")throw new At("allowH2 must be a valid boolean value");if(S!=null&&(typeof S!="number"||S<1))throw new At("maxConcurrentStreams must be a positive integer, greater than 0");super(),typeof E!="function"&&(E=eZ({...g,maxCachedSessions:y,allowH2:Q,socketPath:p,timeout:s,...typeof R=="boolean"?{autoSelectFamily:R,autoSelectFamilyAttemptTimeout:x}:void 0,...E})),this[Ko]=Ds.parseOrigin(t),this[NA]=E,this[yp]=h??1,this[aZ]=r,this[DN]=A??4e3,this[lZ]=f??6e5,this[cZ]=u??2e3,this[sZ]=this[DN],this[mi]=null,this[vA]=C??null,this[Fs]=0,this[Ei]=0,this[nZ]=`host: ${this[Ko].hostname}${this[Ko].port?`:${this[Ko].port}`:""}\r
`,this[uZ]=a??3e5,this[AZ]=o??3e5,this[dZ]=m??!0,this[hI]=I,this[yi]=null,this[mZ]=B>-1?B:-1,this[EZ]=S??100,this[ut]=null,this[Eo]=[],this[Mn]=0,this[Co]=0,this[PA]=T=>mI(this,T),this[yZ]=T=>PN(this,T)}get pipelining(){return this[yp]}set pipelining(t){this[yp]=t,this[PA](!0)}get stats(){return new z6(this)}get[OA](){return this[Eo].length-this[Co]}get[UA](){return this[Co]-this[Mn]}get[LA](){return this[Eo].length-this[Mn]}get[oZ](){return!!this[ut]&&!this[dl]&&!this[ut].destroyed}get[pI](){return!!(this[ut]?.busy(null)||this[LA]>=(vN(this)||1)||this[OA]>0)}[rZ](t){LN(this),this.once("connect",t)}[gZ](t,r){let o=t.origin||this[Ko].origin,n=new $6(o,t,r);return this[Eo].push(n),this[Fs]||(Ds.bodyLength(n.body)==null&&Ds.isIterable(n.body)?(this[Fs]=1,queueMicrotask(()=>mI(this))):this[PA](!0)),this[Fs]&&this[Ei]!==2&&this[pI]&&(this[Ei]=2),this[Ei]<2}async[pZ](){return new Promise(t=>{this[LA]?this[yi]=t:t(null)})}async[hZ](t){return new Promise(r=>{let o=this[Eo].splice(this[Co]);for(let i=0;i<o.length;i++){let s=o[i];Ds.errorRequest(this,s,t)}let n=()=>{this[yi]&&(this[yi](),this[yi]=null),r(null)};this[ut]?(this[ut].destroy(t,n),this[ut]=null):queueMicrotask(n),this[PA]()})}};function PN(e,t){if(e[UA]===0&&t.code!=="UND_ERR_INFO"&&t.code!=="UND_ERR_SOCKET"){On(e[Co]===e[Mn]);let r=e[Eo].splice(e[Mn]);for(let o=0;o<r.length;o++){let n=r[o];Ds.errorRequest(e,n,t)}On(e[LA]===0)}}async function LN(e){On(!e[dl]),On(!e[ut]);let{host:t,hostname:r,protocol:o,port:n}=e[Ko];if(r[0]==="["){let i=r.indexOf("]");On(i!==-1);let s=r.substring(1,i);On(NN.isIPv6(s)),r=s}e[dl]=!0,ul.beforeConnect.hasSubscribers&&ul.beforeConnect.publish({connectParams:{host:t,hostname:r,protocol:o,port:n,version:e[ut]?.version,servername:e[mi],localAddress:e[vA]},connector:e[NA]});try{let i=await new Promise((s,a)=>{e[NA]({host:t,hostname:r,protocol:o,port:n,servername:e[mi],localAddress:e[vA]},(l,c)=>{l?a(l):s(c)})});if(e.destroyed){Ds.destroy(i.on("error",FN),new X6);return}On(i);try{e[ut]=i.alpnProtocol==="h2"?await IZ(e,i):await CZ(e,i)}catch(s){throw i.destroy().on("error",FN),s}e[dl]=!1,i[fZ]=0,i[hI]=e[hI],i[tZ]=e,i[iZ]=null,ul.connected.hasSubscribers&&ul.connected.publish({connectParams:{host:t,hostname:r,protocol:o,port:n,version:e[ut]?.version,servername:e[mi],localAddress:e[vA]},connector:e[NA],socket:i}),e.emit("connect",e[Ko],[e])}catch(i){if(e.destroyed)return;if(e[dl]=!1,ul.connectError.hasSubscribers&&ul.connectError.publish({connectParams:{host:t,hostname:r,protocol:o,port:n,version:e[ut]?.version,servername:e[mi],localAddress:e[vA]},connector:e[NA],error:i}),i.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(On(e[UA]===0);e[OA]>0&&e[Eo][e[Co]].servername===e[mi];){let s=e[Eo][e[Co]++];Ds.errorRequest(e,s,i)}else PN(e,i);e.emit("connectionError",e[Ko],[e],i)}e[PA]()}function kN(e){e[Ei]=0,e.emit("drain",e[Ko],[e])}function mI(e,t){e[Fs]!==2&&(e[Fs]=2,QZ(e,t),e[Fs]=0,e[Mn]>256&&(e[Eo].splice(0,e[Mn]),e[Co]-=e[Mn],e[Mn]=0))}function QZ(e,t){for(;;){if(e.destroyed){On(e[OA]===0);return}if(e[yi]&&!e[LA]){e[yi](),e[yi]=null;return}if(e[ut]&&e[ut].resume(),e[pI])e[Ei]=2;else if(e[Ei]===2){t?(e[Ei]=1,queueMicrotask(()=>kN(e))):kN(e);continue}if(e[OA]===0||e[UA]>=(vN(e)||1))return;let r=e[Eo][e[Co]];if(e[Ko].protocol==="https:"&&e[mi]!==r.servername){if(e[UA]>0)return;e[mi]=r.servername,e[ut]?.destroy(new Z6("servername changed"),()=>{e[ut]=null,mI(e)})}if(e[dl])return;if(!e[ut]){LN(e);return}if(e[ut].destroyed||e[ut].busy(r))return;!r.aborted&&e[ut].write(r)?e[Co]++:e[Eo].splice(e[Co],1)}}UN.exports=gI});var yI=w((BSe,ON)=>{"use strict";var Ep=class{constructor(){this.bottom=0,this.top=0,this.list=new Array(2048).fill(void 0),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(t){this.list[this.top]=t,this.top=this.top+1&2047}shift(){let t=this.list[this.bottom];return t===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,t)}};ON.exports=class{constructor(){this.head=this.tail=new Ep}isEmpty(){return this.head.isEmpty()}push(t){this.head.isFull()&&(this.head=this.head.next=new Ep),this.head.push(t)}shift(){let t=this.tail,r=t.shift();return t.isEmpty()&&t.next!==null&&(this.tail=t.next,t.next=null),r}}});var bI=w((QSe,WN)=>{"use strict";var{PoolStats:bZ}=IC(),wZ=Bs(),SZ=yI(),{kConnected:EI,kSize:MN,kRunning:_N,kPending:GN,kQueued:MA,kBusy:TZ,kFree:xZ,kUrl:RZ,kClose:DZ,kDestroy:FZ,kDispatch:kZ}=Me(),sr=Symbol("clients"),Kt=Symbol("needDrain"),_A=Symbol("queue"),CI=Symbol("closed resolve"),II=Symbol("onDrain"),jN=Symbol("onConnect"),HN=Symbol("onDisconnect"),VN=Symbol("onConnectionError"),BI=Symbol("get dispatcher"),qN=Symbol("add client"),YN=Symbol("remove client"),QI=class extends wZ{constructor(){super(),this[_A]=new SZ,this[sr]=[],this[MA]=0;let t=this;this[II]=function(o,n){let i=t[_A],s=!1;for(;!s;){let a=i.shift();if(!a)break;t[MA]--,s=!this.dispatch(a.opts,a.handler)}this[Kt]=s,!this[Kt]&&t[Kt]&&(t[Kt]=!1,t.emit("drain",o,[t,...n])),t[CI]&&i.isEmpty()&&Promise.all(t[sr].map(a=>a.close())).then(t[CI])},this[jN]=(r,o)=>{t.emit("connect",r,[t,...o])},this[HN]=(r,o,n)=>{t.emit("disconnect",r,[t,...o],n)},this[VN]=(r,o,n)=>{t.emit("connectionError",r,[t,...o],n)}}get[TZ](){return this[Kt]}get[EI](){return this[sr].filter(t=>t[EI]).length}get[xZ](){return this[sr].filter(t=>t[EI]&&!t[Kt]).length}get[GN](){let t=this[MA];for(let{[GN]:r}of this[sr])t+=r;return t}get[_N](){let t=0;for(let{[_N]:r}of this[sr])t+=r;return t}get[MN](){let t=this[MA];for(let{[MN]:r}of this[sr])t+=r;return t}get stats(){return new bZ(this)}async[DZ](){this[_A].isEmpty()?await Promise.all(this[sr].map(t=>t.close())):await new Promise(t=>{this[CI]=t})}async[FZ](t){for(;;){let r=this[_A].shift();if(!r)break;r.handler.onError(t)}await Promise.all(this[sr].map(r=>r.destroy(t)))}[kZ](t,r){let o=this[BI]();return o?o.dispatch(t,r)||(o[Kt]=!0,this[Kt]=!this[BI]()):(this[Kt]=!0,this[_A].push({opts:t,handler:r}),this[MA]++),!this[Kt]}[qN](t){return t.on("drain",this[II]).on("connect",this[jN]).on("disconnect",this[HN]).on("connectionError",this[VN]),this[sr].push(t),this[Kt]&&queueMicrotask(()=>{this[Kt]&&this[II](t[RZ],[this,t])}),this}[YN](t){t.close(()=>{let r=this[sr].indexOf(t);r!==-1&&this[sr].splice(r,1)}),this[Kt]=this[sr].some(r=>!r[Kt]&&r.closed!==!0&&r.destroyed!==!0)}};WN.exports={PoolBase:QI,kClients:sr,kNeedDrain:Kt,kAddClient:qN,kRemoveClient:YN,kGetDispatcher:BI}});var fl=w((bSe,KN)=>{"use strict";var{PoolBase:NZ,kClients:Cp,kNeedDrain:vZ,kAddClient:PZ,kGetDispatcher:LZ,kRemoveClient:UZ}=bI(),OZ=ks(),{InvalidArgumentError:wI}=Ee(),JN=ue(),{kUrl:zN}=Me(),MZ=BA(),Ip=Symbol("options"),SI=Symbol("connections"),$N=Symbol("factory");function _Z(e,t){return new OZ(e,t)}var TI=class extends NZ{constructor(t,{connections:r,factory:o=_Z,connect:n,connectTimeout:i,tls:s,maxCachedSessions:a,socketPath:l,autoSelectFamily:c,autoSelectFamilyAttemptTimeout:A,allowH2:d,clientTtl:f,...u}={}){if(r!=null&&(!Number.isFinite(r)||r<0))throw new wI("invalid connections");if(typeof o!="function")throw new wI("factory must be a function.");if(n!=null&&typeof n!="function"&&typeof n!="object")throw new wI("connect must be a function or an object");super(),typeof n!="function"&&(n=MZ({...s,maxCachedSessions:a,allowH2:d,socketPath:l,timeout:i,...typeof c=="boolean"?{autoSelectFamily:c,autoSelectFamilyAttemptTimeout:A}:void 0,...n})),this[SI]=r||null,this[zN]=JN.parseOrigin(t),this[Ip]={...JN.deepClone(u),connect:n,allowH2:d,clientTtl:f},this[Ip].interceptors=u.interceptors?{...u.interceptors}:void 0,this[$N]=o,this.on("connect",(p,h)=>{if(f!=null&&f>0)for(let g of h)Object.assign(g,{ttl:Date.now()})}),this.on("connectionError",(p,h,g)=>{for(let m of h){let y=this[Cp].indexOf(m);y!==-1&&this[Cp].splice(y,1)}})}[LZ](){let t=this[Ip].clientTtl;for(let r of this[Cp])if(t!=null&&t>0&&r.ttl&&Date.now()-r.ttl>t)this[UZ](r);else if(!r[vZ])return r;if(!this[SI]||this[Cp].length<this[SI]){let r=this[$N](this[zN],this[Ip]);return this[PZ](r),r}}};KN.exports=TI});var rv=w((wSe,tv)=>{"use strict";var{BalancedPoolMissingUpstreamError:GZ,InvalidArgumentError:jZ}=Ee(),{PoolBase:HZ,kClients:_t,kNeedDrain:GA,kAddClient:VZ,kRemoveClient:qZ,kGetDispatcher:YZ}=bI(),WZ=fl(),{kUrl:xI}=Me(),{parseOrigin:ZN}=ue(),XN=Symbol("factory"),Bp=Symbol("options"),ev=Symbol("kGreatestCommonDivisor"),Ns=Symbol("kCurrentWeight"),vs=Symbol("kIndex"),Zr=Symbol("kWeight"),Qp=Symbol("kMaxWeightPerServer"),bp=Symbol("kErrorPenalty");function JZ(e,t){if(e===0)return t;for(;t!==0;){let r=t;t=e%t,e=r}return e}function zZ(e,t){return new WZ(e,t)}var RI=class extends HZ{constructor(t=[],{factory:r=zZ,...o}={}){if(typeof r!="function")throw new jZ("factory must be a function.");super(),this[Bp]=o,this[vs]=-1,this[Ns]=0,this[Qp]=this[Bp].maxWeightPerServer||100,this[bp]=this[Bp].errorPenalty||15,Array.isArray(t)||(t=[t]),this[XN]=r;for(let n of t)this.addUpstream(n);this._updateBalancedPoolStats()}addUpstream(t){let r=ZN(t).origin;if(this[_t].find(n=>n[xI].origin===r&&n.closed!==!0&&n.destroyed!==!0))return this;let o=this[XN](r,Object.assign({},this[Bp]));this[VZ](o),o.on("connect",()=>{o[Zr]=Math.min(this[Qp],o[Zr]+this[bp])}),o.on("connectionError",()=>{o[Zr]=Math.max(1,o[Zr]-this[bp]),this._updateBalancedPoolStats()}),o.on("disconnect",(...n)=>{let i=n[2];i&&i.code==="UND_ERR_SOCKET"&&(o[Zr]=Math.max(1,o[Zr]-this[bp]),this._updateBalancedPoolStats())});for(let n of this[_t])n[Zr]=this[Qp];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let t=0;for(let r=0;r<this[_t].length;r++)t=JZ(this[_t][r][Zr],t);this[ev]=t}removeUpstream(t){let r=ZN(t).origin,o=this[_t].find(n=>n[xI].origin===r&&n.closed!==!0&&n.destroyed!==!0);return o&&this[qZ](o),this}get upstreams(){return this[_t].filter(t=>t.closed!==!0&&t.destroyed!==!0).map(t=>t[xI].origin)}[YZ](){if(this[_t].length===0)throw new GZ;if(!this[_t].find(i=>!i[GA]&&i.closed!==!0&&i.destroyed!==!0)||this[_t].map(i=>i[GA]).reduce((i,s)=>i&&s,!0))return;let o=0,n=this[_t].findIndex(i=>!i[GA]);for(;o++<this[_t].length;){this[vs]=(this[vs]+1)%this[_t].length;let i=this[_t][this[vs]];if(i[Zr]>this[_t][n][Zr]&&!i[GA]&&(n=this[vs]),this[vs]===0&&(this[Ns]=this[Ns]-this[ev],this[Ns]<=0&&(this[Ns]=this[Qp])),i[Zr]>=this[Ns]&&!i[GA])return i}return this[Ns]=this[_t][n][Zr],this[vs]=n,this[_t][n]}};tv.exports=RI});var pl=w((SSe,Av)=>{"use strict";var{InvalidArgumentError:DI}=Ee(),{kClients:Xr,kRunning:ov,kClose:$Z,kDestroy:KZ,kDispatch:ZZ,kUrl:XZ}=Me(),eX=Bs(),tX=fl(),rX=ks(),oX=ue(),nv=Symbol("onConnect"),iv=Symbol("onDisconnect"),sv=Symbol("onConnectionError"),av=Symbol("onDrain"),lv=Symbol("factory"),cv=Symbol("options");function nX(e,t){return t&&t.connections===1?new rX(e,t):new tX(e,t)}var FI=class extends eX{constructor({factory:t=nX,connect:r,...o}={}){if(typeof t!="function")throw new DI("factory must be a function.");if(r!=null&&typeof r!="function"&&typeof r!="object")throw new DI("connect must be a function or an object");super(),r&&typeof r!="function"&&(r={...r}),this[cv]={...oX.deepClone(o),connect:r},this[lv]=t,this[Xr]=new Map,this[av]=(n,i)=>{this.emit("drain",n,[this,...i])},this[nv]=(n,i)=>{let s=this[Xr].get(n);s&&(s.count+=1),this.emit("connect",n,[this,...i])},this[iv]=(n,i,s)=>{let a=this[Xr].get(n);a&&(a.count-=1,a.count<=0&&(this[Xr].delete(n),a.dispatcher.destroy())),this.emit("disconnect",n,[this,...i],s)},this[sv]=(n,i,s)=>{this.emit("connectionError",n,[this,...i],s)}}get[ov](){let t=0;for(let{dispatcher:r}of this[Xr].values())t+=r[ov];return t}[ZZ](t,r){let o;if(t.origin&&(typeof t.origin=="string"||t.origin instanceof URL))o=String(t.origin);else throw new DI("opts.origin must be a non-empty string or URL.");let n=this[Xr].get(o),i=n&&n.dispatcher;return i||(i=this[lv](t.origin,this[cv]).on("drain",this[av]).on("connect",this[nv]).on("disconnect",this[iv]).on("connectionError",this[sv]),this[Xr].set(o,{count:0,dispatcher:i})),i.dispatch(t,r)}async[$Z](){let t=[];for(let{dispatcher:r}of this[Xr].values())t.push(r.close());this[Xr].clear(),await Promise.all(t)}async[KZ](t){let r=[];for(let{dispatcher:o}of this[Xr].values())r.push(o.destroy(t));this[Xr].clear(),await Promise.all(r)}get stats(){let t={};for(let{dispatcher:r}of this[Xr].values())r.stats&&(t[r[XZ].origin]=r.stats);return t}};Av.exports=FI});var LI=w((TSe,Cv)=>{"use strict";var{kProxy:uv,kClose:hv,kDestroy:gv,kDispatch:iX,kConnector:sX}=Me(),{URL:_n}=v("node:url"),aX=pl(),lX=fl(),mv=Bs(),{InvalidArgumentError:jA,RequestAbortedError:cX,SecureProxyConnectionError:AX}=Ee(),dv=BA(),yv=ks(),wp=Symbol("proxy agent"),Sp=Symbol("proxy client"),hl=Symbol("proxy headers"),kI=Symbol("request tls settings"),NI=Symbol("proxy tls settings"),fv=Symbol("connect endpoint function"),pv=Symbol("tunnel proxy");function Ev(e){return e==="https:"?443:80}function uX(e,t){return new lX(e,t)}var dX=()=>{},vI=class extends mv{#e=null;constructor(t,r){if(typeof t=="string"&&(t=new _n(t)),t.protocol!=="http:"&&t.protocol!=="https:")throw new jA("ProxyClient only supports http and https protocols");super(),this.#e=new yv(t,r)}async[hv](){await this.#e.close()}async[gv](){await this.#e.destroy()}async[iX](t,r){let{method:o,origin:n}=t;if(o==="CONNECT"){this.#e[sX]({origin:n,port:t.port||Ev(t.protocol),path:t.host,signal:t.signal,headers:{...this[hl],host:t.host},servername:this[NI]?.servername||t.servername},(i,s)=>{i?r.callback(i):r.callback(null,{socket:s,statusCode:200})});return}return typeof n=="string"&&(t.origin=new _n(n)),this.#e.dispatch(t,r)}},PI=class extends mv{constructor(t){if(!t||typeof t=="object"&&!(t instanceof _n)&&!t.uri)throw new jA("Proxy uri is mandatory");let{clientFactory:r=uX}=t;if(typeof r!="function")throw new jA("Proxy opts.clientFactory must be a function.");let{proxyTunnel:o=!0}=t;super();let n=this.#e(t),{href:i,origin:s,port:a,protocol:l,username:c,password:A,hostname:d}=n;if(this[uv]={uri:i,protocol:l},this[kI]=t.requestTls,this[NI]=t.proxyTls,this[hl]=t.headers||{},t.auth&&t.token)throw new jA("opts.auth cannot be used in combination with opts.token");t.auth?this[hl]["proxy-authorization"]=`Basic ${t.auth}`:t.token?this[hl]["proxy-authorization"]=t.token:c&&A&&(this[hl]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(c)}:${decodeURIComponent(A)}`).toString("base64")}`);let f=!o&&l==="http:"?(p,h)=>p.protocol==="http:"?new vI(p,h):new yv(p,h):void 0,u=dv({...t.proxyTls});this[fv]=dv({...t.requestTls}),this[Sp]=r(n,{connect:u,factory:f}),this[pv]=o,this[wp]=new aX({...t,connect:async(p,h)=>{let g=p.host;p.port||(g+=`:${Ev(p.protocol)}`);try{let{socket:m,statusCode:y}=await this[Sp].connect({origin:s,port:a,path:g,signal:p.signal,headers:{...this[hl],host:p.host},servername:this[NI]?.servername||d});if(y!==200&&(m.on("error",dX).destroy(),h(new cX(`Proxy response (${y}) !== 200 when HTTP Tunneling`))),p.protocol!=="https:"){h(null,m);return}let E;this[kI]?E=this[kI].servername:E=p.servername,this[fv]({...p,servername:E,httpSocket:m},h)}catch(m){m.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new AX(m)):h(m)}}})}dispatch(t,r){let o=fX(t.headers);if(pX(o),o&&!("host"in o)&&!("Host"in o)){let{host:n}=new _n(t.origin);o.host=n}return this.#t(new _n(t.origin))||(t.path=t.origin+t.path),this[wp].dispatch({...t,headers:o},r)}#e(t){return typeof t=="string"?new _n(t):t instanceof _n?t:new _n(t.uri)}async[hv](){await this[wp].close(),await this[Sp].close()}async[gv](){await this[wp].destroy(),await this[Sp].destroy()}#t(t){return typeof t=="string"&&(t=new _n(t)),!!(this[pv]||t.protocol!=="http:"||this[uv].protocol!=="http:")}};function fX(e){if(Array.isArray(e)){let t={};for(let r=0;r<e.length;r+=2)t[e[r]]=e[r+1];return t}return e}function pX(e){if(e&&Object.keys(e).find(r=>r.toLowerCase()==="proxy-authorization"))throw new jA("Proxy-Authorization should be sent in ProxyAgent constructor")}Cv.exports=PI});var wv=w((xSe,bv)=>{"use strict";var hX=Bs(),{kClose:gX,kDestroy:mX,kClosed:Iv,kDestroyed:Bv,kDispatch:yX,kNoProxyAgent:HA,kHttpProxyAgent:Ci,kHttpsProxyAgent:Ps}=Me(),Qv=LI(),EX=pl(),CX={"http:":80,"https:":443},UI=class extends hX{#e=null;#t=null;#r=null;constructor(t={}){super(),this.#r=t;let{httpProxy:r,httpsProxy:o,noProxy:n,...i}=t;this[HA]=new EX(i);let s=r??process.env.http_proxy??process.env.HTTP_PROXY;s?this[Ci]=new Qv({...i,uri:s}):this[Ci]=this[HA];let a=o??process.env.https_proxy??process.env.HTTPS_PROXY;a?this[Ps]=new Qv({...i,uri:a}):this[Ps]=this[Ci],this.#n()}[yX](t,r){let o=new URL(t.origin);return this.#o(o).dispatch(t,r)}async[gX](){await this[HA].close(),this[Ci][Iv]||await this[Ci].close(),this[Ps][Iv]||await this[Ps].close()}async[mX](t){await this[HA].destroy(t),this[Ci][Bv]||await this[Ci].destroy(t),this[Ps][Bv]||await this[Ps].destroy(t)}#o(t){let{protocol:r,host:o,port:n}=t;return o=o.replace(/:\d*$/,"").toLowerCase(),n=Number.parseInt(n,10)||CX[r]||0,this.#i(o,n)?r==="https:"?this[Ps]:this[Ci]:this[HA]}#i(t,r){if(this.#l&&this.#n(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let o=0;o<this.#t.length;o++){let n=this.#t[o];if(!(n.port&&n.port!==r)){if(/^[.*]/.test(n.hostname)){if(t.endsWith(n.hostname.replace(/^\*/,"")))return!1}else if(t===n.hostname)return!1}}return!0}#n(){let t=this.#r.noProxy??this.#s,r=t.split(/[,\s]/),o=[];for(let n=0;n<r.length;n++){let i=r[n];if(!i)continue;let s=i.match(/^(.+):(\d+)$/);o.push({hostname:(s?s[1]:i).toLowerCase(),port:s?Number.parseInt(s[2],10):0})}this.#e=t,this.#t=o}get#l(){return this.#r.noProxy!==void 0?!1:this.#e!==this.#s}get#s(){return process.env.no_proxy??process.env.NO_PROXY??""}};bv.exports=UI});var Tp=w((RSe,Rv)=>{"use strict";var gl=v("node:assert"),{kRetryHandlerDefaultRetry:Sv}=Me(),{RequestRetryError:VA}=Ee(),IX=Yf(),{isDisturbed:Tv,parseRangeHeader:xv,wrapRequestBody:BX}=ue();function QX(e){let t=new Date(e).getTime();return isNaN(t)?0:t-Date.now()}var OI=class e{constructor(t,{dispatch:r,handler:o}){let{retryOptions:n,...i}=t,{retry:s,maxRetries:a,maxTimeout:l,minTimeout:c,timeoutFactor:A,methods:d,errorCodes:f,retryAfter:u,statusCodes:p}=n??{};this.dispatch=r,this.handler=IX.wrap(o),this.opts={...i,body:BX(t.body)},this.retryOpts={retry:s??e[Sv],retryAfter:u??!0,maxTimeout:l??30*1e3,minTimeout:c??500,timeoutFactor:A??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:p??[500,502,503,504,429],errorCodes:f??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.headersSent=!1,this.start=0,this.end=null,this.etag=null}onRequestStart(t,r){this.headersSent||this.handler.onRequestStart?.(t,r)}onRequestUpgrade(t,r,o,n){this.handler.onRequestUpgrade?.(t,r,o,n)}static[Sv](t,{state:r,opts:o},n){let{statusCode:i,code:s,headers:a}=t,{method:l,retryOptions:c}=o,{maxRetries:A,minTimeout:d,maxTimeout:f,timeoutFactor:u,statusCodes:p,errorCodes:h,methods:g}=c,{counter:m}=r;if(s&&s!=="UND_ERR_REQ_RETRY"&&!h.includes(s)){n(t);return}if(Array.isArray(g)&&!g.includes(l)){n(t);return}if(i!=null&&Array.isArray(p)&&!p.includes(i)){n(t);return}if(m>A){n(t);return}let y=a?.["retry-after"];y&&(y=Number(y),y=Number.isNaN(y)?QX(a["retry-after"]):y*1e3);let E=y>0?Math.min(y,f):Math.min(d*u**(m-1),f);setTimeout(()=>n(null),E)}onResponseStart(t,r,o,n){if(this.retryCount+=1,r>=300)if(this.retryOpts.statusCodes.includes(r)===!1){this.headersSent=!0,this.handler.onResponseStart?.(t,r,o,n);return}else throw new VA("Request failed",r,{headers:o,data:{count:this.retryCount}});if(this.headersSent){if(r!==206&&(this.start>0||r!==200))throw new VA("server does not support the range header and the payload was partially consumed",r,{headers:o,data:{count:this.retryCount}});let i=xv(o["content-range"]);if(!i)throw new VA("Content-Range mismatch",r,{headers:o,data:{count:this.retryCount}});if(this.etag!=null&&this.etag!==o.etag)throw new VA("ETag mismatch",r,{headers:o,data:{count:this.retryCount}});let{start:s,size:a,end:l=a?a-1:null}=i;gl(this.start===s,"content-range mismatch"),gl(this.end==null||this.end===l,"content-range mismatch");return}if(this.end==null){if(r===206){let i=xv(o["content-range"]);if(i==null){this.headersSent=!0,this.handler.onResponseStart?.(t,r,o,n);return}let{start:s,size:a,end:l=a?a-1:null}=i;gl(s!=null&&Number.isFinite(s),"content-range mismatch"),gl(l!=null&&Number.isFinite(l),"invalid content-length"),this.start=s,this.end=l}if(this.end==null){let i=o["content-length"];this.end=i!=null?Number(i)-1:null}gl(Number.isFinite(this.start)),gl(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=!0,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag[0]==="W"&&this.etag[1]==="/"&&(this.etag=null),this.headersSent=!0,this.handler.onResponseStart?.(t,r,o,n)}else throw new VA("Request failed",r,{headers:o,data:{count:this.retryCount}})}onResponseData(t,r){this.start+=r.length,this.handler.onResponseData?.(t,r)}onResponseEnd(t,r){return this.retryCount=0,this.handler.onResponseEnd?.(t,r)}onResponseError(t,r){if(t?.aborted||Tv(this.opts.body)){this.handler.onResponseError?.(t,r);return}this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(r,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},o.bind(this));function o(n){if(n!=null||t?.aborted||Tv(this.opts.body))return this.handler.onResponseError?.(t,n);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onResponseError?.(t,i)}}}};Rv.exports=OI});var Fv=w((DSe,Dv)=>{"use strict";var bX=CA(),wX=Tp(),MI=class extends bX{#e=null;#t=null;constructor(t,r={}){super(r),this.#e=t,this.#t=r}dispatch(t,r){let o=new wX({...t,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:r});return this.#e.dispatch(t,o)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};Dv.exports=MI});var vv=w((FSe,Nv)=>{"use strict";var{connect:SX}=v("node:net"),{kClose:TX,kDestroy:xX}=Me(),{InvalidArgumentError:kv}=Ee(),RX=ue(),DX=ks(),FX=Bs(),_I=class extends FX{#e=null;constructor(t,r){if(super(),typeof t=="string"&&(t=new URL(t)),t.protocol!=="http:")throw new kv("h2c-client: Only h2c protocol is supported");let{connect:o,maxConcurrentStreams:n,pipelining:i,...s}=r??{},a=100,l=100;if(n!=null&&Number.isInteger(n)&&n>0&&(a=n),i!=null&&Number.isInteger(i)&&i>0&&(l=i),l>a)throw new kv("h2c-client: pipelining cannot be greater than maxConcurrentStreams");this.#e=new DX(t,{...s,connect:this.#t(o),maxConcurrentStreams:a,pipelining:l,allowH2:!0})}#t(t){return(r,o)=>{let n=t?.connectOpts??1e4,{hostname:i,port:s,pathname:a}=r,l=SX({...r,host:i,port:s,pathname:a});if(r.keepAlive==null||r.keepAlive){let A=r.keepAliveInitialDelay==null?6e4:r.keepAliveInitialDelay;l.setKeepAlive(!0,A)}l.alpnProtocol="h2";let c=RX.setupConnectTimeout(new WeakRef(l),{timeout:n,hostname:i,port:s});return l.setNoDelay(!0).once("connect",function(){if(queueMicrotask(c),o){let A=o;o=null,A(null,this)}}).on("error",function(A){if(queueMicrotask(c),o){let d=o;o=null,d(A)}}),l}}dispatch(t,r){return this.#e.dispatch(t,r)}async[TX](){await this.#e.close()}async[xX](){await this.#e.destroy()}};Nv.exports=_I});var Hv=w((kSe,jv)=>{"use strict";var Ov=v("node:assert"),{Readable:kX}=v("node:stream"),{RequestAbortedError:Mv,NotSupportedError:NX,InvalidArgumentError:vX,AbortError:GI}=Ee(),_v=ue(),{ReadableStreamFrom:PX}=ue(),Tr=Symbol("kConsume"),xp=Symbol("kReading"),Ls=Symbol("kBody"),Pv=Symbol("kAbort"),Gv=Symbol("kContentType"),jI=Symbol("kContentLength"),HI=Symbol("kUsed"),Rp=Symbol("kBytesRead"),LX=()=>{},VI=class extends kX{constructor({resume:t,abort:r,contentType:o="",contentLength:n,highWaterMark:i=64*1024}){super({autoDestroy:!0,read:t,highWaterMark:i}),this._readableState.dataEmitted=!1,this[Pv]=r,this[Tr]=null,this[Rp]=0,this[Ls]=null,this[HI]=!1,this[Gv]=o,this[jI]=Number.isFinite(n)?n:null,this[xp]=!1}_destroy(t,r){!t&&!this._readableState.endEmitted&&(t=new Mv),t&&this[Pv](),this[HI]?r(t):setImmediate(()=>{r(t)})}on(t,r){return(t==="data"||t==="readable")&&(this[xp]=!0,this[HI]=!0),super.on(t,r)}addListener(t,r){return this.on(t,r)}off(t,r){let o=super.off(t,r);return(t==="data"||t==="readable")&&(this[xp]=this.listenerCount("data")>0||this.listenerCount("readable")>0),o}removeListener(t,r){return this.off(t,r)}push(t){return this[Rp]+=t?t.length:0,this[Tr]&&t!==null?(YI(this[Tr],t),this[xp]?super.push(t):!0):super.push(t)}text(){return qA(this,"text")}json(){return qA(this,"json")}blob(){return qA(this,"blob")}bytes(){return qA(this,"bytes")}arrayBuffer(){return qA(this,"arrayBuffer")}async formData(){throw new NX}get bodyUsed(){return _v.isDisturbed(this)}get body(){return this[Ls]||(this[Ls]=PX(this),this[Tr]&&(this[Ls].getReader(),Ov(this[Ls].locked))),this[Ls]}async dump(t){let r=t?.signal;if(r!=null&&(typeof r!="object"||!("aborted"in r)))throw new vX("signal must be an AbortSignal");let o=t?.limit&&Number.isFinite(t.limit)?t.limit:128*1024;return r?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((n,i)=>{if((this[jI]&&this[jI]>o||this[Rp]>o)&&this.destroy(new GI),r){let s=()=>{this.destroy(r.reason??new GI)};r.addEventListener("abort",s),this.on("close",function(){r.removeEventListener("abort",s),r.aborted?i(r.reason??new GI):n(null)})}else this.on("close",n);this.on("error",LX).on("data",()=>{this[Rp]>o&&this.destroy()}).resume()})}setEncoding(t){return Buffer.isEncoding(t)&&(this._readableState.encoding=t),this}};function UX(e){return e[Ls]?.locked===!0||e[Tr]!==null}function OX(e){return _v.isDisturbed(e)||UX(e)}function qA(e,t){return Ov(!e[Tr]),new Promise((r,o)=>{if(OX(e)){let n=e._readableState;n.destroyed&&n.closeEmitted===!1?e.on("error",i=>{o(i)}).on("close",()=>{o(new TypeError("unusable"))}):o(n.errored??new TypeError("unusable"))}else queueMicrotask(()=>{e[Tr]={type:t,stream:e,resolve:r,reject:o,length:0,body:[]},e.on("error",function(n){WI(this[Tr],n)}).on("close",function(){this[Tr].body!==null&&WI(this[Tr],new Mv)}),MX(e[Tr])})})}function MX(e){if(e.body===null)return;let{_readableState:t}=e.stream;if(t.bufferIndex){let r=t.bufferIndex,o=t.buffer.length;for(let n=r;n<o;n++)YI(e,t.buffer[n])}else for(let r of t.buffer)YI(e,r);for(t.endEmitted?Uv(this[Tr],this._readableState.encoding):e.stream.on("end",function(){Uv(this[Tr],this._readableState.encoding)}),e.stream.resume();e.stream.read()!=null;);}function qI(e,t,r){if(e.length===0||t===0)return"";let o=e.length===1?e[0]:Buffer.concat(e,t),n=o.length,i=n>2&&o[0]===239&&o[1]===187&&o[2]===191?3:0;return!r||r==="utf8"||r==="utf-8"?o.utf8Slice(i,n):o.subarray(i,n).toString(r)}function Lv(e,t){if(e.length===0||t===0)return new Uint8Array(0);if(e.length===1)return new Uint8Array(e[0]);let r=new Uint8Array(Buffer.allocUnsafeSlow(t).buffer),o=0;for(let n=0;n<e.length;++n){let i=e[n];r.set(i,o),o+=i.length}return r}function Uv(e,t){let{type:r,body:o,resolve:n,stream:i,length:s}=e;try{r==="text"?n(qI(o,s,t)):r==="json"?n(JSON.parse(qI(o,s,t))):r==="arrayBuffer"?n(Lv(o,s).buffer):r==="blob"?n(new Blob(o,{type:i[Gv]})):r==="bytes"&&n(Lv(o,s)),WI(e)}catch(a){i.destroy(a)}}function YI(e,t){e.length+=t.length,e.body.push(t)}function WI(e,t){e.body!==null&&(t?e.reject(t):e.resolve(),e.type=null,e.stream=null,e.resolve=null,e.reject=null,e.length=0,e.body=null)}jv.exports={Readable:VI,chunksDecode:qI}});var Yv=w((NSe,JI)=>{"use strict";var _X=v("node:assert"),{AsyncResource:GX}=v("node:async_hooks"),{Readable:jX}=Hv(),{InvalidArgumentError:ml,RequestAbortedError:Vv}=Ee(),Io=ue();function Dp(){}var Fp=class extends GX{constructor(t,r){if(!t||typeof t!="object")throw new ml("invalid opts");let{signal:o,method:n,opaque:i,body:s,onInfo:a,responseHeaders:l,highWaterMark:c}=t;try{if(typeof r!="function")throw new ml("invalid callback");if(c&&(typeof c!="number"||c<0))throw new ml("invalid highWaterMark");if(o&&typeof o.on!="function"&&typeof o.addEventListener!="function")throw new ml("signal must be an EventEmitter or EventTarget");if(n==="CONNECT")throw new ml("invalid method");if(a&&typeof a!="function")throw new ml("invalid onInfo callback");super("UNDICI_REQUEST")}catch(A){throw Io.isStream(s)&&Io.destroy(s.on("error",Dp),A),A}this.method=n,this.responseHeaders=l||null,this.opaque=i||null,this.callback=r,this.res=null,this.abort=null,this.body=s,this.trailers={},this.context=null,this.onInfo=a||null,this.highWaterMark=c,this.reason=null,this.removeAbortListener=null,o?.aborted?this.reason=o.reason??new Vv:o&&(this.removeAbortListener=Io.addAbortListener(o,()=>{this.reason=o.reason??new Vv,this.res?Io.destroy(this.res.on("error",Dp),this.reason):this.abort&&this.abort(this.reason)}))}onConnect(t,r){if(this.reason){t(this.reason);return}_X(this.callback),this.abort=t,this.context=r}onHeaders(t,r,o,n){let{callback:i,opaque:s,abort:a,context:l,responseHeaders:c,highWaterMark:A}=this,d=c==="raw"?Io.parseRawHeaders(r):Io.parseHeaders(r);if(t<200){this.onInfo&&this.onInfo({statusCode:t,headers:d});return}let f=c==="raw"?Io.parseHeaders(r):d,u=f["content-type"],p=f["content-length"],h=new jX({resume:o,abort:a,contentType:u,contentLength:this.method!=="HEAD"&&p?Number(p):null,highWaterMark:A});this.removeAbortListener&&(h.on("close",this.removeAbortListener),this.removeAbortListener=null),this.callback=null,this.res=h,i!==null&&this.runInAsyncScope(i,null,null,{statusCode:t,headers:d,trailers:this.trailers,opaque:s,body:h,context:l})}onData(t){return this.res.push(t)}onComplete(t){Io.parseHeaders(t,this.trailers),this.res.push(null)}onError(t){let{res:r,callback:o,body:n,opaque:i}=this;o&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(o,null,t,{opaque:i})})),r&&(this.res=null,queueMicrotask(()=>{Io.destroy(r.on("error",Dp),t)})),n&&(this.body=null,Io.isStream(n)&&(n.on("error",Dp),Io.destroy(n,t))),this.removeAbortListener&&(this.removeAbortListener(),this.removeAbortListener=null)}};function qv(e,t){if(t===void 0)return new Promise((r,o)=>{qv.call(this,e,(n,i)=>n?o(n):r(i))});try{let r=new Fp(e,t);this.dispatch(e,r)}catch(r){if(typeof t!="function")throw r;let o=e?.opaque;queueMicrotask(()=>t(r,{opaque:o}))}}JI.exports=qv;JI.exports.RequestHandler=Fp});var YA=w((vSe,zv)=>{"use strict";var{addAbortListener:HX}=ue(),{RequestAbortedError:VX}=Ee(),yl=Symbol("kListener"),Zo=Symbol("kSignal");function Wv(e){e.abort?e.abort(e[Zo]?.reason):e.reason=e[Zo]?.reason??new VX,Jv(e)}function qX(e,t){if(e.reason=null,e[Zo]=null,e[yl]=null,!!t){if(t.aborted){Wv(e);return}e[Zo]=t,e[yl]=()=>{Wv(e)},HX(e[Zo],e[yl])}}function Jv(e){e[Zo]&&("removeEventListener"in e[Zo]?e[Zo].removeEventListener("abort",e[yl]):e[Zo].removeListener("abort",e[yl]),e[Zo]=null,e[yl]=null)}zv.exports={addSignal:qX,removeSignal:Jv}});var Xv=w((PSe,Zv)=>{"use strict";var YX=v("node:assert"),{finished:WX}=v("node:stream"),{AsyncResource:JX}=v("node:async_hooks"),{InvalidArgumentError:El,InvalidReturnValueError:zX}=Ee(),Gn=ue(),{addSignal:$X,removeSignal:$v}=YA();function KX(){}var zI=class extends JX{constructor(t,r,o){if(!t||typeof t!="object")throw new El("invalid opts");let{signal:n,method:i,opaque:s,body:a,onInfo:l,responseHeaders:c}=t;try{if(typeof o!="function")throw new El("invalid callback");if(typeof r!="function")throw new El("invalid factory");if(n&&typeof n.on!="function"&&typeof n.addEventListener!="function")throw new El("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new El("invalid method");if(l&&typeof l!="function")throw new El("invalid onInfo callback");super("UNDICI_STREAM")}catch(A){throw Gn.isStream(a)&&Gn.destroy(a.on("error",KX),A),A}this.responseHeaders=c||null,this.opaque=s||null,this.factory=r,this.callback=o,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=a,this.onInfo=l||null,Gn.isStream(a)&&a.on("error",A=>{this.onError(A)}),$X(this,n)}onConnect(t,r){if(this.reason){t(this.reason);return}YX(this.callback),this.abort=t,this.context=r}onHeaders(t,r,o,n){let{factory:i,opaque:s,context:a,responseHeaders:l}=this,c=l==="raw"?Gn.parseRawHeaders(r):Gn.parseHeaders(r);if(t<200){this.onInfo&&this.onInfo({statusCode:t,headers:c});return}if(this.factory=null,i===null)return;let A=this.runInAsyncScope(i,null,{statusCode:t,headers:c,opaque:s,context:a});if(!A||typeof A.write!="function"||typeof A.end!="function"||typeof A.on!="function")throw new zX("expected Writable");return WX(A,{readable:!1},f=>{let{callback:u,res:p,opaque:h,trailers:g,abort:m}=this;this.res=null,(f||!p.readable)&&Gn.destroy(p,f),this.callback=null,this.runInAsyncScope(u,null,f||null,{opaque:h,trailers:g}),f&&m()}),A.on("drain",o),this.res=A,(A.writableNeedDrain!==void 0?A.writableNeedDrain:A._writableState?.needDrain)!==!0}onData(t){let{res:r}=this;return r?r.write(t):!0}onComplete(t){let{res:r}=this;$v(this),r&&(this.trailers=Gn.parseHeaders(t),r.end())}onError(t){let{res:r,callback:o,opaque:n,body:i}=this;$v(this),this.factory=null,r?(this.res=null,Gn.destroy(r,t)):o&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(o,null,t,{opaque:n})})),i&&(this.body=null,Gn.destroy(i,t))}};function Kv(e,t,r){if(r===void 0)return new Promise((o,n)=>{Kv.call(this,e,t,(i,s)=>i?n(i):o(s))});try{let o=new zI(e,t,r);this.dispatch(e,o)}catch(o){if(typeof r!="function")throw o;let n=e?.opaque;queueMicrotask(()=>r(o,{opaque:n}))}}Zv.exports=Kv});var oP=w((LSe,rP)=>{"use strict";var{Readable:tP,Duplex:ZX,PassThrough:XX}=v("node:stream"),e7=v("node:assert"),{AsyncResource:t7}=v("node:async_hooks"),{InvalidArgumentError:WA,InvalidReturnValueError:r7,RequestAbortedError:$I}=Ee(),Xo=ue(),{addSignal:o7,removeSignal:n7}=YA();function eP(){}var Cl=Symbol("resume"),KI=class extends tP{constructor(){super({autoDestroy:!0}),this[Cl]=null}_read(){let{[Cl]:t}=this;t&&(this[Cl]=null,t())}_destroy(t,r){this._read(),r(t)}},ZI=class extends tP{constructor(t){super({autoDestroy:!0}),this[Cl]=t}_read(){this[Cl]()}_destroy(t,r){!t&&!this._readableState.endEmitted&&(t=new $I),r(t)}},XI=class extends t7{constructor(t,r){if(!t||typeof t!="object")throw new WA("invalid opts");if(typeof r!="function")throw new WA("invalid handler");let{signal:o,method:n,opaque:i,onInfo:s,responseHeaders:a}=t;if(o&&typeof o.on!="function"&&typeof o.addEventListener!="function")throw new WA("signal must be an EventEmitter or EventTarget");if(n==="CONNECT")throw new WA("invalid method");if(s&&typeof s!="function")throw new WA("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=i||null,this.responseHeaders=a||null,this.handler=r,this.abort=null,this.context=null,this.onInfo=s||null,this.req=new KI().on("error",eP),this.ret=new ZX({readableObjectMode:t.objectMode,autoDestroy:!0,read:()=>{let{body:l}=this;l?.resume&&l.resume()},write:(l,c,A)=>{let{req:d}=this;d.push(l,c)||d._readableState.destroyed?A():d[Cl]=A},destroy:(l,c)=>{let{body:A,req:d,res:f,ret:u,abort:p}=this;!l&&!u._readableState.endEmitted&&(l=new $I),p&&l&&p(),Xo.destroy(A,l),Xo.destroy(d,l),Xo.destroy(f,l),n7(this),c(l)}}).on("prefinish",()=>{let{req:l}=this;l.push(null)}),this.res=null,o7(this,o)}onConnect(t,r){let{res:o}=this;if(this.reason){t(this.reason);return}e7(!o,"pipeline cannot be retried"),this.abort=t,this.context=r}onHeaders(t,r,o){let{opaque:n,handler:i,context:s}=this;if(t<200){if(this.onInfo){let l=this.responseHeaders==="raw"?Xo.parseRawHeaders(r):Xo.parseHeaders(r);this.onInfo({statusCode:t,headers:l})}return}this.res=new ZI(o);let a;try{this.handler=null;let l=this.responseHeaders==="raw"?Xo.parseRawHeaders(r):Xo.parseHeaders(r);a=this.runInAsyncScope(i,null,{statusCode:t,headers:l,opaque:n,body:this.res,context:s})}catch(l){throw this.res.on("error",eP),l}if(!a||typeof a.on!="function")throw new r7("expected Readable");a.on("data",l=>{let{ret:c,body:A}=this;!c.push(l)&&A.pause&&A.pause()}).on("error",l=>{let{ret:c}=this;Xo.destroy(c,l)}).on("end",()=>{let{ret:l}=this;l.push(null)}).on("close",()=>{let{ret:l}=this;l._readableState.ended||Xo.destroy(l,new $I)}),this.body=a}onData(t){let{res:r}=this;return r.push(t)}onComplete(t){let{res:r}=this;r.push(null)}onError(t){let{ret:r}=this;this.handler=null,Xo.destroy(r,t)}};function i7(e,t){try{let r=new XI(e,t);return this.dispatch({...e,body:r.req},r),r.ret}catch(r){return new XX().destroy(r)}}rP.exports=i7});var cP=w((USe,lP)=>{"use strict";var{InvalidArgumentError:eB,SocketError:s7}=Ee(),{AsyncResource:a7}=v("node:async_hooks"),nP=v("node:assert"),iP=ue(),{addSignal:l7,removeSignal:sP}=YA(),tB=class extends a7{constructor(t,r){if(!t||typeof t!="object")throw new eB("invalid opts");if(typeof r!="function")throw new eB("invalid callback");let{signal:o,opaque:n,responseHeaders:i}=t;if(o&&typeof o.on!="function"&&typeof o.addEventListener!="function")throw new eB("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=i||null,this.opaque=n||null,this.callback=r,this.abort=null,this.context=null,l7(this,o)}onConnect(t,r){if(this.reason){t(this.reason);return}nP(this.callback),this.abort=t,this.context=null}onHeaders(){throw new s7("bad upgrade",null)}onUpgrade(t,r,o){nP(t===101);let{callback:n,opaque:i,context:s}=this;sP(this),this.callback=null;let a=this.responseHeaders==="raw"?iP.parseRawHeaders(r):iP.parseHeaders(r);this.runInAsyncScope(n,null,null,{headers:a,socket:o,opaque:i,context:s})}onError(t){let{callback:r,opaque:o}=this;sP(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,t,{opaque:o})}))}};function aP(e,t){if(t===void 0)return new Promise((r,o)=>{aP.call(this,e,(n,i)=>n?o(n):r(i))});try{let r=new tB(e,t),o={...e,method:e.method||"GET",upgrade:e.protocol||"Websocket"};this.dispatch(o,r)}catch(r){if(typeof t!="function")throw r;let o=e?.opaque;queueMicrotask(()=>t(r,{opaque:o}))}}lP.exports=aP});var pP=w((OSe,fP)=>{"use strict";var c7=v("node:assert"),{AsyncResource:A7}=v("node:async_hooks"),{InvalidArgumentError:rB,SocketError:u7}=Ee(),AP=ue(),{addSignal:d7,removeSignal:uP}=YA(),oB=class extends A7{constructor(t,r){if(!t||typeof t!="object")throw new rB("invalid opts");if(typeof r!="function")throw new rB("invalid callback");let{signal:o,opaque:n,responseHeaders:i}=t;if(o&&typeof o.on!="function"&&typeof o.addEventListener!="function")throw new rB("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=n||null,this.responseHeaders=i||null,this.callback=r,this.abort=null,d7(this,o)}onConnect(t,r){if(this.reason){t(this.reason);return}c7(this.callback),this.abort=t,this.context=r}onHeaders(){throw new u7("bad connect",null)}onUpgrade(t,r,o){let{callback:n,opaque:i,context:s}=this;uP(this),this.callback=null;let a=r;a!=null&&(a=this.responseHeaders==="raw"?AP.parseRawHeaders(r):AP.parseHeaders(r)),this.runInAsyncScope(n,null,null,{statusCode:t,headers:a,socket:o,opaque:i,context:s})}onError(t){let{callback:r,opaque:o}=this;uP(this),r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,t,{opaque:o})}))}};function dP(e,t){if(t===void 0)return new Promise((r,o)=>{dP.call(this,e,(n,i)=>n?o(n):r(i))});try{let r=new oB(e,t),o={...e,method:"CONNECT"};this.dispatch(o,r)}catch(r){if(typeof t!="function")throw r;let o=e?.opaque;queueMicrotask(()=>t(r,{opaque:o}))}}fP.exports=dP});var hP=w((MSe,Il)=>{"use strict";Il.exports.request=Yv();Il.exports.stream=Xv();Il.exports.pipeline=oP();Il.exports.upgrade=cP();Il.exports.connect=pP()});var iB=w((_Se,gP)=>{"use strict";var{UndiciError:f7}=Ee(),nB=class extends f7{constructor(t){super(t),this.name="MockNotMatchedError",this.message=t||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};gP.exports={MockNotMatchedError:nB}});var Us=w((GSe,mP)=>{"use strict";mP.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOriginalDispatch:Symbol("original dispatch"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected"),kIgnoreTrailingSlash:Symbol("ignore trailing slash"),kMockAgentMockCallHistoryInstance:Symbol("mock agent mock call history name"),kMockAgentRegisterCallHistory:Symbol("mock agent register mock call history"),kMockAgentAddCallHistoryLog:Symbol("mock agent add call history log"),kMockAgentIsCallHistoryEnabled:Symbol("mock agent is call history enabled"),kMockAgentAcceptsNonStandardSearchParameters:Symbol("mock agent accepts non standard search parameters"),kMockCallHistoryAddLog:Symbol("mock call history add log")}});var JA=w((jSe,RP)=>{"use strict";var{MockNotMatchedError:Os}=iB(),{kDispatches:kp,kMockAgent:p7,kOriginalDispatch:h7,kOrigin:g7,kGetNetConnect:m7}=Us(),{serializePathWithQuery:y7}=ue(),{STATUS_CODES:E7}=v("node:http"),{types:{isPromise:C7}}=v("node:util"),{InvalidArgumentError:yP}=Ee();function en(e,t){return typeof e=="string"?e===t:e instanceof RegExp?e.test(t):typeof e=="function"?e(t)===!0:!1}function CP(e){return Object.fromEntries(Object.entries(e).map(([t,r])=>[t.toLocaleLowerCase(),r]))}function IP(e,t){if(Array.isArray(e)){for(let r=0;r<e.length;r+=2)if(e[r].toLocaleLowerCase()===t.toLocaleLowerCase())return e[r+1];return}else return typeof e.get=="function"?e.get(t):CP(e)[t.toLocaleLowerCase()]}function cB(e){let t=e.slice(),r=[];for(let o=0;o<t.length;o+=2)r.push([t[o],t[o+1]]);return Object.fromEntries(r)}function BP(e,t){if(typeof e.headers=="function")return Array.isArray(t)&&(t=cB(t)),e.headers(t?CP(t):{});if(typeof e.headers>"u")return!0;if(typeof t!="object"||typeof e.headers!="object")return!1;for(let[r,o]of Object.entries(e.headers)){let n=IP(t,r);if(!en(o,n))return!1}return!0}function I7(e){if(typeof e!="string")return e;let t=new URLSearchParams(e),r=new URLSearchParams;for(let[o,n]of t.entries()){if(o=o.replace("[]",""),/^(['"]).*\1$/.test(n)){r.append(o,n);continue}if(n.includes(",")){let s=n.split(",");for(let a of s)r.append(o,a);continue}r.append(o,n)}return r}function sB(e){if(typeof e!="string")return e;let t=e.split("?",3);if(t.length!==2)return e;let r=new URLSearchParams(t.pop());return r.sort(),[...t,r.toString()].join("?")}function B7(e,{path:t,method:r,body:o,headers:n}){let i=en(e.path,t),s=en(e.method,r),a=typeof e.body<"u"?en(e.body,o):!0,l=BP(e,n);return i&&s&&a&&l}function QP(e){return Buffer.isBuffer(e)||e instanceof Uint8Array||e instanceof ArrayBuffer?e:typeof e=="object"?JSON.stringify(e):e?e.toString():""}function bP(e,t){let r=t.query?y7(t.path,t.query):t.path,o=typeof r=="string"?sB(r):r,n=EP(o),i=e.filter(({consumed:s})=>!s).filter(({path:s,ignoreTrailingSlash:a})=>a?en(EP(sB(s)),n):en(sB(s),o));if(i.length===0)throw new Os(`Mock dispatch not matched for path '${o}'`);if(i=i.filter(({method:s})=>en(s,t.method)),i.length===0)throw new Os(`Mock dispatch not matched for method '${t.method}' on path '${o}'`);if(i=i.filter(({body:s})=>typeof s<"u"?en(s,t.body):!0),i.length===0)throw new Os(`Mock dispatch not matched for body '${t.body}' on path '${o}'`);if(i=i.filter(s=>BP(s,t.headers)),i.length===0){let s=typeof t.headers=="object"?JSON.stringify(t.headers):t.headers;throw new Os(`Mock dispatch not matched for headers '${s}' on path '${o}'`)}return i[0]}function Q7(e,t,r,o){let n={timesInvoked:0,times:1,persist:!1,consumed:!1,...o},i=typeof r=="function"?{callback:r}:{...r},s={...n,...t,pending:!0,data:{error:null,...i}};return e.push(s),s}function aB(e,t){let r=e.findIndex(o=>o.consumed?B7(o,t):!1);r!==-1&&e.splice(r,1)}function EP(e){for(;e.endsWith("/");)e=e.slice(0,-1);return e.length===0&&(e="/"),e}function wP(e){let{path:t,method:r,body:o,headers:n,query:i}=e;return{path:t,method:r,body:o,headers:n,query:i}}function lB(e){let t=Object.keys(e),r=[];for(let o=0;o<t.length;++o){let n=t[o],i=e[n],s=Buffer.from(`${n}`);if(Array.isArray(i))for(let a=0;a<i.length;++a)r.push(s,Buffer.from(`${i[a]}`));else r.push(s,Buffer.from(`${i}`))}return r}function SP(e){return E7[e]||"unknown"}async function b7(e){let t=[];for await(let r of e)t.push(r);return Buffer.concat(t).toString("utf8")}function TP(e,t){let r=wP(e),o=bP(this[kp],r);o.timesInvoked++,o.data.callback&&(o.data={...o.data,...o.data.callback(e)});let{data:{statusCode:n,data:i,headers:s,trailers:a,error:l},delay:c,persist:A}=o,{timesInvoked:d,times:f}=o;if(o.consumed=!A&&d>=f,o.pending=d<f,l!==null)return aB(this[kp],r),t.onError(l),!0;typeof c=="number"&&c>0?setTimeout(()=>{u(this[kp])},c):u(this[kp]);function u(h,g=i){let m=Array.isArray(e.headers)?cB(e.headers):e.headers,y=typeof g=="function"?g({...e,headers:m}):g;if(C7(y)){y.then(B=>u(h,B));return}let E=QP(y),I=lB(s),C=lB(a);t.onConnect?.(B=>t.onError(B),null),t.onHeaders?.(n,I,p,SP(n)),t.onData?.(Buffer.from(E)),t.onComplete?.(C),aB(h,r)}function p(){}return!0}function w7(){let e=this[p7],t=this[g7],r=this[h7];return function(n,i){if(e.isMockActive)try{TP.call(this,n,i)}catch(s){if(s instanceof Os){let a=e[m7]();if(a===!1)throw new Os(`${s.message}: subsequent request to origin ${t} was not allowed (net.connect disabled)`);if(xP(a,t))r.call(this,n,i);else throw new Os(`${s.message}: subsequent request to origin ${t} was not allowed (net.connect is not enabled for this origin)`)}else throw s}else r.call(this,n,i)}}function xP(e,t){let r=new URL(t);return e===!0?!0:!!(Array.isArray(e)&&e.some(o=>en(o,r.host)))}function S7(e){if(e){let{agent:t,...r}=e;if("enableCallHistory"in r&&typeof r.enableCallHistory!="boolean")throw new yP("options.enableCallHistory must to be a boolean");if("acceptNonStandardSearchParameters"in r&&typeof r.acceptNonStandardSearchParameters!="boolean")throw new yP("options.acceptNonStandardSearchParameters must to be a boolean");return r}}RP.exports={getResponseData:QP,getMockDispatch:bP,addMockDispatch:Q7,deleteMockDispatch:aB,buildKey:wP,generateKeyValues:lB,matchValue:en,getResponse:b7,getStatusText:SP,mockDispatch:TP,buildMockDispatch:w7,checkNetConnect:xP,buildAndValidateMockOptions:S7,getHeaderByName:IP,buildHeadersFromArray:cB,normalizeSearchParams:I7}});var gB=w((HSe,hB)=>{"use strict";var{getResponseData:T7,buildKey:x7,addMockDispatch:AB}=JA(),{kDispatches:Np,kDispatchKey:vp,kDefaultHeaders:uB,kDefaultTrailers:dB,kContentLength:fB,kMockDispatch:Pp,kIgnoreTrailingSlash:Lp}=Us(),{InvalidArgumentError:tn}=Ee(),{serializePathWithQuery:R7}=ue(),Bl=class{constructor(t){this[Pp]=t}delay(t){if(typeof t!="number"||!Number.isInteger(t)||t<=0)throw new tn("waitInMs must be a valid integer > 0");return this[Pp].delay=t,this}persist(){return this[Pp].persist=!0,this}times(t){if(typeof t!="number"||!Number.isInteger(t)||t<=0)throw new tn("repeatTimes must be a valid integer > 0");return this[Pp].times=t,this}},pB=class{constructor(t,r){if(typeof t!="object")throw new tn("opts must be an object");if(typeof t.path>"u")throw new tn("opts.path must be defined");if(typeof t.method>"u"&&(t.method="GET"),typeof t.path=="string")if(t.query)t.path=R7(t.path,t.query);else{let o=new URL(t.path,"data://");t.path=o.pathname+o.search}typeof t.method=="string"&&(t.method=t.method.toUpperCase()),this[vp]=x7(t),this[Np]=r,this[Lp]=t.ignoreTrailingSlash??!1,this[uB]={},this[dB]={},this[fB]=!1}createMockScopeDispatchData({statusCode:t,data:r,responseOptions:o}){let n=T7(r),i=this[fB]?{"content-length":n.length}:{},s={...this[uB],...i,...o.headers},a={...this[dB],...o.trailers};return{statusCode:t,data:r,headers:s,trailers:a}}validateReplyParameters(t){if(typeof t.statusCode>"u")throw new tn("statusCode must be defined");if(typeof t.responseOptions!="object"||t.responseOptions===null)throw new tn("responseOptions must be an object")}reply(t){if(typeof t=="function"){let i=a=>{let l=t(a);if(typeof l!="object"||l===null)throw new tn("reply options callback must return an object");let c={data:"",responseOptions:{},...l};return this.validateReplyParameters(c),{...this.createMockScopeDispatchData(c)}},s=AB(this[Np],this[vp],i,{ignoreTrailingSlash:this[Lp]});return new Bl(s)}let r={statusCode:t,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(r);let o=this.createMockScopeDispatchData(r),n=AB(this[Np],this[vp],o,{ignoreTrailingSlash:this[Lp]});return new Bl(n)}replyWithError(t){if(typeof t>"u")throw new tn("error must be defined");let r=AB(this[Np],this[vp],{error:t},{ignoreTrailingSlash:this[Lp]});return new Bl(r)}defaultReplyHeaders(t){if(typeof t>"u")throw new tn("headers must be defined");return this[uB]=t,this}defaultReplyTrailers(t){if(typeof t>"u")throw new tn("trailers must be defined");return this[dB]=t,this}replyContentLength(){return this[fB]=!0,this}};hB.exports.MockInterceptor=pB;hB.exports.MockScope=Bl});var EB=w((VSe,UP)=>{"use strict";var{promisify:D7}=v("node:util"),F7=ks(),{buildMockDispatch:k7}=JA(),{kDispatches:DP,kMockAgent:FP,kClose:kP,kOriginalClose:NP,kOrigin:vP,kOriginalDispatch:N7,kConnected:mB,kIgnoreTrailingSlash:PP}=Us(),{MockInterceptor:v7}=gB(),LP=Me(),{InvalidArgumentError:P7}=Ee(),yB=class extends F7{constructor(t,r){if(!r||!r.agent||typeof r.agent.dispatch!="function")throw new P7("Argument opts.agent must implement Agent");super(t,r),this[FP]=r.agent,this[vP]=t,this[PP]=r.ignoreTrailingSlash??!1,this[DP]=[],this[mB]=1,this[N7]=this.dispatch,this[NP]=this.close.bind(this),this.dispatch=k7.call(this),this.close=this[kP]}get[LP.kConnected](){return this[mB]}intercept(t){return new v7(t&&{ignoreTrailingSlash:this[PP],...t},this[DP])}async[kP](){await D7(this[NP])(),this[mB]=0,this[FP][LP.kClients].delete(this[vP])}};UP.exports=yB});var BB=w((qSe,IB)=>{"use strict";var{kMockCallHistoryAddLog:L7}=Us(),{InvalidArgumentError:Qi}=Ee();function Ii(e,t,r,o){switch(t.operator){case"OR":return o.push(...r(e)),o;case"AND":return r.call({logs:o},e);default:throw new Qi("options.operator must to be a case insensitive string equal to 'OR' or 'AND'")}}function U7(e={}){let t={};if("operator"in e){if(typeof e.operator!="string"||e.operator.toUpperCase()!=="OR"&&e.operator.toUpperCase()!=="AND")throw new Qi("options.operator must to be a case insensitive string equal to 'OR' or 'AND'");return{...t,operator:e.operator.toUpperCase()}}return t}function Bi(e){return t=>{if(typeof t=="string"||t==null)return this.logs.filter(r=>r[e]===t);if(t instanceof RegExp)return this.logs.filter(r=>t.test(r[e]));throw new Qi(`${e} parameter should be one of string, regexp, undefined or null`)}}function O7(e){try{let t=new URL(e.path,e.origin);return t.search.length!==0||(t.search=new URLSearchParams(e.query).toString()),t}catch(t){throw new Qi("An error occurred when computing MockCallHistoryLog.url",{cause:t})}}var Up=class{constructor(t={}){this.body=t.body,this.headers=t.headers,this.method=t.method;let r=O7(t);this.fullUrl=r.toString(),this.origin=r.origin,this.path=r.pathname,this.searchParams=Object.fromEntries(r.searchParams),this.protocol=r.protocol,this.host=r.host,this.port=r.port,this.hash=r.hash}toMap(){return new Map([["protocol",this.protocol],["host",this.host],["port",this.port],["origin",this.origin],["path",this.path],["hash",this.hash],["searchParams",this.searchParams],["fullUrl",this.fullUrl],["method",this.method],["body",this.body],["headers",this.headers]])}toString(){let t={betweenKeyValueSeparator:"->",betweenPairSeparator:"|"},r="";return this.toMap().forEach((o,n)=>{(typeof o=="string"||o===void 0||o===null)&&(r=`${r}${n}${t.betweenKeyValueSeparator}${o}${t.betweenPairSeparator}`),(typeof o=="object"&&o!==null||Array.isArray(o))&&(r=`${r}${n}${t.betweenKeyValueSeparator}${JSON.stringify(o)}${t.betweenPairSeparator}`)}),r.slice(0,-1)}},CB=class{logs=[];calls(){return this.logs}firstCall(){return this.logs.at(0)}lastCall(){return this.logs.at(-1)}nthCall(t){if(typeof t!="number")throw new Qi("nthCall must be called with a number");if(!Number.isInteger(t))throw new Qi("nthCall must be called with an integer");if(Math.sign(t)!==1)throw new Qi("nthCall must be called with a positive value. use firstCall or lastCall instead");return this.logs.at(t-1)}filterCalls(t,r){if(this.logs.length===0)return this.logs;if(typeof t=="function")return this.logs.filter(t);if(t instanceof RegExp)return this.logs.filter(o=>t.test(o.toString()));if(typeof t=="object"&&t!==null){if(Object.keys(t).length===0)return this.logs;let o={operator:"OR",...U7(r)},n=[];return"protocol"in t&&(n=Ii(t.protocol,o,this.filterCallsByProtocol,n)),"host"in t&&(n=Ii(t.host,o,this.filterCallsByHost,n)),"port"in t&&(n=Ii(t.port,o,this.filterCallsByPort,n)),"origin"in t&&(n=Ii(t.origin,o,this.filterCallsByOrigin,n)),"path"in t&&(n=Ii(t.path,o,this.filterCallsByPath,n)),"hash"in t&&(n=Ii(t.hash,o,this.filterCallsByHash,n)),"fullUrl"in t&&(n=Ii(t.fullUrl,o,this.filterCallsByFullUrl,n)),"method"in t&&(n=Ii(t.method,o,this.filterCallsByMethod,n)),[...new Set(n)]}throw new Qi("criteria parameter should be one of function, regexp, or object")}filterCallsByProtocol=Bi.call(this,"protocol");filterCallsByHost=Bi.call(this,"host");filterCallsByPort=Bi.call(this,"port");filterCallsByOrigin=Bi.call(this,"origin");filterCallsByPath=Bi.call(this,"path");filterCallsByHash=Bi.call(this,"hash");filterCallsByFullUrl=Bi.call(this,"fullUrl");filterCallsByMethod=Bi.call(this,"method");clear(){this.logs=[]}[L7](t){let r=new Up(t);return this.logs.push(r),r}*[Symbol.iterator](){for(let t of this.calls())yield t}};IB.exports.MockCallHistory=CB;IB.exports.MockCallHistoryLog=Up});var wB=w((YSe,qP)=>{"use strict";var{promisify:M7}=v("node:util"),_7=fl(),{buildMockDispatch:G7}=JA(),{kDispatches:OP,kMockAgent:MP,kClose:_P,kOriginalClose:GP,kOrigin:jP,kOriginalDispatch:j7,kConnected:QB,kIgnoreTrailingSlash:HP}=Us(),{MockInterceptor:H7}=gB(),VP=Me(),{InvalidArgumentError:V7}=Ee(),bB=class extends _7{constructor(t,r){if(!r||!r.agent||typeof r.agent.dispatch!="function")throw new V7("Argument opts.agent must implement Agent");super(t,r),this[MP]=r.agent,this[jP]=t,this[HP]=r.ignoreTrailingSlash??!1,this[OP]=[],this[QB]=1,this[j7]=this.dispatch,this[GP]=this.close.bind(this),this.dispatch=G7.call(this),this.close=this[_P]}get[VP.kConnected](){return this[QB]}intercept(t){return new H7(t&&{ignoreTrailingSlash:this[HP],...t},this[OP])}async[_P](){await M7(this[GP])(),this[QB]=0,this[MP][VP.kClients].delete(this[jP])}};qP.exports=bB});var WP=w((JSe,YP)=>{"use strict";var{Transform:q7}=v("node:stream"),{Console:Y7}=v("node:console"),W7=process.versions.icu?"\u2705":"Y ",J7=process.versions.icu?"\u274C":"N ";YP.exports=class{constructor({disableColors:t}={}){this.transform=new q7({transform(r,o,n){n(null,r)}}),this.logger=new Y7({stdout:this.transform,inspectOptions:{colors:!t&&!process.env.CI}})}format(t){let r=t.map(({method:o,path:n,data:{statusCode:i},persist:s,times:a,timesInvoked:l,origin:c})=>({Method:o,Origin:c,Path:n,"Status code":i,Persistent:s?W7:J7,Invocations:l,Remaining:s?1/0:a-l}));return this.logger.table(r),this.transform.read().toString()}}});var XP=w((zSe,ZP)=>{"use strict";var{kClients:Ms}=Me(),z7=pl(),{kAgent:SB,kMockAgentSet:Op,kMockAgentGet:JP,kDispatches:TB,kIsMockActive:Mp,kNetConnect:_s,kGetNetConnect:$7,kOptions:_p,kFactory:Gp,kMockAgentRegisterCallHistory:xB,kMockAgentIsCallHistoryEnabled:zA,kMockAgentAddCallHistoryLog:zP,kMockAgentMockCallHistoryInstance:Ql,kMockAgentAcceptsNonStandardSearchParameters:$P,kMockCallHistoryAddLog:K7}=Us(),Z7=EB(),X7=wB(),{matchValue:eee,normalizeSearchParams:tee,buildAndValidateMockOptions:ree}=JA(),{InvalidArgumentError:KP,UndiciError:oee}=Ee(),nee=CA(),iee=WP(),{MockCallHistory:see}=BB(),RB=class extends nee{constructor(t){super(t);let r=ree(t);if(this[_s]=!0,this[Mp]=!0,this[zA]=r?.enableCallHistory??!1,this[$P]=r?.acceptNonStandardSearchParameters??!1,t?.agent&&typeof t.agent.dispatch!="function")throw new KP("Argument opts.agent must implement Agent");let o=t?.agent?t.agent:new z7(t);this[SB]=o,this[Ms]=o[Ms],this[_p]=r,this[zA]&&this[xB]()}get(t){let r=this[JP](t);return r||(r=this[Gp](t),this[Op](t,r)),r}dispatch(t,r){this.get(t.origin),this[zP](t);let o=this[$P],n={...t};if(o&&n.path){let[i,s]=n.path.split("?"),a=tee(s,o);n.path=`${i}?${a}`}return this[SB].dispatch(n,r)}async close(){this.clearCallHistory(),await this[SB].close(),this[Ms].clear()}deactivate(){this[Mp]=!1}activate(){this[Mp]=!0}enableNetConnect(t){if(typeof t=="string"||typeof t=="function"||t instanceof RegExp)Array.isArray(this[_s])?this[_s].push(t):this[_s]=[t];else if(typeof t>"u")this[_s]=!0;else throw new KP("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[_s]=!1}enableCallHistory(){return this[zA]=!0,this}disableCallHistory(){return this[zA]=!1,this}getCallHistory(){return this[Ql]}clearCallHistory(){this[Ql]!==void 0&&this[Ql].clear()}get isMockActive(){return this[Mp]}[xB](){this[Ql]===void 0&&(this[Ql]=new see)}[zP](t){this[zA]&&(this[xB](),this[Ql][K7](t))}[Op](t,r){this[Ms].set(t,{count:0,dispatcher:r})}[Gp](t){let r=Object.assign({agent:this},this[_p]);return this[_p]&&this[_p].connections===1?new Z7(t,r):new X7(t,r)}[JP](t){let r=this[Ms].get(t);if(r?.dispatcher)return r.dispatcher;if(typeof t!="string"){let o=this[Gp]("http://localhost:9999");return this[Op](t,o),o}for(let[o,n]of Array.from(this[Ms]))if(n&&typeof o!="string"&&eee(o,t)){let i=this[Gp](t);return this[Op](t,i),i[TB]=n.dispatcher[TB],i}}[$7](){return this[_s]}pendingInterceptors(){let t=this[Ms];return Array.from(t.entries()).flatMap(([r,o])=>o.dispatcher[TB].map(n=>({...n,origin:r}))).filter(({pending:r})=>r)}assertNoPendingInterceptors({pendingInterceptorsFormatter:t=new iee}={}){let r=this.pendingInterceptors();if(r.length!==0)throw new oee(r.length===1?`1 interceptor is pending:

${t.format(r)}`.trim():`${r.length} interceptors are pending:

${t.format(r)}`.trim())}};ZP.exports=RB});var jp=w(($Se,o1)=>{"use strict";var e1=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:aee}=Ee(),lee=pl();r1()===void 0&&t1(new lee);function t1(e){if(!e||typeof e.dispatch!="function")throw new aee("Argument agent must implement Agent");Object.defineProperty(globalThis,e1,{value:e,writable:!0,enumerable:!1,configurable:!1})}function r1(){return globalThis[e1]}o1.exports={setGlobalDispatcher:t1,getGlobalDispatcher:r1}});var $A=w((ZSe,n1)=>{"use strict";var jn=v("node:assert"),cee=Yf();n1.exports=class{#e;#t=!1;#r=!1;#o=!1;constructor(t){if(typeof t!="object"||t===null)throw new TypeError("handler must be an object");this.#e=cee.wrap(t)}onRequestStart(...t){this.#e.onRequestStart?.(...t)}onRequestUpgrade(...t){return jn(!this.#t),jn(!this.#r),this.#e.onRequestUpgrade?.(...t)}onResponseStart(...t){return jn(!this.#t),jn(!this.#r),jn(!this.#o),this.#o=!0,this.#e.onResponseStart?.(...t)}onResponseData(...t){return jn(!this.#t),jn(!this.#r),this.#e.onResponseData?.(...t)}onResponseEnd(...t){return jn(!this.#t),jn(!this.#r),this.#t=!0,this.#e.onResponseEnd?.(...t)}onResponseError(...t){return this.#r=!0,this.#e.onResponseError?.(...t)}onBodySent(){}}});var kB=w((XSe,c1)=>{"use strict";var xr=ue(),{kBodyUsed:KA}=Me(),FB=v("node:assert"),{InvalidArgumentError:i1}=Ee(),Aee=v("node:events"),uee=[300,301,302,303,307,308],s1=Symbol("body"),a1=()=>{},Hp=class{constructor(t){this[s1]=t,this[KA]=!1}async*[Symbol.asyncIterator](){FB(!this[KA],"disturbed"),this[KA]=!0,yield*this[s1]}},DB=class e{static buildDispatch(t,r){if(r!=null&&(!Number.isInteger(r)||r<0))throw new i1("maxRedirections must be a positive number");let o=t.dispatch.bind(t);return(n,i)=>o(n,new e(o,r,n,i))}constructor(t,r,o,n){if(r!=null&&(!Number.isInteger(r)||r<0))throw new i1("maxRedirections must be a positive number");this.dispatch=t,this.location=null,this.opts={...o,maxRedirections:0},this.maxRedirections=r,this.handler=n,this.history=[],xr.isStream(this.opts.body)?(xr.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){FB(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[KA]=!1,Aee.prototype.on.call(this.opts.body,"data",function(){this[KA]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new Hp(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&xr.isIterable(this.opts.body)&&!xr.isFormDataLike(this.opts.body)&&(this.opts.body=new Hp(this.opts.body))}onRequestStart(t,r){this.handler.onRequestStart?.(t,{...r,history:this.history})}onRequestUpgrade(t,r,o,n){this.handler.onRequestUpgrade?.(t,r,o,n)}onResponseStart(t,r,o,n){if(this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections)throw new Error("max redirects");if((r===301||r===302)&&this.opts.method==="POST"&&(this.opts.method="GET",xr.isStream(this.opts.body)&&xr.destroy(this.opts.body.on("error",a1)),this.opts.body=null),r===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",xr.isStream(this.opts.body)&&xr.destroy(this.opts.body.on("error",a1)),this.opts.body=null),this.location=this.history.length>=this.maxRedirections||xr.isDisturbed(this.opts.body)||uee.indexOf(r)===-1?null:o.location,this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location){this.handler.onResponseStart?.(t,r,o,n);return}let{origin:i,pathname:s,search:a}=xr.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),l=a?`${s}${a}`:s;this.opts.headers=dee(this.opts.headers,r===303,this.opts.origin!==i),this.opts.path=l,this.opts.origin=i,this.opts.maxRedirections=0,this.opts.query=null}onResponseData(t,r){this.location||this.handler.onResponseData?.(t,r)}onResponseEnd(t,r){this.location?this.dispatch(this.opts,this):this.handler.onResponseEnd(t,r)}onResponseError(t,r){this.handler.onResponseError?.(t,r)}};function l1(e,t,r){if(e.length===4)return xr.headerNameToString(e)==="host";if(t&&xr.headerNameToString(e).startsWith("content-"))return!0;if(r&&(e.length===13||e.length===6||e.length===19)){let o=xr.headerNameToString(e);return o==="authorization"||o==="cookie"||o==="proxy-authorization"}return!1}function dee(e,t,r){let o=[];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)l1(e[n],t,r)||o.push(e[n],e[n+1]);else if(e&&typeof e=="object"){let n=typeof e[Symbol.iterator]=="function"?e:Object.entries(e);for(let[i,s]of n)l1(i,t,r)||o.push(i,s)}else FB(e==null,"headers must be an object or an array");return o}c1.exports=DB});var u1=w((eTe,A1)=>{"use strict";var fee=kB();function pee({maxRedirections:e}={}){return t=>function(o,n){let{maxRedirections:i=e,...s}=o;if(i==null||i===0)return t(o,n);let a={...s,maxRedirections:0},l=new fee(t,i,a,n);return t(a,l)}}A1.exports=pee});var f1=w((tTe,d1)=>{"use strict";var hee=$A(),{ResponseError:gee}=Ee(),NB=class extends hee{#e;#t;#r;#o;#i;constructor(t,{handler:r}){super(r)}#n(t){return(this.#t??"").indexOf(t)===0}onRequestStart(t,r){return this.#e=0,this.#t=null,this.#r=null,this.#o=null,this.#i="",super.onRequestStart(t,r)}onResponseStart(t,r,o,n){if(this.#e=r,this.#o=o,this.#t=o["content-type"],this.#e<400)return super.onResponseStart(t,r,o,n);(this.#n("application/json")||this.#n("text/plain"))&&(this.#r=new TextDecoder("utf-8"))}onResponseData(t,r){if(this.#e<400)return super.onResponseData(t,r);this.#i+=this.#r?.decode(r,{stream:!0})??""}onResponseEnd(t,r){if(this.#e>=400){if(this.#i+=this.#r?.decode(void 0,{stream:!1})??"",this.#n("application/json"))try{this.#i=JSON.parse(this.#i)}catch{}let o,n=Error.stackTraceLimit;Error.stackTraceLimit=0;try{o=new gee("Response Error",this.#e,{body:this.#i,headers:this.#o})}finally{Error.stackTraceLimit=n}super.onResponseError(t,o)}else super.onResponseEnd(t,r)}onResponseError(t,r){super.onResponseError(t,r)}};d1.exports=()=>e=>function(r,o){return e(r,new NB(r,{handler:o}))}});var h1=w((rTe,p1)=>{"use strict";var mee=Tp();p1.exports=e=>t=>function(o,n){return t(o,new mee({...o,retryOptions:{...e,...o.retryOptions}},{handler:n,dispatch:t}))}});var m1=w((oTe,g1)=>{"use strict";var{InvalidArgumentError:yee,RequestAbortedError:Eee}=Ee(),Cee=$A(),vB=class extends Cee{#e=1024*1024;#t=!1;#r=0;#o=null;aborted=!1;reason=!1;constructor({maxSize:t,signal:r},o){if(t!=null&&(!Number.isFinite(t)||t<1))throw new yee("maxSize must be a number greater than 0");super(o),this.#e=t??this.#e}#i(t){this.aborted=!0,this.reason=t}onRequestStart(t,r){return t.abort=this.#i.bind(this),this.#o=t,super.onRequestStart(t,r)}onResponseStart(t,r,o,n){let i=o["content-length"];if(i!=null&&i>this.#e)throw new Eee(`Response size (${i}) larger than maxSize (${this.#e})`);return this.aborted===!0?!0:super.onResponseStart(t,r,o,n)}onResponseError(t,r){this.#t||(r=this.#o.reason??r,super.onResponseError(t,r))}onResponseData(t,r){return this.#r=this.#r+r.length,this.#r>=this.#e&&(this.#t=!0,this.aborted===!0?super.onResponseError(t,this.reason):super.onResponseEnd(t,{})),!0}onResponseEnd(t,r){if(!this.#t){if(this.#o.aborted===!0){super.onResponseError(t,this.reason);return}super.onResponseEnd(t,r)}}};function Iee({maxSize:e}={maxSize:1024*1024}){return t=>function(o,n){let{dumpMaxSize:i=e}=o,s=new vB({maxSize:i,signal:o.signal},n);return t(o,s)}}g1.exports=Iee});var E1=w((nTe,y1)=>{"use strict";var{isIP:Bee}=v("node:net"),{lookup:Qee}=v("node:dns"),bee=$A(),{InvalidArgumentError:bl,InformationalError:wee}=Ee(),PB=Math.pow(2,31)-1,LB=class{#e=0;#t=0;#r=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(t){this.#e=t.maxTTL,this.#t=t.maxItems,this.dualStack=t.dualStack,this.affinity=t.affinity,this.lookup=t.lookup??this.#o,this.pick=t.pick??this.#i}get full(){return this.#r.size===this.#t}runLookup(t,r,o){let n=this.#r.get(t.hostname);if(n==null&&this.full){o(null,t);return}let i={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...r.dns,maxTTL:this.#e,maxItems:this.#t};if(n==null)this.lookup(t,i,(s,a)=>{if(s||a==null||a.length===0){o(s??new wee("No DNS entries found"));return}this.setRecords(t,a);let l=this.#r.get(t.hostname),c=this.pick(t,l,i.affinity),A;typeof c.port=="number"?A=`:${c.port}`:t.port!==""?A=`:${t.port}`:A="",o(null,new URL(`${t.protocol}//${c.family===6?`[${c.address}]`:c.address}${A}`))});else{let s=this.pick(t,n,i.affinity);if(s==null){this.#r.delete(t.hostname),this.runLookup(t,r,o);return}let a;typeof s.port=="number"?a=`:${s.port}`:t.port!==""?a=`:${t.port}`:a="",o(null,new URL(`${t.protocol}//${s.family===6?`[${s.address}]`:s.address}${a}`))}}#o(t,r,o){Qee(t.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(n,i)=>{if(n)return o(n);let s=new Map;for(let a of i)s.set(`${a.address}:${a.family}`,a);o(null,s.values())})}#i(t,r,o){let n=null,{records:i,offset:s}=r,a;if(this.dualStack?(o==null&&(s==null||s===PB?(r.offset=0,o=4):(r.offset++,o=(r.offset&1)===1?6:4)),i[o]!=null&&i[o].ips.length>0?a=i[o]:a=i[o===4?6:4]):a=i[o],a==null||a.ips.length===0)return n;a.offset==null||a.offset===PB?a.offset=0:a.offset++;let l=a.offset%a.ips.length;return n=a.ips[l]??null,n==null?n:Date.now()-n.timestamp>n.ttl?(a.ips.splice(l,1),this.pick(t,r,o)):n}pickFamily(t,r){let o=this.#r.get(t.hostname)?.records;if(!o)return null;let n=o[r];if(!n)return null;n.offset==null||n.offset===PB?n.offset=0:n.offset++;let i=n.offset%n.ips.length,s=n.ips[i]??null;return s==null||Date.now()-s.timestamp>s.ttl&&n.ips.splice(i,1),s}setRecords(t,r){let o=Date.now(),n={records:{4:null,6:null}};for(let i of r){i.timestamp=o,typeof i.ttl=="number"?i.ttl=Math.min(i.ttl,this.#e):i.ttl=this.#e;let s=n.records[i.family]??{ips:[]};s.ips.push(i),n.records[i.family]=s}this.#r.set(t.hostname,n)}deleteRecords(t){this.#r.delete(t.hostname)}getHandler(t,r){return new UB(this,t,r)}},UB=class extends bee{#e=null;#t=null;#r=null;#o=null;#i=null;#n=null;#l=!0;constructor(t,{origin:r,handler:o,dispatch:n,newOrigin:i},s){super(o),this.#o=r,this.#n=i,this.#t={...s},this.#e=t,this.#r=n}onResponseError(t,r){switch(r.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){if(!this.#l){super.onResponseError(t,r);return}this.#l=!1;let o=this.#n.hostname[0]==="["?4:6,n=this.#e.pickFamily(this.#o,o);if(n==null){super.onResponseError(t,r);return}let i;typeof n.port=="number"?i=`:${n.port}`:this.#o.port!==""?i=`:${this.#o.port}`:i="";let s={...this.#t,origin:`${this.#o.protocol}//${n.family===6?`[${n.address}]`:n.address}${i}`};this.#r(s,this);return}super.onResponseError(t,r);break}case"ENOTFOUND":this.#e.deleteRecords(this.#o),super.onResponseError(t,r);break;default:super.onResponseError(t,r);break}}};y1.exports=e=>{if(e?.maxTTL!=null&&(typeof e?.maxTTL!="number"||e?.maxTTL<0))throw new bl("Invalid maxTTL. Must be a positive number");if(e?.maxItems!=null&&(typeof e?.maxItems!="number"||e?.maxItems<1))throw new bl("Invalid maxItems. Must be a positive number and greater than zero");if(e?.affinity!=null&&e?.affinity!==4&&e?.affinity!==6)throw new bl("Invalid affinity. Must be either 4 or 6");if(e?.dualStack!=null&&typeof e?.dualStack!="boolean")throw new bl("Invalid dualStack. Must be a boolean");if(e?.lookup!=null&&typeof e?.lookup!="function")throw new bl("Invalid lookup. Must be a function");if(e?.pick!=null&&typeof e?.pick!="function")throw new bl("Invalid pick. Must be a function");let t=e?.dualStack??!0,r;t?r=e?.affinity??null:r=e?.affinity??4;let o={maxTTL:e?.maxTTL??1e4,lookup:e?.lookup??null,pick:e?.pick??null,dualStack:t,affinity:r,maxItems:e?.maxItems??1/0},n=new LB(o);return i=>function(a,l){let c=a.origin.constructor===URL?a.origin:new URL(a.origin);return Bee(c.hostname)!==0?i(a,l):(n.runLookup(c,a,(A,d)=>{if(A)return l.onResponseError(null,A);let f={...a,servername:c.hostname,origin:d.origin,headers:{host:c.host,...a.headers}};i(f,n.getHandler({origin:c,dispatch:i,handler:l,newOrigin:d},a))}),!0)}}});var ZA=w((iTe,I1)=>{"use strict";var{safeHTTPMethods:C1}=ue();function See(e){if(!e.origin)throw new Error("opts.origin is undefined");return{origin:e.origin.toString(),method:e.method,path:e.path,headers:e.headers}}function Tee(e){let t;if(e.headers==null)t={};else if(typeof e.headers[Symbol.iterator]=="function"){t={};for(let r of e.headers){if(!Array.isArray(r))throw new Error("opts.headers is not a valid header map");let[o,n]=r;if(typeof o!="string"||typeof n!="string")throw new Error("opts.headers is not a valid header map");t[o.toLowerCase()]=n}}else if(typeof e.headers=="object"){t={};for(let r of Object.keys(e.headers))t[r.toLowerCase()]=e.headers[r]}else throw new Error("opts.headers is not an object");return t}function xee(e){if(typeof e!="object")throw new TypeError(`expected key to be object, got ${typeof e}`);for(let t of["origin","method","path"])if(typeof e[t]!="string")throw new TypeError(`expected key.${t} to be string, got ${typeof e[t]}`);if(e.headers!==void 0&&typeof e.headers!="object")throw new TypeError(`expected headers to be object, got ${typeof e}`)}function Ree(e){if(typeof e!="object")throw new TypeError(`expected value to be object, got ${typeof e}`);for(let t of["statusCode","cachedAt","staleAt","deleteAt"])if(typeof e[t]!="number")throw new TypeError(`expected value.${t} to be number, got ${typeof e[t]}`);if(typeof e.statusMessage!="string")throw new TypeError(`expected value.statusMessage to be string, got ${typeof e.statusMessage}`);if(e.headers!=null&&typeof e.headers!="object")throw new TypeError(`expected value.rawHeaders to be object, got ${typeof e.headers}`);if(e.vary!==void 0&&typeof e.vary!="object")throw new TypeError(`expected value.vary to be object, got ${typeof e.vary}`);if(e.etag!==void 0&&typeof e.etag!="string")throw new TypeError(`expected value.etag to be string, got ${typeof e.etag}`)}function Dee(e){let t={},r;if(Array.isArray(e)){r=[];for(let o of e)r.push(...o.split(","))}else r=e.split(",");for(let o=0;o<r.length;o++){let n=r[o].toLowerCase(),i=n.indexOf("="),s,a;switch(i!==-1?(s=n.substring(0,i).trimStart(),a=n.substring(i+1)):s=n.trim(),s){case"min-fresh":case"max-stale":case"max-age":case"s-maxage":case"stale-while-revalidate":case"stale-if-error":{if(a===void 0||a[0]===" ")continue;a.length>=2&&a[0]==='"'&&a[a.length-1]==='"'&&(a=a.substring(1,a.length-1));let l=parseInt(a,10);if(l!==l||s==="max-age"&&s in t&&t[s]>=l)continue;t[s]=l;break}case"private":case"no-cache":if(a){if(a[0]==='"'){let l=[a.substring(1)],c=a[a.length-1]==='"';if(!c)for(let A=o+1;A<r.length;A++){let d=r[A],f=d.length;if(l.push(d.trim()),f!==0&&d[f-1]==='"'){c=!0;break}}if(c){let A=l[l.length-1];A[A.length-1]==='"'&&(A=A.substring(0,A.length-1),l[l.length-1]=A),s in t?t[s]=t[s].concat(l):t[s]=l}}else s in t?t[s]=t[s].concat(a):t[s]=[a];break}case"public":case"no-store":case"must-revalidate":case"proxy-revalidate":case"immutable":case"no-transform":case"must-understand":case"only-if-cached":if(a)continue;t[s]=!0;break;default:continue}}return t}function Fee(e,t){if(typeof e=="string"&&e.includes("*"))return t;let r={},o=typeof e=="string"?e.split(","):e;for(let n of o){let i=n.trim().toLowerCase();r[i]=t[i]??null}return r}function kee(e){return e.length<=2?!1:e[0]==='"'&&e[e.length-1]==='"'?!(e[1]==='"'||e.startsWith('"W/')):e.startsWith('W/"')&&e[e.length-1]==='"'?e.length!==4:!1}function Nee(e,t="CacheStore"){if(typeof e!="object"||e===null)throw new TypeError(`expected type of ${t} to be a CacheStore, got ${e===null?"null":typeof e}`);for(let r of["get","createWriteStream","delete"])if(typeof e[r]!="function")throw new TypeError(`${t} needs to have a \`${r}()\` function`)}function vee(e,t="CacheMethods"){if(!Array.isArray(e))throw new TypeError(`expected type of ${t} needs to be an array, got ${e===null?"null":typeof e}`);if(e.length===0)throw new TypeError(`${t} needs to have at least one method`);for(let r of e)if(!C1.includes(r))throw new TypeError(`element of ${t}-array needs to be one of following values: ${C1.join(", ")}, got ${r}`)}I1.exports={makeCacheKey:See,normaliseHeaders:Tee,assertCacheKey:xee,assertCacheValue:Ree,parseCacheControlHeader:Dee,parseVaryHeader:Fee,isEtagUsable:kee,assertCacheMethods:vee,assertCacheStore:Nee}});var b1=w((sTe,Q1)=>{"use strict";var B1=["mon","tue","wed","thu","fri","sat","sun"],Pee=[4,7,11,16,25],OB=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Lee=[19,22],Uee=[3,7,10,19],Oee=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"];function Mee(e,t){switch(e=e.toLowerCase(),e[3]){case",":return _ee(e);case" ":return Gee(e);default:return jee(e,t)}}function _ee(e){if(e.length!==29||!e.endsWith("gmt"))return;for(let u of Pee)if(e[u]!==" ")return;for(let u of Lee)if(e[u]!==":")return;let t=e.substring(0,3);if(!B1.includes(t))return;let r=e.substring(5,7),o=Number.parseInt(r);if(isNaN(o)||o<10&&r[0]!=="0")return;let n=e.substring(8,11),i=OB.indexOf(n);if(i===-1)return;let s=Number.parseInt(e.substring(12,16));if(isNaN(s))return;let a=e.substring(17,19),l=Number.parseInt(a);if(isNaN(l)||l<10&&a[0]!=="0")return;let c=e.substring(20,22),A=Number.parseInt(c);if(isNaN(A)||A<10&&c[0]!=="0")return;let d=e.substring(23,25),f=Number.parseInt(d);if(!(isNaN(f)||f<10&&d[0]!=="0"))return new Date(Date.UTC(s,i,o,l,A,f))}function Gee(e){if(e.length!==24)return;for(let u of Uee)if(e[u]!==" ")return;let t=e.substring(0,3);if(!B1.includes(t))return;let r=e.substring(4,7),o=OB.indexOf(r);if(o===-1)return;let n=e.substring(8,10),i=Number.parseInt(n);if(isNaN(i)||i<10&&n[0]!==" ")return;let s=e.substring(11,13),a=Number.parseInt(s);if(isNaN(a)||a<10&&s[0]!=="0")return;let l=e.substring(14,16),c=Number.parseInt(l);if(isNaN(c)||c<10&&l[0]!=="0")return;let A=e.substring(17,19),d=Number.parseInt(A);if(isNaN(d)||d<10&&A[0]!=="0")return;let f=Number.parseInt(e.substring(20,24));if(!isNaN(f))return new Date(Date.UTC(f,o,i,a,c,d))}function jee(e,t=new Date){if(!e.endsWith("gmt"))return;let r=e.indexOf(",");if(r===-1||e.length-r-1!==23)return;let o=e.substring(0,r);if(!Oee.includes(o)||e[r+1]!==" "||e[r+4]!=="-"||e[r+8]!=="-"||e[r+11]!==" "||e[r+14]!==":"||e[r+17]!==":"||e[r+20]!==" ")return;let n=e.substring(r+2,r+4),i=Number.parseInt(n);if(isNaN(i)||i<10&&n[0]!=="0")return;let s=e.substring(r+5,r+8),a=OB.indexOf(s);if(a===-1)return;let l=Number.parseInt(e.substring(r+9,r+11));if(isNaN(l))return;let c=t.getUTCFullYear(),A=c%100,d=Math.floor(c/100);l>A&&l-A>=50?l+=(d-1)*100:l+=d*100;let f=e.substring(r+12,r+14),u=Number.parseInt(f);if(isNaN(u)||u<10&&f[0]!=="0")return;let p=e.substring(r+15,r+17),h=Number.parseInt(p);if(isNaN(h)||h<10&&p[0]!=="0")return;let g=e.substring(r+18,r+20),m=Number.parseInt(g);if(!(isNaN(m)||m<10&&g[0]!=="0"))return new Date(Date.UTC(l,a,i,u,h,m))}Q1.exports={parseHttpDate:Mee}});var T1=w((aTe,S1)=>{"use strict";var Hee=ue(),{parseCacheControlHeader:Vee,parseVaryHeader:qee,isEtagUsable:Yee}=ZA(),{parseHttpDate:w1}=b1();function Wee(){}var Jee=[200,203,204,206,300,301,308,404,405,410,414,501],zee=2147483647e3,MB=class{#e;#t;#r;#o;#i;#n;constructor({store:t,type:r,cacheByDefault:o},n,i){this.#o=t,this.#t=r,this.#r=o,this.#e=n,this.#i=i}onRequestStart(t,r){this.#n?.destroy(),this.#n=void 0,this.#i.onRequestStart?.(t,r)}onRequestUpgrade(t,r,o,n){this.#i.onRequestUpgrade?.(t,r,o,n)}onResponseStart(t,r,o,n){let i=()=>this.#i.onResponseStart?.(t,r,o,n);if(!Hee.safeHTTPMethods.includes(this.#e.method)&&r>=200&&r<=399){try{this.#o.delete(this.#e)?.catch?.(Wee)}catch{}return i()}let s=o["cache-control"],a=o["last-modified"]&&Jee.includes(r);if(!s&&!o.expires&&!a&&!this.#r)return i();let l=s?Vee(s):{};if(!$ee(this.#t,r,o,l))return i();let c=Date.now(),A=o.age?Kee(o.age):void 0;if(A&&A>=zee)return i();let d=typeof o.date=="string"?w1(o.date):void 0,f=Zee(this.#t,c,A,o,d,l)??this.#r;if(f===void 0||A&&A>f)return i();let u=d?d.getTime():c,p=f+u;if(c>=p)return i();let h;if(this.#e.headers&&o.vary&&(h=qee(o.vary,this.#e.headers),!h))return i();let g=Xee(u,l,p),m=ete(o,l),y={statusCode:r,statusMessage:n,headers:m,vary:h,cacheControlDirectives:l,cachedAt:A?c-A:c,staleAt:p,deleteAt:g};if(typeof o.etag=="string"&&Yee(o.etag)&&(y.etag=o.etag),this.#n=this.#o.createWriteStream(this.#e,y),!this.#n)return i();let E=this;return this.#n.on("drain",()=>t.resume()).on("error",function(){E.#n=void 0,E.#o.delete(E.#e)}).on("close",function(){E.#n===this&&(E.#n=void 0),t.resume()}),i()}onResponseData(t,r){this.#n?.write(r)===!1&&t.pause(),this.#i.onResponseData?.(t,r)}onResponseEnd(t,r){this.#n?.end(),this.#i.onResponseEnd?.(t,r)}onResponseError(t,r){this.#n?.destroy(r),this.#n=void 0,this.#i.onResponseError?.(t,r)}};function $ee(e,t,r,o){return!(t!==200&&t!==307||o["no-store"]||e==="shared"&&o.private===!0||r.vary?.includes("*")||r.authorization&&(!o.public||typeof r.authorization!="string"||Array.isArray(o["no-cache"])&&o["no-cache"].includes("authorization")||Array.isArray(o.private)&&o.private.includes("authorization")))}function Kee(e){let t=parseInt(Array.isArray(e)?e[0]:e);return isNaN(t)?void 0:t*1e3}function Zee(e,t,r,o,n,i){if(e==="shared"){let a=i["s-maxage"];if(a!==void 0)return a>0?a*1e3:void 0}let s=i["max-age"];if(s!==void 0)return s>0?s*1e3:void 0;if(typeof o.expires=="string"){let a=w1(o.expires);if(a)return t>=a.getTime()||n&&(n>=a||r!==void 0&&r>a-n)?void 0:a.getTime()-t}if(typeof o["last-modified"]=="string"){let a=new Date(o["last-modified"]);if(tte(a))return a.getTime()>=t?void 0:(t-a.getTime())*.1}if(i.immutable)return 31536e3}function Xee(e,t,r){let o=-1/0,n=-1/0,i=-1/0;return t["stale-while-revalidate"]&&(o=r+t["stale-while-revalidate"]*1e3),t["stale-if-error"]&&(n=r+t["stale-if-error"]*1e3),o===-1/0&&n===-1/0&&(i=e+31536e6),Math.max(r,o,n,i)}function ete(e,t){let r=["connection","proxy-authenticate","proxy-authentication-info","proxy-authorization","proxy-connection","te","transfer-encoding","upgrade","age"];e.connection&&(Array.isArray(e.connection)?r.push(...e.connection.map(n=>n.trim())):r.push(...e.connection.split(",").map(n=>n.trim()))),Array.isArray(t["no-cache"])&&r.push(...t["no-cache"]),Array.isArray(t.private)&&r.push(...t.private);let o;for(let n of r)e[n]&&(o??={...e},delete o[n]);return o??e}function tte(e){return e instanceof Date&&Number.isFinite(e.valueOf())}S1.exports=MB});var GB=w((lTe,D1)=>{"use strict";var{Writable:rte}=v("node:stream"),{EventEmitter:ote}=v("node:events"),{assertCacheKey:x1,assertCacheValue:nte}=ZA(),_B=class extends ote{#e=1/0;#t=1/0;#r=1/0;#o=0;#i=0;#n=new Map;#l=!1;constructor(t){if(super(),t){if(typeof t!="object")throw new TypeError("MemoryCacheStore options must be an object");if(t.maxCount!==void 0){if(typeof t.maxCount!="number"||!Number.isInteger(t.maxCount)||t.maxCount<0)throw new TypeError("MemoryCacheStore options.maxCount must be a non-negative integer");this.#e=t.maxCount}if(t.maxSize!==void 0){if(typeof t.maxSize!="number"||!Number.isInteger(t.maxSize)||t.maxSize<0)throw new TypeError("MemoryCacheStore options.maxSize must be a non-negative integer");this.#t=t.maxSize}if(t.maxEntrySize!==void 0){if(typeof t.maxEntrySize!="number"||!Number.isInteger(t.maxEntrySize)||t.maxEntrySize<0)throw new TypeError("MemoryCacheStore options.maxEntrySize must be a non-negative integer");this.#r=t.maxEntrySize}}}get size(){return this.#o}isFull(){return this.#o>=this.#t||this.#i>=this.#e}get(t){x1(t);let r=`${t.origin}:${t.path}`,o=Date.now(),n=this.#n.get(r),i=n?R1(t,n,o):null;return i==null?void 0:{statusMessage:i.statusMessage,statusCode:i.statusCode,headers:i.headers,body:i.body,vary:i.vary?i.vary:void 0,etag:i.etag,cacheControlDirectives:i.cacheControlDirectives,cachedAt:i.cachedAt,staleAt:i.staleAt,deleteAt:i.deleteAt}}createWriteStream(t,r){x1(t),nte(r);let o=`${t.origin}:${t.path}`,n=this,i={...t,...r,body:[],size:0};return new rte({write(s,a,l){typeof s=="string"&&(s=Buffer.from(s,a)),i.size+=s.byteLength,i.size>=n.#r?this.destroy():i.body.push(s),l(null)},final(s){let a=n.#n.get(o);a||(a=[],n.#n.set(o,a));let l=R1(t,a,Date.now());if(l){let c=a.indexOf(l);a.splice(c,1,i),n.#o-=l.size}else a.push(i),n.#i+=1;if(n.#o+=i.size,n.#o>n.#t||n.#i>n.#e){n.#l||(n.emit("maxSizeExceeded",{size:n.#o,maxSize:n.#t,count:n.#i,maxCount:n.#e}),n.#l=!0);for(let[c,A]of n.#n){for(let d of A.splice(0,A.length/2))n.#o-=d.size,n.#i-=1;A.length===0&&n.#n.delete(c)}n.#o<n.#t&&n.#i<n.#e&&(n.#l=!1)}s(null)}})}delete(t){if(typeof t!="object")throw new TypeError(`expected key to be object, got ${typeof t}`);let r=`${t.origin}:${t.path}`;for(let o of this.#n.get(r)??[])this.#o-=o.size,this.#i-=1;this.#n.delete(r)}};function R1(e,t,r){return t.find(o=>o.deleteAt>r&&o.method===e.method&&(o.vary==null||Object.keys(o.vary).every(n=>o.vary[n]===null?e.headers[n]===void 0:o.vary[n]===e.headers[n])))}D1.exports=_B});var k1=w((cTe,F1)=>{"use strict";var ite=v("node:assert"),jB=class{#e=!1;#t;#r;#o;#i;constructor(t,r,o){if(typeof t!="function")throw new TypeError("callback must be a function");this.#t=t,this.#r=r,this.#i=o}onRequestStart(t,r){this.#e=!1,this.#o=r}onRequestUpgrade(t,r,o,n){this.#r.onRequestUpgrade?.(t,r,o,n)}onResponseStart(t,r,o,n){if(ite(this.#t!=null),this.#e=r===304||this.#i&&r>=500&&r<=504,this.#t(this.#e,this.#o),this.#t=null,this.#e)return!0;this.#r.onRequestStart?.(t,this.#o),this.#r.onResponseStart?.(t,r,o,n)}onResponseData(t,r){if(!this.#e)return this.#r.onResponseData?.(t,r)}onResponseEnd(t,r){this.#e||this.#r.onResponseEnd?.(t,r)}onResponseError(t,r){if(!this.#e)if(this.#t&&(this.#t(!1),this.#t=null),typeof this.#r.onResponseError=="function")this.#r.onResponseError(t,r);else throw r}};F1.exports=jB});var U1=w((ATe,L1)=>{"use strict";var N1=v("node:assert"),{Readable:ste}=v("node:stream"),wl=ue(),Vp=T1(),ate=GB(),lte=k1(),{assertCacheStore:cte,assertCacheMethods:Ate,makeCacheKey:ute,normaliseHeaders:dte,parseCacheControlHeader:fte}=ZA(),{AbortError:pte}=Ee();function hte(e,t){if(t?.["no-cache"]||e.cacheControlDirectives?.["no-cache"]&&!Array.isArray(e.cacheControlDirectives["no-cache"]))return!0;let r=Date.now();if(r>e.staleAt){if(t?.["max-stale"]){let o=e.staleAt+t["max-stale"]*1e3;return r>o}return!0}if(t?.["min-fresh"]){let o=e.staleAt-r,n=t["min-fresh"]*1e3;return o<=n}return!1}function gte(e,t,r,o,n,i){if(i?.["only-if-cached"]){let s=!1;try{if(typeof o.onConnect=="function"&&(o.onConnect(()=>{s=!0}),s)||typeof o.onHeaders=="function"&&(o.onHeaders(504,[],()=>{},"Gateway Timeout"),s))return;typeof o.onComplete=="function"&&o.onComplete([])}catch(a){typeof o.onError=="function"&&o.onError(a)}return!0}return e(n,new Vp(t,r,o))}function v1(e,t,r,o,n,i){let s=wl.isStream(r.body)?r.body:ste.from(r.body??[]);N1(!s.destroyed,"stream should not be destroyed"),N1(!s.readableDidRead,"stream should not be readableDidRead");let a={resume(){s.resume()},pause(){s.pause()},get paused(){return s.isPaused()},get aborted(){return s.destroyed},get reason(){return s.errored},abort(c){s.destroy(c??new pte)}};if(s.on("error",function(c){if(!this.readableEnded)if(typeof e.onResponseError=="function")e.onResponseError(a,c);else throw c}).on("close",function(){this.errored||e.onResponseEnd?.(a,{})}),e.onRequestStart?.(a,n),s.destroyed)return;let l={...r.headers,age:String(o)};i&&(l.warning='110 - "response is stale"'),e.onResponseStart?.(a,r.statusCode,l,r.statusMessage),t.method==="HEAD"?s.destroy():s.on("data",function(c){e.onResponseData?.(a,c)})}function P1(e,t,r,o,n,i,s){if(!s)return gte(e,t,r,o,n,i);let a=Date.now();if(a>s.deleteAt)return e(n,new Vp(t,r,o));let l=Math.round((a-s.cachedAt)/1e3);if(i?.["max-age"]&&l>=i["max-age"])return e(n,o);if(hte(s,i)){if(wl.isStream(n.body)&&wl.bodyLength(n.body)!==0)return e(n,new Vp(t,r,o));let c=!1,A=s.cacheControlDirectives["stale-if-error"]??i?.["stale-if-error"];A&&(c=a<s.staleAt+A*1e3);let d={...n.headers,"if-modified-since":new Date(s.cachedAt).toUTCString()};return s.etag&&(d["if-none-match"]=s.etag),s.vary&&(d={...d,...s.vary}),e({...n,headers:d},new lte((f,u)=>{f?v1(o,n,s,l,u,!0):wl.isStream(s.body)&&s.body.on("error",()=>{}).destroy()},new Vp(t,r,o),c))}wl.isStream(n.body)&&n.body.on("error",()=>{}).destroy(),v1(o,n,s,l,null,!1)}L1.exports=(e={})=>{let{store:t=new ate,methods:r=["GET"],cacheByDefault:o=void 0,type:n="shared"}=e;if(typeof e!="object"||e===null)throw new TypeError(`expected type of opts to be an Object, got ${e===null?"null":typeof e}`);if(cte(t,"opts.store"),Ate(r,"opts.methods"),typeof o<"u"&&typeof o!="number")throw new TypeError(`exepcted opts.cacheByDefault to be number or undefined, got ${typeof o}`);if(typeof n<"u"&&n!=="shared"&&n!=="private")throw new TypeError(`exepcted opts.type to be shared, private, or undefined, got ${typeof n}`);let i={store:t,methods:r,cacheByDefault:o,type:n},s=wl.safeHTTPMethods.filter(a=>r.includes(a)===!1);return a=>(l,c)=>{if(!l.origin||s.includes(l.method))return a(l,c);l={...l,headers:dte(l)};let A=l.headers?.["cache-control"]?fte(l.headers["cache-control"]):void 0;if(A?.["no-store"])return a(l,c);let d=ute(l),f=t.get(d);return f&&typeof f.then=="function"?f.then(u=>{P1(a,i,d,c,l,A,u)}):P1(a,i,d,c,l,A,f),!0}}});var _1=w((dTe,M1)=>{"use strict";var{Writable:mte}=v("stream"),{assertCacheKey:HB,assertCacheValue:yte}=ZA(),VB,Rr=3,O1=2*1e3*1e3*1e3;M1.exports=class{#e=O1;#t=1/0;#r;#o;#i;#n;#l;#s;#a;#c;constructor(t){if(t){if(typeof t!="object")throw new TypeError("SqliteCacheStore options must be an object");if(t.maxEntrySize!==void 0){if(typeof t.maxEntrySize!="number"||!Number.isInteger(t.maxEntrySize)||t.maxEntrySize<0)throw new TypeError("SqliteCacheStore options.maxEntrySize must be a non-negative integer");if(t.maxEntrySize>O1)throw new TypeError("SqliteCacheStore options.maxEntrySize must be less than 2gb");this.#e=t.maxEntrySize}if(t.maxCount!==void 0){if(typeof t.maxCount!="number"||!Number.isInteger(t.maxCount)||t.maxCount<0)throw new TypeError("SqliteCacheStore options.maxCount must be a non-negative integer");this.#t=t.maxCount}}VB||(VB=v("node:sqlite").DatabaseSync),this.#r=new VB(t?.location??":memory:"),this.#r.exec(`
      PRAGMA journal_mode = WAL;
      PRAGMA synchronous = NORMAL;
      PRAGMA temp_store = memory;
      PRAGMA optimize;

      CREATE TABLE IF NOT EXISTS cacheInterceptorV${Rr} (
        -- Data specific to us
        id INTEGER PRIMARY KEY AUTOINCREMENT,
        url TEXT NOT NULL,
        method TEXT NOT NULL,

        -- Data returned to the interceptor
        body BUF NULL,
        deleteAt INTEGER NOT NULL,
        statusCode INTEGER NOT NULL,
        statusMessage TEXT NOT NULL,
        headers TEXT NULL,
        cacheControlDirectives TEXT NULL,
        etag TEXT NULL,
        vary TEXT NULL,
        cachedAt INTEGER NOT NULL,
        staleAt INTEGER NOT NULL
      );

      CREATE INDEX IF NOT EXISTS idx_cacheInterceptorV${Rr}_getValuesQuery ON cacheInterceptorV${Rr}(url, method, deleteAt);
      CREATE INDEX IF NOT EXISTS idx_cacheInterceptorV${Rr}_deleteByUrlQuery ON cacheInterceptorV${Rr}(deleteAt);
    `),this.#o=this.#r.prepare(`
      SELECT
        id,
        body,
        deleteAt,
        statusCode,
        statusMessage,
        headers,
        etag,
        cacheControlDirectives,
        vary,
        cachedAt,
        staleAt
      FROM cacheInterceptorV${Rr}
      WHERE
        url = ?
        AND method = ?
      ORDER BY
        deleteAt ASC
    `),this.#i=this.#r.prepare(`
      UPDATE cacheInterceptorV${Rr} SET
        body = ?,
        deleteAt = ?,
        statusCode = ?,
        statusMessage = ?,
        headers = ?,
        etag = ?,
        cacheControlDirectives = ?,
        cachedAt = ?,
        staleAt = ?
      WHERE
        id = ?
    `),this.#n=this.#r.prepare(`
      INSERT INTO cacheInterceptorV${Rr} (
        url,
        method,
        body,
        deleteAt,
        statusCode,
        statusMessage,
        headers,
        etag,
        cacheControlDirectives,
        vary,
        cachedAt,
        staleAt
      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `),this.#s=this.#r.prepare(`DELETE FROM cacheInterceptorV${Rr} WHERE url = ?`),this.#a=this.#r.prepare(`SELECT COUNT(*) AS total FROM cacheInterceptorV${Rr}`),this.#l=this.#r.prepare(`DELETE FROM cacheInterceptorV${Rr} WHERE deleteAt <= ?`),this.#c=this.#t===1/0?null:this.#r.prepare(`
        DELETE FROM cacheInterceptorV${Rr}
        WHERE id IN (
          SELECT
            id
          FROM cacheInterceptorV${Rr}
          ORDER BY cachedAt DESC
          LIMIT ?
        )
      `)}close(){this.#r.close()}get(t){HB(t);let r=this.#u(t);return r?{body:r.body?Buffer.from(r.body.buffer,r.body.byteOffset,r.body.byteLength):void 0,statusCode:r.statusCode,statusMessage:r.statusMessage,headers:r.headers?JSON.parse(r.headers):void 0,etag:r.etag?r.etag:void 0,vary:r.vary?JSON.parse(r.vary):void 0,cacheControlDirectives:r.cacheControlDirectives?JSON.parse(r.cacheControlDirectives):void 0,cachedAt:r.cachedAt,staleAt:r.staleAt,deleteAt:r.deleteAt}:void 0}set(t,r){HB(t);let o=this.#A(t),n=Array.isArray(r.body)?Buffer.concat(r.body):r.body,i=n?.byteLength;if(i&&i>this.#e)return;let s=this.#u(t,!0);s?this.#i.run(n,r.deleteAt,r.statusCode,r.statusMessage,r.headers?JSON.stringify(r.headers):null,r.etag?r.etag:null,r.cacheControlDirectives?JSON.stringify(r.cacheControlDirectives):null,r.cachedAt,r.staleAt,s.id):(this.#d(),this.#n.run(o,t.method,n,r.deleteAt,r.statusCode,r.statusMessage,r.headers?JSON.stringify(r.headers):null,r.etag?r.etag:null,r.cacheControlDirectives?JSON.stringify(r.cacheControlDirectives):null,r.vary?JSON.stringify(r.vary):null,r.cachedAt,r.staleAt))}createWriteStream(t,r){HB(t),yte(r);let o=0,n=[],i=this;return new mte({decodeStrings:!0,write(s,a,l){o+=s.byteLength,o<i.#e?n.push(s):this.destroy(),l()},final(s){i.set(t,{...r,body:n}),s()}})}delete(t){if(typeof t!="object")throw new TypeError(`expected key to be object, got ${typeof t}`);this.#s.run(this.#A(t))}#d(){if(Number.isFinite(this.#t)&&this.size<=this.#t)return 0;{let t=this.#l.run(Date.now()).changes;if(t)return t}{let t=this.#c?.run(Math.max(Math.floor(this.#t*.1),1)).changes;if(t)return t}return 0}get size(){let{total:t}=this.#a.get();return t}#A(t){return`${t.origin}/${t.path}`}#u(t,r=!1){let o=this.#A(t),{headers:n,method:i}=t,s=this.#o.all(o,i);if(s.length===0)return;let a=Date.now();for(let l of s){if(a>=l.deleteAt&&!r)return;let c=!0;if(l.vary){let A=JSON.parse(l.vary);for(let d in A)if(!Ete(n[d],A[d])){c=!1;break}}if(c)return l}}};function Ete(e,t){return e==null&&t==null?!0:e==null&&t!=null||e!=null&&t==null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:e.every((r,o)=>r===t[o]):e===t}});var Gs=w((fTe,W1)=>{"use strict";var{kConstruct:Cte}=Me(),{kEnumerableProperty:Sl}=ue(),{iteratorMixin:Ite,isValidHeaderName:XA,isValidHeaderValue:j1}=$t(),{webidl:Qe}=kt(),qB=v("node:assert"),qp=v("node:util");function G1(e){return e===10||e===13||e===9||e===32}function H1(e){let t=0,r=e.length;for(;r>t&&G1(e.charCodeAt(r-1));)--r;for(;r>t&&G1(e.charCodeAt(t));)++t;return t===0&&r===e.length?e:e.substring(t,r)}function V1(e,t){if(Array.isArray(t))for(let r=0;r<t.length;++r){let o=t[r];if(o.length!==2)throw Qe.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${o.length}.`});YB(e,o[0],o[1])}else if(typeof t=="object"&&t!==null){let r=Object.keys(t);for(let o=0;o<r.length;++o)YB(e,r[o],t[r[o]])}else throw Qe.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}function YB(e,t,r){if(r=H1(r),XA(t)){if(!j1(r))throw Qe.errors.invalidArgument({prefix:"Headers.append",value:r,type:"header value"})}else throw Qe.errors.invalidArgument({prefix:"Headers.append",value:t,type:"header name"});if(Y1(e)==="immutable")throw new TypeError("immutable");return Wp(e).append(t,r,!1)}function Bte(e){let t=Wp(e);if(!t)return[];if(t.sortedMap)return t.sortedMap;let r=[],o=t.toSortedArray(),n=t.cookies;if(n===null||n.length===1)return t.sortedMap=o;for(let i=0;i<o.length;++i){let{0:s,1:a}=o[i];if(s==="set-cookie")for(let l=0;l<n.length;++l)r.push([s,n[l]]);else r.push([s,a])}return t.sortedMap=r}function q1(e,t){return e[0]<t[0]?-1:1}var Yp=class e{cookies=null;sortedMap;headersMap;constructor(t){t instanceof e?(this.headersMap=new Map(t.headersMap),this.sortedMap=t.sortedMap,this.cookies=t.cookies===null?null:[...t.cookies]):(this.headersMap=new Map(t),this.sortedMap=null)}contains(t,r){return this.headersMap.has(r?t:t.toLowerCase())}clear(){this.headersMap.clear(),this.sortedMap=null,this.cookies=null}append(t,r,o){this.sortedMap=null;let n=o?t:t.toLowerCase(),i=this.headersMap.get(n);if(i){let s=n==="cookie"?"; ":", ";this.headersMap.set(n,{name:i.name,value:`${i.value}${s}${r}`})}else this.headersMap.set(n,{name:t,value:r});n==="set-cookie"&&(this.cookies??=[]).push(r)}set(t,r,o){this.sortedMap=null;let n=o?t:t.toLowerCase();n==="set-cookie"&&(this.cookies=[r]),this.headersMap.set(n,{name:t,value:r})}delete(t,r){this.sortedMap=null,r||(t=t.toLowerCase()),t==="set-cookie"&&(this.cookies=null),this.headersMap.delete(t)}get(t,r){return this.headersMap.get(r?t:t.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:t,1:{value:r}}of this.headersMap)yield[t,r]}get entries(){let t={};if(this.headersMap.size!==0)for(let{name:r,value:o}of this.headersMap.values())t[r]=o;return t}rawValues(){return this.headersMap.values()}get entriesList(){let t=[];if(this.headersMap.size!==0)for(let{0:r,1:{name:o,value:n}}of this.headersMap)if(r==="set-cookie")for(let i of this.cookies)t.push([o,i]);else t.push([o,n]);return t}toSortedArray(){let t=this.headersMap.size,r=new Array(t);if(t<=32){if(t===0)return r;let o=this.headersMap[Symbol.iterator](),n=o.next().value;r[0]=[n[0],n[1].value],qB(n[1].value!==null);for(let i=1,s=0,a=0,l=0,c=0,A,d;i<t;++i){for(d=o.next().value,A=r[i]=[d[0],d[1].value],qB(A[1]!==null),l=0,a=i;l<a;)c=l+(a-l>>1),r[c][0]<=A[0]?l=c+1:a=c;if(i!==c){for(s=i;s>l;)r[s]=r[--s];r[l]=A}}if(!o.next().done)throw new TypeError("Unreachable");return r}else{let o=0;for(let{0:n,1:{value:i}}of this.headersMap)r[o++]=[n,i],qB(i!==null);return r.sort(q1)}}},Bo=class e{#e;#t;constructor(t=void 0){Qe.util.markAsUncloneable(this),t!==Cte&&(this.#t=new Yp,this.#e="none",t!==void 0&&(t=Qe.converters.HeadersInit(t,"Headers constructor","init"),V1(this,t)))}append(t,r){Qe.brandCheck(this,e),Qe.argumentLengthCheck(arguments,2,"Headers.append");let o="Headers.append";return t=Qe.converters.ByteString(t,o,"name"),r=Qe.converters.ByteString(r,o,"value"),YB(this,t,r)}delete(t){if(Qe.brandCheck(this,e),Qe.argumentLengthCheck(arguments,1,"Headers.delete"),t=Qe.converters.ByteString(t,"Headers.delete","name"),!XA(t))throw Qe.errors.invalidArgument({prefix:"Headers.delete",value:t,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(t,!1)&&this.#t.delete(t,!1)}get(t){Qe.brandCheck(this,e),Qe.argumentLengthCheck(arguments,1,"Headers.get");let r="Headers.get";if(t=Qe.converters.ByteString(t,r,"name"),!XA(t))throw Qe.errors.invalidArgument({prefix:r,value:t,type:"header name"});return this.#t.get(t,!1)}has(t){Qe.brandCheck(this,e),Qe.argumentLengthCheck(arguments,1,"Headers.has");let r="Headers.has";if(t=Qe.converters.ByteString(t,r,"name"),!XA(t))throw Qe.errors.invalidArgument({prefix:r,value:t,type:"header name"});return this.#t.contains(t,!1)}set(t,r){Qe.brandCheck(this,e),Qe.argumentLengthCheck(arguments,2,"Headers.set");let o="Headers.set";if(t=Qe.converters.ByteString(t,o,"name"),r=Qe.converters.ByteString(r,o,"value"),r=H1(r),XA(t)){if(!j1(r))throw Qe.errors.invalidArgument({prefix:o,value:r,type:"header value"})}else throw Qe.errors.invalidArgument({prefix:o,value:t,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(t,r,!1)}getSetCookie(){Qe.brandCheck(this,e);let t=this.#t.cookies;return t?[...t]:[]}[qp.inspect.custom](t,r){return r.depth??=t,`Headers ${qp.formatWithOptions(r,this.#t.entries)}`}static getHeadersGuard(t){return t.#e}static setHeadersGuard(t,r){t.#e=r}static getHeadersList(t){return t.#t}static setHeadersList(t,r){t.#t=r}},{getHeadersGuard:Y1,setHeadersGuard:Qte,getHeadersList:Wp,setHeadersList:bte}=Bo;Reflect.deleteProperty(Bo,"getHeadersGuard");Reflect.deleteProperty(Bo,"setHeadersGuard");Reflect.deleteProperty(Bo,"getHeadersList");Reflect.deleteProperty(Bo,"setHeadersList");Ite("Headers",Bo,Bte,0,1);Object.defineProperties(Bo.prototype,{append:Sl,delete:Sl,get:Sl,has:Sl,set:Sl,getSetCookie:Sl,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[qp.inspect.custom]:{enumerable:!1}});Qe.converters.HeadersInit=function(e,t,r){if(Qe.util.Type(e)===Qe.util.Types.OBJECT){let o=Reflect.get(e,Symbol.iterator);if(!qp.types.isProxy(e)&&o===Bo.prototype.entries)try{return Wp(e).entriesList}catch{}return typeof o=="function"?Qe.converters["sequence<sequence<ByteString>>"](e,t,r,o.bind(e)):Qe.converters["record<ByteString, ByteString>"](e,t,r)}throw Qe.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};W1.exports={fill:V1,compareHeaderName:q1,Headers:Bo,HeadersList:Yp,getHeadersGuard:Y1,setHeadersGuard:Qte,setHeadersList:bte,getHeadersList:Wp}});var tu=w((pTe,nL)=>{"use strict";var{Headers:X1,HeadersList:J1,fill:wte,getHeadersGuard:Ste,setHeadersGuard:eL,setHeadersList:tL}=Gs(),{extractBody:z1,cloneBody:Tte,mixinBody:xte,hasFinalizationRegistry:Rte,streamRegistry:Dte,bodyUnusable:Fte}=al(),rL=ue(),$1=v("node:util"),{kEnumerableProperty:Dr}=rL,{isValidReasonPhrase:kte,isCancelled:Nte,isAborted:vte,serializeJavascriptValueToJSONString:Pte,isErrorLike:Lte,isomorphicEncode:Ute,environmentSettingsObject:Ote}=$t(),{redirectStatusSet:Mte,nullBodyStatus:_te}=QA(),{webidl:Ce}=kt(),{URLSerializer:K1}=Sr(),{kConstruct:zp}=Me(),WB=v("node:assert"),{types:Gte}=v("node:util"),jte=new TextEncoder("utf-8"),Fr=class e{#e;#t;static error(){return eu($p(),"immutable")}static json(t,r=void 0){Ce.argumentLengthCheck(arguments,1,"Response.json"),r!==null&&(r=Ce.converters.ResponseInit(r));let o=jte.encode(Pte(t)),n=z1(o),i=eu(Tl({}),"response");return Z1(i,r,{body:n[0],type:"application/json"}),i}static redirect(t,r=302){Ce.argumentLengthCheck(arguments,1,"Response.redirect"),t=Ce.converters.USVString(t),r=Ce.converters["unsigned short"](r);let o;try{o=new URL(t,Ote.settingsObject.baseUrl)}catch(s){throw new TypeError(`Failed to parse URL from ${t}`,{cause:s})}if(!Mte.has(r))throw new RangeError(`Invalid status code ${r}`);let n=eu(Tl({}),"immutable");n.#t.status=r;let i=Ute(K1(o));return n.#t.headersList.append("location",i,!0),n}constructor(t=null,r=void 0){if(Ce.util.markAsUncloneable(this),t===zp)return;t!==null&&(t=Ce.converters.BodyInit(t)),r=Ce.converters.ResponseInit(r),this.#t=Tl({}),this.#e=new X1(zp),eL(this.#e,"response"),tL(this.#e,this.#t.headersList);let o=null;if(t!=null){let[n,i]=z1(t);o={body:n,type:i}}Z1(this,r,o)}get type(){return Ce.brandCheck(this,e),this.#t.type}get url(){Ce.brandCheck(this,e);let t=this.#t.urlList,r=t[t.length-1]??null;return r===null?"":K1(r,!0)}get redirected(){return Ce.brandCheck(this,e),this.#t.urlList.length>1}get status(){return Ce.brandCheck(this,e),this.#t.status}get ok(){return Ce.brandCheck(this,e),this.#t.status>=200&&this.#t.status<=299}get statusText(){return Ce.brandCheck(this,e),this.#t.statusText}get headers(){return Ce.brandCheck(this,e),this.#e}get body(){return Ce.brandCheck(this,e),this.#t.body?this.#t.body.stream:null}get bodyUsed(){return Ce.brandCheck(this,e),!!this.#t.body&&rL.isDisturbed(this.#t.body.stream)}clone(){if(Ce.brandCheck(this,e),Fte(this.#t))throw Ce.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let t=JB(this.#t);return eu(t,Ste(this.#e))}[$1.inspect.custom](t,r){r.depth===null&&(r.depth=2),r.colors??=!0;let o={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${$1.formatWithOptions(r,o)}`}static getResponseHeaders(t){return t.#e}static setResponseHeaders(t,r){t.#e=r}static getResponseState(t){return t.#t}static setResponseState(t,r){t.#t=r}},{getResponseHeaders:Hte,setResponseHeaders:Vte,getResponseState:js,setResponseState:qte}=Fr;Reflect.deleteProperty(Fr,"getResponseHeaders");Reflect.deleteProperty(Fr,"setResponseHeaders");Reflect.deleteProperty(Fr,"getResponseState");Reflect.deleteProperty(Fr,"setResponseState");xte(Fr,js);Object.defineProperties(Fr.prototype,{type:Dr,url:Dr,status:Dr,ok:Dr,redirected:Dr,statusText:Dr,headers:Dr,clone:Dr,body:Dr,bodyUsed:Dr,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(Fr,{json:Dr,redirect:Dr,error:Dr});function JB(e){if(e.internalResponse)return oL(JB(e.internalResponse),e.type);let t=Tl({...e,body:null});return e.body!=null&&(t.body=Tte(t,e.body)),t}function Tl(e){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...e,headersList:e?.headersList?new J1(e?.headersList):new J1,urlList:e?.urlList?[...e.urlList]:[]}}function $p(e){let t=Lte(e);return Tl({type:"error",status:0,error:t?e:new Error(e&&String(e)),aborted:e&&e.name==="AbortError"})}function Yte(e){return e.type==="error"&&e.status===0}function Jp(e,t){return t={internalResponse:e,...t},new Proxy(e,{get(r,o){return o in t?t[o]:r[o]},set(r,o,n){return WB(!(o in t)),r[o]=n,!0}})}function oL(e,t){if(t==="basic")return Jp(e,{type:"basic",headersList:e.headersList});if(t==="cors")return Jp(e,{type:"cors",headersList:e.headersList});if(t==="opaque")return Jp(e,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(t==="opaqueredirect")return Jp(e,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});WB(!1)}function Wte(e,t=null){return WB(Nte(e)),vte(e)?$p(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:t})):$p(Object.assign(new DOMException("Request was cancelled."),{cause:t}))}function Z1(e,t,r){if(t.status!==null&&(t.status<200||t.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in t&&t.statusText!=null&&!kte(String(t.statusText)))throw new TypeError("Invalid statusText");if("status"in t&&t.status!=null&&(js(e).status=t.status),"statusText"in t&&t.statusText!=null&&(js(e).statusText=t.statusText),"headers"in t&&t.headers!=null&&wte(Hte(e),t.headers),r){if(_te.includes(e.status))throw Ce.errors.exception({header:"Response constructor",message:`Invalid response status code ${e.status}`});js(e).body=r.body,r.type!=null&&!js(e).headersList.contains("content-type",!0)&&js(e).headersList.append("content-type",r.type,!0)}}function eu(e,t){let r=new Fr(zp);qte(r,e);let o=new X1(zp);return Vte(r,o),tL(o,e.headersList),eL(o,t),Rte&&e.body?.stream&&Dte.register(r,new WeakRef(e.body.stream)),r}Ce.converters.XMLHttpRequestBodyInit=function(e,t,r){return typeof e=="string"?Ce.converters.USVString(e,t,r):Ce.is.Blob(e)||ArrayBuffer.isView(e)||Gte.isArrayBuffer(e)||Ce.is.FormData(e)||Ce.is.URLSearchParams(e)?e:Ce.converters.DOMString(e,t,r)};Ce.converters.BodyInit=function(e,t,r){return Ce.is.ReadableStream(e)||e?.[Symbol.asyncIterator]?e:Ce.converters.XMLHttpRequestBodyInit(e,t,r)};Ce.converters.ResponseInit=Ce.dictionaryConverter([{key:"status",converter:Ce.converters["unsigned short"],defaultValue:()=>200},{key:"statusText",converter:Ce.converters.ByteString,defaultValue:()=>""},{key:"headers",converter:Ce.converters.HeadersInit}]);Ce.is.Response=Ce.util.MakeTypeAssertion(Fr);nL.exports={isNetworkError:Yte,makeNetworkError:$p,makeResponse:Tl,makeAppropriateNetworkError:Wte,filterResponse:oL,Response:Fr,cloneResponse:JB,fromInnerResponse:eu,getResponseState:js}});var lL=w((hTe,aL)=>{"use strict";var{kConnected:iL,kSize:sL}=Me(),zB=class{constructor(t){this.value=t}deref(){return this.value[iL]===0&&this.value[sL]===0?void 0:this.value}},$B=class{constructor(t){this.finalizer=t}register(t,r){t.on&&t.on("disconnect",()=>{t[iL]===0&&t[sL]===0&&this.finalizer(r)})}unregister(t){}};aL.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:zB,FinalizationRegistry:$B}):{WeakRef,FinalizationRegistry}}});var xl=w((gTe,BL)=>{"use strict";var{extractBody:Jte,mixinBody:zte,cloneBody:$te,bodyUnusable:cL}=al(),{Headers:hL,fill:Kte,HeadersList:Xp,setHeadersGuard:KB,getHeadersGuard:Zte,setHeadersList:gL,getHeadersList:AL}=Gs(),{FinalizationRegistry:Xte}=lL()(),Zp=ue(),uL=v("node:util"),{isValidHTTPToken:ere,sameOrigin:dL,environmentSettingsObject:Kp}=$t(),{forbiddenMethodsSet:tre,corsSafeListedMethodsSet:rre,referrerPolicy:ore,requestRedirect:nre,requestMode:ire,requestCredentials:sre,requestCache:are,requestDuplex:lre}=QA(),{kEnumerableProperty:pt,normalizedMethodRecordsBase:cre,normalizedMethodRecords:Are}=Zp,{webidl:re}=kt(),{URLSerializer:ure}=Sr(),{kConstruct:eh}=Me(),dre=v("node:assert"),{getMaxListeners:mL,setMaxListeners:fre,defaultMaxListeners:pre}=v("node:events"),hre=Symbol("abortController"),yL=new Xte(({signal:e,abort:t})=>{e.removeEventListener("abort",t)}),th=new WeakMap,ZB;try{ZB=mL(new AbortController().signal)>0}catch{ZB=!1}function fL(e){return t;function t(){let r=e.deref();if(r!==void 0){yL.unregister(t),this.removeEventListener("abort",t),r.abort(this.reason);let o=th.get(r.signal);if(o!==void 0){if(o.size!==0){for(let n of o){let i=n.deref();i!==void 0&&i.abort(this.reason)}o.clear()}th.delete(r.signal)}}}}var pL=!1,ar=class e{#e;#t;#r;#o;constructor(t,r=void 0){if(re.util.markAsUncloneable(this),t===eh)return;let o="Request constructor";re.argumentLengthCheck(arguments,1,o),t=re.converters.RequestInfo(t,o,"input"),r=re.converters.RequestInit(r,o,"init");let n=null,i=null,s=Kp.settingsObject.baseUrl,a=null;if(typeof t=="string"){this.#t=r.dispatcher;let m;try{m=new URL(t,s)}catch(y){throw new TypeError("Failed to parse URL from "+t,{cause:y})}if(m.username||m.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+t);n=rh({urlList:[m]}),i="cors"}else dre(re.is.Request(t)),n=t.#o,a=t.#e,this.#t=r.dispatcher||t.#t;let l=Kp.settingsObject.origin,c="client";if(n.window?.constructor?.name==="EnvironmentSettingsObject"&&dL(n.window,l)&&(c=n.window),r.window!=null)throw new TypeError(`'window' option '${c}' must be null`);"window"in r&&(c="no-window"),n=rh({method:n.method,headersList:n.headersList,unsafeRequest:n.unsafeRequest,client:Kp.settingsObject,window:c,priority:n.priority,origin:n.origin,referrer:n.referrer,referrerPolicy:n.referrerPolicy,mode:n.mode,credentials:n.credentials,cache:n.cache,redirect:n.redirect,integrity:n.integrity,keepalive:n.keepalive,reloadNavigation:n.reloadNavigation,historyNavigation:n.historyNavigation,urlList:[...n.urlList]});let A=Object.keys(r).length!==0;if(A&&(n.mode==="navigate"&&(n.mode="same-origin"),n.reloadNavigation=!1,n.historyNavigation=!1,n.origin="client",n.referrer="client",n.referrerPolicy="",n.url=n.urlList[n.urlList.length-1],n.urlList=[n.url]),r.referrer!==void 0){let m=r.referrer;if(m==="")n.referrer="no-referrer";else{let y;try{y=new URL(m,s)}catch(E){throw new TypeError(`Referrer "${m}" is not a valid URL.`,{cause:E})}y.protocol==="about:"&&y.hostname==="client"||l&&!dL(y,Kp.settingsObject.baseUrl)?n.referrer="client":n.referrer=y}}r.referrerPolicy!==void 0&&(n.referrerPolicy=r.referrerPolicy);let d;if(r.mode!==void 0?d=r.mode:d=i,d==="navigate")throw re.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(d!=null&&(n.mode=d),r.credentials!==void 0&&(n.credentials=r.credentials),r.cache!==void 0&&(n.cache=r.cache),n.cache==="only-if-cached"&&n.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(r.redirect!==void 0&&(n.redirect=r.redirect),r.integrity!=null&&(n.integrity=String(r.integrity)),r.keepalive!==void 0&&(n.keepalive=!!r.keepalive),r.method!==void 0){let m=r.method,y=Are[m];if(y!==void 0)n.method=y;else{if(!ere(m))throw new TypeError(`'${m}' is not a valid HTTP method.`);let E=m.toUpperCase();if(tre.has(E))throw new TypeError(`'${m}' HTTP method is unsupported.`);m=cre[E]??m,n.method=m}!pL&&n.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),pL=!0)}r.signal!==void 0&&(a=r.signal),this.#o=n;let f=new AbortController;if(this.#e=f.signal,a!=null)if(a.aborted)f.abort(a.reason);else{this[hre]=f;let m=new WeakRef(f),y=fL(m);ZB&&mL(a)===pre&&fre(1500,a),Zp.addAbortListener(a,y),yL.register(f,{signal:a,abort:y},y)}if(this.#r=new hL(eh),gL(this.#r,n.headersList),KB(this.#r,"request"),d==="no-cors"){if(!rre.has(n.method))throw new TypeError(`'${n.method} is unsupported in no-cors mode.`);KB(this.#r,"request-no-cors")}if(A){let m=AL(this.#r),y=r.headers!==void 0?r.headers:new Xp(m);if(m.clear(),y instanceof Xp){for(let{name:E,value:I}of y.rawValues())m.append(E,I,!1);m.cookies=y.cookies}else Kte(this.#r,y)}let u=re.is.Request(t)?t.#o.body:null;if((r.body!=null||u!=null)&&(n.method==="GET"||n.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let p=null;if(r.body!=null){let[m,y]=Jte(r.body,n.keepalive);p=m,y&&!AL(this.#r).contains("content-type",!0)&&this.#r.append("content-type",y,!0)}let h=p??u;if(h!=null&&h.source==null){if(p!=null&&r.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(n.mode!=="same-origin"&&n.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');n.useCORSPreflightFlag=!0}let g=h;if(p==null&&u!=null){if(cL(t.#o))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let m=new TransformStream;u.stream.pipeThrough(m),g={source:u.source,length:u.length,stream:m.readable}}this.#o.body=g}get method(){return re.brandCheck(this,e),this.#o.method}get url(){return re.brandCheck(this,e),ure(this.#o.url)}get headers(){return re.brandCheck(this,e),this.#r}get destination(){return re.brandCheck(this,e),this.#o.destination}get referrer(){return re.brandCheck(this,e),this.#o.referrer==="no-referrer"?"":this.#o.referrer==="client"?"about:client":this.#o.referrer.toString()}get referrerPolicy(){return re.brandCheck(this,e),this.#o.referrerPolicy}get mode(){return re.brandCheck(this,e),this.#o.mode}get credentials(){return re.brandCheck(this,e),this.#o.credentials}get cache(){return re.brandCheck(this,e),this.#o.cache}get redirect(){return re.brandCheck(this,e),this.#o.redirect}get integrity(){return re.brandCheck(this,e),this.#o.integrity}get keepalive(){return re.brandCheck(this,e),this.#o.keepalive}get isReloadNavigation(){return re.brandCheck(this,e),this.#o.reloadNavigation}get isHistoryNavigation(){return re.brandCheck(this,e),this.#o.historyNavigation}get signal(){return re.brandCheck(this,e),this.#e}get body(){return re.brandCheck(this,e),this.#o.body?this.#o.body.stream:null}get bodyUsed(){return re.brandCheck(this,e),!!this.#o.body&&Zp.isDisturbed(this.#o.body.stream)}get duplex(){return re.brandCheck(this,e),"half"}clone(){if(re.brandCheck(this,e),cL(this.#o))throw new TypeError("unusable");let t=CL(this.#o),r=new AbortController;if(this.signal.aborted)r.abort(this.signal.reason);else{let o=th.get(this.signal);o===void 0&&(o=new Set,th.set(this.signal,o));let n=new WeakRef(r);o.add(n),Zp.addAbortListener(r.signal,fL(n))}return IL(t,this.#t,r.signal,Zte(this.#r))}[uL.inspect.custom](t,r){r.depth===null&&(r.depth=2),r.colors??=!0;let o={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${uL.formatWithOptions(r,o)}`}static setRequestSignal(t,r){return t.#e=r,t}static getRequestDispatcher(t){return t.#t}static setRequestDispatcher(t,r){t.#t=r}static setRequestHeaders(t,r){t.#r=r}static getRequestState(t){return t.#o}static setRequestState(t,r){t.#o=r}},{setRequestSignal:gre,getRequestDispatcher:mre,setRequestDispatcher:yre,setRequestHeaders:Ere,getRequestState:EL,setRequestState:Cre}=ar;Reflect.deleteProperty(ar,"setRequestSignal");Reflect.deleteProperty(ar,"getRequestDispatcher");Reflect.deleteProperty(ar,"setRequestDispatcher");Reflect.deleteProperty(ar,"setRequestHeaders");Reflect.deleteProperty(ar,"getRequestState");Reflect.deleteProperty(ar,"setRequestState");zte(ar,EL);function rh(e){return{method:e.method??"GET",localURLsOnly:e.localURLsOnly??!1,unsafeRequest:e.unsafeRequest??!1,body:e.body??null,client:e.client??null,reservedClient:e.reservedClient??null,replacesClientId:e.replacesClientId??"",window:e.window??"client",keepalive:e.keepalive??!1,serviceWorkers:e.serviceWorkers??"all",initiator:e.initiator??"",destination:e.destination??"",priority:e.priority??null,origin:e.origin??"client",policyContainer:e.policyContainer??"client",referrer:e.referrer??"client",referrerPolicy:e.referrerPolicy??"",mode:e.mode??"no-cors",useCORSPreflightFlag:e.useCORSPreflightFlag??!1,credentials:e.credentials??"same-origin",useCredentials:e.useCredentials??!1,cache:e.cache??"default",redirect:e.redirect??"follow",integrity:e.integrity??"",cryptoGraphicsNonceMetadata:e.cryptoGraphicsNonceMetadata??"",parserMetadata:e.parserMetadata??"",reloadNavigation:e.reloadNavigation??!1,historyNavigation:e.historyNavigation??!1,userActivation:e.userActivation??!1,taintedOrigin:e.taintedOrigin??!1,redirectCount:e.redirectCount??0,responseTainting:e.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:e.preventNoCacheCacheControlHeaderModification??!1,done:e.done??!1,timingAllowFailed:e.timingAllowFailed??!1,urlList:e.urlList,url:e.urlList[0],headersList:e.headersList?new Xp(e.headersList):new Xp}}function CL(e){let t=rh({...e,body:null});return e.body!=null&&(t.body=$te(t,e.body)),t}function IL(e,t,r,o){let n=new ar(eh);Cre(n,e),yre(n,t),gre(n,r);let i=new hL(eh);return Ere(n,i),gL(i,e.headersList),KB(i,o),n}Object.defineProperties(ar.prototype,{method:pt,url:pt,headers:pt,redirect:pt,clone:pt,signal:pt,duplex:pt,destination:pt,body:pt,bodyUsed:pt,isHistoryNavigation:pt,isReloadNavigation:pt,keepalive:pt,integrity:pt,cache:pt,credentials:pt,attribute:pt,referrerPolicy:pt,referrer:pt,mode:pt,[Symbol.toStringTag]:{value:"Request",configurable:!0}});re.is.Request=re.util.MakeTypeAssertion(ar);re.converters.RequestInfo=function(e,t,r){return typeof e=="string"?re.converters.USVString(e):re.is.Request(e)?e:re.converters.USVString(e)};re.converters.RequestInit=re.dictionaryConverter([{key:"method",converter:re.converters.ByteString},{key:"headers",converter:re.converters.HeadersInit},{key:"body",converter:re.nullableConverter(re.converters.BodyInit)},{key:"referrer",converter:re.converters.USVString},{key:"referrerPolicy",converter:re.converters.DOMString,allowedValues:ore},{key:"mode",converter:re.converters.DOMString,allowedValues:ire},{key:"credentials",converter:re.converters.DOMString,allowedValues:sre},{key:"cache",converter:re.converters.DOMString,allowedValues:are},{key:"redirect",converter:re.converters.DOMString,allowedValues:nre},{key:"integrity",converter:re.converters.DOMString},{key:"keepalive",converter:re.converters.boolean},{key:"signal",converter:re.nullableConverter(e=>re.converters.AbortSignal(e,"RequestInit","signal"))},{key:"window",converter:re.converters.any},{key:"duplex",converter:re.converters.DOMString,allowedValues:lre},{key:"dispatcher",converter:re.converters.any}]);BL.exports={Request:ar,makeRequest:rh,fromInnerRequest:IL,cloneRequest:CL,getRequestDispatcher:mre,getRequestState:EL}});var ou=w((mTe,LL)=>{"use strict";var{makeNetworkError:Pe,makeAppropriateNetworkError:oh,filterResponse:XB,makeResponse:nh,fromInnerResponse:Ire,getResponseState:Bre}=tu(),{HeadersList:QL}=Gs(),{Request:Qre,cloneRequest:bre,getRequestDispatcher:wre,getRequestState:Sre}=xl(),bi=v("node:zlib"),{bytesMatch:Tre,makePolicyContainer:xre,clonePolicyContainer:Rre,requestBadPort:Dre,TAOCheck:Fre,appendRequestOriginHeader:kre,responseLocationURL:Nre,requestCurrentURL:rn,setRequestReferrerPolicyOnRedirect:vre,tryUpgradeRequestToAPotentiallyTrustworthyURL:Pre,createOpaqueTimingInfo:n0,appendFetchMetadata:Lre,corsCheck:Ure,crossOriginResourcePolicyCheck:Ore,determineRequestsReferrer:Mre,coarsenedSharedCurrentTime:ru,createDeferredPromise:_re,sameOrigin:o0,isCancelled:Hs,isAborted:bL,isErrorLike:Gre,fullyReadBody:jre,readableStreamClose:Hre,isomorphicEncode:ih,urlIsLocal:Vre,urlIsHttpHttpsScheme:lh,urlHasHttpsScheme:qre,clampAndCoarsenConnectionTimingInfo:Yre,simpleRangeHeaderValue:Wre,buildContentRange:Jre,createInflate:zre,extractMimeType:$re}=$t(),Vs=v("node:assert"),{safelyExtractBody:i0,extractBody:wL}=al(),{redirectStatusSet:xL,nullBodyStatus:RL,safeMethodsSet:Kre,requestBodyHeader:Zre,subresourceSet:Xre}=QA(),eoe=v("node:events"),{Readable:toe,pipeline:roe,finished:ooe,isErrored:noe,isReadable:sh}=v("node:stream"),{addAbortListener:ioe,bufferToLowerCasedHeaderName:SL}=ue(),{dataURLProcessor:soe,serializeAMimeType:aoe,minimizeSupportedMimeType:loe}=Sr(),{getGlobalDispatcher:coe}=jp(),{webidl:s0}=kt(),{STATUS_CODES:Aoe}=v("node:http"),uoe=["GET","HEAD"],doe=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",e0,ah=class extends eoe{constructor(t){super(),this.dispatcher=t,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(t){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(t),this.emit("terminated",t))}abort(t){this.state==="ongoing"&&(this.state="aborted",t||(t=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=t,this.connection?.destroy(t),this.emit("terminated",t))}};function foe(e){DL(e,"fetch")}function poe(e,t=void 0){s0.argumentLengthCheck(arguments,1,"globalThis.fetch");let r=_re(),o;try{o=new Qre(e,t)}catch(A){return r.reject(A),r.promise}let n=Sre(o);if(o.signal.aborted)return t0(r,n,null,o.signal.reason),r.promise;n.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(n.serviceWorkers="none");let s=null,a=!1,l=null;return ioe(o.signal,()=>{a=!0,Vs(l!=null),l.abort(o.signal.reason);let A=s?.deref();t0(r,n,A,o.signal.reason)}),l=kL({request:n,processResponseEndOfBody:foe,processResponse:A=>{if(!a){if(A.aborted){t0(r,n,s,l.serializedAbortReason);return}if(A.type==="error"){r.reject(new TypeError("fetch failed",{cause:A.error}));return}s=new WeakRef(Ire(A,"immutable")),r.resolve(s.deref()),r=null}},dispatcher:wre(o)}),r.promise}function DL(e,t="other"){if(e.type==="error"&&e.aborted||!e.urlList?.length)return;let r=e.urlList[0],o=e.timingInfo,n=e.cacheState;lh(r)&&o!==null&&(e.timingAllowPassed||(o=n0({startTime:o.startTime}),n=""),o.endTime=ru(),e.timingInfo=o,FL(o,r.href,t,globalThis,n,"",e.status))}var FL=performance.markResourceTiming;function t0(e,t,r,o){if(e&&e.reject(o),t.body?.stream!=null&&sh(t.body.stream)&&t.body.stream.cancel(o).catch(i=>{if(i.code!=="ERR_INVALID_STATE")throw i}),r==null)return;let n=Bre(r);n.body?.stream!=null&&sh(n.body.stream)&&n.body.stream.cancel(o).catch(i=>{if(i.code!=="ERR_INVALID_STATE")throw i})}function kL({request:e,processRequestBodyChunkLength:t,processRequestEndOfBody:r,processResponse:o,processResponseEndOfBody:n,processResponseConsumeBody:i,useParallelQueue:s=!1,dispatcher:a=coe()}){Vs(a);let l=null,c=!1;e.client!=null&&(l=e.client.globalObject,c=e.client.crossOriginIsolatedCapability);let A=ru(c),d=n0({startTime:A}),f={controller:new ah(a),request:e,timingInfo:d,processRequestBodyChunkLength:t,processRequestEndOfBody:r,processResponse:o,processResponseConsumeBody:i,processResponseEndOfBody:n,taskDestination:l,crossOriginIsolatedCapability:c};return Vs(!e.body||e.body.stream),e.window==="client"&&(e.window=e.client?.globalObject?.constructor?.name==="Window"?e.client:"no-window"),e.origin==="client"&&(e.origin=e.client.origin),e.policyContainer==="client"&&(e.client!=null?e.policyContainer=Rre(e.client.policyContainer):e.policyContainer=xre()),e.headersList.contains("accept",!0)||e.headersList.append("accept","*/*",!0),e.headersList.contains("accept-language",!0)||e.headersList.append("accept-language","*",!0),e.priority,Xre.has(e.destination),NL(f).catch(u=>{f.controller.terminate(u)}),f.controller}async function NL(e,t=!1){let r=e.request,o=null;if(r.localURLsOnly&&!Vre(rn(r))&&(o=Pe("local URLs only")),Pre(r),Dre(r)==="blocked"&&(o=Pe("bad port")),r.referrerPolicy===""&&(r.referrerPolicy=r.policyContainer.referrerPolicy),r.referrer!=="no-referrer"&&(r.referrer=Mre(r)),o===null){let i=rn(r);o0(i,r.url)&&r.responseTainting==="basic"||i.protocol==="data:"||r.mode==="navigate"||r.mode==="websocket"?(r.responseTainting="basic",o=await TL(e)):r.mode==="same-origin"?o=Pe('request mode cannot be "same-origin"'):r.mode==="no-cors"?r.redirect!=="follow"?o=Pe('redirect mode cannot be "follow" for "no-cors" request'):(r.responseTainting="opaque",o=await TL(e)):lh(rn(r))?(r.responseTainting="cors",o=await vL(e)):o=Pe("URL scheme must be a HTTP(S) scheme")}if(t)return o;o.status!==0&&!o.internalResponse&&(r.responseTainting,r.responseTainting==="basic"?o=XB(o,"basic"):r.responseTainting==="cors"?o=XB(o,"cors"):r.responseTainting==="opaque"?o=XB(o,"opaque"):Vs(!1));let n=o.status===0?o:o.internalResponse;if(n.urlList.length===0&&n.urlList.push(...r.urlList),r.timingAllowFailed||(o.timingAllowPassed=!0),o.type==="opaque"&&n.status===206&&n.rangeRequested&&!r.headers.contains("range",!0)&&(o=n=Pe()),o.status!==0&&(r.method==="HEAD"||r.method==="CONNECT"||RL.includes(n.status))&&(n.body=null,e.controller.dump=!0),r.integrity){let i=a=>r0(e,Pe(a));if(r.responseTainting==="opaque"||o.body==null){i(o.error);return}let s=a=>{if(!Tre(a,r.integrity)){i("integrity mismatch");return}o.body=i0(a)[0],r0(e,o)};await jre(o.body,s,i)}else r0(e,o)}function TL(e){if(Hs(e)&&e.request.redirectCount===0)return Promise.resolve(oh(e));let{request:t}=e,{protocol:r}=rn(t);switch(r){case"about:":return Promise.resolve(Pe("about scheme is not supported"));case"blob:":{e0||(e0=v("node:buffer").resolveObjectURL);let o=rn(t);if(o.search.length!==0)return Promise.resolve(Pe("NetworkError when attempting to fetch resource."));let n=e0(o.toString());if(t.method!=="GET"||!s0.is.Blob(n))return Promise.resolve(Pe("invalid method"));let i=nh(),s=n.size,a=ih(`${s}`),l=n.type;if(t.headersList.contains("range",!0)){i.rangeRequested=!0;let c=t.headersList.get("range",!0),A=Wre(c,!0);if(A==="failure")return Promise.resolve(Pe("failed to fetch the data URL"));let{rangeStartValue:d,rangeEndValue:f}=A;if(d===null)d=s-f,f=d+f-1;else{if(d>=s)return Promise.resolve(Pe("Range start is greater than the blob's size."));(f===null||f>=s)&&(f=s-1)}let u=n.slice(d,f,l),p=wL(u);i.body=p[0];let h=ih(`${u.size}`),g=Jre(d,f,s);i.status=206,i.statusText="Partial Content",i.headersList.set("content-length",h,!0),i.headersList.set("content-type",l,!0),i.headersList.set("content-range",g,!0)}else{let c=wL(n);i.statusText="OK",i.body=c[0],i.headersList.set("content-length",a,!0),i.headersList.set("content-type",l,!0)}return Promise.resolve(i)}case"data:":{let o=rn(t),n=soe(o);if(n==="failure")return Promise.resolve(Pe("failed to fetch the data URL"));let i=aoe(n.mimeType);return Promise.resolve(nh({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:i}]],body:i0(n.body)[0]}))}case"file:":return Promise.resolve(Pe("not implemented... yet..."));case"http:":case"https:":return vL(e).catch(o=>Pe(o));default:return Promise.resolve(Pe("unknown scheme"))}}function hoe(e,t){e.request.done=!0,e.processResponseDone!=null&&queueMicrotask(()=>e.processResponseDone(t))}function r0(e,t){let r=e.timingInfo,o=()=>{let i=Date.now();e.request.destination==="document"&&(e.controller.fullTimingInfo=r),e.controller.reportTimingSteps=()=>{if(!lh(e.request.url))return;r.endTime=i;let a=t.cacheState,l=t.bodyInfo;t.timingAllowPassed||(r=n0(r),a="");let c=0;if(e.request.mode!=="navigator"||!t.hasCrossOriginRedirects){c=t.status;let A=$re(t.headersList);A!=="failure"&&(l.contentType=loe(A))}e.request.initiatorType!=null&&FL(r,e.request.url.href,e.request.initiatorType,globalThis,a,l,c)};let s=()=>{e.request.done=!0,e.processResponseEndOfBody!=null&&queueMicrotask(()=>e.processResponseEndOfBody(t)),e.request.initiatorType!=null&&e.controller.reportTimingSteps()};queueMicrotask(()=>s())};e.processResponse!=null&&queueMicrotask(()=>{e.processResponse(t),e.processResponse=null});let n=t.type==="error"?t:t.internalResponse??t;n.body==null?o():ooe(n.body.stream,()=>{o()})}async function vL(e){let t=e.request,r=null,o=null,n=e.timingInfo;if(t.serviceWorkers,r===null){if(t.redirect==="follow"&&(t.serviceWorkers="none"),o=r=await PL(e),t.responseTainting==="cors"&&Ure(t,r)==="failure")return Pe("cors failure");Fre(t,r)==="failure"&&(t.timingAllowFailed=!0)}return(t.responseTainting==="opaque"||r.type==="opaque")&&Ore(t.origin,t.client,t.destination,o)==="blocked"?Pe("blocked"):(xL.has(o.status)&&(t.redirect!=="manual"&&e.controller.connection.destroy(void 0,!1),t.redirect==="error"?r=Pe("unexpected redirect"):t.redirect==="manual"?r=o:t.redirect==="follow"?r=await goe(e,r):Vs(!1)),r.timingInfo=n,r)}function goe(e,t){let r=e.request,o=t.internalResponse?t.internalResponse:t,n;try{if(n=Nre(o,rn(r).hash),n==null)return t}catch(s){return Promise.resolve(Pe(s))}if(!lh(n))return Promise.resolve(Pe("URL scheme must be a HTTP(S) scheme"));if(r.redirectCount===20)return Promise.resolve(Pe("redirect count exceeded"));if(r.redirectCount+=1,r.mode==="cors"&&(n.username||n.password)&&!o0(r,n))return Promise.resolve(Pe('cross origin not allowed for request mode "cors"'));if(r.responseTainting==="cors"&&(n.username||n.password))return Promise.resolve(Pe('URL cannot contain credentials for request mode "cors"'));if(o.status!==303&&r.body!=null&&r.body.source==null)return Promise.resolve(Pe());if([301,302].includes(o.status)&&r.method==="POST"||o.status===303&&!uoe.includes(r.method)){r.method="GET",r.body=null;for(let s of Zre)r.headersList.delete(s)}o0(rn(r),n)||(r.headersList.delete("authorization",!0),r.headersList.delete("proxy-authorization",!0),r.headersList.delete("cookie",!0),r.headersList.delete("host",!0)),r.body!=null&&(Vs(r.body.source!=null),r.body=i0(r.body.source)[0]);let i=e.timingInfo;return i.redirectEndTime=i.postRedirectStartTime=ru(e.crossOriginIsolatedCapability),i.redirectStartTime===0&&(i.redirectStartTime=i.startTime),r.urlList.push(n),vre(r,o),NL(e,!0)}async function PL(e,t=!1,r=!1){let o=e.request,n=null,i=null,s=null,a=null,l=!1;o.window==="no-window"&&o.redirect==="error"?(n=e,i=o):(i=bre(o),n={...e},n.request=i);let c=o.credentials==="include"||o.credentials==="same-origin"&&o.responseTainting==="basic",A=i.body?i.body.length:null,d=null;if(i.body==null&&["POST","PUT"].includes(i.method)&&(d="0"),A!=null&&(d=ih(`${A}`)),d!=null&&i.headersList.append("content-length",d,!0),A!=null&&i.keepalive,s0.is.URL(i.referrer)&&i.headersList.append("referer",ih(i.referrer.href),!0),kre(i),Lre(i),i.headersList.contains("user-agent",!0)||i.headersList.append("user-agent",doe,!0),i.cache==="default"&&(i.headersList.contains("if-modified-since",!0)||i.headersList.contains("if-none-match",!0)||i.headersList.contains("if-unmodified-since",!0)||i.headersList.contains("if-match",!0)||i.headersList.contains("if-range",!0))&&(i.cache="no-store"),i.cache==="no-cache"&&!i.preventNoCacheCacheControlHeaderModification&&!i.headersList.contains("cache-control",!0)&&i.headersList.append("cache-control","max-age=0",!0),(i.cache==="no-store"||i.cache==="reload")&&(i.headersList.contains("pragma",!0)||i.headersList.append("pragma","no-cache",!0),i.headersList.contains("cache-control",!0)||i.headersList.append("cache-control","no-cache",!0)),i.headersList.contains("range",!0)&&i.headersList.append("accept-encoding","identity",!0),i.headersList.contains("accept-encoding",!0)||(qre(rn(i))?i.headersList.append("accept-encoding","br, gzip, deflate",!0):i.headersList.append("accept-encoding","gzip, deflate",!0)),i.headersList.delete("host",!0),a==null&&(i.cache="no-store"),i.cache!=="no-store"&&i.cache,s==null){if(i.cache==="only-if-cached")return Pe("only if cached");let f=await moe(n,c,r);!Kre.has(i.method)&&f.status>=200&&f.status<=399,l&&f.status,s==null&&(s=f)}if(s.urlList=[...i.urlList],i.headersList.contains("range",!0)&&(s.rangeRequested=!0),s.requestIncludesCredentials=c,s.status===407)return o.window==="no-window"?Pe():Hs(e)?oh(e):Pe("proxy authentication required");if(s.status===421&&!r&&(o.body==null||o.body.source!=null)){if(Hs(e))return oh(e);e.controller.connection.destroy(),s=await PL(e,t,!0)}return s}async function moe(e,t=!1,r=!1){Vs(!e.controller.connection||e.controller.connection.destroyed),e.controller.connection={abort:null,destroyed:!1,destroy(p,h=!0){this.destroyed||(this.destroyed=!0,h&&this.abort?.(p??new DOMException("The operation was aborted.","AbortError")))}};let o=e.request,n=null,i=e.timingInfo;null==null&&(o.cache="no-store");let a=r?"yes":"no";o.mode;let l=null;if(o.body==null&&e.processRequestEndOfBody)queueMicrotask(()=>e.processRequestEndOfBody());else if(o.body!=null){let p=async function*(m){Hs(e)||(yield m,e.processRequestBodyChunkLength?.(m.byteLength))},h=()=>{Hs(e)||e.processRequestEndOfBody&&e.processRequestEndOfBody()},g=m=>{Hs(e)||(m.name==="AbortError"?e.controller.abort():e.controller.terminate(m))};l=async function*(){try{for await(let m of o.body.stream)yield*p(m);h()}catch(m){g(m)}}()}try{let{body:p,status:h,statusText:g,headersList:m,socket:y}=await u({body:l});if(y)n=nh({status:h,statusText:g,headersList:m,socket:y});else{let E=p[Symbol.asyncIterator]();e.controller.next=()=>E.next(),n=nh({status:h,statusText:g,headersList:m})}}catch(p){return p.name==="AbortError"?(e.controller.connection.destroy(),oh(e,p)):Pe(p)}let c=()=>e.controller.resume(),A=p=>{Hs(e)||e.controller.abort(p)},d=new ReadableStream({async start(p){e.controller.controller=p},async pull(p){await c(p)},async cancel(p){await A(p)},type:"bytes"});n.body={stream:d,source:null,length:null},e.controller.resume||e.controller.on("terminated",f),e.controller.resume=async()=>{for(;;){let p,h;try{let{done:m,value:y}=await e.controller.next();if(bL(e))break;p=m?void 0:y}catch(m){e.controller.ended&&!i.encodedBodySize?p=void 0:(p=m,h=!0)}if(p===void 0){Hre(e.controller.controller),hoe(e,n);return}if(i.decodedBodySize+=p?.byteLength??0,h){e.controller.terminate(p);return}let g=new Uint8Array(p);if(g.byteLength&&e.controller.controller.enqueue(g),noe(d)){e.controller.terminate();return}if(e.controller.controller.desiredSize<=0)return}};function f(p){bL(e)?(n.aborted=!0,sh(d)&&e.controller.controller.error(e.controller.serializedAbortReason)):sh(d)&&e.controller.controller.error(new TypeError("terminated",{cause:Gre(p)?p:void 0})),e.controller.connection.destroy()}return n;function u({body:p}){let h=rn(o),g=e.controller.dispatcher;return new Promise((m,y)=>g.dispatch({path:h.pathname+h.search,origin:h.origin,method:o.method,body:g.isMockActive?o.body&&(o.body.source||o.body.stream):p,headers:o.headersList.entries,maxRedirections:0,upgrade:o.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(E){let{connection:I}=e.controller;i.finalConnectionTimingInfo=Yre(void 0,i.postRedirectStartTime,e.crossOriginIsolatedCapability),I.destroyed?E(new DOMException("The operation was aborted.","AbortError")):(e.controller.on("terminated",E),this.abort=I.abort=E),i.finalNetworkRequestStartTime=ru(e.crossOriginIsolatedCapability)},onResponseStarted(){i.finalNetworkResponseStartTime=ru(e.crossOriginIsolatedCapability)},onHeaders(E,I,C,B){if(E<200)return;let R=[],x="",S=new QL;for(let P=0;P<I.length;P+=2)S.append(SL(I[P]),I[P+1].toString("latin1"),!0);let Q=S.get("content-encoding",!0);Q&&(R=Q.toLowerCase().split(",").map(P=>P.trim())),x=S.get("location",!0),this.body=new toe({read:C});let T=[],D=x&&o.redirect==="follow"&&xL.has(E);if(R.length!==0&&o.method!=="HEAD"&&o.method!=="CONNECT"&&!RL.includes(E)&&!D)for(let P=R.length-1;P>=0;--P){let U=R[P];if(U==="x-gzip"||U==="gzip")T.push(bi.createGunzip({flush:bi.constants.Z_SYNC_FLUSH,finishFlush:bi.constants.Z_SYNC_FLUSH}));else if(U==="deflate")T.push(zre({flush:bi.constants.Z_SYNC_FLUSH,finishFlush:bi.constants.Z_SYNC_FLUSH}));else if(U==="br")T.push(bi.createBrotliDecompress({flush:bi.constants.BROTLI_OPERATION_FLUSH,finishFlush:bi.constants.BROTLI_OPERATION_FLUSH}));else{T.length=0;break}}let k=this.onError.bind(this);return m({status:E,statusText:B,headersList:S,body:T.length?roe(this.body,...T,P=>{P&&this.onError(P)}).on("error",k):this.body.on("error",k)}),!0},onData(E){if(e.controller.dump)return;let I=E;return i.encodedBodySize+=I.byteLength,this.body.push(I)},onComplete(){this.abort&&e.controller.off("terminated",this.abort),e.controller.ended=!0,this.body.push(null)},onError(E){this.abort&&e.controller.off("terminated",this.abort),this.body?.destroy(E),e.controller.terminate(E),y(E)},onUpgrade(E,I,C){if(E!==101)return;let B=new QL;for(let R=0;R<I.length;R+=2)B.append(SL(I[R]),I[R+1].toString("latin1"),!0);return m({status:E,statusText:Aoe[E],headersList:B,socket:C}),!0}}))}}LL.exports={fetch:poe,Fetch:ah,fetching:kL,finalizeAndReportTiming:DL}});var ML=w((yTe,OL)=>{"use strict";var yoe=v("node:assert"),{URLSerializer:UL}=Sr(),{isValidHeaderName:Eoe}=$t();function Coe(e,t,r=!1){let o=UL(e,r),n=UL(t,r);return o===n}function Ioe(e){yoe(e!==null);let t=[];for(let r of e.split(","))r=r.trim(),Eoe(r)&&t.push(r);return t}OL.exports={urlEquals:Coe,getFieldValues:Ioe}});var jL=w((ETe,GL)=>{"use strict";var{kConstruct:Boe}=Me(),{urlEquals:Qoe,getFieldValues:a0}=ML(),{kEnumerableProperty:qs,isDisturbed:boe}=ue(),{webidl:z}=kt(),{cloneResponse:woe,fromInnerResponse:Soe,getResponseState:Toe}=tu(),{Request:nu,fromInnerRequest:xoe,getRequestState:on}=xl(),{fetching:Roe}=ou(),{urlIsHttpHttpsScheme:ch,createDeferredPromise:Rl,readAllBytes:Doe}=$t(),l0=v("node:assert"),Ah=class e{#e;constructor(){arguments[0]!==Boe&&z.illegalConstructor(),z.util.markAsUncloneable(this),this.#e=arguments[1]}async match(t,r={}){z.brandCheck(this,e);let o="Cache.match";z.argumentLengthCheck(arguments,1,o),t=z.converters.RequestInfo(t,o,"request"),r=z.converters.CacheQueryOptions(r,o,"options");let n=this.#i(t,r,1);if(n.length!==0)return n[0]}async matchAll(t=void 0,r={}){z.brandCheck(this,e);let o="Cache.matchAll";return t!==void 0&&(t=z.converters.RequestInfo(t,o,"request")),r=z.converters.CacheQueryOptions(r,o,"options"),this.#i(t,r)}async add(t){z.brandCheck(this,e);let r="Cache.add";z.argumentLengthCheck(arguments,1,r),t=z.converters.RequestInfo(t,r,"request");let o=[t];return await this.addAll(o)}async addAll(t){z.brandCheck(this,e);let r="Cache.addAll";z.argumentLengthCheck(arguments,1,r);let o=[],n=[];for(let f of t){if(f===void 0)throw z.errors.conversionFailed({prefix:r,argument:"Argument 1",types:["undefined is not allowed"]});if(f=z.converters.RequestInfo(f),typeof f=="string")continue;let u=on(f);if(!ch(u.url)||u.method!=="GET")throw z.errors.exception({header:r,message:"Expected http/s scheme when method is not GET."})}let i=[];for(let f of t){let u=on(new nu(f));if(!ch(u.url))throw z.errors.exception({header:r,message:"Expected http/s scheme."});u.initiator="fetch",u.destination="subresource",n.push(u);let p=Rl();i.push(Roe({request:u,processResponse(h){if(h.type==="error"||h.status===206||h.status<200||h.status>299)p.reject(z.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(h.headersList.contains("vary")){let g=a0(h.headersList.get("vary"));for(let m of g)if(m==="*"){p.reject(z.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let y of i)y.abort();return}}},processResponseEndOfBody(h){if(h.aborted){p.reject(new DOMException("aborted","AbortError"));return}p.resolve(h)}})),o.push(p.promise)}let a=await Promise.all(o),l=[],c=0;for(let f of a){let u={type:"put",request:n[c],response:f};l.push(u),c++}let A=Rl(),d=null;try{this.#t(l)}catch(f){d=f}return queueMicrotask(()=>{d===null?A.resolve(void 0):A.reject(d)}),A.promise}async put(t,r){z.brandCheck(this,e);let o="Cache.put";z.argumentLengthCheck(arguments,2,o),t=z.converters.RequestInfo(t,o,"request"),r=z.converters.Response(r,o,"response");let n=null;if(z.is.Request(t)?n=on(t):n=on(new nu(t)),!ch(n.url)||n.method!=="GET")throw z.errors.exception({header:o,message:"Expected an http/s scheme when method is not GET"});let i=Toe(r);if(i.status===206)throw z.errors.exception({header:o,message:"Got 206 status"});if(i.headersList.contains("vary")){let u=a0(i.headersList.get("vary"));for(let p of u)if(p==="*")throw z.errors.exception({header:o,message:"Got * vary field value"})}if(i.body&&(boe(i.body.stream)||i.body.stream.locked))throw z.errors.exception({header:o,message:"Response body is locked or disturbed"});let s=woe(i),a=Rl();if(i.body!=null){let p=i.body.stream.getReader();Doe(p,a.resolve,a.reject)}else a.resolve(void 0);let l=[],c={type:"put",request:n,response:s};l.push(c);let A=await a.promise;s.body!=null&&(s.body.source=A);let d=Rl(),f=null;try{this.#t(l)}catch(u){f=u}return queueMicrotask(()=>{f===null?d.resolve():d.reject(f)}),d.promise}async delete(t,r={}){z.brandCheck(this,e);let o="Cache.delete";z.argumentLengthCheck(arguments,1,o),t=z.converters.RequestInfo(t,o,"request"),r=z.converters.CacheQueryOptions(r,o,"options");let n=null;if(z.is.Request(t)){if(n=on(t),n.method!=="GET"&&!r.ignoreMethod)return!1}else l0(typeof t=="string"),n=on(new nu(t));let i=[],s={type:"delete",request:n,options:r};i.push(s);let a=Rl(),l=null,c;try{c=this.#t(i)}catch(A){l=A}return queueMicrotask(()=>{l===null?a.resolve(!!c?.length):a.reject(l)}),a.promise}async keys(t=void 0,r={}){z.brandCheck(this,e);let o="Cache.keys";t!==void 0&&(t=z.converters.RequestInfo(t,o,"request")),r=z.converters.CacheQueryOptions(r,o,"options");let n=null;if(t!==void 0)if(z.is.Request(t)){if(n=on(t),n.method!=="GET"&&!r.ignoreMethod)return[]}else typeof t=="string"&&(n=on(new nu(t)));let i=Rl(),s=[];if(t===void 0)for(let a of this.#e)s.push(a[0]);else{let a=this.#r(n,r);for(let l of a)s.push(l[0])}return queueMicrotask(()=>{let a=[];for(let l of s){let c=xoe(l,void 0,new AbortController().signal,"immutable");a.push(c)}i.resolve(Object.freeze(a))}),i.promise}#t(t){let r=this.#e,o=[...r],n=[],i=[];try{for(let s of t){if(s.type!=="delete"&&s.type!=="put")throw z.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(s.type==="delete"&&s.response!=null)throw z.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#r(s.request,s.options,n).length)throw new DOMException("???","InvalidStateError");let a;if(s.type==="delete"){if(a=this.#r(s.request,s.options),a.length===0)return[];for(let l of a){let c=r.indexOf(l);l0(c!==-1),r.splice(c,1)}}else if(s.type==="put"){if(s.response==null)throw z.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let l=s.request;if(!ch(l.url))throw z.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(l.method!=="GET")throw z.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(s.options!=null)throw z.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});a=this.#r(s.request);for(let c of a){let A=r.indexOf(c);l0(A!==-1),r.splice(A,1)}r.push([s.request,s.response]),n.push([s.request,s.response])}i.push([s.request,s.response])}return i}catch(s){throw this.#e.length=0,this.#e=o,s}}#r(t,r,o){let n=[],i=o??this.#e;for(let s of i){let[a,l]=s;this.#o(t,a,l,r)&&n.push(s)}return n}#o(t,r,o=null,n){let i=new URL(t.url),s=new URL(r.url);if(n?.ignoreSearch&&(s.search="",i.search=""),!Qoe(i,s,!0))return!1;if(o==null||n?.ignoreVary||!o.headersList.contains("vary"))return!0;let a=a0(o.headersList.get("vary"));for(let l of a){if(l==="*")return!1;let c=r.headersList.get(l),A=t.headersList.get(l);if(c!==A)return!1}return!0}#i(t,r,o=1/0){let n=null;if(t!==void 0)if(z.is.Request(t)){if(n=on(t),n.method!=="GET"&&!r.ignoreMethod)return[]}else typeof t=="string"&&(n=on(new nu(t)));let i=[];if(t===void 0)for(let a of this.#e)i.push(a[1]);else{let a=this.#r(n,r);for(let l of a)i.push(l[1])}let s=[];for(let a of i){let l=Soe(a,"immutable");if(s.push(l.clone()),s.length>=o)break}return Object.freeze(s)}};Object.defineProperties(Ah.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:qs,matchAll:qs,add:qs,addAll:qs,put:qs,delete:qs,keys:qs});var _L=[{key:"ignoreSearch",converter:z.converters.boolean,defaultValue:()=>!1},{key:"ignoreMethod",converter:z.converters.boolean,defaultValue:()=>!1},{key:"ignoreVary",converter:z.converters.boolean,defaultValue:()=>!1}];z.converters.CacheQueryOptions=z.dictionaryConverter(_L);z.converters.MultiCacheQueryOptions=z.dictionaryConverter([..._L,{key:"cacheName",converter:z.converters.DOMString}]);z.converters.Response=z.interfaceConverter(z.is.Response,"Response");z.converters["sequence<RequestInfo>"]=z.sequenceConverter(z.converters.RequestInfo);GL.exports={Cache:Ah}});var VL=w((CTe,HL)=>{"use strict";var{Cache:uh}=jL(),{webidl:Gt}=kt(),{kEnumerableProperty:iu}=ue(),{kConstruct:su}=Me(),dh=class e{#e=new Map;constructor(){arguments[0]!==su&&Gt.illegalConstructor(),Gt.util.markAsUncloneable(this)}async match(t,r={}){if(Gt.brandCheck(this,e),Gt.argumentLengthCheck(arguments,1,"CacheStorage.match"),t=Gt.converters.RequestInfo(t),r=Gt.converters.MultiCacheQueryOptions(r),r.cacheName!=null){if(this.#e.has(r.cacheName)){let o=this.#e.get(r.cacheName);return await new uh(su,o).match(t,r)}}else for(let o of this.#e.values()){let i=await new uh(su,o).match(t,r);if(i!==void 0)return i}}async has(t){Gt.brandCheck(this,e);let r="CacheStorage.has";return Gt.argumentLengthCheck(arguments,1,r),t=Gt.converters.DOMString(t,r,"cacheName"),this.#e.has(t)}async open(t){Gt.brandCheck(this,e);let r="CacheStorage.open";if(Gt.argumentLengthCheck(arguments,1,r),t=Gt.converters.DOMString(t,r,"cacheName"),this.#e.has(t)){let n=this.#e.get(t);return new uh(su,n)}let o=[];return this.#e.set(t,o),new uh(su,o)}async delete(t){Gt.brandCheck(this,e);let r="CacheStorage.delete";return Gt.argumentLengthCheck(arguments,1,r),t=Gt.converters.DOMString(t,r,"cacheName"),this.#e.delete(t)}async keys(){return Gt.brandCheck(this,e),[...this.#e.keys()]}};Object.defineProperties(dh.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:iu,has:iu,open:iu,delete:iu,keys:iu});HL.exports={CacheStorage:dh}});var YL=w((ITe,qL)=>{"use strict";qL.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var c0=w((BTe,KL)=>{"use strict";function Foe(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r>=0&&r<=8||r>=10&&r<=31||r===127)return!0}return!1}function WL(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<33||r>126||r===34||r===40||r===41||r===60||r===62||r===64||r===44||r===59||r===58||r===92||r===47||r===91||r===93||r===63||r===61||r===123||r===125)throw new Error("Invalid cookie name")}}function JL(e){let t=e.length,r=0;if(e[0]==='"'){if(t===1||e[t-1]!=='"')throw new Error("Invalid cookie value");--t,++r}for(;r<t;){let o=e.charCodeAt(r++);if(o<33||o>126||o===34||o===44||o===59||o===92)throw new Error("Invalid cookie value")}}function zL(e){for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<32||r===127||r===59)throw new Error("Invalid cookie path")}}function koe(e){if(e.startsWith("-")||e.endsWith(".")||e.endsWith("-"))throw new Error("Invalid cookie domain")}var Noe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],voe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fh=Array(61).fill(0).map((e,t)=>t.toString().padStart(2,"0"));function $L(e){return typeof e=="number"&&(e=new Date(e)),`${Noe[e.getUTCDay()]}, ${fh[e.getUTCDate()]} ${voe[e.getUTCMonth()]} ${e.getUTCFullYear()} ${fh[e.getUTCHours()]}:${fh[e.getUTCMinutes()]}:${fh[e.getUTCSeconds()]} GMT`}function Poe(e){if(e<0)throw new Error("Invalid cookie max-age")}function Loe(e){if(e.name.length===0)return null;WL(e.name),JL(e.value);let t=[`${e.name}=${e.value}`];e.name.startsWith("__Secure-")&&(e.secure=!0),e.name.startsWith("__Host-")&&(e.secure=!0,e.domain=null,e.path="/"),e.secure&&t.push("Secure"),e.httpOnly&&t.push("HttpOnly"),typeof e.maxAge=="number"&&(Poe(e.maxAge),t.push(`Max-Age=${e.maxAge}`)),e.domain&&(koe(e.domain),t.push(`Domain=${e.domain}`)),e.path&&(zL(e.path),t.push(`Path=${e.path}`)),e.expires&&e.expires.toString()!=="Invalid Date"&&t.push(`Expires=${$L(e.expires)}`),e.sameSite&&t.push(`SameSite=${e.sameSite}`);for(let r of e.unparsed){if(!r.includes("="))throw new Error("Invalid unparsed");let[o,...n]=r.split("=");t.push(`${o.trim()}=${n.join("=")}`)}return t.join("; ")}KL.exports={isCTLExcludingHtab:Foe,validateCookieName:WL,validateCookiePath:zL,validateCookieValue:JL,toIMFDate:$L,stringify:Loe}});var XL=w((QTe,ZL)=>{"use strict";var{maxNameValuePairSize:Uoe,maxAttributeValueSize:Ooe}=YL(),{isCTLExcludingHtab:Moe}=c0(),{collectASequenceOfCodePointsFast:ph}=Sr(),_oe=v("node:assert"),{unescape:Goe}=v("node:querystring");function joe(e){if(Moe(e))return null;let t="",r="",o="",n="";if(e.includes(";")){let i={position:0};t=ph(";",e,i),r=e.slice(i.position)}else t=e;if(!t.includes("="))n=t;else{let i={position:0};o=ph("=",t,i),n=t.slice(i.position+1)}return o=o.trim(),n=n.trim(),o.length+n.length>Uoe?null:{name:o,value:Goe(n),...Dl(r)}}function Dl(e,t={}){if(e.length===0)return t;_oe(e[0]===";"),e=e.slice(1);let r="";e.includes(";")?(r=ph(";",e,{position:0}),e=e.slice(r.length)):(r=e,e="");let o="",n="";if(r.includes("=")){let s={position:0};o=ph("=",r,s),n=r.slice(s.position+1)}else o=r;if(o=o.trim(),n=n.trim(),n.length>Ooe)return Dl(e,t);let i=o.toLowerCase();if(i==="expires"){let s=new Date(n);t.expires=s}else if(i==="max-age"){let s=n.charCodeAt(0);if((s<48||s>57)&&n[0]!=="-"||!/^\d+$/.test(n))return Dl(e,t);let a=Number(n);t.maxAge=a}else if(i==="domain"){let s=n;s[0]==="."&&(s=s.slice(1)),s=s.toLowerCase(),t.domain=s}else if(i==="path"){let s="";n.length===0||n[0]!=="/"?s="/":s=n,t.path=s}else if(i==="secure")t.secure=!0;else if(i==="httponly")t.httpOnly=!0;else if(i==="samesite"){let s="Default",a=n.toLowerCase();a.includes("none")&&(s="None"),a.includes("strict")&&(s="Strict"),a.includes("lax")&&(s="Lax"),t.sameSite=s}else t.unparsed??=[],t.unparsed.push(`${o}=${n}`);return Dl(e,t)}ZL.exports={parseSetCookie:joe,parseUnparsedAttributes:Dl}});var oU=w((bTe,rU)=>{"use strict";var{parseSetCookie:eU}=XL(),{stringify:Hoe}=c0(),{webidl:Se}=kt(),{Headers:Voe}=Gs(),hh=Se.brandCheckMultiple([Voe,globalThis.Headers].filter(Boolean));function qoe(e){Se.argumentLengthCheck(arguments,1,"getCookies"),hh(e);let t=e.get("cookie"),r={};if(!t)return r;for(let o of t.split(";")){let[n,...i]=o.split("=");r[n.trim()]=i.join("=")}return r}function Yoe(e,t,r){hh(e);let o="deleteCookie";Se.argumentLengthCheck(arguments,2,o),t=Se.converters.DOMString(t,o,"name"),r=Se.converters.DeleteCookieAttributes(r),tU(e,{name:t,value:"",expires:new Date(0),...r})}function Woe(e){Se.argumentLengthCheck(arguments,1,"getSetCookies"),hh(e);let t=e.getSetCookie();return t?t.map(r=>eU(r)):[]}function Joe(e){return e=Se.converters.DOMString(e),eU(e)}function tU(e,t){Se.argumentLengthCheck(arguments,2,"setCookie"),hh(e),t=Se.converters.Cookie(t);let r=Hoe(t);r&&e.append("set-cookie",r,!0)}Se.converters.DeleteCookieAttributes=Se.dictionaryConverter([{converter:Se.nullableConverter(Se.converters.DOMString),key:"path",defaultValue:()=>null},{converter:Se.nullableConverter(Se.converters.DOMString),key:"domain",defaultValue:()=>null}]);Se.converters.Cookie=Se.dictionaryConverter([{converter:Se.converters.DOMString,key:"name"},{converter:Se.converters.DOMString,key:"value"},{converter:Se.nullableConverter(e=>typeof e=="number"?Se.converters["unsigned long long"](e):new Date(e)),key:"expires",defaultValue:()=>null},{converter:Se.nullableConverter(Se.converters["long long"]),key:"maxAge",defaultValue:()=>null},{converter:Se.nullableConverter(Se.converters.DOMString),key:"domain",defaultValue:()=>null},{converter:Se.nullableConverter(Se.converters.DOMString),key:"path",defaultValue:()=>null},{converter:Se.nullableConverter(Se.converters.boolean),key:"secure",defaultValue:()=>null},{converter:Se.nullableConverter(Se.converters.boolean),key:"httpOnly",defaultValue:()=>null},{converter:Se.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Se.sequenceConverter(Se.converters.DOMString),key:"unparsed",defaultValue:()=>new Array(0)}]);rU.exports={getCookies:qoe,deleteCookie:Yoe,getSetCookies:Woe,setCookie:tU,parseCookie:Joe}});var yh=w((wTe,iU)=>{"use strict";var{webidl:X}=kt(),{kEnumerableProperty:lr}=ue(),{kConstruct:nU}=Me(),Fl=class e extends Event{#e;constructor(t,r={}){if(t===nU){super(arguments[1],arguments[2]),X.util.markAsUncloneable(this);return}let o="MessageEvent constructor";X.argumentLengthCheck(arguments,1,o),t=X.converters.DOMString(t,o,"type"),r=X.converters.MessageEventInit(r,o,"eventInitDict"),super(t,r),this.#e=r,X.util.markAsUncloneable(this)}get data(){return X.brandCheck(this,e),this.#e.data}get origin(){return X.brandCheck(this,e),this.#e.origin}get lastEventId(){return X.brandCheck(this,e),this.#e.lastEventId}get source(){return X.brandCheck(this,e),this.#e.source}get ports(){return X.brandCheck(this,e),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(t,r=!1,o=!1,n=null,i="",s="",a=null,l=[]){return X.brandCheck(this,e),X.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new e(t,{bubbles:r,cancelable:o,data:n,origin:i,lastEventId:s,source:a,ports:l})}static createFastMessageEvent(t,r){let o=new e(nU,t,r);return o.#e=r,o.#e.data??=null,o.#e.origin??="",o.#e.lastEventId??="",o.#e.source??=null,o.#e.ports??=[],o}},{createFastMessageEvent:zoe}=Fl;delete Fl.createFastMessageEvent;var gh=class e extends Event{#e;constructor(t,r={}){let o="CloseEvent constructor";X.argumentLengthCheck(arguments,1,o),t=X.converters.DOMString(t,o,"type"),r=X.converters.CloseEventInit(r),super(t,r),this.#e=r,X.util.markAsUncloneable(this)}get wasClean(){return X.brandCheck(this,e),this.#e.wasClean}get code(){return X.brandCheck(this,e),this.#e.code}get reason(){return X.brandCheck(this,e),this.#e.reason}},mh=class e extends Event{#e;constructor(t,r){let o="ErrorEvent constructor";X.argumentLengthCheck(arguments,1,o),super(t,r),X.util.markAsUncloneable(this),t=X.converters.DOMString(t,o,"type"),r=X.converters.ErrorEventInit(r??{}),this.#e=r}get message(){return X.brandCheck(this,e),this.#e.message}get filename(){return X.brandCheck(this,e),this.#e.filename}get lineno(){return X.brandCheck(this,e),this.#e.lineno}get colno(){return X.brandCheck(this,e),this.#e.colno}get error(){return X.brandCheck(this,e),this.#e.error}};Object.defineProperties(Fl.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:lr,origin:lr,lastEventId:lr,source:lr,ports:lr,initMessageEvent:lr});Object.defineProperties(gh.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:lr,code:lr,wasClean:lr});Object.defineProperties(mh.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:lr,filename:lr,lineno:lr,colno:lr,error:lr});X.converters.MessagePort=X.interfaceConverter(X.is.MessagePort,"MessagePort");X.converters["sequence<MessagePort>"]=X.sequenceConverter(X.converters.MessagePort);var A0=[{key:"bubbles",converter:X.converters.boolean,defaultValue:()=>!1},{key:"cancelable",converter:X.converters.boolean,defaultValue:()=>!1},{key:"composed",converter:X.converters.boolean,defaultValue:()=>!1}];X.converters.MessageEventInit=X.dictionaryConverter([...A0,{key:"data",converter:X.converters.any,defaultValue:()=>null},{key:"origin",converter:X.converters.USVString,defaultValue:()=>""},{key:"lastEventId",converter:X.converters.DOMString,defaultValue:()=>""},{key:"source",converter:X.nullableConverter(X.converters.MessagePort),defaultValue:()=>null},{key:"ports",converter:X.converters["sequence<MessagePort>"],defaultValue:()=>new Array(0)}]);X.converters.CloseEventInit=X.dictionaryConverter([...A0,{key:"wasClean",converter:X.converters.boolean,defaultValue:()=>!1},{key:"code",converter:X.converters["unsigned short"],defaultValue:()=>0},{key:"reason",converter:X.converters.USVString,defaultValue:()=>""}]);X.converters.ErrorEventInit=X.dictionaryConverter([...A0,{key:"message",converter:X.converters.DOMString,defaultValue:()=>""},{key:"filename",converter:X.converters.USVString,defaultValue:()=>""},{key:"lineno",converter:X.converters["unsigned long"],defaultValue:()=>0},{key:"colno",converter:X.converters["unsigned long"],defaultValue:()=>0},{key:"error",converter:X.converters.any}]);iU.exports={MessageEvent:Fl,CloseEvent:gh,ErrorEvent:mh,createFastMessageEvent:zoe}});var wi=w((STe,sU)=>{"use strict";var $oe="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",Koe={enumerable:!0,writable:!1,configurable:!1},Zoe={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},Xoe={SENT:1,RECEIVED:2},ene={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},tne=65535,rne={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},one=Buffer.allocUnsafe(0),nne={text:1,typedArray:2,arrayBuffer:3,blob:4};sU.exports={uid:$oe,sentCloseFrameState:Xoe,staticPropertyDescriptors:Koe,states:Zoe,opcodes:ene,maxUnsigned16Bit:tne,parserStates:rne,emptyBuffer:one,sendHints:nne}});var Ys=w((TTe,uU)=>{"use strict";var{states:Eh,opcodes:kl}=wi(),{isUtf8:ine}=v("node:buffer"),{collectASequenceOfCodePointsFast:sne,removeHTTPWhitespace:aU}=Sr();function ane(e){return e===Eh.CONNECTING}function lne(e){return e===Eh.OPEN}function cne(e){return e===Eh.CLOSING}function Ane(e){return e===Eh.CLOSED}function une(e,t,r=(n,i)=>new Event(n,i),o={}){let n=r(e,o);t.dispatchEvent(n)}function dne(e,t,r){e.onMessage(t,r)}function fne(e){return e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function pne(e){if(e.length===0)return!1;for(let t=0;t<e.length;++t){let r=e.charCodeAt(t);if(r<33||r>126||r===34||r===40||r===41||r===44||r===47||r===58||r===59||r===60||r===61||r===62||r===63||r===64||r===91||r===92||r===93||r===123||r===125)return!1}return!0}function hne(e){return e>=1e3&&e<1015?e!==1004&&e!==1005&&e!==1006:e>=3e3&&e<=4999}function lU(e){return e===kl.CLOSE||e===kl.PING||e===kl.PONG}function cU(e){return e===kl.CONTINUATION}function AU(e){return e===kl.TEXT||e===kl.BINARY}function gne(e){return AU(e)||cU(e)||lU(e)}function mne(e){let t={position:0},r=new Map;for(;t.position<e.length;){let o=sne(";",e,t),[n,i=""]=o.split("=",2);r.set(aU(n,!0,!1),aU(i,!1,!0)),t.position++}return r}function yne(e){for(let t=0;t<e.length;t++){let r=e.charCodeAt(t);if(r<48||r>57)return!1}return!0}function Ene(e,t){let r;try{r=new URL(e,t)}catch(o){throw new DOMException(o,"SyntaxError")}if(r.protocol==="http:"?r.protocol="ws:":r.protocol==="https:"&&(r.protocol="wss:"),r.protocol!=="ws:"&&r.protocol!=="wss:")throw new DOMException("expected a ws: or wss: url","SyntaxError");if(r.hash.length||r.href.endsWith("#"))throw new DOMException("hash","SyntaxError");return r}function Cne(e,t){if(e!==null&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");if(t!==null){let r=Buffer.byteLength(t);if(r>123)throw new DOMException(`Reason must be less than 123 bytes; received ${r}`,"SyntaxError")}}var Ine=(()=>{if(typeof process.versions.icu=="string"){let e=new TextDecoder("utf-8",{fatal:!0});return e.decode.bind(e)}return function(e){if(ine(e))return e.toString("utf-8");throw new TypeError("Invalid utf-8 received.")}})();uU.exports={isConnecting:ane,isEstablished:lne,isClosing:cne,isClosed:Ane,fireEvent:une,isValidSubprotocol:pne,isValidStatusCode:hne,websocketMessageReceived:dne,utf8Decode:Ine,isControlFrame:lU,isContinuationFrame:cU,isTextBinaryFrame:AU,isValidOpcode:gne,parseExtensions:mne,isValidClientWindowBits:yne,toArrayBuffer:fne,getURLRecord:Ene,validateCloseCodeAndReason:Cne}});var lu=w((xTe,pU)=>{"use strict";var{maxUnsigned16Bit:dU,opcodes:Bne}=wi(),Ch=8*1024,u0,au=null,Nl=Ch;try{u0=v("node:crypto")}catch{u0={randomFillSync:function(t,r,o){for(let n=0;n<t.length;++n)t[n]=Math.random()*255|0;return t}}}function fU(){return Nl===Ch&&(Nl=0,u0.randomFillSync(au??=Buffer.allocUnsafeSlow(Ch),0,Ch)),[au[Nl++],au[Nl++],au[Nl++],au[Nl++]]}var d0=class{constructor(t){this.frameData=t}createFrame(t){let r=this.frameData,o=fU(),n=r?.byteLength??0,i=n,s=6;n>dU?(s+=8,i=127):n>125&&(s+=2,i=126);let a=Buffer.allocUnsafe(n+s);a[0]=a[1]=0,a[0]|=128,a[0]=(a[0]&240)+t;a[s-4]=o[0],a[s-3]=o[1],a[s-2]=o[2],a[s-1]=o[3],a[1]=i,i===126?a.writeUInt16BE(n,2):i===127&&(a[2]=a[3]=0,a.writeUIntBE(n,4,6)),a[1]|=128;for(let l=0;l<n;++l)a[s+l]=r[l]^o[l&3];return a}static createFastTextFrame(t){let r=fU(),o=t.length;for(let a=0;a<o;++a)t[a]^=r[a&3];let n=o,i=6;o>dU?(i+=8,n=127):o>125&&(i+=2,n=126);let s=Buffer.allocUnsafeSlow(i);return s[0]=128|Bne.TEXT,s[1]=n|128,s[i-4]=r[0],s[i-3]=r[1],s[i-2]=r[2],s[i-1]=r[3],n===126?s.writeUInt16BE(o,2):n===127&&(s[2]=s[3]=0,s.writeUIntBE(o,4,6)),[s,t]}};pU.exports={WebsocketFrameSend:d0}});var Bh=w((RTe,EU)=>{"use strict";var{uid:Qne,states:Ih,sentCloseFrameState:f0,emptyBuffer:hU,opcodes:bne}=wi(),{parseExtensions:wne,isClosed:Sne,isClosing:Tne,isEstablished:mU,validateCloseCodeAndReason:xne}=Ys(),{channels:gU}=kn(),{makeRequest:Rne}=xl(),{fetching:Dne}=ou(),{Headers:Fne,getHeadersList:kne}=Gs(),{getDecodeSplit:Nne}=$t(),{WebsocketFrameSend:vne}=lu(),Pne=v("node:assert"),p0;try{p0=v("node:crypto")}catch{}function Lne(e,t,r,o,n){let i=e;i.protocol=e.protocol==="ws:"?"http:":"https:";let s=Rne({urlList:[i],client:r,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(n.headers){let A=kne(new Fne(n.headers));s.headersList=A}let a=p0.randomBytes(16).toString("base64");s.headersList.append("sec-websocket-key",a,!0),s.headersList.append("sec-websocket-version","13",!0);for(let A of t)s.headersList.append("sec-websocket-protocol",A,!0);return s.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits",!0),Dne({request:s,useParallelQueue:!0,dispatcher:n.dispatcher,processResponse(A){if(A.type==="error"&&(o.readyState=Ih.CLOSED),A.type==="error"||A.status!==101){Hn(o,1002,"Received network error or non-101 status code.");return}if(t.length!==0&&!A.headersList.get("Sec-WebSocket-Protocol")){Hn(o,1002,"Server did not respond with sent protocols.");return}if(A.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Hn(o,1002,'Server did not set Upgrade header to "websocket".');return}if(A.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Hn(o,1002,'Server did not set Connection header to "upgrade".');return}let d=A.headersList.get("Sec-WebSocket-Accept"),f=p0.createHash("sha1").update(a+Qne).digest("base64");if(d!==f){Hn(o,1002,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let u=A.headersList.get("Sec-WebSocket-Extensions"),p;if(u!==null&&(p=wne(u),!p.has("permessage-deflate"))){Hn(o,1002,"Sec-WebSocket-Extensions header does not match.");return}let h=A.headersList.get("Sec-WebSocket-Protocol");if(h!==null&&!Nne("sec-websocket-protocol",s.headersList).includes(h)){Hn(o,1002,"Protocol was not set in the opening handshake.");return}A.socket.on("data",o.onSocketData),A.socket.on("close",o.onSocketClose),A.socket.on("error",o.onSocketError),gU.open.hasSubscribers&&gU.open.publish({address:A.socket.address(),protocol:h,extensions:u}),o.wasEverConnected=!0,o.onConnectionEstablished(A,p)}})}function yU(e,t,r,o=!1){if(t??=null,r??="",o&&xne(t,r),!(Sne(e.readyState)||Tne(e.readyState)))if(!mU(e.readyState))Hn(e),e.readyState=Ih.CLOSING;else if(!e.closeState.has(f0.SENT)&&!e.closeState.has(f0.RECEIVED)){let n=new vne;r.length!==0&&t===null&&(t=1e3),Pne(t===null||Number.isInteger(t)),t===null&&r.length===0?n.frameData=hU:t!==null&&r===null?(n.frameData=Buffer.allocUnsafe(2),n.frameData.writeUInt16BE(t,0)):t!==null&&r!==null?(n.frameData=Buffer.allocUnsafe(2+Buffer.byteLength(r)),n.frameData.writeUInt16BE(t,0),n.frameData.write(r,2,"utf-8")):n.frameData=hU,e.socket.write(n.createFrame(bne.CLOSE)),e.closeState.add(f0.SENT),e.readyState=Ih.CLOSING}else e.readyState=Ih.CLOSING}function Hn(e,t,r){mU(e.readyState)&&yU(e,t,r,!1),e.controller.abort(),e.socket?.destroyed===!1&&e.socket.destroy(),e.onFail(t,r)}EU.exports={establishWebSocketConnection:Lne,failWebsocketConnection:Hn,closeWebSocketConnection:yU}});var IU=w((DTe,CU)=>{"use strict";var{createInflateRaw:Une,Z_DEFAULT_WINDOWBITS:One}=v("node:zlib"),{isValidClientWindowBits:Mne}=Ys(),_ne=Buffer.from([0,0,255,255]),Qh=Symbol("kBuffer"),bh=Symbol("kLength"),h0=class{#e;#t={};constructor(t){this.#t.serverNoContextTakeover=t.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=t.get("server_max_window_bits")}decompress(t,r,o){if(!this.#e){let n=One;if(this.#t.serverMaxWindowBits){if(!Mne(this.#t.serverMaxWindowBits)){o(new Error("Invalid server_max_window_bits"));return}n=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=Une({windowBits:n}),this.#e[Qh]=[],this.#e[bh]=0,this.#e.on("data",i=>{this.#e[Qh].push(i),this.#e[bh]+=i.length}),this.#e.on("error",i=>{this.#e=null,o(i)})}this.#e.write(t),r&&this.#e.write(_ne),this.#e.flush(()=>{let n=Buffer.concat(this.#e[Qh],this.#e[bh]);this.#e[Qh].length=0,this.#e[bh]=0,o(null,n)})}};CU.exports={PerMessageDeflate:h0}});var y0=w((FTe,SU)=>{"use strict";var{Writable:Gne}=v("node:stream"),jne=v("node:assert"),{parserStates:cr,opcodes:vl,states:Hne,emptyBuffer:BU,sentCloseFrameState:cu}=wi(),{channels:wh}=kn(),{isValidStatusCode:Vne,isValidOpcode:qne,websocketMessageReceived:QU,utf8Decode:Yne,isControlFrame:bU,isTextBinaryFrame:g0,isContinuationFrame:Wne}=Ys(),{failWebsocketConnection:kr}=Bh(),{WebsocketFrameSend:wU}=lu(),{PerMessageDeflate:Jne}=IU(),m0=class extends Gne{#e=[];#t=0;#r=0;#o=!1;#i=cr.INFO;#n={};#l=[];#s;#a;constructor(t,r){super(),this.#a=t,this.#s=r??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new Jne(r))}_write(t,r,o){this.#e.push(t),this.#r+=t.length,this.#o=!0,this.run(o)}run(t){for(;this.#o;)if(this.#i===cr.INFO){if(this.#r<2)return t();let r=this.consume(2),o=(r[0]&128)!==0,n=r[0]&15,i=(r[1]&128)===128,s=!o&&n!==vl.CONTINUATION,a=r[1]&127,l=r[0]&64,c=r[0]&32,A=r[0]&16;if(!qne(n))return kr(this.#a,1002,"Invalid opcode received"),t();if(i)return kr(this.#a,1002,"Frame cannot be masked"),t();if(l!==0&&!this.#s.has("permessage-deflate")){kr(this.#a,1002,"Expected RSV1 to be clear.");return}if(c!==0||A!==0){kr(this.#a,1002,"RSV1, RSV2, RSV3 must be clear");return}if(s&&!g0(n)){kr(this.#a,1002,"Invalid frame type was fragmented.");return}if(g0(n)&&this.#l.length>0){kr(this.#a,1002,"Expected continuation frame");return}if(this.#n.fragmented&&s){kr(this.#a,1002,"Fragmented frame exceeded 125 bytes.");return}if((a>125||s)&&bU(n)){kr(this.#a,1002,"Control frame either too large or fragmented");return}if(Wne(n)&&this.#l.length===0&&!this.#n.compressed){kr(this.#a,1002,"Unexpected continuation frame");return}a<=125?(this.#n.payloadLength=a,this.#i=cr.READ_DATA):a===126?this.#i=cr.PAYLOADLENGTH_16:a===127&&(this.#i=cr.PAYLOADLENGTH_64),g0(n)&&(this.#n.binaryType=n,this.#n.compressed=l!==0),this.#n.opcode=n,this.#n.masked=i,this.#n.fin=o,this.#n.fragmented=s}else if(this.#i===cr.PAYLOADLENGTH_16){if(this.#r<2)return t();let r=this.consume(2);this.#n.payloadLength=r.readUInt16BE(0),this.#i=cr.READ_DATA}else if(this.#i===cr.PAYLOADLENGTH_64){if(this.#r<8)return t();let r=this.consume(8),o=r.readUInt32BE(0);if(o>2**31-1){kr(this.#a,1009,"Received payload length > 2^31 bytes.");return}let n=r.readUInt32BE(4);this.#n.payloadLength=(o<<8)+n,this.#i=cr.READ_DATA}else if(this.#i===cr.READ_DATA){if(this.#r<this.#n.payloadLength)return t();let r=this.consume(this.#n.payloadLength);if(bU(this.#n.opcode))this.#o=this.parseControlFrame(r),this.#i=cr.INFO;else if(!this.#n.compressed)this.writeFragments(r),!this.#n.fragmented&&this.#n.fin&&QU(this.#a,this.#n.binaryType,this.consumeFragments()),this.#i=cr.INFO;else{this.#s.get("permessage-deflate").decompress(r,this.#n.fin,(o,n)=>{if(o){kr(this.#a,1007,o.message);return}if(this.writeFragments(n),!this.#n.fin){this.#i=cr.INFO,this.#o=!0,this.run(t);return}QU(this.#a,this.#n.binaryType,this.consumeFragments()),this.#o=!0,this.#i=cr.INFO,this.run(t)}),this.#o=!1;break}}}consume(t){if(t>this.#r)throw new Error("Called consume() before buffers satiated.");if(t===0)return BU;this.#r-=t;let r=this.#e[0];if(r.length>t)return this.#e[0]=r.subarray(t,r.length),r.subarray(0,t);if(r.length===t)return this.#e.shift();{let o=0,n=Buffer.allocUnsafeSlow(t);for(;o!==t;){let i=this.#e[0],s=i.length;if(s+o===t){n.set(this.#e.shift(),o);break}else if(s+o>t){n.set(i.subarray(0,t-o),o),this.#e[0]=i.subarray(t-o);break}else n.set(this.#e.shift(),o),o+=s}return n}}writeFragments(t){this.#t+=t.length,this.#l.push(t)}consumeFragments(){let t=this.#l;if(t.length===1)return this.#t=0,t.shift();let r=0,o=Buffer.allocUnsafeSlow(this.#t);for(let n=0;n<t.length;++n){let i=t[n];o.set(i,r),r+=i.length}return this.#l=[],this.#t=0,o}parseCloseBody(t){jne(t.length!==1);let r;if(t.length>=2&&(r=t.readUInt16BE(0)),r!==void 0&&!Vne(r))return{code:1002,reason:"Invalid status code",error:!0};let o=t.subarray(2);o[0]===239&&o[1]===187&&o[2]===191&&(o=o.subarray(3));try{o=Yne(o)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:r,reason:o,error:!1}}parseControlFrame(t){let{opcode:r,payloadLength:o}=this.#n;if(r===vl.CLOSE){if(o===1)return kr(this.#a,1002,"Received close frame with a 1-byte body."),!1;if(this.#n.closeInfo=this.parseCloseBody(t),this.#n.closeInfo.error){let{code:n,reason:i}=this.#n.closeInfo;return kr(this.#a,n,i),!1}if(!this.#a.closeState.has(cu.SENT)&&!this.#a.closeState.has(cu.RECEIVED)){let n=BU;this.#n.closeInfo.code&&(n=Buffer.allocUnsafe(2),n.writeUInt16BE(this.#n.closeInfo.code,0));let i=new wU(n);this.#a.socket.write(i.createFrame(vl.CLOSE)),this.#a.closeState.add(cu.SENT)}return this.#a.readyState=Hne.CLOSING,this.#a.closeState.add(cu.RECEIVED),!1}else if(r===vl.PING){if(!this.#a.closeState.has(cu.RECEIVED)){let n=new wU(t);this.#a.socket.write(n.createFrame(vl.PONG)),wh.ping.hasSubscribers&&wh.ping.publish({payload:t})}}else r===vl.PONG&&wh.pong.hasSubscribers&&wh.pong.publish({payload:t});return!0}get closingInfo(){return this.#n.closeInfo}};SU.exports={ByteParser:m0}});var DU=w((kTe,RU)=>{"use strict";var{WebsocketFrameSend:xU}=lu(),{opcodes:TU,sendHints:Ws}=wi(),zne=yI(),C0=class{#e=new zne;#t=!1;#r;constructor(t){this.#r=t}add(t,r,o){if(o!==Ws.blob){if(this.#t){let i={promise:null,callback:r,frame:E0(t,o)};this.#e.push(i)}else if(o===Ws.text){let{0:i,1:s}=xU.createFastTextFrame(t);this.#r.cork(),this.#r.write(i),this.#r.write(s,r),this.#r.uncork()}else this.#r.write(E0(t,o),r);return}let n={promise:t.arrayBuffer().then(i=>{n.promise=null,n.frame=E0(i,o)}),callback:r,frame:null};this.#e.push(n),this.#t||this.#o()}async#o(){this.#t=!0;let t=this.#e;for(;!t.isEmpty();){let r=t.shift();r.promise!==null&&await r.promise,this.#r.write(r.frame,r.callback),r.callback=r.frame=null}this.#t=!1}};function E0(e,t){return new xU($ne(e,t)).createFrame(t===Ws.text?TU.TEXT:TU.BINARY)}function $ne(e,t){switch(t){case Ws.text:case Ws.typedArray:return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);case Ws.arrayBuffer:case Ws.blob:return new Uint8Array(e)}}RU.exports={SendQueue:C0}});var UU=w((NTe,LU)=>{"use strict";var{webidl:ne}=kt(),{URLSerializer:Kne}=Sr(),{environmentSettingsObject:FU}=$t(),{staticPropertyDescriptors:Si,states:nn,sentCloseFrameState:I0,sendHints:Sh,opcodes:kU}=wi(),{isConnecting:Zne,isEstablished:Xne,isClosing:eie,isValidSubprotocol:tie,fireEvent:Au,utf8Decode:rie,toArrayBuffer:oie,getURLRecord:nie}=Ys(),{establishWebSocketConnection:iie,closeWebSocketConnection:sie,failWebsocketConnection:NU}=Bh(),{ByteParser:aie}=y0(),{kEnumerableProperty:eo}=ue(),{getGlobalDispatcher:lie}=jp(),{types:PU}=v("node:util"),{ErrorEvent:cie,CloseEvent:vU,createFastMessageEvent:Aie}=yh(),{SendQueue:uie}=DU(),{channels:Th}=kn(),Nr=class e extends EventTarget{#e={open:null,error:null,close:null,message:null};#t=0;#r="";#o="";#i;#n={onConnectionEstablished:(t,r)=>this.#c(t,r),onFail:(t,r)=>this.#d(t,r),onMessage:(t,r)=>this.#A(t,r),onParserError:t=>NU(this.#n,null,t.message),onParserDrain:()=>this.#u(),onSocketData:t=>{this.#a.write(t)||this.#n.socket.pause()},onSocketError:t=>{this.#n.readyState=nn.CLOSING,Th.socketError.hasSubscribers&&Th.socketError.publish(t),this.#n.socket.destroy()},onSocketClose:()=>this.#f(),readyState:nn.CONNECTING,socket:null,closeState:new Set,controller:null,wasEverConnected:!1};#l;#s;#a;constructor(t,r=[]){super(),ne.util.markAsUncloneable(this);let o="WebSocket constructor";ne.argumentLengthCheck(arguments,1,o);let n=ne.converters["DOMString or sequence<DOMString> or WebSocketInit"](r,o,"options");t=ne.converters.USVString(t),r=n.protocols;let i=FU.settingsObject.baseUrl,s=nie(t,i);if(typeof r=="string"&&(r=[r]),r.length!==new Set(r.map(l=>l.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(r.length>0&&!r.every(l=>tie(l)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this.#l=new URL(s.href);let a=FU.settingsObject;this.#n.controller=iie(s,r,a,this.#n,n),this.#n.readyState=e.CONNECTING,this.#s="blob"}close(t=void 0,r=void 0){ne.brandCheck(this,e),t!==void 0&&(t=ne.converters["unsigned short"](t,"WebSocket.close","code",{clamp:!0})),r!==void 0&&(r=ne.converters.USVString(r)),t??=null,r??="",sie(this.#n,t,r,!0)}send(t){ne.brandCheck(this,e);let r="WebSocket.send";if(ne.argumentLengthCheck(arguments,1,r),t=ne.converters.WebSocketSendData(t,r,"data"),Zne(this.#n.readyState))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!Xne(this.#n.readyState)||eie(this.#n.readyState)))if(typeof t=="string"){let o=Buffer.from(t);this.#t+=o.byteLength,this.#i.add(o,()=>{this.#t-=o.byteLength},Sh.text)}else PU.isArrayBuffer(t)?(this.#t+=t.byteLength,this.#i.add(t,()=>{this.#t-=t.byteLength},Sh.arrayBuffer)):ArrayBuffer.isView(t)?(this.#t+=t.byteLength,this.#i.add(t,()=>{this.#t-=t.byteLength},Sh.typedArray)):ne.is.Blob(t)&&(this.#t+=t.size,this.#i.add(t,()=>{this.#t-=t.size},Sh.blob))}get readyState(){return ne.brandCheck(this,e),this.#n.readyState}get bufferedAmount(){return ne.brandCheck(this,e),this.#t}get url(){return ne.brandCheck(this,e),Kne(this.#l)}get extensions(){return ne.brandCheck(this,e),this.#o}get protocol(){return ne.brandCheck(this,e),this.#r}get onopen(){return ne.brandCheck(this,e),this.#e.open}set onopen(t){ne.brandCheck(this,e),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof t=="function"?(this.#e.open=t,this.addEventListener("open",t)):this.#e.open=null}get onerror(){return ne.brandCheck(this,e),this.#e.error}set onerror(t){ne.brandCheck(this,e),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof t=="function"?(this.#e.error=t,this.addEventListener("error",t)):this.#e.error=null}get onclose(){return ne.brandCheck(this,e),this.#e.close}set onclose(t){ne.brandCheck(this,e),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof t=="function"?(this.#e.close=t,this.addEventListener("close",t)):this.#e.close=null}get onmessage(){return ne.brandCheck(this,e),this.#e.message}set onmessage(t){ne.brandCheck(this,e),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof t=="function"?(this.#e.message=t,this.addEventListener("message",t)):this.#e.message=null}get binaryType(){return ne.brandCheck(this,e),this.#s}set binaryType(t){ne.brandCheck(this,e),t!=="blob"&&t!=="arraybuffer"?this.#s="blob":this.#s=t}#c(t,r){this.#n.socket=t.socket;let o=new aie(this.#n,r);o.on("drain",()=>this.#n.onParserDrain()),o.on("error",s=>this.#n.onParserError(s)),this.#a=o,this.#i=new uie(t.socket),this.#n.readyState=nn.OPEN;let n=t.headersList.get("sec-websocket-extensions");n!==null&&(this.#o=n);let i=t.headersList.get("sec-websocket-protocol");i!==null&&(this.#r=i),Au("open",this)}#d(t,r){r&&Au("error",this,(o,n)=>new cie(o,n),{error:new Error(r),message:r}),this.#n.wasEverConnected||(this.#n.readyState=nn.CLOSED,Au("close",this,(o,n)=>new vU(o,n),{wasClean:!1,code:t,reason:r}))}#A(t,r){if(this.#n.readyState!==nn.OPEN)return;let o;if(t===kU.TEXT)try{o=rie(r)}catch{NU(this.#n,1007,"Received invalid UTF-8 in text frame.");return}else t===kU.BINARY&&(this.#s==="blob"?o=new Blob([r]):o=oie(r));Au("message",this,Aie,{origin:this.#l.origin,data:o})}#u(){this.#n.socket.resume()}#f(){let t=this.#n.closeState.has(I0.SENT)&&this.#n.closeState.has(I0.RECEIVED),r=1005,o="",n=this.#a.closingInfo;n&&!n.error?(r=n.code??1005,o=n.reason):this.#n.closeState.has(I0.RECEIVED)||(r=1006),this.#n.readyState=nn.CLOSED,Au("close",this,(i,s)=>new vU(i,s),{wasClean:t,code:r,reason:o}),Th.close.hasSubscribers&&Th.close.publish({websocket:this,code:r,reason:o})}};Nr.CONNECTING=Nr.prototype.CONNECTING=nn.CONNECTING;Nr.OPEN=Nr.prototype.OPEN=nn.OPEN;Nr.CLOSING=Nr.prototype.CLOSING=nn.CLOSING;Nr.CLOSED=Nr.prototype.CLOSED=nn.CLOSED;Object.defineProperties(Nr.prototype,{CONNECTING:Si,OPEN:Si,CLOSING:Si,CLOSED:Si,url:eo,readyState:eo,bufferedAmount:eo,onopen:eo,onerror:eo,onclose:eo,close:eo,onmessage:eo,binaryType:eo,send:eo,extensions:eo,protocol:eo,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(Nr,{CONNECTING:Si,OPEN:Si,CLOSING:Si,CLOSED:Si});ne.converters["sequence<DOMString>"]=ne.sequenceConverter(ne.converters.DOMString);ne.converters["DOMString or sequence<DOMString>"]=function(e,t,r){return ne.util.Type(e)===ne.util.Types.OBJECT&&Symbol.iterator in e?ne.converters["sequence<DOMString>"](e):ne.converters.DOMString(e,t,r)};ne.converters.WebSocketInit=ne.dictionaryConverter([{key:"protocols",converter:ne.converters["DOMString or sequence<DOMString>"],defaultValue:()=>new Array(0)},{key:"dispatcher",converter:ne.converters.any,defaultValue:()=>lie()},{key:"headers",converter:ne.nullableConverter(ne.converters.HeadersInit)}]);ne.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(e){return ne.util.Type(e)===ne.util.Types.OBJECT&&!(Symbol.iterator in e)?ne.converters.WebSocketInit(e):{protocols:ne.converters["DOMString or sequence<DOMString>"](e)}};ne.converters.WebSocketSendData=function(e){return ne.util.Type(e)===ne.util.Types.OBJECT&&(ne.is.Blob(e)||ArrayBuffer.isView(e)||PU.isArrayBuffer(e))?e:ne.converters.USVString(e)};LU.exports={WebSocket:Nr}});var B0=w((vTe,_U)=>{"use strict";var{webidl:xh}=kt(),{validateCloseCodeAndReason:die}=Ys(),{kConstruct:OU}=Me(),{kEnumerableProperty:MU}=ue(),Js=class e extends DOMException{#e;#t;constructor(t="",r=void 0){if(t=xh.converters.DOMString(t,"WebSocketError","message"),super(t,"WebSocketError"),r===OU)return;r!==null&&(r=xh.converters.WebSocketCloseInfo(r));let o=r.closeCode??null,n=r.reason??"";die(o,n),n.length!==0&&o===null&&(o=1e3),this.#e=o,this.#t=n}get closeCode(){return this.#e}get reason(){return this.#t}static createUnvalidatedWebSocketError(t,r,o){let n=new e(t,OU);return n.#e=r,n.#t=o,n}},{createUnvalidatedWebSocketError:fie}=Js;delete Js.createUnvalidatedWebSocketError;Object.defineProperties(Js.prototype,{closeCode:MU,reason:MU,[Symbol.toStringTag]:{value:"WebSocketError",writable:!1,enumerable:!1,configurable:!0}});xh.is.WebSocketError=xh.util.MakeTypeAssertion(Js);_U.exports={WebSocketError:Js,createUnvalidatedWebSocketError:fie}});var qU=w((PTe,VU)=>{"use strict";var{createDeferredPromise:Q0,environmentSettingsObject:GU}=$t(),{states:Pl,opcodes:Rh,sentCloseFrameState:Ll}=wi(),{webidl:jt}=kt(),{getURLRecord:pie,isValidSubprotocol:hie,isEstablished:gie,utf8Decode:mie}=Ys(),{establishWebSocketConnection:yie,failWebsocketConnection:b0,closeWebSocketConnection:w0}=Bh(),{types:Eie}=v("node:util"),{channels:jU}=kn(),{WebsocketFrameSend:Cie}=lu(),{ByteParser:Iie}=y0(),{WebSocketError:Bie,createUnvalidatedWebSocketError:Qie}=B0(),{utf8DecodeBytes:bie}=$t(),{kEnumerableProperty:Dh}=ue(),HU=!1,Fh=class{#e;#t;#r;#o;#i;#n;#l=!1;#s={onConnectionEstablished:(t,r)=>this.#d(t,r),onFail:(t,r)=>{},onMessage:(t,r)=>this.#A(t,r),onParserError:t=>b0(this.#s,null,t.message),onParserDrain:()=>this.#s.socket.resume(),onSocketData:t=>{this.#a.write(t)||this.#s.socket.pause()},onSocketError:t=>{this.#s.readyState=Pl.CLOSING,jU.socketError.hasSubscribers&&jU.socketError.publish(t),this.#s.socket.destroy()},onSocketClose:()=>this.#u(),readyState:Pl.CONNECTING,socket:null,closeState:new Set,controller:null,wasEverConnected:!1};#a;constructor(t,r=void 0){HU||(process.emitWarning("WebSocketStream is experimental! Expect it to change at any time.",{code:"UNDICI-WSS"}),HU=!0),jt.argumentLengthCheck(arguments,1,"WebSocket"),t=jt.converters.USVString(t),r!==null&&(r=jt.converters.WebSocketStreamOptions(r));let o=GU.settingsObject.baseUrl,n=pie(t,o),i=r.protocols;if(i.length!==new Set(i.map(a=>a.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(i.length>0&&!i.every(a=>hie(a)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(this.#e=n.toString(),this.#t=Q0(),this.#r=Q0(),r.signal!=null){let a=r.signal;if(a.aborted){this.#t.reject(a.reason),this.#r.reject(a.reason);return}a.addEventListener("abort",()=>{gie(this.#s.readyState)||(b0(this.#s),this.#s.readyState=Pl.CLOSING,this.#t.reject(a.reason),this.#r.reject(a.reason),this.#l=!0)},{once:!0})}let s=GU.settingsObject;this.#s.controller=yie(n,i,s,this.#s,r)}get url(){return this.#e.toString()}get opened(){return this.#t.promise}get closed(){return this.#r.promise}close(t=void 0){t!==null&&(t=jt.converters.WebSocketCloseInfo(t));let r=t.closeCode??null,o=t.reason;w0(this.#s,r,o,!0)}#c(t){let r=Q0(),o=null,n=null;if(ArrayBuffer.isView(t)||Eie.isArrayBuffer(t))o=new Uint8Array(ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t),n=Rh.BINARY;else{let i;try{i=jt.converters.DOMString(t)}catch(s){r.reject(s);return}o=new TextEncoder().encode(i),n=Rh.TEXT}if(!this.#s.closeState.has(Ll.SENT)&&!this.#s.closeState.has(Ll.RECEIVED)){let i=new Cie(o);this.#s.socket.write(i.createFrame(n),()=>{r.resolve(void 0)})}return r}#d(t,r){this.#s.socket=t.socket;let o=new Iie(this.#s,r);o.on("drain",()=>this.#s.onParserDrain()),o.on("error",l=>this.#s.onParserError(l)),this.#a=o,this.#s.readyState=Pl.OPEN;let n=r??"",i=t.headersList.get("sec-websocket-protocol")??"",s=new ReadableStream({start:l=>{this.#i=l},pull(l){let c;for(;l.desiredSize>0&&(c=t.socket.read())!==null;)l.enqueue(c)},cancel:l=>this.#p(l)}),a=new WritableStream({write:l=>this.#c(l),close:()=>w0(this.#s,null,null),abort:l=>this.#f(l)});this.#o=s,this.#n=a,this.#t.resolve({extensions:n,protocol:i,readable:s,writable:a})}#A(t,r){if(this.#s.readyState!==Pl.OPEN)return;let o;if(t===Rh.TEXT)try{o=mie(r)}catch{b0(this.#s,"Received invalid UTF-8 in text frame.");return}else t===Rh.BINARY&&(o=new Uint8Array(r.buffer,r.byteOffset,r.byteLength));this.#i.enqueue(o)}#u(){let t=this.#s.closeState.has(Ll.SENT)&&this.#s.closeState.has(Ll.RECEIVED);if(this.#s.readyState=Pl.CLOSED,this.#l)return;this.#s.wasEverConnected||this.#t.reject(new Bie("Socket never opened"));let r=this.#a.closingInfo,o=r?.code??1005;!this.#s.closeState.has(Ll.SENT)&&!this.#s.closeState.has(Ll.RECEIVED)&&(o=1006);let n=r?.reason==null?"":bie(Buffer.from(r.reason));if(t)this.#o.cancel().catch(()=>{}),this.#n.locked||this.#n.abort(new DOMException("A closed WebSocketStream cannot be written to","InvalidStateError")),this.#r.resolve({closeCode:o,reason:n});else{let i=Qie("unclean close",o,n);this.#i.error(i),this.#n.abort(i),this.#r.reject(i)}}#f(t){let r=null,o="";jt.is.WebSocketError(t)&&(r=t.closeCode,o=t.reason),w0(this.#s,r,o)}#p(t){this.#f(t)}};Object.defineProperties(Fh.prototype,{url:Dh,opened:Dh,closed:Dh,close:Dh,[Symbol.toStringTag]:{value:"WebSocketStream",writable:!1,enumerable:!1,configurable:!0}});jt.converters.WebSocketStreamOptions=jt.dictionaryConverter([{key:"protocols",converter:jt.sequenceConverter(jt.converters.USVString),defaultValue:()=>[]},{key:"signal",converter:jt.nullableConverter(jt.converters.AbortSignal),defaultValue:()=>null}]);jt.converters.WebSocketCloseInfo=jt.dictionaryConverter([{key:"closeCode",converter:e=>jt.converters["unsigned short"](e,{enforceRange:!0})},{key:"reason",converter:jt.converters.USVString,defaultValue:()=>""}]);VU.exports={WebSocketStream:Fh}});var S0=w((LTe,YU)=>{"use strict";function wie(e){return e.indexOf("\0")===-1}function Sie(e){if(e.length===0)return!1;for(let t=0;t<e.length;t++)if(e.charCodeAt(t)<48||e.charCodeAt(t)>57)return!1;return!0}function Tie(e){return new Promise(t=>{setTimeout(t,e).unref()})}YU.exports={isValidLastEventId:wie,isASCIINumber:Sie,delay:Tie}});var $U=w((UTe,zU)=>{"use strict";var{Transform:xie}=v("node:stream"),{isASCIINumber:WU,isValidLastEventId:JU}=S0(),Vn=[239,187,191],T0=10,kh=13,Rie=58,Die=32,x0=class extends xie{state;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(t={}){t.readableObjectMode=!0,super(t),this.state=t.eventSourceSettings||{},t.push&&(this.push=t.push)}_transform(t,r,o){if(t.length===0){o();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,t]):this.buffer=t,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===Vn[0]){o();return}this.checkBOM=!1,o();return;case 2:if(this.buffer[0]===Vn[0]&&this.buffer[1]===Vn[1]){o();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===Vn[0]&&this.buffer[1]===Vn[1]&&this.buffer[2]===Vn[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,o();return}this.checkBOM=!1;break;default:this.buffer[0]===Vn[0]&&this.buffer[1]===Vn[1]&&this.buffer[2]===Vn[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===T0){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===T0||this.buffer[this.pos]===kh){this.buffer[this.pos]===kh&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===T0||this.buffer[this.pos]===kh){this.buffer[this.pos]===kh&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}o()}parseLine(t,r){if(t.length===0)return;let o=t.indexOf(Rie);if(o===0)return;let n="",i="";if(o!==-1){n=t.subarray(0,o).toString("utf8");let s=o+1;t[s]===Die&&++s,i=t.subarray(s).toString("utf8")}else n=t.toString("utf8"),i="";switch(n){case"data":r[n]===void 0?r[n]=i:r[n]+=`
${i}`;break;case"retry":WU(i)&&(r[n]=i);break;case"id":JU(i)&&(r[n]=i);break;case"event":i.length>0&&(r[n]=i);break}}processEvent(t){t.retry&&WU(t.retry)&&(this.state.reconnectionTime=parseInt(t.retry,10)),t.id&&JU(t.id)&&(this.state.lastEventId=t.id),t.data!==void 0&&this.push({type:t.event||"message",options:{data:t.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};zU.exports={EventSourceStream:x0}});var nO=w((OTe,oO)=>{"use strict";var{pipeline:Fie}=v("node:stream"),{fetching:kie}=ou(),{makeRequest:Nie}=xl(),{webidl:qn}=kt(),{EventSourceStream:vie}=$U(),{parseMIMEType:Pie}=Sr(),{createFastMessageEvent:Lie}=yh(),{isNetworkError:KU}=tu(),{delay:Uie}=S0(),{kEnumerableProperty:zs}=ue(),{environmentSettingsObject:ZU}=$t(),XU=!1,eO=3e3,uu=0,tO=1,du=2,Oie="anonymous",Mie="use-credentials",Ul=class e extends EventTarget{#e={open:null,error:null,message:null};#t;#r=!1;#o=uu;#i=null;#n=null;#l;#s;constructor(t,r={}){super(),qn.util.markAsUncloneable(this);let o="EventSource constructor";qn.argumentLengthCheck(arguments,1,o),XU||(XU=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),t=qn.converters.USVString(t),r=qn.converters.EventSourceInitDict(r,o,"eventSourceInitDict"),this.#l=r.dispatcher,this.#s={lastEventId:"",reconnectionTime:eO};let n=ZU,i;try{i=new URL(t,n.settingsObject.baseUrl),this.#s.origin=i.origin}catch(l){throw new DOMException(l,"SyntaxError")}this.#t=i.href;let s=Oie;r.withCredentials===!0&&(s=Mie,this.#r=!0);let a={redirect:"follow",keepalive:!0,mode:"cors",credentials:s==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};a.client=ZU.settingsObject,a.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],a.cache="no-store",a.initiator="other",a.urlList=[new URL(this.#t)],this.#i=Nie(a),this.#a()}get readyState(){return this.#o}get url(){return this.#t}get withCredentials(){return this.#r}#a(){if(this.#o===du)return;this.#o=uu;let t={request:this.#i,dispatcher:this.#l},r=o=>{KU(o)&&(this.dispatchEvent(new Event("error")),this.close()),this.#c()};t.processResponseEndOfBody=r,t.processResponse=o=>{if(KU(o))if(o.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#c();return}let n=o.headersList.get("content-type",!0),i=n!==null?Pie(n):"failure",s=i!=="failure"&&i.essence==="text/event-stream";if(o.status!==200||s===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#o=tO,this.dispatchEvent(new Event("open")),this.#s.origin=o.urlList[o.urlList.length-1].origin;let a=new vie({eventSourceSettings:this.#s,push:l=>{this.dispatchEvent(Lie(l.type,l.options))}});Fie(o.body.stream,a,l=>{l?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#n=kie(t)}async#c(){this.#o!==du&&(this.#o=uu,this.dispatchEvent(new Event("error")),await Uie(this.#s.reconnectionTime),this.#o===uu&&(this.#s.lastEventId.length&&this.#i.headersList.set("last-event-id",this.#s.lastEventId,!0),this.#a()))}close(){qn.brandCheck(this,e),this.#o!==du&&(this.#o=du,this.#n.abort(),this.#i=null)}get onopen(){return this.#e.open}set onopen(t){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof t=="function"?(this.#e.open=t,this.addEventListener("open",t)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(t){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof t=="function"?(this.#e.message=t,this.addEventListener("message",t)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(t){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof t=="function"?(this.#e.error=t,this.addEventListener("error",t)):this.#e.error=null}},rO={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:uu,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:tO,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:du,writable:!1}};Object.defineProperties(Ul,rO);Object.defineProperties(Ul.prototype,rO);Object.defineProperties(Ul.prototype,{close:zs,onerror:zs,onmessage:zs,onopen:zs,readyState:zs,url:zs,withCredentials:zs});qn.converters.EventSourceInitDict=qn.dictionaryConverter([{key:"withCredentials",converter:qn.converters.boolean,defaultValue:()=>!1},{key:"dispatcher",converter:qn.converters.any}]);oO.exports={EventSource:Ul,defaultReconnectionTime:eO}});var lO=w((MTe,ee)=>{"use strict";var _ie=ks(),iO=CA(),Gie=fl(),jie=rv(),Hie=pl(),Vie=LI(),qie=wv(),Yie=Fv(),Wie=vv(),sO=Ee(),vh=ue(),{InvalidArgumentError:Nh}=sO,Ol=hP(),Jie=BA(),zie=EB(),{MockCallHistory:$ie,MockCallHistoryLog:Kie}=BB(),Zie=XP(),Xie=wB(),ese=iB(),tse=Tp(),{getGlobalDispatcher:aO,setGlobalDispatcher:rse}=jp(),ose=$A(),nse=kB();Object.assign(iO.prototype,Ol);ee.exports.Dispatcher=iO;ee.exports.Client=_ie;ee.exports.Pool=Gie;ee.exports.BalancedPool=jie;ee.exports.Agent=Hie;ee.exports.ProxyAgent=Vie;ee.exports.EnvHttpProxyAgent=qie;ee.exports.RetryAgent=Yie;ee.exports.H2CClient=Wie;ee.exports.RetryHandler=tse;ee.exports.DecoratorHandler=ose;ee.exports.RedirectHandler=nse;ee.exports.interceptors={redirect:u1(),responseError:f1(),retry:h1(),dump:m1(),dns:E1(),cache:U1()};ee.exports.cacheStores={MemoryCacheStore:GB()};var ise=_1();ee.exports.cacheStores.SqliteCacheStore=ise;ee.exports.buildConnector=Jie;ee.exports.errors=sO;ee.exports.util={parseHeaders:vh.parseHeaders,headerNameToString:vh.headerNameToString};function fu(e){return(t,r,o)=>{if(typeof r=="function"&&(o=r,r=null),!t||typeof t!="string"&&typeof t!="object"&&!(t instanceof URL))throw new Nh("invalid url");if(r!=null&&typeof r!="object")throw new Nh("invalid opts");if(r&&r.path!=null){if(typeof r.path!="string")throw new Nh("invalid opts.path");let s=r.path;r.path.startsWith("/")||(s=`/${s}`),t=new URL(vh.parseOrigin(t).origin+s)}else r||(r=typeof t=="object"?t:{}),t=vh.parseURL(t);let{agent:n,dispatcher:i=aO()}=r;if(n)throw new Nh("unsupported opts.agent. Did you mean opts.client?");return e.call(i,{...r,origin:t.origin,path:t.search?`${t.pathname}${t.search}`:t.pathname,method:r.method||(r.body?"PUT":"GET")},o)}}ee.exports.setGlobalDispatcher=rse;ee.exports.getGlobalDispatcher=aO;var sse=ou().fetch;ee.exports.fetch=async function(t,r=void 0){try{return await sse(t,r)}catch(o){throw o&&typeof o=="object"&&Error.captureStackTrace(o),o}};ee.exports.Headers=Gs().Headers;ee.exports.Response=tu().Response;ee.exports.Request=xl().Request;ee.exports.FormData=rp().FormData;var{setGlobalOrigin:ase,getGlobalOrigin:lse}=LC();ee.exports.setGlobalOrigin=ase;ee.exports.getGlobalOrigin=lse;var{CacheStorage:cse}=VL(),{kConstruct:Ase}=Me();ee.exports.caches=new cse(Ase);var{deleteCookie:use,getCookies:dse,getSetCookies:fse,setCookie:pse,parseCookie:hse}=oU();ee.exports.deleteCookie=use;ee.exports.getCookies=dse;ee.exports.getSetCookies=fse;ee.exports.setCookie=pse;ee.exports.parseCookie=hse;var{parseMIMEType:gse,serializeAMimeType:mse}=Sr();ee.exports.parseMIMEType=gse;ee.exports.serializeAMimeType=mse;var{CloseEvent:yse,ErrorEvent:Ese,MessageEvent:Cse}=yh();ee.exports.WebSocket=UU().WebSocket;ee.exports.CloseEvent=yse;ee.exports.ErrorEvent=Ese;ee.exports.MessageEvent=Cse;ee.exports.WebSocketStream=qU().WebSocketStream;ee.exports.WebSocketError=B0().WebSocketError;ee.exports.request=fu(Ol.request);ee.exports.stream=fu(Ol.stream);ee.exports.pipeline=fu(Ol.pipeline);ee.exports.connect=fu(Ol.connect);ee.exports.upgrade=fu(Ol.upgrade);ee.exports.MockClient=zie;ee.exports.MockCallHistory=$ie;ee.exports.MockCallHistoryLog=Kie;ee.exports.MockPool=Xie;ee.exports.MockAgent=Zie;ee.exports.mockErrors=ese;var{EventSource:Ise}=nO();ee.exports.EventSource=Ise});var B_=w((XLe,$ce)=>{$ce.exports=[{name:"Agola CI",constant:"AGOLA",env:"AGOLA_GIT_REF",pr:"AGOLA_PULL_REQUEST_ID"},{name:"Appcircle",constant:"APPCIRCLE",env:"AC_APPCIRCLE",pr:{env:"AC_GIT_PR",ne:"false"}},{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN",pr:{env:"CODEBUILD_WEBHOOK_EVENT",any:["PULL_REQUEST_CREATED","PULL_REQUEST_UPDATED","PULL_REQUEST_REOPENED"]}},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"TF_BUILD",pr:{BUILD_REASON:"PullRequest"}},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"Codefresh",constant:"CODEFRESH",env:"CF_BUILD_ID",pr:{any:["CF_PULL_REQUEST_NUMBER","CF_PULL_REQUEST_ID"]}},{name:"Codemagic",constant:"CODEMAGIC",env:"CM_BUILD_ID",pr:"CM_PULL_REQUEST"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"Earthly",constant:"EARTHLY",env:"EARTHLY_CI"},{name:"Expo Application Services",constant:"EAS",env:"EAS_BUILD"},{name:"Gerrit",constant:"GERRIT",env:"GERRIT_PROJECT"},{name:"Gitea Actions",constant:"GITEA_ACTIONS",env:"GITEA_ACTIONS"},{name:"GitHub Actions",constant:"GITHUB_ACTIONS",env:"GITHUB_ACTIONS",pr:{GITHUB_EVENT_NAME:"pull_request"}},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI",pr:"CI_MERGE_REQUEST_ID"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Google Cloud Build",constant:"GOOGLE_CLOUD_BUILD",env:"BUILDER_OUTPUT"},{name:"Harness CI",constant:"HARNESS",env:"HARNESS_BUILD_ID"},{name:"Heroku",constant:"HEROKU",env:{env:"NODE",includes:"/app/.heroku/node/bin/node"}},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"LayerCI",constant:"LAYERCI",env:"LAYERCI",pr:"LAYERCI_PULL_REQUEST"},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Nevercode",constant:"NEVERCODE",env:"NEVERCODE",pr:{env:"NEVERCODE_PULL_REQUEST",ne:"false"}},{name:"Prow",constant:"PROW",env:"PROW_JOB_ID"},{name:"ReleaseHub",constant:"RELEASEHUB",env:"RELEASE_BUILD_ID"},{name:"Render",constant:"RENDER",env:"RENDER",pr:{IS_PULL_REQUEST:"true"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Screwdriver",constant:"SCREWDRIVER",env:"SCREWDRIVER",pr:{env:"SD_PULL_REQUEST",ne:"false"}},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Sourcehut",constant:"SOURCEHUT",env:{CI_NAME:"sourcehut"}},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}},{name:"Vela",constant:"VELA",env:"VELA",pr:{VELA_PULL_REQUEST:"1"}},{name:"Vercel",constant:"VERCEL",env:{any:["NOW_BUILDER","VERCEL"]},pr:"VERCEL_GIT_PULL_REQUEST_ID"},{name:"Visual Studio App Center",constant:"APPCENTER",env:"APPCENTER_BUILD_ID"},{name:"Woodpecker",constant:"WOODPECKER",env:{CI:"woodpecker"},pr:{CI_BUILD_EVENT:"pull_request"}},{name:"Xcode Cloud",constant:"XCODE_CLOUD",env:"CI_XCODE_PROJECT",pr:"CI_PULL_REQUEST_NUMBER"},{name:"Xcode Server",constant:"XCODE_SERVER",env:"XCS"}]});var w_=w(bo=>{"use strict";var Q_=B_(),ht=process.env;Object.defineProperty(bo,"_vendors",{value:Q_.map(function(e){return e.constant})});bo.name=null;bo.isPR=null;bo.id=null;Q_.forEach(function(e){let r=(Array.isArray(e.env)?e.env:[e.env]).every(function(o){return b_(o)});bo[e.constant]=r,r&&(bo.name=e.name,bo.isPR=Kce(e),bo.id=e.constant)});bo.isCI=!!(ht.CI!=="false"&&(ht.BUILD_ID||ht.BUILD_NUMBER||ht.CI||ht.CI_APP_ID||ht.CI_BUILD_ID||ht.CI_BUILD_NUMBER||ht.CI_NAME||ht.CONTINUOUS_INTEGRATION||ht.RUN_ID||bo.name));function b_(e){return typeof e=="string"?!!ht[e]:"env"in e?ht[e.env]&&ht[e.env].includes(e.includes):"any"in e?e.any.some(function(t){return!!ht[t]}):Object.keys(e).every(function(t){return ht[t]===e[t]})}function Kce(e){switch(typeof e.pr){case"string":return!!ht[e.pr];case"object":return"env"in e.pr?"any"in e.pr?e.pr.any.some(function(t){return ht[e.pr.env]===t}):e.pr.env in ht&&ht[e.pr.env]!==e.pr.ne:"any"in e.pr?e.pr.any.some(function(t){return!!ht[t]}):b_(e.pr);default:return null}}});var mg=w((W_,J_)=>{"use strict";function DAe(e){if(e.length===0)return;let t=Object.create(null),r=0;for(;r<e.length;++r){let s=e.charCodeAt(r);if(na[s]!==1){if(s!==47||r===0)return;break}}if(r===e.length)return;let o=e.slice(0,r).toLowerCase(),n=++r;for(;r<e.length;++r){let s=e.charCodeAt(r);if(na[s]!==1){if(r===n||FAe(e,r,t)===void 0)return;break}}if(r===n)return;let i=e.slice(n,r).toLowerCase();return{type:o,subtype:i,params:t}}function FAe(e,t,r){for(;t<e.length;){for(;t<e.length;++t){let a=e.charCodeAt(t);if(a!==32&&a!==9)break}if(t===e.length)break;if(e.charCodeAt(t++)!==59)return;for(;t<e.length;++t){let a=e.charCodeAt(t);if(a!==32&&a!==9)break}if(t===e.length)return;let o,n=t;for(;t<e.length;++t){let a=e.charCodeAt(t);if(na[a]!==1){if(a!==61)return;break}}if(t===e.length||(o=e.slice(n,t),++t,t===e.length))return;let i="",s;if(e.charCodeAt(t)===34){s=++t;let a=!1;for(;t<e.length;++t){let l=e.charCodeAt(t);if(l===92){a?(s=t,a=!1):(i+=e.slice(s,t),a=!0);continue}if(l===34){if(a){s=t,a=!1;continue}i+=e.slice(s,t);break}if(a&&(s=t-1,a=!1),Y_[l]!==1)return}if(t===e.length)return;++t}else{for(s=t;t<e.length;++t){let a=e.charCodeAt(t);if(na[a]!==1){if(t===s)return;break}}i=e.slice(s,t)}o=o.toLowerCase(),r[o]===void 0&&(r[o]=i)}return r}function kAe(e,t){if(e.length===0)return;let r=Object.create(null),o=0;for(;o<e.length;++o){let i=e.charCodeAt(o);if(na[i]!==1){if(NAe(e,o,r,t)===void 0)return;break}}return{type:e.slice(0,o).toLowerCase(),params:r}}function NAe(e,t,r,o){for(;t<e.length;){for(;t<e.length;++t){let c=e.charCodeAt(t);if(c!==32&&c!==9)break}if(t===e.length)break;if(e.charCodeAt(t++)!==59)return;for(;t<e.length;++t){let c=e.charCodeAt(t);if(c!==32&&c!==9)break}if(t===e.length)return;let n,i=t;for(;t<e.length;++t){let c=e.charCodeAt(t);if(na[c]!==1){if(c===61)break;return}}if(t===e.length)return;let s="",a,l;if(n=e.slice(i,t),n.charCodeAt(n.length-1)===42){let c=++t;for(;t<e.length;++t){let d=e.charCodeAt(t);if(PAe[d]!==1){if(d!==39)return;break}}if(t===e.length)return;for(l=e.slice(c,t),++t;t<e.length&&e.charCodeAt(t)!==39;++t);if(t===e.length||(++t,t===e.length))return;a=t;let A=0;for(;t<e.length;++t){let d=e.charCodeAt(t);if(LAe[d]!==1){if(d===37){let f,u;if(t+2<e.length&&(f=H_[e.charCodeAt(t+1)])!==-1&&(u=H_[e.charCodeAt(t+2)])!==-1){let p=(f<<4)+u;s+=e.slice(a,t),s+=String.fromCharCode(p),t+=2,a=t+1,p>=128?A=2:A===0&&(A=1);continue}return}break}}if(s+=e.slice(a,t),s=q_(s,l,A),s===void 0)return}else{if(++t,t===e.length)return;if(e.charCodeAt(t)===34){a=++t;let c=!1;for(;t<e.length;++t){let A=e.charCodeAt(t);if(A===92){c?(a=t,c=!1):(s+=e.slice(a,t),c=!0);continue}if(A===34){if(c){a=t,c=!1;continue}s+=e.slice(a,t);break}if(c&&(a=t-1,c=!1),Y_[A]!==1)return}if(t===e.length)return;++t}else{for(a=t;t<e.length;++t){let c=e.charCodeAt(t);if(na[c]!==1){if(t===a)return;break}}s=e.slice(a,t)}if(s=o(s,2),s===void 0)return}n=n.toLowerCase(),r[n]===void 0&&(r[n]=s)}return r}function V_(e){let t;for(;;)switch(e){case"utf-8":case"utf8":return Ou.utf8;case"latin1":case"ascii":case"us-ascii":case"iso-8859-1":case"iso8859-1":case"iso88591":case"iso_8859-1":case"windows-1252":case"iso_8859-1:1987":case"cp1252":case"x-cp1252":return Ou.latin1;case"utf16le":case"utf-16le":case"ucs2":case"ucs-2":return Ou.utf16le;case"base64":return Ou.base64;default:if(t===void 0){t=!0,e=e.toLowerCase();continue}return Ou.other.bind(e)}}var Ou={utf8:(e,t)=>{if(e.length===0)return"";if(typeof e=="string"){if(t<2)return e;e=Buffer.from(e,"latin1")}return e.utf8Slice(0,e.length)},latin1:(e,t)=>e.length===0?"":typeof e=="string"?e:e.latin1Slice(0,e.length),utf16le:(e,t)=>e.length===0?"":(typeof e=="string"&&(e=Buffer.from(e,"latin1")),e.ucs2Slice(0,e.length)),base64:(e,t)=>e.length===0?"":(typeof e=="string"&&(e=Buffer.from(e,"latin1")),e.base64Slice(0,e.length)),other:(e,t)=>{if(e.length===0)return"";typeof e=="string"&&(e=Buffer.from(e,"latin1"));try{return new TextDecoder(W_).decode(e)}catch{}}};function q_(e,t,r){let o=V_(t);if(o)return o(e,r)}function vAe(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;--t)switch(e.charCodeAt(t)){case 47:case 92:return e=e.slice(t+1),e===".."||e==="."?"":e}return e===".."||e==="."?"":e}var na=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Y_=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],PAe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,0,0,0,1,0,1,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],LAe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],H_=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];J_.exports={basename:vAe,convertToUTF8:q_,getDecoder:V_,parseContentType:DAe,parseDisposition:kAe}});var Z_=w((ROe,K_)=>{"use strict";function z_(e,t,r,o,n){for(let i=0;i<n;++i)if(e[t+i]!==r[o+i])return!1;return!0}var QQ=class{constructor(t,r){if(typeof r!="function")throw new Error("Missing match callback");if(typeof t=="string")t=Buffer.from(t);else if(!Buffer.isBuffer(t))throw new Error(`Expected Buffer for needle, got ${typeof t}`);let o=t.length;if(this.maxMatches=1/0,this.matches=0,this._cb=r,this._lookbehindSize=0,this._needle=t,this._bufPos=0,this._lookbehind=Buffer.allocUnsafe(o),this._occ=[o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o],o>1)for(let n=0;n<o-1;++n)this._occ[t[n]]=o-1-n}reset(){this.matches=0,this._lookbehindSize=0,this._bufPos=0}push(t,r){let o;Buffer.isBuffer(t)||(t=Buffer.from(t,"latin1"));let n=t.length;for(this._bufPos=r||0;o!==n&&this.matches<this.maxMatches;)o=UAe(this,t);return o}destroy(){let t=this._lookbehindSize;t&&this._cb(!1,this._lookbehind,0,t,!1),this.reset()}};function UAe(e,t){let r=t.length,o=e._needle,n=o.length,i=-e._lookbehindSize,s=n-1,a=o[s],l=r-n,c=e._occ,A=e._lookbehind;if(i<0){for(;i<0&&i<=l;){let f=i+s,u=f<0?A[e._lookbehindSize+f]:t[f];if(u===a&&$_(e,t,i,s))return e._lookbehindSize=0,++e.matches,i>-e._lookbehindSize?e._cb(!0,A,0,e._lookbehindSize+i,!1):e._cb(!0,void 0,0,0,!0),e._bufPos=i+n;i+=c[u]}for(;i<0&&!$_(e,t,i,r-i);)++i;if(i<0){let f=e._lookbehindSize+i;return f>0&&e._cb(!1,A,0,f,!1),e._lookbehindSize-=f,A.copy(A,0,f,e._lookbehindSize),A.set(t,e._lookbehindSize),e._lookbehindSize+=r,e._bufPos=r,r}e._cb(!1,A,0,e._lookbehindSize,!1),e._lookbehindSize=0}i+=e._bufPos;let d=o[0];for(;i<=l;){let f=t[i+s];if(f===a&&t[i]===d&&z_(o,0,t,i,s))return++e.matches,i>0?e._cb(!0,t,e._bufPos,i,!0):e._cb(!0,void 0,0,0,!0),e._bufPos=i+n;i+=c[f]}for(;i<r;){if(t[i]!==d||!z_(t,i,o,0,r-i)){++i;continue}t.copy(A,0,i,r),e._lookbehindSize=r-i;break}return i>0&&e._cb(!1,t,e._bufPos,i<r?i:r,!0),e._bufPos=r,r}function $_(e,t,r,o){let n=e._lookbehind,i=e._lookbehindSize,s=e._needle;for(let a=0;a<o;++a,++r)if((r<0?n[i+r]:t[r])!==s[a])return!1;return!0}K_.exports=QQ});var a2=w((DOe,s2)=>{"use strict";var{Readable:OAe,Writable:MAe}=v("stream"),_Ae=Z_(),{basename:GAe,convertToUTF8:X_,getDecoder:jAe,parseContentType:HAe,parseDisposition:VAe}=mg(),qAe=Buffer.from(`\r
`),YAe=Buffer.from("\r"),WAe=Buffer.from("-");function e2(){}var JAe=2e3,zl=16*1024,yg=0,t2=1,r2=2,bQ=class{constructor(t){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=yg,this.name="",this.value="",this.crlf=0,this.cb=t}reset(){this.header=Object.create(null),this.pairCount=0,this.byteCount=0,this.state=yg,this.name="",this.value="",this.crlf=0}push(t,r,o){let n=r;for(;r<o;)switch(this.state){case yg:{let i=!1;for(;r<o;++r){if(this.byteCount===zl)return-1;++this.byteCount;let s=t[r];if(KAe[s]!==1){if(s!==58||(this.name+=t.latin1Slice(n,r),this.name.length===0))return-1;++r,i=!0,this.state=t2;break}}if(!i){this.name+=t.latin1Slice(n,r);break}}case t2:{let i=!1;for(;r<o;++r){if(this.byteCount===zl)return-1;++this.byteCount;let s=t[r];if(s!==32&&s!==9){n=r,i=!0,this.state=r2;break}}if(!i)break}case r2:switch(this.crlf){case 0:for(;r<o;++r){if(this.byteCount===zl)return-1;++this.byteCount;let i=t[r];if(ZAe[i]!==1){if(i!==13)return-1;++this.crlf;break}}this.value+=t.latin1Slice(n,r++);break;case 1:if(this.byteCount===zl||(++this.byteCount,t[r++]!==10))return-1;++this.crlf;break;case 2:{if(this.byteCount===zl)return-1;++this.byteCount;let i=t[r];i===32||i===9?(n=r,this.crlf=0):(++this.pairCount<JAe&&(this.name=this.name.toLowerCase(),this.header[this.name]===void 0?this.header[this.name]=[this.value]:this.header[this.name].push(this.value)),i===13?(++this.crlf,++r):(n=r,this.crlf=0,this.state=yg,this.name="",this.value=""));break}case 3:{if(this.byteCount===zl||(++this.byteCount,t[r++]!==10))return-1;let i=this.header;return this.reset(),this.cb(i),r}}break}return r}},wQ=class extends OAe{constructor(t,r){super(t),this.truncated=!1,this._readcb=null,this.once("end",()=>{if(this._read(),--r._fileEndsLeft===0&&r._finalcb){let o=r._finalcb;r._finalcb=null,process.nextTick(o)}})}_read(t){let r=this._readcb;r&&(this._readcb=null,r())}},o2={push:(e,t)=>{},destroy:()=>{}};function zAe(e,t){let r=e._writecb;e._writecb=null,t?e.destroy(t):r&&r()}function $Ae(e,t){return e}var SQ=class extends MAe{constructor(t){let r={autoDestroy:!0,emitClose:!0,highWaterMark:typeof t.highWaterMark=="number"?t.highWaterMark:void 0};if(super(r),!t.conType.params||typeof t.conType.params.boundary!="string")throw new Error("Multipart: Boundary not found");let o=t.conType.params.boundary,n=typeof t.defParamCharset=="string"&&t.defParamCharset?jAe(t.defParamCharset):$Ae,i=t.defCharset||"utf8",s=t.preservePath,a={autoDestroy:!0,emitClose:!0,highWaterMark:typeof t.fileHwm=="number"?t.fileHwm:void 0},l=t.limits,c=l&&typeof l.fieldSize=="number"?l.fieldSize:1*1024*1024,A=l&&typeof l.fileSize=="number"?l.fileSize:1/0,d=l&&typeof l.files=="number"?l.files:1/0,f=l&&typeof l.fields=="number"?l.fields:1/0,u=l&&typeof l.parts=="number"?l.parts:1/0,p=-1,h=0,g=0,m=!1;this._fileEndsLeft=0,this._fileStream=void 0,this._complete=!1;let y=0,E,I=0,C,B,R,x,S=!1,Q=!1,T=!1;this._hparser=null;let D=new bQ(U=>{this._hparser=null,m=!1,R="text/plain",C=i,B="7bit",x=void 0,S=!1;let _;if(!U["content-disposition"]){m=!0;return}let Y=VAe(U["content-disposition"][0],n);if(!Y||Y.type!=="form-data"){m=!0;return}if(Y.params&&(Y.params.name&&(x=Y.params.name),Y.params["filename*"]?_=Y.params["filename*"]:Y.params.filename&&(_=Y.params.filename),_!==void 0&&!s&&(_=GAe(_))),U["content-type"]){let ce=HAe(U["content-type"][0]);ce&&(R=`${ce.type}/${ce.subtype}`,ce.params&&typeof ce.params.charset=="string"&&(C=ce.params.charset.toLowerCase()))}if(U["content-transfer-encoding"]&&(B=U["content-transfer-encoding"][0].toLowerCase()),R==="application/octet-stream"||_!==void 0){if(g===d){Q||(Q=!0,this.emit("filesLimit")),m=!0;return}if(++g,this.listenerCount("file")===0){m=!0;return}y=0,this._fileStream=new wQ(a,this),++this._fileEndsLeft,this.emit("file",x,this._fileStream,{filename:_,encoding:B,mimeType:R})}else{if(h===f){T||(T=!0,this.emit("fieldsLimit")),m=!0;return}if(++h,this.listenerCount("field")===0){m=!0;return}E=[],I=0}}),k=0,P=(U,_,Y,ce,he)=>{e:for(;_;){if(this._hparser!==null){let G=this._hparser.push(_,Y,ce);if(G===-1){this._hparser=null,D.reset(),this.emit("error",new Error("Malformed part header"));break}Y=G}if(Y===ce)break;if(k!==0){if(k===1){switch(_[Y]){case 45:k=2,++Y;break;case 13:k=3,++Y;break;default:k=0}if(Y===ce)return}if(k===2){if(k=0,_[Y]===45){this._complete=!0,this._bparser=o2;return}let G=this._writecb;this._writecb=e2,P(!1,WAe,0,1,!1),this._writecb=G}else if(k===3)if(k=0,_[Y]===10){if(++Y,p>=u||(this._hparser=D,Y===ce))break;continue e}else{let G=this._writecb;this._writecb=e2,P(!1,YAe,0,1,!1),this._writecb=G}}if(!m){if(this._fileStream){let G,M=Math.min(ce-Y,A-y);he?G=_.slice(Y,Y+M):(G=Buffer.allocUnsafe(M),_.copy(G,0,Y,Y+M)),y+=G.length,y===A?(G.length>0&&this._fileStream.push(G),this._fileStream.emit("limit"),this._fileStream.truncated=!0,m=!0):this._fileStream.push(G)||(this._writecb&&(this._fileStream._readcb=this._writecb),this._writecb=null)}else if(E!==void 0){let G,M=Math.min(ce-Y,c-I);he?G=_.slice(Y,Y+M):(G=Buffer.allocUnsafe(M),_.copy(G,0,Y,Y+M)),I+=M,E.push(G),I===c&&(m=!0,S=!0)}}break}if(U){if(k=1,this._fileStream)this._fileStream.push(null),this._fileStream=null;else if(E!==void 0){let G;switch(E.length){case 0:G="";break;case 1:G=X_(E[0],C,0);break;default:G=X_(Buffer.concat(E,I),C,0)}E=void 0,I=0,this.emit("field",x,G,{nameTruncated:!1,valueTruncated:S,encoding:B,mimeType:R})}++p===u&&this.emit("partsLimit")}};this._bparser=new _Ae(`\r
--${o}`,P),this._writecb=null,this._finalcb=null,this.write(qAe)}static detect(t){return t.type==="multipart"&&t.subtype==="form-data"}_write(t,r,o){this._writecb=o,this._bparser.push(t,0),this._writecb&&zAe(this)}_destroy(t,r){this._hparser=null,this._bparser=o2,t||(t=i2(this));let o=this._fileStream;o&&(this._fileStream=null,o.destroy(t)),r(t)}_final(t){if(this._bparser.destroy(),!this._complete)return t(new Error("Unexpected end of form"));this._fileEndsLeft?this._finalcb=n2.bind(null,this,t):n2(this,t)}};function n2(e,t,r){if(r)return t(r);r=i2(e),t(r)}function i2(e){if(e._hparser)return new Error("Malformed part header");let t=e._fileStream;if(t&&(e._fileStream=null,t.destroy(new Error("Unexpected end of file"))),!e._complete)return new Error("Unexpected end of form")}var KAe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ZAe=[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];s2.exports=SQ});var c2=w((FOe,l2)=>{"use strict";var{Writable:XAe}=v("stream"),{getDecoder:eue}=mg(),FQ=class extends XAe{constructor(t){let r={autoDestroy:!0,emitClose:!0,highWaterMark:typeof t.highWaterMark=="number"?t.highWaterMark:void 0};super(r);let o=t.defCharset||"utf8";t.conType.params&&typeof t.conType.params.charset=="string"&&(o=t.conType.params.charset),this.charset=o;let n=t.limits;this.fieldSizeLimit=n&&typeof n.fieldSize=="number"?n.fieldSize:1*1024*1024,this.fieldsLimit=n&&typeof n.fields=="number"?n.fields:1/0,this.fieldNameSizeLimit=n&&typeof n.fieldNameSize=="number"?n.fieldNameSize:100,this._inKey=!0,this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,this._fields=0,this._key="",this._val="",this._byte=-2,this._lastPos=0,this._encode=0,this._decoder=eue(o)}static detect(t){return t.type==="application"&&t.subtype==="x-www-form-urlencoded"}_write(t,r,o){if(this._fields>=this.fieldsLimit)return o();let n=0,i=t.length;if(this._lastPos=0,this._byte!==-2){if(n=TQ(this,t,n,i),n===-1)return o(new Error("Malformed urlencoded form"));if(n>=i)return o();this._inKey?++this._bytesKey:++this._bytesVal}e:for(;n<i;)if(this._inKey){for(n=xQ(this,t,n,i);n<i;){switch(t[n]){case 61:this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._key=this._decoder(this._key,this._encode),this._encode=0,this._inKey=!1;continue e;case 38:if(this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._key=this._decoder(this._key,this._encode),this._encode=0,this._bytesKey>0&&this.emit("field",this._key,"",{nameTruncated:this._keyTrunc,valueTruncated:!1,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),o();continue;case 43:this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n)),this._key+=" ",this._lastPos=n+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n)),this._lastPos=n+1,this._byte=-1,n=TQ(this,t,n+1,i),n===-1)return o(new Error("Malformed urlencoded form"));if(n>=i)return o();++this._bytesKey,n=xQ(this,t,n,i);continue}++n,++this._bytesKey,n=xQ(this,t,n,i)}this._lastPos<n&&(this._key+=t.latin1Slice(this._lastPos,n))}else{for(n=RQ(this,t,n,i);n<i;){switch(t[n]){case 38:if(this._lastPos<n&&(this._val+=t.latin1Slice(this._lastPos,n)),this._lastPos=++n,this._inKey=!0,this._val=this._decoder(this._val,this._encode),this._encode=0,(this._bytesKey>0||this._bytesVal>0)&&this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"}),this._key="",this._val="",this._keyTrunc=!1,this._valTrunc=!1,this._bytesKey=0,this._bytesVal=0,++this._fields>=this.fieldsLimit)return this.emit("fieldsLimit"),o();continue e;case 43:this._lastPos<n&&(this._val+=t.latin1Slice(this._lastPos,n)),this._val+=" ",this._lastPos=n+1;break;case 37:if(this._encode===0&&(this._encode=1),this._lastPos<n&&(this._val+=t.latin1Slice(this._lastPos,n)),this._lastPos=n+1,this._byte=-1,n=TQ(this,t,n+1,i),n===-1)return o(new Error("Malformed urlencoded form"));if(n>=i)return o();++this._bytesVal,n=RQ(this,t,n,i);continue}++n,++this._bytesVal,n=RQ(this,t,n,i)}this._lastPos<n&&(this._val+=t.latin1Slice(this._lastPos,n))}o()}_final(t){if(this._byte!==-2)return t(new Error("Malformed urlencoded form"));(!this._inKey||this._bytesKey>0||this._bytesVal>0)&&(this._inKey?this._key=this._decoder(this._key,this._encode):this._val=this._decoder(this._val,this._encode),this.emit("field",this._key,this._val,{nameTruncated:this._keyTrunc,valueTruncated:this._valTrunc,encoding:this.charset,mimeType:"text/plain"})),t()}};function TQ(e,t,r,o){if(r>=o)return o;if(e._byte===-1){let n=DQ[t[r++]];if(n===-1)return-1;if(n>=8&&(e._encode=2),r<o){let i=DQ[t[r++]];if(i===-1)return-1;e._inKey?e._key+=String.fromCharCode((n<<4)+i):e._val+=String.fromCharCode((n<<4)+i),e._byte=-2,e._lastPos=r}else e._byte=n}else{let n=DQ[t[r++]];if(n===-1)return-1;e._inKey?e._key+=String.fromCharCode((e._byte<<4)+n):e._val+=String.fromCharCode((e._byte<<4)+n),e._byte=-2,e._lastPos=r}return r}function xQ(e,t,r,o){if(e._bytesKey>e.fieldNameSizeLimit){for(e._keyTrunc||e._lastPos<r&&(e._key+=t.latin1Slice(e._lastPos,r-1)),e._keyTrunc=!0;r<o;++r){let n=t[r];if(n===61||n===38)break;++e._bytesKey}e._lastPos=r}return r}function RQ(e,t,r,o){if(e._bytesVal>e.fieldSizeLimit){for(e._valTrunc||e._lastPos<r&&(e._val+=t.latin1Slice(e._lastPos,r-1)),e._valTrunc=!0;r<o&&t[r]!==38;++r)++e._bytesVal;e._lastPos=r}return r}var DQ=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1];l2.exports=FQ});var u2=w((kOe,A2)=>{"use strict";var{parseContentType:tue}=mg();function rue(e){let t=e.headers,r=tue(t["content-type"]);if(!r)throw new Error("Malformed content type");for(let o of oue){if(!o.detect(r))continue;let i={limits:e.limits,headers:t,conType:r,highWaterMark:void 0,fileHwm:void 0,defCharset:void 0,defParamCharset:void 0,preservePath:!1};return e.highWaterMark&&(i.highWaterMark=e.highWaterMark),e.fileHwm&&(i.fileHwm=e.fileHwm),i.defCharset=e.defCharset,i.defParamCharset=e.defParamCharset,i.preservePath=e.preservePath,new o(i)}throw new Error(`Unsupported content type: ${t["content-type"]}`)}var oue=[a2(),c2()].filter(function(e){return typeof e.detect=="function"});A2.exports=e=>{if((typeof e!="object"||e===null)&&(e={}),typeof e.headers!="object"||e.headers===null||typeof e.headers["content-type"]!="string")throw new Error("Missing Content-Type");return rue(e)}});var jQ=w((_Q,GQ)=>{"use strict";(function(e,t){typeof v=="function"&&typeof _Q=="object"&&typeof GQ=="object"?GQ.exports=t():typeof define=="function"&&define.amd?define(function(){return t()}):e.pluralize=t()})(_Q,function(){var e=[],t=[],r={},o={},n={};function i(u){return typeof u=="string"?new RegExp("^"+u+"$","i"):u}function s(u,p){return u===p?p:u===u.toLowerCase()?p.toLowerCase():u===u.toUpperCase()?p.toUpperCase():u[0]===u[0].toUpperCase()?p.charAt(0).toUpperCase()+p.substr(1).toLowerCase():p.toLowerCase()}function a(u,p){return u.replace(/\$(\d{1,2})/g,function(h,g){return p[g]||""})}function l(u,p){return u.replace(p[0],function(h,g){var m=a(p[1],arguments);return s(h===""?u[g-1]:h,m)})}function c(u,p,h){if(!u.length||r.hasOwnProperty(u))return p;for(var g=h.length;g--;){var m=h[g];if(m[0].test(p))return l(p,m)}return p}function A(u,p,h){return function(g){var m=g.toLowerCase();return p.hasOwnProperty(m)?s(g,m):u.hasOwnProperty(m)?s(g,u[m]):c(m,g,h)}}function d(u,p,h,g){return function(m){var y=m.toLowerCase();return p.hasOwnProperty(y)?!0:u.hasOwnProperty(y)?!1:c(y,y,h)===y}}function f(u,p,h){var g=p===1?f.singular(u):f.plural(u);return(h?p+" ":"")+g}return f.plural=A(n,o,e),f.isPlural=d(n,o,e),f.singular=A(o,n,t),f.isSingular=d(o,n,t),f.addPluralRule=function(u,p){e.push([i(u),p])},f.addSingularRule=function(u,p){t.push([i(u),p])},f.addUncountableRule=function(u){if(typeof u=="string"){r[u.toLowerCase()]=!0;return}f.addPluralRule(u,"$0"),f.addSingularRule(u,"$0")},f.addIrregularRule=function(u,p){p=p.toLowerCase(),u=u.toLowerCase(),n[u]=p,o[p]=u},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(u){return f.addIrregularRule(u[0],u[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(u){return f.addPluralRule(u[0],u[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(u){return f.addSingularRule(u[0],u[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(f.addUncountableRule),f})});var ub=w(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.DEFAULT_COLOR_MAP=void 0;tc.DEFAULT_COLOR_MAP={red:"\x1B[31m",green:"\x1B[32m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",white:"\x1B[37m",white_bold:"\x1B[01m",reset:"\x1B[0m"};var Ab=class{constructor(t=tc.DEFAULT_COLOR_MAP){this.text="",this.colorMap=t}addCharsWithColor(t,r){let o=this.colorMap[t];this.text+=o!==void 0?`${o}${r}${this.colorMap.reset}`:r}renderConsole(){return this.text}};tc.default=Ab});var Wu=w(mt=>{"use strict";Object.defineProperty(mt,"__esModule",{value:!0});mt.DEFAULT_HEADER_ALIGNMENT=mt.DEFAULT_ROW_ALIGNMENT=mt.DEFAULT_HEADER_FONT_COLOR=mt.DEFAULT_ROW_FONT_COLOR=mt.COLORS=mt.ALIGNMENTS=mt.DEFAULT_TABLE_STYLE=mt.DEFAULT_ROW_SEPARATOR=mt.DEFAULT_COLUMN_LEN=void 0;mt.DEFAULT_COLUMN_LEN=20;mt.DEFAULT_ROW_SEPARATOR=!1;mt.DEFAULT_TABLE_STYLE={headerTop:{left:"\u250C",mid:"\u252C",right:"\u2510",other:"\u2500"},headerBottom:{left:"\u251C",mid:"\u253C",right:"\u2524",other:"\u2500"},tableBottom:{left:"\u2514",mid:"\u2534",right:"\u2518",other:"\u2500"},vertical:"\u2502",rowSeparator:{left:"\u251C",mid:"\u253C",right:"\u2524",other:"\u2500"}};mt.ALIGNMENTS=["right","left","center"];mt.COLORS=["red","green","yellow","white","blue","magenta","cyan","white_bold","reset"];mt.DEFAULT_ROW_FONT_COLOR="white";mt.DEFAULT_HEADER_FONT_COLOR="white_bold";mt.DEFAULT_ROW_ALIGNMENT="right";mt.DEFAULT_HEADER_ALIGNMENT="center"});var db=w(zn=>{"use strict";Object.defineProperty(zn,"__esModule",{value:!0});zn.rawColumnToInternalColumn=zn.objIfExists=void 0;var Zue=Wu(),Xue=(e,t)=>t?{[e]:t}:{};zn.objIfExists=Xue;var ede=e=>{var t;return Object.assign(Object.assign(Object.assign(Object.assign({name:e.name,title:(t=e.title)!==null&&t!==void 0?t:e.name},(0,zn.objIfExists)("color",e.color)),(0,zn.objIfExists)("maxLen",e.maxLen)),(0,zn.objIfExists)("minLen",e.minLen)),{alignment:e.alignment||Zue.DEFAULT_ROW_ALIGNMENT})};zn.rawColumnToInternalColumn=ede});var dj=w(fb=>{"use strict";Object.defineProperty(fb,"__esModule",{value:!0});var tde=[{first:768,last:879},{first:1155,last:1158},{first:1160,last:1161},{first:1425,last:1469},{first:1471,last:1471},{first:1473,last:1474},{first:1476,last:1477},{first:1479,last:1479},{first:1536,last:1539},{first:1552,last:1557},{first:1611,last:1630},{first:1648,last:1648},{first:1750,last:1764},{first:1767,last:1768},{first:1770,last:1773},{first:1807,last:1807},{first:1809,last:1809},{first:1840,last:1866},{first:1958,last:1968},{first:2027,last:2035},{first:2305,last:2306},{first:2364,last:2364},{first:2369,last:2376},{first:2381,last:2381},{first:2385,last:2388},{first:2402,last:2403},{first:2433,last:2433},{first:2492,last:2492},{first:2497,last:2500},{first:2509,last:2509},{first:2530,last:2531},{first:2561,last:2562},{first:2620,last:2620},{first:2625,last:2626},{first:2631,last:2632},{first:2635,last:2637},{first:2672,last:2673},{first:2689,last:2690},{first:2748,last:2748},{first:2753,last:2757},{first:2759,last:2760},{first:2765,last:2765},{first:2786,last:2787},{first:2817,last:2817},{first:2876,last:2876},{first:2879,last:2879},{first:2881,last:2883},{first:2893,last:2893},{first:2902,last:2902},{first:2946,last:2946},{first:3008,last:3008},{first:3021,last:3021},{first:3134,last:3136},{first:3142,last:3144},{first:3146,last:3149},{first:3157,last:3158},{first:3260,last:3260},{first:3263,last:3263},{first:3270,last:3270},{first:3276,last:3277},{first:3298,last:3299},{first:3393,last:3395},{first:3405,last:3405},{first:3530,last:3530},{first:3538,last:3540},{first:3542,last:3542},{first:3633,last:3633},{first:3636,last:3642},{first:3655,last:3662},{first:3761,last:3761},{first:3764,last:3769},{first:3771,last:3772},{first:3784,last:3789},{first:3864,last:3865},{first:3893,last:3893},{first:3895,last:3895},{first:3897,last:3897},{first:3953,last:3966},{first:3968,last:3972},{first:3974,last:3975},{first:3984,last:3991},{first:3993,last:4028},{first:4038,last:4038},{first:4141,last:4144},{first:4146,last:4146},{first:4150,last:4151},{first:4153,last:4153},{first:4184,last:4185},{first:4448,last:4607},{first:4959,last:4959},{first:5906,last:5908},{first:5938,last:5940},{first:5970,last:5971},{first:6002,last:6003},{first:6068,last:6069},{first:6071,last:6077},{first:6086,last:6086},{first:6089,last:6099},{first:6109,last:6109},{first:6155,last:6157},{first:6313,last:6313},{first:6432,last:6434},{first:6439,last:6440},{first:6450,last:6450},{first:6457,last:6459},{first:6679,last:6680},{first:6912,last:6915},{first:6964,last:6964},{first:6966,last:6970},{first:6972,last:6972},{first:6978,last:6978},{first:7019,last:7027},{first:7616,last:7626},{first:7678,last:7679},{first:8203,last:8207},{first:8234,last:8238},{first:8288,last:8291},{first:8298,last:8303},{first:8400,last:8431},{first:12330,last:12335},{first:12441,last:12442},{first:43014,last:43014},{first:43019,last:43019},{first:43045,last:43046},{first:64286,last:64286},{first:65024,last:65039},{first:65056,last:65059},{first:65279,last:65279},{first:65529,last:65531},{first:68097,last:68099},{first:68101,last:68102},{first:68108,last:68111},{first:68152,last:68154},{first:68159,last:68159},{first:119143,last:119145},{first:119155,last:119170},{first:119173,last:119179},{first:119210,last:119213},{first:119362,last:119364},{first:917505,last:917505},{first:917536,last:917631},{first:917760,last:917999}];fb.default=tde});var fj=w(pb=>{"use strict";Object.defineProperty(pb,"__esModule",{value:!0});var rde=(e,t,r)=>{let o=0,n,i=r;if(e<t[0].first||e>t[i].last)return 0;for(;i>=o;)if(n=Math.floor((o+i)/2),e>t[n].last)o=n+1;else if(e<t[n].first)i=n-1;else return 1;return 0};pb.default=rde});var hb=w(Ju=>{"use strict";var hj=Ju&&Ju.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ju,"__esModule",{value:!0});var pj=hj(dj()),ode=hj(fj()),nde=e=>e===0?0:e<32||e>=127&&e<160?-1:ode.default(e,pj.default,pj.default.length-1)?0:1+ +(e>=4352&&(e<=4447||e===9001||e===9002||e>=11904&&e<=42191&&e!==12351||e>=44032&&e<=55203||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65135||e>=65280&&e<=65376||e>=65504&&e<=65510||e>=131072&&e<=196605||e>=196608&&e<=262141));Ju.default=nde});var gj=w(zu=>{"use strict";var ide=zu&&zu.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zu,"__esModule",{value:!0});var sde=ide(hb()),ade=e=>{let t=0;for(let r=0;r<e.length;r++){let o=e.charCodeAt(r),n=sde.default(o);if(n<0)return-1;t+=n}return t};zu.default=ade});var yj=w(Gi=>{"use strict";var mj=Gi&&Gi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gi,"__esModule",{value:!0});Gi.wcswidth=Gi.wcwidth=void 0;var lde=mj(gj());Gi.wcswidth=lde.default;var cde=mj(hb());Gi.wcwidth=cde.default});var gb=w(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.findWidthInConsole=aa.stripAnsi=void 0;var Ade=yj(),ude=/\x1b\[\d{1,3}(;\d{1,3})*m/g,dde=e=>e.replace(ude,"");aa.stripAnsi=dde;var fde=(e,t)=>{let r=0;return e=(0,aa.stripAnsi)(e),t&&Object.entries(t).forEach(([o,n])=>{let i=new RegExp(o,"g");r+=(e.match(i)||[]).length*n,e=e.replace(o,"")}),r+=(0,Ade.wcswidth)(e),r};aa.findWidthInConsole=fde});var yb=w(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.biggestWordInSentence=An.textWithPadding=An.splitTextIntoTextsOfMinLen=void 0;var mb=gb(),pde=(e,t,r)=>{let o=[];return e.split(/[\n\r]/).forEach(i=>{let s=i.split(" "),a=[],l=0;s.forEach(c=>{let A=(0,mb.findWidthInConsole)(c,r);l+A<=t?(l+=A+1,a.push(c)):(a.length>0&&o.push(a.join(" ")),a=[c],l=A+1)}),o.push(a.join(" "))}),o};An.splitTextIntoTextsOfMinLen=pde;var hde=(e,t,r,o)=>{let n=(0,mb.findWidthInConsole)(e,o),i=Math.floor((r-n)/2),s=r-i-n;if(r<n){let a=(0,An.splitTextIntoTextsOfMinLen)(e,r);return a.length===1?e:a.map(l=>(0,An.textWithPadding)(l,t,r,o)).join(`
`)}switch(t){case"left":return e.concat(" ".repeat(r-n));case"center":return" ".repeat(i).concat(e).concat(" ".repeat(s));case"right":default:return" ".repeat(r-n).concat(e)}};An.textWithPadding=hde;var gde=(e,t)=>e.split(" ").reduce((r,o)=>Math.max(r,(0,mb.findWidthInConsole)(o,t)),0);An.biggestWordInSentence=gde});var $u=w($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.getWidthLimitedColumnsArray=$e.createHeaderAsRow=$e.renderTableHorizontalBorders=$e.findLenOfColumn=$e.createRow=$e.createColumFromComputedColumn=$e.createColumFromOnlyName=$e.createTableHorizontalBorders=$e.convertRawRowOptionsToStandard=$e.cellText=void 0;var Eb=db(),Ej=gb(),Cb=yb(),Dg=Wu(),rc=(e,t)=>Math.max(e,t),mde=e=>e==null?"":`${e}`;$e.cellText=mde;var yde=e=>{if(e)return{color:e.color,separator:e.separator||Dg.DEFAULT_ROW_SEPARATOR}};$e.convertRawRowOptionsToStandard=yde;var Ede=({left:e,mid:t,right:r,other:o},n)=>{let i=e;return n.forEach(s=>{i+=o.repeat(s+2),i+=t}),i=i.slice(0,-t.length),i+=r,i};$e.createTableHorizontalBorders=Ede;var Cde=e=>({name:e,title:e});$e.createColumFromOnlyName=Cde;var Ide=e=>{var t;return Object.assign(Object.assign(Object.assign(Object.assign({name:e.name,title:(t=e.title)!==null&&t!==void 0?t:e.name},(0,Eb.objIfExists)("color",e.color)),(0,Eb.objIfExists)("maxLen",e.maxLen)),(0,Eb.objIfExists)("minLen",e.minLen)),{alignment:e.alignment||Dg.DEFAULT_ROW_ALIGNMENT})};$e.createColumFromComputedColumn=Ide;var Bde=(e,t,r)=>({color:e,separator:r,text:t});$e.createRow=Bde;var Qde=(e,t,r)=>{let o=e.name,n=e.title,i=rc(0,e?.minLen||0);return e.maxLen?(i=rc(i,rc(e.maxLen,(0,Cb.biggestWordInSentence)(n,r))),i=t.reduce((s,a)=>rc(s,(0,Cb.biggestWordInSentence)((0,$e.cellText)(a.text[o]),r)),i),i):(i=rc(i,(0,Ej.findWidthInConsole)(n,r)),t.forEach(s=>{i=rc(i,(0,Ej.findWidthInConsole)((0,$e.cellText)(s.text[o]),r))}),i)};$e.findLenOfColumn=Qde;var bde=(e,t)=>(0,$e.createTableHorizontalBorders)(e,t);$e.renderTableHorizontalBorders=bde;var wde=(e,t)=>{let r=Dg.DEFAULT_HEADER_FONT_COLOR,o=e(r,{},!1);return t.forEach(n=>{o.text[n.name]=n.title}),o};$e.createHeaderAsRow=wde;var Sde=(e,t,r)=>{let o={};return e.forEach(n=>{o[n.name]=(0,Cb.splitTextIntoTextsOfMinLen)((0,$e.cellText)(t.text[n.name]),n.length||Dg.DEFAULT_COLUMN_LEN,r)}),o};$e.getWidthLimitedColumnsArray=Sde});var Cj=w(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.preProcessRows=oc.preProcessColumns=void 0;var Tde=$u(),xde=e=>{e.computedColumns.length&&e.computedColumns.forEach(t=>{e.addColumn(t),e.rows.forEach(r=>{r.text[t.name]=t.function(r.text)})})},Rde=e=>{e.enabledColumns.length&&(e.columns=e.columns.filter(t=>e.enabledColumns.includes(t.name)))},Dde=e=>{e.disabledColumns.length&&(e.columns=e.columns.filter(t=>!e.disabledColumns.includes(t.name)))},Fde=e=>{e.columns.forEach(t=>{t.length=(0,Tde.findLenOfColumn)(t,e.rows,e.charLength)})},kde=e=>{xde(e),Dde(e),Rde(e),Fde(e)};oc.preProcessColumns=kde;var Nde=e=>{let t=e.rows.filter(r=>e.filterFunction(r.text)).sort((r,o)=>e.sortFunction(r.text,o.text));e.rows=t};oc.preProcessRows=Nde});var Ib=w(ao=>{"use strict";var Bj=ao&&ao.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ao,"__esModule",{value:!0});ao.printSimpleTable=ao.renderSimpleTable=ao.renderTable=void 0;var Qj=Bj(ub()),bj=yb(),To=Wu(),ji=$u(),vde=Bj(Bb()),Ij=Cj(),Pde=(e,t,r,o,n,i,s,a)=>{let l=new Qj.default(s);return l.addCharsWithColor("",e.vertical),t.forEach(c=>{let d=r<o[c.name].length?(0,ji.cellText)(o[c.name][r]):"";l.addCharsWithColor(To.DEFAULT_ROW_FONT_COLOR," "),l.addCharsWithColor(n&&To.DEFAULT_HEADER_FONT_COLOR||c.color||i.color,(0,bj.textWithPadding)(d,c.alignment||To.DEFAULT_ROW_ALIGNMENT,c.length||To.DEFAULT_COLUMN_LEN,a)),l.addCharsWithColor("",` ${e.vertical}`)}),l.renderConsole()},wj=(e,t,r,o,n,i)=>{let s=(0,ji.getWidthLimitedColumnsArray)(t,r,i),a=Object.values(s).reduce((c,A)=>Math.max(c,A.length),0),l=[];for(let c=0;c<a;c+=1){let A=Pde(e,t,c,s,n,r,o,i);l.push(A)}return l},Lde=(e,t)=>{let r=[];return r=r.concat(wj(e.tableStyle,e.columns,t,e.colorMap,void 0,e.charLength)),r},Ude=e=>{let t=[];if(e.title===void 0)return t;let r=()=>{let i=(s,a)=>s+a+2+1;return e.columns.map(s=>s.length||To.DEFAULT_COLUMN_LEN).reduce(i,1)},o=(0,bj.textWithPadding)(e.title,To.DEFAULT_HEADER_ALIGNMENT,r()),n=new Qj.default(e.colorMap);return n.addCharsWithColor(To.DEFAULT_HEADER_FONT_COLOR,o),t.push(n.renderConsole()),t},Ode=e=>{let t=[];t.push((0,ji.renderTableHorizontalBorders)(e.tableStyle.headerTop,e.columns.map(o=>o.length||To.DEFAULT_COLUMN_LEN)));let r=(0,ji.createHeaderAsRow)(ji.createRow,e.columns);return t=t.concat(wj(e.tableStyle,e.columns,r,e.colorMap,!0)),t.push((0,ji.renderTableHorizontalBorders)(e.tableStyle.headerBottom,e.columns.map(o=>o.length||To.DEFAULT_COLUMN_LEN))),t},Mde=e=>{let t=[];return t.push((0,ji.renderTableHorizontalBorders)(e.tableStyle.tableBottom,e.columns.map(r=>r.length||To.DEFAULT_COLUMN_LEN))),t},_de=(e,t)=>{let r=[],o=e.rows.length-1;return e.rows.indexOf(t)!==o&&t.separator&&r.push((0,ji.renderTableHorizontalBorders)(e.tableStyle.rowSeparator,e.columns.map(i=>i.length||To.DEFAULT_COLUMN_LEN))),r},Gde=e=>{(0,Ij.preProcessColumns)(e),(0,Ij.preProcessRows)(e);let t=[];return Ude(e).forEach(r=>t.push(r)),Ode(e).forEach(r=>t.push(r)),e.rows.forEach(r=>{Lde(e,r).forEach(o=>t.push(o)),_de(e,r).forEach(o=>t.push(o))}),Mde(e).forEach(r=>t.push(r)),t.join(`
`)};ao.renderTable=Gde;var jde=e=>{let t=new vde.default;return t.addRows(e),(0,ao.renderTable)(t)};ao.renderSimpleTable=jde;var Hde=e=>{console.log((0,ao.renderSimpleTable)(e))};ao.printSimpleTable=Hde});var Bb=w(bb=>{"use strict";Object.defineProperty(bb,"__esModule",{value:!0});var Vde=ub(),Fg=Wu(),kg=$u(),qde=db(),Yde=Ib(),Wde=()=>0,Jde=()=>!0,Qb=class{initSimple(t){this.columns=t.map(r=>({name:r,title:r,alignment:Fg.DEFAULT_ROW_ALIGNMENT}))}initDetailed(t){var r;this.title=t?.title||this.title,this.tableStyle=t?.style||this.tableStyle,this.sortFunction=t?.sort||this.sortFunction,this.filterFunction=t?.filter||this.filterFunction,this.enabledColumns=t?.enabledColumns||this.enabledColumns,this.disabledColumns=t?.disabledColumns||this.disabledColumns,this.computedColumns=t?.computedColumns||this.computedColumns,this.columns=((r=t?.columns)===null||r===void 0?void 0:r.map(qde.rawColumnToInternalColumn))||this.columns,this.rowSeparator=t?.rowSeparator||this.rowSeparator,this.charLength=t?.charLength||this.charLength,t?.shouldDisableColors?this.colorMap={}:t?.colorMap&&(this.colorMap=Object.assign(Object.assign({},this.colorMap),t.colorMap)),t.rows!==void 0&&this.addRows(t.rows)}constructor(t){this.rows=[],this.columns=[],this.title=void 0,this.tableStyle=Fg.DEFAULT_TABLE_STYLE,this.filterFunction=Jde,this.sortFunction=Wde,this.enabledColumns=[],this.disabledColumns=[],this.computedColumns=[],this.rowSeparator=Fg.DEFAULT_ROW_SEPARATOR,this.colorMap=Vde.DEFAULT_COLOR_MAP,this.charLength={},t instanceof Array?this.initSimple(t):typeof t=="object"&&this.initDetailed(t)}createColumnFromRow(t){let r=this.columns.map(o=>o.name);Object.keys(t).forEach(o=>{r.includes(o)||this.columns.push((0,kg.createColumFromOnlyName)(o))})}addColumn(t){typeof t=="string"?this.columns.push((0,kg.createColumFromOnlyName)(t)):this.columns.push((0,kg.createColumFromComputedColumn)(t))}addColumns(t){t.forEach(r=>{this.addColumn(r)})}addRow(t,r){this.createColumnFromRow(t),this.rows.push((0,kg.createRow)(r?.color||Fg.DEFAULT_ROW_FONT_COLOR,t,r?.separator!==void 0?r?.separator:this.rowSeparator))}addRows(t,r){t.forEach(o=>{this.addRow(o,r)})}renderTable(){return(0,Yde.renderTable)(this)}};bb.default=Qb});var Tj=w(Ku=>{"use strict";var zde=Ku&&Ku.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ku,"__esModule",{value:!0});var $de=zde(Bb()),Sj=$u(),wb=class{constructor(t){this.table=new $de.default(t)}addColumn(t){return this.table.addColumn(t),this}addColumns(t){return this.table.addColumns(t),this}addRow(t,r){return this.table.addRow(t,(0,Sj.convertRawRowOptionsToStandard)(r)),this}addRows(t,r){return this.table.addRows(t,(0,Sj.convertRawRowOptionsToStandard)(r)),this}printTable(){let t=this.table.renderTable();console.log(t)}render(){return this.table.renderTable()}};Ku.default=wb});var Rj=w(un=>{"use strict";var Kde=un&&un.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(un,"__esModule",{value:!0});un.renderTable=un.printTable=un.Table=void 0;var Zde=Kde(Tj());un.Table=Zde.default;var xj=Ib();Object.defineProperty(un,"printTable",{enumerable:!0,get:function(){return xj.printSimpleTable}});Object.defineProperty(un,"renderTable",{enumerable:!0,get:function(){return xj.renderSimpleTable}})});var TH=w(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.pathToRegexp=Vt.tokensToRegexp=Vt.regexpToFunction=Vt.match=Vt.tokensToFunction=Vt.compile=Vt.parse=void 0;function Epe(e){for(var t=[],r=0;r<e.length;){var o=e[r];if(o==="*"||o==="+"||o==="?"){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if(o==="\\"){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if(o==="{"){t.push({type:"OPEN",index:r,value:e[r++]});continue}if(o==="}"){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(o===":"){for(var n="",i=r+1;i<e.length;){var s=e.charCodeAt(i);if(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||s===95){n+=e[i++];continue}break}if(!n)throw new TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:n}),r=i;continue}if(o==="("){var a=1,l="",i=r+1;if(e[i]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(i));for(;i<e.length;){if(e[i]==="\\"){l+=e[i++]+e[i++];continue}if(e[i]===")"){if(a--,a===0){i++;break}}else if(e[i]==="("&&(a++,e[i+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(i));l+=e[i++]}if(a)throw new TypeError("Unbalanced pattern at ".concat(r));if(!l)throw new TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:l}),r=i;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}function Jb(e,t){t===void 0&&(t={});for(var r=Epe(e),o=t.prefixes,n=o===void 0?"./":o,i=t.delimiter,s=i===void 0?"/#?":i,a=[],l=0,c=0,A="",d=function(S){if(c<r.length&&r[c].type===S)return r[c++].value},f=function(S){var Q=d(S);if(Q!==void 0)return Q;var T=r[c],D=T.type,k=T.index;throw new TypeError("Unexpected ".concat(D," at ").concat(k,", expected ").concat(S))},u=function(){for(var S="",Q;Q=d("CHAR")||d("ESCAPED_CHAR");)S+=Q;return S},p=function(S){for(var Q=0,T=s;Q<T.length;Q++){var D=T[Q];if(S.indexOf(D)>-1)return!0}return!1},h=function(S){var Q=a[a.length-1],T=S||(Q&&typeof Q=="string"?Q:"");if(Q&&!T)throw new TypeError('Must have text between two parameters, missing text after "'.concat(Q.name,'"'));return!T||p(T)?"[^".concat(Vi(s),"]+?"):"(?:(?!".concat(Vi(T),")[^").concat(Vi(s),"])+?")};c<r.length;){var g=d("CHAR"),m=d("NAME"),y=d("PATTERN");if(m||y){var E=g||"";n.indexOf(E)===-1&&(A+=E,E=""),A&&(a.push(A),A=""),a.push({name:m||l++,prefix:E,suffix:"",pattern:y||h(E),modifier:d("MODIFIER")||""});continue}var I=g||d("ESCAPED_CHAR");if(I){A+=I;continue}A&&(a.push(A),A="");var C=d("OPEN");if(C){var E=u(),B=d("NAME")||"",R=d("PATTERN")||"",x=u();f("CLOSE"),a.push({name:B||(R?l++:""),pattern:B&&!R?h(E):R,prefix:E,suffix:x,modifier:d("MODIFIER")||""});continue}f("END")}return a}Vt.parse=Jb;function Cpe(e,t){return bH(Jb(e,t),t)}Vt.compile=Cpe;function bH(e,t){t===void 0&&(t={});var r=zb(t),o=t.encode,n=o===void 0?function(l){return l}:o,i=t.validate,s=i===void 0?!0:i,a=e.map(function(l){if(typeof l=="object")return new RegExp("^(?:".concat(l.pattern,")$"),r)});return function(l){for(var c="",A=0;A<e.length;A++){var d=e[A];if(typeof d=="string"){c+=d;continue}var f=l?l[d.name]:void 0,u=d.modifier==="?"||d.modifier==="*",p=d.modifier==="*"||d.modifier==="+";if(Array.isArray(f)){if(!p)throw new TypeError('Expected "'.concat(d.name,'" to not repeat, but got an array'));if(f.length===0){if(u)continue;throw new TypeError('Expected "'.concat(d.name,'" to not be empty'))}for(var h=0;h<f.length;h++){var g=n(f[h],d);if(s&&!a[A].test(g))throw new TypeError('Expected all "'.concat(d.name,'" to match "').concat(d.pattern,'", but got "').concat(g,'"'));c+=d.prefix+g+d.suffix}continue}if(typeof f=="string"||typeof f=="number"){var g=n(String(f),d);if(s&&!a[A].test(g))throw new TypeError('Expected "'.concat(d.name,'" to match "').concat(d.pattern,'", but got "').concat(g,'"'));c+=d.prefix+g+d.suffix;continue}if(!u){var m=p?"an array":"a string";throw new TypeError('Expected "'.concat(d.name,'" to be ').concat(m))}}return c}}Vt.tokensToFunction=bH;function Ipe(e,t){var r=[],o=$b(e,r,t);return wH(o,r,t)}Vt.match=Ipe;function wH(e,t,r){r===void 0&&(r={});var o=r.decode,n=o===void 0?function(i){return i}:o;return function(i){var s=e.exec(i);if(!s)return!1;for(var a=s[0],l=s.index,c=Object.create(null),A=function(f){if(s[f]===void 0)return"continue";var u=t[f-1];u.modifier==="*"||u.modifier==="+"?c[u.name]=s[f].split(u.prefix+u.suffix).map(function(p){return n(p,u)}):c[u.name]=n(s[f],u)},d=1;d<s.length;d++)A(d);return{path:a,index:l,params:c}}}Vt.regexpToFunction=wH;function Vi(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function zb(e){return e&&e.sensitive?"":"i"}function Bpe(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,o=0,n=r.exec(e.source);n;)t.push({name:n[1]||o++,prefix:"",suffix:"",modifier:"",pattern:""}),n=r.exec(e.source);return e}function Qpe(e,t,r){var o=e.map(function(n){return $b(n,t,r).source});return new RegExp("(?:".concat(o.join("|"),")"),zb(r))}function bpe(e,t,r){return SH(Jb(e,r),t,r)}function SH(e,t,r){r===void 0&&(r={});for(var o=r.strict,n=o===void 0?!1:o,i=r.start,s=i===void 0?!0:i,a=r.end,l=a===void 0?!0:a,c=r.encode,A=c===void 0?function(Q){return Q}:c,d=r.delimiter,f=d===void 0?"/#?":d,u=r.endsWith,p=u===void 0?"":u,h="[".concat(Vi(p),"]|$"),g="[".concat(Vi(f),"]"),m=s?"^":"",y=0,E=e;y<E.length;y++){var I=E[y];if(typeof I=="string")m+=Vi(A(I));else{var C=Vi(A(I.prefix)),B=Vi(A(I.suffix));if(I.pattern)if(t&&t.push(I),C||B)if(I.modifier==="+"||I.modifier==="*"){var R=I.modifier==="*"?"?":"";m+="(?:".concat(C,"((?:").concat(I.pattern,")(?:").concat(B).concat(C,"(?:").concat(I.pattern,"))*)").concat(B,")").concat(R)}else m+="(?:".concat(C,"(").concat(I.pattern,")").concat(B,")").concat(I.modifier);else{if(I.modifier==="+"||I.modifier==="*")throw new TypeError('Can not repeat "'.concat(I.name,'" without a prefix and suffix'));m+="(".concat(I.pattern,")").concat(I.modifier)}else m+="(?:".concat(C).concat(B,")").concat(I.modifier)}}if(l)n||(m+="".concat(g,"?")),m+=r.endsWith?"(?=".concat(h,")"):"$";else{var x=e[e.length-1],S=typeof x=="string"?g.indexOf(x[x.length-1])>-1:x===void 0;n||(m+="(?:".concat(g,"(?=").concat(h,"))?")),S||(m+="(?=".concat(g,"|").concat(h,")"))}return new RegExp(m,zb(r))}Vt.tokensToRegexp=SH;function $b(e,t,r){return e instanceof RegExp?Bpe(e,t):Array.isArray(e)?Qpe(e,t,r):bpe(e,t,r)}Vt.pathToRegexp=$b});import{spawn as Tpe}from"child_process";import xpe from"crypto";import{fileURLToPath as Rpe}from"node:url";import NH from"path";var pq=We(ow(),1),hq=We(cm(),1),gq=We(dm(),1),SS=We(Em(),1),mq=We(wS(),1);var TS=SS.default;var O={"1xx":"Informational","1xx_NAME":"INFORMATIONAL","1xx_MESSAGE":"Indicates an interim response for communicating connection status or request progress prior to completing the requested action and sending a final response.",INFORMATIONAL:"1xx","2xx":"Successful","2xx_NAME":"SUCCESSFUL","2xx_MESSAGE":"Indicates that the client's request was successfully received, understood, and accepted.",SUCCESSFUL:"2xx","3xx":"Redirection","3xx_NAME":"REDIRECTION","3xx_MESSAGE":"Indicates that further action needs to be taken by the user agent in order to fulfill the request.",REDIRECTION:"3xx","4xx":"Client Error","4xx_NAME":"CLIENT_ERROR","4xx_MESSAGE":"Indicates that the client seems to have erred.",CLIENT_ERROR:"4xx","5xx":"Server Error","5xx_NAME":"SERVER_ERROR","5xx_MESSAGE":"Indicates that the server is aware that it has erred or is incapable of performing the requested method.",SERVER_ERROR:"5xx"},N={classes:O,100:"Continue","100_NAME":"CONTINUE","100_MESSAGE":"The server has received the request headers and the client should proceed to send the request body.","100_CLASS":O.INFORMATIONAL,CONTINUE:100,101:"Switching Protocols","101_NAME":"SWITCHING_PROTOCOLS","101_MESSAGE":"The requester has asked the server to switch protocols and the server has agreed to do so.","101_CLASS":O.INFORMATIONAL,SWITCHING_PROTOCOLS:101,102:"Processing","102_NAME":"PROCESSING","102_MESSAGE":"A WebDAV request may contain many sub-requests involving file operations, requiring a long time to complete the request. This code indicates that the server has received and is processing the request, but no response is available yet.[7] This prevents the client from timing out and assuming the request was lost.","102_CLASS":O.INFORMATIONAL,PROCESSING:102,103:"Early Hints","103_NAME":"EARLY_HINTS","103_MESSAGE":"Used to return some response headers before final HTTP message.","103_CLASS":O.INFORMATIONAL,EARLY_HINTS:103,200:"OK","200_NAME":"OK","200_MESSAGE":"Standard response for successful HTTP requests.","200_CLASS":O.SUCCESSFUL,OK:200,201:"Created","201_NAME":"CREATED","201_MESSAGE":"The request has been fulfilled, resulting in the creation of a new resource.","201_CLASS":O.SUCCESSFUL,CREATED:201,202:"Accepted","202_NAME":"ACCEPTED","202_MESSAGE":"The request has been accepted for processing, but the processing has not been completed.","202_CLASS":O.SUCCESSFUL,ACCEPTED:202,203:"Non-Authoritative Information","203_NAME":"NON_AUTHORITATIVE_INFORMATION","203_MESSAGE":"The server is a transforming proxy (e.g. a Web accelerator) that received a 200 OK from its origin, but is returning a modified version of the origin's response.","203_CLASS":O.SUCCESSFUL,NON_AUTHORITATIVE_INFORMATION:203,204:"No Content","204_NAME":"NO_CONTENT","204_MESSAGE":"The server successfully processed the request and is not returning any content.","204_CLASS":O.SUCCESSFUL,NO_CONTENT:204,205:"Reset Content","205_NAME":"RESET_CONTENT","205_MESSAGE":"The server successfully processed the request, but is not returning any content. Unlike a 204 response, this response requires that the requester reset the document view.","205_CLASS":O.SUCCESSFUL,RESET_CONTENT:205,206:"Partial Content","206_NAME":"PARTIAL_CONTENT","206_MESSAGE":"The server is delivering only part of the resource (byte serving) due to a range header sent by the client.","206_CLASS":O.SUCCESSFUL,PARTIAL_CONTENT:206,207:"Multi Status","207_NAME":"MULTI_STATUS","207_MESSAGE":"The message body that follows is by default an XML message and can contain a number of separate response codes, depending on how many sub-requests were made.","207_CLASS":O.SUCCESSFUL,MULTI_STATUS:207,208:"Already Reported","208_NAME":"ALREADY_REPORTED","208_MESSAGE":"The members of a DAV binding have already been enumerated in a preceding part of the (multistatus) response, and are not being included again.","208_CLASS":O.SUCCESSFUL,ALREADY_REPORTED:208,226:"IM Used","226_NAME":"IM_USED","226_MESSAGE":"The server has fulfilled a request for the resource, and the response is a representation of the result of one or more instance-manipulations applied to the current instance.","226_CLASS":O.SUCCESSFUL,IM_USED:226,300:"Multiple Choices","300_NAME":"MULTIPLE_CHOICES","300_MESSAGE":"Indicates multiple options for the resource from which the client may choose.","300_CLASS":O.REDIRECTION,MULTIPLE_CHOICES:300,301:"Moved Permanently","301_NAME":"MOVED_PERMANENTLY","301_MESSAGE":"This and all future requests should be directed to the given URI.","301_CLASS":O.REDIRECTION,MOVED_PERMANENTLY:301,302:"Found","302_NAME":"FOUND","302_MESSAGE":'This is an example of industry practice contradicting the standard. The HTTP/1.0 specification (RFC 1945) required the client to perform a temporary redirect (the original describing phrase was "Moved Temporarily"), but popular browsers implemented 302 with the functionality of a 303 See Other. Therefore, HTTP/1.1 added status codes 303 and 307 to distinguish between the two behaviours.',"302_CLASS":O.REDIRECTION,FOUND:302,303:"See Other","303_NAME":"SEE_OTHER","303_MESSAGE":"The response to the request can be found under another URI using the GET method.","303_CLASS":O.REDIRECTION,SEE_OTHER:303,304:"Not Modified","304_NAME":"NOT_MODIFIED","304_MESSAGE":"Indicates that the resource has not been modified since the version specified by the request headers If-Modified-Since or If-None-Match.","304_CLASS":O.REDIRECTION,NOT_MODIFIED:304,305:"Use Proxy","305_NAME":"USE_PROXY","305_MESSAGE":"The requested resource is available only through a proxy, the address for which is provided in the response.","305_CLASS":O.REDIRECTION,USE_PROXY:305,306:"Switch Proxy","306_NAME":"SWITCH_PROXY","306_MESSAGE":'No longer used. Originally meant "Subsequent requests should use the specified proxy.',"306_CLASS":O.REDIRECTION,SWITCH_PROXY:306,307:"Temporary Redirect","307_NAME":"TEMPORARY_REDIRECT","307_MESSAGE":"In this case, the request should be repeated with another URI; however, future requests should still use the original URI.","307_CLASS":O.REDIRECTION,TEMPORARY_REDIRECT:307,308:"Permanent Redirect","308_NAME":"PERMANENT_REDIRECT","308_MESSAGE":"The request and all future requests should be repeated using another URI.","308_CLASS":O.REDIRECTION,PERMANENT_REDIRECT:308,400:"Bad Request","400_NAME":"BAD_REQUEST","400_MESSAGE":"The server cannot or will not process the request due to an apparent client error.","400_CLASS":O.CLIENT_ERROR,BAD_REQUEST:400,401:"Unauthorized","401_NAME":"UNAUTHORIZED","401_MESSAGE":"Similar to 403 Forbidden, but specifically for use when authentication is required and has failed or has not yet been provided.","401_CLASS":O.CLIENT_ERROR,UNAUTHORIZED:401,402:"Payment Required","402_NAME":"PAYMENT_REQUIRED","402_MESSAGE":"Reserved for future use. The original intention was that this code might be used as part of some form of digital cash or micropayment scheme, as proposed for example by GNU Taler, but that has not yet happened, and this code is not usually used.","402_CLASS":O.CLIENT_ERROR,PAYMENT_REQUIRED:402,403:"Forbidden","403_NAME":"FORBIDDEN","403_MESSAGE":"The request was valid, but the server is refusing action.","403_CLASS":O.CLIENT_ERROR,FORBIDDEN:403,404:"Not Found","404_NAME":"NOT_FOUND","404_MESSAGE":"The requested resource could not be found but may be available in the future. Subsequent requests by the client are permissible.","404_CLASS":O.CLIENT_ERROR,NOT_FOUND:404,405:"Method Not Allowed","405_NAME":"METHOD_NOT_ALLOWED","405_MESSAGE":"A request method is not supported for the requested resource.","405_CLASS":O.CLIENT_ERROR,METHOD_NOT_ALLOWED:405,406:"Not Acceptable","406_NAME":"NOT_ACCEPTABLE","406_MESSAGE":"The requested resource is capable of generating only content not acceptable according to the Accept headers sent in the request.","406_CLASS":O.CLIENT_ERROR,NOT_ACCEPTABLE:406,407:"Proxy Authentication Required","407_NAME":"PROXY_AUTHENTICATION_REQUIRED","407_MESSAGE":"The client must first authenticate itself with the proxy.","407_CLASS":O.CLIENT_ERROR,PROXY_AUTHENTICATION_REQUIRED:407,408:"Request Time-out","408_NAME":"REQUEST_TIMEOUT","408_MESSAGE":"The server timed out waiting for the request.","408_CLASS":O.CLIENT_ERROR,REQUEST_TIMEOUT:408,409:"Conflict","409_NAME":"CONFLICT","409_MESSAGE":"Indicates that the request could not be processed because of conflict in the request, such as an edit conflict between multiple simultaneous updates.","409_CLASS":O.CLIENT_ERROR,CONFLICT:409,410:"Gone","410_NAME":"GONE","410_MESSAGE":"Indicates that the resource requested is no longer available and will not be available again.","410_CLASS":O.CLIENT_ERROR,GONE:410,411:"Length Required","411_NAME":"LENGTH_REQUIRED","411_MESSAGE":"The request did not specify the length of its content, which is required by the requested resource.","411_CLASS":O.CLIENT_ERROR,LENGTH_REQUIRED:411,412:"Precondition Failed","412_NAME":"PRECONDITION_FAILED","412_MESSAGE":"The server does not meet one of the preconditions that the requester put on the request.","412_CLASS":O.CLIENT_ERROR,PRECONDITION_FAILED:412,413:"Request Entity Too Large","413_NAME":"REQUEST_ENTITY_TOO_LARGE","413_MESSAGE":'The request is larger than the server is willing or able to process. Previously called "Request Entity Too Large".',"413_CLASS":O.CLIENT_ERROR,REQUEST_ENTITY_TOO_LARGE:413,414:"Request-URI Too Large","414_NAME":"REQUEST_URI_TOO_LONG","414_MESSAGE":"The URI provided was too long for the server to process.","414_CLASS":O.CLIENT_ERROR,REQUEST_URI_TOO_LONG:414,415:"Unsupported Media Type","415_NAME":"UNSUPPORTED_MEDIA_TYPE","415_MESSAGE":"The request entity has a media type which the server or resource does not support.","415_CLASS":O.CLIENT_ERROR,UNSUPPORTED_MEDIA_TYPE:415,416:"Requested Range not Satisfiable","416_NAME":"REQUESTED_RANGE_NOT_SATISFIABLE","416_MESSAGE":"The client has asked for a portion of the file (byte serving), but the server cannot supply that portion.","416_CLASS":O.CLIENT_ERROR,REQUESTED_RANGE_NOT_SATISFIABLE:416,417:"Expectation Failed","417_NAME":"EXPECTATION_FAILED","417_MESSAGE":"The server cannot meet the requirements of the Expect request-header field.","417_CLASS":O.CLIENT_ERROR,EXPECTATION_FAILED:417,418:"I'm a teapot","418_NAME":"IM_A_TEAPOT","418_MESSAGE":`Any attempt to brew coffee with a teapot should result in the error code "418 I'm a teapot". The resulting entity body MAY be short and stout.`,"418_CLASS":O.CLIENT_ERROR,IM_A_TEAPOT:418,421:"Misdirected Request","421_NAME":"MISDIRECTED_REQUEST","421_MESSAGE":"The request was directed at a server that is not able to produce a response.","421_CLASS":O.CLIENT_ERROR,MISDIRECTED_REQUEST:421,422:"Unprocessable Entity","422_NAME":"UNPROCESSABLE_ENTITY","422_MESSAGE":"The request was well-formed but was unable to be followed due to semantic errors.","422_CLASS":O.CLIENT_ERROR,UNPROCESSABLE_ENTITY:422,423:"Locked","423_NAME":"LOCKED","423_MESSAGE":"The resource that is being accessed is locked.","423_CLASS":O.CLIENT_ERROR,LOCKED:423,424:"Failed Dependency","424_NAME":"FAILED_DEPENDENCY","424_MESSAGE":"The request failed because it depended on another request and that request failed.","424_CLASS":O.CLIENT_ERROR,FAILED_DEPENDENCY:424,425:"Too Early","425_NAME":"TOO_EARLY","425_MESSAGE":"The server is unwilling to risk processing a request that might be replayed.","425_CLASS":O.CLIENT_ERROR,TOO_EARLY:425,426:"Upgrade Required","426_NAME":"UPGRADE_REQUIRED","426_MESSAGE":"The client should switch to a different protocol such as TLS/1.0, given in the Upgrade header field.","426_CLASS":O.CLIENT_ERROR,UPGRADE_REQUIRED:426,428:"Precondition Required","428_NAME":"PRECONDITION_REQUIRED","428_MESSAGE":"The origin server requires the request to be conditional.","428_CLASS":O.CLIENT_ERROR,PRECONDITION_REQUIRED:428,429:"Too Many Requests","429_NAME":"TOO_MANY_REQUESTS","429_MESSAGE":"The user has sent too many requests in a given amount of time.","429_CLASS":O.CLIENT_ERROR,TOO_MANY_REQUESTS:429,431:"Request Header Fields Too Large","431_NAME":"REQUEST_HEADER_FIELDS_TOO_LARGE","431_MESSAGE":"The server is unwilling to process the request because either an individual header field, or all the header fields collectively, are too large.","431_CLASS":O.CLIENT_ERROR,REQUEST_HEADER_FIELDS_TOO_LARGE:431,451:"Unavailable For Legal Reasons","451_NAME":"UNAVAILABLE_FOR_LEGAL_REASONS","451_MESSAGE":"A server operator has received a legal demand to deny access to a resource or to a set of resources that includes the requested resource.","451_CLASS":O.CLIENT_ERROR,UNAVAILABLE_FOR_LEGAL_REASONS:451,500:"Internal Server Error","500_NAME":"INTERNAL_SERVER_ERROR","500_MESSAGE":"A generic error message, given when an unexpected condition was encountered and no more specific message is suitable.","500_CLASS":O.SERVER_ERROR,INTERNAL_SERVER_ERROR:500,501:"Not Implemented","501_NAME":"NOT_IMPLEMENTED","501_MESSAGE":"The server either does not recognize the request method, or it lacks the ability to fulfil the request. Usually this implies future availability.","501_CLASS":O.SERVER_ERROR,NOT_IMPLEMENTED:501,502:"Bad Gateway","502_NAME":"BAD_GATEWAY","502_MESSAGE":"The server was acting as a gateway or proxy and received an invalid response from the upstream server.","502_CLASS":O.SERVER_ERROR,BAD_GATEWAY:502,503:"Service Unavailable","503_NAME":"SERVICE_UNAVAILABLE","503_MESSAGE":"The server is currently unavailable (because it is overloaded or down for maintenance). Generally, this is a temporary state.","503_CLASS":O.SERVER_ERROR,SERVICE_UNAVAILABLE:503,504:"Gateway Time-out","504_NAME":"GATEWAY_TIMEOUT","504_MESSAGE":"The server was acting as a gateway or proxy and did not receive a timely response from the upstream server.","504_CLASS":O.SERVER_ERROR,GATEWAY_TIMEOUT:504,505:"HTTP Version not Supported","505_NAME":"HTTP_VERSION_NOT_SUPPORTED","505_MESSAGE":"The server does not support the HTTP protocol version used in the request.","505_CLASS":O.SERVER_ERROR,HTTP_VERSION_NOT_SUPPORTED:505,506:"Variant Also Negotiates","506_NAME":"VARIANT_ALSO_NEGOTIATES","506_MESSAGE":"Transparent content negotiation for the request results in a circular reference.","506_CLASS":O.SERVER_ERROR,VARIANT_ALSO_NEGOTIATES:506,507:"Insufficient Storage","507_NAME":"INSUFFICIENT_STORAGE","507_MESSAGE":"The server is unable to store the representation needed to complete the request.","507_CLASS":O.SERVER_ERROR,INSUFFICIENT_STORAGE:507,508:"Loop Detected","508_NAME":"LOOP_DETECTED","508_MESSAGE":"The server detected an infinite loop while processing the request.","508_CLASS":O.SERVER_ERROR,LOOP_DETECTED:508,510:"Not Extended","510_NAME":"NOT_EXTENDED","510_MESSAGE":"Further extensions to the request are required for the server to fulfil it.","510_CLASS":O.SERVER_ERROR,NOT_EXTENDED:510,511:"Network Authentication Required","511_NAME":"NETWORK_AUTHENTICATION_REQUIRED","511_MESSAGE":"The client needs to authenticate to gain network access. Intended for use by intercepting proxies used to control access to the network.","511_CLASS":O.SERVER_ERROR,NETWORK_AUTHENTICATION_REQUIRED:511,extra:{unofficial:{103:"Checkpoint","103_NAME":"CHECKPOINT","103_MESSAGE":"Used in the resumable requests proposal to resume aborted PUT or POST requests.","103_CLASS":O.INFORMATIONAL,CHECKPOINT:103,419:"Page Expired","419_NAME":"PAGE_EXPIRED","419_MESSAGE":"Used by the Laravel Framework when a CSRF Token is missing or expired.","419_CLASS":O.CLIENT_ERROR,PAGE_EXPIRED:419,218:"This is fine","218_NAME":"THIS_IS_FINE","218_MESSAGE":"Used as a catch-all error condition for allowing response bodies to flow through Apache when ProxyErrorOverride is enabled. When ProxyErrorOverride is enabled in Apache, response bodies that contain a status code of 4xx or 5xx are automatically discarded by Apache in favor of a generic response or a custom response specified by the ErrorDocument directive.","218_CLASS":O.SUCCESSFUL,THIS_IS_FINE:218,420:"Enhance Your Calm","420_NAME":"ENHANCE_YOUR_CALM","420_MESSAGE":"Returned by version 1 of the Twitter Search and Trends API when the client is being rate limited; versions 1.1 and later use the 429 Too Many Requests response code instead.","420_CLASS":O.CLIENT_ERROR,ENHANCE_YOUR_CALM:420,450:"Blocked by Windows Parental Controls","450_NAME":"BLOCKED_BY_WINDOWS_PARENTAL_CONTROLS","450_MESSAGE":"The Microsoft extension code indicated when Windows Parental Controls are turned on and are blocking access to the requested webpage.","450_CLASS":O.CLIENT_ERROR,BLOCKED_BY_WINDOWS_PARENTAL_CONTROLS:450,498:"Invalid Token","498_NAME":"INVALID_TOKEN","498_MESSAGE":"Returned by ArcGIS for Server. Code 498 indicates an expired or otherwise invalid token.","498_CLASS":O.CLIENT_ERROR,INVALID_TOKEN:498,499:"Token Required","499_NAME":"TOKEN_REQUIRED","499_MESSAGE":"Returned by ArcGIS for Server. Code 499 indicates that a token is required but was not submitted.","499_CLASS":O.CLIENT_ERROR,TOKEN_REQUIRED:499,509:"Bandwidth Limit Exceeded","509_NAME":"BANDWIDTH_LIMIT_EXCEEDED","509_MESSAGE":"The server has exceeded the bandwidth specified by the server administrator.","509_CLASS":O.SERVER_ERROR,BANDWIDTH_LIMIT_EXCEEDED:509,530:"Site is frozen","530_NAME":"SITE_IS_FROZEN","530_MESSAGE":"Used by the Pantheon web platform to indicate a site that has been frozen due to inactivity.","530_CLASS":O.SERVER_ERROR,SITE_IS_FROZEN:530,598:"Network read timeout error","598_NAME":"NETWORK_READ_TIMEOUT_ERROR","598_MESSAGE":"Used by some HTTP proxies to signal a network read timeout behind the proxy to a client in front of the proxy.","598_CLASS":O.SERVER_ERROR,NETWORK_READ_TIMEOUT_ERROR:598},iis:{440:"Login Time-out","440_NAME":"LOGIN_TIME_OUT","440_MESSAGE":"The client's session has expired and must log in again.","440_CLASS":O.CLIENT_ERROR,LOGIN_TIME_OUT:440,449:"Retry With","449_NAME":"RETRY_WITH","449_MESSAGE":"The server cannot honour the request because the user has not provided the required information.","449_CLASS":O.CLIENT_ERROR,RETRY_WITH:449,451:"Redirect","451_NAME":"REDIRECT","451_MESSAGE":"Used in Exchange ActiveSync when either a more efficient server is available or the server cannot access the users' mailbox.","451_CLASS":O.CLIENT_ERROR,REDIRECT:451},nginx:{444:"No Response","444_NAME":"NO_RESPONSE","444_MESSAGE":"Used internally to instruct the server to return no information to the client and close the connection immediately.","444_CLASS":O.CLIENT_ERROR,NO_RESPONSE:444,494:"Request header too large","494_NAME":"REQUEST_HEADER_TOO_LARGE","494_MESSAGE":"Client sent too large request or too long header line.","494_CLASS":O.CLIENT_ERROR,REQUEST_HEADER_TOO_LARGE:494,495:"SSL Certificate Error","495_NAME":"SSL_CERTIFICATE_ERROR","495_MESSAGE":"An expansion of the 400 Bad Request response code, used when the client has provided an invalid client certificate.","495_CLASS":O.CLIENT_ERROR,SSL_CERTIFICATE_ERROR:495,496:"SSL Certificate Required","496_NAME":"SSL_CERTIFICATE_REQUIRED","496_MESSAGE":"An expansion of the 400 Bad Request response code, used when a client certificate is required but not provided.","496_CLASS":O.CLIENT_ERROR,SSL_CERTIFICATE_REQUIRED:496,497:"HTTP Request Sent to HTTPS Port","497_NAME":"HTTP_REQUEST_SENT_TO_HTTPS_PORT","497_MESSAGE":"An expansion of the 400 Bad Request response code, used when the client has made a HTTP request to a port listening for HTTPS requests.","497_CLASS":O.CLIENT_ERROR,HTTP_REQUEST_SENT_TO_HTTPS_PORT:497,499:"Client Closed Request","499_NAME":"CLIENT_CLOSED_REQUEST","499_MESSAGE":"Used when the client has closed the request before the server could send a response.","499_CLASS":O.CLIENT_ERROR,CLIENT_CLOSED_REQUEST:499},cloudflare:{520:"Unknown Error","520_NAME":"UNKNOWN_ERROR","520_MESSAGE":'The 520 error is used as a "catch-all response for when the origin server returns something unexpected", listing connection resets, large headers, and empty or invalid responses as common triggers.',"520_CLASS":O.SERVER_ERROR,UNKNOWN_ERROR:520,521:"Web Server Is Down","521_NAME":"WEB_SERVER_IS_DOWN","521_MESSAGE":"The origin server has refused the connection from Cloudflare.","521_CLASS":O.SERVER_ERROR,WEB_SERVER_IS_DOWN:521,522:"Connection Timed Out","522_NAME":"CONNECTION_TIMED_OUT","522_MESSAGE":"Cloudflare could not negotiate a TCP handshake with the origin server.","522_CLASS":O.SERVER_ERROR,CONNECTION_TIMED_OUT:522,523:"Origin Is Unreachable","523_NAME":"ORIGIN_IS_UNREACHABLE","523_MESSAGE":"Cloudflare could not reach the origin server.","523_CLASS":O.SERVER_ERROR,ORIGIN_IS_UNREACHABLE:523,524:"A Timeout Occurred","524_NAME":"A_TIMEOUT_OCCURRED","524_MESSAGE":"Cloudflare was able to complete a TCP connection to the origin server, but did not receive a timely HTTP response.","524_CLASS":O.SERVER_ERROR,A_TIMEOUT_OCCURRED:524,525:"SSL Handshake Failed","525_NAME":"SSL_HANDSHAKE_FAILED","525_MESSAGE":"Cloudflare could not negotiate a SSL/TLS handshake with the origin server.","525_CLASS":O.SERVER_ERROR,SSL_HANDSHAKE_FAILED:525,526:"Invalid SSL Certificate","526_NAME":"INVALID_SSL_CERTIFICATE","526_MESSAGE":"Cloudflare could not validate the SSL/TLS certificate that the origin server presented.","526_CLASS":O.SERVER_ERROR,INVALID_SSL_CERTIFICATE:526,527:"Railgun Error","527_NAME":"RAILGUN_ERROR","527_MESSAGE":"Error 527 indicates that the request timed out or failed after the WAN connection had been established.","527_CLASS":O.SERVER_ERROR,RAILGUN_ERROR:527}}},ha=N;var gc="APIError",Im=class extends Error{data;isOperational;isPublic;status;constructor(t,r,o,n){super(t,{cause:o}),gc=this.constructor.name,this.name=this.constructor.name,this.message=t,this.status=r,this.data=o,this.isPublic=n,this.isOperational=!0,Error.captureStackTrace(this,this.constructor)}},F=class extends Im{constructor(t,r=N.INTERNAL_SERVER_ERROR,o=null,n=!1){super(t,r,o,n)}};import{en as yq}from"@payloadcms/translations/languages/en";var Ki=class extends F{constructor(t,r){super(t?`${t(r?"error:usernameOrPasswordIncorrect":"error:emailOrPasswordIncorrect")}`:yq.translations.error.emailOrPasswordIncorrect,N.UNAUTHORIZED)}};var ga=class extends F{constructor(t,r){super(`Collection ${t} already in use: "${r}"`)}};var Zi=class extends F{constructor(t){super(`A field with the name '${t}' was found multiple times on the same level. Field names must be unique.`)}};var hd=class extends F{constructor(t){super(`Global label "${t.label}" is already in use`)}};import{en as Eq}from"@payloadcms/translations/languages/en";var Xi=class extends F{constructor(t){super(t?t("error:deletingFile"):Eq.translations.error.deletingFile,N.INTERNAL_SERVER_ERROR)}};var ma=class extends F{constructor(t,r){let o=t?t("error:problemUploadingFile"):"There was a problem while retrieving the file.";r&&(o+=` ${r}`),super(o,N.INTERNAL_SERVER_ERROR)}};import{en as Cq}from"@payloadcms/translations/languages/en";var Zn=class extends F{constructor(t){super(t?t("error:problemUploadingFile"):Cq.translations.error.problemUploadingFile,N.BAD_REQUEST)}};import{en as Iq}from"@payloadcms/translations/languages/en";var ae=class extends F{constructor(t){super(t?t("error:notAllowedToPerformAction"):Iq.translations.error.notAllowedToPerformAction,N.FORBIDDEN)}};var qt=class extends F{constructor(t){super(t,N.INTERNAL_SERVER_ERROR)}};var ya=class extends F{constructor(t,r){super(`Field ${t.label} has invalid name '${r}'. Field names can not include periods (.) and must be alphanumeric.`)}};var Ea=class extends F{constructor(t,r){super(`Field ${t.label} has invalid relationship '${r}'.`)}};var Ca=class extends F{constructor(t){super(t,N.LOCKED)}};import{en as Bq}from"@payloadcms/translations/languages/en";var Ia=class extends F{constructor(t){super(t?t("error:userLocked"):Bq.translations.error.userLocked,N.UNAUTHORIZED)}};var gd=class extends F{constructor(){super("payload.config.collection object is missing label")}};function xS(e){return e!==null&&typeof e=="object"&&"relationTo"in e&&"value"in e}function es(e){return e.type==="group"||e.type==="array"||e.type==="row"||e.type==="collapsible"}function RS(e){return e.type==="select"||e.type==="relationship"||e.type==="upload"}function DS(e){return(e.type==="upload"||e.type==="relationship"||e.type==="join")&&typeof e.maxDepth=="number"}function Bm(e){return e.type==="ui"}function J(e){return"name"in e&&!Bm(e)}function yt(e){return"name"in e}function FS(e){return"localized"in e&&e.localized}function ft({field:e,parentIsLocalized:t}){return"localized"in e&&e.localized&&(!t||process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized==="true")}var Et=class extends F{constructor(t){super(`RichText field${J(t)?` "${t.name}"`:""} is missing the editor prop. For sub-richText fields, the editor props is required, as it would otherwise create infinite recursion.`)}};var md=class extends F{constructor(t){super(`Field ${t.label} is missing options.`)}};var Ba=class extends F{constructor(t){super(`Field${J(t)?` "${t.name}"`:""} is either missing a field type or it does not match an available field type`)}};import{en as Qq}from"@payloadcms/translations/languages/en";var Qa=class extends F{constructor(t){super(t?t("error:noFilesUploaded"):Qq.translations.error.noFilesUploaded,N.BAD_REQUEST)}};import{en as bq}from"@payloadcms/translations/languages/en";var Ke=class extends F{constructor(t){super(t?t("general:notFound"):bq.translations.general.notFound,N.NOT_FOUND)}};var Xn=class extends F{constructor(t){let r=`The following path${t.length===1?"":"s"} cannot be queried:`;super(`${r} ${t.map(o=>o.path).join(", ")}`,N.BAD_REQUEST,t)}};var ts=class extends F{constructor(t,r){super(`Field ${t.label} has reserved name '${r}'.`)}};import{en as wq}from"@payloadcms/translations/languages/en";var ba=class extends F{constructor({t}){super(t?t("error:unverifiedEmail"):wq.translations.error.unverifiedEmail,N.FORBIDDEN)}};import{en as kS}from"@payloadcms/translations/languages/en";var wa="ValidationError",xt=class extends F{constructor(t,r){let o=r?r("error:followingFieldsInvalid",{count:t.errors.length}):t.errors.length===1?kS.translations.error.followingFieldsInvalid_one:kS.translations.error.followingFieldsInvalid_other,n=t.req;delete t.req,super(`${o} ${t.errors.map(i=>i.label?typeof i.label=="function"?!n||!n.i18n||!n.t?i.path:i.label({i18n:n.i18n,t:n.t}):typeof i.label=="object"?n?.i18n?.language?i.label[n.i18n.language]:i.label[Object.keys(i.label)[0]]:i.label:i.path).join(", ")}`,N.BAD_REQUEST,t),wa=this.constructor.name}};var HS=We(PS(),1);var Tm=We(Sa(),1),jS=Tm.default.default||Tm.default,Ta=(e,t)=>{if(t==="text"&&e){if(["object","string"].includes(typeof e)){let r=jS.isValid(e);return typeof e=="string"||r}return!1}if(typeof e=="number"&&!Number.isNaN(e))return!0;if(t==="ObjectID")return jS.isValid(String(e))};var Oq=e=>async t=>{let{payload:r}=e,o=t.map(()=>null),n={};for(let i of t){let[s,a,l,c,A,d,f,u,p,h,g,m]=JSON.parse(i),E=JSON.stringify([s,a,c,A,d,f,u,p,h,g,m]),I=r.collections?.[a]?.customIDType||r.db.defaultIDType,C=I==="number"?parseFloat(l):l;Ta(C,I)&&(n[E]=[...n[E]||[],C])}for(let[i,s]of Object.entries(n)){let[a,l,c,A,d,f,u,p,h,g,m]=JSON.parse(i);e.transactionID=a;let y=await r.find({collection:l,currentDepth:A,depth:c,disableErrors:!0,draft:h,fallbackLocale:f,locale:d,overrideAccess:!!u,pagination:!1,populate:m,req:e,select:g,showHiddenFields:!!p,where:{id:{in:s}}});for(let E of y.docs){let I=xa({collectionSlug:l,currentDepth:A,depth:c,docID:E.id,draft:h,fallbackLocale:f,locale:d,overrideAccess:u,populate:m,select:g,showHiddenFields:p,transactionID:e.transactionID}),C=t.findIndex(B=>B===I);C>-1&&(o[C]=E)}}return o},yc=e=>{let t=new Map,r=new HS.default(Oq(e));return r.find=o=>{let n=Mq(o),i=t.get(n);if(i)return i;let s=e.payload.find(o);return t.set(n,s),s},r},Mq=({collection:e,currentDepth:t,depth:r,disableErrors:o,draft:n,includeLockStatus:i,joins:s,limit:a,overrideAccess:l,page:c,pagination:A,populate:d,req:f,select:u,showHiddenFields:p,sort:h,where:g})=>JSON.stringify([e,t,r,o,n,i,s,a,l,c,A,d,f?.locale,f?.fallbackLocale,f?.user?.id,f?.transactionID,u,p,h,g]),xa=({collectionSlug:e,currentDepth:t,depth:r,docID:o,draft:n,fallbackLocale:i,locale:s,overrideAccess:a,populate:l,select:c,showHiddenFields:A,transactionID:d})=>JSON.stringify([d,e,o,r,t,s,i,a,A,n,c,l]);import{initI18n as _q}from"@payloadcms/translations";var xm=async({config:e,language:t})=>_q({config:e.i18n,context:"api",language:t});var Ec=({fallbackLocale:e,locale:t,localization:r})=>{let o=!1;if(e==null&&(o=!!(r&&r.fallback)),e&&!["false","none","null"].includes(e)&&(o=!0),o){if(!e){let n=r&&r?.locales?.length?r.locales.find(i=>i.code===t)?.fallbackLocale:void 0;n?e=n:r&&"fallback"in r&&r.fallback&&(e=r.defaultLocale)}}else e=null;return e};function Gq(e={context:null},t={}){return e.context?Object.keys(e.context).length===0&&e.context.constructor===Object?t:{...e.context,...t}:t}var jq=(e,t)=>{let r;function o(){if(r)return r;let n=`http://${e.host||"localhost"}${t||""}`,i=e?.url||e.payload?.config?.serverURL?`${e.payload?.config.serverURL}${t||""}`:n;try{r=new URL(i)}catch{e.payload?.logger.error(`Failed to create URL object from URL: ${i}, falling back to ${n}`),r=new URL(n)}return r}e.host||(e.host=o().host),e.protocol||(e.protocol=o().protocol),e.pathname||(e.pathname=o().pathname),e.searchParams||(e.searchParams=o().searchParams),e.origin||(e.origin=o().origin),e?.url||(e.url=o().href)},W=async({context:e,fallbackLocale:t,locale:r,req:o={},urlSuffix:n,user:i},s)=>{let a=s.config?.localization;if(a){let c=r==="*"?"all":r,A=a.defaultLocale,d=c||o?.locale||o?.query?.locale;o.locale=d&&typeof d=="string"?d:A;let f=Ec({fallbackLocale:t,locale:o.locale,localization:a});o.fallbackLocale=f}let l=o?.i18n||await xm({config:s.config,language:s.config.i18n.fallbackLanguage});return o.headers||(o.headers=new Headers),o.context=Gq(o,e),o.payloadAPI=o?.payloadAPI||"local",o.payload=s,o.i18n=l,o.t=l.t,o.user=i||o?.user||null,o.payloadDataLoader=o?.payloadDataLoader||yc(o),o.routeParams=o?.routeParams||{},o.query=o?.query||{},jq(o,n),o};import Hq from"crypto";import{URL as Vq}from"url";var Je=async e=>{let{args:t,collection:r,operation:o,result:n}=e,i=n;if(t.collection.config.hooks?.afterOperation?.length)for(let s of t.collection.config.hooks.afterOperation){let a=await s({args:t,collection:r,operation:o,req:t.req,result:i});a!==void 0&&(i=a)}return i};async function pe(e){let{payload:t,transactionID:r}=e;await t.db.commitTransaction(r),delete e.transactionID}var VS=e=>{let{adminRoute:t,basePath:r="",path:o,serverURL:n}=e,i=o||"";if(t)if(t==="/"){if(!i)return`${n||""}${r}${t}`}else return`${n||""}${r}${t}${i}`;return`${n||""}${r}${i}`};async function de(e){let{payload:t,transactionID:r}=e;return r instanceof Promise?(await r,!1):r?!1:typeof t.db.beginTransaction=="function"?(e.transactionID=t.db.beginTransaction().then(o=>(o&&(e.transactionID=o),o)),!!await e.transactionID):!1}async function H(e){let{payload:t,transactionID:r}=e;if(r&&!(r instanceof Promise)){try{await t.db.rollbackTransaction(e.transactionID)}catch{}delete e.transactionID}}var mn=e=>({canLoginWithEmail:!e||e.allowEmailLogin,canLoginWithUsername:!!e});var Cc=async e=>{let t=e.collection.config.auth.loginWithUsername,{data:r}=e,{canLoginWithEmail:o,canLoginWithUsername:n}=mn(t),i=o&&(e.data.email||"").toLowerCase().trim()||null,s="username"in r&&typeof r?.username=="string"?r.username.toLowerCase().trim():null,a=e;if(e.collection.config.auth.disableLocalStrategy)throw new ae(e.req.t);if(!i&&!s)throw new F(`Missing ${t?"username":"email"}.`,N.BAD_REQUEST);try{let l=await de(a.req);if(a.collection.config.hooks?.beforeOperation?.length)for(let I of a.collection.config.hooks.beforeOperation)a=await I({args:a,collection:a.collection?.config,context:a.req.context,operation:"forgotPassword",req:a.req})||a;let{collection:{config:c},disableEmail:A,expiration:d,req:{payload:{config:f,email:u},payload:p},req:h}=a,g=Hq.randomBytes(20).toString("hex");if(!i&&!s)throw new F(`Missing ${t?"username":"email"}.`,N.BAD_REQUEST);let m={};o&&i?m={email:{equals:i}}:n&&s&&(m={username:{equals:s}});let y=await p.db.findOne({collection:c.slug,req:h,where:m});if(!y)return await pe(a.req),null;let E=new Date(Date.now()+(c.auth?.forgotPassword?.expiration??d??36e5)).toISOString();if(y=await p.update({id:y.id,collection:c.slug,data:{resetPasswordExpiration:E,resetPasswordToken:g},req:h}),!A&&y.email){let I=new Vq(h.url).protocol,C=f.serverURL!==null&&f.serverURL!==""?f.serverURL:`${I}//${h.headers.get("host")}`,B=VS({adminRoute:f.routes.admin,path:`${f.admin.routes.reset}/${g}`,serverURL:C}),R=`${h.t("authentication:youAreReceivingResetPassword")}
    <a href="${B}">${B}</a>
    ${h.t("authentication:youDidNotRequestPassword")}`;typeof c.auth.forgotPassword?.generateEmailHTML=="function"&&(R=await c.auth.forgotPassword.generateEmailHTML({req:h,token:g,user:y}));let x=h.t("authentication:resetYourPassword");typeof c.auth.forgotPassword?.generateEmailSubject=="function"&&(x=await c.auth.forgotPassword.generateEmailSubject({req:h,token:g,user:y})),await u.sendEmail({from:`"${u.defaultFromName}" <${u.defaultFromAddress}>`,html:R,subject:x,to:y.email})}if(c.hooks?.afterForgotPassword?.length)for(let I of c.hooks.afterForgotPassword)await I({args:a,collection:a.collection?.config,context:h.context});return g=await Je({args:a,collection:a.collection?.config,operation:"forgotPassword",result:g}),l&&await pe(h),g}catch(l){throw await H(a.req),l}};async function qS(e,t){let{collection:r,data:o,disableEmail:n,expiration:i}=t,s=e.collections[r];if(!s)throw new F(`The collection with slug ${String(r)} can't be found. Forgot Password Operation.`);return Cc({collection:s,data:o,disableEmail:n,expiration:i,req:await W(t,e)})}var Rt=[];for(let e=0;e<256;++e)Rt.push((e+256).toString(16).slice(1));function YS(e,t=0){return(Rt[e[t+0]]+Rt[e[t+1]]+Rt[e[t+2]]+Rt[e[t+3]]+"-"+Rt[e[t+4]]+Rt[e[t+5]]+"-"+Rt[e[t+6]]+Rt[e[t+7]]+"-"+Rt[e[t+8]]+Rt[e[t+9]]+"-"+Rt[e[t+10]]+Rt[e[t+11]]+Rt[e[t+12]]+Rt[e[t+13]]+Rt[e[t+14]]+Rt[e[t+15]]).toLowerCase()}import qq from"node:crypto";var Cd=new Uint8Array(256),Ed=Cd.length;function Rm(){return Ed>Cd.length-16&&(qq.randomFillSync(Cd),Ed=0),Cd.slice(Ed,Ed+=16)}import Yq from"node:crypto";var Dm={randomUUID:Yq.randomUUID};function Wq(e,t,r){if(Dm.randomUUID&&!t&&!e)return Dm.randomUUID();e=e||{};let o=e.random||(e.rng||Rm)();if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){r=r||0;for(let n=0;n<16;++n)t[r+n]=o[n];return t}return YS(o)}var ei=Wq;var co=e=>{for(let t in e){let r=e[t];if(r===!1)return"exclude";if(typeof r=="object")return co(r)}return"include"};var Fm=({block:e,select:t,selectMode:r})=>{if(typeof t=="object"){let o=r,i={...t}[e.slug];return r==="exclude"&&i===!1?(o="include",i={id:!0,blockType:!0}):r==="include"&&(i||(i={}),typeof i=="object"&&(i={...i},i.id=!0,i.blockType=!0)),{blockSelect:i,blockSelectMode:o}}return{blockSelect:t,blockSelectMode:r}};var km=({field:e,select:t,selectMode:r,siblingDoc:o})=>{let n=!0;return J(e)&&t&&r&&e.name&&(r==="include"&&(t[e.name]||(delete o[e.name],n=!1)),r==="exclude"&&t[e.name]===!1&&(delete o[e.name],n=!1)),n};function WS(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}var rs=new Map;rs.set(Date,e=>new Date(e));rs.set(Map,(e,t)=>new Map(Nm(Array.from(e),t)));rs.set(Set,(e,t)=>new Set(Nm(Array.from(e),t)));rs.set(RegExp,e=>new RegExp(e.source,e.flags));var Ra=null;function Nm(e,t){let r=Object.keys(e),o=new Array(r.length);for(let n=0;n<r.length;n++){let i=r[n],s=e[i];typeof s!="object"||s===null?o[i]=s:s instanceof RegExp?o[i]=new RegExp(s.source,s.flags):s.constructor!==Object&&(Ra=rs.get(s.constructor))?o[i]=Ra(s,t):ArrayBuffer.isView(s)?o[i]=WS(s):o[i]=t(s)}return o}var Ic=e=>{if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return Nm(e,Ic);if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e.constructor!==Object&&(Ra=rs.get(e.constructor)))return Ra(e,Ic);let t={};for(let r in e){if(Object.hasOwnProperty.call(e,r)===!1)continue;let o=e[r];typeof o!="object"||o===null?t[r]=o:o instanceof RegExp?t[r]=new RegExp(o.source,o.flags):o.constructor!==Object&&(Ra=rs.get(o.constructor))?t[r]=Ra(o,Ic):ArrayBuffer.isView(o)?t[r]=WS(o):t[r]=Ic(o)}return t};function He(e,t=!1){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(r=>typeof r!="object"||r===null?r:He(r,t));{if(e instanceof Date)return new Date(e);let r={};for(let o in e){let n=e[o];t&&n===void 0||(r[o]=typeof n!="object"||n===null?n:He(n,t))}return r}}function Id(e,t=new WeakMap){if(e===null)return null;if(t.has(e))return t.get(e);if(e instanceof File)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e instanceof Map){let r=new Map;t.set(e,r);for(let[o,n]of e.entries())r.set(o,Id(n,t));return r}if(e instanceof Set){let r=new Set;t.set(e,r);for(let o of e.values())r.add(Id(o,t));return r}if(typeof e=="object"&&e!==null){if("$$typeof"in e&&typeof e.$$typeof=="symbol")return e;let r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));t.set(e,r);for(let o in e)(Object.prototype.hasOwnProperty.call(e,o)||Object.getOwnPropertySymbols(e).includes(o))&&(r[o]=Id(e[o],t));return r}return e}var Bc=async({defaultValue:e,locale:t,req:r,user:o,value:n})=>typeof n<"u"?n:e&&typeof e=="function"?await e({locale:t,req:r,user:o}):typeof e=="object"?He(e):e;function ko({field:e,index:t,parentIndexPath:r,parentPath:o,parentSchemaPath:n}){let i=o.split("."),s=i[i.length-1].startsWith("_index-"),a=s?i.slice(0,-1).join("."):o,l=s?a:o;if("name"in e)return{indexPath:"",path:`${l?l+".":""}${e.name}`,schemaPath:`${n?n+".":""}${e.name}`};let c=`_index-${`${r?r+"-":""}${t}`}`;return{indexPath:`${r?r+"-":""}${t}`,path:`${l?l+".":""}${c}`,schemaPath:`${!s&&n?n+".":""}${c}`}}var Bd=async({currentDepth:e,data:t,dataReference:r,depth:o,draft:n,fallbackLocale:i,field:s,index:a,key:l,locale:c,overrideAccess:A,populateArg:d,req:f,showHiddenFields:u})=>{let p=r,h;s.type==="join"?h=Array.isArray(s.collection)?t.relationTo:s.collection:h=Array.isArray(s.relationTo)?t.relationTo:s.relationTo;let g=f.payload.collections[h];if(g){let m;s.type==="join"&&Array.isArray(s.collection)||s.type!=="join"&&Array.isArray(s.relationTo)?m=t.value:m=t;let y,E=o&&e<=o;typeof m!="string"&&typeof m!="number"&&typeof m?.toString=="function"&&typeof m!="object"&&(m=m.toString()),E&&(y=await f.payloadDataLoader.load(xa({collectionSlug:g.config.slug,currentDepth:e+1,depth:o,docID:m,draft:n,fallbackLocale:i,locale:c,overrideAccess:A,populate:d,select:d?.[g.config.slug]??g.config.defaultPopulate,showHiddenFields:u,transactionID:f.transactionID}))),y||(y=m),typeof a=="number"&&typeof l=="string"?s.type!=="join"&&Array.isArray(s.relationTo)||s.type==="join"&&Array.isArray(s.collection)?p[s.name][l][a].value=y:p[s.name][l][a]=y:typeof a=="number"||typeof l=="string"?s.type==="join"?Array.isArray(s.collection)?p[s.name].docs[a??l].value=y:p[s.name].docs[a??l]=y:Array.isArray(s.relationTo)?p[s.name][a??l].value=y:p[s.name][a??l]=y:s.type!=="join"&&Array.isArray(s.relationTo)||s.type==="join"&&Array.isArray(s.collection)?p[s.name].value=y:p[s.name]=y}},JS=async({currentDepth:e,depth:t,draft:r,fallbackLocale:o,field:n,locale:i,overrideAccess:s,parentIsLocalized:a,populate:l,req:c,showHiddenFields:A,siblingDoc:d})=>{let f=d,u=DS(n)&&n.maxDepth<t?n.maxDepth:t,p=[];n.type==="join"||RS(n)&&n.hasMany?ft({field:n,parentIsLocalized:a})&&i==="all"&&typeof d[n.name]=="object"&&d[n.name]!==null?Object.keys(d[n.name]).forEach(h=>{Array.isArray(d[n.name][h])&&d[n.name][h].forEach((g,m)=>{let y=async()=>{await Bd({currentDepth:e,data:d[n.name][h][m],dataReference:f,depth:u,draft:r,fallbackLocale:o,field:n,index:m,key:h,locale:i,overrideAccess:s,populateArg:l,req:c,showHiddenFields:A})};p.push(y())})}):(Array.isArray(d[n.name])||Array.isArray(d[n.name]?.docs))&&(Array.isArray(d[n.name])?d[n.name]:d[n.name].docs).forEach((h,g)=>{let m=async()=>{h&&await Bd({currentDepth:e,data:!(n.type==="join"&&Array.isArray(n.collection))&&h?.id?h.id:h,dataReference:f,depth:u,draft:r,fallbackLocale:o,field:n,index:g,locale:i,overrideAccess:s,populateArg:l,req:c,showHiddenFields:A})};p.push(m())}):n.localized&&i==="all"&&typeof d[n.name]=="object"&&d[n.name]!==null?(Object.keys(d[n.name]).forEach(h=>{let g=async()=>{await Bd({currentDepth:e,data:d[n.name][h],dataReference:f,depth:u,draft:r,fallbackLocale:o,field:n,key:h,locale:i,overrideAccess:s,populateArg:l,req:c,showHiddenFields:A})};p.push(g())}),await Promise.all(p)):d[n.name]&&await Bd({currentDepth:e,data:d[n.name],dataReference:f,depth:u,draft:r,fallbackLocale:o,field:n,locale:i,overrideAccess:s,populateArg:l,req:c,showHiddenFields:A}),await Promise.all(p)};var Qd=async({name:e,draft:t,fallbackLocale:r,fields:o,locale:n,overrideAccess:i,ref:s,req:a,segments:l,showHiddenFields:c,siblingDoc:A})=>{let d=l.shift();if(!d)return;let f=s[d];if(typeof f>"u")return;if(l.length===0){A[e]=f;return}let u=o.find(p=>p.name===d);if(u){if(u.type==="group"||u.type==="tab")return!f||typeof f!="object"?void 0:Qd({name:e,draft:t,fallbackLocale:r,fields:u.flattenedFields,locale:n,overrideAccess:i,ref:f,req:a,segments:l,showHiddenFields:c,siblingDoc:A});if((u.type==="relationship"||u.type==="upload")&&typeof u.relationTo=="string"&&!u.hasMany){let p;if(typeof f=="object"&&f?p=f.id:p=f,l[0]==="id"&&l.length===0){A[e]=p;return}if(typeof p!="string"&&typeof p!="number")return;let h={},g=h,m=a.payload.collections[u.relationTo]?.config.flattenedFields;for(let E=0;E<l.length;E++){let I=m?.find(B=>B.name===l[E]),C=E===l.length-1||I?.type==="relationship"||I?.type==="upload";if(g[l[E]]=C?!0:{},g=g[l[E]],C)break}let y=await a.payloadDataLoader.load(xa({collectionSlug:u.relationTo,currentDepth:0,depth:0,docID:p,draft:t,fallbackLocale:r,locale:n,overrideAccess:i,select:h,showHiddenFields:c,transactionID:a.transactionID}));return y?Qd({name:e,draft:t,fallbackLocale:r,fields:a.payload.collections[u.relationTo].config.flattenedFields,locale:n,overrideAccess:i,ref:y,req:a,segments:l,showHiddenFields:c,siblingDoc:A}):void 0}}};var vm=async({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,field:l,fieldIndex:c,fieldPromises:A,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:g,parentIsLocalized:m,parentPath:y,parentSchemaPath:E,populate:I,populationPromises:C,req:B,select:R,selectMode:x,showHiddenFields:S,siblingDoc:Q,siblingFields:T,triggerAccessControl:D=!0,triggerHooks:k=!0})=>{let{indexPath:P,path:U,schemaPath:_}=ko({field:l,index:c,parentIndexPath:g,parentPath:y,parentSchemaPath:E}),Y=U?U.split("."):[],ce=_?_.split("."):[],he=P?P.split("-").filter(Boolean)?.map(Number):[];if(J(l)&&l.hidden&&typeof Q[l.name]<"u"&&!S&&delete Q[l.name],U!=="id"&&!km({field:l,select:R,selectMode:x,siblingDoc:Q}))return;let G=f&&J(l)&&typeof Q[l.name]=="object"&&Q[l.name]!==null&&ft({field:l,parentIsLocalized:m})&&p!=="all"&&B.payload.config.localization;if(G){let M=Q[l.name][p],V=M;if(a&&a!==p){let $=Q[l.name][a],te=typeof M>"u"||M===null;if($)switch(l.type){case"text":case"textarea":{(M===""||te)&&(V=$);break}default:{te&&(V=$);break}}}Q[l.name]=V}switch(l.type){case"group":{J(l)&&typeof Q[l.name]>"u"&&(Q[l.name]={});break}case"point":{let M=Q[l.name];Array.isArray(M?.coordinates)&&M.coordinates.length===2?Q[l.name]=M.coordinates:Q[l.name]=void 0;break}case"richText":{if(!l?.editor)throw new Et(l);if(typeof l?.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");break}case"tabs":{l.tabs.forEach(M=>{yt(M)&&(typeof Q[M.name]>"u"||Q[M.name]===null)&&(Q[M.name]={})});break}default:break}if(J(l)){if(k&&l.hooks?.afterRead)for(let V of l.hooks.afterRead)if(ft({field:l,parentIsLocalized:m})&&(p==="all"||!f)&&typeof Q[l.name]=="object"){let te=Object.entries(Q[l.name]);await Promise.all(te.map(async([et,vt])=>{let Tt=await V({blockData:e,collection:t,context:r,currentDepth:o,data:i,depth:n,draft:s,field:l,findMany:d,global:u,indexPath:he,operation:"read",originalDoc:i,overrideAccess:h,path:Y,req:B,schemaPath:ce,showHiddenFields:S,siblingData:Q,siblingFields:T,value:vt});Tt!==void 0&&(Q[l.name][et]=Tt)}))}else{let te=await V({blockData:e,collection:t,context:r,currentDepth:o,data:i,depth:n,draft:s,field:l,findMany:d,global:u,indexPath:he,operation:"read",originalDoc:i,overrideAccess:h,path:Y,req:B,schemaPath:ce,showHiddenFields:S,siblingData:Q,siblingFields:T,value:Q[l.name]});te!==void 0&&(Q[l.name]=te)}"virtual"in l&&typeof l.virtual=="string"&&(!l.hidden||S)&&C.push(Qd({name:l.name,draft:s,fallbackLocale:a,fields:(t||u).flattenedFields,locale:p,overrideAccess:h,ref:i,req:B,segments:l.virtual.split("."),showHiddenFields:S,siblingDoc:Q}));let M=!0;D&&l.access&&l.access.read&&(h||await l.access.read({id:i.id,blockData:e,data:i,doc:i,req:B,siblingData:Q})||(M=!1,delete Q[l.name])),M&&typeof Q[l.name]>"u"&&typeof l.defaultValue<"u"&&(Q[l.name]=await Bc({defaultValue:l.defaultValue,locale:p,req:B,user:B.user,value:Q[l.name]})),(l.type==="relationship"||l.type==="upload"||l.type==="join")&&C.push(JS({currentDepth:o,depth:n,draft:s,fallbackLocale:a,field:l,locale:p,overrideAccess:h,parentIsLocalized:m,populate:I,req:B,showHiddenFields:S,siblingDoc:Q}))}switch(l.type){case"array":{let M=Q[l.name],V=R?.[l.name];x==="include"&&typeof V=="object"&&(V={...V,id:!0}),Array.isArray(M)?M.forEach(($,te)=>{Ir({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:l.fields,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:"",parentIsLocalized:m||l.localized,parentPath:U+"."+te,parentSchemaPath:_,populate:I,populationPromises:C,req:B,select:typeof V=="object"?V:void 0,selectMode:x,showHiddenFields:S,siblingDoc:$||{},triggerAccessControl:D,triggerHooks:k})}):!G&&typeof M=="object"&&M!==null?Object.values(M).forEach($=>{Array.isArray($)&&$.forEach((te,et)=>{Ir({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:l.fields,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:"",parentIsLocalized:m||l.localized,parentPath:U+"."+et,parentSchemaPath:_,populate:I,populationPromises:C,req:B,showHiddenFields:S,siblingDoc:te||{},triggerAccessControl:D,triggerHooks:k})})}):(l.hidden!==!0||S===!0)&&(Q[l.name]=[]);break}case"blocks":{let M=Q[l.name];Array.isArray(M)?M.forEach((V,$)=>{let te=V.blockType,et=B.payload.blocks[te]??(l.blockReferences??l.blocks).find(qi=>typeof qi!="string"&&qi.slug===te),{blockSelect:vt,blockSelectMode:Tt}=Fm({block:et,select:R?.[l.name],selectMode:x});et&&Ir({blockData:V,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:et.fields,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:"",parentIsLocalized:m||l.localized,parentPath:U+"."+$,parentSchemaPath:_+"."+et.slug,populate:I,populationPromises:C,req:B,select:typeof vt=="object"?vt:void 0,selectMode:Tt,showHiddenFields:S,siblingDoc:V||{},triggerAccessControl:D,triggerHooks:k})}):!G&&typeof M=="object"&&M!==null?Object.values(M).forEach(V=>{Array.isArray(V)&&V.forEach(($,te)=>{let et=$.blockType,vt=B.payload.blocks[et]??(l.blockReferences??l.blocks).find(Tt=>typeof Tt!="string"&&Tt.slug===et);vt&&Ir({blockData:$,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:vt.fields,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:"",parentIsLocalized:m||l.localized,parentPath:U+"."+te,parentSchemaPath:_+"."+vt.slug,populate:I,populationPromises:C,req:B,showHiddenFields:S,siblingDoc:$||{},triggerAccessControl:D,triggerHooks:k})})}):(l.hidden!==!0||S===!0)&&(Q[l.name]=[]);break}case"collapsible":case"row":{Ir({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:l.fields,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:P,parentIsLocalized:m,parentPath:y,parentSchemaPath:_,populate:I,populationPromises:C,req:B,select:R,selectMode:x,showHiddenFields:S,siblingDoc:Q,triggerAccessControl:D,triggerHooks:k});break}case"group":{if(J(l)){let M=Q[l.name];typeof Q[l.name]!="object"&&(M={});let V=R?.[l.name];Ir({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:l.fields,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:"",parentIsLocalized:m||l.localized,parentPath:U,parentSchemaPath:_,populate:I,populationPromises:C,req:B,select:typeof V=="object"?V:void 0,selectMode:x,showHiddenFields:S,siblingDoc:M,triggerAccessControl:D,triggerHooks:k})}else Ir({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:l.fields,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:P,parentIsLocalized:m,parentPath:y,parentSchemaPath:_,populate:I,populationPromises:C,req:B,select:R,selectMode:x,showHiddenFields:S,siblingDoc:Q,triggerAccessControl:D,triggerHooks:k});break}case"richText":{if(!l?.editor)throw new Et(l);if(typeof l?.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");let M=l?.editor;if(M?.hooks?.afterRead?.length)for(let V of M.hooks.afterRead)if(ft({field:l,parentIsLocalized:m})&&(p==="all"||!f)&&typeof Q[l.name]=="object"){let te=Object.entries(Q[l.name]);await Promise.all(te.map(async([et,vt])=>{let Tt=await V({collection:t,context:r,currentDepth:o,data:i,depth:n,draft:s,fallbackLocale:a,field:l,fieldPromises:A,findMany:d,flattenLocales:f,global:u,indexPath:he,locale:et,operation:"read",originalDoc:i,overrideAccess:h,parentIsLocalized:m,path:Y,populate:I,populationPromises:C,req:B,schemaPath:ce,showHiddenFields:S,siblingData:Q,triggerAccessControl:D,triggerHooks:k,value:vt});Tt!==void 0&&(Q[l.name][et]=Tt)}))}else{let te=await V({collection:t,context:r,currentDepth:o,data:i,depth:n,draft:s,fallbackLocale:a,field:l,fieldPromises:A,findMany:d,flattenLocales:f,global:u,indexPath:he,locale:p,operation:"read",originalDoc:i,overrideAccess:h,parentIsLocalized:m,path:Y,populate:I,populationPromises:C,req:B,schemaPath:ce,showHiddenFields:S,siblingData:Q,triggerAccessControl:D,triggerHooks:k,value:Q[l.name]});te!==void 0&&(Q[l.name]=te)}break}case"tab":{let M=Q,V,$=yt(l);$?(M=Q[l.name],typeof Q[l.name]!="object"&&(M={}),typeof R?.[l.name]=="object"&&(V=R?.[l.name])):V=R,Ir({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:l.fields,findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:$?"":P,parentIsLocalized:m||l.localized,parentPath:$?U:y,parentSchemaPath:_,populate:I,populationPromises:C,req:B,select:V,selectMode:x,showHiddenFields:S,siblingDoc:M,triggerAccessControl:D,triggerHooks:k});break}case"tabs":{Ir({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:A,fields:l.tabs.map(M=>({...M,type:"tab"})),findMany:d,flattenLocales:f,global:u,locale:p,overrideAccess:h,parentIndexPath:P,parentIsLocalized:m,parentPath:U,parentSchemaPath:_,populate:I,populationPromises:C,req:B,select:R,selectMode:x,showHiddenFields:S,siblingDoc:Q,triggerAccessControl:D,triggerHooks:k});break}default:break}};var Ir=({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,fieldPromises:l,fields:c,findMany:A,flattenLocales:d,global:f,locale:u,overrideAccess:p,parentIndexPath:h,parentIsLocalized:g,parentPath:m,parentSchemaPath:y,populate:E,populationPromises:I,req:C,select:B,selectMode:R,showHiddenFields:x,siblingDoc:S,triggerAccessControl:Q=!0,triggerHooks:T=!0})=>{c.forEach((D,k)=>{l.push(vm({blockData:e,collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,field:D,fieldIndex:k,fieldPromises:l,findMany:A,flattenLocales:d,global:f,locale:u,overrideAccess:p,parentIndexPath:h,parentIsLocalized:g,parentPath:m,parentSchemaPath:y,populate:E,populationPromises:I,req:C,select:B,selectMode:R,showHiddenFields:x,siblingDoc:S,siblingFields:c,triggerAccessControl:Q,triggerHooks:T}))})};async function be(e){let{collection:t,context:r,currentDepth:o,depth:n,doc:i,draft:s,fallbackLocale:a,findMany:l,flattenLocales:c=!0,global:A,locale:d,overrideAccess:f,populate:u,req:p,select:h,showHiddenFields:g}=e,m=[],y=[],E=n||n===0?parseInt(String(n),10):p.payload.config.defaultDepth;E>p.payload.config.maxDepth&&(E=p.payload.config.maxDepth),Ir({collection:t,context:r,currentDepth:o||1,depth:E,doc:i,draft:s,fallbackLocale:a,fieldPromises:m,fields:t?.fields||A?.fields,findMany:l,flattenLocales:c,global:A,locale:d,overrideAccess:f,parentIndexPath:"",parentIsLocalized:!1,parentPath:"",parentSchemaPath:"",populate:u,populationPromises:y,req:p,select:h,selectMode:h?co(h):void 0,showHiddenFields:g,siblingDoc:i});let C=0;for(;m.length>0||y.length>0;){let B=m.splice(0,m.length),R=y.splice(0,y.length);if(await Promise.all(B),await Promise.all(R),C++,C>=100)throw new Error("Infinite afterRead promise loop detected. A hook is likely adding field promises in an infinitely recursive way.")}return i}var Or=e=>{let t={};for(let r in e){let o=e[r];r==="_id"?t.id=o:r!=="__v"&&(t[r]=o)}return t};var os=({data:e,fields:t,result:r})=>(t.forEach(o=>{switch(o.type){case"collapsible":case"row":{os({data:e,fields:o.fields,result:r});break}case"group":if(J(o)){let n;typeof o.saveToJWT=="string"?(n=o.saveToJWT,r[o.saveToJWT]=e[o.name]):o.saveToJWT&&(n=o.name,r[o.name]=e[o.name]);let i=e[o.name],s=n?r[n]:r;os({data:i,fields:o.fields,result:s});break}else{os({data:e,fields:o.fields,result:r});break}case"tab":{if(yt(o)){let n;typeof o.saveToJWT=="string"?(n=o.saveToJWT,r[o.saveToJWT]=e[o.name]):o.saveToJWT&&(n=o.name,r[o.name]=e[o.name]);let i=e[o.name],s=n?r[n]:r;os({data:i,fields:o.fields,result:s})}else os({data:e,fields:o.fields,result:r});break}case"tabs":{os({data:e,fields:o.tabs.map(n=>({...n,type:"tab"})),result:r});break}default:J(o)&&(o.saveToJWT?typeof o.saveToJWT=="string"?(r[o.saveToJWT]=e[o.name],delete r[o.name]):r[o.name]=e[o.name]:o.saveToJWT===!1&&delete r[o.name])}}),r),ns=e=>{let{collectionConfig:t,email:r,sid:o,user:n}=e,i={id:n?.id,collection:t.slug,email:r};return o&&(i.sid=o),os({data:n,fields:t.fields,result:i}),i};var zS=e=>e?e>Date.now():!1;import{Buffer as $S}from"node:buffer";var Mr=new TextEncoder,Br=new TextDecoder,Bye=2**32;function bd(...e){let t=e.reduce((n,{length:i})=>n+i,0),r=new Uint8Array(t),o=0;for(let n of e)r.set(n,o),o+=n.length;return r}function Jq(e){let t=e;return t instanceof Uint8Array&&(t=Br.decode(t)),t}var Qc=e=>$S.from(e).toString("base64url");var ti=e=>new Uint8Array($S.from(Jq(e),"base64url"));var yn=class extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(t,r){super(t,r),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}},Qr=class extends yn{static code="ERR_JWT_CLAIM_VALIDATION_FAILED";code="ERR_JWT_CLAIM_VALIDATION_FAILED";claim;reason;payload;constructor(t,r,o="unspecified",n="unspecified"){super(t,{cause:{claim:o,reason:n,payload:r}}),this.claim=o,this.reason=n,this.payload=r}},bc=class extends yn{static code="ERR_JWT_EXPIRED";code="ERR_JWT_EXPIRED";claim;reason;payload;constructor(t,r,o="unspecified",n="unspecified"){super(t,{cause:{claim:o,reason:n,payload:r}}),this.claim=o,this.reason=n,this.payload=r}},wd=class extends yn{static code="ERR_JOSE_ALG_NOT_ALLOWED";code="ERR_JOSE_ALG_NOT_ALLOWED"},Yt=class extends yn{static code="ERR_JOSE_NOT_SUPPORTED";code="ERR_JOSE_NOT_SUPPORTED"};var Ve=class extends yn{static code="ERR_JWS_INVALID";code="ERR_JWS_INVALID"},Pt=class extends yn{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"};var Sd=class extends yn{static code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED";constructor(t="signature verification failed",r){super(t,r)}};import*as KS from"node:util";var Td=e=>KS.types.isKeyObject(e);import*as ZS from"node:crypto";import*as XS from"node:util";var Kq=ZS.webcrypto,eT=Kq,Da=e=>XS.types.isCryptoKey(e);function En(e,t="algorithm.name"){return new TypeError(`CryptoKey does not support this operation, its ${t} must be ${e}`)}function xd(e,t){return e.name===t}function Pm(e){return parseInt(e.name.slice(4),10)}function Zq(e){switch(e){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw new Error("unreachable")}}function Xq(e,t){if(t.length&&!t.some(r=>e.usages.includes(r))){let r="CryptoKey does not support this operation, its usages must include ";if(t.length>2){let o=t.pop();r+=`one of ${t.join(", ")}, or ${o}.`}else t.length===2?r+=`one of ${t[0]} or ${t[1]}.`:r+=`${t[0]}.`;throw new TypeError(r)}}function tT(e,t,...r){switch(t){case"HS256":case"HS384":case"HS512":{if(!xd(e.algorithm,"HMAC"))throw En("HMAC");let o=parseInt(t.slice(2),10);if(Pm(e.algorithm.hash)!==o)throw En(`SHA-${o}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!xd(e.algorithm,"RSASSA-PKCS1-v1_5"))throw En("RSASSA-PKCS1-v1_5");let o=parseInt(t.slice(2),10);if(Pm(e.algorithm.hash)!==o)throw En(`SHA-${o}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!xd(e.algorithm,"RSA-PSS"))throw En("RSA-PSS");let o=parseInt(t.slice(2),10);if(Pm(e.algorithm.hash)!==o)throw En(`SHA-${o}`,"algorithm.hash");break}case"EdDSA":{if(e.algorithm.name!=="Ed25519"&&e.algorithm.name!=="Ed448")throw En("Ed25519 or Ed448");break}case"ES256":case"ES384":case"ES512":{if(!xd(e.algorithm,"ECDSA"))throw En("ECDSA");let o=Zq(t);if(e.algorithm.namedCurve!==o)throw En(o,"algorithm.namedCurve");break}default:throw new TypeError("CryptoKey does not support this operation")}Xq(e,r)}function rT(e,t,...r){if(r=r.filter(Boolean),r.length>2){let o=r.pop();e+=`one of type ${r.join(", ")}, or ${o}.`}else r.length===2?e+=`one of type ${r[0]} or ${r[1]}.`:e+=`of type ${r[0]}.`;return t==null?e+=` Received ${t}`:typeof t=="function"&&t.name?e+=` Received function ${t.name}`:typeof t=="object"&&t!=null&&t.constructor?.name&&(e+=` Received an instance of ${t.constructor.name}`),e}var wc=(e,...t)=>rT("Key must be ",e,...t);function Lm(e,t,...r){return rT(`Key for the ${e} algorithm must be `,t,...r)}var Um=e=>Td(e)||Da(e),Cn=["KeyObject"];(globalThis.CryptoKey||eT?.CryptoKey)&&Cn.push("CryptoKey");var eY=(...e)=>{let t=e.filter(Boolean);if(t.length===0||t.length===1)return!0;let r;for(let o of t){let n=Object.keys(o);if(!r||r.size===0){r=new Set(n);continue}for(let i of n){if(r.has(i))return!1;r.add(i)}}return!0},Rd=eY;function tY(e){return typeof e=="object"&&e!==null}function Xt(e){if(!tY(e)||Object.prototype.toString.call(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}import{KeyObject as rY}from"node:crypto";function No(e){return Xt(e)&&typeof e.kty=="string"}function oT(e){return e.kty!=="oct"&&typeof e.d=="string"}function nT(e){return e.kty!=="oct"&&typeof e.d>"u"}function iT(e){return No(e)&&e.kty==="oct"&&typeof e.k=="string"}var oY=e=>{switch(e){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new Yt("Unsupported key curve for this operation")}},nY=(e,t)=>{let r;if(Da(e))r=rY.from(e);else if(Td(e))r=e;else{if(No(e))return e.crv;throw new TypeError(wc(e,...Cn))}if(r.type==="secret")throw new TypeError('only "private" or "public" type keys can be used for this operation');switch(r.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${r.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${r.asymmetricKeyType.slice(1)}`;case"ec":{let o=r.asymmetricKeyDetails.namedCurve;return t?o:oY(o)}default:throw new TypeError("Invalid asymmetric key type for this operation")}},aT=nY;import{KeyObject as iY}from"node:crypto";var Om=(e,t)=>{let r;try{e instanceof iY?r=e.asymmetricKeyDetails?.modulusLength:r=Buffer.from(e.n,"base64url").byteLength<<3}catch{}if(typeof r!="number"||r<2048)throw new TypeError(`${t} requires key modulusLength to be 2048 bits or larger`)};import{createPrivateKey as sY,createPublicKey as aY}from"node:crypto";var lY=e=>e.d?sY({format:"jwk",key:e}):aY({format:"jwk",key:e}),lT=lY;async function cT(e,t){if(!Xt(e))throw new TypeError("JWK must be an object");switch(t||=e.alg,e.kty){case"oct":if(typeof e.k!="string"||!e.k)throw new TypeError('missing "k" (Key Value) Parameter value');return ti(e.k);case"RSA":if(e.oth!==void 0)throw new Yt('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return lT({...e,alg:t});default:throw new Yt('Unsupported "kty" (Key Type) Parameter value')}}var Fa=e=>e?.[Symbol.toStringTag],Mm=(e,t,r)=>{if(t.use!==void 0&&t.use!=="sig")throw new TypeError("Invalid key for this operation, when present its use must be sig");if(t.key_ops!==void 0&&t.key_ops.includes?.(r)!==!0)throw new TypeError(`Invalid key for this operation, when present its key_ops must include ${r}`);if(t.alg!==void 0&&t.alg!==e)throw new TypeError(`Invalid key for this operation, when present its alg must be ${e}`);return!0},cY=(e,t,r,o)=>{if(!(t instanceof Uint8Array)){if(o&&No(t)){if(iT(t)&&Mm(e,t,r))return;throw new TypeError('JSON Web Key for symmetric algorithms must have JWK "kty" (Key Type) equal to "oct" and the JWK "k" (Key Value) present')}if(!Um(t))throw new TypeError(Lm(e,t,...Cn,"Uint8Array",o?"JSON Web Key":null));if(t.type!=="secret")throw new TypeError(`${Fa(t)} instances for symmetric algorithms must be of type "secret"`)}},AY=(e,t,r,o)=>{if(o&&No(t))switch(r){case"sign":if(oT(t)&&Mm(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a private JWK");case"verify":if(nT(t)&&Mm(e,t,r))return;throw new TypeError("JSON Web Key for this operation be a public JWK")}if(!Um(t))throw new TypeError(Lm(e,t,...Cn,o?"JSON Web Key":null));if(t.type==="secret")throw new TypeError(`${Fa(t)} instances for asymmetric algorithms must not be of type "secret"`);if(r==="sign"&&t.type==="public")throw new TypeError(`${Fa(t)} instances for asymmetric algorithm signing must be of type "private"`);if(r==="decrypt"&&t.type==="public")throw new TypeError(`${Fa(t)} instances for asymmetric algorithm decryption must be of type "private"`);if(t.algorithm&&r==="verify"&&t.type==="private")throw new TypeError(`${Fa(t)} instances for asymmetric algorithm verifying must be of type "public"`);if(t.algorithm&&r==="encrypt"&&t.type==="private")throw new TypeError(`${Fa(t)} instances for asymmetric algorithm encryption must be of type "public"`)};function AT(e,t,r,o){t.startsWith("HS")||t==="dir"||t.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(t)?cY(t,r,o,e):AY(t,r,o,e)}var tEe=AT.bind(void 0,!1),Sc=AT.bind(void 0,!0);function uY(e,t,r,o,n){if(n.crit!==void 0&&o?.crit===void 0)throw new e('"crit" (Critical) Header Parameter MUST be integrity protected');if(!o||o.crit===void 0)return new Set;if(!Array.isArray(o.crit)||o.crit.length===0||o.crit.some(s=>typeof s!="string"||s.length===0))throw new e('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');let i;r!==void 0?i=new Map([...Object.entries(r),...t.entries()]):i=t;for(let s of o.crit){if(!i.has(s))throw new Yt(`Extension Header Parameter "${s}" is not recognized`);if(n[s]===void 0)throw new e(`Extension Header Parameter "${s}" is missing`);if(i.get(s)&&o[s]===void 0)throw new e(`Extension Header Parameter "${s}" MUST be integrity protected`)}return new Set(o.crit)}var Dd=uY;var dY=(e,t)=>{if(t!==void 0&&(!Array.isArray(t)||t.some(r=>typeof r!="string")))throw new TypeError(`"${e}" option must be an array of strings`);if(t)return new Set(t)},uT=dY;import*as Nd from"node:crypto";import{promisify as yY}from"node:util";function Tc(e){switch(e){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new Yt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}import{constants as dT,KeyObject as fY}from"node:crypto";var pY=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);function xc(e,t){let r,o,n;if(t instanceof fY)r=t.asymmetricKeyType,o=t.asymmetricKeyDetails;else switch(n=!0,t.kty){case"RSA":r="rsa";break;case"EC":r="ec";break;case"OKP":{if(t.crv==="Ed25519"){r="ed25519";break}if(t.crv==="Ed448"){r="ed448";break}throw new TypeError("Invalid key for this operation, its crv must be Ed25519 or Ed448")}default:throw new TypeError("Invalid key for this operation, its kty must be RSA, OKP, or EC")}let i;switch(e){case"EdDSA":if(!["ed25519","ed448"].includes(r))throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");break;case"RS256":case"RS384":case"RS512":if(r!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");Om(t,e);break;case"PS256":case"PS384":case"PS512":if(r==="rsa-pss"){let{hashAlgorithm:s,mgf1HashAlgorithm:a,saltLength:l}=o,c=parseInt(e.slice(-3),10);if(s!==void 0&&(s!==`sha${c}`||a!==s))throw new TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${e}`);if(l!==void 0&&l>c>>3)throw new TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${e}`)}else if(r!=="rsa")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");Om(t,e),i={padding:dT.RSA_PKCS1_PSS_PADDING,saltLength:dT.RSA_PSS_SALTLEN_DIGEST};break;case"ES256":case"ES256K":case"ES384":case"ES512":{if(r!=="ec")throw new TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let s=aT(t),a=pY.get(e);if(s!==a)throw new TypeError(`Invalid key curve for the algorithm, its curve must be ${a}, got ${s}`);i={dsaEncoding:"ieee-p1363"};break}default:throw new Yt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}return n?{format:"jwk",key:t,...i}:i?{...i,key:t}:t}import*as Fd from"node:crypto";import{promisify as hY}from"node:util";function _m(e){switch(e){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new Yt(`alg ${e} is not supported either by JOSE or your javascript runtime`)}}import{KeyObject as fT,createSecretKey as pT}from"node:crypto";function Rc(e,t,r){if(t instanceof Uint8Array){if(!e.startsWith("HS"))throw new TypeError(wc(t,...Cn));return pT(t)}if(t instanceof fT)return t;if(Da(t))return tT(t,e,r),fT.from(t);if(No(t))return e.startsWith("HS")?pT(Buffer.from(t.k,"base64url")):t;throw new TypeError(wc(t,...Cn,"Uint8Array","JSON Web Key"))}var gY=hY(Fd.sign),mY=async(e,t,r)=>{let o=Rc(e,t,"sign");if(e.startsWith("HS")){let n=Fd.createHmac(_m(e),o);return n.update(r),n.digest()}return gY(Tc(e),r,xc(e,o))},kd=mY;var EY=yY(Nd.verify),CY=async(e,t,r,o)=>{let n=Rc(e,t,"verify");if(e.startsWith("HS")){let a=await kd(e,n,o),l=r;try{return Nd.timingSafeEqual(l,a)}catch{return!1}}let i=Tc(e),s=xc(e,n);try{return await EY(i,o,s,r)}catch{return!1}},hT=CY;async function gT(e,t,r){if(!Xt(e))throw new Ve("Flattened JWS must be an object");if(e.protected===void 0&&e.header===void 0)throw new Ve('Flattened JWS must have either of the "protected" or "header" members');if(e.protected!==void 0&&typeof e.protected!="string")throw new Ve("JWS Protected Header incorrect type");if(e.payload===void 0)throw new Ve("JWS Payload missing");if(typeof e.signature!="string")throw new Ve("JWS Signature missing or incorrect type");if(e.header!==void 0&&!Xt(e.header))throw new Ve("JWS Unprotected Header incorrect type");let o={};if(e.protected)try{let h=ti(e.protected);o=JSON.parse(Br.decode(h))}catch{throw new Ve("JWS Protected Header is invalid")}if(!Rd(o,e.header))throw new Ve("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let n={...o,...e.header},i=Dd(Ve,new Map([["b64",!0]]),r?.crit,o,n),s=!0;if(i.has("b64")&&(s=o.b64,typeof s!="boolean"))throw new Ve('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:a}=n;if(typeof a!="string"||!a)throw new Ve('JWS "alg" (Algorithm) Header Parameter missing or invalid');let l=r&&uT("algorithms",r.algorithms);if(l&&!l.has(a))throw new wd('"alg" (Algorithm) Header Parameter value not allowed');if(s){if(typeof e.payload!="string")throw new Ve("JWS Payload must be a string")}else if(typeof e.payload!="string"&&!(e.payload instanceof Uint8Array))throw new Ve("JWS Payload must be a string or an Uint8Array instance");let c=!1;typeof t=="function"?(t=await t(o,e),c=!0,Sc(a,t,"verify"),No(t)&&(t=await cT(t,a))):Sc(a,t,"verify");let A=bd(Mr.encode(e.protected??""),Mr.encode("."),typeof e.payload=="string"?Mr.encode(e.payload):e.payload),d;try{d=ti(e.signature)}catch{throw new Ve("Failed to base64url decode the signature")}if(!await hT(a,t,d,A))throw new Sd;let u;if(s)try{u=ti(e.payload)}catch{throw new Ve("Failed to base64url decode the payload")}else typeof e.payload=="string"?u=Mr.encode(e.payload):u=e.payload;let p={payload:u};return e.protected!==void 0&&(p.protectedHeader=o),e.header!==void 0&&(p.unprotectedHeader=e.header),c?{...p,key:t}:p}async function mT(e,t,r){if(e instanceof Uint8Array&&(e=Br.decode(e)),typeof e!="string")throw new Ve("Compact JWS must be a string or Uint8Array");let{0:o,1:n,2:i,length:s}=e.split(".");if(s!==3)throw new Ve("Invalid Compact JWS");let a=await gT({payload:n,protected:o,signature:i},t,r),l={payload:a.payload,protectedHeader:a.protectedHeader};return typeof t=="function"?{...l,key:a.key}:l}var vo=e=>Math.floor(e.getTime()/1e3);var IY=/^(\+|\-)? ?(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)(?: (ago|from now))?$/i,is=e=>{let t=IY.exec(e);if(!t||t[4]&&t[1])throw new TypeError("Invalid time period format");let r=parseFloat(t[2]),o=t[3].toLowerCase(),n;switch(o){case"sec":case"secs":case"second":case"seconds":case"s":n=Math.round(r);break;case"minute":case"minutes":case"min":case"mins":case"m":n=Math.round(r*60);break;case"hour":case"hours":case"hr":case"hrs":case"h":n=Math.round(r*3600);break;case"day":case"days":case"d":n=Math.round(r*86400);break;case"week":case"weeks":case"w":n=Math.round(r*604800);break;default:n=Math.round(r*31557600);break}return t[1]==="-"||t[4]==="ago"?-n:n};var yT=e=>e.toLowerCase().replace(/^application\//,""),BY=(e,t)=>typeof e=="string"?t.includes(e):Array.isArray(e)?t.some(Set.prototype.has.bind(new Set(e))):!1,ET=(e,t,r={})=>{let o;try{o=JSON.parse(Br.decode(t))}catch{}if(!Xt(o))throw new Pt("JWT Claims Set must be a top-level JSON object");let{typ:n}=r;if(n&&(typeof e.typ!="string"||yT(e.typ)!==yT(n)))throw new Qr('unexpected "typ" JWT header value',o,"typ","check_failed");let{requiredClaims:i=[],issuer:s,subject:a,audience:l,maxTokenAge:c}=r,A=[...i];c!==void 0&&A.push("iat"),l!==void 0&&A.push("aud"),a!==void 0&&A.push("sub"),s!==void 0&&A.push("iss");for(let p of new Set(A.reverse()))if(!(p in o))throw new Qr(`missing required "${p}" claim`,o,p,"missing");if(s&&!(Array.isArray(s)?s:[s]).includes(o.iss))throw new Qr('unexpected "iss" claim value',o,"iss","check_failed");if(a&&o.sub!==a)throw new Qr('unexpected "sub" claim value',o,"sub","check_failed");if(l&&!BY(o.aud,typeof l=="string"?[l]:l))throw new Qr('unexpected "aud" claim value',o,"aud","check_failed");let d;switch(typeof r.clockTolerance){case"string":d=is(r.clockTolerance);break;case"number":d=r.clockTolerance;break;case"undefined":d=0;break;default:throw new TypeError("Invalid clockTolerance option type")}let{currentDate:f}=r,u=vo(f||new Date);if((o.iat!==void 0||c)&&typeof o.iat!="number")throw new Qr('"iat" claim must be a number',o,"iat","invalid");if(o.nbf!==void 0){if(typeof o.nbf!="number")throw new Qr('"nbf" claim must be a number',o,"nbf","invalid");if(o.nbf>u+d)throw new Qr('"nbf" claim timestamp check failed',o,"nbf","check_failed")}if(o.exp!==void 0){if(typeof o.exp!="number")throw new Qr('"exp" claim must be a number',o,"exp","invalid");if(o.exp<=u-d)throw new bc('"exp" claim timestamp check failed',o,"exp","check_failed")}if(c){let p=u-o.iat,h=typeof c=="number"?c:is(c);if(p-d>h)throw new bc('"iat" claim timestamp check failed (too far in the past)',o,"iat","check_failed");if(p<0-d)throw new Qr('"iat" claim timestamp check failed (it should be in the past)',o,"iat","check_failed")}return o};async function Gm(e,t,r){let o=await mT(e,t,r);if(o.protectedHeader.crit?.includes("b64")&&o.protectedHeader.b64===!1)throw new Pt("JWTs MUST NOT use unencoded payload");let i={payload:ET(o.protectedHeader,o.payload,r),protectedHeader:o.protectedHeader};return typeof t=="function"?{...i,key:o.key}:i}var vd=class{_payload;_protectedHeader;_unprotectedHeader;constructor(t){if(!(t instanceof Uint8Array))throw new TypeError("payload must be an instance of Uint8Array");this._payload=t}setProtectedHeader(t){if(this._protectedHeader)throw new TypeError("setProtectedHeader can only be called once");return this._protectedHeader=t,this}setUnprotectedHeader(t){if(this._unprotectedHeader)throw new TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=t,this}async sign(t,r){if(!this._protectedHeader&&!this._unprotectedHeader)throw new Ve("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!Rd(this._protectedHeader,this._unprotectedHeader))throw new Ve("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let o={...this._protectedHeader,...this._unprotectedHeader},n=Dd(Ve,new Map([["b64",!0]]),r?.crit,this._protectedHeader,o),i=!0;if(n.has("b64")&&(i=this._protectedHeader.b64,typeof i!="boolean"))throw new Ve('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:s}=o;if(typeof s!="string"||!s)throw new Ve('JWS "alg" (Algorithm) Header Parameter missing or invalid');Sc(s,t,"sign");let a=this._payload;i&&(a=Mr.encode(Qc(a)));let l;this._protectedHeader?l=Mr.encode(Qc(JSON.stringify(this._protectedHeader))):l=Mr.encode("");let c=bd(l,Mr.encode("."),a),A=await kd(s,t,c),d={signature:Qc(A),payload:""};return i&&(d.payload=Br.decode(a)),this._unprotectedHeader&&(d.header=this._unprotectedHeader),this._protectedHeader&&(d.protected=Br.decode(l)),d}};var Pd=class{_flattened;constructor(t){this._flattened=new vd(t)}setProtectedHeader(t){return this._flattened.setProtectedHeader(t),this}async sign(t,r){let o=await this._flattened.sign(t,r);if(o.payload===void 0)throw new TypeError("use the flattened module for creating JWS with b64: false");return`${o.protected}.${o.payload}.${o.signature}`}};function ss(e,t){if(!Number.isFinite(t))throw new TypeError(`Invalid ${e} input`);return t}var Ld=class{_payload;constructor(t={}){if(!Xt(t))throw new TypeError("JWT Claims Set MUST be an object");this._payload=t}setIssuer(t){return this._payload={...this._payload,iss:t},this}setSubject(t){return this._payload={...this._payload,sub:t},this}setAudience(t){return this._payload={...this._payload,aud:t},this}setJti(t){return this._payload={...this._payload,jti:t},this}setNotBefore(t){return typeof t=="number"?this._payload={...this._payload,nbf:ss("setNotBefore",t)}:t instanceof Date?this._payload={...this._payload,nbf:ss("setNotBefore",vo(t))}:this._payload={...this._payload,nbf:vo(new Date)+is(t)},this}setExpirationTime(t){return typeof t=="number"?this._payload={...this._payload,exp:ss("setExpirationTime",t)}:t instanceof Date?this._payload={...this._payload,exp:ss("setExpirationTime",vo(t))}:this._payload={...this._payload,exp:vo(new Date)+is(t)},this}setIssuedAt(t){return typeof t>"u"?this._payload={...this._payload,iat:vo(new Date)}:t instanceof Date?this._payload={...this._payload,iat:ss("setIssuedAt",vo(t))}:typeof t=="string"?this._payload={...this._payload,iat:ss("setIssuedAt",vo(new Date)+is(t))}:this._payload={...this._payload,iat:ss("setIssuedAt",t)},this}};var Dc=class extends Ld{_protectedHeader;setProtectedHeader(t){return this._protectedHeader=t,this}async sign(t,r){let o=new Pd(Mr.encode(JSON.stringify(this._payload)));if(o.setProtectedHeader(this._protectedHeader),Array.isArray(this._protectedHeader?.crit)&&this._protectedHeader.crit.includes("b64")&&this._protectedHeader.b64===!1)throw new Pt("JWTs MUST NOT use unencoded payload");return o.sign(t,r)}};var CT=ti;function jm(e){if(typeof e!="string")throw new Pt("JWTs must use Compact JWS serialization, JWT must be a string");let{1:t,length:r}=e.split(".");if(r===5)throw new Pt("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Pt("Invalid JWT");if(!t)throw new Pt("JWTs must contain a payload");let o;try{o=CT(t)}catch{throw new Pt("Failed to base64url decode the payload")}let n;try{n=JSON.parse(Br.decode(o))}catch{throw new Pt("Failed to parse the decoded payload as JSON")}if(!Xt(n))throw new Pt("Invalid JWT Claims Set");return n}var as=async({fieldsToSign:e,secret:t,tokenExpiration:r})=>{let o=new TextEncoder().encode(t),n=Math.floor(Date.now()/1e3),i=n+r,s=await new Dc(e).setProtectedHeader({alg:"HS256",typ:"JWT"}).setIssuedAt(n).setExpirationTime(i).sign(o);return{exp:i,token:s}};var Ud=e=>{let t=new Date;return e.filter(({expiresAt:r})=>(r instanceof Date?r:new Date(r))>t)};var ST=We(wT(),1);import wY from"crypto";var Od=async({doc:e,password:t})=>{try{let{hash:r,salt:o}=e;return typeof o=="string"&&typeof r=="string"?await new Promise((i,s)=>{wY.pbkdf2(t,o,25e3,512,"sha256",(a,l)=>{a&&s(a),(0,ST.default)(l,Buffer.from(r,"hex"))?i(e):s(new Error("Invalid password"))})}):null}catch{return null}};var Hm=async({collection:e,doc:t,payload:r,req:o})=>{let{auth:{lockTime:n,maxLoginAttempts:i}}=e;if("lockUntil"in t&&typeof t.lockUntil=="string"){new Date(t.lockUntil).getTime()<Date.now()&&await r.update({id:t.id,collection:e.slug,data:{lockUntil:null,loginAttempts:1},depth:0,req:o});return}let s={loginAttempts:Number(t.loginAttempts)+1};if(typeof t.loginAttempts=="number"&&t.loginAttempts+1>=i){let a=new Date(Date.now()+n).toISOString();s.lockUntil=a}await r.update({id:t.id,collection:e.slug,data:s,depth:0,req:o})};var Fc=async({collection:e,doc:t,payload:r,req:o})=>{!("lockUntil"in t&&typeof t.lockUntil=="string")||t.loginAttempts===0||await r.update({id:t.id,collection:e.slug,data:{lockUntil:null,loginAttempts:0},depth:0,overrideAccess:!0,req:o})};var TT=({loggingInWithUsername:e,req:t,user:r})=>{if(!r)throw new Ki(t.t,!!e);if(zS(new Date(r.lockUntil).getTime()))throw new Ia(t.t)},kc=async e=>{let t=e;if(t.collection.config.auth.disableLocalStrategy)throw new ae(t.req.t);try{if(t.collection.config.hooks?.beforeOperation?.length)for(let P of t.collection.config.hooks.beforeOperation)t=await P({args:t,collection:t.collection?.config,context:t.req.context,operation:"login",req:t.req})||t;let{collection:{config:r},data:o,depth:n,overrideAccess:i,req:s,req:{fallbackLocale:a,locale:l,payload:c,payload:{secret:A}},showHiddenFields:d}=t,{email:f,password:u}=o,p=r.auth.loginWithUsername,h=typeof f=="string"?f.toLowerCase().trim():null,g="username"in o&&typeof o?.username=="string"?o.username.toLowerCase().trim():null,{canLoginWithEmail:m,canLoginWithUsername:y}=mn(p);if(!m&&!g)throw new xt({collection:r.slug,errors:[{message:s.i18n.t("validation:required"),path:"username"}]});if(!y&&!h)throw new xt({collection:r.slug,errors:[{message:s.i18n.t("validation:required"),path:"email"}]});if(!g&&!h)throw new xt({collection:r.slug,errors:[{message:s.i18n.t("validation:required"),path:"email"},{message:s.i18n.t("validation:required"),path:"username"}]});if(typeof u!="string"||u.trim()==="")throw new xt({collection:r.slug,errors:[{message:s.i18n.t("validation:required"),path:"password"}]});let E={},I={email:{equals:h}},C={username:{equals:g}};m&&y&&(g||h)?g?E={or:[C,{email:{equals:g}}]}:E={or:[I,{username:{equals:h}}]}:m&&h?E=I:y&&g&&(E=C);let B=await c.db.findOne({collection:r.slug,req:s,where:E});TT({loggingInWithUsername:!!(y&&g),req:s,user:B}),B.collection=r.slug,B._strategy="local-jwt";let R=await Od({doc:B,password:u});B=Or(B);let x=t.collection.config.auth.maxLoginAttempts>0;if(!R)throw x&&await Hm({collection:r,doc:B,payload:s.payload,req:s}),new Ki(s.t);if(r.auth.verify&&B._verified===!1)throw new ba({t:s.t});let S={collectionConfig:r,email:h,user:B};if(r.auth.useSessions){let P=ei(),U=new Date,_=r.auth.tokenExpiration*1e3,Y=new Date(U.getTime()+_),ce={id:P,createdAt:U,expiresAt:Y};B.sessions?.length?(B.sessions=Ud(B.sessions),B.sessions.push(ce)):B.sessions=[ce],await c.db.updateOne({id:B.id,collection:r.slug,data:B,req:s,returning:!1}),S.sid=P}let Q=ns(S);if(x&&await Fc({collection:r,doc:B,payload:s.payload,req:s}),r.hooks?.beforeLogin?.length)for(let P of r.hooks.beforeLogin)B=await P({collection:t.collection?.config,context:t.req.context,req:t.req,user:B})||B;let{exp:T,token:D}=await as({fieldsToSign:Q,secret:A,tokenExpiration:r.auth.tokenExpiration});if(s.user=B,r.hooks?.afterLogin?.length)for(let P of r.hooks.afterLogin)B=await P({collection:t.collection?.config,context:t.req.context,req:t.req,token:D,user:B})||B;if(B=await be({collection:r,context:s.context,depth:n,doc:B,draft:void 0,fallbackLocale:a,global:null,locale:l,overrideAccess:i,req:s,showHiddenFields:d}),r.hooks?.afterRead?.length)for(let P of r.hooks.afterRead)B=await P({collection:t.collection?.config,context:s.context,doc:B,req:s})||B;let k={exp:T,token:D,user:B};return k=await Je({args:t,collection:t.collection?.config,operation:"login",result:k}),k}catch(r){throw await H(t.req),r}};async function xT(e,t){let{collection:r,data:o,depth:n,overrideAccess:i=!0,showHiddenFields:s}=t,a=e.collections[r];if(!a)throw new F(`The collection with slug ${String(r)} can't be found. Login Operation.`);let l={collection:a,data:o,depth:n,overrideAccess:i,req:await W(t,e),showHiddenFields:s},c=await kc(l);return a.config.auth.removeTokenFromResponses&&delete c.token,c}import uD from"crypto";var lD=We(aD(),1),TE=We(Sa(),1);function Z(e){return e==null||typeof e=="string"&&e.trim()===""?!1:!Number.isNaN(Number(e))}var Cf=TE.default.default||TE.default,z4=(e,{hasMany:t,maxLength:r,maxRows:o,minLength:n,minRows:i,req:{payload:{config:s},t:a},required:l})=>{let c;if(!l&&!e)return!0;if(t===!0){let d=If(e,{maxRows:o,minRows:i,required:l,t:a});if(typeof d=="string")return d}typeof s?.defaultMaxTextLength=="number"&&(c=s.defaultMaxTextLength),typeof r=="number"&&(c=r);let A=Array.isArray(e)?e:[e];for(let d of A){let f=d?.length||0;if(typeof c=="number"&&f>c)return a("validation:shorterThanMax",{label:a("general:value"),maxLength:c,stringValue:d});if(typeof n=="number"&&f<n)return a("validation:longerThanMin",{label:a("general:value"),minLength:n,stringValue:d})}return l&&(!(typeof e=="string"||Array.isArray(e))||e?.length===0)?a("validation:required"):!0},xE=(e,{maxLength:t,minLength:r=3,req:{payload:{config:o},t:n},required:i})=>{let s;return typeof o?.defaultMaxTextLength=="number"&&(s=o.defaultMaxTextLength),typeof t=="number"&&(s=t),e&&s&&e.length>s?n("validation:shorterThanMax",{maxLength:s}):e&&r&&e.length<r?n("validation:longerThanMin",{minLength:r}):i&&!e?n("validation:required"):!0},$4=(e,{req:{t},required:r,siblingData:o})=>r&&!e?t("validation:required"):e&&e!==o.password?t("fields:passwordsDoNotMatch"):!0,RE=(e,{collectionSlug:t,req:{payload:{collections:r,config:o},t:n},required:i,siblingData:s})=>{if(t){let l=r?.[t]?.config??o.collections.find(({slug:c})=>c===t);if(l.auth.loginWithUsername&&!l.auth.loginWithUsername?.requireUsername&&!l.auth.loginWithUsername?.requireEmail&&!e&&!s?.username)return n("validation:required")}return e&&!/^(?!.*\.\.)[\w!#$%&'*+/=?^`{|}~-](?:[\w!#$%&'*+/=?^`{|}~.-]*[\w!#$%&'*+/=?^`{|}~-])?@[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)*\.[a-z]{2,}$/i.test(e)||!e&&i?n("validation:emailAddress"):!0},cD=(e,{collectionSlug:t,req:{payload:{collections:r,config:o},t:n},required:i,siblingData:s})=>{let a;if(t){let l=r?.[t]?.config??o.collections.find(({slug:c})=>c===t);if(l.auth.loginWithUsername&&!l.auth.loginWithUsername?.requireUsername&&!l.auth.loginWithUsername?.requireEmail&&!e&&!s?.email)return n("validation:required")}return typeof o?.defaultMaxTextLength=="number"&&(a=o.defaultMaxTextLength),e&&a&&e.length>a?n("validation:shorterThanMax",{maxLength:a}):!e&&i?n("validation:required"):!0},K4=(e,{maxLength:t,minLength:r,req:{payload:{config:o},t:n},required:i})=>{let s;return typeof o?.defaultMaxTextLength=="number"&&(s=o.defaultMaxTextLength),typeof t=="number"&&(s=t),e&&s&&e.length>s?n("validation:shorterThanMax",{maxLength:s}):e&&r&&e.length<r?n("validation:longerThanMin",{minLength:r}):i&&!e?n("validation:required"):!0},Z4=(e,{req:{t},required:r})=>r&&e===void 0?t("validation:required"):!0,X4=(e,{jsonError:t,jsonSchema:r,req:{t:o},required:n})=>{let i=a=>!(a==null||Array.isArray(a)&&a.length===0||typeof a=="object"&&Object.keys(a).length===0),s=({schema:a,uri:l})=>l&&a?a:fetch(l).then(c=>{if(!c.ok)throw new Error("Network response was not ok");return c.json()}).then(c=>{let A=c,d={id:void 0,$id:A.id,$schema:"http://json-schema.org/draft-07/schema#"};return Object.assign(A,d)});if(n&&!e)return o("validation:required");if(t!==void 0)return o("validation:invalidInput");if(r&&i(e))try{r.schema=s(r);let{schema:a}=r,l=new lD.default;if(!l.validate(a,e))return l.errorsText()}catch(a){return a instanceof Error?a.message:"Unknown error"}return!0},e8=(e,{req:{t},required:r})=>e&&typeof e!="boolean"||r&&typeof e!="boolean"?t("validation:trueOrFalse"):!0,t8=(e,{name:t,req:{t:r},required:o,siblingData:n,timezone:i})=>{let s=e&&!isNaN(Date.parse(e.toString())),a=i&&o,l=n?.[`${t}_tz`],c=a?!!l:!0;return s&&c?!0:s&&!c?r("validation:timezoneRequired"):e?r("validation:notValidDate",{value:e}):o?r("validation:required"):!0},r8=async(e,t)=>{if(!t?.editor)throw new Error("richText field has no editor property.");if(typeof t?.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");return(t?.editor).validate(e,t)},If=(e,t)=>{let{maxRows:r,minRows:o,required:n,t:i}=t,s=Array.isArray(e)?e.length:e||0;return!n&&s===0?!0:o&&s<o?i("validation:requiresAtLeast",{count:o,label:i("general:rows")}):r&&s>r?i("validation:requiresNoMoreThan",{count:r,label:i("general:rows")}):n&&!s?i("validation:requiresAtLeast",{count:1,label:i("general:row")}):!0},o8=(e,{hasMany:t,max:r,maxRows:o,min:n,minRows:i,req:{t:s},required:a})=>{if(t===!0){let c=If(e,{maxRows:o,minRows:i,required:a,t:s});if(typeof c=="string")return c}if(!e&&!Z(e)){if(a)return s("validation:required");if(!a)return!0}let l=Array.isArray(e)?e:[e];for(let c of l){if(!Z(c))return s("validation:enterNumber");let A=parseFloat(c);if(typeof r=="number"&&A>r)return s("validation:greaterThanMax",{label:s("general:value"),max:r,value:e});if(typeof n=="number"&&A<n)return s("validation:lessThanMin",{label:s("general:value"),min:n,value:e})}return!0},n8=(e,{maxRows:t,minRows:r,req:{t:o},required:n})=>If(e,{maxRows:t,minRows:r,required:n,t:o}),i8=(e,{maxRows:t,minRows:r,req:{t:o},required:n})=>If(e,{maxRows:t,minRows:r,required:n,t:o}),AD=async(e,{id:t,blockData:r,data:o,filterOptions:n,relationTo:i,req:s,req:{t:a,user:l},siblingData:c})=>{if(typeof n<"u"&&e){let A={},d=[],f=Array.isArray(i)?i:[i],u=Array.isArray(e)?e:[e];for(let h of f)try{let g=typeof n=="function"?await n({id:t,blockData:r,data:o,relationTo:h,req:s,siblingData:c,user:l}):n;g===!0&&(g=null);let m=[];if(u.forEach(y=>{typeof y=="object"&&(y?.value?m.push(y.value):Cf.isValid(y)&&m.push(new Cf(y).toHexString())),(typeof y=="string"||typeof y=="number")&&m.push(y)}),m.length>0){let y={and:[{id:{in:m}}]};g&&g!==!0&&y.and?.push(g),g===!1&&d.push(h);let E=await s.payloadDataLoader.find({collection:h,depth:0,limit:0,pagination:!1,req:s,where:y});A[h]=E.docs.map(I=>I.id)}else A[h]=[]}catch(g){s.payload.logger.error({err:g,msg:`Error validating filter options for collection ${h}`}),A[h]=[]}let p=u.filter(h=>{let g,m;return typeof i=="string"&&(g=i,(typeof h=="string"||typeof h=="number")&&(m=h),typeof h=="object"&&Cf.isValid(h)&&(m=new Cf(h).toHexString())),Array.isArray(i)&&typeof h=="object"&&h?.relationTo&&(g=h.relationTo,m=h.value),d.find(y=>i===y)||!A[g]?!0:A[g].indexOf(m)===-1});return p.length>0?p.reduce((h,g,m)=>`${h} ${JSON.stringify(g)}${p.length===m+1?",":""} `,a("validation:invalidSelections")):!0}return!0},s8=async(e,t)=>{let{event:r,maxRows:o,minRows:n,relationTo:i,req:{payload:s,t:a},required:l}=t;if((!e&&typeof e!="number"||Array.isArray(e)&&e.length===0)&&l)return a("validation:required");if(Array.isArray(e)&&e.length>0){if(n&&e.length<n)return a("validation:lessThanMin",{label:a("general:rows"),min:n,value:e.length});if(o&&e.length>o)return a("validation:greaterThanMax",{label:a("general:rows"),max:o,value:e.length})}if(typeof e<"u"&&e!==null){let A=(Array.isArray(e)?e:[e]).filter(d=>{let f,u;if(typeof i=="string"&&(f=i,(d||typeof d=="number")&&(u=d)),Array.isArray(i)&&typeof d=="object"&&d?.relationTo&&(f=d.relationTo,u=d.value),u===null)return!1;let p=s.collections[f]?.customIDType||s?.db?.defaultIDType||"text";return!Ta(u,p)});if(A.length>0)return`This relationship field has the following invalid relationships: ${A.map((d,f)=>`${d} ${JSON.stringify(f)}`).join(", ")}`}return r==="onChange"?!0:AD(e,t)},a8=async(e,t)=>{let{event:r,maxRows:o,minRows:n,relationTo:i,req:{payload:s,t:a},required:l}=t;if((!e&&typeof e!="number"||Array.isArray(e)&&e.length===0)&&l)return a("validation:required");if(Array.isArray(e)&&e.length>0){if(n&&e.length<n)return a("validation:lessThanMin",{label:a("general:rows"),min:n,value:e.length});if(o&&e.length>o)return a("validation:greaterThanMax",{label:a("general:rows"),max:o,value:e.length})}if(typeof e<"u"&&e!==null){let A=(Array.isArray(e)?e:[e]).filter(d=>{let f,u;if(typeof i=="string"&&(f=i,(d||typeof d=="number")&&(u=d)),Array.isArray(i)&&typeof d=="object"&&d?.relationTo&&(f=d.relationTo,u=d.value),u===null)return!1;let p=s.collections[f]?.customIDType||s?.db?.defaultIDType||"text";return!Ta(u,p)});if(A.length>0)return`This relationship field has the following invalid relationships: ${A.map((d,f)=>`${d} ${JSON.stringify(f)}`).join(", ")}`}return r==="onChange"?!0:AD(e,t)},l8=(e,{data:t,filterOptions:r,hasMany:o,options:n,req:i,req:{t:s},required:a,siblingData:l})=>{let c=typeof r=="function"?r({data:t,options:n,req:i,siblingData:l}):n;return Array.isArray(e)&&e.some(A=>!c.some(d=>d===A||typeof d!="string"&&d?.value===A))||typeof e=="string"&&!c.some(A=>A===e||typeof A!="string"&&A.value===e)?s("validation:invalidSelection"):a&&(typeof e>"u"||e===null||o&&Array.isArray(e)&&e?.length===0)?s("validation:required"):!0},c8=(e,{options:t,req:{t:r},required:o})=>e?t.some(i=>i===e||typeof i!="string"&&i.value===e)||r("validation:invalidSelection"):o?r("validation:required"):!0,A8=(e=["",""],{req:{t},required:r})=>{if(e===null)return r?t("validation:required"):!0;let o=parseFloat(String(e[0])),n=parseFloat(String(e[1]));return r&&(e[0]&&e[1]&&typeof o!="number"&&typeof n!="number"||Number.isNaN(o)||Number.isNaN(n)||Array.isArray(e)&&e.length!==2)?t("validation:requiresTwoNumbers"):e[1]&&Number.isNaN(o)||e[0]&&Number.isNaN(n)?t("validation:invalidInput"):!0},DE={array:n8,blocks:i8,checkbox:e8,code:Z4,confirmPassword:$4,date:t8,email:RE,json:X4,number:o8,password:xE,point:A8,radio:c8,relationship:a8,richText:r8,select:l8,text:z4,textarea:K4,upload:s8};function u8(){return new Promise((e,t)=>uD.randomBytes(32,(r,o)=>r?t(r):e(o)))}function d8(e,t){return new Promise((r,o)=>uD.pbkdf2(e,t,25e3,512,"sha256",(n,i)=>n?o(n):r(i)))}var Ya=async({collection:e,password:t,req:r})=>{let o=xE(t,{name:"password",type:"text",blockData:{},data:{},event:"submit",path:["password"],preferences:{fields:{}},req:r,required:!0,siblingData:{}});if(typeof o=="string")throw new xt({collection:e?.slug,errors:[{message:o,path:"password"}]});let i=(await u8()).toString("hex");return{hash:(await d8(t,i)).toString("hex"),salt:i}};var aA=async e=>{let{collection:{config:t},data:r,depth:o,overrideAccess:n,req:{payload:{secret:i},payload:s},req:a}=e;if(!Object.prototype.hasOwnProperty.call(r,"token")||!Object.prototype.hasOwnProperty.call(r,"password"))throw new F("Missing required data.",N.BAD_REQUEST);if(t.auth.disableLocalStrategy)throw new ae(a.t);try{let l=await de(a);if(e.collection.config.hooks?.beforeOperation?.length)for(let m of e.collection.config.hooks.beforeOperation)e=await m({args:e,collection:e.collection?.config,context:e.req.context,operation:"resetPassword",req:e.req})||e;let c=await s.db.findOne({collection:t.slug,req:a,where:{resetPasswordExpiration:{greater_than:new Date().toISOString()},resetPasswordToken:{equals:r.token}}});if(!c)throw new F("Token is either invalid or has expired.",N.FORBIDDEN);let{hash:A,salt:d}=await Ya({collection:t,password:r.password,req:a});if(c.salt=d,c.hash=A,c.resetPasswordExpiration=new Date().toISOString(),t.auth.verify&&(c._verified=!!c._verified),t.hooks?.beforeValidate?.length)for(let m of t.hooks.beforeValidate)await m({collection:e.collection?.config,context:a.context,data:c,operation:"update",req:a});let f=await s.db.updateOne({id:c.id,collection:t.slug,data:c,req:a});await Od({doc:f,password:r.password});let u=ns({collectionConfig:t,email:c.email,user:c}),{token:p}=await as({fieldsToSign:u,secret:i,tokenExpiration:t.auth.tokenExpiration}),h=await s.findByID({id:c.id,collection:t.slug,depth:o,overrideAccess:n,req:a});l&&await pe(a),h&&(h.collection=t.slug,h._strategy="local-jwt");let g={token:p,user:h};return g=await Je({args:e,collection:e.collection?.config,operation:"resetPassword",result:g}),g}catch(l){throw await H(a),l}};async function dD(e,t){let{collection:r,data:o,overrideAccess:n}=t,i=e.collections[r];if(!i)throw new F(`The collection with slug ${String(r)} can't be found. Reset Password Operation.`);let s=await aA({collection:i,data:o,overrideAccess:n,req:await W(t,e)});return i.config.auth.removeTokenFromResponses&&delete s.token,s}var oe=async({id:e,data:t,disableErrors:r,isReadingStaticFile:o=!1,req:n},i)=>{if(i){let s=await i({id:e,data:t,isReadingStaticFile:o,req:n});if(!s&&!r)throw new ae(n.t);return s}if(n.user)return!0;if(!r)throw new ae(n.t);return!1};var lA=async e=>{let{collection:{config:t},overrideAccess:r,req:{locale:o},req:n}=e,i=t.auth.loginWithUsername,{canLoginWithEmail:s,canLoginWithUsername:a}=mn(i),l=s&&(e.data?.email||"").toLowerCase().trim(),c=a&&"username"in e.data&&typeof e.data.username=="string"&&e.data.username.toLowerCase().trim()||null;if(t.auth.disableLocalStrategy)throw new ae(n.t);if(!l&&!c)throw new F(`Missing ${t.auth.loginWithUsername?"username":"email"}.`,N.BAD_REQUEST);try{let A=await de(n);r||await oe({req:n},t.access.unlock);let d={};s&&l?d={email:{equals:l}}:a&&c&&(d={username:{equals:c}});let f=await n.payload.db.findOne({collection:t.slug,locale:o,req:n,where:d}),u=null;return f?(await Fc({collection:t,doc:f,payload:n.payload,req:n}),u=!0):u=null,A&&await pe(n),u}catch(A){throw await H(n),A}};async function fD(e,t){let{collection:r,data:o,overrideAccess:n=!0}=t,i=e.collections[r];if(!i)throw new F(`The collection with slug ${String(r)} can't be found. Unlock Operation.`);return lA({collection:i,data:o,overrideAccess:n,req:await W(t,e)})}var cA=async e=>{let{collection:t,req:r,token:o}=e;if(t.config.auth.disableLocalStrategy)throw new ae(r.t);if(!Object.prototype.hasOwnProperty.call(e,"token"))throw new F("Missing required data.",N.BAD_REQUEST);try{let n=await de(r),i=await r.payload.db.findOne({collection:t.config.slug,req:r,where:{_verificationToken:{equals:o}}});if(!i)throw new F("Verification token is invalid.",N.FORBIDDEN);return await r.payload.db.updateOne({id:i.id,collection:t.config.slug,data:{...i,_verificationToken:null,_verified:!0},req:r,returning:!1}),n&&await pe(r),!0}catch(n){throw await H(r),n}};async function pD(e,t){let{collection:r,token:o}=t,n=e.collections[r];if(!n)throw new F(`The collection with slug ${String(r)} can't be found. Verify Email Operation.`);return cA({collection:n,req:await W(t,e),token:o})}var hD=e=>{let{name:t,domain:r,expires:o,httpOnly:n,maxAge:i,path:s,returnCookieAsObject:a,sameSite:l,secure:c,value:A}=e,d=`${t}=${A||""}`,f={name:t,value:A},u=c||l==="None";return o&&(a?f.expires=o.toUTCString():d+=`; Expires=${o.toUTCString()}`),i&&(a?f.maxAge=i:d+=`; Max-Age=${i.toString()}`),r&&(a?f.domain=r:d+=`; Domain=${r}`),s&&(a?f.path=s:d+=`; Path=${s}`),u&&(a?f.secure=u:d+=`; Secure=${u}`),n&&(a?f.httpOnly=n:d+=`; HttpOnly=${n}`),l&&(a?f.sameSite=l:d+=`; SameSite=${l}`),a?f:d},f8=({seconds:e=7200})=>{let t=new Date;return t.setSeconds(t.getSeconds()+e),t},ci=({collectionAuthConfig:e,cookiePrefix:t,returnCookieAsObject:r=!1,token:o})=>{let n=typeof e.cookies.sameSite=="string"?e.cookies.sameSite:e.cookies.sameSite?"Strict":void 0;return hD({name:`${t}-token`,domain:e.cookies.domain??void 0,expires:f8({seconds:e.tokenExpiration}),httpOnly:!0,path:"/",returnCookieAsObject:r,sameSite:n,secure:e.cookies.secure,value:o})},gD=({collectionAuthConfig:e,cookiePrefix:t,returnCookieAsObject:r=!1})=>{let o=typeof e.cookies.sameSite=="string"?e.cookies.sameSite:e.cookies.sameSite?"Strict":void 0,n=new Date(Date.now()-1e3);return hD({name:`${t}-token`,domain:e.cookies.domain??void 0,expires:n,httpOnly:!0,path:"/",returnCookieAsObject:r,sameSite:o,secure:e.cookies.secure})};function E0e(e){let t=new Map,r=e.get("Cookie");if(!r)return t;for(let o of r.split(/; */)){if(!o)continue;let n=o.indexOf("=");if(n===-1){t.set(o,"true");continue}let[i,s]=[o.slice(0,n),o.slice(n+1)];try{t.set(i,decodeURIComponent(s??"true"))}catch{}}return t}var Bf=e=>{let t=new Map,r=e.get("Cookie");return r&&r.split(";").forEach(o=>{let n=o.split("="),i=n.shift()?.trim(),s=n.join("=");try{let a=decodeURI(s);t.set(i,a)}catch{}}),t};var p8={Bearer:({headers:e})=>{let t=e.get("Authorization");return t?.startsWith("Bearer ")?t.replace("Bearer ",""):null},cookie:({headers:e,payload:t})=>{let r=e.get("Origin"),o=Bf(e),n=`${t.config.cookiePrefix}-token`,i=o.get(n);return i&&(!r||t.config.csrf.length===0||t.config.csrf.indexOf(r)>-1)?i:null},JWT:({headers:e})=>{let t=e.get("Authorization");return t?.startsWith("JWT ")?t.replace("JWT ",""):null}},Sn=e=>{let{headers:t,payload:r}=e,o=r.config.auth.jwtOrder;for(let n of o){let i=p8[n]({headers:t,payload:r});if(i)return i}return null};function Vr(e){return e&&typeof e=="object"}var Ae=(e,t)=>{if(!e&&!t)return{};let r=e?[e]:[];return Vr(t)&&r.push(t),{and:r}};var h8=["equals","contains","not_equals","in","all","not_in","exists","greater_than","greater_than_equal","less_than","less_than_equal","like","not_like","within","intersects","near"],Qf=new Set(h8);async function Mo(e){let{id:t,type:r,blockPolicies:o,entity:n,operations:i,req:s}=e,{data:a,locale:l,payload:c,user:A}=s,d=!!A,f={fields:{}},u;async function p({operation:g,where:m}={}){if(n.slug){if(r==="global")return c.findGlobal({slug:n.slug,depth:0,fallbackLocale:null,locale:l,overrideAccess:!0,req:s});if(r==="collection"&&t){if(typeof m=="object"){let y={collection:n.slug,depth:0,fallbackLocale:null,limit:1,locale:l,overrideAccess:!0,req:s};return g==="readVersions"?(await c.findVersions({...y,where:Ae(m,{parent:{equals:t}})}))?.docs?.[0]||void 0:(await c.find({...y,pagination:!1,where:Ae(m,{id:{equals:t}})}))?.docs?.[0]||void 0}return c.findByID({id:t,collection:n.slug,depth:0,fallbackLocale:null,locale:l,overrideAccess:!0,req:s})}}}let h=async({access:g,accessLevel:m,disableWhere:y=!1,operation:E,policiesObj:I})=>{let C=I;m==="field"&&u===void 0&&(u=p().then(R=>{u=R})),await u;let B=await g({id:t,data:a,doc:u,req:s});typeof B=="object"&&!y?C[E]={permission:t||r==="global"?!!await p({operation:E,where:B}):!0,where:B}:C[E]?.permission!==!1&&(C[E]={permission:!!B})};for(let g of i)typeof n.access[g]=="function"?await h({access:n.access[g],accessLevel:"entity",operation:g,policiesObj:f}):f[g]={permission:d},await ys({blockPolicies:o,createAccessPromise:h,entityPermission:f[g].permission,fields:n.fields,operation:g,payload:c,policiesObj:f});return f}var ys=async({blockPolicies:e,createAccessPromise:t,entityPermission:r,fields:o,operation:n,payload:i,policiesObj:s})=>{let a=s.fields;n==="delete"||n==="readVersions"||n==="unlock"||await Promise.all(o.map(async l=>{"name"in l&&l.name?(a[l.name]||(a[l.name]={}),"access"in l&&l.access&&typeof l.access[n]=="function"?await t({access:l.access[n],accessLevel:"field",disableWhere:!0,operation:n,policiesObj:a[l.name]}):a[l.name][n]={permission:s[n]?.permission},"fields"in l&&l.fields&&(a[l.name].fields||(a[l.name].fields={}),await ys({blockPolicies:e,createAccessPromise:t,entityPermission:r,fields:l.fields,operation:n,payload:i,policiesObj:a[l.name]})),("blocks"in l&&l.blocks?.length||"blockReferences"in l&&l.blockReferences?.length)&&(a[l.name]?.blocks||(a[l.name].blocks={}),await Promise.all((l.blockReferences??l.blocks).map(async c=>{let A=typeof c=="string"?i.blocks[c]:c;if(typeof c=="string")if(e[c]){typeof e[c].then=="function"?a[l.name].blocks[A.slug]=await e[c]:a[l.name].blocks[A.slug]=e[c];return}else{e[c]=(async()=>(a[l.name].blocks?.[A.slug]?a[l.name].blocks[A.slug][n]||(a[l.name].blocks[A.slug][n]={permission:r}):a[l.name].blocks[A.slug]={fields:{},[n]:{permission:r}},await ys({blockPolicies:e,createAccessPromise:t,entityPermission:r,fields:A.fields,operation:n,payload:i,policiesObj:a[l.name].blocks[A.slug]}),a[l.name].blocks[A.slug]))(),a[l.name].blocks[A.slug]=await e[c],e[c]=a[l.name].blocks[A.slug];return}a[l.name].blocks?.[A.slug]?a[l.name].blocks[A.slug][n]||(a[l.name].blocks[A.slug][n]={permission:r}):a[l.name].blocks[A.slug]={fields:{},[n]:{permission:r}},await ys({blockPolicies:e,createAccessPromise:t,entityPermission:r,fields:A.fields,operation:n,payload:i,policiesObj:a[l.name].blocks[A.slug]})})))):"fields"in l&&l.fields?await ys({blockPolicies:e,createAccessPromise:t,entityPermission:r,fields:l.fields,operation:n,payload:i,policiesObj:s}):l.type==="tabs"&&await Promise.all(l.tabs.map(async c=>{yt(c)?(a[c.name]?a[c.name][n]||(a[c.name][n]={permission:r}):a[c.name]={fields:{},[n]:{permission:r}},await ys({blockPolicies:e,createAccessPromise:t,entityPermission:r,fields:c.fields,operation:n,payload:i,policiesObj:a[c.name]})):await ys({blockPolicies:e,createAccessPromise:t,entityPermission:r,fields:c.fields,operation:n,payload:i,policiesObj:s})}))}))};function AA(e,t){let r=Array.isArray(t)?t:[t],o={};for(let i of r)i in e&&(o[i]=e[i]);let n={deleteProperty(i,s){return Reflect.deleteProperty(r.includes(s)?o:i,s)},get(i,s,a){return Reflect.get(r.includes(s)?o:i,s,a)},has(i,s){return Reflect.has(r.includes(s)?o:i,s)},set(i,s,a,l){return r.includes(s)?Reflect.set(o,s,a):Reflect.set(i,s,a,l)}};return new Proxy(e,n)}function bf({collectionSlug:e,fields:t,globalSlug:r,incomingPath:o,locale:n,overrideAccess:i=!1,parentIsLocalized:s,payload:a}){let l=o.split("."),c=a.config.localization,A=[{collectionSlug:e,complete:!1,field:void 0,fields:t,globalSlug:r,invalid:!1,parentIsLocalized:s,path:""}];for(let d=0;d<l.length;d+=1){let f=l[d],u=A.find(({complete:p})=>!p);if(u){let{path:p}=u,h=p?`${p}.${f}`:f,g,m=s,y;if(u?.field?.type==="blocks")if(f==="blockType")y={name:"blockType",type:"text"};else for(let E of u.field.blockReferences??u.field.blocks){let I;if(typeof E=="string"?I=a.blocks[E]:I=E,y=I.flattenedFields.find(C=>C.name===f),y)break}else u?.field&&"flattenedFields"in u.field?g=u.field.flattenedFields:g=u.fields,m=s||u.field?.localized,y=g.find(E=>E.name===f);if(u.field=y,h==="globalType"&&r)return u.path=h,u.complete=!0,u.field={name:"globalType",type:"text"},A;if(h==="relationTo")return u.path=h,u.complete=!0,u.field={name:"relationTo",type:"select",options:Object.keys(a.collections)},A;if(!y&&h==="id"&&d===l.length-1){u.path=h;let E={name:"id",type:a.db.defaultIDType};return u.field=E,u.complete=!0,A}if(y){"hidden"in y&&y.hidden&&!i&&(u.invalid=!0);let E=l[d+1],I=c&&c.localeCodes.includes(E);switch(I?(d+=1,h=`${h}.${E}`):c&&ft({field:y,parentIsLocalized:m})&&(h=`${h}.${n}`),y.type){case"join":case"relationship":case"upload":{if(y.type!=="join"&&typeof y.relationTo!="string"){let C=["relationTo","value"].includes(l[l.length-1])||l.length===1||l.length===2&&l[0]==="version";if(u.path=l.join("."),C)u.complete=!0;else return u.invalid=!0,A}else{u.complete=!0,u.path=h;let C=l.slice(I?d+2:d+1).join(".");if(C){let B;if(y.type==="join"){if(Array.isArray(y.collection))throw new F("Not supported");B=a.collections[y.collection].config}else B=a.collections[y.relationTo].config;let R=bf({collectionSlug:B.slug,fields:B.flattenedFields,globalSlug:r,incomingPath:C,locale:n,parentIsLocalized:!1,payload:a});A=[...A,...R]}return A}break}case"json":case"richText":{let C=l.slice(d+1).join(".");return u.complete=!0,u.path=C?`${h}.${C}`:h,A}default:d+1===l.length&&(u.complete=!0),u.path=h}}else return u.invalid=!0,u.path=h,A}}return A}async function FE({collectionConfig:e,constraint:t,errors:r,fields:o,globalConfig:n,operator:i,overrideAccess:s,parentIsLocalized:a,path:l,policies:c,polymorphicJoin:A,req:d,val:f,versionFields:u}){let p;l==="_id"?p="id":p=l.replace(/__/g,".");let h=[],{slug:g}=e||n,m={};n&&!c.globals[g]&&(c.globals[g]=await Mo({type:"global",blockPolicies:m,entity:n,operations:["read"],req:d})),p!=="id"&&(h=bf({collectionSlug:e?.slug,fields:o,globalSlug:n?.slug,incomingPath:p,locale:d.locale,overrideAccess:s,parentIsLocalized:a,payload:d.payload}));let y=[];if(h.at(-1)?.path==="id"){let E=h.at(-2)?.field;E&&(E.type==="relationship"||E.type==="upload")&&typeof E.relationTo=="string"&&h.pop()}y.push(...h.map(async({collectionSlug:E,field:I,invalid:C,path:B},R)=>{if(C){A||r.push({path:B});return}if(I.type==="join"&&B===l&&(t[`${B}.id`]=t[B],delete t[B]),"virtual"in I&&I.virtual&&I.virtual===!0&&r.push({path:B}),!(A&&B==="relationTo")){if(!s&&J(I)){E&&(c.collections[E]||(c.collections[E]=await Mo({type:"collection",blockPolicies:m,entity:d.payload.collections[E].config,operations:["read"],req:AA(d,"transactionID")})),["hash","salt"].includes(l)&&e.auth&&!e.auth?.disableLocalStrategy&&r.push({path:l}));let x=B;B.endsWith(`.${d.locale}`)&&(x=B.slice(0,-(d.locale.length+1))),(I.type==="relationship"||I.type==="upload")&&Array.isArray(I.relationTo)&&(x=x.replace(".value",""));let S=n?"globals":"collections",Q=E||n.slug,T=x.split("."),D;u?(D=c[S][Q],(T[0]==="parent"||T[0]==="version")&&T.shift()):D=c[S][Q].fields,T.forEach(k=>{D[k]&&("fields"in D[k]?D=D[k].fields:("blocks"in D[k]||"blockReferences"in D[k],D=D[k]))}),D?.read?.permission||r.push({path:x})}R>1&&h.slice(1).reverse().forEach(({collectionSlug:S,path:Q},T)=>{T===0&&y.push(Ye({collectionConfig:d.payload.collections[S].config,errors:r,globalConfig:void 0,overrideAccess:s,policies:c,req:d,where:{[Q]:{[i]:f}}}))})}})),await Promise.all(y)}async function Ye({collectionConfig:e,errors:t=[],globalConfig:r,overrideAccess:o,policies:n={collections:{},globals:{}},polymorphicJoin:i,req:s,versionFields:a,where:l}){let c=a||(r||e).flattenedFields;if(typeof l=="object"){let A=[];for(let d in l){let f=l[d];if((d==="and"||d==="or")&&Array.isArray(f))for(let u of f)e?A.push(Ye({collectionConfig:e,errors:t,overrideAccess:o,policies:n,polymorphicJoin:i,req:s,versionFields:a,where:u})):A.push(Ye({errors:t,globalConfig:r,overrideAccess:o,policies:n,polymorphicJoin:i,req:s,versionFields:a,where:u}));else if(!Array.isArray(f))for(let u in f){let p=f[u];Qf.has(u)&&A.push(FE({collectionConfig:e,constraint:l,errors:t,fields:c,globalConfig:r,operator:u,overrideAccess:o,path:d,policies:n,polymorphicJoin:i,req:s,val:p,versionFields:a}))}}if(await Promise.all(A),t.length>0)throw new Xn(t)}}var zt=({fields:e,payload:t,where:r})=>{for(let o in r){let n=r[o];if(["and","or"].includes(o.toLowerCase())&&Array.isArray(n)){for(let l of n)zt({fields:e,payload:t,where:l});continue}let i=o.split("."),s=!1,a=e;for(let l=0;l<i.length;l++){let c=i[l],A=a.find(d=>d.name===c);if(!A)break;if("virtual"in A&&A.virtual&&typeof A.virtual=="string"&&(i[l]=A.virtual,s=!0),"flattenedFields"in A&&(a=A.flattenedFields),(A.type==="relationship"||A.type==="upload")&&typeof A.relationTo=="string"){let d=t.collections[A.relationTo];d&&(a=d.config.flattenedFields)}}s&&(r[i.join(".")]=r[o],delete r[o])}};var uA=async e=>{let t=e;try{if(t.collection.config.hooks?.beforeOperation?.length)for(let d of t.collection.config.hooks.beforeOperation)t=await d({args:t,collection:t.collection.config,context:t.req.context,operation:"count",req:t.req})||t;let{collection:{config:r},disableErrors:o,overrideAccess:n,req:i,where:s}=t,{payload:a}=i,l;if(!n&&(l=await oe({disableErrors:o,req:i},r.access.read),l===!1))return{totalDocs:0};let c,A=Ae(s,l);return zt({fields:r.flattenedFields,payload:a,where:A}),await Ye({collectionConfig:r,overrideAccess:n,req:i,where:s}),c=await a.db.count({collection:r.slug,req:i,where:A}),c=await Je({args:t,collection:r,operation:"count",result:c}),c}catch(r){throw await H(t.req),r}};async function mD(e,t){let{collection:r,disableErrors:o,overrideAccess:n=!0,where:i}=t,s=e.collections[r];if(!s)throw new F(`The collection with slug ${String(r)} can't be found. Count Operation.`);return uA({collection:s,disableErrors:o,overrideAccess:n,req:await W(t,e),where:i})}import{ReadableStream as w8}from"node:stream/web";import{stat as C8}from"node:fs/promises";var g8="End-Of-Stream",Ne=class extends Error{constructor(){super(g8)}};var wf=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((t,r)=>{this.reject=r,this.resolve=t})}};var Wa=class{constructor(){this.maxStreamReadSize=1*1024*1024,this.endOfStream=!1,this.peekQueue=[]}async peek(t,r,o){let n=await this.read(t,r,o);return this.peekQueue.push(t.subarray(r,r+n)),n}async read(t,r,o){if(o===0)return 0;let n=this.readFromPeekBuffer(t,r,o);if(n+=await this.readRemainderFromStream(t,r+n,o-n),n===0)throw new Ne;return n}readFromPeekBuffer(t,r,o){let n=o,i=0;for(;this.peekQueue.length>0&&n>0;){let s=this.peekQueue.pop();if(!s)throw new Error("peekData should be defined");let a=Math.min(s.length,n);t.set(s.subarray(0,a),r+i),i+=a,n-=a,a<s.length&&this.peekQueue.push(s.subarray(a))}return i}async readRemainderFromStream(t,r,o){let n=o,i=0;for(;n>0&&!this.endOfStream;){let s=Math.min(n,this.maxStreamReadSize),a=await this.readFromStream(t,r+i,s);if(a===0)break;i+=a,n-=a}return i}};var dA=class extends Wa{constructor(t){if(super(),this.s=t,this.deferred=null,!t.read||!t.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new Ne)),this.s.once("error",r=>this.reject(r)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async readFromStream(t,r,o){if(this.endOfStream)return 0;let n=this.s.read(o);if(n)return t.set(n,r),n.length;let i={buffer:t,offset:r,length:o,deferred:new wf};return this.deferred=i.deferred,this.s.once("readable",()=>{this.readDeferred(i)}),i.deferred.promise}readDeferred(t){let r=this.s.read(t.length);r?(t.buffer.set(r,t.offset),t.deferred.resolve(r.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(t)})}reject(t){this.endOfStream=!0,this.deferred&&(this.deferred.reject(t),this.deferred=null)}async abort(){this.s.destroy()}};var fA=class extends Wa{constructor(t){super(),this.reader=t.getReader({mode:"byob"})}async readFromStream(t,r,o){if(this.endOfStream)throw new Ne;let n=await this.reader.read(new Uint8Array(o));return n.done&&(this.endOfStream=n.done),n.value?(t.set(n.value,r),n.value.byteLength):0}async abort(){await this.reader.cancel(),this.reader.releaseLock()}};var Tn=class{constructor(t){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=t?.fileInfo??{},this.onClose=t?.onClose}async readToken(t,r=this.position){let o=new Uint8Array(t.len);if(await this.readBuffer(o,{position:r})<t.len)throw new Ne;return t.get(o,0)}async peekToken(t,r=this.position){let o=new Uint8Array(t.len);if(await this.peekBuffer(o,{position:r})<t.len)throw new Ne;return t.get(o,0)}async readNumber(t){if(await this.readBuffer(this.numBuffer,{length:t.len})<t.len)throw new Ne;return t.get(this.numBuffer,0)}async peekNumber(t){if(await this.peekBuffer(this.numBuffer,{length:t.len})<t.len)throw new Ne;return t.get(this.numBuffer,0)}async ignore(t){if(this.fileInfo.size!==void 0){let r=this.fileInfo.size-this.position;if(t>r)return this.position+=r,r}return this.position+=t,t}async close(){await this.onClose?.()}normalizeOptions(t,r){if(r&&r.position!==void 0&&r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return r?{mayBeLess:r.mayBeLess===!0,offset:r.offset?r.offset:0,length:r.length?r.length:t.length-(r.offset?r.offset:0),position:r.position?r.position:this.position}:{mayBeLess:!1,offset:0,length:t.length,position:this.position}}};var m8=256e3,pA=class extends Tn{constructor(t,r){super(r),this.streamReader=t}async readBuffer(t,r){let o=this.normalizeOptions(t,r),n=o.position-this.position;if(n>0)return await this.ignore(n),this.readBuffer(t,r);if(n<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(o.length===0)return 0;let i=await this.streamReader.read(t,o.offset,o.length);if(this.position+=i,(!r||!r.mayBeLess)&&i<o.length)throw new Ne;return i}async peekBuffer(t,r){let o=this.normalizeOptions(t,r),n=0;if(o.position){let i=o.position-this.position;if(i>0){let s=new Uint8Array(o.length+i);return n=await this.peekBuffer(s,{mayBeLess:o.mayBeLess}),t.set(s.subarray(i),o.offset),n-i}if(i<0)throw new Error("Cannot peek from a negative offset in a stream")}if(o.length>0){try{n=await this.streamReader.peek(t,o.offset,o.length)}catch(i){if(r?.mayBeLess&&i instanceof Ne)return 0;throw i}if(!o.mayBeLess&&n<o.length)throw new Ne}return n}async ignore(t){let r=Math.min(m8,t),o=new Uint8Array(r),n=0;for(;n<t;){let i=t-n,s=await this.readBuffer(o,{length:Math.min(r,i)});if(s<0)return s;n+=s}return n}};var Sf=class extends Tn{constructor(t,r){super(r),this.uint8Array=t,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:t.length}async readBuffer(t,r){if(r?.position){if(r.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=r.position}let o=await this.peekBuffer(t,r);return this.position+=o,o}async peekBuffer(t,r){let o=this.normalizeOptions(t,r),n=Math.min(this.uint8Array.length-o.position,o.length);if(!o.mayBeLess&&n<o.length)throw new Ne;return t.set(this.uint8Array.subarray(o.position,o.position+n),o.offset),n}close(){return super.close()}};function yD(e,t){return new pA(new dA(e),t)}function Tf(e,t){return new pA(new fA(e),t)}function ED(e,t){return new Sf(e,t)}import{open as E8}from"node:fs/promises";var kE=class extends Tn{constructor(t,r){super(r),this.fileHandle=t}async readBuffer(t,r){let o=this.normalizeOptions(t,r);if(this.position=o.position,o.length===0)return 0;let n=await this.fileHandle.read(t,o.offset,o.length,o.position);if(this.position+=n.bytesRead,n.bytesRead<o.length&&(!r||!r.mayBeLess))throw new Ne;return n.bytesRead}async peekBuffer(t,r){let o=this.normalizeOptions(t,r),n=await this.fileHandle.read(t,o.offset,o.length,o.position);if(!o.mayBeLess&&n.bytesRead<o.length)throw new Ne;return n.bytesRead}async close(){return await this.fileHandle.close(),super.close()}};async function NE(e){let t=await E8(e,"r"),r=await t.stat();return new kE(t,{fileInfo:{path:e,size:r.size}})}async function CD(e,t){let r=t??{};if(r.fileInfo=r.fileInfo??{},e.path){let o=await C8(e.path);r.fileInfo.path=e.path,r.fileInfo.size=o.size}return yD(e,r)}var BD=We(ID(),1);function nr(e){return new DataView(e.buffer,e.byteOffset)}var QD={len:1,get(e,t){return nr(e).getUint8(t)},put(e,t,r){return nr(e).setUint8(t,r),t+1}},xf={len:2,get(e,t){return nr(e).getUint16(t,!0)},put(e,t,r){return nr(e).setUint16(t,r,!0),t+2}},Rf={len:2,get(e,t){return nr(e).getUint16(t)},put(e,t,r){return nr(e).setUint16(t,r),t+2}};var bD={len:4,get(e,t){return nr(e).getUint32(t,!0)},put(e,t,r){return nr(e).setUint32(t,r,!0),t+4}},wD={len:4,get(e,t){return nr(e).getUint32(t)},put(e,t,r){return nr(e).setUint32(t,r),t+4}};var SD={len:4,get(e,t){return nr(e).getInt32(t)},put(e,t,r){return nr(e).setInt32(t,r),t+4}};var TD={len:8,get(e,t){return nr(e).getBigUint64(t,!0)},put(e,t,r){return nr(e).setBigUint64(t,r,!0),t+8}};var br=class{constructor(t,r){this.len=t,this.encoding=r,this.textDecoder=new TextDecoder(r)}get(t,r){return this.textDecoder.decode(t.subarray(r,r+this.len))}};var YQe={utf8:new globalThis.TextDecoder("utf8")};var WQe=new globalThis.TextEncoder;var JQe=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function PE(e){let{byteLength:t}=e;if(t===6)return e.getUint16(0)*2**32+e.getUint32(2);if(t===5)return e.getUint8(0)*2**32+e.getUint32(1);if(t===4)return e.getUint32(0);if(t===3)return e.getUint8(0)*2**16+e.getUint16(1);if(t===2)return e.getUint16(0);if(t===1)return e.getUint8(0)}function LE(e,t){let r=e.length,o=t.length;if(o===0||o>r)return-1;let n=r-o;for(let i=0;i<=n;i++){let s=!0;for(let a=0;a<o;a++)if(e[i+a]!==t[a]){s=!1;break}if(s)return i}return-1}function xD(e,t){return LE(e,t)!==-1}function RD(e){return[...e].map(t=>t.charCodeAt(0))}function DD(e,t=0){let r=Number.parseInt(new br(6).get(e,148).replace(/\0.*$/,"").trim(),8);if(Number.isNaN(r))return!1;let o=8*32;for(let n=t;n<t+148;n++)o+=e[n];for(let n=t+156;n<t+512;n++)o+=e[n];return r===o}var FD={get:(e,t)=>e[t+3]&127|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4};var kD=["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","elf","macho","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","j2c","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf","jls","pst","dwg","parquet","class","arj","cpio","ace","avro","icc","fbx","vsdx"],ND=["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/wav","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-elf","application/x-mach-binary","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/j2c","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd","image/jls","application/vnd.ms-outlook","image/vnd.dwg","application/x-parquet","application/java-vm","application/x-arj","application/x-cpio","application/x-ace-compressed","application/avro","application/vnd.iccprofile","application/x.autodesk.fbx","application/vnd.visio"];var UE=4100;async function hA(e){return new Ja().fromBuffer(e)}function _o(e,t,r){r={offset:0,...r};for(let[o,n]of t.entries())if(r.mask){if(n!==(r.mask[o]&e[o+r.offset]))return!1}else if(n!==e[o+r.offset])return!1;return!0}var Ja=class{constructor(t){this.detectors=t?.customDetectors,this.fromTokenizer=this.fromTokenizer.bind(this),this.fromBuffer=this.fromBuffer.bind(this),this.parse=this.parse.bind(this)}async fromTokenizer(t){let r=t.position;for(let o of this.detectors||[]){let n=await o(t);if(n)return n;if(r!==t.position)return}return this.parse(t)}async fromBuffer(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`ArrayBuffer\`, got \`${typeof t}\``);let r=t instanceof Uint8Array?t:new Uint8Array(t);if(r?.length>1)return this.fromTokenizer(ED(r))}async fromBlob(t){return this.fromStream(t.stream())}async fromStream(t){let r=await Tf(t);try{return await this.fromTokenizer(r)}finally{await r.close()}}check(t,r){return _o(this.buffer,t,r)}checkString(t,r){return this.check(RD(t),r)}async parse(t){if(this.buffer=new Uint8Array(UE),t.fileInfo.size===void 0&&(t.fileInfo.size=Number.MAX_SAFE_INTEGER),this.tokenizer=t,await t.peekBuffer(this.buffer,{length:12,mayBeLess:!0}),this.check([66,77]))return{ext:"bmp",mime:"image/bmp"};if(this.check([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(this.check([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(this.check([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(this.check([37,33]))return await t.peekBuffer(this.buffer,{length:24,mayBeLess:!0}),this.checkString("PS-Adobe-",{offset:2})&&this.checkString(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(this.check([31,160])||this.check([31,157]))return{ext:"Z",mime:"application/x-compress"};if(this.check([199,113]))return{ext:"cpio",mime:"application/x-cpio"};if(this.check([96,234]))return{ext:"arj",mime:"application/x-arj"};if(this.check([239,187,191]))return this.tokenizer.ignore(3),this.parse(t);if(this.check([71,73,70]))return{ext:"gif",mime:"image/gif"};if(this.check([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(this.check([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(this.check([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(this.checkString("ID3")){await t.ignore(6);let r=await t.readToken(FD);return t.position+r>t.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await t.ignore(r),this.fromTokenizer(t))}if(this.checkString("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((this.buffer[0]===67||this.buffer[0]===70)&&this.check([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(this.check([255,216,255]))return this.check([247],{offset:3})?{ext:"jls",mime:"image/jls"}:{ext:"jpg",mime:"image/jpeg"};if(this.check([79,98,106,1]))return{ext:"avro",mime:"application/avro"};if(this.checkString("FLIF"))return{ext:"flif",mime:"image/flif"};if(this.checkString("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(this.checkString("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(this.checkString("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(this.checkString("FORM"))return{ext:"aif",mime:"audio/aiff"};if(this.checkString("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(this.check([80,75,3,4])){try{for(;t.position+30<t.fileInfo.size;){await t.readBuffer(this.buffer,{length:30});let r=new DataView(this.buffer.buffer),o={compressedSize:r.getUint32(18,!0),uncompressedSize:r.getUint32(22,!0),filenameLength:r.getUint16(26,!0),extraFieldLength:r.getUint16(28,!0)};if(o.filename=await t.readToken(new br(o.filenameLength,"utf-8")),await t.ignore(o.extraFieldLength),o.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(o.filename.endsWith(".rels")||o.filename.endsWith(".xml"))switch(o.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};case"visio":return{ext:"vsdx",mime:"application/vnd.visio"};default:break}if(o.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(o.filename.startsWith("3D/")&&o.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(o.filename==="mimetype"&&o.compressedSize===o.uncompressedSize){let n=await t.readToken(new br(o.compressedSize,"utf-8"));switch(n=n.trim(),n){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}}if(o.compressedSize===0){let n=-1;for(;n<0&&t.position<t.fileInfo.size;)await t.peekBuffer(this.buffer,{mayBeLess:!0}),n=LE(this.buffer,new Uint8Array([80,75,3,4])),await t.ignore(n>=0?n:this.buffer.length)}else await t.ignore(o.compressedSize)}}catch(r){if(!(r instanceof Ne))throw r}return{ext:"zip",mime:"application/zip"}}if(this.checkString("OggS")){await t.ignore(28);let r=new Uint8Array(8);return await t.readBuffer(r),_o(r,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_o(r,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_o(r,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_o(r,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_o(r,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_o(r,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(this.check([80,75])&&(this.buffer[2]===3||this.buffer[2]===5||this.buffer[2]===7)&&(this.buffer[3]===4||this.buffer[3]===6||this.buffer[3]===8))return{ext:"zip",mime:"application/zip"};if(this.checkString("ftyp",{offset:4})&&(this.buffer[8]&96)!==0){let r=new br(4,"latin1").get(this.buffer,8).replace("\0"," ").trim();switch(r){case"avif":case"avis":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return r.startsWith("3g")?r.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(this.checkString("MThd"))return{ext:"mid",mime:"audio/midi"};if(this.checkString("wOFF")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(this.checkString("wOF2")&&(this.check([0,1,0,0],{offset:4})||this.checkString("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(this.check([212,195,178,161])||this.check([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(this.checkString("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(this.checkString("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(this.checkString("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(this.check([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(this.checkString("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(this.checkString("%PDF")){try{await t.ignore(1350);let r=10*1024*1024,o=new Uint8Array(Math.min(r,t.fileInfo.size));if(await t.readBuffer(o,{mayBeLess:!0}),xD(o,new TextEncoder().encode("AIPrivateData")))return{ext:"ai",mime:"application/postscript"}}catch(r){if(!(r instanceof Ne))throw r}return{ext:"pdf",mime:"application/pdf"}}if(this.check([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(this.check([73,73])){let r=await this.readTiffHeader(!1);if(r)return r}if(this.check([77,77])){let r=await this.readTiffHeader(!0);if(r)return r}if(this.checkString("MAC "))return{ext:"ape",mime:"audio/ape"};if(this.check([26,69,223,163])){async function r(){let a=await t.peekNumber(QD),l=128,c=0;for(;(a&l)===0&&l!==0;)++c,l>>=1;let A=new Uint8Array(c+1);return await t.readBuffer(A),A}async function o(){let a=await r(),l=await r();l[0]^=128>>l.length-1;let c=Math.min(6,l.length),A=new DataView(a.buffer),d=new DataView(l.buffer,l.length-c,c);return{id:PE(A),len:PE(d)}}async function n(a){for(;a>0;){let l=await o();if(l.id===17026)return(await t.readToken(new br(l.len))).replaceAll(/\00.*$/g,"");await t.ignore(l.len),--a}}let i=await o();switch(await n(i.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(this.check([82,73,70,70])){if(this.check([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(this.check([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/wav"};if(this.check([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(this.checkString("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(this.check([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(this.checkString("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(this.checkString("MSCF")||this.checkString("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(this.check([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(this.check([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(this.check([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(this.check([127,69,76,70]))return{ext:"elf",mime:"application/x-elf"};if(this.check([33,66,68,78]))return{ext:"pst",mime:"application/vnd.ms-outlook"};if(this.checkString("PAR1"))return{ext:"parquet",mime:"application/x-parquet"};if(this.check([207,250,237,254]))return{ext:"macho",mime:"application/x-mach-binary"};if(this.check([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(this.checkString("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(this.checkString("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(this.check([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(this.checkString("IMPM"))return{ext:"it",mime:"audio/x-it"};if(this.checkString("-lh0-",{offset:2})||this.checkString("-lh1-",{offset:2})||this.checkString("-lh2-",{offset:2})||this.checkString("-lh3-",{offset:2})||this.checkString("-lh4-",{offset:2})||this.checkString("-lh5-",{offset:2})||this.checkString("-lh6-",{offset:2})||this.checkString("-lh7-",{offset:2})||this.checkString("-lzs-",{offset:2})||this.checkString("-lz4-",{offset:2})||this.checkString("-lz5-",{offset:2})||this.checkString("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(this.check([0,0,1,186])){if(this.check([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(this.check([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(this.checkString("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(this.check([202,254,186,190]))return{ext:"class",mime:"application/java-vm"};if(this.check([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(this.checkString("<?xml "))return{ext:"xml",mime:"application/xml"};if(this.check([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(this.check([82,97,114,33,26,7])&&(this.buffer[6]===0||this.buffer[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(this.checkString("solid "))return{ext:"stl",mime:"model/stl"};if(this.checkString("AC")){let r=new br(4,"latin1").get(this.buffer,2);if(r.match("^d*")&&r>=1e3&&r<=1050)return{ext:"dwg",mime:"image/vnd.dwg"}}if(this.checkString("070707"))return{ext:"cpio",mime:"application/x-cpio"};if(this.checkString("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(this.checkString("!<arch>"))return await t.ignore(8),await t.readToken(new br(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(this.checkString("**ACE",{offset:7})&&(await t.peekBuffer(this.buffer,{length:14,mayBeLess:!0}),this.checkString("**",{offset:12})))return{ext:"ace",mime:"application/x-ace-compressed"};if(this.check([137,80,78,71,13,10,26,10])){await t.ignore(8);async function r(){return{length:await t.readToken(SD),type:await t.readToken(new br(4,"latin1"))}}do{let o=await r();if(o.length<0)return;switch(o.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await t.ignore(o.length+4)}}while(t.position+8<t.fileInfo.size);return{ext:"png",mime:"image/png"}}if(this.check([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(this.check([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(this.check([102,114,101,101],{offset:4})||this.check([109,100,97,116],{offset:4})||this.check([109,111,111,118],{offset:4})||this.check([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(this.check([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(this.checkString("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(this.check([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(this.check([48,38,178,117,142,102,207,17,166,217])){async function r(){let o=new Uint8Array(16);return await t.readBuffer(o),{id:o,size:Number(await t.readToken(TD))}}for(await t.ignore(30);t.position+24<t.fileInfo.size;){let o=await r(),n=o.size-24;if(_o(o.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){let i=new Uint8Array(16);if(n-=await t.readBuffer(i),_o(i,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_o(i,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await t.ignore(n)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(this.check([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((this.check([126,16,4])||this.check([126,24,4]))&&this.check([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(this.check([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(this.check([255,79,255,81]))return{ext:"j2c",mime:"image/j2c"};if(this.check([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await t.ignore(20),await t.readToken(new br(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(this.check([255,10])||this.check([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(this.check([254,255]))return this.check([0,60,0,63,0,120,0,109,0,108],{offset:2})?{ext:"xml",mime:"application/xml"}:void 0;if(this.check([0,0,1,186])||this.check([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(this.check([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(this.check([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(this.check([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(this.check([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await t.peekBuffer(this.buffer,{length:Math.min(256,t.fileInfo.size),mayBeLess:!0}),this.check([97,99,115,112],{offset:36}))return{ext:"icc",mime:"application/vnd.iccprofile"};if(this.checkString("BEGIN:")){if(this.checkString("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(this.checkString("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(this.checkString("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(this.checkString("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(this.checkString("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(this.check([4,0,0,0])&&this.buffer.length>=16){let r=new DataView(this.buffer.buffer).getUint32(12,!0);if(r>12&&this.buffer.length>=r+16)try{let o=new TextDecoder().decode(this.buffer.slice(16,r+16));if(JSON.parse(o).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(this.check([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(this.checkString("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(this.check([71])&&this.check([71],{offset:188}))return{ext:"mts",mime:"video/mp2t"};if(this.check([71],{offset:4})&&this.check([71],{offset:196}))return{ext:"mts",mime:"video/mp2t"};if(this.check([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(this.check([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(this.check([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(this.check([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(this.checkString("Kaydara FBX Binary  \0"))return{ext:"fbx",mime:"application/x.autodesk.fbx"};if(this.check([76,80],{offset:34})&&(this.check([0,0,1],{offset:8})||this.check([1,0,2],{offset:8})||this.check([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(this.check([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await t.peekBuffer(this.buffer,{length:Math.min(512,t.fileInfo.size),mayBeLess:!0}),DD(this.buffer))return{ext:"tar",mime:"application/x-tar"};if(this.check([255,254]))return this.check([60,0,63,0,120,0,109,0,108,0],{offset:2})?{ext:"xml",mime:"application/xml"}:this.check([255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0],{offset:2})?{ext:"skp",mime:"application/vnd.sketchup.skp"}:void 0;if(this.checkString("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(this.buffer.length>=2&&this.check([255,224],{offset:0,mask:[255,224]})){if(this.check([16],{offset:1,mask:[22]}))return this.check([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(this.check([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(this.check([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(this.check([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}async readTiffTag(t){let r=await this.tokenizer.readToken(t?Rf:xf);switch(this.tokenizer.ignore(10),r){case 50341:return{ext:"arw",mime:"image/x-sony-arw"};case 50706:return{ext:"dng",mime:"image/x-adobe-dng"};default:}}async readTiffIFD(t){let r=await this.tokenizer.readToken(t?Rf:xf);for(let o=0;o<r;++o){let n=await this.readTiffTag(t);if(n)return n}}async readTiffHeader(t){let r=(t?Rf:xf).get(this.buffer,2),o=(t?wD:bD).get(this.buffer,4);if(r===42){if(o>=6){if(this.checkString("CR",{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(o>=8&&(this.check([28,0,254,0],{offset:8})||this.check([31,0,11,0],{offset:8})))return{ext:"nef",mime:"image/x-nikon-nef"}}return await this.tokenizer.ignore(o),await this.readTiffIFD(t)??{ext:"tif",mime:"image/tiff"}}if(r===43)return{ext:"tif",mime:"image/tiff"}}},Q8=new Set(kD),b8=new Set(ND);var OE=class extends Ja{async fromStream(t){let r=await(t instanceof w8?Tf(t):CD(t));try{return super.fromTokenizer(r)}finally{await r.close()}}async fromFile(t){let r=await NE(t);try{return await super.fromTokenizer(r)}finally{await r.close()}}async toDetectionStream(t,r={}){let{default:o}=await import("node:stream"),{sampleSize:n=UE}=r;return new Promise((i,s)=>{t.on("error",s),t.once("readable",()=>{(async()=>{try{let a=new o.PassThrough,l=o.pipeline?o.pipeline(t,a,()=>{}):t.pipe(a),c=t.read(n)??t.read()??new Uint8Array(0);try{a.fileType=await this.fromBuffer(c)}catch(A){A instanceof Ne?a.fileType=void 0:s(A)}i(l)}catch(a){s(a)}})()})})}};async function Df(e,t){return new OE(t).fromFile(e,t)}import vD from"fs/promises";import PD from"path";var S8={svg:"image/svg+xml"},Es=async e=>{if(typeof e!="string")return;let t=PD.basename(e),r=PD.extname(e).slice(1),[o,n,i]=await Promise.all([vD.readFile(e),vD.stat(e),Df(e)]);return{name:t,data:o,mimetype:i?.mime||S8[r],size:n.size}};import Sce from"crypto";var za=({authOptions:{disableLocalStrategy:e,loginWithUsername:t},collectionSlug:r,data:o,operation:n,originalDoc:i,req:s})=>{if(!e&&t&&!t.requireEmail&&!t.requireUsername){let a=!1;if(n==="create"&&!o.email&&!o.username?a=!0:n==="update"&&("email"in o&&!o.email&&"username"in o&&!o.username&&(a=!0),"email"in o&&!o.email&&!i.username&&!o?.username&&(a=!0),"username"in o&&!o.username&&!i.email&&!o?.email&&(a=!0)),a)throw new xt({collection:r,errors:[{message:"Username or email is required",path:"username"},{message:"Username or email is required",path:"email"}]},s.t)}};import{URL as T8}from"url";async function LD(e){let{collection:{config:t},config:r,disableEmail:o,email:n,req:i,token:s,user:a}=e;if(!o){let l=new T8(i.url).protocol,A=`${r.serverURL!==null&&r.serverURL!==""?r.serverURL:`${l}//${i.headers.get("host")}`}${r.routes.admin}/${t.slug}/verify/${s}`,d=`${i.t("authentication:newAccountCreated",{serverURL:r.serverURL,verificationURL:A})}`,f=t.auth.verify;typeof f.generateEmailHTML=="function"&&(d=await f.generateEmailHTML({req:i,token:s,user:a}));let u=i.t("authentication:verifyYourEmail");typeof f.generateEmailSubject=="function"&&(u=await f.generateEmailSubject({req:i,token:s,user:a})),await n.sendEmail({from:`"${n.defaultFromName}" <${n.defaultFromAddress}>`,html:d,subject:u,to:a.email})}}var UD=async({collection:e,doc:t,password:r,payload:o,req:n,select:i})=>{let s=e?.auth?.loginWithUsername,{canLoginWithEmail:a,canLoginWithUsername:l}=mn(s),c;if(l?(c={or:[]},a&&t.email&&c.or?.push({email:{equals:t.email}}),t.username&&c.or?.push({username:{equals:t.username}})):c={email:{equals:t.email}},(await o.find({collection:e.slug,depth:0,limit:1,pagination:!1,req:n,where:c})).docs.length>0)throw new xt({collection:e.slug,errors:[l?{message:n.t("error:usernameAlreadyRegistered"),path:"username"}:{message:n.t("error:userEmailAlreadyRegistered"),path:"email"}]});let{hash:d,salt:f}=await Ya({collection:e,password:r,req:n}),u={...t};return u.password&&delete u.password,o.db.create({collection:e.slug,data:{...u,hash:d,salt:f},req:n,select:i})};var OD=async({id:e,blockData:t,collection:r,context:o,doc:n,field:i,fieldIndex:s,overrideAccess:a,parentIndexPath:l,parentIsLocalized:c,parentPath:A,parentSchemaPath:d,req:f,siblingDoc:u,siblingFields:p})=>{let{indexPath:h,path:g,schemaPath:m}=ko({field:i,index:s,parentIndexPath:l,parentPath:A,parentSchemaPath:d}),{localization:y}=f.payload.config,E=g?g.split("."):[],I=m?m.split("."):[],C=h?h.split("-").filter(Boolean)?.map(Number):[];if(J(i)){let B=u?.[i.name],R=y&&ft({field:i,parentIsLocalized:c});if(Array.isArray(i.hooks?.beforeDuplicate))if(R){let x={};for(let S of y.localeCodes){let Q={blockData:t,collection:r,context:o,data:n,field:i,global:void 0,indexPath:C,path:E,previousSiblingDoc:u,previousValue:u[i.name]?.[S],req:f,schemaPath:I,siblingData:u,siblingDocWithLocales:u,siblingFields:p,value:u[i.name]?.[S]},T;for(let D of i.hooks.beforeDuplicate)T=await D(Q);typeof T<"u"&&(x[S]=T)}u[i.name]=x}else{let x={blockData:t,collection:r,context:o,data:n,field:i,global:void 0,indexPath:C,path:E,previousSiblingDoc:u,previousValue:u[i.name],req:f,schemaPath:I,siblingData:u,siblingDocWithLocales:u,siblingFields:p,value:u[i.name]},S;for(let Q of i.hooks.beforeDuplicate)S=await Q(x);typeof S<"u"&&(u[i.name]=S)}if(R){(typeof B!="object"||B===null)&&(u[i.name]={},B=u[i.name]);let x=[];y.localeCodes.forEach(S=>{if(B[S])switch(i.type){case"array":{let Q=B[S];if(Array.isArray(Q)){let T=[];Q.forEach((D,k)=>{T.push(wr({id:e,blockData:t,collection:r,context:o,doc:n,fields:i.fields,overrideAccess:a,parentIndexPath:"",parentIsLocalized:c||i.localized,parentPath:g+"."+k,parentSchemaPath:m,req:f,siblingDoc:D}))})}break}case"blocks":{let Q=B[S];if(Array.isArray(Q)){let T=[];Q.forEach((D,k)=>{let P=D.blockType,U=f.payload.blocks[P]??(i.blockReferences??i.blocks).find(_=>typeof _!="string"&&_.slug===P);T.push(wr({id:e,blockData:D,collection:r,context:o,doc:n,fields:U.fields,overrideAccess:a,parentIndexPath:"",parentIsLocalized:c||i.localized,parentPath:g+"."+k,parentSchemaPath:m+"."+U.slug,req:f,siblingDoc:D}))})}break}case"group":case"tab":{x.push(wr({id:e,blockData:t,collection:r,context:o,doc:n,fields:i.fields,overrideAccess:a,parentIndexPath:"",parentIsLocalized:c||i.localized,parentPath:g,parentSchemaPath:m,req:f,siblingDoc:B[S]}));break}}}),await Promise.all(x)}else switch(i.type){case"array":{let x=u[i.name];if(Array.isArray(x)){let S=[];x.forEach((Q,T)=>{S.push(wr({id:e,blockData:t,collection:r,context:o,doc:n,fields:i.fields,overrideAccess:a,parentIndexPath:"",parentIsLocalized:c||i.localized,parentPath:g+"."+T,parentSchemaPath:m,req:f,siblingDoc:Q}))}),await Promise.all(S)}break}case"blocks":{let x=u[i.name];if(Array.isArray(x)){let S=[];x.forEach((Q,T)=>{let D=Q.blockType,k=f.payload.blocks[D]??(i.blockReferences??i.blocks).find(P=>typeof P!="string"&&P.slug===D);k&&(Q.blockType=D,S.push(wr({id:e,blockData:Q,collection:r,context:o,doc:n,fields:k.fields,overrideAccess:a,parentIndexPath:"",parentIsLocalized:c||i.localized,parentPath:g+"."+T,parentSchemaPath:m+"."+k.slug,req:f,siblingDoc:Q})))}),await Promise.all(S)}break}case"group":{typeof u[i.name]!="object"&&(u[i.name]={});let x=u[i.name];await wr({id:e,blockData:t,collection:r,context:o,doc:n,fields:i.fields,overrideAccess:a,parentIndexPath:"",parentIsLocalized:c||i.localized,parentPath:g,parentSchemaPath:m,req:f,siblingDoc:x});break}case"tab":{typeof u[i.name]!="object"&&(u[i.name]={});let x=u[i.name];await wr({id:e,blockData:t,collection:r,context:o,doc:n,fields:i.fields,overrideAccess:a,parentIndexPath:"",parentIsLocalized:c||i.localized,parentPath:g,parentSchemaPath:m,req:f,siblingDoc:x});break}}}else switch(i.type){case"collapsible":case"group":case"row":{await wr({id:e,blockData:t,collection:r,context:o,doc:n,fields:i.fields,overrideAccess:a,parentIndexPath:h,parentIsLocalized:c,parentPath:A,parentSchemaPath:m,req:f,siblingDoc:u});break}case"tab":{await wr({id:e,blockData:t,collection:r,context:o,doc:n,fields:i.fields,overrideAccess:a,parentIndexPath:h,parentIsLocalized:c,parentPath:A,parentSchemaPath:m,req:f,siblingDoc:u});break}case"tabs":{await wr({id:e,blockData:t,collection:r,context:o,doc:n,fields:i.tabs.map(B=>({...B,type:"tab"})),overrideAccess:a,parentIndexPath:h,parentIsLocalized:c,parentPath:g,parentSchemaPath:m,req:f,siblingDoc:u});break}default:break}};var wr=async({id:e,blockData:t,collection:r,context:o,doc:n,fields:i,overrideAccess:s,parentIndexPath:a,parentIsLocalized:l,parentPath:c,parentSchemaPath:A,req:d,siblingDoc:f})=>{let u=[];i.forEach((p,h)=>{u.push(OD({id:e,blockData:t,collection:r,context:o,doc:n,field:p,fieldIndex:h,overrideAccess:s,parentIndexPath:a,parentIsLocalized:l,parentPath:c,parentSchemaPath:A,req:d,siblingDoc:f,siblingFields:i}))}),await Promise.all(u)};var MD=async({id:e,collection:t,context:r,doc:o,overrideAccess:n,req:i})=>(await wr({id:e,collection:t,context:r,doc:o,fields:t.fields,overrideAccess:n,parentIndexPath:"",parentIsLocalized:!1,parentPath:"",parentSchemaPath:"",req:i,siblingDoc:o}),o);var qr=(e={})=>Object.entries(e).reduce((t,[r,o])=>["AND","and","OR","or"].includes(r)&&Array.isArray(o)?{...t,[r.toLowerCase()]:o.map(n=>qr(n))}:r!=="id"?{...t,[`version.${r}`]:o}:{...t,parent:o},{});var xn=async({id:e,config:t,payload:r,published:o,query:n,req:i})=>{let s,a=o?{and:[{parent:{equals:e}},{"version._status":{equals:"published"}}]}:{and:[{parent:{equals:e}},{latest:{equals:!0}}]};if(t.versions?.drafts){let{docs:l}=await r.db.findVersions({collection:t.slug,limit:1,pagination:!1,req:i,sort:"-updatedAt",where:Ae(qr(n.where),a)});s=l[0]}return s?(s.version.id=e,s.version):o?void 0:await r.db.findOne({...n,req:i})};var _D=async({id:e,collectionConfig:t,draftArg:r,overrideAccess:o,req:n,shouldSaveDraft:i})=>{let{payload:s}=n,a=o?!0:await oe({id:e,req:n},t.access.read),l=Vr(a),c={collection:t.slug,locale:n.locale,req:n,where:Ae({id:{equals:e}},a)},A=await xn({id:e,config:t,payload:s,query:c,req:n});if(!A&&!l)throw new Ke(n.t);if(!A&&l)throw new ae(n.t);return"createdAt"in A&&delete A.createdAt,"id"in A&&delete A.id,A=await MD({id:e,collection:t,context:n.context,doc:A,overrideAccess:o,req:n}),i&&(A._status="draft"),{duplicatedFromDoc:await be({collection:t,context:n.context,depth:0,doc:He(A),draft:r,fallbackLocale:null,global:null,locale:n.locale,overrideAccess:!0,req:n,showHiddenFields:!0}),duplicatedFromDocWithLocales:A}};var GD=async({blockData:e,collection:t,context:r,data:o,doc:n,field:i,fieldIndex:s,global:a,operation:l,parentIndexPath:c,parentIsLocalized:A,parentPath:d,parentSchemaPath:f,previousDoc:u,previousSiblingDoc:p,req:h,siblingData:g,siblingDoc:m,siblingFields:y})=>{let{indexPath:E,path:I,schemaPath:C}=ko({field:i,index:s,parentIndexPath:c,parentPath:d,parentSchemaPath:f}),B=I?I.split("."):[],R=C?C.split("."):[],x=E?E.split("-").filter(Boolean)?.map(Number):[];if(J(i)&&i.hooks?.afterChange)for(let S of i.hooks.afterChange){let Q=await S({blockData:e,collection:t,context:r,data:o,field:i,global:a,indexPath:x,operation:l,originalDoc:n,path:B,previousDoc:u,previousSiblingDoc:p,previousValue:u[i.name],req:h,schemaPath:R,siblingData:g,siblingFields:y,value:m[i.name]});Q!==void 0&&(m[i.name]=Q)}switch(i.type){case"array":{let S=m[i.name];if(Array.isArray(S)){let Q=[];S.forEach((T,D)=>{Q.push(ho({blockData:e,collection:t,context:r,data:o,doc:n,fields:i.fields,global:a,operation:l,parentIndexPath:"",parentIsLocalized:A||i.localized,parentPath:I+"."+D,parentSchemaPath:C,previousDoc:u,previousSiblingDoc:u?.[i.name]?.[D]||{},req:h,siblingData:g?.[i.name]?.[D]||{},siblingDoc:T?{...T}:{}}))}),await Promise.all(Q)}break}case"blocks":{let S=m[i.name];if(Array.isArray(S)){let Q=[];S.forEach((T,D)=>{let k=T.blockType,P=h.payload.blocks[k]??(i.blockReferences??i.blocks).find(U=>typeof U!="string"&&U.slug===k);P&&Q.push(ho({blockData:g?.[i.name]?.[D],collection:t,context:r,data:o,doc:n,fields:P.fields,global:a,operation:l,parentIndexPath:"",parentIsLocalized:A||i.localized,parentPath:I+"."+D,parentSchemaPath:C+"."+P.slug,previousDoc:u,previousSiblingDoc:u?.[i.name]?.[D]||{},req:h,siblingData:g?.[i.name]?.[D]||{},siblingDoc:T?{...T}:{}}))}),await Promise.all(Q)}break}case"collapsible":case"row":{await ho({blockData:e,collection:t,context:r,data:o,doc:n,fields:i.fields,global:a,operation:l,parentIndexPath:E,parentIsLocalized:A,parentPath:d,parentSchemaPath:C,previousDoc:u,previousSiblingDoc:{...p},req:h,siblingData:g||{},siblingDoc:{...m}});break}case"group":{J(i)?await ho({blockData:e,collection:t,context:r,data:o,doc:n,fields:i.fields,global:a,operation:l,parentIndexPath:"",parentIsLocalized:A||i.localized,parentPath:I,parentSchemaPath:C,previousDoc:u,previousSiblingDoc:u[i.name],req:h,siblingData:g?.[i.name]||{},siblingDoc:m[i.name]}):await ho({blockData:e,collection:t,context:r,data:o,doc:n,fields:i.fields,global:a,operation:l,parentIndexPath:E,parentIsLocalized:A,parentPath:d,parentSchemaPath:C,previousDoc:u,previousSiblingDoc:{...p},req:h,siblingData:g||{},siblingDoc:{...m}});break}case"richText":{if(!i?.editor)throw new Et(i);if(typeof i.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");let S=i.editor;if(S?.hooks?.afterChange?.length)for(let Q of S.hooks.afterChange){let T=await Q({collection:t,context:r,data:o,field:i,global:a,indexPath:x,operation:l,originalDoc:n,parentIsLocalized:A,path:B,previousDoc:u,previousSiblingDoc:p,previousValue:u[i.name],req:h,schemaPath:R,siblingData:g,value:m[i.name]});T!==void 0&&(m[i.name]=T)}break}case"tab":{let S=g,Q=m,T=m,D=yt(i);D&&(S=g[i.name]??{},Q=m[i.name]??{},T=u[i.name]??{}),await ho({blockData:e,collection:t,context:r,data:o,doc:n,fields:i.fields,global:a,operation:l,parentIndexPath:D?"":E,parentIsLocalized:A||i.localized,parentPath:D?I:d,parentSchemaPath:C,previousDoc:u,previousSiblingDoc:T,req:h,siblingData:S,siblingDoc:Q});break}case"tabs":{await ho({blockData:e,collection:t,context:r,data:o,doc:n,fields:i.tabs.map(S=>({...S,type:"tab"})),global:a,operation:l,parentIndexPath:E,parentIsLocalized:A,parentPath:I,parentSchemaPath:C,previousDoc:u,previousSiblingDoc:{...p},req:h,siblingData:g||{},siblingDoc:{...m}});break}default:break}};var ho=async({blockData:e,collection:t,context:r,data:o,doc:n,fields:i,global:s,operation:a,parentIndexPath:l,parentIsLocalized:c,parentPath:A,parentSchemaPath:d,previousDoc:f,previousSiblingDoc:u,req:p,siblingData:h,siblingDoc:g,siblingFields:m})=>{let y=[];i.forEach((E,I)=>{y.push(GD({blockData:e,collection:t,context:r,data:o,doc:n,field:E,fieldIndex:I,global:s,operation:a,parentIndexPath:l,parentIsLocalized:c,parentPath:A,parentSchemaPath:d,previousDoc:f,previousSiblingDoc:u,req:p,siblingData:h,siblingDoc:g,siblingFields:m}))}),await Promise.all(y)};var Go=async({collection:e,context:t,data:r,doc:o,global:n,operation:i,previousDoc:s,req:a})=>(await ho({collection:e,context:t,data:r,doc:o,fields:e?.fields||n?.fields,global:n,operation:i,parentIndexPath:"",parentIsLocalized:!1,parentPath:"",parentSchemaPath:"",previousDoc:s,previousSiblingDoc:s,req:a,siblingData:r,siblingDoc:o}),o);var Ka=We(qD(),1);var YD=Symbol.for("react.client.reference");function WD(e){if(e==null)return!1;let t=e.$$typeof==YD,r=typeof e=="function",o=typeof e=="function"&&e.name==="";return r&&!o&&!t}function G8(e){return e==null?!1:!WD(e)&&e.$$typeof==YD}function JD(e){return WD(e)||G8(e)}function ME(e){return JD(e)?!1:typeof e=="object"&&e!==null&&!(e instanceof RegExp)&&!(e instanceof Date)}function j8(e,t,r={}){return(0,Ka.default)(e,t,{arrayMerge:(o,n,i)=>{let s=o.slice();return n.forEach((a,l)=>{typeof s[l]>"u"?s[l]=i?.cloneUnlessOtherwiseSpecified(a,i):i?.isMergeableObject(a)?s[l]=(0,Ka.default)(o[l],a,i):o.indexOf(a)===-1&&s.push(a)}),s},...r})}function Ff(e,t){return(0,Ka.default)(e,t,{arrayMerge:(r,o)=>o})}function _E(e,t){return(0,Ka.default)(e,t,{isMergeableObject:ME})}import{getTranslation as H8}from"@payloadcms/translations";var Rn=(e,t)=>typeof e=="function"?e({i18n:t,t:t.t}):typeof e=="object"?H8(e,t):e;var Ai=(e,t)=>{if(e.id&&Array.isArray(t)){let r=t.find(o=>typeof o=="object"&&"id"in o&&o.id===e.id?o:!1);if(r)return r}return{}};function ui(e,t){let r=t.charAt(0).toUpperCase()+t.slice(1);return e&&r?`${e} > ${r}`:r||e}var zD=async({id:e,blockData:t,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,field:l,fieldIndex:c,fieldLabelPath:A,global:d,mergeLocaleActions:f,operation:u,overrideAccess:p,parentIndexPath:h,parentIsLocalized:g,parentPath:m,parentSchemaPath:y,req:E,siblingData:I,siblingDoc:C,siblingDocWithLocales:B,siblingFields:R,skipValidation:x})=>{let{indexPath:S,path:Q,schemaPath:T}=ko({field:l,index:c,parentIndexPath:h,parentPath:m,parentSchemaPath:y}),{localization:D}=E.payload.config,k=D?D?.defaultLocale:"en",P=E.locale||k,U=Q?Q.split("."):[],_=T?T.split("."):[],Y=S?S.split("-").filter(Boolean)?.map(Number):[],ce=l.admin?.condition?!!l.admin.condition(n,I,{blockData:t,operation:u,path:U,user:E.user}):!0,he=x||!ce;if(J(l)){if(ft({field:l,parentIsLocalized:g})&&P!==k&&["array","blocks"].includes(l.type)&&I[l.name]===null&&(he=!0),l.hooks?.beforeChange)for(let G of l.hooks.beforeChange){let M=await G({blockData:t,collection:r,context:o,data:n,field:l,global:d,indexPath:Y,operation:u,originalDoc:i,path:U,previousSiblingDoc:C,previousValue:C[l.name],req:E,schemaPath:_,siblingData:I,siblingDocWithLocales:B,siblingFields:R,value:I[l.name]});M!==void 0&&(I[l.name]=M)}if(!he&&"validate"in l&&l.validate){let G=I[l.name],M;if(l.type==="json"&&typeof I[l.name]=="string")try{JSON.parse(I[l.name])}catch(te){M=te}let V=l.validate,$=await V(G,{...l,id:e,blockData:t,collectionSlug:r?.slug,data:Ff(i,n),event:"submit",jsonError:M,operation:u,overrideAccess:p,path:U,preferences:{fields:{}},previousValue:C[l.name],req:E,siblingData:Ff(C,I)});if(typeof $=="string"){let te=ui(A,Rn(l?.label||l?.name,E.i18n));a.push({label:te,message:$,path:Q})}}D&&ft({field:l,parentIsLocalized:g})&&f.push(()=>{let G={};for(let M of D.localeCodes){let V=M===E.locale?I[l.name]:B?.[l.name]?.[M];typeof V<"u"&&(G[M]=V)}Object.keys(G).length>0&&(I[l.name]=G)})}switch(l.type){case"array":{let G=I[l.name];if(Array.isArray(G)){let M=[];G.forEach((V,$)=>{M.push(jo({id:e,blockData:t,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,fieldLabelPath:l?.label===!1?A:ui(A,`${Rn(l?.label||l?.name,E.i18n)} ${$+1}`),fields:l.fields,global:d,mergeLocaleActions:f,operation:u,overrideAccess:p,parentIndexPath:"",parentIsLocalized:g||l.localized,parentPath:Q+"."+$,parentSchemaPath:T,req:E,siblingData:V,siblingDoc:Ai(V,C[l.name]),siblingDocWithLocales:Ai(V,B?.[l.name]),skipValidation:he}))}),await Promise.all(M)}break}case"blocks":{let G=I[l.name];if(Array.isArray(G)){let M=[];G.forEach((V,$)=>{let te=Ai(V,C[l.name]),et=Ai(V,B?B[l.name]:{}),vt=V.blockType||te.blockType,Tt=E.payload.blocks[vt]??(l.blockReferences??l.blocks).find(qi=>typeof qi!="string"&&qi.slug===vt);Tt&&M.push(jo({id:e,blockData:V,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,fieldLabelPath:l?.label===!1?A:ui(A,`${Rn(l?.label||l?.name,E.i18n)} ${$+1}`),fields:Tt.fields,global:d,mergeLocaleActions:f,operation:u,overrideAccess:p,parentIndexPath:"",parentIsLocalized:g||l.localized,parentPath:Q+"."+$,parentSchemaPath:T+"."+Tt.slug,req:E,siblingData:V,siblingDoc:te,siblingDocWithLocales:et,skipValidation:he}))}),await Promise.all(M)}break}case"collapsible":case"row":{await jo({id:e,blockData:t,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,fieldLabelPath:l.type==="row"||l?.label===!1?A:ui(A,Rn(l?.label||l?.type,E.i18n)),fields:l.fields,global:d,mergeLocaleActions:f,operation:u,overrideAccess:p,parentIndexPath:S,parentIsLocalized:g,parentPath:m,parentSchemaPath:T,req:E,siblingData:I,siblingDoc:C,siblingDocWithLocales:B,skipValidation:he});break}case"group":{let G=I,M=C,V=B,$=J(l);$&&(typeof I[l.name]!="object"&&(I[l.name]={}),typeof C[l.name]!="object"&&(C[l.name]={}),typeof B[l.name]!="object"&&(B[l.name]={}),typeof I[l.name]!="object"&&(I[l.name]={}),typeof C[l.name]!="object"&&(C[l.name]={}),typeof B[l.name]!="object"&&(B[l.name]={}),G=I[l.name],M=C[l.name],V=B[l.name]);let te=l?.label||($?l.name:l?.type);await jo({id:e,blockData:t,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,fieldLabelPath:l?.label===!1?A:ui(A,Rn(te,E.i18n)),fields:l.fields,global:d,mergeLocaleActions:f,operation:u,overrideAccess:p,parentIndexPath:$?"":S,parentIsLocalized:g||l.localized,parentPath:$?Q:m,parentSchemaPath:T,req:E,siblingData:G,siblingDoc:M,siblingDocWithLocales:V,skipValidation:he});break}case"point":{Array.isArray(I[l.name])&&I[l.name][0]!==null&&I[l.name][1]!==null&&(I[l.name]={type:"Point",coordinates:[parseFloat(I[l.name][0]),parseFloat(I[l.name][1])]});break}case"richText":{if(!l?.editor)throw new Et(l);if(typeof l?.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");let G=l?.editor;if(G?.hooks?.beforeChange?.length)for(let M of G.hooks.beforeChange){let V=await M({collection:r,context:o,data:n,docWithLocales:s,errors:a,field:l,fieldLabelPath:l?.label===!1?A:ui(A,Rn(l?.label||l?.name,E.i18n)),global:d,indexPath:Y,mergeLocaleActions:f,operation:u,originalDoc:i,overrideAccess:p,parentIsLocalized:g,path:U,previousSiblingDoc:C,previousValue:C[l.name],req:E,schemaPath:_,siblingData:I,siblingDocWithLocales:B,skipValidation:x,value:I[l.name]});V!==void 0&&(I[l.name]=V)}break}case"tab":{let G=I,M=C,V=B,$=yt(l);$&&(typeof I[l.name]!="object"&&(I[l.name]={}),typeof C[l.name]!="object"&&(C[l.name]={}),typeof B[l.name]!="object"&&(B[l.name]={}),G=I[l.name],M=C[l.name],V=B[l.name]),await jo({id:e,blockData:t,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,fieldLabelPath:l?.label===!1?A:ui(A,Rn(l?.label||l.name,E.i18n)),fields:l.fields,global:d,mergeLocaleActions:f,operation:u,overrideAccess:p,parentIndexPath:$?"":S,parentIsLocalized:g||l.localized,parentPath:$?Q:m,parentSchemaPath:T,req:E,siblingData:G,siblingDoc:M,siblingDocWithLocales:V,skipValidation:he});break}case"tabs":{await jo({id:e,blockData:t,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,fieldLabelPath:l?.label===!1?A:ui(A,Rn(l?.label||"",E.i18n)),fields:l.tabs.map(G=>({...G,type:"tab"})),global:d,mergeLocaleActions:f,operation:u,overrideAccess:p,parentIndexPath:S,parentIsLocalized:g,parentPath:Q,parentSchemaPath:T,req:E,siblingData:I,siblingDoc:C,siblingDocWithLocales:B,skipValidation:he});break}default:break}};var jo=async({id:e,blockData:t,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,fieldLabelPath:l,fields:c,global:A,mergeLocaleActions:d,operation:f,overrideAccess:u,parentIndexPath:p,parentIsLocalized:h,parentPath:g,parentSchemaPath:m,req:y,siblingData:E,siblingDoc:I,siblingDocWithLocales:C,skipValidation:B})=>{let R=[];c.forEach((x,S)=>{R.push(zD({id:e,blockData:t,collection:r,context:o,data:n,doc:i,docWithLocales:s,errors:a,field:x,fieldIndex:S,fieldLabelPath:l,global:A,mergeLocaleActions:d,operation:f,overrideAccess:u,parentIndexPath:p,parentIsLocalized:h,parentPath:g,parentSchemaPath:m,req:y,siblingData:E,siblingDoc:I,siblingDocWithLocales:C,siblingFields:c,skipValidation:B}))}),await Promise.all(R)};var di=async({id:e,collection:t,context:r,data:o,doc:n,docWithLocales:i,global:s,operation:a,overrideAccess:l,req:c,skipValidation:A})=>{let d=He(o),f=[],u=[];if(await jo({id:e,collection:t,context:r,data:d,doc:n,docWithLocales:i,errors:u,fieldLabelPath:"",fields:t?.fields||s?.fields,global:s,mergeLocaleActions:f,operation:a,overrideAccess:l,parentIndexPath:"",parentIsLocalized:!1,parentPath:"",parentSchemaPath:"",req:c,siblingData:d,siblingDoc:n,siblingDocWithLocales:i,skipValidation:A}),u.length>0)throw new xt({id:e,collection:t?.slug,errors:u,global:s?.slug,req:c},c.t);for(let p of f)await p();return d};var $D=e=>Array.isArray(e)?e.map(t=>typeof t=="object"&&t!=null?{...t}:t):typeof e=="object"&&e!==null?{...e}:e;async function GE({field:e,req:t,siblingDoc:r}){let o;return"name"in e&&e.name&&(typeof r[e.name]<"u"?o=$D(r[e.name]):"defaultValue"in e&&typeof e.defaultValue<"u"&&(o=await Bc({defaultValue:e.defaultValue,locale:t.locale||"",req:t,user:t.user}))),o}var KD=async({id:e,blockData:t,collection:r,context:o,data:n,doc:i,field:s,fieldIndex:a,global:l,operation:c,overrideAccess:A,parentIndexPath:d,parentIsLocalized:f,parentPath:u,parentSchemaPath:p,req:h,siblingData:g,siblingDoc:m,siblingFields:y})=>{let{indexPath:E,path:I,schemaPath:C}=ko({field:s,index:a,parentIndexPath:d,parentPath:u,parentSchemaPath:p}),B=I?I.split("."):[],R=C?C.split("."):[],x=E?E.split("-").filter(Boolean)?.map(Number):[];if(J(s)){if(s.name==="id"){if(s.type==="number"&&typeof g[s.name]=="string"){let Q=g[s.name];g[s.name]=parseFloat(Q)}s.type==="text"&&typeof g[s.name]?.toString=="function"&&typeof g[s.name]!="string"&&(g[s.name]=g[s.name].toString())}switch(s.type){case"array":case"blocks":{(g[s.name]==="0"||g[s.name]===0)&&(g[s.name]=[]);break}case"checkbox":{g[s.name]==="true"&&(g[s.name]=!0),g[s.name]==="false"&&(g[s.name]=!1),g[s.name]===""&&(g[s.name]=!1);break}case"number":{if(typeof g[s.name]=="string"){let T=g[s.name].trim();g[s.name]=T.length===0?null:parseFloat(T)}break}case"point":{Array.isArray(g[s.name])&&(g[s.name]=g[s.name].map((Q,T)=>{if(typeof Q=="string"){let k=g[s.name][T].trim();return k.length===0?null:parseFloat(k)}return Q}));break}case"relationship":case"upload":{(g[s.name]===""||g[s.name]==="none"||g[s.name]==="null"||g[s.name]===null)&&(s.hasMany===!0?g[s.name]=[]:g[s.name]=null);let Q=g[s.name];if(Array.isArray(s.relationTo)){if(Array.isArray(Q)&&Q.forEach((T,D)=>{let k=h.payload.collections?.[T.relationTo]?.config;typeof T.value=="object"&&T.value&&"id"in T.value&&(T.value=T.value.id),k?.fields&&k.fields.find(U=>J(U)&&U.name==="id")?.type==="number"&&(g[s.name][D]={...T,value:parseFloat(T.value)})}),s.hasMany!==!0&&xS(Q)){let T=h.payload.collections?.[Q.relationTo]?.config;typeof Q.value=="object"&&Q.value&&"id"in Q.value&&(Q.value=Q.value.id),T?.fields&&T.fields.find(k=>J(k)&&k.name==="id")?.type==="number"&&(g[s.name]={...Q,value:parseFloat(Q.value)})}}else if(Array.isArray(Q)&&Q.forEach((T,D)=>{let k=Array.isArray(s.relationTo)?void 0:h.payload.collections?.[s.relationTo]?.config;typeof T=="object"&&T&&"id"in T&&(Q[D]=T.id),k?.fields&&k.fields.find(U=>J(U)&&U.name==="id")?.type==="number"&&(g[s.name][D]=parseFloat(T))}),s.hasMany!==!0&&Q){let T=h.payload.collections?.[s.relationTo]?.config;typeof Q=="object"&&Q&&"id"in Q&&(g[s.name]=Q.id),T?.fields&&T.fields.find(k=>J(k)&&k.name==="id")?.type==="number"&&(g[s.name]=parseFloat(Q))}break}case"richText":{if(typeof g[s.name]=="string")try{let Q=JSON.parse(g[s.name]);g[s.name]=Q}catch{}break}default:break}let S={executed:!1,value:void 0};if(typeof g[s.name]>"u"&&(S.value=await GE({field:s,req:h,siblingDoc:m}),S.executed=!0),s.hooks?.beforeValidate)for(let Q of s.hooks.beforeValidate){let T=await Q({blockData:t,collection:r,context:o,data:n,field:s,global:l,indexPath:x,operation:c,originalDoc:i,overrideAccess:A,path:B,previousSiblingDoc:m,previousValue:m[s.name],req:h,schemaPath:R,siblingData:g,siblingFields:y,value:typeof g[s.name]>"u"?S.value:g[s.name]});T!==void 0&&(g[s.name]=T)}s.access&&s.access[c]&&(A||await s.access[c]({id:e,blockData:t,data:n,doc:i,req:h,siblingData:g})||delete g[s.name]),typeof g[s.name]>"u"&&(g[s.name]=S.executed?S.value:await GE({field:s,req:h,siblingDoc:m}))}switch(s.type){case"array":{let S=g[s.name];if(Array.isArray(S)){let Q=[];S.forEach((T,D)=>{Q.push(Ho({id:e,blockData:t,collection:r,context:o,data:n,doc:i,fields:s.fields,global:l,operation:c,overrideAccess:A,parentIndexPath:"",parentIsLocalized:f||s.localized,parentPath:I+"."+D,parentSchemaPath:C,req:h,siblingData:T,siblingDoc:Ai(T,m[s.name])}))}),await Promise.all(Q)}break}case"blocks":{let S=g[s.name];if(Array.isArray(S)){let Q=[];S.forEach((T,D)=>{let k=Ai(T,m[s.name]),P=T.blockType||k.blockType,U=h.payload.blocks[P]??(s.blockReferences??s.blocks).find(_=>typeof _!="string"&&_.slug===P);U&&(T.blockType=P,Q.push(Ho({id:e,blockData:T,collection:r,context:o,data:n,doc:i,fields:U.fields,global:l,operation:c,overrideAccess:A,parentIndexPath:"",parentIsLocalized:f||s.localized,parentPath:I+"."+D,parentSchemaPath:C+"."+U.slug,req:h,siblingData:T,siblingDoc:k})))}),await Promise.all(Q)}break}case"collapsible":case"row":{await Ho({id:e,blockData:t,collection:r,context:o,data:n,doc:i,fields:s.fields,global:l,operation:c,overrideAccess:A,parentIndexPath:E,parentIsLocalized:f,parentPath:u,parentSchemaPath:C,req:h,siblingData:g,siblingDoc:m});break}case"group":{let S=g,Q=m,T=J(s);T&&(typeof g[s.name]!="object"&&(g[s.name]={}),typeof m[s.name]!="object"&&(m[s.name]={}),S=g[s.name],Q=m[s.name]),await Ho({id:e,blockData:t,collection:r,context:o,data:n,doc:i,fields:s.fields,global:l,operation:c,overrideAccess:A,parentIndexPath:T?"":E,parentIsLocalized:f||s.localized,parentPath:T?I:u,parentSchemaPath:C,req:h,siblingData:S,siblingDoc:Q});break}case"richText":{if(!s?.editor)throw new Et(s);if(typeof s?.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");let S=s?.editor;if(S?.hooks?.beforeValidate?.length)for(let Q of S.hooks.beforeValidate){let T=await Q({collection:r,context:o,data:n,field:s,global:l,indexPath:x,operation:c,originalDoc:i,overrideAccess:A,parentIsLocalized:f,path:B,previousSiblingDoc:m,previousValue:g[s.name],req:h,schemaPath:R,siblingData:g,value:g[s.name]});T!==void 0&&(g[s.name]=T)}break}case"tab":{let S,Q,T=yt(s);T?(typeof g[s.name]!="object"&&(g[s.name]={}),typeof m[s.name]!="object"&&(m[s.name]={}),S=g[s.name],Q=m[s.name]):(S=g,Q=m),await Ho({id:e,blockData:t,collection:r,context:o,data:n,doc:i,fields:s.fields,global:l,operation:c,overrideAccess:A,parentIndexPath:T?"":E,parentIsLocalized:f||s.localized,parentPath:T?I:u,parentSchemaPath:C,req:h,siblingData:S,siblingDoc:Q});break}case"tabs":{await Ho({id:e,blockData:t,collection:r,context:o,data:n,doc:i,fields:s.tabs.map(S=>({...S,type:"tab"})),global:l,operation:c,overrideAccess:A,parentIndexPath:E,parentIsLocalized:f,parentPath:I,parentSchemaPath:C,req:h,siblingData:g,siblingDoc:m});break}default:break}};var Ho=async({id:e,blockData:t,collection:r,context:o,data:n,doc:i,fields:s,global:a,operation:l,overrideAccess:c,parentIndexPath:A,parentIsLocalized:d,parentPath:f,parentSchemaPath:u,req:p,siblingData:h,siblingDoc:g})=>{let m=[];s.forEach((y,E)=>{m.push(KD({id:e,blockData:t,collection:r,context:o,data:n,doc:i,field:y,fieldIndex:E,global:a,operation:l,overrideAccess:c,parentIndexPath:A,parentIsLocalized:d,parentPath:f,parentSchemaPath:u,req:p,siblingData:h,siblingDoc:g,siblingFields:s}))}),await Promise.all(m)};var Za=async({id:e,collection:t,context:r,data:o,doc:n,global:i,operation:s,overrideAccess:a,req:l})=>(await Ho({id:e,collection:t,context:r,data:o,doc:n,fields:t?.fields||i?.fields,global:i,operation:s,overrideAccess:a,parentIndexPath:"",parentIsLocalized:!1,parentPath:"",parentSchemaPath:"",req:l,siblingData:o,siblingDoc:n}),o);var ZO=We(kf(),1);import O0 from"fs/promises";function nF(e){return["image/jpeg","image/png","image/gif","image/webp","image/tiff","image/avif"].indexOf(e)>-1}async function Cs({req:e,sharpFile:t,withMetadata:r}){let o=await t.metadata();return r===!0||typeof r=="function"&&await r({metadata:o,req:e})?t.withMetadata():t}var iF=(e,t)=>Math.floor(e/100*t);async function sF({cropData:e,dimensions:t,file:r,heightInPixels:o,req:n,sharp:i,widthInPixels:s,withMetadata:a}){try{let{x:l,y:c}=e,A=r,d=["image/avif","image/gif","image/webp"].includes(A.mimetype),f={};d&&(f.animated=!0);let{height:u,width:p}=t,h=Number(s),g=Number(o);if(!(p!==h||u!==g)){let I=u;if(d){let C=await i(A.tempFilePath||A.data,f).metadata();I=C.pages?C.height:u}return{data:A.data,info:{height:I,size:A.size,width:p}}}let y={height:Number(o),left:iF(l,t.width),top:iF(c,t.height),width:Number(s)},E=i(A.tempFilePath||A.data,f).extract(y);return E=await Cs({req:n,sharpFile:E,withMetadata:a}),await E.toBuffer({resolveWithObject:!0})}catch(l){throw console.error("Error cropping image:",l),l}}var mA=(e,t)=>{try{let r=new URL(e);return t.some(o=>Object.entries(o).every(([n,i])=>{if(!i)return!0;if(n==="protocol")return typeof i=="string"&&r.protocol===`${i}:`;if(n==="pathname"){let s=i.replace(/\*\*/g,".*").replace(/\*/g,"[^/]*").replace(/\/$/,"(/)?");return new RegExp(`^${s}$`).test(r.pathname)}return r[n]===i}))}catch{return!1}};var Ph=We(lF(),1),Lh=We(lO(),1);import{lookup as Bse}from"dns/promises";var cO=e=>{try{if(!e||!Ph.default.isValid(e)||Ph.default.parse(e).range()!=="unicast")return!1}catch{return!1}return!0},Qse=async e=>{try{if(Ph.default.isValid(e))return cO(e);let{address:t}=await Bse(e);return cO(t)}catch{return!1}},bse=e=>(t,r)=>e(t,r),wse=new Lh.Agent().compose(bse),AO=async(...e)=>{let[t,r]=e;try{let o=new URL(t);if(!await Qse(o.hostname))throw new Error(`Blocked unsafe attempt to ${o.toString()}`);return await(0,Lh.fetch)(o,{...r,dispatcher:wse})}catch(o){if(o instanceof Error){if(o.cause instanceof Error&&o.cause.message.includes("unsafe"))throw new Error(o.cause.message);{let n;throw typeof t=="string"?n=t:t instanceof URL?n=t.toString():t instanceof Request&&(n=t.url),new Error(`Failed to fetch from ${n}, ${o.message}`)}}throw o}};var uO=async({data:e,req:t,uploadConfig:r})=>{let{filename:o,url:n}=e;if(typeof n=="string"){let i=n;n.startsWith("http")||(i=`${t.headers.get("origin")||`${t.protocol}://${t.headers.get("host")}`}${n}`);let s=r.externalFileHeaderFilter?r.externalFileHeaderFilter(Object.fromEntries(new Headers(t.headers))):{cookie:t.headers.get("cookie")},a=r.skipSafeFetch===!0?r.skipSafeFetch:Array.isArray(r.skipSafeFetch)&&mA(i,r.skipSafeFetch),l=r.pasteURL&&r.pasteURL.allowList&&mA(i,r.pasteURL.allowList),c;if(a||l?c=await fetch(i,{credentials:"include",headers:s,method:"GET"}):c=await AO(i,{credentials:"include",headers:s,method:"GET"}),!c.ok)throw new F(`Failed to fetch file from ${i}`,c.status);let A=await c.arrayBuffer();return{name:o,data:Buffer.from(A),mimetype:c.headers.get("content-type")||void 0,size:Number(c.headers.get("content-length"))||0}}throw new F("Invalid file url",400)};import fce from"fs/promises";var Sse=new TextDecoder,_e=(e,t=0,r=e.length)=>Sse.decode(e.slice(t,r)),Ml=(e,t=0,r=e.length)=>e.slice(t,r).reduce((o,n)=>o+`0${n.toString(16)}`.slice(-2),""),Ti=(e,t)=>new DataView(e.buffer,e.byteOffset+t),dO=(e,t=0)=>Ti(e,t).getInt16(0,!0),Oh=(e,t=0)=>Ti(e,t).getUint16(0,!1),ur=(e,t=0)=>Ti(e,t).getUint16(0,!0),fO=(e,t=0)=>{let r=Ti(e,t);return r.getUint16(0,!0)+(r.getUint8(2)<<16)},Tse=(e,t=0)=>Ti(e,t).getInt32(0,!0),Qt=(e,t=0)=>Ti(e,t).getUint32(0,!1),$s=(e,t=0)=>Ti(e,t).getUint32(0,!0),F0=(e,t,r)=>Ti(e,t).getBigUint64(0,!r),xse={readUInt16BE:Oh,readUInt16LE:ur,readUInt32BE:Qt,readUInt32LE:$s};function Ar(e,t,r=0,o=!1){let i=`readUInt${t}${o?"BE":"LE"}`;return xse[i](e,r)}function Rse(e,t){if(e.length-t<4)return;let r=Qt(e,t);if(!(e.length-t<r))return{name:_e(e,4+t,8+t),offset:t,size:r}}function to(e,t,r){for(;r<e.length;){let o=Rse(e,r);if(!o)break;if(o.name===t)return o;r+=o.size>0?o.size:8}}var Dse={validate:e=>_e(e,0,2)==="BM",calculate:e=>({height:Math.abs(Tse(e,22)),width:$s(e,18)})},Fse=1,kse=6,Nse=16;function pO(e,t){let r=e[t];return r===0?256:r}function hO(e,t){let r=kse+t*Nse;return{height:pO(e,r+1),width:pO(e,r)}}var CO={validate(e){let t=ur(e,0),r=ur(e,4);return t!==0||r===0?!1:ur(e,2)===Fse},calculate(e){let t=ur(e,4),r=hO(e,0);if(t===1)return r;let o=[];for(let n=0;n<t;n+=1)o.push(hO(e,n));return{width:r.width,height:r.height,images:o}}},vse=2,Pse={validate(e){let t=ur(e,0),r=ur(e,4);return t!==0||r===0?!1:ur(e,2)===vse},calculate:e=>CO.calculate(e)},Lse={validate:e=>$s(e,0)===542327876,calculate:e=>({height:$s(e,12),width:$s(e,16)})},Use=/^GIF8[79]a/,Ose={validate:e=>Use.test(_e(e,0,6)),calculate:e=>({height:ur(e,8),width:ur(e,6)})},Mse={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"},_se={validate(e){if(_e(e,4,8)!=="ftyp")return!1;let r=to(e,"ftyp",0);return r?_e(e,r.offset+8,r.offset+12)in Mse:!1},calculate(e){let t=to(e,"meta",0),r=t&&to(e,"iprp",t.offset+12),o=r&&to(e,"ipco",r.offset+8);if(!o)throw new TypeError("Invalid HEIF, no ipco box found");let n=_e(e,8,12),i=[],s=o.offset+8;for(;s<o.offset+o.size;){let a=to(e,"ispe",s);if(!a)break;let l=Qt(e,a.offset+12),c=Qt(e,a.offset+16),A=to(e,"clap",s),d=l,f=c;if(A&&A.offset<o.offset+o.size){let u=Qt(e,A.offset+12);d=l-u}i.push({height:f,width:d}),s=a.offset+a.size}if(i.length===0)throw new TypeError("Invalid HEIF, no sizes found");return{width:i[0].width,height:i[0].height,type:n,...i.length>1?{images:i}:{}}}},Gse=8,jse=4,Hse=4,Vse={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function qse(e,t){let r=t+Hse;return[_e(e,t,r),Qt(e,r)]}function Yse(e){let t=Vse[e];return{width:t,height:t,type:e}}var Wse={validate:e=>_e(e,0,4)==="icns",calculate(e){let t=e.length,r=Qt(e,jse),o=Gse,n=[];for(;o<r&&o<t;){let i=qse(e,o),s=Yse(i[0]);n.push(s),o+=i[1]}if(n.length===0)throw new TypeError("Invalid ICNS, no sizes found");return{width:n[0].width,height:n[0].height,...n.length>1?{images:n}:{}}}},Jse={validate:e=>Qt(e,0)===4283432785,calculate:e=>({height:Qt(e,12),width:Qt(e,8)})},zse={validate(e){if(_e(e,4,8)!=="jP  ")return!1;let r=to(e,"ftyp",0);return r?_e(e,r.offset+8,r.offset+12)==="jp2 ":!1},calculate(e){let t=to(e,"jp2h",0),r=t&&to(e,"ihdr",t.offset+8);if(r)return{height:Qt(e,r.offset+8),width:Qt(e,r.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}},$se="45786966",Kse=2,D0=6,Zse=2,Xse="4d4d",eae="4949",gO=12,tae=2;function rae(e){return Ml(e,2,6)===$se}function oae(e,t){return{height:Oh(e,t),width:Oh(e,t+2)}}function nae(e,t){let o=D0+8,n=Ar(e,16,o,t);for(let i=0;i<n;i++){let s=o+tae+i*gO,a=s+gO;if(s>e.length)return;let l=e.slice(s,a);if(Ar(l,16,0,t)===274)return Ar(l,16,2,t)!==3||Ar(l,32,4,t)!==1?void 0:Ar(l,16,8,t)}}function iae(e,t){let r=e.slice(Kse,t),o=Ml(r,D0,D0+Zse),n=o===Xse;if(n||o===eae)return nae(r,n)}function sae(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}var aae={validate:e=>Ml(e,0,2)==="ffd8",calculate(e){let t=e.slice(4),r,o;for(;t.length;){let n=Oh(t,0);if(sae(t,n),t[n]!==255){t=t.slice(1);continue}if(rae(t)&&(r=iae(t,n)),o=t[n+1],o===192||o===193||o===194){let i=oae(t,n+5);return r?{height:i.height,orientation:r,width:i.width}:i}t=t.slice(n+2)}throw new TypeError("Invalid JPG, no size found")}},lae=class{constructor(e,t){this.input=e,this.endianness=t,this.byteOffset=2,this.bitOffset=0}getBits(e=1){let t=0,r=0;for(;r<e;){if(this.byteOffset>=this.input.length)throw new Error("Reached end of input");let o=this.input[this.byteOffset],n=8-this.bitOffset,i=Math.min(e-r,n);if(this.endianness==="little-endian"){let s=(1<<i)-1,a=o>>this.bitOffset&s;t|=a<<r}else{let s=(1<<i)-1<<8-this.bitOffset-i,a=(o&s)>>8-this.bitOffset-i;t=t<<i|a}r+=i,this.bitOffset+=i,this.bitOffset===8&&(this.byteOffset++,this.bitOffset=0)}return t}};function IO(e,t){if(t)return 8*(1+e.getBits(5));let r=e.getBits(2),o=[9,13,18,30][r];return 1+e.getBits(o)}function cae(e,t,r,o){if(t&&r===0)return 8*(1+e.getBits(5));if(r===0)return IO(e,!1);let n=[1,1.2,4/3,1.5,16/9,5/4,2];return Math.floor(o*n[r-1])}var BO={validate:e=>Ml(e,0,2)==="ff0a",calculate(e){let t=new lae(e,"little-endian"),r=t.getBits(1)===1,o=IO(t,r),n=t.getBits(3);return{width:cae(t,r,n,o),height:o}}};function Aae(e){let t=to(e,"jxlc",0);if(t)return e.slice(t.offset+8,t.offset+t.size);let r=uae(e);if(r.length>0)return dae(r)}function uae(e){let t=[],r=0;for(;r<e.length;){let o=to(e,"jxlp",r);if(!o)break;t.push(e.slice(o.offset+12,o.offset+o.size)),r=o.offset+o.size}return t}function dae(e){let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t),o=0;for(let n of e)r.set(n,o),o+=n.length;return r}var fae={validate:e=>{if(_e(e,4,8)!=="JXL ")return!1;let r=to(e,"ftyp",0);return r?_e(e,r.offset+8,r.offset+12)==="jxl ":!1},calculate(e){let t=Aae(e);if(t)return BO.calculate(t);throw new Error("No codestream found in JXL container")}},pae={validate:e=>{let t=_e(e,1,7);return["KTX 11","KTX 20"].includes(t)},calculate:e=>{let t=e[5]===49?"ktx":"ktx2",r=t==="ktx"?36:20;return{height:$s(e,r+4),width:$s(e,r),type:t}}},hae=`PNG\r

`,gae="IHDR",mO="CgBI",mae={validate(e){if(hae===_e(e,1,8)){let t=_e(e,12,16);if(t===mO&&(t=_e(e,28,32)),t!==gae)throw new TypeError("Invalid PNG");return!0}return!1},calculate(e){return _e(e,12,16)===mO?{height:Qt(e,36),width:Qt(e,32)}:{height:Qt(e,20),width:Qt(e,16)}}},yO={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},EO={default:e=>{let t=[];for(;e.length>0;){let r=e.shift();if(r[0]!=="#"){t=r.split(" ");break}}if(t.length===2)return{height:Number.parseInt(t[1],10),width:Number.parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{let t={};for(;e.length>0;){let r=e.shift();if(r.length>16||r.charCodeAt(0)>128)continue;let[o,n]=r.split(" ");if(o&&n&&(t[o.toLowerCase()]=Number.parseInt(n,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}},yae={validate:e=>_e(e,0,2)in yO,calculate(e){let t=_e(e,0,2),r=yO[t],o=_e(e,3).split(/[\r\n]+/);return(EO[r]||EO.default)(o)}},Eae={validate:e=>_e(e,0,4)==="8BPS",calculate:e=>({height:Qt(e,14),width:Qt(e,18)})},QO=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,Uh={height:/\sheight=(['"])([^%]+?)\1/,root:QO,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},R0=2.54,bO={in:96,cm:96/R0,em:16,ex:8,m:96/R0*100,mm:96/R0/10,pc:96/72/12,pt:96/72,px:1},Cae=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(bO).join("|")})?$`);function Mh(e){let t=Cae.exec(e);if(t)return Math.round(Number(t[1])*(bO[t[2]]||1))}function Iae(e){let t=e.split(" ");return{height:Mh(t[3]),width:Mh(t[2])}}function Bae(e){let t=e.match(Uh.width),r=e.match(Uh.height),o=e.match(Uh.viewbox);return{height:r&&Mh(r[2]),viewbox:o&&Iae(o[2]),width:t&&Mh(t[2])}}function Qae(e){return{height:e.height,width:e.width}}function bae(e,t){let r=t.width/t.height;return e.width?{height:Math.floor(e.width/r),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*r)}:{height:t.height,width:t.width}}var wae={validate:e=>QO.test(_e(e,0,1e3)),calculate(e){let t=_e(e).match(Uh.root);if(t){let r=Bae(t[0]);if(r.width&&r.height)return Qae(r);if(r.viewbox)return bae(r,r.viewbox)}throw new TypeError("Invalid SVG")}},Sae={validate(e){return ur(e,0)===0&&ur(e,4)===0},calculate(e){return{height:ur(e,14),width:ur(e,12)}}},dr={TAG:{WIDTH:256,HEIGHT:257,COMPRESSION:259},TYPE:{SHORT:3,LONG:4,LONG8:16},ENTRY_SIZE:{STANDARD:12,BIG:20},COUNT_SIZE:{STANDARD:2,BIG:8}};function Tae(e,{isBigEndian:t,isBigTiff:r}){let o=r?Number(F0(e,8,t)):Ar(e,32,4,t),n=r?dr.COUNT_SIZE.BIG:dr.COUNT_SIZE.STANDARD;return e.slice(o+n)}function xae(e,t,r,o){switch(t){case dr.TYPE.SHORT:return Ar(e,16,r,o);case dr.TYPE.LONG:return Ar(e,32,r,o);case dr.TYPE.LONG8:{let n=Number(F0(e,r,o));if(n>Number.MAX_SAFE_INTEGER)throw new TypeError("Value too large");return n}default:return 0}}function Rae(e,t){let r=t?dr.ENTRY_SIZE.BIG:dr.ENTRY_SIZE.STANDARD;if(e.length>r)return e.slice(r)}function Dae(e,{isBigEndian:t,isBigTiff:r}){let o={},n=e;for(;n?.length;){let i=Ar(n,16,0,t),s=Ar(n,16,2,t),a=r?Number(F0(n,4,t)):Ar(n,32,4,t);if(i===0)break;if(a===1&&(s===dr.TYPE.SHORT||s===dr.TYPE.LONG||r&&s===dr.TYPE.LONG8)){let l=r?12:8;o[i]=xae(n,s,l,t)}n=Rae(n,r)}return o}function Fae(e){let t=_e(e,0,2),r=Ar(e,16,2,t==="MM");return{isBigEndian:t==="MM",isBigTiff:r===43}}function kae(e,t){let r=Ar(e,16,4,t),o=Ar(e,16,6,t);if(r!==8||o!==0)throw new TypeError("Invalid BigTIFF header")}var Nae=new Set(["49492a00","4d4d002a","49492b00","4d4d002b"]),vae={validate:e=>{let t=Ml(e,0,4);return Nae.has(t)},calculate(e){let t=Fae(e);t.isBigTiff&&kae(e,t.isBigEndian);let r=Tae(e,t),o=Dae(r,t),n={height:o[dr.TAG.HEIGHT],width:o[dr.TAG.WIDTH],type:t.isBigTiff?"bigtiff":"tiff"};if(o[dr.TAG.COMPRESSION]&&(n.compression=o[dr.TAG.COMPRESSION]),!n.width||!n.height)throw new TypeError("Invalid Tiff. Missing tags");return n}};function Pae(e){return{height:1+fO(e,7),width:1+fO(e,4)}}function Lae(e){return{height:1+((e[4]&15)<<10|e[3]<<2|(e[2]&192)>>6),width:1+((e[2]&63)<<8|e[1])}}function Uae(e){return{height:dO(e,8)&16383,width:dO(e,6)&16383}}var Oae={validate(e){let t=_e(e,0,4)==="RIFF",r=_e(e,8,12)==="WEBP",o=_e(e,12,15)==="VP8";return t&&r&&o},calculate(e){let t=_e(e,12,16),r=e.slice(20,30);if(t==="VP8X"){let n=r[0],i=(n&192)===0,s=(n&1)===0;if(i&&s)return Pae(r);throw new TypeError("Invalid WebP")}if(t==="VP8 "&&r[0]!==47)return Uae(r);let o=Ml(r,3,6);if(t==="VP8L"&&o!=="9d012a")return Lae(r);throw new TypeError("Invalid WebP")}},_h=new Map([["bmp",Dse],["cur",Pse],["dds",Lse],["gif",Ose],["heif",_se],["icns",Wse],["ico",CO],["j2c",Jse],["jp2",zse],["jpg",aae],["jxl",fae],["jxl-stream",BO],["ktx",pae],["png",mae],["pnm",yae],["psd",Eae],["svg",wae],["tga",Sae],["tiff",vae],["webp",Oae]]),Mae=Array.from(_h.keys()),_ae=new Map([[0,"heif"],[56,"psd"],[66,"bmp"],[68,"dds"],[71,"gif"],[73,"tiff"],[77,"tiff"],[82,"webp"],[105,"icns"],[137,"png"],[255,"jpg"]]);function Gae(e){let t=e[0],r=_ae.get(t);return r&&_h.get(r).validate(e)?r:Mae.find(o=>_h.get(o).validate(e))}var jae={disabledTypes:[]};function wO(e){let t=Gae(e);if(typeof t<"u"){if(jae.disabledTypes.indexOf(t)>-1)throw new TypeError(`disabled file type: ${t}`);let r=_h.get(t).calculate(e);if(r!==void 0){if(r.type=r.type??t,r.images&&r.images.length>1){let o=r.images.reduce((n,i)=>i.width*i.height>n.width*n.height?i:n,r.images[0]);r.width=o.width,r.height=o.height}return r}}throw new TypeError(`unsupported file type: ${t}`)}import*as vO from"node:fs";import*as PO from"node:path";var Hae=new TextDecoder,Ge=(e,t=0,r=e.length)=>Hae.decode(e.slice(t,r)),_l=(e,t=0,r=e.length)=>e.slice(t,r).reduce((o,n)=>o+`0${n.toString(16)}`.slice(-2),""),xi=(e,t)=>new DataView(e.buffer,e.byteOffset+t),SO=(e,t=0)=>xi(e,t).getInt16(0,!0),jh=(e,t=0)=>xi(e,t).getUint16(0,!1),pr=(e,t=0)=>xi(e,t).getUint16(0,!0),TO=(e,t=0)=>{let r=xi(e,t);return r.getUint16(0,!0)+(r.getUint8(2)<<16)},Vae=(e,t=0)=>xi(e,t).getInt32(0,!0),bt=(e,t=0)=>xi(e,t).getUint32(0,!1),Ks=(e,t=0)=>xi(e,t).getUint32(0,!0),P0=(e,t,r)=>xi(e,t).getBigUint64(0,!r),qae={readUInt16BE:jh,readUInt16LE:pr,readUInt32BE:bt,readUInt32LE:Ks};function fr(e,t,r=0,o=!1){let i=`readUInt${t}${o?"BE":"LE"}`;return qae[i](e,r)}function Yae(e,t){if(e.length-t<4)return;let r=bt(e,t);if(!(e.length-t<r))return{name:Ge(e,4+t,8+t),offset:t,size:r}}function ro(e,t,r){for(;r<e.length;){let o=Yae(e,r);if(!o)break;if(o.name===t)return o;r+=o.size>0?o.size:8}}var Wae={validate:e=>Ge(e,0,2)==="BM",calculate:e=>({height:Math.abs(Vae(e,22)),width:Ks(e,18)})},Jae=1,zae=6,$ae=16;function xO(e,t){let r=e[t];return r===0?256:r}function RO(e,t){let r=zae+t*$ae;return{height:xO(e,r+1),width:xO(e,r)}}var LO={validate(e){let t=pr(e,0),r=pr(e,4);return t!==0||r===0?!1:pr(e,2)===Jae},calculate(e){let t=pr(e,4),r=RO(e,0);if(t===1)return r;let o=[];for(let n=0;n<t;n+=1)o.push(RO(e,n));return{width:r.width,height:r.height,images:o}}},Kae=2,Zae={validate(e){let t=pr(e,0),r=pr(e,4);return t!==0||r===0?!1:pr(e,2)===Kae},calculate:e=>LO.calculate(e)},Xae={validate:e=>Ks(e,0)===542327876,calculate:e=>({height:Ks(e,12),width:Ks(e,16)})},ele=/^GIF8[79]a/,tle={validate:e=>ele.test(Ge(e,0,6)),calculate:e=>({height:pr(e,8),width:pr(e,6)})},rle={avif:"avif",mif1:"heif",msf1:"heif",heic:"heic",heix:"heic",hevc:"heic",hevx:"heic"},ole={validate(e){if(Ge(e,4,8)!=="ftyp")return!1;let r=ro(e,"ftyp",0);return r?Ge(e,r.offset+8,r.offset+12)in rle:!1},calculate(e){let t=ro(e,"meta",0),r=t&&ro(e,"iprp",t.offset+12),o=r&&ro(e,"ipco",r.offset+8);if(!o)throw new TypeError("Invalid HEIF, no ipco box found");let n=Ge(e,8,12),i=[],s=o.offset+8;for(;s<o.offset+o.size;){let a=ro(e,"ispe",s);if(!a)break;let l=bt(e,a.offset+12),c=bt(e,a.offset+16),A=ro(e,"clap",s),d=l,f=c;if(A&&A.offset<o.offset+o.size){let u=bt(e,A.offset+12);d=l-u}i.push({height:f,width:d}),s=a.offset+a.size}if(i.length===0)throw new TypeError("Invalid HEIF, no sizes found");return{width:i[0].width,height:i[0].height,type:n,...i.length>1?{images:i}:{}}}},nle=8,ile=4,sle=4,ale={ICON:32,"ICN#":32,"icm#":16,icm4:16,icm8:16,"ics#":16,ics4:16,ics8:16,is32:16,s8mk:16,icp4:16,icl4:32,icl8:32,il32:32,l8mk:32,icp5:32,ic11:32,ich4:48,ich8:48,ih32:48,h8mk:48,icp6:64,ic12:32,it32:128,t8mk:128,ic07:128,ic08:256,ic13:256,ic09:512,ic14:512,ic10:1024};function lle(e,t){let r=t+sle;return[Ge(e,t,r),bt(e,r)]}function cle(e){let t=ale[e];return{width:t,height:t,type:e}}var Ale={validate:e=>Ge(e,0,4)==="icns",calculate(e){let t=e.length,r=bt(e,ile),o=nle,n=[];for(;o<r&&o<t;){let i=lle(e,o),s=cle(i[0]);n.push(s),o+=i[1]}if(n.length===0)throw new TypeError("Invalid ICNS, no sizes found");return{width:n[0].width,height:n[0].height,...n.length>1?{images:n}:{}}}},ule={validate:e=>bt(e,0)===4283432785,calculate:e=>({height:bt(e,12),width:bt(e,8)})},dle={validate(e){if(Ge(e,4,8)!=="jP  ")return!1;let r=ro(e,"ftyp",0);return r?Ge(e,r.offset+8,r.offset+12)==="jp2 ":!1},calculate(e){let t=ro(e,"jp2h",0),r=t&&ro(e,"ihdr",t.offset+8);if(r)return{height:bt(e,r.offset+8),width:bt(e,r.offset+12)};throw new TypeError("Unsupported JPEG 2000 format")}},fle="45786966",ple=2,N0=6,hle=2,gle="4d4d",mle="4949",DO=12,yle=2;function Ele(e){return _l(e,2,6)===fle}function Cle(e,t){return{height:jh(e,t),width:jh(e,t+2)}}function Ile(e,t){let o=N0+8,n=fr(e,16,o,t);for(let i=0;i<n;i++){let s=o+yle+i*DO,a=s+DO;if(s>e.length)return;let l=e.slice(s,a);if(fr(l,16,0,t)===274)return fr(l,16,2,t)!==3||fr(l,32,4,t)!==1?void 0:fr(l,16,8,t)}}function Ble(e,t){let r=e.slice(ple,t),o=_l(r,N0,N0+hle),n=o===gle;if(n||o===mle)return Ile(r,n)}function Qle(e,t){if(t>e.length)throw new TypeError("Corrupt JPG, exceeded buffer limits")}var ble={validate:e=>_l(e,0,2)==="ffd8",calculate(e){let t=e.slice(4),r,o;for(;t.length;){let n=jh(t,0);if(Qle(t,n),t[n]!==255){t=t.slice(1);continue}if(Ele(t)&&(r=Ble(t,n)),o=t[n+1],o===192||o===193||o===194){let i=Cle(t,n+5);return r?{height:i.height,orientation:r,width:i.width}:i}t=t.slice(n+2)}throw new TypeError("Invalid JPG, no size found")}},wle=class{constructor(e,t){this.input=e,this.endianness=t,this.byteOffset=2,this.bitOffset=0}getBits(e=1){let t=0,r=0;for(;r<e;){if(this.byteOffset>=this.input.length)throw new Error("Reached end of input");let o=this.input[this.byteOffset],n=8-this.bitOffset,i=Math.min(e-r,n);if(this.endianness==="little-endian"){let s=(1<<i)-1,a=o>>this.bitOffset&s;t|=a<<r}else{let s=(1<<i)-1<<8-this.bitOffset-i,a=(o&s)>>8-this.bitOffset-i;t=t<<i|a}r+=i,this.bitOffset+=i,this.bitOffset===8&&(this.byteOffset++,this.bitOffset=0)}return t}};function UO(e,t){if(t)return 8*(1+e.getBits(5));let r=e.getBits(2),o=[9,13,18,30][r];return 1+e.getBits(o)}function Sle(e,t,r,o){if(t&&r===0)return 8*(1+e.getBits(5));if(r===0)return UO(e,!1);let n=[1,1.2,4/3,1.5,16/9,5/4,2];return Math.floor(o*n[r-1])}var OO={validate:e=>_l(e,0,2)==="ff0a",calculate(e){let t=new wle(e,"little-endian"),r=t.getBits(1)===1,o=UO(t,r),n=t.getBits(3);return{width:Sle(t,r,n,o),height:o}}};function Tle(e){let t=ro(e,"jxlc",0);if(t)return e.slice(t.offset+8,t.offset+t.size);let r=xle(e);if(r.length>0)return Rle(r)}function xle(e){let t=[],r=0;for(;r<e.length;){let o=ro(e,"jxlp",r);if(!o)break;t.push(e.slice(o.offset+12,o.offset+o.size)),r=o.offset+o.size}return t}function Rle(e){let t=e.reduce((n,i)=>n+i.length,0),r=new Uint8Array(t),o=0;for(let n of e)r.set(n,o),o+=n.length;return r}var Dle={validate:e=>{if(Ge(e,4,8)!=="JXL ")return!1;let r=ro(e,"ftyp",0);return r?Ge(e,r.offset+8,r.offset+12)==="jxl ":!1},calculate(e){let t=Tle(e);if(t)return OO.calculate(t);throw new Error("No codestream found in JXL container")}},Fle={validate:e=>{let t=Ge(e,1,7);return["KTX 11","KTX 20"].includes(t)},calculate:e=>{let t=e[5]===49?"ktx":"ktx2",r=t==="ktx"?36:20;return{height:Ks(e,r+4),width:Ks(e,r),type:t}}},kle=`PNG\r

`,Nle="IHDR",FO="CgBI",vle={validate(e){if(kle===Ge(e,1,8)){let t=Ge(e,12,16);if(t===FO&&(t=Ge(e,28,32)),t!==Nle)throw new TypeError("Invalid PNG");return!0}return!1},calculate(e){return Ge(e,12,16)===FO?{height:bt(e,36),width:bt(e,32)}:{height:bt(e,20),width:bt(e,16)}}},kO={P1:"pbm/ascii",P2:"pgm/ascii",P3:"ppm/ascii",P4:"pbm",P5:"pgm",P6:"ppm",P7:"pam",PF:"pfm"},NO={default:e=>{let t=[];for(;e.length>0;){let r=e.shift();if(r[0]!=="#"){t=r.split(" ");break}}if(t.length===2)return{height:Number.parseInt(t[1],10),width:Number.parseInt(t[0],10)};throw new TypeError("Invalid PNM")},pam:e=>{let t={};for(;e.length>0;){let r=e.shift();if(r.length>16||r.charCodeAt(0)>128)continue;let[o,n]=r.split(" ");if(o&&n&&(t[o.toLowerCase()]=Number.parseInt(n,10)),t.height&&t.width)break}if(t.height&&t.width)return{height:t.height,width:t.width};throw new TypeError("Invalid PAM")}},Ple={validate:e=>Ge(e,0,2)in kO,calculate(e){let t=Ge(e,0,2),r=kO[t],o=Ge(e,3).split(/[\r\n]+/);return(NO[r]||NO.default)(o)}},Lle={validate:e=>Ge(e,0,4)==="8BPS",calculate:e=>({height:bt(e,14),width:bt(e,18)})},MO=/<svg\s([^>"']|"[^"]*"|'[^']*')*>/,Gh={height:/\sheight=(['"])([^%]+?)\1/,root:MO,viewbox:/\sviewBox=(['"])(.+?)\1/i,width:/\swidth=(['"])([^%]+?)\1/},k0=2.54,_O={in:96,cm:96/k0,em:16,ex:8,m:96/k0*100,mm:96/k0/10,pc:96/72/12,pt:96/72,px:1},Ule=new RegExp(`^([0-9.]+(?:e\\d+)?)(${Object.keys(_O).join("|")})?$`);function Hh(e){let t=Ule.exec(e);if(t)return Math.round(Number(t[1])*(_O[t[2]]||1))}function Ole(e){let t=e.split(" ");return{height:Hh(t[3]),width:Hh(t[2])}}function Mle(e){let t=e.match(Gh.width),r=e.match(Gh.height),o=e.match(Gh.viewbox);return{height:r&&Hh(r[2]),viewbox:o&&Ole(o[2]),width:t&&Hh(t[2])}}function _le(e){return{height:e.height,width:e.width}}function Gle(e,t){let r=t.width/t.height;return e.width?{height:Math.floor(e.width/r),width:e.width}:e.height?{height:e.height,width:Math.floor(e.height*r)}:{height:t.height,width:t.width}}var jle={validate:e=>MO.test(Ge(e,0,1e3)),calculate(e){let t=Ge(e).match(Gh.root);if(t){let r=Mle(t[0]);if(r.width&&r.height)return _le(r);if(r.viewbox)return Gle(r,r.viewbox)}throw new TypeError("Invalid SVG")}},Hle={validate(e){return pr(e,0)===0&&pr(e,4)===0},calculate(e){return{height:pr(e,14),width:pr(e,12)}}},hr={TAG:{WIDTH:256,HEIGHT:257,COMPRESSION:259},TYPE:{SHORT:3,LONG:4,LONG8:16},ENTRY_SIZE:{STANDARD:12,BIG:20},COUNT_SIZE:{STANDARD:2,BIG:8}};function Vle(e,{isBigEndian:t,isBigTiff:r}){let o=r?Number(P0(e,8,t)):fr(e,32,4,t),n=r?hr.COUNT_SIZE.BIG:hr.COUNT_SIZE.STANDARD;return e.slice(o+n)}function qle(e,t,r,o){switch(t){case hr.TYPE.SHORT:return fr(e,16,r,o);case hr.TYPE.LONG:return fr(e,32,r,o);case hr.TYPE.LONG8:{let n=Number(P0(e,r,o));if(n>Number.MAX_SAFE_INTEGER)throw new TypeError("Value too large");return n}default:return 0}}function Yle(e,t){let r=t?hr.ENTRY_SIZE.BIG:hr.ENTRY_SIZE.STANDARD;if(e.length>r)return e.slice(r)}function Wle(e,{isBigEndian:t,isBigTiff:r}){let o={},n=e;for(;n?.length;){let i=fr(n,16,0,t),s=fr(n,16,2,t),a=r?Number(P0(n,4,t)):fr(n,32,4,t);if(i===0)break;if(a===1&&(s===hr.TYPE.SHORT||s===hr.TYPE.LONG||r&&s===hr.TYPE.LONG8)){let l=r?12:8;o[i]=qle(n,s,l,t)}n=Yle(n,r)}return o}function Jle(e){let t=Ge(e,0,2),r=fr(e,16,2,t==="MM");return{isBigEndian:t==="MM",isBigTiff:r===43}}function zle(e,t){let r=fr(e,16,4,t),o=fr(e,16,6,t);if(r!==8||o!==0)throw new TypeError("Invalid BigTIFF header")}var $le=new Set(["49492a00","4d4d002a","49492b00","4d4d002b"]),Kle={validate:e=>{let t=_l(e,0,4);return $le.has(t)},calculate(e){let t=Jle(e);t.isBigTiff&&zle(e,t.isBigEndian);let r=Vle(e,t),o=Wle(r,t),n={height:o[hr.TAG.HEIGHT],width:o[hr.TAG.WIDTH],type:t.isBigTiff?"bigtiff":"tiff"};if(o[hr.TAG.COMPRESSION]&&(n.compression=o[hr.TAG.COMPRESSION]),!n.width||!n.height)throw new TypeError("Invalid Tiff. Missing tags");return n}};function Zle(e){return{height:1+TO(e,7),width:1+TO(e,4)}}function Xle(e){return{height:1+((e[4]&15)<<10|e[3]<<2|(e[2]&192)>>6),width:1+((e[2]&63)<<8|e[1])}}function ece(e){return{height:SO(e,8)&16383,width:SO(e,6)&16383}}var tce={validate(e){let t=Ge(e,0,4)==="RIFF",r=Ge(e,8,12)==="WEBP",o=Ge(e,12,15)==="VP8";return t&&r&&o},calculate(e){let t=Ge(e,12,16),r=e.slice(20,30);if(t==="VP8X"){let n=r[0],i=(n&192)===0,s=(n&1)===0;if(i&&s)return Zle(r);throw new TypeError("Invalid WebP")}if(t==="VP8 "&&r[0]!==47)return ece(r);let o=_l(r,3,6);if(t==="VP8L"&&o!=="9d012a")return Xle(r);throw new TypeError("Invalid WebP")}},Vh=new Map([["bmp",Wae],["cur",Zae],["dds",Xae],["gif",tle],["heif",ole],["icns",Ale],["ico",LO],["j2c",ule],["jp2",dle],["jpg",ble],["jxl",Dle],["jxl-stream",OO],["ktx",Fle],["png",vle],["pnm",Ple],["psd",Lle],["svg",jle],["tga",Hle],["tiff",Kle],["webp",tce]]),rce=Array.from(Vh.keys()),oce=new Map([[0,"heif"],[56,"psd"],[66,"bmp"],[68,"dds"],[71,"gif"],[73,"tiff"],[77,"tiff"],[82,"webp"],[105,"icns"],[137,"png"],[255,"jpg"]]);function nce(e){let t=e[0],r=oce.get(t);return r&&Vh.get(r).validate(e)?r:rce.find(o=>Vh.get(o).validate(e))}var ice={disabledTypes:[]};function sce(e){let t=nce(e);if(typeof t<"u"){if(ice.disabledTypes.indexOf(t)>-1)throw new TypeError(`disabled file type: ${t}`);let r=Vh.get(t).calculate(e);if(r!==void 0){if(r.type=r.type??t,r.images&&r.images.length>1){let o=r.images.reduce((n,i)=>i.width*i.height>n.width*n.height?i:n,r.images[0]);r.width=o.width,r.height=o.height}return r}}throw new TypeError(`unsupported file type: ${t}`)}var ace=512*1024,v0=[],lce=100;var GO=async()=>{let t=v0.splice(0,lce).map(async({filePath:r,resolve:o,reject:n})=>{let i;try{i=await vO.promises.open(PO.resolve(r),"r")}catch(s){return n(s)}try{let{size:s}=await i.stat();if(s<=0)throw new Error("Empty file");let a=Math.min(s,ace),l=new Uint8Array(a);await i.read(l,0,a,0),o(sce(l))}catch(s){n(s)}finally{await i.close()}});await Promise.allSettled(t),v0.length&&setTimeout(GO,100)},L0=async e=>new Promise((t,r)=>{v0.push({filePath:e,resolve:t,reject:r}),GO()});import U0 from"fs/promises";import cce from"node:os";import jO from"node:path";async function Ace(e,t){try{return await t(e)}finally{await U0.rm(e,{force:!0,maxRetries:2,recursive:!0})}}var HO=async(e,t={})=>{let r=await uce(t);return Ace(r,e)};async function uce(e){if(e.name){if(e.extension!==void 0&&e.extension!==null)throw new Error("The `name` and `extension` options are mutually exclusive");return jO.join(await dce(),e.name)}return await VO()+(e.extension===void 0||e.extension===null?"":"."+e.extension.replace(/^\./,""))}async function dce({prefix:e=""}={}){let t=await VO(e);return await U0.mkdir(t),t}async function VO(e=""){let t=await U0.realpath(cce.tmpdir());return jO.join(t,e+ei())}async function qO(e){return e?.tempFilePath?L0(e.tempFilePath):e?.mimetype==="image/tiff"?await HO(async r=>(await fce.writeFile(r,e.data),L0(r)),{extension:"tiff"}):wO(e.data)}var WO=We(kf(),1);var YO=async({collectionSlug:e,filename:t,req:r})=>!!await r.payload.db.findOne({collection:e,req:r,where:{filename:{equals:t}}});import pce from"fs/promises";var Zs=async e=>{try{return await pce.stat(e),!0}catch{return!1}};var hce=e=>{let t=e.split(".").pop(),r=(0,WO.default)(e.substring(0,e.lastIndexOf("."))||e),o=r,n=/(.*)-(\d+)$/,i=r.match(n);if(i===null)o+="-1";else{let s=i[1],a=i[2],l=Number(a)+1;o=`${s}-${l}`}return`${o}.${t}`};async function JO({collectionSlug:e,desiredFilename:t,req:r,staticPath:o}){let n=t;for(;await YO({collectionSlug:e,filename:n,path:o,req:r})||await Zs(`${o}/${n}`);)n=hce(n);return n}var $O=We(kf(),1);import gce from"fs/promises";var mce=e=>{let t=e.split(".").pop();return{name:(0,$O.default)(e.substring(0,e.lastIndexOf("."))||e),ext:t}},yce=({extension:e,height:t,outputImageName:r,width:o})=>`${r}-${o}x${t}.${e}`,zO=({name:e,filename:t=null,filesize:r=null,height:o=null,mimeType:n=null,sizesToSave:i=[],width:s=null})=>({sizeData:{[e]:{filename:t,filesize:r,height:o,mimeType:n,width:s}},sizesToSave:i}),Ece=({dimensions:e,hasFocalPoint:t,imageResizeConfig:r})=>{let{fit:o,withoutEnlargement:n,withoutReduction:i}=r,s=r.width,a=r.height;if(a&&s){let d=e.width<s&&e.height<a;if(n===void 0&&d)return"omit"}if(n===void 0&&(!s||!a)&&(s&&e.width<s||a&&e.height<a))return"omit";let l=e.width<s||e.height<a;if(o==="contain"||o==="inside"||!Z(a)&&!Z(s))return"resize";let c=s/a;return e.width/e.height===c||n&&l||i&&!l?"resize":t?"resizeWithFocalPoint":"resize"},Cce=e=>e.withoutReduction?{...e,fit:e?.fit||"contain",position:e?.position||"left top"}:e;function qh(e){return e?.pages?e.height/e.pages:e.height}async function KO({config:e,dimensions:t,file:r,mimeType:o,req:n,savedFilename:i,sharp:s,staticPath:a,uploadEdits:l,withMetadata:c}){let{focalPoint:A=!0,imageSizes:d}=e.upload,f=l?.focalPoint?{x:Z(l.focalPoint.x)?Math.round(l.focalPoint.x):50,y:Z(l.focalPoint.y)?Math.round(l.focalPoint.y):50}:void 0,u={...A&&f&&{focalPoint:f},sizeData:{},sizesToSave:[]};if(!d||!s)return u;let p=["image/avif","image/gif","image/webp"].includes(r.mimetype),h={};p&&(h.animated=!0);let g=s(r.tempFilePath||r.data,h).rotate(),m=await g.metadata(),y={...t};[5,6,7,8].includes(m.orientation)&&(y={...t,height:t.width,width:t.height});let E={height:qh(m),width:m.width};return(await Promise.all(d.map(async C=>{C=Cce(C);let B=Ece({dimensions:t,hasFocalPoint:!!f,imageResizeConfig:C});if(B==="omit")return zO({name:C.name});let R=g.clone(),x=R;if(B==="resizeWithFocalPoint"){let{height:he,width:G}=C,M=y.width/y.height;he&&!G&&(G=Math.round(he*M)),G&&!he&&(he=Math.round(G/M)),he||(he=E.height),G||(G=E.width);let $=G/he<M;x=R.resize({fastShrinkOnLoad:!1,height:$?he:void 0,width:$?void 0:G});let te=await Cs({req:n,sharpFile:x,withMetadata:c}),{info:et}=await te.toBuffer({resolveWithObject:!0});E.height=qh({...m,height:et.height}),E.width=et.width;let vt=G/2,Tt=E.width*(f.x/100),qi=Tt+vt,ed=Tt-vt;qi>E.width&&(ed=E.width-G),ed<0&&(ed=0);let Kb=he/2,Zb=E.height*(f.y/100),vH=Zb+Kb,td=Zb-Kb;vH>E.height&&(td=E.height-he),td<0&&(td=0),x=x.extract({height:he,left:Math.floor(ed),top:Math.floor(td),width:G})}else x=R.resize(C);C.formatOptions&&(x=x.toFormat(C.formatOptions.format,C.formatOptions.options)),C.trimOptions&&(x=x.trim(C.trimOptions));let S=await Cs({req:n,sharpFile:x,withMetadata:c}),{data:Q,info:T}=await S.toBuffer({resolveWithObject:!0}),D=mce(i);n.payloadUploadSizes&&(n.payloadUploadSizes[C.name]=Q);let k=await hA(Q),P=C.generateImageName?C.generateImageName({extension:k?.ext||D.ext,height:qh({...m,height:T.height}),originalName:D.name,sizeName:C.name,width:T.width}):yce({extension:k?.ext||D.ext,height:qh({...m,height:T.height}),outputImageName:D.name,width:T.width}),U=`${a}/${P}`;if(await Zs(U))try{await gce.unlink(U)}catch{}let{height:_,size:Y,width:ce}=T;return zO({name:C.name,filename:P,filesize:Y,height:p&&m.pages?_/m.pages:_,mimeType:k?.mime||o,sizesToSave:[{buffer:Q,path:U}],width:ce})}))).reduce((C,B)=>(Object.assign(C.sizeData,B.sizeData),C.sizesToSave.push(...B.sizesToSave),C),{...u})}function Yh(e){return["image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/avif","image/jxl"].indexOf(e)>-1}var Gl=async({collection:{config:e},data:t,isDuplicating:r,operation:o,originalDoc:n,overwriteExistingFiles:i,req:s,throwOnMissingFile:a})=>{if(!e.upload)return{data:t,files:[]};let{sharp:l}=s.payload.config,c=s.file,A=Ice({data:t,isDuplicating:r,operation:o,originalDoc:n,req:s}),{constructorOptions:d={},disableLocalStorage:f,focalPoint:u=!0,formatOptions:p,imageSizes:h,resizeOptions:g,staticDir:m,trimOptions:y,withMetadata:E}=e.upload,I=m,C=r?n:t;if(!c&&A&&C){let{filename:T,url:D}=C;if(T&&(T.includes("../")||T.includes("..\\")))throw new ae(s.t);try{if(D&&D.startsWith("/")&&!f){let k=`${I}/${T}`;c=await Es(k),i=!0}else T&&D&&(c=await uO({data:C,req:s,uploadConfig:e.upload}),i=!0)}catch(k){throw new ma(s.t,k instanceof Error?k.message:void 0)}}if(r&&(i=!1),!c){if(a)throw new Qa(s.t);return{data:t,files:[]}}f||await O0.mkdir(I,{recursive:!0});let B=t,R=[],x={},S=["image/avif","image/gif","image/webp"].includes(c.mimetype),Q=typeof A=="object"&&"crop"in A?A.crop:void 0;try{let T=nF(c.mimetype),D,k,P,U,_,Y,ce=T&&!!(g||p||y||d||c.tempFilePath),he={...d};if(S&&(he.animated=!0),l&&(S||ce)&&(c.tempFilePath?k=l(c.tempFilePath,he).rotate():k=l(c.data,he).rotate(),ce&&(g&&(k=k.resize(g)),p&&(k=k.toFormat(p.format,p.options)),y&&(k=k.trim(y)))),(T||Yh(c.mimetype))&&(P=await qO(c),x.width=P.width,x.height=P.height),k){let V=await k.metadata();k=await Cs({req:s,sharpFile:k,withMetadata:E}),U=await k.toBuffer({resolveWithObject:!0}),{ext:_,mime:Y}=await hA(U.data),x.width=U.info.width,x.height=U.info.height,x.filesize=U.info.size,V.pages&&(x.height=U.info.height/V.pages,x.filesize=U.data.length)}else Y=c.mimetype,x.filesize=c.size,c.name.includes(".")?_=c.name.split(".").pop()?.split("?")[0]:_="";Y==="application/xml"&&_==="svg"&&(Y="image/svg+xml"),x.mimeType=Y,D=`${(0,ZO.default)(c.name.substring(0,c.name.lastIndexOf("."))||c.name)}${_?`.${_}`:""}`,i||(D=await JO({collectionSlug:e.slug,desiredFilename:D,req:s,staticPath:I})),x.filename=D;let M=c;if(Q&&l){let{data:V,info:$}=await sF({cropData:Q,dimensions:P,file:c,heightInPixels:A.heightInPixels,req:s,sharp:l,widthInPixels:A.widthInPixels,withMetadata:E});if(g&&!g.withoutEnlargement){let te=await l(V).resize({fit:g?.fit||"cover",height:g?.height,position:g?.position||"center",width:g?.width}).toBuffer({resolveWithObject:!0});if(R.push({buffer:te.data,path:`${I}/${D}`}),M={...M,data:te.data,size:te.info.size},x.width=te.info.width,x.height=te.info.height,S){let et=await k.metadata();x.height=et.pages?te.info.height/et.pages:te.info.height}x.filesize=te.info.size}else{if(R.push({buffer:V,path:`${I}/${D}`}),M={...c,data:V,size:$.size},x.width=$.width,x.height=$.height,S){let te=await k.metadata();x.height=te.pages?$.height/te.pages:$.height}x.filesize=$.size}c.tempFilePath?await O0.writeFile(c.tempFilePath,V):s.file=M}else R.push({buffer:U?.data||c.data,path:`${I}/${D}`}),(U?.data||c.data.length>0)&&(c.tempFilePath?await O0.writeFile(c.tempFilePath,U?.data||c.data):s.file={...c,data:U?.data||c.data,size:U?.info.size});if(T&&(Array.isArray(h)||u!==!1)){s.payloadUploadSizes={};let{focalPoint:V,sizeData:$,sizesToSave:te}=await KO({config:e,dimensions:Q?{...P,height:x.height,width:x.width}:P,file:M,mimeType:x.mimeType,req:s,savedFilename:D||c.name,sharp:l,staticPath:I,uploadEdits:A,withMetadata:E});x.sizes=$,x.focalX=V?.x,x.focalY=V?.y,R.push(...te)}}catch(T){throw s.payload.logger.error(T),new Zn(s.t)}return B={...B,...x},{data:B,files:R}};function Ice(e){let{data:t,isDuplicating:r,operation:o,originalDoc:n,req:i}=e,s=i.query?.uploadEdits&&typeof i.query.uploadEdits=="object"?i.query.uploadEdits:{};if(s.focalPoint)return s;let a=t,l=n;if(l&&"focalX"in l&&"focalY"in l){if(a.focalX===l.focalX&&a.focalY===l.focalY)return;r&&(s.focalPoint={x:a?.focalX||l.focalX,y:a?.focalY||l.focalX})}return a?.focalX&&a?.focalY?(s.focalPoint={x:a.focalX,y:a.focalY},s):(o==="create"&&(s.focalPoint={x:50,y:50}),s)}import Bce from"fs/promises";async function M0(e,t){return Promise.all(e.map(t))}var jl=async({collectionConfig:e,config:t,req:r})=>{if(t.upload?.useTempFiles&&e.upload){let{file:o}=r;await M0([{file:o}],async({file:i})=>{i?.tempFilePath&&await Bce.unlink(i.tempFilePath)})}};import Qce from"fs/promises";import{Readable as bce}from"stream";var XO=async(e,t)=>{let r=e,o=new bce;return o._read=()=>{o.push(r),r=null},await Qce.writeFile(t,e)};var Wh=async(e,t,r)=>{try{await Promise.all(t.map(async({buffer:o,path:n})=>{await XO(o,n)}))}catch(o){throw e.logger.error(o),new Zn(r.t)}};import{deepMergeSimple as wce}from"@payloadcms/translations/utilities";var _0=({fields:e,path:t,versions:r})=>{let o=[];if(r){o.push("version");let n=e.find(i=>i.name==="version");n&&n.type==="group"&&(e=n.flattenedFields)}for(let n of t.split(".")){let i=e.find(s=>s.name===n);if(i&&(o.push(n),i.type==="relationship"||i.type==="upload"))return o.join(".")}return o.join(".")},eM=({fields:e})=>{let t=[];for(let r of e)if("virtual"in r&&typeof r.virtual=="string")t.push(r.virtual);else if(r.type==="group"||r.type==="tab"){let o=eM({fields:r.flattenedFields});for(let n of o)t.push(n)}return t},tM=({fields:e,selectValue:t,topLevelFields:r,versions:o})=>{let n=[];if(t===!0)for(let i of eM({fields:e}))n.push(_0({fields:r,path:i,versions:o}));else for(let i in t){let s=e.find(a=>a.name===i);if(s){if("virtual"in s&&typeof s.virtual=="string")n.push(_0({fields:r,path:s.virtual,versions:o}));else if(s.type==="group"||s.type==="tab")for(let a of tM({fields:s.flattenedFields,selectValue:t[i],topLevelFields:r,versions:o}))n.push(_0({fields:r,path:a,versions:o}))}}return n},je=({fields:e,forceSelect:t,select:r,versions:o})=>{if(!r||co(r)==="exclude")return r;if(t&&(r=wce(r,t)),r){let i=tM({fields:e,selectValue:r,topLevelFields:e,versions:o??!1});for(let s of i){let a=r,l=s.split(".");for(let c=0;c<l.length;c++){let A=l.length-1===c,d=l[c];A?a[d]=!0:d in a||(a[d]={},a=a[d])}}}return r};var gr=({select:e})=>e?co(e)==="include"?{parent:!0,version:e}:{version:e}:void 0;var G0=async({id:e,collection:t,global:r,max:o,payload:n,req:i})=>{let s=t?"collection":"global",a=t?t.slug:r?.slug;try{let l={},c;if(t?(l.parent={equals:e},[c]=(await n.db.findVersions({collection:t.slug,limit:1,pagination:!1,req:i,skip:o,sort:"-updatedAt",where:l})).docs):r&&([c]=(await n.db.findGlobalVersions({global:r.slug,limit:1,pagination:!1,req:i,skip:o,sort:"-updatedAt",where:l})).docs),c?.updatedAt){let A={updatedAt:{less_than_equal:c.updatedAt}};t&&(A.parent={equals:e});let d={req:i,where:A};r?d.globalSlug=a:d.collection=a,await n.db.deleteVersions(d)}}catch(l){n.logger.error(l),n.logger.error(`There was an error cleaning up old versions for the ${s} ${a}`)}};var Xs=async({id:e,autosave:t,collection:r,docWithLocales:o,draft:n,global:i,payload:s,publishSpecificLocale:a,req:l,select:c,snapshot:A})=>{let d,f=!0,u=new Date().toISOString(),p=He(o);n&&(p._status="draft"),r?.timestamps&&n&&(p.updatedAt=u),p._id&&delete p._id;try{if(t){let m,y={limit:1,pagination:!1,req:l,sort:"-updatedAt"};r?{docs:m}=await s.db.findVersions({...y,collection:r.slug,limit:1,pagination:!1,req:l,where:{parent:{equals:e}}}):{docs:m}=await s.db.findGlobalVersions({...y,global:i.slug,limit:1,pagination:!1,req:l});let[E]=m;if(E&&"autosave"in E&&E.autosave===!0){f=!1;let I={createdAt:new Date(E.createdAt).toISOString(),latest:!0,parent:e,updatedAt:u,version:{...p}},C={id:E.id,req:l,versionData:I};r?d=await s.db.updateVersion({...C,collection:r.slug,req:l}):d=await s.db.updateGlobalVersion({...C,global:i.slug,req:l})}}if(f){let m={autosave:!!t,collectionSlug:void 0,createdAt:u,globalSlug:void 0,parent:r?e:void 0,publishedLocale:a||void 0,req:l,select:gr({select:c}),updatedAt:u,versionData:p};if(r&&(m.collectionSlug=r.slug,d=await s.db.createVersion(m)),i&&(m.globalSlug=i.slug,d=await s.db.createGlobalVersion(m)),a&&A){let y=He(A);y._id&&delete y._id,y._status="draft";let E=new Date().toISOString(),I={...m,createdAt:E,returning:!1,snapshot:!0,updatedAt:E,versionData:y};r&&await s.db.createVersion(I),i&&await s.db.createGlobalVersion(I)}}}catch(m){let y;r&&(y=`There was an error while saving a version for the ${typeof r.labels.singular=="string"?r.labels.singular:r.slug} with ID ${e}.`),i&&(y=`There was an error while saving a version for the global ${typeof i.label=="string"?i.label:i.slug}.`),s.logger.error({err:m,msg:y});return}let h=r?r.versions.maxPerDoc:i.versions.max;f&&h>0&&await G0({id:e,collection:r,global:i,max:h,payload:s,req:l});let g=d.version;return g=Or(g),g.id=d.parent,g};var ea=async e=>{let t=e;try{let r=!t.disableTransaction&&await de(t.req);if(za({authOptions:t.collection.config.auth,collectionSlug:t.collection.config.slug,data:t.data,operation:"create",req:t.req}),t.collection.config.hooks.beforeOperation?.length)for(let U of t.collection.config.hooks.beforeOperation)t=await U({args:t,collection:t.collection.config,context:t.req.context,operation:"create",req:t.req})||t;let{autosave:o=!1,collection:{config:n},collection:i,depth:s,disableVerificationEmail:a,draft:l=!1,duplicateFromID:c,overrideAccess:A,overwriteExistingFiles:d=!1,populate:f,req:{fallbackLocale:u,locale:p,payload:h,payload:{config:g}},req:m,select:y,showHiddenFields:E}=t,{data:I}=t,C=!!(l&&n.versions.drafts),B={},R={};if(c){let U=await _D({id:c,collectionConfig:n,draftArg:C,overrideAccess:A,req:m,shouldSaveDraft:C});R=U.duplicatedFromDoc,B=U.duplicatedFromDocWithLocales}A||await oe({data:I,req:m},n.access.create);let{data:x,files:S}=await Gl({collection:i,config:g,data:I,isDuplicating:!!c,operation:"create",originalDoc:R,overwriteExistingFiles:d,req:m,throwOnMissingFile:!C&&i.config.upload.filesRequiredOnCreate!==!1});if(I=x,I=await Za({collection:n,context:m.context,data:I,doc:R,global:null,operation:"create",overrideAccess:A,req:m}),n.hooks.beforeValidate?.length)for(let U of n.hooks.beforeValidate)I=await U({collection:n,context:m.context,data:I,operation:"create",originalDoc:R,req:m})||I;if(n.hooks?.beforeChange?.length)for(let U of n.hooks.beforeChange)I=await U({collection:n,context:m.context,data:I,operation:"create",originalDoc:R,req:m})||I;let Q=await di({collection:n,context:m.context,data:I,doc:R,docWithLocales:B,global:null,operation:"create",overrideAccess:A,req:m,skipValidation:C&&n.versions.drafts&&!n.versions.drafts.validate});n.upload.disableLocalStorage||await Wh(h,S,m);let T,D=je({fields:n.flattenedFields,forceSelect:n.forceSelect,select:y});n.auth&&!n.auth.disableLocalStrategy?(n.auth.verify&&(Q._verified=!!Q._verified||!1,Q._verificationToken=Sce.randomBytes(20).toString("hex")),T=await UD({collection:n,doc:Q,password:I.password,payload:m.payload,req:m,select:D})):T=await h.db.create({collection:n.slug,data:Q,req:m,select:D});let k=T._verificationToken,P=Or(T);if(n.versions&&await Xs({id:P.id,autosave:o,collection:n,docWithLocales:P,payload:h,req:m}),n.auth&&n.auth.verify&&P.email&&await LD({collection:{config:n},config:h.config,disableEmail:a,email:h.email,req:m,token:k,user:P}),P=await be({collection:n,context:m.context,depth:s,doc:P,draft:l,fallbackLocale:u,global:null,locale:p,overrideAccess:A,populate:f,req:m,select:D,showHiddenFields:E}),n.hooks?.afterRead?.length)for(let U of n.hooks.afterRead)P=await U({collection:n,context:m.context,doc:P,req:m})||P;if(P=await Go({collection:n,context:m.context,data:I,doc:P,global:null,operation:"create",previousDoc:{},req:m}),n.hooks?.afterChange?.length)for(let U of n.hooks.afterChange)P=await U({collection:n,context:m.context,data:I,doc:P,operation:"create",previousDoc:{},req:t.req})||P;return P=await Je({args:t,collection:n,operation:"create",result:P}),await jl({collectionConfig:n,config:g,req:m}),r&&await pe(m),P}catch(r){throw await H(t.req),r}};async function rM(e,t){let{collection:r,data:o,depth:n,disableTransaction:i,disableVerificationEmail:s,draft:a,duplicateFromID:l,file:c,filePath:A,overrideAccess:d=!0,overwriteExistingFiles:f=!1,populate:u,select:p,showHiddenFields:h}=t,g=e.collections[r];if(!g)throw new F(`The collection with slug ${String(r)} can't be found. Create Operation.`);let m=await W(t,e);return m.file=c??await Es(A),ea({collection:g,data:He(o),depth:n,disableTransaction:i,disableVerificationEmail:s,draft:a,duplicateFromID:l,overrideAccess:d,overwriteExistingFiles:f,populate:u,req:m,select:p,showHiddenFields:h})}import{en as Tce}from"@payloadcms/translations/languages/en";var Hl=class extends F{constructor(t){super(t?t("error:unauthorized"):Tce.translations.error.unauthorized,N.UNAUTHORIZED)}};async function oM(e){let{key:t,req:{payload:r},req:o,user:n}=e;if(!n)throw new Hl(o.t);let i={and:[{key:{equals:t}},{"user.value":{equals:n.id}},{"user.relationTo":{equals:n.collection}}]},s=await r.db.deleteOne({collection:oo,req:o,where:i});if(s)return s;throw new Ke(o.t)}var nM=async e=>{let t;try{t=await e.json?.()}catch{t={}}let r=e;t&&(r.data=t,r.json=()=>Promise.resolve(t));let o=await oM({key:r.routeParams?.key,req:r,user:r.user});return Response.json({...o,message:r.t("general:deletedSuccessfully")},{status:N.OK})};async function iM(e){let{key:t,req:{payload:r},req:o,user:n}=e;if(!n)return null;let i={and:[{key:{equals:t}},{"user.value":{equals:n.id}},{"user.relationTo":{equals:n.collection}}]},{docs:s}=await r.db.find({collection:oo,limit:1,pagination:!1,req:o,sort:"-updatedAt",where:i});return s?.[0]||null}var sM=async e=>{let t;try{t=await e.json?.()}catch{t={}}let r=e;t&&(r.data=t,r.json=()=>Promise.resolve(t));let o=await iM({key:r.routeParams?.key,req:r,user:r.user});return Response.json({...o||{message:r.t("general:notFound"),value:null}},{status:N.OK})};async function aM(e){let{key:t,req:{payload:r},req:o,user:n,value:i}=e;if(!n)throw new Hl(o.t);let s={and:[{key:{equals:t}},{"user.value":{equals:n.id}},{"user.relationTo":{equals:n.collection}}]},a={key:t,user:{relationTo:n.collection,value:n.id},value:i};return await r.db.upsert({collection:oo,data:a,req:o,where:s})}var lM=async e=>{let t;try{t=await e.json?.()}catch{t={}}let r=e;t&&(r.data=t,r.json=()=>Promise.resolve(t));let o=await aM({key:r.routeParams?.key,req:r,user:r?.user,value:r.data?.value||r.data});return Response.json({doc:o,message:r.t("general:updatedSuccessfully")},{status:N.OK})};var cM=({req:e})=>e.user?{"user.value":{equals:e?.user?.id}}:!1,oo="payload-preferences",AM=e=>({slug:oo,access:{delete:cM,read:cM},admin:{hidden:!0},endpoints:[{handler:sM,method:"get",path:"/:key"},{handler:nM,method:"delete",path:"/:key"},{handler:lM,method:"post",path:"/:key"}],fields:[{name:"user",type:"relationship",hooks:{beforeValidate:[({req:t})=>t?.user?{relationTo:t?.user.collection,value:t?.user.id}:null]},index:!0,relationTo:e.collections.filter(t=>t.auth).map(t=>t.slug),required:!0},{name:"key",type:"text",index:!0},{name:"value",type:"json",validate:t=>{if(t)try{JSON.parse(JSON.stringify(t))}catch{return"Invalid JSON"}return!0}}],lockDocuments:!1});var Jh=async({collectionConfig:e,ids:t,payload:r,req:o})=>{e.auth?await r.db.deleteMany({collection:oo,req:o,where:{or:[{and:[{"user.value":{in:t}},{"user.relationTo":{equals:e.slug}}]},{key:{in:t.map(n=>`collection-${e.slug}-${n}`)}}]}}):await r.db.deleteMany({collection:oo,req:o,where:{key:{in:t.map(n=>`collection-${e.slug}-${n}`)}}})};import uM from"fs/promises";var Vl=async({collectionConfig:e,doc:t,files:r=[],overrideDelete:o,req:n})=>{if(e.upload&&(o||r.length>0)){let{staticDir:i}=e.upload,s=`${i}/${t.filename}`;try{await Zs(s)&&await uM.unlink(s)}catch{throw new Xi(n.t)}if(t.sizes){let a=Object.values(t.sizes);for(let l of a){let c=`${i}/${l.filename}`;try{await Zs(c)&&await uM.unlink(c)}catch{throw new Xi(n.t)}}}}};var nt=({req:{user:e}})=>!!e;var no="payload-locked-documents",dM=e=>({slug:no,access:{create:nt,delete:nt,read:nt,update:nt},admin:{hidden:!0},fields:[{name:"document",type:"relationship",index:!0,maxDepth:0,relationTo:[...e.collections.map(t=>t.slug)]},{name:"globalSlug",type:"text",index:!0},{name:"user",type:"relationship",maxDepth:1,relationTo:e.collections.filter(t=>t.auth).map(t=>t.slug),required:!0}],lockDocuments:!1});var Ri=async({id:e,collectionSlug:t,globalSlug:r,lockDurationDefault:o=300,lockErrorMessage:n,overrideLock:i=!0,req:s})=>{let{payload:a}=s,l=t?a.collections?.[t]?.config?.lockDocuments:a.config?.globals?.find(d=>d.slug===r)?.lockDocuments,c=l!==!1,A={};if(t)A={and:[{"document.relationTo":{equals:t}},{"document.value":{equals:e}}]};else if(r)A={globalSlug:{equals:r}};else throw new Error("Either collectionSlug or globalSlug must be provided.");if(c){if(!i){let d=t?`Document with ID ${e} is currently locked by another user and cannot be modified.`:`Global document with slug "${r}" is currently locked by another user and cannot be modified.`,f=n||d,p=(await a.db.find({collection:no,limit:1,pagination:!1,sort:"-updatedAt",where:A}))?.docs[0];if(p){let h=new Date(p?.updatedAt).getTime(),g=new Date().getTime(),y=(typeof l=="object"?l.duration:o)*1e3,E=s.user?.id;if(p.user?.value!==E&&g-h<=y)throw new Ca(f)}}await a.db.deleteMany({collection:no,req:a.db.name==="mongoose"?void 0:s,where:A})}};var pu=async({id:e,slug:t,payload:r,req:o})=>{try{await r.db.deleteVersions({collection:t,req:o,where:{parent:{equals:e}}})}catch(n){r.logger.error({err:n,msg:`There was an error removing versions for the deleted ${t} document with ID ${e}.`})}};var Di=class extends Error{args;constructor(t){super(t.message),this.args=t}},Fi=class extends Error{args;constructor(t){super(t.message),this.args=t}},ki=class extends Error{args;constructor(t){super(`Job ${t.job.id} was cancelled`),this.args=t}};async function ql(e){let t=await hu(e);if(t)return t[0]}async function hu({id:e,data:t,depth:r,disableTransaction:o,limit:n,req:i,returning:s,sort:a,where:l}){let c=e?1:n,A=e?{id:{equals:e}}:l;if(r||i.payload.config?.jobs?.runHooks){let p=await i.payload.update({id:e,collection:wt,data:t,depth:r,disableTransaction:o,limit:c,req:i,where:A});return s===!1||!p?null:p.docs}let d={transactionID:i.payload.db.name!=="mongoose"?await i.payload.db.beginTransaction():void 0},f=e?{id:e,data:t,req:d,returning:s}:{data:t,limit:c,req:d,returning:s,sort:a,where:A},u=await i.payload.db.updateJobs(f);return i.payload.db.name!=="mongoose"&&d.transactionID&&await i.payload.db.commitTransaction(d.transactionID),s===!1||!u?.length?null:u.map(p=>Yl({config:i.payload.config,doc:p}))}function fM(e,t){return async r=>{let o=await ql({id:e.id,data:r,depth:t.payload.config.jobs.depth,disableTransaction:!0,req:t});if(!o)return e;for(let n in o)if(n==="log")for(let i of o?.log??[])(!e.log||!e.log.some(s=>s.id===i.id))&&(e.log??=[]).push(i);else e[n]=o[n];if(o?.error?.cancelled)throw new ki({job:e});return o}}import{pathToFileURL as xce}from"url";async function zh(path){let runner,[runnerPath,runnerImportName]=path.split("#"),runnerModule;try{runnerModule=typeof v=="function"?await eval(`require('${runnerPath.replaceAll("\\","/")}')`):await eval(`import('${xce(runnerPath).href}')`)}catch(e){throw new Error(`Error importing job queue handler module for path ${path}. This is an advanced feature that may require a sophisticated build pipeline, especially when using it in production or within Next.js, e.g. by calling opening the /api/payload-jobs/run endpoint. You will have to transpile the handler files separately and ensure they are available in the same location when the job is run. If you're using an endpoint to execute your jobs, it's recommended to define your handlers as functions directly in your Payload Config, or use import paths handlers outside of Next.js. Import Error: 
${e instanceof Error?e.message:"Unknown error"}`)}return runnerImportName&&runnerModule[runnerImportName]&&(runner=runnerModule[runnerImportName]),!runner&&runnerModule.default&&(runner=runnerModule.default),runner||(runner=runnerModule),runner}async function pM(e){if(!e)throw new Error("Task config is required to get the task handler");return typeof e.handler=="function"?e.handler:await zh(e.handler)}var j0=We(Sa(),1);function $h({retriesConfig:e,totalTried:t}){let r=new Date;if(typeof e=="object"&&e.backoff){if(e.backoff.type==="fixed")r=e.backoff.delay?new Date(new Date().getTime()+e.backoff.delay):new Date;else if(e.backoff.type==="exponential"){let o=e.backoff.delay?e.backoff.delay:0;r=new Date(new Date().getTime()+Math.pow(2,t)*o)}}return r}function Kh({job:e,retriesConfig:t}){let r=typeof t=="object"?t.attempts:t;if(r!=null&&e.totalTried>=r)return{hasFinalError:!0,maxWorkflowRetries:r};if(!t)return{hasFinalError:!1,maxWorkflowRetries:void 0,waitUntil:void 0};let o=$h({retriesConfig:t,totalTried:e.totalTried??0});return{hasFinalError:!1,maxWorkflowRetries:r,waitUntil:o}}var Rce=j0.default.default||j0.default;async function hM({error:e,req:t,updateJob:r}){let{executedAt:o,input:n,job:i,output:s,parent:a,retriesConfig:l,taskConfig:c,taskID:A,taskSlug:d,taskStatus:f,workflowConfig:u}=e.args;c?.onFail&&await c.onFail();let p={name:e.name,cancelled:!!("cancelled"in e&&e.cancelled),message:e.message,stack:e.stack},h=new Date;(i.log??=[]).push({id:new Rce().toHexString(),completedAt:h.toISOString(),error:p,executedAt:o.toISOString(),input:n,output:s??{},parent:t.payload.config.jobs.addParentToTaskLog?a:void 0,state:"failed",taskID:A,taskSlug:d}),i.waitUntil&&new Date(i.waitUntil)<h&&delete i.waitUntil;let g=0;if(l?.attempts===void 0||l?.attempts===null?u.retries!==void 0&&u.retries!==null?g=typeof u.retries=="object"?typeof u.retries.attempts=="number"?u.retries.attempts:0:u.retries:g=0:g=l.attempts,!f?.complete&&(f?.totalTried??0)>=g)return await r({error:p,hasError:!0,log:i.log,processing:!1,totalTried:(i.totalTried??0)+1,waitUntil:i.waitUntil}),t.payload.logger.error({err:e,job:i,msg:`Error running task ${A}. Attempt ${i.totalTried} - max retries reached`,taskSlug:d}),{hasFinalError:!0};let m=$h({retriesConfig:l,totalTried:f?.totalTried??0});(!i.waitUntil||m>new Date(i.waitUntil))&&(i.waitUntil=m.toISOString());let{hasFinalError:y,maxWorkflowRetries:E,waitUntil:I}=Kh({job:i,retriesConfig:u.retries});return t.payload.logger.error({err:e,job:i,msg:`Error running task ${A}. Attempt ${i.totalTried+1}${E!==void 0?"/"+(E+1):""}`,taskSlug:d}),I&&(!i.waitUntil||I>new Date(i.waitUntil))&&(i.waitUntil=I.toISOString()),await r({error:y?p:void 0,hasError:y,log:i.log,processing:!1,totalTried:(i.totalTried??0)+1,waitUntil:i.waitUntil}),{hasFinalError:y}}async function Zh({error:e,req:t,updateJob:r}){let{job:o,workflowConfig:n}=e.args,i={name:e.name,cancelled:!!("cancelled"in e&&e.cancelled),message:e.message,stack:e.stack},{hasFinalError:s,maxWorkflowRetries:a,waitUntil:l}=Kh({job:o,retriesConfig:n.retries});s||(o.waitUntil&&new Date(o.waitUntil)<new Date&&delete o.waitUntil,l&&(!o.waitUntil||l>new Date(o.waitUntil))&&(o.waitUntil=l.toISOString()));let c=o.workflowSlug||`Task: ${o.taskSlug}`;return t.payload.logger.error({err:e,msg:`Error running job ${c} id: ${o.id} attempt ${o.totalTried+1}${a!==void 0?"/"+(a+1):""}`}),await r({error:i,hasError:s,log:o.log,processing:!1,totalTried:(o.totalTried??0)+1,waitUntil:o.waitUntil}),{hasFinalError:s}}var H0=We(Sa(),1);var Dce=H0.default.default||H0.default,Ni=(e,t,r,o,n,i)=>{let s=r.payload.config.jobs,a=l=>async(c,{input:A,retries:d,task:f})=>{let u=new Date,p;if(!o&&(p=s.tasks?.length&&s.tasks.find(B=>B.slug===l),!p))throw new Error(`Task ${l} not found in workflow ${e.workflowSlug}`);let h=d==null||d==null?{}:typeof d=="number"?{attempts:d}:d,m={...p?typeof p.retries=="number"?{attempts:p.retries}:p.retries:{},...h},y=e?.taskStatus?.[l]?e.taskStatus[l][c]:null;if(y&&y.complete===!0){let B=!0;if(m?.shouldRestore===!1?B=!1:typeof m?.shouldRestore=="function"&&(B=await m.shouldRestore({input:A,job:e,req:r,taskStatus:y})),B)return y.output}let E=o?f:await pM(p);if(!E||typeof E!="function")throw new Di({executedAt:u,input:A,job:e,message:o?`Inline task with ID ${c} does not have a valid handler.`:`Task with slug ${l} in workflow ${e.workflowSlug} does not have a valid handler.`,parent:i,retriesConfig:m,taskConfig:p,taskID:c,taskSlug:l,taskStatus:y,workflowConfig:t});let I,C={};try{I=await E({inlineTask:Ni(e,t,r,!0,n,{taskID:c,taskSlug:l}),input:A,job:e,req:r,tasks:Ni(e,t,r,!1,n,{taskID:c,taskSlug:l})})}catch(B){throw new Di({executedAt:u,input:A,job:e,message:B.message||"Task handler threw an error",output:C,parent:i,retriesConfig:m,taskConfig:p,taskID:c,taskSlug:l,taskStatus:y,workflowConfig:t})}if(I.state==="failed")throw new Di({executedAt:u,input:A,job:e,message:I.errorMessage??"Task handler returned a failed state",output:C,parent:i,retriesConfig:m,taskConfig:p,taskID:c,taskSlug:l,taskStatus:y,workflowConfig:t});return C=I.output,p?.onSuccess&&await p.onSuccess(),(e.log??=[]).push({id:new Dce().toHexString(),completedAt:new Date().toISOString(),executedAt:u.toISOString(),input:A,output:C,parent:s.addParentToTaskLog?i:void 0,state:"succeeded",taskID:c,taskSlug:l}),await n({log:e.log}),C};if(o)return a("inline");{let l={};for(let c of s.tasks??[])l[c.slug]=a(c.slug);return l}};var gM=async({job:e,req:t,updateJob:r,workflowConfig:o,workflowHandler:n})=>{try{await n({inlineTask:Ni(e,o,t,!0,r),job:e,req:t,tasks:Ni(e,o,t,!1,r)})}catch(i){if(i instanceof ki)throw i;if(i instanceof Di){let{hasFinalError:a}=await hM({error:i,req:t,updateJob:r});return{status:a?"error-reached-max-retries":"error"}}let{hasFinalError:s}=await Zh({error:i instanceof Fi?i:new Fi({job:e,message:typeof i=="object"&&i&&"message"in i?i.message:"An unhandled error occurred",workflowConfig:o}),req:t,updateJob:r});return{status:s?"error-reached-max-retries":"error"}}return await r({completedAt:new Date().toISOString(),log:e.log,processing:!1,totalTried:(e.totalTried??0)+1}),{status:"success"}};var V0=async({job:e,req:t,updateJob:r,workflowConfig:o,workflowHandler:n})=>{let i=[];for(let c of n){if("task"in c){if(e?.taskStatus?.[c.task]?.[c.id]?.complete)continue}else if(e?.taskStatus?.inline?.[c.id]?.complete)continue;c.condition&&!c.condition({job:e})||i.push(c)}let s=Ni(e,o,t,!1,r),a=Ni(e,o,t,!0,r);try{await Promise.all(i.map(async c=>{"task"in c?await s[c.task](c.id,{input:c.input?c.input({job:e}):{},retries:c.retries}):await a(c.id,{retries:c.retries,task:c.inlineTask})}))}catch(c){let{hasFinalError:A}=await Zh({error:c instanceof Fi?c:new Fi({job:e,message:typeof c=="object"&&c&&"message"in c?c.message:"An unhandled error occurred",workflowConfig:o}),req:t,updateJob:r});return{status:A?"error-reached-max-retries":"error"}}let l=!1;for(let[c,A]of Object.entries(e.taskStatus))for(let[d,f]of Object.entries(A))if(f.complete&&n.find(p=>"task"in p?p.task===c&&p.id===d:p.id===d&&c==="inline")?.completesJob){l=!0;break}return l?(await r({completedAt:new Date().toISOString(),processing:!1,totalTried:(e.totalTried??0)+1}),{status:"success"}):await V0({job:e,req:t,updateJob:r,workflowConfig:o,workflowHandler:n})};var gu=async e=>{let{id:t,allQueues:r=!1,limit:o=10,overrideAccess:n,processingOrder:i,queue:s="default",req:a,req:{payload:l,payload:{config:{jobs:c}}},sequential:A,where:d}=e;if(!n&&!await(c?.access?.run??(()=>!0))({req:a}))throw new ae(a.t);let f=[{completedAt:{exists:!1}},{hasError:{not_equals:!0}},{processing:{equals:!1}},{or:[{waitUntil:{exists:!1}},{waitUntil:{less_than:new Date().toISOString()}}]}];r!==!0&&f.push({queue:{equals:s??"default"}}),d&&f.push(d);let u=[];if(t){let C=await ql({id:t,data:{processing:!0},depth:c.depth,disableTransaction:!0,req:a,returning:!0});C&&(u=[C])}else{let C=l.collections[wt]?.config.defaultSort??"createdAt",B=c.processingOrder;typeof B=="function"?C=await B(e):typeof B=="object"&&!Array.isArray(B)?!r&&s&&B.queues&&B.queues[s]?C=B.queues[s]:B.default&&(C=B.default):typeof B=="string"&&(C=B);let R=await hu({data:{processing:!0},depth:c.depth,disableTransaction:!0,limit:o,req:a,returning:!0,sort:i??C,where:{and:f}});R&&(u=R)}let{existingJobs:p,newJobs:h}=u.reduce((C,B)=>(B.totalTried>0?C.existingJobs.push(B):C.newJobs.push(B),C),{existingJobs:[],newJobs:[]});if(!u.length)return{noJobsRemaining:!0,remainingJobsFromQueried:0};l.logger.info({msg:`Running ${u.length} jobs.`,new:h?.length,retrying:p?.length});let g=[],m=async C=>{if(!C.workflowSlug&&!C.taskSlug)throw new Error("Job must have either a workflowSlug or a taskSlug");let B=AA(a,"transactionID"),R=C.workflowSlug&&c.workflows?.length?c.workflows.find(({slug:x})=>x===C.workflowSlug):{slug:"singleTask",handler:async({job:x,tasks:S})=>{await S[x.taskSlug]("1",{input:x.input})}};if(!R)return{id:C.id,result:{status:"error"}};try{let x=fM(C,B),S;if(typeof R.handler=="function"||typeof R.handler=="object"&&Array.isArray(R.handler))S=R.handler;else if(S=await zh(R.handler),!S){let Q=C.workflowSlug||`Task: ${C.taskSlug}`,T=`Can't find runner while importing with the path ${R.handler} in job type ${Q}.`;return l.logger.error(T),await x({error:{error:T},hasError:!0,processing:!1}),{id:C.id,result:{status:"error-reached-max-retries"}}}if(typeof S=="function"){let Q=await gM({job:C,req:B,updateJob:x,workflowConfig:R,workflowHandler:S});return Q.status==="success"&&g.push(C.id),{id:C.id,result:Q}}else{let Q=await V0({job:C,req:B,updateJob:x,workflowConfig:R,workflowHandler:S});return Q.status==="success"&&g.push(C.id),{id:C.id,result:Q}}}catch(x){if(x instanceof ki)return{id:C.id,result:{status:"error-reached-max-retries"}};throw x}},y=[];if(A)for(let C of u){let B=await m(C);B&&y.push(B)}else{let C=u.map(m);y=await Promise.all(C)}if(c.deleteJobOnComplete&&g.length)try{c.runHooks?await l.delete({collection:wt,depth:0,disableTransaction:!0,where:{id:{in:g}}}):await l.db.deleteMany({collection:wt,where:{id:{in:g}}})}catch(C){l.logger.error({err:C,msg:`Failed to delete jobs ${g.join(", ")} on complete`})}let E=y.reduce((C,B)=>(B!==null&&(C[B.id]=B.result),C),{}),I=0;for(let C in E)E[C]?.status==="error"&&I++;return{jobStatus:E,remainingJobsFromQueried:I}};var Fce=e=>!!(e.jobs?.tasks?.length||e.jobs?.workflows?.length),mM={handler:async e=>{if(!Fce(e.payload.config))return Response.json({message:"No jobs to run."},{status:200});if(!await(e.payload.config.jobs?.access?.run??(()=>!0))({req:e}))return Response.json({message:e.i18n.t("error:unauthorized")},{status:401});let{allQueues:o,limit:n,queue:i}=e.query,s={queue:i,req:e,overrideAccess:!0};typeof n<"u"&&(s.limit=Number(n)),o&&!(typeof o=="string"&&o==="false")&&(s.allQueues=!0);let a=!1,l=0;try{let c=await gu(s);a=!!c.noJobsRemaining,l=c.remainingJobsFromQueried}catch(c){return e.payload.logger.error({err:c,msg:"There was an error running jobs:",queue:s.queue}),Response.json({message:e.i18n.t("error:unknown"),noJobsRemaining:!0,remainingJobsFromQueried:l},{status:500})}return Response.json({message:e.i18n.t("general:success"),noJobsRemaining:a,remainingJobsFromQueried:l},{status:200})},method:"get",path:"/run"};var yM=({jobLog:e})=>{let t={};if(!e||!Array.isArray(e))return t;for(let r of e)if(t[r.taskSlug]||(t[r.taskSlug]={}),!t[r.taskSlug]?.[r.taskID])t[r.taskSlug][r.taskID]={complete:r.state==="succeeded",input:r.input,output:r.output,taskSlug:r.taskSlug,totalTried:1};else{let o=t[r.taskSlug][r.taskID];o.totalTried+=1,r.state==="succeeded"&&(o.complete=!0,o.output=r.output,o.input=r.input,o.taskSlug=r.taskSlug),t[r.taskSlug][r.taskID]=o}return t};var wt="payload-jobs",EM=e=>{let t=new Set,r=new Set(["inline"]);e.jobs?.workflows?.length&&e.jobs?.workflows.forEach(i=>{t.add(i.slug)}),e.jobs?.tasks?.length&&e.jobs.tasks.forEach(i=>{if(t.has(i.slug))throw new Error(`Task slug "${i.slug}" is already used by a workflow. No tasks are allowed to have the same slug as a workflow.`);r.add(i.slug)});let o=[{name:"executedAt",type:"date",required:!0},{name:"completedAt",type:"date",required:!0},{name:"taskSlug",type:"select",options:[...r],required:!0},{name:"taskID",type:"text",required:!0},{name:"input",type:"json"},{name:"output",type:"json"},{name:"state",type:"radio",options:["failed","succeeded"],required:!0},{name:"error",type:"json",admin:{condition:(i,s)=>s.state==="failed"},required:!0}];return e?.jobs?.addParentToTaskLog&&o.push({name:"parent",type:"group",fields:[{name:"taskSlug",type:"select",options:[...r]},{name:"taskID",type:"text"}]}),{slug:wt,admin:{group:"System",hidden:!0},endpoints:[mM],fields:[{name:"input",type:"json",admin:{description:"Input data provided to the job"}},{name:"taskStatus",type:"json",virtual:!0},{type:"tabs",tabs:[{fields:[{name:"completedAt",type:"date",index:!0},{name:"totalTried",type:"number",defaultValue:0,index:!0},{name:"hasError",type:"checkbox",admin:{description:"If hasError is true this job will not be retried"},defaultValue:!1,index:!0},{name:"error",type:"json",admin:{condition:i=>i.hasError,description:"If hasError is true, this is the error that caused it"}},{name:"log",type:"array",admin:{description:"Task execution log"},fields:o}],label:"Status"}]},...t.size>0?[{name:"workflowSlug",type:"select",admin:{position:"sidebar"},index:!0,options:[...t]}]:[],{name:"taskSlug",type:"select",admin:{position:"sidebar"},index:!0,options:[...r],required:!1},{name:"queue",type:"text",admin:{position:"sidebar"},defaultValue:"default",index:!0},{name:"waitUntil",type:"date",index:!0},{name:"processing",type:"checkbox",admin:{position:"sidebar"},defaultValue:!1,index:!0}],hooks:{afterRead:[({doc:i,req:s})=>Yl({config:s.payload.config,doc:i})],beforeChange:[({data:i,originalDoc:s})=>(s?.error?.cancelled&&(i.processing=!1,i.hasError=!0,delete i.completedAt,delete i.waitUntil),i)]},lockDocuments:!1}};function Yl({config:e,doc:t}){return t.taskStatus=yM({jobLog:t.log||[]}),t.input=t.input||{},t.taskStatus=t.taskStatus||{},t}var Xh=async({id:e,slug:t,payload:r,req:o})=>{try{await r.db.deleteMany({collection:wt,req:o,where:{and:[{completedAt:{exists:!1}},{processing:{equals:!1}},{"input.doc.value":{equals:e}},{"input.doc.relationTo":{equals:t}},{taskSlug:{equals:"schedulePublish"}}]}})}catch(n){r.logger.error({err:n,msg:`There was an error deleting scheduled publish jobs from the queue for ${t} document with ID ${e}.`})}};var mu=async e=>{let t=e;try{let r=!t.disableTransaction&&await de(t.req);if(t.collection.config.hooks?.beforeOperation?.length)for(let x of t.collection.config.hooks.beforeOperation)t=await x({args:t,collection:t.collection.config,context:t.req.context,operation:"delete",req:t.req})||t;let{collection:{config:o},depth:n,overrideAccess:i,overrideLock:s,populate:a,req:{fallbackLocale:l,locale:c,payload:{config:A},payload:d},req:f,select:u,showHiddenFields:p,where:h}=t;if(!h)throw new F("Missing 'where' query of documents to delete.",N.BAD_REQUEST);let g;i||(g=await oe({req:f},o.access.delete)),await Ye({collectionConfig:o,overrideAccess:i,req:f,where:h});let m=Ae(h,g);zt({fields:o.flattenedFields,payload:d,where:m});let y=je({fields:o.flattenedFields,forceSelect:o.forceSelect,select:u}),{docs:E}=await d.db.find({collection:o.slug,locale:c,req:f,select:y,where:m}),I=[],C=E.map(async x=>{let S,{id:Q}=x;try{if(await Ri({id:Q,collectionSlug:o.slug,lockErrorMessage:`Document with ID ${Q} is currently locked and cannot be deleted.`,overrideLock:s,req:f}),o.hooks?.beforeDelete?.length)for(let T of o.hooks.beforeDelete)await T({id:Q,collection:o,context:f.context,req:f});if(await Vl({collectionConfig:o,config:A,doc:x,overrideDelete:!0,req:f}),o.versions&&await pu({id:Q,slug:o.slug,payload:d,req:f}),o.versions?.drafts&&o.versions.drafts.schedulePublish&&await Xh({id:Q,slug:o.slug,payload:d,req:f}),await d.db.deleteOne({collection:o.slug,req:f,returning:!1,where:{id:{equals:Q}}}),S=await be({collection:o,context:f.context,depth:n,doc:S||x,draft:void 0,fallbackLocale:l,global:null,locale:c,overrideAccess:i,populate:a,req:f,select:y,showHiddenFields:p}),o.hooks?.afterRead?.length)for(let T of o.hooks.afterRead)S=await T({collection:o,context:f.context,doc:S||x,req:f})||S;if(o.hooks?.afterDelete?.length)for(let T of o.hooks.afterDelete)S=await T({id:Q,collection:o,context:f.context,doc:S,req:f})||S;return S}catch(T){I.push({id:x.id,message:T instanceof Error?T.message:"Unknown error"})}return null}),B=await Promise.all(C);await Jh({collectionConfig:o,ids:E.map(({id:x})=>x),payload:d,req:f});let R={docs:B.filter(Boolean),errors:I};return R=await Je({args:t,collection:o,operation:"delete",result:R}),r&&await pe(f),R}catch(r){throw await H(t.req),r}};var yu=async e=>{let t=e;try{let r=!t.disableTransaction&&await de(t.req);if(t.collection.config.hooks?.beforeOperation?.length)for(let C of t.collection.config.hooks.beforeOperation)t=await C({args:t,collection:t.collection.config,context:t.req.context,operation:"delete",req:t.req})||t;let{id:o,collection:{config:n},depth:i,overrideAccess:s,overrideLock:a,populate:l,req:{fallbackLocale:c,locale:A,payload:{config:d},payload:f},req:u,select:p,showHiddenFields:h}=t,g=s?!0:await oe({id:o,req:u},n.access.delete),m=Vr(g);if(n.hooks?.beforeDelete?.length)for(let C of n.hooks.beforeDelete)await C({id:o,collection:n,context:u.context,req:u});let y=await u.payload.db.findOne({collection:n.slug,locale:u.locale,req:u,where:Ae({id:{equals:o}},g)});if(!y&&!m)throw new Ke(u.t);if(!y&&m)throw new ae(u.t);await Ri({id:o,collectionSlug:n.slug,lockErrorMessage:`Document with ID ${o} is currently locked and cannot be deleted.`,overrideLock:a,req:u}),await Vl({collectionConfig:n,config:d,doc:y,overrideDelete:!0,req:u}),n.versions&&await pu({id:o,slug:n.slug,payload:f,req:u}),n.versions?.drafts&&n.versions.drafts.schedulePublish&&await Xh({id:o,slug:n.slug,payload:f,req:u});let E=je({fields:n.flattenedFields,forceSelect:n.forceSelect,select:p}),I=await u.payload.db.deleteOne({collection:n.slug,req:u,select:E,where:{id:{equals:o}}});if(await Jh({collectionConfig:n,ids:[o],payload:f,req:u}),I=await be({collection:n,context:u.context,depth:i,doc:I,draft:void 0,fallbackLocale:c,global:null,locale:A,overrideAccess:s,populate:l,req:u,select:E,showHiddenFields:h}),n.hooks?.afterRead?.length)for(let C of n.hooks.afterRead)I=await C({collection:n,context:u.context,doc:I,req:u})||I;if(n.hooks?.afterDelete?.length)for(let C of n.hooks.afterDelete)I=await C({id:o,collection:n,context:u.context,doc:I,req:u})||I;return I=await Je({args:t,collection:n,operation:"deleteByID",result:I}),r&&await pe(u),I}catch(r){throw await H(t.req),r}};async function CM(e,t){let{id:r,collection:o,depth:n,disableTransaction:i,overrideAccess:s=!0,overrideLock:a,populate:l,select:c,showHiddenFields:A,where:d}=t,f=e.collections[o];if(!f)throw new F(`The collection with slug ${String(o)} can't be found. Delete Operation.`);let u={id:r,collection:f,depth:n,disableTransaction:i,overrideAccess:s,overrideLock:a,populate:l,req:await W(t,e),select:c,showHiddenFields:A,where:d};return t.id?yu(u):mu(u)}var Eu=async e=>{let{id:t,...r}=e;return ea({...r,data:e?.data||{},duplicateFromID:t})};async function IM(e,t){let{id:r,collection:o,data:n,depth:i,disableTransaction:s,draft:a,overrideAccess:l=!0,populate:c,select:A,showHiddenFields:d}=t,f=e.collections[o];if(!f)throw new F(`The collection with slug ${String(o)} can't be found. Duplicate Operation.`);if(f.config.disableDuplicate===!0)throw new F(`The collection with slug ${String(o)} cannot be duplicated.`,400);let u=await W(t,e);return Eu({id:r,collection:f,data:n,depth:i,disableTransaction:s,draft:a,overrideAccess:l,populate:c,req:u,select:A,showHiddenFields:d})}var BM=async({collectionSlug:e,errors:t,join:r,joinsQuery:o,overrideAccess:n,promises:i,req:s})=>{let{joinPath:a}=r;if(o[a]===!1)return;let l=s.payload.collections[e].config,c=n?!0:await oe({disableErrors:!0,req:s},l.access.read);if(c===!1){o[a]=!1;return}o[a]||(o[a]={});let A=o[a];A.where||(A.where={}),r.field.where&&(A.where=Ae(A.where,r.field.where)),i.push(Ye({collectionConfig:l,errors:t,overrideAccess:n,polymorphicJoin:Array.isArray(r.field.collection),req:s,where:A.where})),typeof c=="object"&&(A.where=Ae(A.where,c))},eg=async({collectionConfig:e,joins:t,overrideAccess:r,req:o})=>{if(t===!1)return!1;t||(t={});let n=[],i=[];for(let s in e.joins)for(let a of e.joins[s])await BM({collectionSlug:s,errors:n,join:a,joinsQuery:t,overrideAccess:r,promises:i,req:o});for(let s of e.polymorphicJoins)for(let a of s.field.collection)await BM({collectionSlug:a,errors:n,join:s,joinsQuery:t,overrideAccess:r,promises:i,req:o});if(await Promise.all(i),n.length>0)throw new Xn(n);return t};var kce=[{label:({t:e})=>e("version:draft"),value:"draft"},{label:({t:e})=>e("version:published"),value:"published"}],tg=[{name:"_status",type:"select",admin:{components:{Field:!1},disableBulkEdit:!0},defaultValue:"draft",index:!0,label:({t:e})=>e("version:status"),options:kce}],rg={name:"snapshot",type:"checkbox",admin:{disableBulkEdit:!0,disabled:!0},index:!0};var Qo=(e,t,r)=>{let o=[{name:"parent",type:"relationship",index:!0,relationTo:t.slug},{name:"version",type:"group",fields:t.fields.filter(n=>!("name"in n)||n.name!=="id"),...r&&{flattenedFields:t.flattenedFields.filter(n=>n.name!=="id")}},{name:"createdAt",type:"date",admin:{disabled:!0},index:!0},{name:"updatedAt",type:"date",admin:{disabled:!0},index:!0}];return t?.versions?.drafts&&(e.localization&&(o.push(rg),o.push({name:"publishedLocale",type:"select",admin:{disableBulkEdit:!0,disabled:!0},index:!0,options:e.localization.locales.map(n=>typeof n=="string"?n:n.code)})),o.push({name:"latest",type:"checkbox",admin:{disabled:!0},index:!0}),t?.versions?.drafts?.autosave&&o.push({name:"autosave",type:"checkbox",index:!0})),o};var Cu=({collectionConfig:e,sort:t})=>(t||(e.defaultSort?t=e.defaultSort:t="-createdAt"),typeof t=="string"&&(t=[t]),t.map(r=>{let o,n="";return r[0]==="-"?(o=r.substring(1),n="-"):o=r,o==="id"?`${n}parent`:`${n}version.${o}`}));var QM=({fields:e,sort:t})=>{let r=t,o=!1;t.indexOf("-")===0&&(o=!0,r=r.substring(1));let n=r.split(".");for(let i of n){let s=e.find(a=>a.name===i);if(!s)return t;if("fields"in s){e=s.flattenedFields;continue}if("virtual"in s&&typeof s.virtual=="string")return`${o?"-":""}${s.virtual}`}return t},og=({fields:e,sort:t})=>{if(t)return Array.isArray(t)?t.map(r=>QM({fields:e,sort:r})):QM({fields:e,sort:t})};var Nce=300,Iu=async e=>{let t=e;try{if(t.collection.config.hooks?.beforeOperation?.length)for(let _ of t.collection.config.hooks.beforeOperation)t=await _({args:t,collection:t.collection.config,context:t.req.context,operation:"read",req:t.req})||t;let{collection:{config:r},collection:o,currentDepth:n,depth:i,disableErrors:s,draft:a,includeLockStatus:l,joins:c,limit:A,overrideAccess:d,page:f,pagination:u=!0,populate:p,select:h,showHiddenFields:g,sort:m,where:y}=t,E=t.req,{fallbackLocale:I,locale:C,payload:B}=E,R=je({fields:r.flattenedFields,forceSelect:r.forceSelect,select:h}),x;if(!d&&(x=await oe({disableErrors:s,req:E},r.access.read),x===!1))return{docs:[],hasNextPage:!1,hasPrevPage:!1,limit:A,nextPage:null,page:1,pagingCounter:1,prevPage:null,totalDocs:0,totalPages:1};let S=u&&A!==0,Q=A??(S?10:0),T=f||1,D,k=Ae(y,x);zt({fields:r.flattenedFields,payload:B,where:k});let P=og({fields:o.config.flattenedFields,sort:m}),U=await eg({collectionConfig:r,joins:c,overrideAccess:d,req:E});if(r.versions?.drafts&&a?(k=qr(k),await Ye({collectionConfig:o.config,overrideAccess:d,req:E,versionFields:Qo(B.config,o.config,!0),where:qr(y)}),D=await B.db.queryDrafts({collection:r.slug,joins:E.payloadAPI==="GraphQL"?!1:U,limit:Q,locale:C,page:T,pagination:S,req:E,select:gr({select:R}),sort:Cu({collectionConfig:r,sort:P}),where:k})):(await Ye({collectionConfig:r,overrideAccess:d,req:E,where:y}),D=await B.db.find({collection:r.slug,draftsEnabled:a,joins:E.payloadAPI==="GraphQL"?!1:U,limit:Q,locale:C,page:T,pagination:u,req:E,select:R,sort:P,where:k})),l)try{let _=r?.lockDocuments,ce=(typeof _=="object"?_.duration:Nce)*1e3,he=new Date().getTime(),G=await B.find({collection:no,depth:1,limit:Q,overrideAccess:!1,pagination:!1,req:E,where:{and:[{"document.relationTo":{equals:r.slug}},{"document.value":{in:D.docs.map($=>$.id)}},{updatedAt:{greater_than:new Date(he-ce)}}]}}),V=(Array.isArray(G?.docs)?G.docs:[]).filter($=>new Date($?.updatedAt).getTime()+ce>he);for(let $ of D.docs){let te=V.find(et=>et?.document?.value===$.id);$._isLocked=!!te,$._userEditing=te?te?.user?.value:null}}catch{for(let Y of D.docs)Y._isLocked=!1,Y._userEditing=null}return r?.hooks?.beforeRead?.length&&(D.docs=await Promise.all(D.docs.map(async _=>{let Y=_;for(let ce of r.hooks.beforeRead)Y=await ce({collection:r,context:E.context,doc:Y,query:k,req:E})||Y;return Y}))),D.docs=await Promise.all(D.docs.map(async _=>be({collection:r,context:E.context,currentDepth:n,depth:i,doc:_,draft:a,fallbackLocale:I,findMany:!0,global:null,locale:C,overrideAccess:d,populate:p,req:E,select:R,showHiddenFields:g}))),r?.hooks?.afterRead?.length&&(D.docs=await Promise.all(D.docs.map(async _=>{let Y=_;for(let ce of r.hooks.afterRead)Y=await ce({collection:r,context:E.context,doc:Y,findMany:!0,query:k,req:E})||_;return Y}))),D=await Je({args:t,collection:r,operation:"find",result:D}),D}catch(r){throw await H(t.req),r}};async function bM(e,t){let{collection:r,currentDepth:o,depth:n,disableErrors:i,draft:s=!1,includeLockStatus:a,joins:l,limit:c,overrideAccess:A=!0,page:d,pagination:f=!0,populate:u,select:p,showHiddenFields:h,sort:g,where:m}=t,y=e.collections[r];if(!y)throw new F(`The collection with slug ${String(r)} can't be found. Find Operation.`);return Iu({collection:y,currentDepth:o,depth:n,disableErrors:i,draft:s,includeLockStatus:a,joins:l,limit:c,overrideAccess:A,page:d,pagination:f,populate:u,req:await W(t,e),select:p,showHiddenFields:h,sort:g,where:m})}function wM(e){return e?.createdAt&&e?.updatedAt}var ng=async({accessResult:e,doc:t,entity:r,entityType:o,req:n,select:i})=>{let{locale:s}=n,a={and:[{"version._status":{equals:"draft"}}]};o==="collection"&&a.and.push({parent:{equals:t.id}}),wM(t)&&a.and.push({or:[{updatedAt:{greater_than:t.updatedAt}},{latest:{equals:!0}}]});let l;Vr(e)&&(l=qr(e));let c={collection:r.slug,global:r.slug,limit:1,locale:s,pagination:!1,req:n,select:gr({select:i}),sort:"-updatedAt",where:Ae(a,l)},A;o==="global"?A=(await n.payload.db.findGlobalVersions(c)).docs:A=(await n.payload.db.findVersions(c)).docs;let d=A[0];return d?(d=Or(d),o==="global"&&"globalType"in t&&(d.version.globalType=t.globalType),d.version||(d.version={}),d.version.id=t.id,d.version):t};var ta=async e=>{let t=e;try{if(t.collection.config.hooks?.beforeOperation?.length)for(let S of t.collection.config.hooks.beforeOperation)t=await S({args:t,collection:t.collection.config,context:t.req.context,operation:"read",req:t.req})||t;let{id:r,collection:{config:o},currentDepth:n,depth:i,disableErrors:s,draft:a=!1,includeLockStatus:l,joins:c,overrideAccess:A=!1,populate:d,req:{fallbackLocale:f,locale:u,t:p},req:h,select:g,showHiddenFields:m}=t,y=je({fields:o.flattenedFields,forceSelect:o.forceSelect,select:g}),E=A?!0:await oe({id:r,disableErrors:s,req:h},o.access.read);if(E===!1)return null;let I={id:{equals:r}},C=Ae(I,E);zt({fields:o.flattenedFields,payload:t.req.payload,where:C});let B=await eg({collectionConfig:o,joins:c,overrideAccess:A,req:h}),R={collection:o.slug,draftsEnabled:a,joins:h.payloadAPI==="GraphQL"?!1:B,locale:u,req:{transactionID:h.transactionID},select:y,where:C};if(h.payload.collections[o.slug].customIDType&&await Ye({collectionConfig:o,overrideAccess:A,req:h,where:I}),!R.where?.and?.[0]?.id)throw new Ke(p);let x=await h.payload.db.findOne(R);if(!x){if(!s)throw new Ke(h.t);return null}if(l&&r){let S=null;try{let Q=o?.lockDocuments,k=(typeof Q=="object"?Q.duration:300)*1e3,P=await h.payload.find({collection:no,depth:1,limit:1,overrideAccess:!1,pagination:!1,req:h,where:{and:[{"document.relationTo":{equals:o.slug}},{"document.value":{equals:r}},{updatedAt:{greater_than:new Date(new Date().getTime()-k)}}]}});P&&P.docs.length>0&&(S=P.docs[0])}catch{}x._isLocked=!!S,x._userEditing=S?.user?.value??null}if(o.versions?.drafts&&a&&(x=await ng({accessResult:E,doc:x,entity:o,entityType:"collection",overrideAccess:A,req:h,select:y})),o.hooks?.beforeRead?.length)for(let S of o.hooks.beforeRead)x=await S({collection:o,context:h.context,doc:x,query:R.where,req:h})||x;if(x=await be({collection:o,context:h.context,currentDepth:n,depth:i,doc:x,draft:a,fallbackLocale:f,global:null,locale:u,overrideAccess:A,populate:d,req:h,select:y,showHiddenFields:m}),o.hooks?.afterRead?.length)for(let S of o.hooks.afterRead)x=await S({collection:o,context:h.context,doc:x,query:R.where,req:h})||x;return x=await Je({args:t,collection:o,operation:"findByID",result:x}),x}catch(r){throw await H(t.req),r}};async function SM(e,t){let{id:r,collection:o,currentDepth:n,depth:i,disableErrors:s=!1,draft:a=!1,includeLockStatus:l,joins:c,overrideAccess:A=!0,populate:d,select:f,showHiddenFields:u}=t,p=e.collections[o];if(!p)throw new F(`The collection with slug ${String(o)} can't be found. Find By ID Operation.`);return ta({id:r,collection:p,currentDepth:n,depth:i,disableErrors:s,draft:a,includeLockStatus:l,joins:c,overrideAccess:A,populate:d,req:await W(t,e),select:f,showHiddenFields:u})}var Bu=async e=>{let{id:t,collection:{config:r},currentDepth:o,depth:n,disableErrors:i,overrideAccess:s,populate:a,req:{fallbackLocale:l,locale:c,payload:A},req:d,select:f,showHiddenFields:u}=e;if(!t)throw new F("Missing ID of version.",N.BAD_REQUEST);try{let p=s?!0:await oe({id:t,disableErrors:i,req:d},r.access.readVersions);if(p===!1)return null;let h=typeof p=="object",g=Ae({id:{equals:t}},p),m=je({fields:Qo(A.config,r,!0),forceSelect:gr({select:r.forceSelect}),select:f,versions:!0}),E=(await A.db.findVersions({collection:r.slug,limit:1,locale:c,pagination:!1,req:d,select:m,where:g})).docs[0];if(!E){if(!i){if(!h)throw new Ke(d.t);if(h)throw new ae(d.t)}return null}if(E.version||(E.version={}),r.hooks?.beforeRead?.length)for(let I of r.hooks.beforeRead)E.version=await I({collection:r,context:d.context,doc:E.version,query:g,req:d})||E.version;if(E.version=await be({collection:r,context:d.context,currentDepth:o,depth:n,doc:E.version,draft:void 0,fallbackLocale:l,global:null,locale:c,overrideAccess:s,populate:a,req:d,select:typeof m?.version=="object"?m.version:void 0,showHiddenFields:u}),r.hooks?.afterRead?.length)for(let I of r.hooks.afterRead)E.version=await I({collection:r,context:d.context,doc:E.version,query:g,req:d})||E.version;return E}catch(p){throw await H(d),p}};async function TM(e,t){let{id:r,collection:o,depth:n,disableErrors:i=!1,overrideAccess:s=!0,populate:a,select:l,showHiddenFields:c}=t,A=e.collections[o];if(!A)throw new F(`The collection with slug ${String(o)} can't be found. Find Version By ID Operation.`);return Bu({id:r,collection:A,depth:n,disableErrors:i,overrideAccess:s,populate:a,req:await W(t,e),select:l,showHiddenFields:c})}var Qu=async e=>{let{collection:{config:t},depth:r,limit:o,overrideAccess:n,page:i,pagination:s=!0,populate:a,select:l,showHiddenFields:c,sort:A,where:d}=e,f=e.req,{fallbackLocale:u,locale:p,payload:h}=f;try{let g;n||(g=await oe({req:f},t.access.readVersions));let m=Qo(h.config,t,!0);await Ye({collectionConfig:t,overrideAccess:n,req:f,versionFields:m,where:d});let y=Ae(d,g);zt({fields:m,payload:h,where:y});let E=je({fields:m,forceSelect:gr({select:t.forceSelect}),select:l,versions:!0}),I=await h.db.findVersions({collection:t.slug,limit:o??10,locale:p,page:i||1,pagination:s,req:f,select:E,sort:A,where:y}),C=I;return C.docs=await Promise.all(I.docs.map(async B=>{let R=B;if(R.version||(R.version={}),t.hooks?.beforeRead?.length)for(let x of t.hooks.beforeRead)R.version=await x({collection:t,context:f.context,doc:R.version,query:y,req:f})||R.version;return R})),C.docs=await Promise.all(C.docs.map(async B=>(B.version=await be({collection:t,context:f.context,depth:r,doc:B.version,draft:void 0,fallbackLocale:u,findMany:!0,global:null,locale:p,overrideAccess:n,populate:a,req:f,select:typeof E?.version=="object"?E.version:void 0,showHiddenFields:c}),B))),t.hooks.afterRead?.length&&(C.docs=await Promise.all(C.docs.map(async B=>{let R=B;for(let x of t.hooks.afterRead)R.version=await x({collection:t,context:f.context,doc:B.version,findMany:!0,query:y,req:f})||B.version;return R}))),C.docs=C.docs.map(B=>Or(B)),C}catch(g){throw await H(f),g}};async function xM(e,t){let{collection:r,depth:o,limit:n,overrideAccess:i=!0,page:s,populate:a,select:l,showHiddenFields:c,sort:A,where:d}=t,f=e.collections[r];if(!f)throw new F(`The collection with slug ${String(r)} can't be found. Find Versions Operation.`);return Qu({collection:f,depth:o,limit:n,overrideAccess:i,page:s,populate:a,req:await W(t,e),select:l,showHiddenFields:c,sort:A,where:d})}var bu=async e=>{let{id:t,collection:{config:r},depth:o,draft:n,overrideAccess:i=!1,populate:s,req:a,req:{fallbackLocale:l,locale:c,payload:A},select:d,showHiddenFields:f}=e;try{if(!t)throw new F("Missing ID of version to restore.",N.BAD_REQUEST);let{docs:u}=await a.payload.db.findVersions({collection:r.slug,limit:1,locale:c,pagination:!1,req:a,where:{id:{equals:t}}}),[p]=u;if(!p)throw new Ke(a.t);let h=p.parent,g=i?!0:await oe({id:h,req:a},r.access.update),m=Vr(g),y={collection:r.slug,locale:c,req:a,where:Ae({id:{equals:h}},g)},E=await a.payload.db.findOne(y);if(!E&&!m)throw new Ke(a.t);if(!E&&m)throw new ae(a.t);let I=await xn({id:h,config:r,payload:A,query:y,req:a}),C=je({fields:r.flattenedFields,forceSelect:r.forceSelect,select:d}),B=await a.payload.db.updateOne({id:h,collection:r.slug,data:p.version,req:a,select:C}),R={...I};if(delete R.id,await A.db.createVersion({autosave:!1,collectionSlug:r.slug,createdAt:R.createdAt,parent:h,req:a,updatedAt:new Date().toISOString(),versionData:n?{...p.version,_status:"draft"}:p.version}),B=await be({collection:r,context:a.context,depth:o,doc:B,draft:void 0,fallbackLocale:l,global:null,locale:c,overrideAccess:i,populate:s,req:a,select:C,showHiddenFields:f}),r.hooks?.afterRead?.length)for(let x of r.hooks.afterRead)B=await x({collection:r,context:a.context,doc:B,req:a})||B;if(B=await Go({collection:r,context:a.context,data:B,doc:B,global:null,operation:"update",previousDoc:I,req:a}),r.hooks?.afterChange?.length)for(let x of r.hooks.afterChange)B=await x({collection:r,context:a.context,data:B,doc:B,operation:"update",previousDoc:I,req:a})||B;return B}catch(u){throw await H(a),u}};async function RM(e,t){let{id:r,collection:o,depth:n,overrideAccess:i=!0,populate:s,select:a,showHiddenFields:l}=t,c=e.collections[o];if(!c)throw new F(`The collection with slug ${String(o)} can't be found. Restore Version Operation.`);let A={id:r,collection:c,depth:n,overrideAccess:i,payload:e,populate:s,req:await W(t,e),select:a,showHiddenFields:l};return bu(A)}var ig=async({id:e,accessResults:t,autosave:r,collectionConfig:o,config:n,data:i,depth:s,docWithLocales:a,draftArg:l,fallbackLocale:c,filesToUpload:A,locale:d,overrideAccess:f,overrideLock:u,payload:p,populate:h,publishSpecificLocale:g,req:m,select:y,showHiddenFields:E})=>{let I=i?.password,C=!!(l&&o.versions.drafts)&&i._status!=="published",B=!!(I&&o.auth&&(!o.auth.disableLocalStrategy||typeof o.auth.disableLocalStrategy=="object"&&o.auth.disableLocalStrategy.enableFields)&&!C);await Ri({id:e,collectionSlug:o.slug,lockErrorMessage:`Document with ID ${e} is currently locked by another user and cannot be updated.`,overrideLock:u,req:m});let R=await be({collection:o,context:m.context,depth:0,doc:He(a),draft:l,fallbackLocale:e?null:c,global:null,locale:d,overrideAccess:!0,req:m,showHiddenFields:!0});if(o.auth&&za({authOptions:o.auth,collectionSlug:o.slug,data:i,operation:"update",originalDoc:R,req:m}),await Vl({collectionConfig:o,config:n,doc:a,files:A,overrideDelete:!1,req:m}),i=await Za({id:e,collection:o,context:m.context,data:i,doc:R,global:null,operation:"update",overrideAccess:f,req:m}),o.hooks?.beforeValidate?.length)for(let k of o.hooks.beforeValidate)i=await k({collection:o,context:m.context,data:i,operation:"update",originalDoc:R,req:m})||i;if(o.upload.disableLocalStorage||await Wh(p,A,m),o.hooks?.beforeChange?.length)for(let k of o.hooks.beforeChange)i=await k({collection:o,context:m.context,data:i,operation:"update",originalDoc:R,req:m})||i;let x=a,S,Q={id:e,collection:o,context:m.context,data:{...i,id:e},doc:R,docWithLocales:void 0,global:null,operation:"update",overrideAccess:f,req:m,skipValidation:C&&o.versions.drafts&&!o.versions.drafts.validate};if(g){S=await di({...Q,docWithLocales:a});let k=await xn({id:e,config:o,payload:p,published:!0,query:{collection:o.slug,locale:d,req:m,where:Ae({id:{equals:e}},t)},req:m});x=k||{}}let T=await di({...Q,docWithLocales:x}),D={...T};if(B&&typeof I=="string"){let{hash:k,salt:P}=await Ya({collection:o,password:I,req:m});D.salt=P,D.hash=k,delete D.password,delete i.password}if(C||(T=await m.payload.db.updateOne({id:e,collection:o.slug,data:D,locale:d,req:m,select:y})),o.versions&&(T=await Xs({id:e,autosave:r,collection:o,docWithLocales:T,draft:C,payload:p,publishSpecificLocale:g,req:m,select:y,snapshot:S})),T=await be({collection:o,context:m.context,depth:s,doc:T,draft:l,fallbackLocale:c,global:null,locale:d,overrideAccess:f,populate:h,req:m,select:y,showHiddenFields:E}),o.hooks?.afterRead?.length)for(let k of o.hooks.afterRead)T=await k({collection:o,context:m.context,doc:T,req:m})||T;if(T=await Go({collection:o,context:m.context,data:i,doc:T,global:null,operation:"update",previousDoc:R,req:m}),o.hooks?.afterChange?.length)for(let k of o.hooks.afterChange)T=await k({collection:o,context:m.context,data:i,doc:T,operation:"update",previousDoc:R,req:m})||T;return T};var wu=async e=>{let t=e;if(t.collection.config.disableBulkEdit&&!t.overrideAccess)throw new F(`Collection ${t.collection.config.slug} has disabled bulk edit`,403);try{let r=!t.disableTransaction&&await de(t.req);if(t.collection.config.hooks?.beforeOperation?.length)for(let ce of t.collection.config.hooks.beforeOperation)t=await ce({args:t,collection:t.collection.config,context:t.req.context,operation:"update",req:t.req})||t;let{collection:{config:o},collection:n,depth:i,draft:s=!1,limit:a=0,overrideAccess:l,overrideLock:c,overwriteExistingFiles:A=!1,populate:d,publishSpecificLocale:f,req:{fallbackLocale:u,locale:p,payload:{config:h},payload:g},req:m,select:y,showHiddenFields:E,sort:I,where:C}=t;if(!C)throw new F("Missing 'where' query of documents to update.",N.BAD_REQUEST);let{data:B}=t,R=!!(s&&o.versions.drafts),x;l||(x=await oe({req:m},o.access.update)),await Ye({collectionConfig:o,overrideAccess:l,req:m,where:C});let S=Ae(C,x);zt({fields:o.flattenedFields,payload:g,where:S});let Q=og({fields:n.config.flattenedFields,sort:I}),T;if(o.versions?.drafts&&R){let ce=qr(S);await Ye({collectionConfig:n.config,overrideAccess:l,req:m,versionFields:Qo(g.config,n.config,!0),where:qr(C)}),T=(await g.db.queryDrafts({collection:o.slug,limit:a,locale:p,pagination:!1,req:m,sort:Cu({collectionConfig:o,sort:Q}),where:ce})).docs}else T=(await g.db.find({collection:o.slug,limit:a,locale:p,pagination:!1,req:m,sort:Q,where:S})).docs;let{data:D,files:k}=await Gl({collection:n,config:h,data:B,operation:"update",overwriteExistingFiles:A,req:m,throwOnMissingFile:!1}),P=[],U=T.map(async ce=>{let{id:he}=ce;try{let G=je({fields:o.flattenedFields,forceSelect:o.forceSelect,select:y});return await ig({id:he,accessResults:x,autosave:!1,collectionConfig:o,config:h,data:He(D),depth:i,docWithLocales:ce,draftArg:s,fallbackLocale:u,filesToUpload:k,locale:p,overrideAccess:l,overrideLock:c,payload:g,populate:d,publishSpecificLocale:f,req:m,select:G,showHiddenFields:E})}catch(G){P.push({id:he,message:G instanceof Error?G.message:"Unknown error"})}return null});await jl({collectionConfig:o,config:h,req:m});let Y={docs:(await Promise.all(U)).filter(Boolean),errors:P};return Y=await Je({args:t,collection:o,operation:"update",result:Y}),r&&await pe(m),Y}catch(r){throw await H(t.req),r}};var Su=async e=>{let t=e;try{let r=!t.disableTransaction&&await de(t.req);if(t.collection.config.hooks?.beforeOperation?.length)for(let P of t.collection.config.hooks.beforeOperation)t=await P({args:t,collection:t.collection.config,context:t.req.context,operation:"update",req:t.req})||t;t.publishSpecificLocale&&(t.req.locale=t.publishSpecificLocale);let{id:o,autosave:n=!1,collection:{config:i},collection:s,depth:a,draft:l=!1,overrideAccess:c,overrideLock:A,overwriteExistingFiles:d=!1,populate:f,publishSpecificLocale:u,req:{fallbackLocale:p,locale:h,payload:{config:g},payload:m},req:y,select:E,showHiddenFields:I}=t;if(!o)throw new F("Missing ID of document to update.",N.BAD_REQUEST);let{data:C}=t,B=c?!0:await oe({id:o,data:C,req:y},i.access.update),R=Vr(B),x={collection:i.slug,locale:h,req:y,where:Ae({id:{equals:o}},B)},S=await xn({id:o,config:i,payload:m,query:x,req:y});if(!S&&!R)throw new Ke(y.t);if(!S&&R)throw new ae(y.t);let{data:Q,files:T}=await Gl({collection:s,config:g,data:C,operation:"update",overwriteExistingFiles:d,req:y,throwOnMissingFile:!1}),D=je({fields:i.flattenedFields,forceSelect:i.forceSelect,select:E}),k=await ig({id:o,accessResults:B,autosave:n,collectionConfig:i,config:g,data:He(Q),depth:a,docWithLocales:S,draftArg:l,fallbackLocale:p,filesToUpload:T,locale:h,overrideAccess:c,overrideLock:A,payload:m,populate:f,publishSpecificLocale:u,req:y,select:D,showHiddenFields:I});return await jl({collectionConfig:i,config:g,req:y}),k=await Je({args:t,collection:i,operation:"updateByID",result:k}),r&&await pe(y),k}catch(r){throw await H(t.req),r}};async function DM(e,t){let{id:r,autosave:o,collection:n,data:i,depth:s,disableTransaction:a,draft:l,file:c,filePath:A,limit:d,overrideAccess:f=!0,overrideLock:u,overwriteExistingFiles:p=!1,populate:h,publishSpecificLocale:g,select:m,showHiddenFields:y,sort:E,where:I}=t,C=e.collections[n];if(!C)throw new F(`The collection with slug ${String(n)} can't be found. Update Operation.`);let B=await W(t,e);B.file=c??await Es(A);let R={id:r,autosave:o,collection:C,data:i,depth:s,disableTransaction:a,draft:l,limit:d,overrideAccess:f,overrideLock:u,overwriteExistingFiles:p,payload:e,populate:h,publishSpecificLocale:g,req:B,select:m,showHiddenFields:y,sort:E,where:I};return t.id?Su(R):wu(R)}var FM=async e=>{try{let{disableErrors:t,global:r,overrideAccess:o,where:n}=e,i=e.req,{payload:s}=i,a;if(!o&&(a=await oe({disableErrors:t,req:i},r.access.readVersions),a===!1))return{totalDocs:0};let l=Ae(n,a),c=vi(s.config,r,!0);return await Ye({globalConfig:r,overrideAccess:o,req:i,versionFields:c,where:n}),await s.db.countGlobalVersions({global:r.slug,req:i,where:l})}catch(t){throw await H(e.req),t}};async function kM(e,t){let{disableErrors:r,global:o,overrideAccess:n=!0,where:i}=t,s=e.globals.config.find(({slug:a})=>a===o);if(!s)throw new F(`The global with slug ${String(o)} can't be found. Count Global Versions Operation.`);return FM({disableErrors:r,global:s,overrideAccess:n,req:await W(t,e),where:i})}var ra=async e=>{let{slug:t,depth:r,draft:o=!1,globalConfig:n,includeLockStatus:i,overrideAccess:s=!1,populate:a,req:{fallbackLocale:l,locale:c},req:A,select:d,showHiddenFields:f}=e;try{let u;s||(u=await oe({req:A},n.access.read));let p=je({fields:n.flattenedFields,forceSelect:n.forceSelect,select:d}),h=await A.payload.db.findGlobal({slug:t,locale:c,req:A,select:p,where:s?void 0:u});if(h||(h={}),i&&t){let g=null;try{let m=n?.lockDocuments,I=(typeof m=="object"?m.duration:300)*1e3,C=await A.payload.find({collection:no,depth:1,limit:1,overrideAccess:!1,pagination:!1,req:A,where:{and:[{globalSlug:{equals:t}},{updatedAt:{greater_than:new Date(new Date().getTime()-I)}}]}});C&&C.docs.length>0&&(g=C.docs[0])}catch{}h._isLocked=!!g,h._userEditing=g?.user?.value??null}if(n.versions?.drafts&&o&&(h=await ng({accessResult:u,doc:h,entity:n,entityType:"global",overrideAccess:s,req:A,select:p})),n.hooks?.beforeRead?.length)for(let g of n.hooks.beforeRead)h=await g({context:A.context,doc:h,global:n,req:A})||h;if(p&&h.globalType){let g=co(p);(g==="include"&&!p.globalType||g==="exclude"&&p.globalType===!1)&&delete h.globalType}if(h=await be({collection:null,context:A.context,depth:r,doc:h,draft:o,fallbackLocale:l,global:n,locale:c,overrideAccess:s,populate:a,req:A,select:p,showHiddenFields:f}),n.hooks?.afterRead?.length)for(let g of n.hooks.afterRead)h=await g({context:A.context,doc:h,global:n,req:A})||h;return h}catch(u){throw await H(A),u}};async function NM(e,t){let{slug:r,depth:o,draft:n=!1,includeLockStatus:i,overrideAccess:s=!0,populate:a,select:l,showHiddenFields:c}=t,A=e.globals.config.find(d=>d.slug===r);if(!A)throw new F(`The global with slug ${String(r)} can't be found.`);return ra({slug:r,depth:o,draft:n,globalConfig:A,includeLockStatus:i,overrideAccess:s,populate:a,req:await W(t,e),select:l,showHiddenFields:c})}var vi=(e,t,r)=>{let o=[{name:"version",type:"group",fields:t.fields,...r&&{flattenedFields:t.flattenedFields}},{name:"createdAt",type:"date",admin:{disabled:!0},index:!0},{name:"updatedAt",type:"date",admin:{disabled:!0},index:!0}];return t?.versions?.drafts&&(e.localization&&(o.push(rg),o.push({name:"publishedLocale",type:"select",admin:{disableBulkEdit:!0,disabled:!0},index:!0,options:e.localization.locales.map(n=>typeof n=="string"?n:n.code)})),o.push({name:"latest",type:"checkbox",admin:{disabled:!0},index:!0}),t?.versions?.drafts?.autosave&&o.push({name:"autosave",type:"checkbox",index:!0})),o};var Tu=async e=>{let{id:t,currentDepth:r,depth:o,disableErrors:n,globalConfig:i,overrideAccess:s,populate:a,req:{fallbackLocale:l,locale:c,payload:A},req:d,select:f,showHiddenFields:u}=e;try{let p=s?!0:await oe({id:t,disableErrors:n,req:d},i.access.readVersions);if(p===!1)return null;let h=typeof p=="object",g=je({fields:vi(A.config,i,!0),forceSelect:gr({select:i.forceSelect}),select:f,versions:!0}),m={global:i.slug,limit:1,locale:c,req:d,select:g,where:Ae({id:{equals:t}},p)};if(!m.where?.and?.[0]?.id)throw new Ke(d.t);let{docs:y}=await A.db.findGlobalVersions(m);if(!y||y?.length===0){if(!n){if(!h)throw new Ke(d.t);if(h)throw new ae(d.t)}return null}let E=He(y[0]);if(E.version||(E.version={}),E.version.globalType=i.slug,i.hooks?.beforeRead?.length)for(let I of i.hooks.beforeRead)E=await I({context:d.context,doc:E.version,global:i,req:d})||E.version;if(E.version=await be({collection:null,context:d.context,currentDepth:r,depth:o,doc:E.version,draft:void 0,fallbackLocale:l,global:i,locale:c,overrideAccess:s,populate:a,req:d,select:typeof g?.version=="object"?g.version:void 0,showHiddenFields:u}),i.hooks?.afterRead?.length)for(let I of i.hooks.afterRead)E.version=await I({context:d.context,doc:E.version,global:i,query:m.where,req:d})||E.version;return E}catch(p){throw await H(d),p}};async function vM(e,t){let{id:r,slug:o,depth:n,disableErrors:i=!1,overrideAccess:s=!0,populate:a,select:l,showHiddenFields:c}=t,A=e.globals.config.find(d=>d.slug===o);if(!A)throw new F(`The global with slug ${String(o)} can't be found.`);return Tu({id:r,depth:n,disableErrors:i,globalConfig:A,overrideAccess:s,populate:a,req:await W(t,e),select:l,showHiddenFields:c})}var xu=async e=>{let{depth:t,globalConfig:r,limit:o,overrideAccess:n,page:i,pagination:s=!0,populate:a,select:l,showHiddenFields:c,sort:A,where:d}=e,f=e.req,{fallbackLocale:u,locale:p,payload:h}=f,g=vi(h.config,r,!0);try{let m=n?!0:await oe({req:f},r.access.readVersions);await Ye({globalConfig:r,overrideAccess:n,req:f,versionFields:g,where:d});let y=Ae(d,m),E=je({fields:vi(h.config,r,!0),forceSelect:gr({select:r.forceSelect}),select:l,versions:!0}),I=await h.db.findGlobalVersions({global:r.slug,limit:o??10,locale:p,page:i||1,pagination:s,req:f,select:E,sort:A,where:y}),C={...I,docs:await Promise.all(I.docs.map(async B=>(B.version||(B.version={}),{...B,version:await be({collection:null,context:f.context,depth:t,doc:{...B.version,globalType:r.slug},draft:void 0,fallbackLocale:u,findMany:!0,global:r,locale:p,overrideAccess:n,populate:a,req:f,select:E,showHiddenFields:c})})))};return r.hooks?.afterRead?.length&&(C.docs=await Promise.all(C.docs.map(async B=>{let R=B;for(let x of r.hooks.afterRead)R.version=await x({context:f.context,doc:B.version,findMany:!0,global:r,query:y,req:f})||B.version;return R}))),C={...C,docs:C.docs.map(B=>Or(B))},C}catch(m){throw await H(f),m}};async function PM(e,t){let{slug:r,depth:o,limit:n,overrideAccess:i=!0,page:s,populate:a,select:l,showHiddenFields:c,sort:A,where:d}=t,f=e.globals.config.find(u=>u.slug===r);if(!f)throw new F(`The global with slug ${String(r)} can't be found.`);return xu({depth:o,globalConfig:f,limit:n,overrideAccess:i,page:s,populate:a,req:await W(t,e),select:l,showHiddenFields:c,sort:A,where:d})}var Ru=async e=>{let{id:t,depth:r,draft:o,globalConfig:n,overrideAccess:i,populate:s,showHiddenFields:a}=e,l=e.req,{fallbackLocale:c,locale:A,payload:d}=l;try{let f=await de(l);i||await oe({req:l},n.access.update);let{docs:u}=await d.db.findGlobalVersions({global:n.slug,limit:1,req:l,where:{id:{equals:t}}});if(!u||u.length===0)throw new Ke(l.t);let p=u[0];p.version.globalType=n.slug,o&&(p.version._status="draft");let h=await d.findGlobal({slug:n.slug,depth:r,req:l}),g=await d.db.findGlobal({slug:n.slug,req:l}),m=p.version;if(g){m=await d.db.updateGlobal({slug:n.slug,data:m,req:l});let y=new Date().toISOString();m=await d.db.createGlobalVersion({autosave:!1,createdAt:m.createdAt?new Date(m.createdAt).toISOString():y,globalSlug:n.slug,parent:t,req:l,updatedAt:o?y:new Date(m.updatedAt).toISOString(),versionData:m})}else m=await d.db.createGlobal({slug:n.slug,data:m,req:l});if(m=await be({collection:null,context:l.context,depth:r,doc:m,draft:void 0,fallbackLocale:c,global:n,locale:A,overrideAccess:i,populate:s,req:l,showHiddenFields:a}),n.hooks?.afterRead?.length)for(let y of n.hooks.afterRead)m=await y({context:l.context,doc:m,global:n,req:l})||m;if(m=await Go({collection:null,context:l.context,data:m,doc:m,global:n,operation:"update",previousDoc:h,req:l}),n.hooks?.afterChange?.length)for(let y of n.hooks.afterChange)m=await y({context:l.context,data:m,doc:m,global:n,previousDoc:h,req:l})||m;return f&&await pe(l),m}catch(f){throw await H(l),f}};async function LM(e,t){let{id:r,slug:o,depth:n,overrideAccess:i=!0,populate:s,showHiddenFields:a}=t,l=e.globals.config.find(c=>c.slug===o);if(!l)throw new F(`The global with slug ${String(o)} can't be found.`);return Ru({id:r,depth:n,globalConfig:l,overrideAccess:i,populate:s,req:await W(t,e),showHiddenFields:a})}var sg=async({slug:e,config:t,locale:r,payload:o,published:n,req:i,where:s})=>{let a,l=n?{"version._status":{equals:"published"}}:{latest:{equals:!0}};t.versions?.drafts&&(a=(await o.db.findGlobalVersions({global:e,limit:1,locale:r,pagination:!1,req:i,where:l})).docs[0]);let c=await o.db.findGlobal({slug:e,locale:r,req:i,where:s}),A=!!c;return a?(a.version.createdAt||(a.version.createdAt=a.createdAt),a.version.updatedAt||(a.version.updatedAt=a.updatedAt),{global:a.version,globalExists:A}):{global:c,globalExists:A}};var Du=async e=>{e.publishSpecificLocale&&(e.req.locale=e.publishSpecificLocale);let{slug:t,autosave:r,depth:o,disableTransaction:n,draft:i,globalConfig:s,overrideAccess:a,overrideLock:l,populate:c,publishSpecificLocale:A,req:{fallbackLocale:d,locale:f,payload:u},req:p,select:h,showHiddenFields:g}=e;try{let m=!n&&await de(p),{data:y}=e,E=!!(i&&s.versions?.drafts),I=a?!0:await oe({data:y,req:p},s.access.update),C=a?void 0:I,B=await sg({slug:t,config:s,locale:f,payload:u,req:p,where:C}),{global:R,globalExists:x}=B||{},S={};B&&B.global&&(S=He(R),S._id&&delete S._id);let Q=await be({collection:null,context:p.context,depth:0,doc:He(S),draft:i,fallbackLocale:d,global:s,locale:f,overrideAccess:!0,req:p,showHiddenFields:g});if(await Ri({globalSlug:t,lockErrorMessage:`Global with slug "${t}" is currently locked by another user and cannot be updated.`,overrideLock:l,req:p}),y=await Za({collection:null,context:p.context,data:y,doc:Q,global:s,operation:"update",overrideAccess:a,req:p}),s.hooks?.beforeValidate?.length)for(let _ of s.hooks.beforeValidate)y=await _({context:p.context,data:y,global:s,originalDoc:Q,req:p})||y;if(s.hooks?.beforeChange?.length)for(let _ of s.hooks.beforeChange)y=await _({context:p.context,data:y,global:s,originalDoc:Q,req:p})||y;let T=S,D,k={collection:null,context:p.context,data:y,doc:Q,docWithLocales:void 0,global:s,operation:"update",req:p,skipValidation:E&&s.versions.drafts&&!s.versions.drafts.validate};A&&(T=(await sg({slug:t,config:s,payload:u,published:!0,req:p,where:C}))?.global||{},D=await di({...k,docWithLocales:S}));let P=await di({...k,docWithLocales:T}),U=je({fields:s.flattenedFields,forceSelect:s.forceSelect,select:h});if(E||(P.createdAt||(P.createdAt=new Date().toISOString()),x?P=await u.db.updateGlobal({slug:t,data:P,req:p,select:U}):P=await u.db.createGlobal({slug:t,data:P,req:p})),s.versions){let{globalType:_}=P;P=await Xs({autosave:r,docWithLocales:P,draft:E,global:s,payload:u,publishSpecificLocale:A,req:p,select:U,snapshot:D}),P={...P,globalType:_}}if(U&&P.globalType){let _=co(U);(_==="include"&&!U.globalType||_==="exclude"&&U.globalType===!1)&&delete P.globalType}if(P=await be({collection:null,context:p.context,depth:o,doc:P,draft:i,fallbackLocale:null,global:s,locale:f,overrideAccess:a,populate:c,req:p,select:U,showHiddenFields:g}),s.hooks?.afterRead?.length)for(let _ of s.hooks.afterRead)P=await _({context:p.context,doc:P,global:s,req:p})||P;if(P=await Go({collection:null,context:p.context,data:y,doc:P,global:s,operation:"update",previousDoc:Q,req:p}),s.hooks?.afterChange?.length)for(let _ of s.hooks.afterChange)P=await _({context:p.context,data:y,doc:P,global:s,previousDoc:Q,req:p})||P;return m&&await pe(p),P}catch(m){throw await H(p),m}};async function UM(e,t){let{slug:r,data:o,depth:n,draft:i,overrideAccess:s=!0,overrideLock:a,populate:l,publishSpecificLocale:c,select:A,showHiddenFields:d}=t,f=e.globals.config.find(u=>u.slug===r);if(!f)throw new F(`The global with slug ${String(r)} can't be found.`);return Du({slug:r,data:He(o),depth:n,draft:i,globalConfig:f,overrideAccess:s,overrideLock:a,populate:l,publishSpecificLocale:c,req:await W(t,e),select:A,showHiddenFields:d})}function Ht(e,t,r,o,n,i,s,a){return Ht.fromTZ(Ht.tp(e,t,r,o,n,i,s),a)}Ht.fromTZISO=(e,t,r)=>Ht.fromTZ(vce(e,t),r);Ht.fromTZ=function(e,t){let r=new Date(Date.UTC(e.y,e.m-1,e.d,e.h,e.i,e.s)),o=q0(e.tz,r),n=new Date(r.getTime()-o),i=q0(e.tz,n);if(i-o===0)return n;{let s=new Date(r.getTime()-i),a=q0(e.tz,s);if(a-i===0||!t&&a-i>0)return s;if(t)throw new Error("Invalid date passed to fromTZ()");return n}};Ht.toTZ=function(e,t){let r=e.toLocaleString("en-US",{timeZone:t}).replace(/[\u202f]/," "),o=new Date(r);return{y:o.getFullYear(),m:o.getMonth()+1,d:o.getDate(),h:o.getHours(),i:o.getMinutes(),s:o.getSeconds(),tz:t}};Ht.tp=(e,t,r,o,n,i,s)=>({y:e,m:t,d:r,h:o,i:n,s:i,tz:s});function q0(e,t=new Date){let r=t.toLocaleString("en-US",{timeZone:e,timeZoneName:"shortOffset"}).split(" ").slice(-1)[0],o=t.toLocaleString("en-US").replace(/[\u202f]/," ");return Date.parse(`${o} GMT`)-Date.parse(`${o} ${r}`)}function vce(e,t){let r=new Date(Date.parse(e));if(isNaN(r))throw new Error("minitz: Invalid ISO8601 passed to parser.");let o=e.substring(9);return e.includes("Z")||o.includes("-")||o.includes("+")?Ht.tp(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),"Etc/UTC"):Ht.tp(r.getFullYear(),r.getMonth()+1,r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),t)}Ht.minitz=Ht;var Y0=32,ku=31|Y0,GM=[1,2,4,8,16],OM=class{pattern;timezone;second;minute;hour;day;month;dayOfWeek;lastDayOfMonth;starDOM;starDOW;constructor(e,t){this.pattern=e,this.timezone=t,this.second=Array(60).fill(0),this.minute=Array(60).fill(0),this.hour=Array(24).fill(0),this.day=Array(31).fill(0),this.month=Array(12).fill(0),this.dayOfWeek=Array(7).fill(0),this.lastDayOfMonth=!1,this.starDOM=!1,this.starDOW=!1,this.parse()}parse(){if(!(typeof this.pattern=="string"||this.pattern instanceof String))throw new TypeError("CronPattern: Pattern has to be of type string.");this.pattern.indexOf("@")>=0&&(this.pattern=this.handleNicknames(this.pattern).trim());let e=this.pattern.replace(/\s+/g," ").split(" ");if(e.length<5||e.length>6)throw new TypeError("CronPattern: invalid configuration format ('"+this.pattern+"'), exactly five or six space separated parts are required.");if(e.length===5&&e.unshift("0"),e[3].indexOf("L")>=0&&(e[3]=e[3].replace("L",""),this.lastDayOfMonth=!0),e[3]=="*"&&(this.starDOM=!0),e[4].length>=3&&(e[4]=this.replaceAlphaMonths(e[4])),e[5].length>=3&&(e[5]=this.replaceAlphaDays(e[5])),e[5]=="*"&&(this.starDOW=!0),this.pattern.indexOf("?")>=0){let t=new io(new Date,this.timezone).getDate(!0);e[0]=e[0].replace("?",t.getSeconds().toString()),e[1]=e[1].replace("?",t.getMinutes().toString()),e[2]=e[2].replace("?",t.getHours().toString()),this.starDOM||(e[3]=e[3].replace("?",t.getDate().toString())),e[4]=e[4].replace("?",(t.getMonth()+1).toString()),this.starDOW||(e[5]=e[5].replace("?",t.getDay().toString()))}this.throwAtIllegalCharacters(e),this.partToArray("second",e[0],0,1),this.partToArray("minute",e[1],0,1),this.partToArray("hour",e[2],0,1),this.partToArray("day",e[3],-1,1),this.partToArray("month",e[4],-1,1),this.partToArray("dayOfWeek",e[5],0,ku),this.dayOfWeek[7]&&(this.dayOfWeek[0]=this.dayOfWeek[7])}partToArray(e,t,r,o){let n=this[e],i=e==="day"&&this.lastDayOfMonth;if(t===""&&!i)throw new TypeError("CronPattern: configuration entry "+e+" ("+t+") is empty, check for trailing spaces.");if(t==="*")return n.fill(o);let s=t.split(",");if(s.length>1)for(let a=0;a<s.length;a++)this.partToArray(e,s[a],r,o);else t.indexOf("-")!==-1&&t.indexOf("/")!==-1?this.handleRangeWithStepping(t,e,r,o):t.indexOf("-")!==-1?this.handleRange(t,e,r,o):t.indexOf("/")!==-1?this.handleStepping(t,e,r,o):t!==""&&this.handleNumber(t,e,r,o)}throwAtIllegalCharacters(e){for(let t=0;t<e.length;t++)if((t===5?/[^/*0-9,\-#L]+/:/[^/*0-9,-]+/).test(e[t]))throw new TypeError("CronPattern: configuration entry "+t+" ("+e[t]+") contains illegal characters.")}handleNumber(e,t,r,o){let n=this.extractNth(e,t),i=parseInt(n[0],10)+r;if(isNaN(i))throw new TypeError("CronPattern: "+t+" is not a number: '"+e+"'");this.setPart(t,i,n[1]||o)}setPart(e,t,r){if(!Object.prototype.hasOwnProperty.call(this,e))throw new TypeError("CronPattern: Invalid part specified: "+e);if(e==="dayOfWeek"){if(t===7&&(t=0),t<0||t>6)throw new RangeError("CronPattern: Invalid value for dayOfWeek: "+t);this.setNthWeekdayOfMonth(t,r);return}if(e==="second"||e==="minute"){if(t<0||t>=60)throw new RangeError("CronPattern: Invalid value for "+e+": "+t)}else if(e==="hour"){if(t<0||t>=24)throw new RangeError("CronPattern: Invalid value for "+e+": "+t)}else if(e==="day"){if(t<0||t>=31)throw new RangeError("CronPattern: Invalid value for "+e+": "+t)}else if(e==="month"&&(t<0||t>=12))throw new RangeError("CronPattern: Invalid value for "+e+": "+t);this[e][t]=r}handleRangeWithStepping(e,t,r,o){let n=this.extractNth(e,t),i=n[0].match(/^(\d+)-(\d+)\/(\d+)$/);if(i===null)throw new TypeError("CronPattern: Syntax error, illegal range with stepping: '"+e+"'");let[,s,a,l]=i,c=parseInt(s,10)+r,A=parseInt(a,10)+r,d=parseInt(l,10);if(isNaN(c))throw new TypeError("CronPattern: Syntax error, illegal lower range (NaN)");if(isNaN(A))throw new TypeError("CronPattern: Syntax error, illegal upper range (NaN)");if(isNaN(d))throw new TypeError("CronPattern: Syntax error, illegal stepping: (NaN)");if(d===0)throw new TypeError("CronPattern: Syntax error, illegal stepping: 0");if(d>this[t].length)throw new TypeError("CronPattern: Syntax error, steps cannot be greater than maximum value of part ("+this[t].length+")");if(c>A)throw new TypeError("CronPattern: From value is larger than to value: '"+e+"'");for(let f=c;f<=A;f+=d)this.setPart(t,f,n[1]||o)}extractNth(e,t){let r=e,o;if(r.includes("#")){if(t!=="dayOfWeek")throw new Error("CronPattern: nth (#) only allowed in day-of-week field");o=r.split("#")[1],r=r.split("#")[0]}return[r,o]}handleRange(e,t,r,o){let n=this.extractNth(e,t),i=n[0].split("-");if(i.length!==2)throw new TypeError("CronPattern: Syntax error, illegal range: '"+e+"'");let s=parseInt(i[0],10)+r,a=parseInt(i[1],10)+r;if(isNaN(s))throw new TypeError("CronPattern: Syntax error, illegal lower range (NaN)");if(isNaN(a))throw new TypeError("CronPattern: Syntax error, illegal upper range (NaN)");if(s>a)throw new TypeError("CronPattern: From value is larger than to value: '"+e+"'");for(let l=s;l<=a;l++)this.setPart(t,l,n[1]||o)}handleStepping(e,t,r,o){let n=this.extractNth(e,t),i=n[0].split("/");if(i.length!==2)throw new TypeError("CronPattern: Syntax error, illegal stepping: '"+e+"'");i[0]===""&&(i[0]="*");let s=0;i[0]!=="*"&&(s=parseInt(i[0],10)+r);let a=parseInt(i[1],10);if(isNaN(a))throw new TypeError("CronPattern: Syntax error, illegal stepping: (NaN)");if(a===0)throw new TypeError("CronPattern: Syntax error, illegal stepping: 0");if(a>this[t].length)throw new TypeError("CronPattern: Syntax error, max steps for part is ("+this[t].length+")");for(let l=s;l<this[t].length;l+=a)this.setPart(t,l,n[1]||o)}replaceAlphaDays(e){return e.replace(/-sun/gi,"-7").replace(/sun/gi,"0").replace(/mon/gi,"1").replace(/tue/gi,"2").replace(/wed/gi,"3").replace(/thu/gi,"4").replace(/fri/gi,"5").replace(/sat/gi,"6")}replaceAlphaMonths(e){return e.replace(/jan/gi,"1").replace(/feb/gi,"2").replace(/mar/gi,"3").replace(/apr/gi,"4").replace(/may/gi,"5").replace(/jun/gi,"6").replace(/jul/gi,"7").replace(/aug/gi,"8").replace(/sep/gi,"9").replace(/oct/gi,"10").replace(/nov/gi,"11").replace(/dec/gi,"12")}handleNicknames(e){let t=e.trim().toLowerCase();return t==="@yearly"||t==="@annually"?"0 0 1 1 *":t==="@monthly"?"0 0 1 * *":t==="@weekly"?"0 0 * * 0":t==="@daily"?"0 0 * * *":t==="@hourly"?"0 * * * *":e}setNthWeekdayOfMonth(e,t){if(typeof t!="number"&&t==="L")this.dayOfWeek[e]=this.dayOfWeek[e]|Y0;else if(t===ku)this.dayOfWeek[e]=ku;else if(t<6&&t>0)this.dayOfWeek[e]=this.dayOfWeek[e]|GM[t-1];else throw new TypeError(`CronPattern: nth weekday out of range, should be 1-5 or L. Value: ${t}, Type: ${typeof t}`)}},MM=[31,28,31,30,31,30,31,31,30,31,30,31],Yn=[["month","year",0],["day","month",-1],["hour","day",0],["minute","hour",0],["second","minute",0]],io=class jM{tz;ms;second;minute;hour;day;month;year;constructor(t,r){if(this.tz=r,t&&t instanceof Date)if(!isNaN(t))this.fromDate(t);else throw new TypeError("CronDate: Invalid date passed to CronDate constructor");else if(t===void 0)this.fromDate(new Date);else if(t&&typeof t=="string")this.fromString(t);else if(t instanceof jM)this.fromCronDate(t);else throw new TypeError("CronDate: Invalid type ("+typeof t+") passed to CronDate constructor")}isNthWeekdayOfMonth(t,r,o,n){let i=new Date(Date.UTC(t,r,o)).getUTCDay(),s=0;for(let a=1;a<=o;a++)new Date(Date.UTC(t,r,a)).getUTCDay()===i&&s++;if(n&ku&&GM[s-1]&n)return!0;if(n&Y0){let a=new Date(Date.UTC(t,r+1,0)).getUTCDate();for(let l=o+1;l<=a;l++)if(new Date(Date.UTC(t,r,l)).getUTCDay()===i)return!1;return!0}return!1}fromDate(t){if(this.tz!==void 0)if(typeof this.tz=="number")this.ms=t.getUTCMilliseconds(),this.second=t.getUTCSeconds(),this.minute=t.getUTCMinutes()+this.tz,this.hour=t.getUTCHours(),this.day=t.getUTCDate(),this.month=t.getUTCMonth(),this.year=t.getUTCFullYear(),this.apply();else{let r=Ht.toTZ(t,this.tz);this.ms=t.getMilliseconds(),this.second=r.s,this.minute=r.i,this.hour=r.h,this.day=r.d,this.month=r.m-1,this.year=r.y}else this.ms=t.getMilliseconds(),this.second=t.getSeconds(),this.minute=t.getMinutes(),this.hour=t.getHours(),this.day=t.getDate(),this.month=t.getMonth(),this.year=t.getFullYear()}fromCronDate(t){this.tz=t.tz,this.year=t.year,this.month=t.month,this.day=t.day,this.hour=t.hour,this.minute=t.minute,this.second=t.second,this.ms=t.ms}apply(){if(this.month>11||this.day>MM[this.month]||this.hour>59||this.minute>59||this.second>59||this.hour<0||this.minute<0||this.second<0){let t=new Date(Date.UTC(this.year,this.month,this.day,this.hour,this.minute,this.second,this.ms));return this.ms=t.getUTCMilliseconds(),this.second=t.getUTCSeconds(),this.minute=t.getUTCMinutes(),this.hour=t.getUTCHours(),this.day=t.getUTCDate(),this.month=t.getUTCMonth(),this.year=t.getUTCFullYear(),!0}else return!1}fromString(t){if(typeof this.tz=="number"){let r=Ht.fromTZISO(t);this.ms=r.getUTCMilliseconds(),this.second=r.getUTCSeconds(),this.minute=r.getUTCMinutes(),this.hour=r.getUTCHours(),this.day=r.getUTCDate(),this.month=r.getUTCMonth(),this.year=r.getUTCFullYear(),this.apply()}else return this.fromDate(Ht.fromTZISO(t,this.tz))}findNext(t,r,o,n){let i=this[r],s;o.lastDayOfMonth&&(this.month!==1?s=MM[this.month]:s=new Date(Date.UTC(this.year,this.month+1,0,0,0,0,0)).getUTCDate());let a=!o.starDOW&&r=="day"?new Date(Date.UTC(this.year,this.month,1,0,0,0,0)).getUTCDay():void 0;for(let l=this[r]+n;l<o[r].length;l++){let c=o[r][l];if(r==="day"&&o.lastDayOfMonth&&l-n==s&&(c=1),r==="day"&&!o.starDOW){let A=o.dayOfWeek[(a+(l-n-1))%7];if(A&&A&ku)A=this.isNthWeekdayOfMonth(this.year,this.month,l-n,A)?1:0;else if(A)throw new Error(`CronDate: Invalid value for dayOfWeek encountered. ${A}`);t.legacyMode&&!o.starDOM?c=c||A:c=c&&A}if(c)return this[r]=l-n,i!==this[r]?2:1}return 3}recurse(t,r,o){let n=this.findNext(r,Yn[o][0],t,Yn[o][2]);if(n>1){let i=o+1;for(;i<Yn.length;)this[Yn[i][0]]=-Yn[i][2],i++;if(n===3)return this[Yn[o][1]]++,this[Yn[o][0]]=-Yn[o][2],this.apply(),this.recurse(t,r,0);if(this.apply())return this.recurse(t,r,o-1)}return o+=1,o>=Yn.length?this:this.year>=3e3?null:this.recurse(t,r,o)}increment(t,r,o){return this.second+=r.interval!==void 0&&r.interval>1&&o?r.interval:1,this.ms=0,this.apply(),this.recurse(t,r,0)}getDate(t){return t||this.tz===void 0?new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.ms):typeof this.tz=="number"?new Date(Date.UTC(this.year,this.month,this.day,this.hour,this.minute-this.tz,this.second,this.ms)):Ht.fromTZ(Ht.tp(this.year,this.month+1,this.day,this.hour,this.minute,this.second,this.tz),!1)}getTime(){return this.getDate(!1).getTime()}};function Pce(e){if(e===void 0&&(e={}),delete e.name,e.legacyMode=e.legacyMode===void 0?!0:e.legacyMode,e.paused=e.paused===void 0?!1:e.paused,e.maxRuns=e.maxRuns===void 0?1/0:e.maxRuns,e.catch=e.catch===void 0?!1:e.catch,e.interval=e.interval===void 0?0:parseInt(e.interval.toString(),10),e.utcOffset=e.utcOffset===void 0?void 0:parseInt(e.utcOffset.toString(),10),e.unref=e.unref===void 0?!1:e.unref,e.startAt&&(e.startAt=new io(e.startAt,e.timezone)),e.stopAt&&(e.stopAt=new io(e.stopAt,e.timezone)),e.interval!==null){if(isNaN(e.interval))throw new Error("CronOptions: Supplied value for interval is not a number");if(e.interval<0)throw new Error("CronOptions: Supplied value for interval can not be negative")}if(e.utcOffset!==void 0){if(isNaN(e.utcOffset))throw new Error("CronOptions: Invalid value passed for utcOffset, should be number representing minutes offset from UTC.");if(e.utcOffset<-870||e.utcOffset>870)throw new Error("CronOptions: utcOffset out of bounds.");if(e.utcOffset!==void 0&&e.timezone)throw new Error("CronOptions: Combining 'utcOffset' with 'timezone' is not allowed.")}if(e.unref!==!0&&e.unref!==!1)throw new Error("CronOptions: Unref should be either true, false or undefined(false).");return e}function Fu(e){return Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function}function Lce(e){typeof Deno<"u"&&typeof Deno.unrefTimer<"u"?Deno.unrefTimer(e):e&&typeof e.unref<"u"&&e.unref()}var _M=30*1e3,ag=[],HM=class{name;options;_states;fn;constructor(e,t,r){let o,n;if(Fu(t))n=t;else if(typeof t=="object")o=t;else if(t!==void 0)throw new Error("Cron: Invalid argument passed for optionsIn. Should be one of function, or object (options).");if(Fu(r))n=r;else if(typeof r=="object")o=r;else if(r!==void 0)throw new Error("Cron: Invalid argument passed for funcIn. Should be one of function, or object (options).");if(this.name=o?.name,this.options=Pce(o),this._states={kill:!1,blocking:!1,previousRun:void 0,currentRun:void 0,once:void 0,currentTimeout:void 0,maxRuns:o?o.maxRuns:void 0,paused:o?o.paused:!1,pattern:new OM("* * * * *")},e&&(e instanceof Date||typeof e=="string"&&e.indexOf(":")>0)?this._states.once=new io(e,this.options.timezone||this.options.utcOffset):this._states.pattern=new OM(e,this.options.timezone),this.name){if(ag.find(i=>i.name===this.name))throw new Error("Cron: Tried to initialize new named job '"+this.name+"', but name already taken.");ag.push(this)}return n!==void 0&&Fu(n)&&(this.fn=n,this.schedule()),this}nextRun(e){let t=this._next(e);return t?t.getDate(!1):null}nextRuns(e,t){this._states.maxRuns!==void 0&&e>this._states.maxRuns&&(e=this._states.maxRuns);let r=[],o=t||this._states.currentRun||void 0;for(;e--&&(o=this.nextRun(o));)r.push(o);return r}getPattern(){return this._states.pattern?this._states.pattern.pattern:void 0}isRunning(){let e=this.nextRun(this._states.currentRun),t=!this._states.paused,r=this.fn!==void 0,o=!this._states.kill;return t&&r&&o&&e!==null}isStopped(){return this._states.kill}isBusy(){return this._states.blocking}currentRun(){return this._states.currentRun?this._states.currentRun.getDate():null}previousRun(){return this._states.previousRun?this._states.previousRun.getDate():null}msToNext(e){e=e||new Date;let t=this._next(e);return t?e instanceof io||e instanceof Date?t.getTime()-e.getTime():t.getTime()-new io(e).getTime():null}stop(){this._states.kill=!0,this._states.currentTimeout&&clearTimeout(this._states.currentTimeout);let e=ag.indexOf(this);e>=0&&ag.splice(e,1)}pause(){return this._states.paused=!0,!this._states.kill}resume(){return this._states.paused=!1,!this._states.kill}schedule(e){if(e&&this.fn)throw new Error("Cron: It is not allowed to schedule two functions using the same Croner instance.");e&&(this.fn=e);let t=this.msToNext(),r=this.nextRun(this._states.currentRun);return t==null||isNaN(t)||r===null?this:(t>_M&&(t=_M),this._states.currentTimeout=setTimeout(()=>this._checkTrigger(r),t),this._states.currentTimeout&&this.options.unref&&Lce(this._states.currentTimeout),this)}async _trigger(e){if(this._states.blocking=!0,this._states.currentRun=new io(void 0,this.options.timezone||this.options.utcOffset),this.options.catch)try{this.fn!==void 0&&await this.fn(this,this.options.context)}catch(t){Fu(this.options.catch)&&this.options.catch(t,this)}else this.fn!==void 0&&await this.fn(this,this.options.context);this._states.previousRun=new io(e,this.options.timezone||this.options.utcOffset),this._states.blocking=!1}async trigger(){await this._trigger()}runsLeft(){return this._states.maxRuns}_checkTrigger(e){let t=new Date,r=!this._states.paused&&t.getTime()>=e.getTime(),o=this._states.blocking&&this.options.protect;r&&!o?(this._states.maxRuns!==void 0&&this._states.maxRuns--,this._trigger()):r&&o&&Fu(this.options.protect)&&setTimeout(()=>this.options.protect(this),0),this.schedule()}_next(e){let t=!!(e||this._states.currentRun),r=!1;!e&&this.options.startAt&&this.options.interval&&([e,t]=this._calculatePreviousRun(e,t),r=!e),e=new io(e,this.options.timezone||this.options.utcOffset),this.options.startAt&&e&&e.getTime()<this.options.startAt.getTime()&&(e=this.options.startAt);let o=this._states.once||new io(e,this.options.timezone||this.options.utcOffset);return!r&&o!==this._states.once&&(o=o.increment(this._states.pattern,this.options,t)),this._states.once&&this._states.once.getTime()<=e.getTime()||o===null||this._states.maxRuns!==void 0&&this._states.maxRuns<=0||this._states.kill||this.options.stopAt&&o.getTime()>=this.options.stopAt.getTime()?null:o}_calculatePreviousRun(e,t){let r=new io(void 0,this.options.timezone||this.options.utcOffset),o=e;if(this.options.startAt.getTime()<=r.getTime()){o=this.options.startAt;let n=o.getTime()+this.options.interval*1e3;for(;n<=r.getTime();)o=new io(o,this.options.timezone||this.options.utcOffset).increment(this._states.pattern,this.options,!0),n=o.getTime()+this.options.interval*1e3;t=!0}return o===null&&(o=void 0),[o,t]}};import W0 from"crypto";var VM="aes-256-ctr";function qM(e){let t=W0.randomBytes(16),r=this.secret,o=W0.createCipheriv(VM,r,t),n=Buffer.concat([o.update(e),o.final()]),i=t.toString("hex"),s=n.toString("hex");return`${i}${s}`}function YM(e){let t=e.slice(0,32),r=e.slice(32),o=this.secret,n=W0.createDecipheriv(VM,o,Buffer.from(t,"hex"));return Buffer.concat([n.update(Buffer.from(r,"hex")),n.final()]).toString()}var Nu=({err:e,payload:t})=>{let r="error";if(e&&typeof e=="object"&&"name"in e&&typeof e.name=="string"&&typeof t.config.loggingLevels[e.name]<"u"&&(r=t.config.loggingLevels[e.name]),r){let o={};r==="info"?o.msg=typeof e=="object"&&"message"in e?e.message:"Error":o.err=e,t.logger[r](o)}};var oa=(e,t)=>{let r=new Headers(t);return e.forEach((o,n)=>{r.append(n,o)}),r};var vu=async e=>{let t={user:null};if(!e.payload.authStrategies?.length)return t;for(let r of e.payload.authStrategies){e.strategyName=r.name,e.isGraphQL=!!e.isGraphQL,e.canSetHeaders=!!e.canSetHeaders;try{let o=await r.authenticate(e);o.responseHeaders&&(o.responseHeaders=oa(t.responseHeaders||new Headers,o.responseHeaders||new Headers)),t=o}catch(o){Nu({err:o,payload:e.payload})}if(t.user)return t}return t};function WM(e){let t=!0;for(let r in e)typeof e[r]=="object"?J0(e[r])?e[r]=!0:t=!1:e[r]!==!0&&(t=!1);return t}function J0(e){let t=e,r=!0;if("blocks"in t&&t.blocks){for(let i in t.blocks)if(typeof t.blocks[i]=="object"){for(let s in t.blocks[i])if(s==="fields")t.blocks[i].fields&&(WM(t.blocks[i].fields)?t.blocks[i].fields=!0:r=!1);else if(typeof t.blocks[i][s]=="object")if(JM(t.blocks[i][s]))if(t.blocks[i][s].permission===!0&&!("where"in t.blocks[i][s])){t.blocks[i][s]=!0;continue}else if(t.blocks[i][s].permission===!0&&"where"in t.blocks[i][s])r=!1;else{r=!1,t.blocks[i][s]=!1,delete t.blocks[i][s];continue}else throw new Error("Unexpected object in block permissions")}else t.blocks[i]!==!0&&(r=!1,delete t.blocks[i]);r&&(t.blocks=!0)}let o=!0;t.fields&&(WM(t.fields)?t.fields=!0:o=!1);let n=!0;for(let i in t)if(!(i==="fields"||i==="blocks"))if(typeof t[i]=="object")if(JM(t[i]))if(t[i].permission===!0&&!("where"in t[i])){t[i]=!0;continue}else if(t[i].permission===!0&&"where"in t[i])n=!1;else{n=!1,t[i]=!1,delete t[i];continue}else throw new Error("Unexpected object in fields permissions");else t[i]!==!0&&(n=!1);return o&&r&&n}function JM(e){return typeof e=="object"&&"permission"in e&&typeof e.permission=="boolean"}function zM(e){Object.keys(e).forEach(t=>{typeof e[t]=="object"&&e[t]!==null?(zM(e[t]),Object.keys(e[t]).length===0&&delete e[t]):(e[t]===null||e[t]===void 0)&&delete e[t]})}function Uce(e){if(typeof e!="object")return;let t=Object.values(e);for(let r of t)J0(r)}function Oce(e){if(typeof e!="object")return;let t=Object.values(e);for(let r of t)J0(r)}function Wl(e){return e.canAccessAdmin===!1&&delete e.canAccessAdmin,e.collections&&Uce(e.collections),e.globals&&Oce(e.globals),zM(e),e}async function Pu({req:e}){let t={collections:{},globals:{}},{payload:r,user:o}=e,n=!!o,i=o&&o.collection?r?.collections?.[o.collection]?.config:null;i&&r.config.admin.user===o?.collection?t.canAccessAdmin=i.access.admin?await i.access.admin({req:e}):n:t.canAccessAdmin=!1;let s={};return await Promise.all(r.config.collections.map(async a=>{let l=["create","read","update","delete"];a.auth&&typeof a.auth.maxLoginAttempts<"u"&&a.auth.maxLoginAttempts!==0&&l.push("unlock"),a.versions&&l.push("readVersions");let c=await Mo({type:"collection",blockPolicies:s,entity:a,operations:l,req:e});t.collections[a.slug]=c})),await Promise.all(r.config.globals.map(async a=>{let l=["read","update"];a.versions&&l.push("readVersions");let c=await Mo({type:"global",blockPolicies:s,entity:a,operations:l,req:e});t.globals[a.slug]=c})),Wl(t)}var $M=async e=>{let{canSetHeaders:t,headers:r}=e,o=e.req,{payload:n}=o;try{let{responseHeaders:i,user:s}=await vu({canSetHeaders:t,headers:r,payload:n});return o.user=s,o.responseHeaders=i,{permissions:await Pu({req:o}),responseHeaders:i,user:s}}catch(i){throw await H(o),i}};var KM=async(e,t)=>{let{headers:r,req:o}=t;return await $M({canSetHeaders:!!t.canSetHeaders,headers:r,req:await W({req:o},e)})};import Mce from"crypto";var ZM=e=>async({headers:t,payload:r})=>{let o=t.get("Authorization");if(o?.startsWith(`${e.slug} API-Key `)){let n=o.replace(`${e.slug} API-Key `,""),i=Mce.createHmac("sha1",r.secret).update(n).digest("hex");try{let s={};e.auth?.verify?s.and=[{apiKeyIndex:{equals:i}},{_verified:{not_equals:!1}}]:s.apiKeyIndex={equals:i};let a=await r.find({collection:e.slug,depth:e.auth.depth,limit:1,overrideAccess:!0,pagination:!1,where:s});if(a.docs&&a.docs.length>0){let l=a.docs[0];return l.collection=e.slug,l._strategy="api-key",{user:l}}}catch{return{user:null}}}return{user:null}};async function z0({isGraphQL:e,payload:t,strategyName:r="local-jwt"}){if(typeof t?.config?.admin?.autoLogin!="object"||t.config.admin?.autoLogin.prefillOnly||!t?.config?.admin?.autoLogin||!t.config.admin?.autoLogin.email&&!t.config.admin?.autoLogin.username)return{user:null};let o=t.collections[t.config.admin.user],n={or:[]};t.config.admin?.autoLogin.email?n.or?.push({email:{equals:t.config.admin?.autoLogin.email}}):t.config.admin?.autoLogin.username&&n.or?.push({username:{equals:t.config.admin?.autoLogin.username}});let i=(await t.find({collection:o.config.slug,depth:e?0:o.config.auth.depth,limit:1,pagination:!1,where:n})).docs[0];return i?(i.collection=o.config.slug,i._strategy=r,{user:i}):{user:null}}var $0=async({headers:e,isGraphQL:t=!1,payload:r,strategyName:o="local-jwt"})=>{try{let n=Sn({headers:e,payload:r});if(!n)return e.get("DisableAutologin")!=="true"?await z0({isGraphQL:t,payload:r,strategyName:o}):{user:null};let i=new TextEncoder().encode(r.secret),{payload:s}=await Gm(n,i),a=r.collections[s.collection],l=await r.findByID({id:s.id,collection:s.collection,depth:t?0:a.config.auth.depth});if(l&&(!a.config.auth.verify||l._verified)){if(a.config.auth.useSessions){if(!(l.sessions||[]).find(({id:A})=>A===s.sid)||!s.sid)return{user:null};l._sid=s.sid}return l.collection=a.config.slug,l._strategy=o,{user:l}}else return e.get("DisableAutologin")!=="true"?await z0({isGraphQL:t,payload:r,strategyName:o}):{user:null}}catch{return e.get("DisableAutologin")!=="true"?await z0({isGraphQL:t,payload:r,strategyName:o}):{user:null}}};import i_ from"fs/promises";import Z0 from"node:process";function so(e,t){return e!=null&&Object.prototype.hasOwnProperty.call(e,t)}var _ce=["Cell","Description","Field","Filter"];function sn({addToImportMap:e,baseDir:t,config:r,fields:o,importMap:n,imports:i}){for(let s of o){if("fields"in s)sn({addToImportMap:e,baseDir:t,config:r,fields:s.fields,importMap:n,imports:i});else if(s.type==="blocks")sn({addToImportMap:e,baseDir:t,config:r,fields:s.blocks.filter(a=>typeof a!="string"),importMap:n,imports:i});else if(s.type==="tabs")sn({addToImportMap:e,baseDir:t,config:r,fields:s.tabs,importMap:n,imports:i});else if(s.type==="richText")s?.editor&&typeof s.editor=="object"&&s.editor.generateImportMap&&typeof s.editor.generateImportMap=="function"&&s.editor.generateImportMap({addToImportMap:e,baseDir:t,config:r,importMap:n,imports:i});else if(s.type==="ui"&&s?.admin?.components)for(let a in s.admin.components)a in _ce||e(s.admin.components[a]);so(s?.admin,"jsx")&&e(s.admin.jsx),so(s?.admin?.components,"Label")&&e(s.admin.components.Label),so(s?.admin?.components,"Block")&&e(s.admin.components.Block),so(s?.admin?.components,"Cell")&&e(s?.admin?.components?.Cell),so(s?.admin?.components,"Description")&&e(s?.admin?.components?.Description),so(s?.admin?.components,"Field")&&e(s?.admin?.components?.Field),so(s?.admin?.components,"Filter")&&e(s?.admin?.components?.Filter),so(s?.admin?.components,"Error")&&e(s?.admin?.components?.Error),so(s?.admin?.components,"afterInput")&&e(s?.admin?.components?.afterInput),so(s?.admin?.components,"beforeInput")&&e(s?.admin?.components?.beforeInput),so(s?.admin?.components,"RowLabel")&&e(s?.admin?.components?.RowLabel),so(s?.admin?.components,"Diff")&&e(s?.admin?.components?.Diff)}}function XM({addToImportMap:e,baseDir:t,collections:r,config:o,importMap:n,imports:i}){for(let s of r){if(sn({addToImportMap:e,baseDir:t,config:o,fields:s.fields,importMap:n,imports:i}),e(s.admin?.components?.afterList),e(s.admin?.components?.listMenuItems),e(s.admin?.components?.afterListTable),e(s.admin?.components?.beforeList),e(s.admin?.components?.beforeListTable),e(s.admin?.components?.Description),e(s.admin?.components?.edit?.beforeDocumentControls),e(s.admin?.components?.edit?.editMenuItems),e(s.admin?.components?.edit?.PreviewButton),e(s.admin?.components?.edit?.PublishButton),e(s.admin?.components?.edit?.SaveButton),e(s.admin?.components?.edit?.SaveDraftButton),e(s.admin?.components?.edit?.Upload),s.upload?.admin?.components?.controls&&e(s.upload?.admin?.components?.controls),s.admin?.components?.views?.edit)for(let a of Object.values(s.admin?.components?.views?.edit))"Component"in a&&e(a?.Component),"actions"in a&&e(a?.actions),"tab"in a&&(e(a?.tab?.Component),e(a?.tab?.Pill));e(s.admin?.components?.views?.list?.Component),e(s.admin?.components?.views?.list?.actions)}}function e_({addToImportMap:e,baseDir:t,config:r,globals:o,importMap:n,imports:i}){for(let s of o)if(sn({addToImportMap:e,baseDir:t,config:r,fields:s.fields,importMap:n,imports:i}),e(s.admin?.components?.elements?.Description),e(s.admin?.components?.elements?.PreviewButton),e(s.admin?.components?.elements?.PublishButton),e(s.admin?.components?.elements?.SaveButton),e(s.admin?.components?.elements?.SaveDraftButton),s.admin?.components?.views?.edit)for(let a of Object.values(s.admin?.components?.views?.edit))"Component"in a&&e(a?.Component),"actions"in a&&e(a?.actions),"tab"in a&&(e(a?.tab?.Component),e(a?.tab?.Pill))}function t_({addToImportMap:e,baseDir:t,config:r,importMap:o,imports:n}){if(XM({addToImportMap:e,baseDir:t,collections:r.collections,config:r,importMap:o,imports:n}),e_({addToImportMap:e,baseDir:t,config:r,globals:r.globals,importMap:o,imports:n}),r?.blocks){let i=Object.values(r.blocks);i?.length&&sn({addToImportMap:e,baseDir:t,config:r,fields:i,importMap:o,imports:n})}if(typeof r.admin?.avatar=="object"&&e(r.admin?.avatar?.Component),e(r.admin?.components?.Nav),e(r.admin?.components?.header),e(r.admin?.components?.logout?.Button),e(r.admin?.components?.graphics?.Icon),e(r.admin?.components?.graphics?.Logo),e(r.admin?.components?.actions),e(r.admin?.components?.afterDashboard),e(r.admin?.components?.afterLogin),e(r.admin?.components?.afterNavLinks),e(r.admin?.components?.beforeDashboard),e(r.admin?.components?.beforeLogin),e(r.admin?.components?.beforeNavLinks),e(r.admin?.components?.providers),r.admin?.components?.views&&Object.keys(r.admin?.components?.views)?.length)for(let i in r.admin?.components?.views){let s=r.admin?.components?.views[i];e(s?.Component)}if(r?.admin?.importMap?.generators?.length)for(let i of r.admin.importMap.generators)i({addToImportMap:e,baseDir:t,config:r,importMap:o,imports:n});if(r?.admin?.dependencies)for(let i of Object.values(r.admin.dependencies))e(i.path)}import Gce from"crypto";import jce from"path";function lg(e){if(!e)return null;let t=typeof e=="string"?e:e.path,r="",o="default";return t?.includes("#")?[r,o]=t.split("#"):r=t,typeof e=="object"&&e.exportName&&(o=e.exportName),{exportName:o,path:r}}function Hce(e,t){let r=e.replace(/\\/g,"/"),o=t.replace(/\\/g,"/");if(r.startsWith("./")){let n=o.startsWith("./")?o.substring(2):o;return`${r}${n}`}return jce.posix.join(r,o)}function K0({importMap:e,importMapToBaseDirPath:t,imports:r,payloadComponent:o}){if(!o)return null;let{exportName:n,path:i}=lg(o);if(e[i+"#"+n])return null;let s=n+"_"+Gce.createHash("md5").update(i).digest("hex");if(e[i+"#"+n]=s,i.startsWith(".")||i.startsWith("/")){let l=Hce(t,i);return r[s]={path:l,specifier:n},{path:l,specifier:n}}else return r[s]={path:i,specifier:n},{path:i,specifier:n}}import r_ from"path";function o_({baseDir:e,importMapPath:t}){let r=r_.dirname(t),o=r_.relative(r,e).replace(/\\/g,"/");return o?!o.startsWith(".")&&!o.startsWith("/")&&(o=`./${o}`):o="./",o.endsWith("/")||(o+="/"),o}import Ag from"fs/promises";import cg from"path";async function Lu(e){try{return await Ag.access(e),!0}catch{return!1}}async function n_({adminRoute:e="/admin",importMapFile:t,rootDir:r}){let o;if(t?.length){if(!await Lu(t))try{await Ag.writeFile(t,"",{flag:"wx"})}catch(n){throw new Error(`Could not find the import map file at ${t}${n instanceof Error&&n?.message?`: ${n.message}`:""}`)}o=t}else{let n=cg.resolve(r,`app/(payload)${e}/`),i=cg.resolve(r,`src/app/(payload)${e}/`);if(n&&await Lu(n))o=cg.resolve(n,"importMap.js"),await Lu(o)||await Ag.writeFile(o,"",{flag:"wx"});else if(i&&await Lu(i))o=cg.resolve(i,"importMap.js"),await Lu(o)||await Ag.writeFile(o,"",{flag:"wx"});else throw new Error(`Could not find Payload import map folder. Looked in ${n} and ${i}`)}return o}async function X0(e,t){let r=t?.log??!0;r&&console.log("Generating import map");let o={},n={},i=Z0.env.ROOT_DIR??Z0.cwd(),s=e.admin.importMap.baseDir??Z0.cwd(),a=await n_({adminRoute:e.routes.admin,importMapFile:e?.admin?.importMap?.importMapFile,rootDir:i}),l=o_({baseDir:s,importMapPath:a});t_({addToImportMap:A=>{if(A){if(typeof A!="object"&&typeof A!="string")throw console.error(A),new Error("addToImportMap > Payload component must be an object or a string");if(Array.isArray(A))for(let d of A)K0({importMap:o,importMapToBaseDirPath:l,imports:n,payloadComponent:d});else K0({importMap:o,importMapToBaseDirPath:l,imports:n,payloadComponent:A})}},baseDir:e.admin.importMap.baseDir,config:e,importMap:o,imports:n}),await Vce({componentMap:o,force:t?.force,importMap:n,importMapFilePath:a,log:r})}async function Vce({componentMap:e,force:t,importMap:r,importMapFilePath:o,log:n}){let i=[];for(let[l,{path:c,specifier:A}]of Object.entries(r))i.push(`import { ${A} as ${l} } from '${c}'`);let s=[];for(let[l,c]of Object.entries(e))s.push(`  "${l}": ${c}`);let a=`${i.join(`
`)}

export const importMap = {
${s.join(`,
`)}
}
`;if(!t&&(await i_.readFile(o,"utf-8"))?.trim()===a?.trim()){n&&console.log("No new imports found, skipping writing import map");return}n&&console.log("Writing import map to",o),await i_.writeFile(o,a)}import Yce from"path";import{fileURLToPath as Wce}from"url";function s_(e){let[t,...r]=e.split("-");return{parts:t.split(".").map(Number),preReleases:r}}function a_(e){return(e.match(/\d+/g)||[]).map(Number)}function qce(e,t){let r=a_(e),o=a_(t);for(let n=0;n<Math.max(r.length,o.length);n++){if((r[n]||0)<(o[n]||0))return-1;if((r[n]||0)>(o[n]||0))return 1}return e<t?-1:e>t?1:0}function l_(e,t,r){let{parts:o,preReleases:n}=r?r(e):s_(e),{parts:i,preReleases:s}=r?r(t):s_(t);for(let a=0;a<Math.max(o.length,i.length);a++){if((o[a]||0)>(i[a]||0))return"greater";if((o[a]||0)<(i[a]||0))return"lower"}if(n?.length||s?.length)for(let a=0;a<Math.max(n.length,s.length);a++){if(!n[a])return"greater";if(!s[a])return"lower";let l=qce(n[a],s[a]);if(l!==0)return l===1?"greater":"lower"}return"equal"}var Jce=Wce(import.meta.url),c_=Yce.dirname(Jce);async function eQ({dependencyGroups:e,dependencyVersions:t}){if(e?.length)for(let r of e){let o=await ug(c_,r.dependencies),n={};for(let[i,{version:s}]of o.resolved)Object.keys(n).includes(s)||(n[s]=i);if(Object.keys(n).length>1){let i=r.targetVersion??o.resolved.get(r.targetVersionDependency)?.version;if(i){let s=Object.entries(n).filter(([a])=>a!==i).map(([a,l])=>`${l}@${a} (Please change this to ${i})`).join(", ");throw new Error(`Mismatching "${r.name}" dependency versions found: ${s}. All "${r.name}" packages must have the same version. This is an error with your set-up, not a bug in Payload. Please go to your package.json and ensure all "${r.name}" packages have the same version.`)}else{let s=Object.entries(n).map(([a,l])=>`${l}@${a}`).join(", ");throw new Error(`Mismatching "${r.name}" dependency versions found: ${s}. All "${r.name}" packages must have the same version. This is an error with your set-up, not a bug in Payload. Please go to your package.json and ensure all "${r.name}" packages have the same version.`)}}}if(t&&Object.keys(t).length){let r=await ug(c_,Object.keys(t));for(let[o,n]of Object.entries(t)){let i=r.resolved.get(o);if(!i){if(!n.required)continue;throw new Error(`Dependency ${o} not found. Please ensure it is installed.`)}if(n.version){let s=n.version.startsWith(">=")?n.version.slice(2):n.version,a=l_(i.version,s,n.customVersionParser);if(n.version.startsWith(">=")){if(a==="lower")throw new Error(`Dependency ${o} is on version ${i.version}, but ${n.version} or greater is required. Please update this dependency.`)}else if(a==="lower"||a==="greater")throw new Error(`Dependency ${o} is on version ${i.version}, but ${n.version} is required. Please update this dependency.`)}}}}var A_=["payload","@payloadcms/bundler-vite","@payloadcms/bundler-webpack","@payloadcms/db-mongodb","@payloadcms/db-postgres","@payloadcms/email-nodemailer","@payloadcms/email-resend","@payloadcms/graphql","@payloadcms/live-preview-react","@payloadcms/live-preview","@payloadcms/next/utilities","@payloadcms/plugin-cloud-storage","@payloadcms/payload-cloud","@payloadcms/plugin-form-builder","@payloadcms/plugin-import-export","@payloadcms/plugin-multi-tenant","@payloadcms/plugin-nested-docs","@payloadcms/plugin-redirects","@payloadcms/plugin-search","@payloadcms/plugin-seo","@payloadcms/plugin-stripe","@payloadcms/plugin-zapier","@payloadcms/richtext-lexical","@payloadcms/richtext-slate","@payloadcms/storage-azure","@payloadcms/storage-gcs","@payloadcms/storage-s3","@payloadcms/storage-uploadthing","@payloadcms/storage-vercel-blob","@payloadcms/translations","@payloadcms/ui/shared"];function u_(){let e=[...A_];process.env.PAYLOAD_CI_DEPENDENCY_CHECKER!=="true"&&e.push("@payloadcms/plugin-sentry"),eQ({dependencyGroups:[{name:"payload",dependencies:e,targetVersionDependency:"payload"}]})}var d_=async e=>{let t=e;try{if(t.collection.config.hooks.beforeOperation?.length)for(let f of t.collection.config.hooks.beforeOperation)t=await f({args:t,collection:t.collection.config,context:t.req.context,operation:"countVersions",req:t.req})||t;let{collection:{config:r},disableErrors:o,overrideAccess:n,req:i,where:s}=t,{payload:a}=i,l;if(!n&&(l=await oe({disableErrors:o,req:i},r.access.readVersions),l===!1))return{totalDocs:0};let c,A=Ae(s,l),d=Qo(a.config,r,!0);return zt({fields:d,payload:a,where:A}),await Ye({collectionConfig:r,overrideAccess:n,req:i,versionFields:d,where:s}),c=await a.db.countVersions({collection:r.slug,req:i,where:A}),c=await Je({args:t,collection:r,operation:"countVersions",result:c}),c}catch(r){throw await H(t.req),r}};async function f_(e,t){let{collection:r,disableErrors:o,overrideAccess:n=!0,where:i}=t,s=e.collections[r];if(!s)throw new F(`The collection with slug ${String(r)} can't be found. Count Versions Operation.`);return d_({collection:s,disableErrors:o,overrideAccess:n,req:await W(t,e),where:i})}var tQ={defaultFromAddress:"info@payloadcms.com",defaultFromName:"Payload"};var p_=e=>{let t;return typeof e.to=="string"?t=e.to:Array.isArray(e.to)?t=e.to.map(r=>typeof r=="string"?r:r.address?r.address:"").join(", "):e.to?.address&&(t=e.to.address),t};var h_=({payload:e})=>({name:"console",defaultFromAddress:tQ.defaultFromAddress,defaultFromName:tQ.defaultFromName,sendEmail:async t=>{let o=`Email attempted without being configured. To: '${p_(t)}', Subject: '${t.subject}'`;return e.logger.info({msg:o}),Promise.resolve()}});var g_=e=>({queue:async t=>{let r;if(t.queue)r=t.queue;else if(t.workflow){let n=e.config.jobs?.workflows?.find(({slug:i})=>i===t.workflow);n?.queue&&(r=n.queue)}let o={input:t.input};return r&&(o.queue=r),t.waitUntil&&(o.waitUntil=t.waitUntil?.toISOString()),t.workflow&&(o.workflowSlug=t.workflow),t.task&&(o.taskSlug=t.task),e?.config?.jobs?.depth||e?.config?.jobs?.runHooks?await e.create({collection:wt,data:o,depth:e.config.jobs.depth??0,req:t.req}):Yl({config:e.config,doc:await e.db.create({collection:wt,data:o,req:t.req})})},run:async t=>{let r=t?.req??await W({},e);return await gu({allQueues:t?.allQueues,limit:t?.limit,overrideAccess:t?.overrideAccess!==!1,processingOrder:t?.processingOrder,queue:t?.queue,req:r,sequential:t?.sequential,where:t?.where})},runByID:async t=>{let r=t.req??await W({},e);return await gu({id:t.id,overrideAccess:t.overrideAccess!==!1,req:r})},cancel:async t=>{let r=t.req??await W({},e),o=[t.where,{completedAt:{exists:!1}},{hasError:{not_equals:!0}}];t.queue&&o.push({queue:{equals:t.queue}}),await hu({data:{completedAt:null,error:{cancelled:!0},hasError:!0,processing:!1,waitUntil:null},depth:0,disableTransaction:!0,req:r,returning:!1,where:{and:o}})},cancelByID:async t=>{let r=t.req??await W({},e);await ql({id:t.id,data:{completedAt:null,error:{cancelled:!0},hasError:!0,processing:!1,waitUntil:null},depth:0,disableTransaction:!0,req:r,returning:!1})}});function m_(){return process.env.NEXT_PHASE==="phase-production-build"||process.env.npm_lifecycle_event==="build"}import{pino as rQ}from"pino";import{build as y_}from"pino-pretty";var E_={colorize:!0,ignore:"pid,hostname",translateTime:"SYS:HH:MM:ss"},zce=y_({...E_,destination:1,sync:!0}),C_=y_(E_),I_=(e="payload",t)=>{if(!t)return rQ(C_);if(t==="sync")return rQ(zce);if("options"in t){let{destination:r,options:o}=t;return o.name||(o.name=e),o.enabled||(o.enabled=process.env.DISABLE_LOGGING!=="true"),rQ(o,r)}else return t};var pg=We(w_(),1);import{execSync as iAe}from"child_process";import{randomBytes as sAe}from"crypto";import k_ from"fs";import N_ from"path";import{fileURLToPath as aAe}from"url";import S_ from"fs";import Pi from"path";function Zce({condition:e,dir:t,fileNames:r}){let{root:o}=Pi.parse(t);for(;;){if(r?.length){let i=!1;for(let s of r){let a=Pi.join(t,s);if(T_(a)){if(!e)return a;i=!0;break}}if(!i&&t!==o){t=Pi.dirname(t);continue}}let n=e?.(t);if(n===!0)return t;if(typeof n=="string"&&n?.length)return n;if(t===o)return null;t=Pi.dirname(t)}}async function Uu({condition:e,dir:t,fileNames:r}){let{root:o}=Pi.parse(t);for(;;){if(r?.length){let i=!1;for(let s of r){let a=Pi.resolve(t,s);if(await x_(a)){if(!e)return a;i=!0;break}}if(!i&&t!==o){t=Pi.dirname(t);continue}}let n=await e?.(t);if(n===!0)return t;if(typeof n=="string"&&n?.length)return n;if(t===o)return null;t=Pi.dirname(t)}}function T_(e){try{return S_.accessSync(e),!0}catch{return!1}}async function x_(e){try{return await S_.promises.access(e),!0}catch{return!1}}import rAe from"node:assert";import iQ from"node:fs";import F_ from"node:path";import R_ from"node:os";import it from"node:path";import oQ from"node:process";var Li=R_.homedir(),nQ=R_.tmpdir(),{env:Jl}=oQ,Xce=e=>{let t=it.join(Li,"Library");return{cache:it.join(t,"Caches",e),config:it.join(t,"Preferences",e),data:it.join(t,"Application Support",e),log:it.join(t,"Logs",e),temp:it.join(nQ,e)}},eAe=e=>{let t=Jl.APPDATA||it.join(Li,"AppData","Roaming"),r=Jl.LOCALAPPDATA||it.join(Li,"AppData","Local");return{cache:it.join(r,e,"Cache"),config:it.join(t,e,"Config"),data:it.join(r,e,"Data"),log:it.join(r,e,"Log"),temp:it.join(nQ,e)}},tAe=e=>{let t=it.basename(Li);return{cache:it.join(Jl.XDG_CACHE_HOME||it.join(Li,".cache"),e),config:it.join(Jl.XDG_CONFIG_HOME||it.join(Li,".config"),e),data:it.join(Jl.XDG_DATA_HOME||it.join(Li,".local","share"),e),log:it.join(Jl.XDG_STATE_HOME||it.join(Li,".local","state"),e),temp:it.join(nQ,t,e)}};function D_(e,{suffix:t="nodejs"}={}){if(typeof e!="string")throw new TypeError(`Expected a string, got ${typeof e}`);return t&&(e+=`-${t}`),oQ.platform==="darwin"?Xce(e):oQ.platform==="win32"?eAe(e):tAe(e)}var sQ=()=>Object.create(null),oAe=(e,t)=>{let r=new Set(["function","symbol","undefined"]),o=typeof t;if(r.has(o))throw new TypeError(`Setting a value of type \`${o}\` for key \`${e}\` is not allowed as it's not supported by JSON`)},dg=class{#e;_deserialize=t=>JSON.parse(t);_serialize=t=>JSON.stringify(t,void 0,"	");events;path;constructor(){let t={configFileMode:438,configName:"config",fileExtension:"json",projectSuffix:"nodejs"},r=D_("payload",{suffix:t.projectSuffix}).config;this.#e=t,this.events=new EventTarget;let o=t.fileExtension?`.${t.fileExtension}`:"";this.path=F_.resolve(r,`${t.configName??"config"}${o}`);let n=this.store,i=Object.assign(sQ(),n);try{rAe.deepEqual(n,i)}catch{this.store=i}}_ensureDirectory(){iQ.mkdirSync(F_.dirname(this.path),{recursive:!0})}_write(t){let r=this._serialize(t);iQ.writeFileSync(this.path,r,{mode:this.#e.configFileMode})}delete(t){let{store:r}=this;delete r[t],this.store=r}get(t){let{store:r}=this;return r[t]}set(t,r){if(typeof t!="string"&&typeof t!="object")throw new TypeError(`Expected \`key\` to be of type \`string\` or \`object\`, got ${typeof t}`);if(typeof t!="object"&&r===void 0)throw new TypeError("Use `delete()` to clear values");let{store:o}=this,n=(i,s)=>{oAe(i,s),o[i]=s};if(typeof t=="object"){let i=t;for(let[s,a]of Object.entries(i))n(s,a)}else n(t,r);this.store=o}*[Symbol.iterator](){for(let[t,r]of Object.entries(this.store))yield[t,r]}get size(){return Object.keys(this.store).length}get store(){try{let t=iQ.readFileSync(this.path,"utf8"),r=this._deserialize(t);return Object.assign(sQ(),r)}catch(t){if(t?.code==="ENOENT")return this._ensureDirectory(),sQ();throw t}}set store(t){this._ensureDirectory(),this._write(t),this.events.dispatchEvent(new Event("change"))}};import{createHash as nAe}from"crypto";var an=(e,t)=>{let r=nAe("sha256");return r.update(t),r.update(e),r.digest("hex")};var fg=null,hg=async({event:e,payload:t})=>{try{if(t.config.telemetry!==!1){let{packageJSON:r,packageJSONPath:o}=await uAe();if(!fg){let{projectID:n,source:i}=cAe(t,r);fg={ciName:pg.default.isCI?pg.default.name:null,envID:lAe(),isCI:pg.default.isCI,nodeEnv:process.env.NODE_ENV||"development",nodeVersion:process.version,payloadVersion:fAe(r),projectID:n,projectIDSource:i,...pAe(t),dbAdapter:t.db.name,emailAdapter:t.email?.name||null,uploadAdapters:t.config.upload.adapters}}if(process.env.PAYLOAD_TELEMETRY_DEBUG){t.logger.info({event:{...fg,...e,packageJSONPath:o},msg:"Telemetry Event"});return}await fetch("https://telemetry.payloadcms.com/events",{body:JSON.stringify({...fg,...e}),headers:{"Content-Type":"application/json"},method:"post"})}}catch{}},lAe=()=>{let e=new dg,t="envID",r=e.get(t);if(r)return r;let o=sAe(32).toString("hex");return e.set(t,o),o},cAe=(e,t)=>{let r=AAe(e);if(r)return{projectID:an(r,e.secret),source:"git"};let o=dAe(e,t);if(o)return{projectID:an(o,e.secret),source:"packageJSON"};let n=e.config.serverURL;if(n)return{projectID:an(n,e.secret),source:"serverURL"};let i=process.cwd();return{projectID:an(i,e.secret),source:"cwd"}},AAe=e=>{try{let t=iAe("git config --local --get remote.origin.url",{stdio:"pipe",timeout:1e3});return an(String(t).trim(),e.secret)}catch{return null}},uAe=async()=>{let e=N_.resolve(process.cwd(),"package.json");if(!k_.existsSync(e)){let o=aAe(import.meta.url),n=N_.dirname(o);e=await Uu({dir:n,fileNames:["package.json"]})}let t=await k_.promises.readFile(e,"utf-8");return{packageJSON:JSON.parse(t),packageJSONPath:e}},dAe=(e,t)=>an(t.name,e.secret),fAe=e=>e?.dependencies?.payload??"",pAe=e=>e.config.localization?{locales:e.config.localization.localeCodes,localizationDefaultLocale:e.config.localization.defaultLocale,localizationEnabled:!0}:{locales:[],localizationDefaultLocale:null,localizationEnabled:!1};var v_=e=>{hg({event:{type:"server-init"},payload:e})};var P_=({callback:e,callbackStack:t,config:r,data:o,field:n,fillEmpty:i,leavesFirst:s,parentIsLocalized:a,parentRef:l})=>{if(i){if(n.type==="array"&&vr({callback:e,callbackStack:t,config:r,fields:n.fields,isTopLevel:!1,leavesFirst:s,parentIsLocalized:a||n.localized,parentRef:l}),n.type==="blocks")for(let c of n.blockReferences??n.blocks){let A=typeof c=="string"?r?.blocks?.find(d=>d.slug===c):c;A&&vr({callback:e,callbackStack:t,config:r,fields:A.fields,isTopLevel:!1,leavesFirst:s,parentIsLocalized:a||n.localized,parentRef:l})}return}for(let c of o){let A;n.type==="blocks"&&typeof c?.blockType=="string"?A=(n.blockReferences?r?.blocks?.find(f=>f.slug===c.blockType)??n.blockReferences.find(f=>typeof f!="string"&&f.slug===c.blockType):n.blocks.find(f=>f.slug===c.blockType))?.fields:n.type==="array"&&(A=n.fields),A&&vr({callback:e,callbackStack:t,config:r,fields:A,fillEmpty:i,isTopLevel:!1,leavesFirst:s,parentIsLocalized:a||n.localized,parentRef:l,ref:c})}},vr=({callback:e,callbackStack:t=[],config:r,fields:o,fillEmpty:n=!0,isTopLevel:i=!0,leavesFirst:s=!1,parentIsLocalized:a,parentRef:l={},ref:c={}})=>{o.some(A=>{let d=[];i||(d=t);let f=!1,u=()=>{f=!0};if(!c||typeof c!="object")return;if(!s&&e&&e({field:A,next:u,parentIsLocalized:a,parentRef:l,ref:c}))return!0;if(s&&d.push(()=>e({field:A,next:u,parentIsLocalized:a,parentRef:l,ref:c})),f)return!1;let p=c,h=l;if(A.type==="tabs"&&"tabs"in A){for(let g of A.tabs){let m=c;if(f)return!1;if("name"in g&&g.name){if(!c[g.name]||typeof c[g.name]!="object")if(n)g.localized?c[g.name]={en:{}}:c[g.name]={};else continue;if(e&&!s&&e({field:{...g,type:"tab"},next:u,parentIsLocalized:a,parentRef:h,ref:m}))return!0;if(s&&d.push(()=>e({field:{...g,type:"tab"},next:u,parentIsLocalized:a,parentRef:h,ref:m})),m=m[g.name],g.localized)for(let y in m)m[y]&&typeof m[y]=="object"&&vr({callback:e,callbackStack:d,config:r,fields:g.fields,fillEmpty:n,isTopLevel:!1,leavesFirst:s,parentIsLocalized:!0,parentRef:h,ref:m[y]})}else{if(e&&!s&&e({field:{...g,type:"tab"},next:u,parentIsLocalized:a,parentRef:h,ref:m}))return!0;s&&d.push(()=>e({field:{...g,type:"tab"},next:u,parentIsLocalized:a,parentRef:h,ref:m}))}if(g.localized||vr({callback:e,callbackStack:d,config:r,fields:g.fields,fillEmpty:n,isTopLevel:!1,leavesFirst:s,parentIsLocalized:!1,parentRef:h,ref:m}),f)return!1}return}if(A.type==="tab"||es(A)||A.type==="blocks"){if("name"in A&&A.name){if(h=p,!c[A.name])if(n)A.type==="group"||A.type==="tab"?ft({field:A,parentIsLocalized:a})?c[A.name]={en:{}}:c[A.name]={}:(A.type==="array"||A.type==="blocks")&&(ft({field:A,parentIsLocalized:a})?c[A.name]={en:[]}:c[A.name]=[]);else return;p=c[A.name]}if((A.type==="tab"||A.type==="group")&&ft({field:A,parentIsLocalized:a})&&p&&typeof p=="object"){if(J(A))for(let g in p)p[g]&&vr({callback:e,callbackStack:d,config:r,fields:A.fields,fillEmpty:n,isTopLevel:!1,leavesFirst:s,parentIsLocalized:!0,parentRef:h,ref:p[g]});else vr({callback:e,callbackStack:d,config:r,fields:A.fields,fillEmpty:n,isTopLevel:!1,leavesFirst:s,parentIsLocalized:a,parentRef:h,ref:p});return}if((A.type==="blocks"||A.type==="array")&&p&&typeof p=="object")if(ft({field:A,parentIsLocalized:a})){if(Array.isArray(p))return;for(let g in p){let m=p[g];Array.isArray(m)&&P_({callback:e,callbackStack:d,config:r,data:m,field:A,fillEmpty:n,leavesFirst:s,parentIsLocalized:!0,parentRef:h})}}else Array.isArray(p)&&P_({callback:e,callbackStack:d,config:r,data:p,field:A,fillEmpty:n,leavesFirst:s,parentIsLocalized:a,parentRef:h});else p&&typeof p=="object"&&"fields"in A&&vr({callback:e,callbackStack:d,config:r,fields:A.fields,fillEmpty:n,isTopLevel:!1,leavesFirst:s,parentIsLocalized:a,parentRef:h,ref:p})}i&&d.reverse().forEach(g=>{g()})})};var aQ=[{name:"loginAttempts",type:"number",defaultValue:0,hidden:!0},{name:"lockUntil",type:"date",hidden:!0}];import hAe from"crypto";var gAe=({req:e,value:t})=>t?e.payload.encrypt(t):null,mAe=({req:e,value:t})=>t?e.payload.decrypt(t):void 0,lQ=[{name:"enableAPIKey",type:"checkbox",admin:{components:{Field:!1}},label:({t:e})=>e("authentication:enableAPIKey")},{name:"apiKey",type:"text",admin:{components:{Field:!1}},hooks:{afterRead:[mAe],beforeChange:[gAe]},label:({t:e})=>e("authentication:apiKey")},{name:"apiKeyIndex",type:"text",admin:{disabled:!0},hidden:!0,hooks:{beforeValidate:[({data:e,req:t,value:r})=>e?.apiKey===!1||e?.apiKey===null||e?.enableAPIKey===!1||e?.enableAPIKey===null?null:e?.apiKey?hAe.createHmac("sha1",t.payload.secret).update(e.apiKey).digest("hex"):r]}}];var cQ=[{name:"resetPasswordToken",type:"text",hidden:!0},{name:"resetPasswordExpiration",type:"date",hidden:!0},{name:"salt",type:"text",hidden:!0},{name:"hash",type:"text",hidden:!0}];var AQ={name:"email",type:"email",admin:{components:{Field:!1}},hooks:{beforeChange:[({value:e})=>{if(e)return e.toLowerCase().trim()}]},label:({t:e})=>e("general:email"),required:!0,unique:!0,validate:RE};var uQ={name:"sessions",type:"array",access:{read:({doc:e,req:{user:t}})=>t?.id===e?.id,update:()=>!1},admin:{disabled:!0},fields:[{name:"id",type:"text",required:!0},{name:"createdAt",type:"date",defaultValue:()=>new Date},{name:"expiresAt",type:"date",required:!0}]};var dQ={name:"username",type:"text",admin:{components:{Field:!1}},hooks:{beforeChange:[({value:e})=>{if(e)return e.toLowerCase().trim()}]},label:({t:e})=>e("authentication:username"),required:!0,unique:!0,validate:cD};var yAe=({data:e,operation:t,originalDoc:r,value:o})=>t==="update"&&e?._verified===!0&&r?._verified===!1?null:o,fQ=[{name:"_verified",type:"checkbox",access:{create:({req:{user:e}})=>!!e,read:({req:{user:e}})=>!!e,update:({req:{user:e}})=>!!e},admin:{components:{Field:!1}},label:({t:e})=>e("authentication:verified")},{name:"_verificationToken",type:"text",hidden:!0,hooks:{beforeChange:[yAe]}}];var EAe=e=>{if(typeof e=="boolean")return e;let{permission:t,where:r}=e;return t?r&&typeof r=="object"?r:!0:!1};var L_=({headers:e,payload:t,user:r})=>{let o=e.get("host"),n,i;o&&(n=an(o,t.secret)),r?.id&&(i=an(String(r.id),t.secret)),hg({event:{type:"admin-init",domainID:n,userID:i},payload:t})};var pQ=async e=>{let{req:t}=e;L_(t);try{return Pu({req:t})}catch(r){throw await H(t),r}};var hQ=async e=>{let{collection:t,req:r}=e;return!!await r.payload.db.findOne({collection:t,req:r})};var gQ=async e=>{let t=e,{allSessions:r,collection:{config:o},req:{user:n},req:i}=e;if(!n)throw new F("No User",N.BAD_REQUEST);if(n.collection!==o.slug)throw new F("Incorrect collection",N.FORBIDDEN);if(o.hooks?.afterLogout?.length)for(let s of o.hooks.afterLogout)t=await s({collection:t.collection?.config,context:i.context,req:i})||t;if(o.auth.disableLocalStrategy!==!0&&o.auth.useSessions){let s=await i.payload.db.findOne({collection:o.slug,req:i,where:{id:{equals:n.id}}});if(!s)throw new F("No User",N.BAD_REQUEST);if(r)s.sessions=[];else{let a=(s?.sessions||[]).filter(l=>l.id!==i?.user?._sid);s.sessions=a}await i.payload.db.updateOne({id:n.id,collection:o.slug,data:s,returning:!1})}return!0};var mQ=async e=>{let{collection:t,currentToken:r,req:o}=e,n={user:null};if(o.user){let{pathname:i}=o,s=i===`/api${o.payload.config.routes.graphQL}`,a=await o.payload.findByID({id:o.user.id,collection:t.config.slug,depth:s?0:t.config.auth.depth,overrideAccess:!1,req:o,showHiddenFields:!1});if(a&&(a.collection=t.config.slug,a._strategy=o.user._strategy),o.user.collection!==t.config.slug)return{user:null};for(let l of t.config.hooks.me){let c=await l({args:e,user:a});if(c){n.user=c.user,n.exp=c.exp;break}}if(n.collection=o.user.collection,n.strategy=o.user._strategy,!n.user&&(n.user=a,r)){let l=jm(r);l&&(n.exp=l.exp),t.config.auth.removeTokenFromResponses||(n.token=r)}}if(t.config.hooks?.afterMe?.length)for(let i of t.config.hooks.afterMe)n=await i({collection:t?.config,context:o.context,req:o,response:n})||n;return n};import CAe from"url";var yQ=async e=>{let t=e;try{let r=await de(t.req);if(t.collection.config.hooks?.beforeOperation?.length)for(let f of t.collection.config.hooks.beforeOperation)t=await f({args:t,collection:t.collection?.config,context:t.req.context,operation:"refresh",req:t.req})||t;let{collection:{config:o},req:n,req:{payload:{config:i,secret:s}}}=t;if(!t.req.user)throw new ae(t.req.t);let l=CAe.parse(t.req.url).pathname===i.routes.graphQL,c=await t.req.payload.findByID({id:t.req.user.id,collection:t.req.user.collection,depth:l?0:t.collection.config.auth.depth,req:t.req}),A=t.req.user._sid;if(o.auth.useSessions&&!o.auth.disableLocalStrategy){if(!Array.isArray(c.sessions)||!A)throw new ae(t.req.t);let f=c.sessions.find(({id:h})=>h===A),u=new Date,p=o.auth.tokenExpiration*1e3;f.expiresAt=new Date(u.getTime()+p),await n.payload.db.updateOne({id:c.id,collection:o.slug,data:{...c,sessions:Ud(c.sessions)},req:n,returning:!1})}c&&(c.collection=t.req.user.collection,c._strategy=t.req.user._strategy);let d;for(let f of t.collection.config.hooks.refresh){let u=await f({args:t,user:c});if(u){d=u;break}}if(!d){let f=ns({collectionConfig:o,email:c?.email,sid:A,user:t?.req?.user}),{exp:u,token:p}=await as({fieldsToSign:f,secret:s,tokenExpiration:o.auth.tokenExpiration});d={exp:u,refreshedToken:p,setCookie:!0,strategy:t.req.user._strategy,user:c}}if(o.hooks?.afterRefresh?.length)for(let f of o.hooks.afterRefresh)d=await f({collection:t.collection?.config,context:t.req.context,exp:d.exp,req:t.req,token:d.refreshedToken})||d;return d=await Je({args:t,collection:t.collection?.config,operation:"refresh",result:d}),r&&await pe(n),d}catch(r){throw await H(t.req),r}};var EQ=async e=>{let{collection:{config:t,config:{slug:r,auth:{verify:o}}},data:n,req:i,req:{payload:s}}=e;if(t.auth.disableLocalStrategy)throw new ae(i.t);try{let a=await de(i);if(za({authOptions:t.auth,collectionSlug:r,data:n,operation:"create",req:i}),await s.db.findOne({collection:t.slug,req:i}))throw new ae(i.t);let c=await s.create({collection:r,data:n,overrideAccess:!0,req:i});o&&await s.update({id:c.id,collection:r,data:{_verified:!0},req:i});let{exp:A,token:d}=await s.login({...e,collection:r,req:i});return c.collection=r,c._strategy="local-jwt",a&&await pe(i),{exp:A,token:d,user:c}}catch(a){throw await H(i),a}};var U_=e=>{let{importMap:t,PayloadComponent:r,schemaPath:o,silent:n}=e,{exportName:i,path:s}=lg(r),a=s+"#"+i,l=t[a];return!l&&!n&&console.error("getFromImportMap: PayloadComponent not found in importMap",{key:a,PayloadComponent:r,schemaPath:o},"You may need to run the `payload generate:importmap` command to generate the importMap ahead of runtime."),l};var O_=["hooks","access","validate","defaultValue","filterOptions","editor","custom","typescriptSchema","dbName","enumName","graphQL"],M_=["condition","components"],gg=({blocks:e,defaultIDType:t,i18n:r,importMap:o})=>{let n=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="string"){n.push(s);continue}let a={slug:s.slug,fields:[]};if(s.imageAltText&&(a.imageAltText=s.imageAltText),s.imageURL&&(a.imageURL=s.imageURL),(s.admin?.custom||s.admin?.group)&&(a.admin={},s.admin.custom&&(a.admin.custom=s.admin.custom),s.admin.group&&(a.admin.group=s.admin.group)),s?.admin?.jsx){let l=U_({importMap:o,PayloadComponent:s.admin.jsx,schemaPath:""});a.jsx=l}s?.admin?.disableBlockName&&(a.admin?a.admin.disableBlockName=s.admin.disableBlockName:a.admin={disableBlockName:s.admin.disableBlockName}),s.labels&&(a.labels={},s.labels.singular&&(typeof s.labels.singular=="function"?a.labels.singular=s.labels.singular({i18n:r,t:r.t}):a.labels.singular=s.labels.singular,typeof s.labels.plural=="function"?a.labels.plural=s.labels.plural({i18n:r,t:r.t}):a.labels.plural=s.labels.plural)),a.fields=Ui({defaultIDType:t,fields:s.fields,i18n:r,importMap:o}),n.push(a)}return n},__=({defaultIDType:e,field:t,i18n:r,importMap:o})=>{let n={};for(let i in t)if(!O_.includes(i))switch(i){case"admin":if(!t.admin)break;n.admin={};for(let s in t.admin)if(!M_.includes(s))switch(s){case"description":"description"in t.admin&&typeof t.admin?.description!="function"&&(n.admin.description=t.admin.description);break;default:n.admin[s]=t.admin[s]}break;case"blocks":case"fields":case"tabs":break;case"label":typeof t.label=="function"?n.label=t.label({i18n:r,t:r.t}):n.label=t.label;break;default:n[i]=t[i]}switch(t.type){case"array":if(t.labels){let i=n;i.labels={},t.labels.singular&&(typeof t.labels.singular=="function"?i.labels.singular=t.labels.singular({i18n:r,t:r.t}):i.labels.singular=t.labels.singular,typeof t.labels.plural=="function"?i.labels.plural=t.labels.plural({i18n:r,t:r.t}):i.labels.plural=t.labels.plural)}case"collapsible":case"group":case"row":{let i=n;i.fields||(i.fields=[]),i.fields=Ui({defaultIDType:e,disableAddingID:t.type!=="array",fields:t.fields,i18n:r,importMap:o});break}case"blocks":{let i=n;t.labels&&(i.labels={},t.labels.singular&&(typeof t.labels.singular=="function"?i.labels.singular=t.labels.singular({i18n:r,t:r.t}):i.labels.singular=t.labels.singular,typeof t.labels.plural=="function"?i.labels.plural=t.labels.plural({i18n:r,t:r.t}):i.labels.plural=t.labels.plural)),t.blockReferences?.length&&(i.blockReferences=gg({blocks:t.blockReferences,defaultIDType:e,i18n:r,importMap:o})),t.blocks?.length&&(i.blocks=gg({blocks:t.blocks,defaultIDType:e,i18n:r,importMap:o}));break}case"join":{let i=n;i.targetField={relationTo:i.targetField?.relationTo};break}case"radio":case"select":{let i=n;if(t.options?.length)for(let s=0;s<t.options.length;s++){let a=t.options[s];typeof a=="object"&&typeof a.label=="function"&&(i.options||(i.options=[]),i.options[s]={label:a.label({i18n:r,t:r.t}),value:a.value})}break}case"richText":{if(!t?.editor)throw new Et(t);if(typeof t?.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");break}case"tabs":{let i=n;if(t.tabs?.length){i.tabs=[];for(let s=0;s<t.tabs.length;s++){let a=t.tabs[s],l={};for(let c in a){if(O_.includes(c))continue;let A=a[c];if(c==="fields")l.fields=Ui({defaultIDType:e,disableAddingID:!0,fields:a.fields,i18n:r,importMap:o});else if((c==="label"||c==="description")&&typeof A=="function")l[c]=A({t:r.t});else if(c==="admin"){l.admin={};for(let d in a.admin)if(!M_.includes(d))switch(d){case"description":"description"in a.admin&&(typeof a.admin?.description=="function"?l.admin.description=a.admin.description({i18n:r,t:r.t}):l.admin.description=a.admin.description);break;default:l.admin[d]=a.admin[d]}}else l[c]=A}i.tabs[s]=l}}break}default:break}return n},Ui=({defaultIDType:e,disableAddingID:t,fields:r,i18n:o,importMap:n})=>{let i=[];for(let a=0;a<r.length;a++){let l=r[a],c=__({defaultIDType:e,field:l,i18n:o,importMap:n});i.push(c)}let s=ln(r).some(a=>J(a)&&a.name==="id");return!t&&!s&&i.push({name:"id",type:e,admin:{description:"The unique identifier for this document",disableBulkEdit:!0,disabled:!0,hidden:!0},hidden:!0,label:"ID"}),i};var IAe=["hooks","access","endpoints","custom","joins","polymorphicJoins","flattenedFields","indexes","sanitizedIndexes"],BAe=["adminThumbnail","externalFileHeaderFilter","handlers","modifyResponseHeaders","withMetadata"],QAe=["hidden","baseListFilter","components"],G_=({collection:e,defaultIDType:t,i18n:r,importMap:o})=>{let n={};for(let i in e)if(!IAe.includes(i))switch(i){case"admin":if(!e.admin)break;n.admin={};for(let s in e.admin)if(!QAe.includes(s))switch(s){case"description":if(typeof e.admin.description=="string"||typeof e.admin.description=="object")e.admin.description&&(n.admin.description=e.admin.description);else if(typeof e.admin.description=="function"){let a=e.admin.description({t:r.t});a&&(n.admin.description=a)}break;case"livePreview":n.admin.livePreview={},e.admin.livePreview?.breakpoints&&(n.admin.livePreview.breakpoints=e.admin.livePreview.breakpoints);break;case"preview":e.admin.preview&&(n.admin.preview=!0);break;default:n.admin[s]=e.admin[s]}break;case"auth":if(!e.auth)break;n.auth={},e.auth.cookies&&(n.auth.cookies=e.auth.cookies),e.auth.depth!==void 0&&(n.auth.depth=e.auth.depth),e.auth.disableLocalStrategy&&(n.auth.disableLocalStrategy=e.auth.disableLocalStrategy),e.auth.lockTime!==void 0&&(n.auth.lockTime=e.auth.lockTime),e.auth.loginWithUsername&&(n.auth.loginWithUsername=e.auth.loginWithUsername),e.auth.maxLoginAttempts!==void 0&&(n.auth.maxLoginAttempts=e.auth.maxLoginAttempts),e.auth.removeTokenFromResponses&&(n.auth.removeTokenFromResponses=e.auth.removeTokenFromResponses),e.auth.useAPIKey&&(n.auth.useAPIKey=e.auth.useAPIKey),e.auth.tokenExpiration&&(n.auth.tokenExpiration=e.auth.tokenExpiration),e.auth.verify&&(n.auth.verify=!0);break;case"fields":n.fields=Ui({defaultIDType:t,fields:e.fields,i18n:r,importMap:o});break;case"labels":n.labels={plural:typeof e.labels.plural=="function"?e.labels.plural({i18n:r,t:r.t}):e.labels.plural,singular:typeof e.labels.singular=="function"?e.labels.singular({i18n:r,t:r.t}):e.labels.singular};break;case"upload":if(!e.upload)break;n.upload={};for(let s in e.upload)BAe.includes(s)||(s==="imageSizes"?n.upload.imageSizes=e.upload.imageSizes?.map(a=>{let l={...a};return"generateImageName"in l&&delete l.generateImageName,l}):n.upload[s]=e.upload[s]);break;default:n[i]=e[i]}return n},CQ=({collections:e,defaultIDType:t,i18n:r,importMap:o})=>{let n=new Array(e.length);for(let i=0;i<e.length;i++){let s=e[i];n[i]=G_({collection:s,defaultIDType:t,i18n:r,importMap:o})}return n};var bAe=["create","read","update","delete"];async function IQ(e){let{id:t,collection:{config:r},req:o}=e,n=[...bAe];r.auth&&typeof r.auth.maxLoginAttempts<"u"&&r.auth.maxLoginAttempts!==0&&n.push("unlock"),r.versions&&n.push("readVersions");try{let i=await Mo({id:t,type:"collection",blockPolicies:{},entity:r,operations:n,req:o});return Wl({collections:{[r.slug]:i}}).collections[r.slug]}catch(i){throw await H(o),i}}import{en as Hue}from"@payloadcms/translations/languages/en";import{deepMergeSimple as Vue}from"@payloadcms/translations/utilities";var BQ={slug:"users",admin:{useAsTitle:"email"},auth:{tokenExpiration:7200},fields:[],labels:{plural:({t:e})=>e("general:users"),singular:({t:e})=>e("general:user")}};import Cue from"path";var wAe=/multipart\/['"()+-_]+(?:; ?['"()+-_]*)+$/i,SAe=new Set(["CONNECT","DELETE","GET","HEAD","OPTIONS","TRACE"]),TAe=e=>!!(e.headers.get("transfer-encoding")||e.headers.get("content-length")&&e.headers.get("content-length")!=="0"),xAe=e=>!SAe.has(e.method),RAe=e=>{let t=e.headers.get("content-type");return t.includes("boundary=")&&wAe.test(t)},j_=e=>{try{return TAe(e)&&xAe(e)&&RAe(e)}catch{return!1}};var I2=We(u2(),1);import Oi from"fs";import nue from"path";import{Readable as iue}from"stream";var sue=/[^\w-]/g,aue=3,lue=65536,cue="tmp",Eg=0,Le=(e,t)=>(e||{}).debug?(console.log(`Next-file-upload: ${t}`),!0):!1,kQ=(e=cue)=>(Eg=Eg>=lue?1:Eg+1,`${e}-${Eg}-${Date.now()}`),Mu=e=>typeof e=="function",Aue=(e,t)=>Mu(t)?t:e,NQ=(e,t)=>{let r=!1;return o=>{if(!r)return r=!0,o?Aue(e,t)(o):e()}},uue=Object.getOwnPropertyNames(Object.prototype),due=Object.getOwnPropertyNames(Array.prototype),vQ=(e,t)=>{let r=e instanceof Array&&due.includes(t),o=uue.includes(t);return!r&&!o},PQ=(e,t,r)=>r==null||(e=e||Object.create(null),!vQ(e,t))?e:e[t]?(e[t]instanceof Array?e[t].push(r):e[t]=[e[t],r],e):(e[t]=r,e),Cg=(e,t)=>{if(!e.createParentPath)return!1;let r=nue.dirname(t);return Oi.existsSync(r)||Oi.mkdirSync(r,{recursive:!0}),Oi.existsSync(r)},LQ=(e,t)=>Oi.unlink(e,t),fue=(e,t,r)=>{let o=!1,n=a=>{o||(o=!0,r(a))},i=Oi.createReadStream(e);i.on("error",n);let s=Oi.createWriteStream(t);s.on("error",a=>{i.destroy(),n(a)}),s.on("close",()=>n()),i.pipe(s)},d2=(e,t,r)=>Oi.rename(e,t,o=>{if(o){fue(e,t,n=>n?r(n):LQ(e,r));return}r(null,!0)}),f2=(e,t,r)=>{if(!Buffer.isBuffer(e))return r(new Error("buffer variable should be type of Buffer!"));let o=e,n=new iue;n._read=()=>{n.push(o),o=null};let i=Oi.createWriteStream(t);i.on("error",s=>{r(s)}),i.on("close",()=>{r()}),n.pipe(i)},pue=(e,t)=>{if(!e||!e.uriDecodeFileNames)return t;try{return decodeURIComponent(t)}catch{let o=/(%[a-f\d]{2})/gi;return t.split(o).map(n=>{try{return decodeURIComponent(n)}catch{return""}}).join("")}},hue=(e,t)=>{let r={name:t,extension:""};if(!e)return r;let o=typeof e=="boolean"?aue:e,n=t.split(".");if(n.length<2)return r;let i=n.pop();return i.length>o&&o>0&&(n[n.length-1]+="."+i.substr(0,i.length-o),i=i.substr(-o)),{name:n.join("."),extension:o?i:""}},p2=(e,t)=>{if(!t||typeof t!="string")return kQ();let r=t.length<=255?t:t.substr(0,255);if(r=pue(e,r),!e.safeFileNames)return r;let o=typeof e.safeFileNames=="object"&&e.safeFileNames instanceof RegExp?e.safeFileNames:sue,n=hue(e.preserveExtension,r);return n.extension.length&&(n.extension="."+n.extension.replace(o,"")),n.name.replace(o,"").concat(n.extension)};var gue=(e,t,r)=>(o,n)=>{Le(r,`Moving temporary file ${t.tempFilePath} to ${e}`),d2(t.tempFilePath,e,NQ(o,n))},mue=(e,t,r)=>(o,n)=>{Le(r,`Moving uploaded buffer to ${e}`),f2(t.buffer,e,NQ(o,n))},h2=(e,t)=>({name:e.name,data:e.buffer,encoding:e.encoding,md5:e.hash,mimetype:e.mimetype,mv:(r,o)=>{let n=t.useTempFiles?gue(r,e,t):mue(r,e,t);Cg(t,r);let i=()=>{};return Mu(o)?n(o,i):new Promise(n)},size:e.size,tempFilePath:e.tempFilePath,truncated:e.truncated});import m2 from"crypto";import yue,{WriteStream as Eue}from"fs";import g2 from"path";var y2=(e,t,r)=>{let o=g2.normalize(e.tempFileDir),n=g2.join(process.cwd(),o,kQ());Cg({createParentPath:!0},n),Le(e,`Temporary file path is ${n}`);let i=m2.createHash("md5"),s=0,a=!1;Le(e,`Opening write stream for ${t}->${r}...`);let l=yue.createWriteStream(n),c=new Promise((A,d)=>{l.on("finish",()=>A(!0)),l.on("error",f=>{Le(e,`Error write temp file: ${f}`),d(f)})});return{cleanup:()=>{a=!0,Le(e,`Cleaning up temporary file ${n}...`),l.end(),LQ(n,A=>A?Le(e,`Cleaning up temporary file ${n} failed: ${A}`):Le(e,`Cleaning up temporary file ${n} done.`))},complete:()=>(a=!0,Le(e,`Upload ${t}->${r} completed, bytes:${s}.`),l instanceof Eue&&l.end(),Buffer.concat([])),dataHandler:A=>{if(a===!0){Le(e,`Error: got ${t}->${r} data chunk for completed upload!`);return}l.write(A),i.update(A),s+=A.length,Le(e,`Uploading ${t}->${r}, bytes:${s}...`)},getFilePath:()=>n,getFileSize:()=>s,getHash:()=>i.digest("hex"),getWritePromise:()=>c}},E2=(e,t,r)=>{let o=[],n=m2.createHash("md5"),i=0,s=!1,a=()=>Buffer.concat(o,i);return{cleanup:()=>{s=!0},complete:()=>(Le(e,`Upload ${t}->${r} completed, bytes:${i}.`),s=!0,a()),dataHandler:l=>{if(s===!0){Le(e,`Error: got ${t}->${r} data chunk for completed upload!`);return}o.push(l),n.update(l),i+=l.length,Le(e,`Uploading ${t}->${r}, bytes:${i}...`)},getFilePath:()=>"",getFileSize:()=>i,getHash:()=>n.digest("hex"),getWritePromise:()=>Promise.resolve(!0)}};var UQ=function(e){if(!e||e.length<1)return Object.create(null);let t=Object.create(null),r=Object.keys(e);for(let o=0;o<r.length;o++){let n=r[o],i=n?.replace(new RegExp(/\[/g),".").replace(new RegExp(/\]/g),"").split("."),s=e[n],a=t;for(let l=0;l<i.length;l++){let c=i[l];vQ(a,c)&&(l>=i.length-1?a[c]=s:(a[c]||(a[c]=i[l+1]?Object.create(null):[]),a=a[c]))}}return t};var C2=(e=0,t=()=>{})=>{let r=null,o=()=>{clearTimeout(r)};return{clear:o,set:()=>e?(o(),r=setTimeout(t,e),!0):!1}};var $l=Symbol("wait flush property symbol"),B2=async({options:e,request:t})=>{let r=!0,o=!1,n=0,i=0,s,a,l=new Promise((p,h)=>{s=p,a=h}),c={fields:void 0,files:void 0},A={};t.headers.forEach((p,h)=>{A[h]=p});let d=t.body?.getReader(),f=(0,I2.default)({...e,headers:A});function u(p,h){p.destroy(),o=!0,a(h)}for(f.on("field",(p,h)=>{c.fields=PQ(c.fields,p,h)}),f.on("file",(p,h,g)=>{n+=1;let{encoding:m,filename:y,mimeType:E}=g,I=p2(e,y),C=I&&I.endsWith(".glb")&&"model/gltf-binary"||I&&I.endsWith(".gltf")&&"model/gltf+json"||E,{cleanup:B,complete:R,dataHandler:x,getFilePath:S,getFileSize:Q,getHash:T,getWritePromise:D}=e.useTempFiles?y2(e,p,I):E2(e,p,I),k=e.useTempFiles?D().catch(()=>{f.end(),B()}):D(),P=C2(e.uploadTimeout,()=>u(h,new F(`Upload timeout for ${p}->${I}, bytes:${Q()}`)));h.on("limit",()=>{Le(e,`Size limit reached for ${p}->${I}, bytes:${Q()}`),P.clear(),Mu(e.limitHandler)&&e.limitHandler({request:t,size:Q()}),e.abortOnLimit&&(Le(e,`Upload file size limit reached ${p}->${I}.`),B(),u(h,new F(e.responseOnLimit,N.REQUEST_ENTITY_TOO_LARGE,{size:Q()})))}),h.on("data",U=>{P.set(),x(U)}),h.on("end",()=>{let U=Q();if(Le(e,`Upload finished ${p}->${I}, bytes:${U}`),P.clear(),!y&&U===0)return n-=1,e.useTempFiles&&(B(),Le(e,`Removing the empty file ${p}->${I}`)),Le(e,"Don't add file instance if original name and size are empty");i+=1,c.files=PQ(c.files,p,h2({name:I,buffer:R(),encoding:m,hash:T(),mimetype:C,size:U,tempFilePath:S(),truncated:!!("truncated"in h&&h.truncated)||!1},e)),t[$l]||(t[$l]=[]),t[$l].push(k),i===n&&s()}),h.on("error",U=>{P.clear(),Le(e,`File Error: ${U.message}`),B(),a(U)}),Le(e,`New upload started ${p}->${I}, bytes:${Q()}`),P.set()}),f.on("finish",async()=>{if(Le(e,"Busboy finished parsing request."),e.parseNested&&(c.fields=UQ(c.fields),c.files=UQ(c.files)),t[$l])try{await Promise.all(t[$l]).then(()=>{delete t[$l]})}catch(p){Le(e,`Error waiting for file write promises: ${p}`)}return c}),f.on("error",(p=new F("Busboy error parsing multipart request",N.BAD_REQUEST))=>{throw Le(e,"Busboy error"),p});r;){let{done:p,value:h}=await d.read();p&&(r=!1),h&&!o&&f.write(h)}return n!==0&&await l.catch(p=>{throw p}),c};var Iue={abortOnLimit:!1,createParentPath:!1,debug:!1,defParamCharset:"utf8",limitHandler:!1,parseNested:!1,preserveExtension:!1,responseOnLimit:"File size limit has been reached",safeFileNames:!1,tempFileDir:Cue.join(process.cwd(),"tmp"),uploadTimeout:6e4,uriDecodeFileNames:!1,useTempFiles:!1},Q2=async({options:e,request:t})=>{let r={...Iue,...e};return j_(t)?B2({options:r,request:t}):(Le(r,"Request is not eligible for file upload!"),{error:new F("Request is not eligible for file upload",500),fields:void 0,files:void 0})};var OQ=async e=>{let{body:t,headers:r,method:o,payload:n}=e;if(o&&["PATCH","POST","PUT"].includes(o.toUpperCase())&&t){let[i]=(r.get("Content-Type")||"").split(";"),s=parseInt(e.headers.get("Content-Length")||"0",10);if(i==="application/json"){let a={};try{let l=await e.text?.();a=l?JSON.parse(l):{}}catch(l){e.payload.logger.error(l)}finally{e.data=a,e.json=()=>Promise.resolve(a)}}else if(s&&i?.includes("multipart/")){let{error:a,fields:l,files:c}=await Q2({options:n.config.upload,request:e});if(a)throw new F(a.message);if(c?.file&&(e.file=c.file),l?._payload&&typeof l._payload=="string"&&(e.data=JSON.parse(l._payload)),!e.file&&l?.file&&typeof l?.file=="string"){let{clientUploadContext:A,collectionSlug:d,filename:f,mimeType:u,size:p}=JSON.parse(l.file),h=e.payload.collections[d].config.upload;if(!h.handlers)throw new F("uploadConfig.handlers is not present for "+d);let g=null,m;for(let y of h.handlers)try{let E=await y(e,{doc:null,params:{clientUploadContext:A,collection:d,filename:f}});E&&(g=E)}catch(E){m=E}if(!g)throw m&&n.logger.error(m),new F("Expected response from the upload handler.");e.file={name:f,clientUploadContext:A,data:Buffer.from(await g.arrayBuffer()),mimetype:g.headers.get("Content-Type")||u,size:p}}}}};function MQ(e){let{data:t,payload:{config:r}}=e;if(t){let o=e.locale,n=e.fallbackLocale,i,s;if(!o&&t?.locale&&typeof t.locale=="string"&&(i=t.locale),n||(t?.["fallback-locale"]&&typeof t?.["fallback-locale"]=="string"&&(s=t["fallback-locale"]),t?.fallbackLocale&&typeof t?.fallbackLocale=="string"&&(s=t.fallbackLocale)),!o||!n){let{fallbackLocale:a,locale:l}=Ig({fallbackLocale:s,locale:i,localization:r.localization});i&&(e.locale=l),s&&(e.fallbackLocale=a)}}}var Ig=({fallbackLocale:e,locale:t,localization:r})=>(r&&(e=Ec({fallbackLocale:e,locale:t,localization:r})),["*","all"].includes(t)?t="all":r&&!r.localeCodes.includes(t)&&r.fallback&&(t=r.defaultLocale),{fallbackLocale:e,locale:t});var Wn=e=>e.map(t=>{let r=t.handler;return["patch","post"].includes(t.method)&&(t.handler=async o=>(await OQ(o),MQ(o),r(o))),t});var j=({headers:e,req:t})=>{let r=t?.payload?.config.cors,o=t?.headers?.get("Origin");if(r){let n=["Origin","X-Requested-With","Content-Type","Accept","Authorization","Content-Encoding","x-apollo-tracing"];e.set("Access-Control-Allow-Methods","PUT, PATCH, POST, GET, DELETE, OPTIONS"),typeof r=="object"&&"headers"in r?e.set("Access-Control-Allow-Headers",[...n,...r.headers].filter(Boolean).join(", ")):e.set("Access-Control-Allow-Headers",n.join(", ")),r==="*"||typeof r=="object"&&"origins"in r&&r.origins==="*"?e.set("Access-Control-Allow-Origin","*"):(Array.isArray(r)&&r.indexOf(o)>-1||!Array.isArray(r)&&typeof r=="object"&&"origins"in r&&r.origins.indexOf(o)>-1)&&(e.set("Access-Control-Allow-Credentials","true"),e.set("Access-Control-Allow-Origin",o))}return e};var b2=async e=>{let t=j({headers:new Headers,req:e});try{let r=await pQ({req:e});return Response.json(r,{headers:t,status:N.OK})}catch(r){return Response.json({error:r},{headers:t,status:N.INTERNAL_SERVER_ERROR})}};var De=e=>{let t=e.routeParams?.collection;if(typeof t!="string")throw new F("No collection was specified",400);let r=e.payload.collections[t];if(!r)throw new F(`Collection with the slug ${t} was not found`,404);return r},gt=(e,{disableSanitize:t,optionalID:r}={})=>{let o=De(e),n=e.routeParams?.id;if(typeof n!="string"){if(r)return{id:void 0,collection:o};throw new F("ID was not specified",400)}if(t===!0)return{id:n,collection:o};let i=n,s=e.payload.db.defaultIDType==="number";return s&&o.customIDType==="text"&&(s=!1),s&&(i=parseFloat(i)),{id:i,collection:o}},mr=e=>{let t=e.routeParams?.global;if(typeof t!="string")throw new F("No global was specified",400);let r=e.payload.globals.config.find(o=>o.slug===t);if(!r)throw new F(`Global with the slug ${t} was not found`,404);return r};var w2=async e=>{let{t}=e,r=De(e),o=r.config.auth?.loginWithUsername?{email:typeof e.data?.email=="string"?e.data.email:"",username:typeof e.data?.username=="string"?e.data.username:""}:{email:typeof e.data?.email=="string"?e.data.email:""};return await Cc({collection:r,data:o,disableEmail:!!e.data?.disableEmail,expiration:typeof e.data?.expiration=="number"?e.data.expiration:void 0,req:e}),Response.json({message:t("general:success")},{headers:j({headers:new Headers,req:e}),status:N.OK})};var S2=async e=>{let t=await hQ({collection:De(e).config.slug,req:e});return Response.json({initialized:t},{headers:j({headers:new Headers,req:e})})};var T2=async e=>{let t=De(e),{searchParams:r,t:o}=e,n=r.get("depth"),i=t.config.auth?.loginWithUsername!==!1?{email:typeof e.data?.email=="string"?e.data.email:"",password:typeof e.data?.password=="string"?e.data.password:"",username:typeof e.data?.username=="string"?e.data.username:""}:{email:typeof e.data?.email=="string"?e.data.email:"",password:typeof e.data?.password=="string"?e.data.password:""},s=await kc({collection:t,data:i,depth:Z(n)?Number(n):void 0,req:e}),a=ci({collectionAuthConfig:t.config.auth,cookiePrefix:e.payload.config.cookiePrefix,token:s.token});return t.config.auth.removeTokenFromResponses&&delete s.token,Response.json({message:o("authentication:passed"),...s},{headers:j({headers:new Headers({"Set-Cookie":a}),req:e}),status:N.OK})};var x2=async e=>{let t=De(e),{searchParams:r,t:o}=e,n=await gQ({allSessions:r.get("allSessions")==="true",collection:t,req:e}),i=j({headers:new Headers,req:e});if(!n)return Response.json({message:o("error:logoutFailed")},{headers:i,status:N.BAD_REQUEST});let s=gD({collectionAuthConfig:t.config.auth,config:e.payload.config,cookiePrefix:e.payload.config.cookiePrefix});return i.set("Set-Cookie",s),Response.json({message:o("authentication:logoutSuccessful")},{headers:i,status:N.OK})};var R2=async e=>{let t=De(e),r=Sn(e),o=await mQ({collection:t,currentToken:r,req:e});return t.config.auth.removeTokenFromResponses&&delete o.token,Response.json({...o,message:e.t("authentication:account")},{headers:j({headers:new Headers,req:e}),status:N.OK})};var D2=async e=>{let t=De(e),{t:r}=e,o=j({headers:new Headers,req:e}),n=await yQ({collection:t,req:e});if(n.setCookie){let i=ci({collectionAuthConfig:t.config.auth,cookiePrefix:e.payload.config.cookiePrefix,token:n.refreshedToken});t.config.auth.removeTokenFromResponses&&delete n.refreshedToken,o.set("Set-Cookie",i)}return Response.json({message:r("authentication:tokenRefreshSuccessful"),...n},{headers:o,status:N.OK})};var F2=async e=>{let t=De(e),{data:r,t:o}=e,n=t.config.auth?.loginWithUsername?{email:typeof e.data?.email=="string"?e.data.email:"",password:typeof e.data?.password=="string"?e.data.password:"",username:typeof e.data?.username=="string"?e.data.username:""}:{email:typeof e.data?.email=="string"?e.data.email:"",password:typeof e.data?.password=="string"?e.data.password:""},i=await EQ({collection:t,data:{...r,...n},req:e}),s=ci({collectionAuthConfig:t.config.auth,cookiePrefix:e.payload.config.cookiePrefix,token:i.token});return Response.json({exp:i.exp,message:o("authentication:successfullyRegisteredFirstUser"),token:i.token,user:i.user},{headers:j({headers:new Headers({"Set-Cookie":s}),req:e}),status:N.OK})};var k2=async e=>{let t=De(e),{searchParams:r,t:o}=e,n=r.get("depth"),i=await aA({collection:t,data:{password:typeof e.data?.password=="string"?e.data.password:"",token:typeof e.data?.token=="string"?e.data.token:""},depth:n?Number(n):void 0,req:e}),s=ci({collectionAuthConfig:t.config.auth,cookiePrefix:e.payload.config.cookiePrefix,token:i.token});return t.config.auth.removeTokenFromResponses&&delete i.token,Response.json({message:o("authentication:passwordResetSuccessfully"),...i},{headers:j({headers:new Headers({"Set-Cookie":s}),req:e}),status:N.OK})};var N2=async e=>{let t=De(e),{t:r}=e,o=t.config.auth?.loginWithUsername!==!1?{email:typeof e.data?.email=="string"?e.data.email:"",username:typeof e.data?.username=="string"?e.data.username:""}:{email:typeof e.data?.email=="string"?e.data.email:""};return await lA({collection:t,data:o,req:e}),Response.json({message:r("general:success")},{headers:j({headers:new Headers,req:e}),status:N.OK})};var v2=async e=>{let{id:t,collection:r}=gt(e,{disableSanitize:!0}),{t:o}=e;return await cA({collection:r,req:e,token:t}),Response.json({message:o("authentication:accountVerified")},{headers:j({headers:new Headers,req:e}),status:N.OK})};var P2=Wn([{handler:b2,method:"get",path:"/access"}]),L2=Wn([{handler:w2,method:"post",path:"/forgot-password"},{handler:S2,method:"get",path:"/init"},{handler:T2,method:"post",path:"/login"},{handler:x2,method:"post",path:"/logout"},{handler:R2,method:"get",path:"/me"},{handler:D2,method:"post",path:"/refresh-token"},{handler:F2,method:"post",path:"/first-register"},{handler:k2,method:"post",path:"/reset-password"},{handler:N2,method:"post",path:"/unlock"},{handler:v2,method:"post",path:"/verify/:id"}]);var U2=e=>{let t=[];if(e.useAPIKey&&t.push(...lQ),!e.disableLocalStrategy||typeof e.disableLocalStrategy=="object"&&e.disableLocalStrategy.enableFields){let r={...AQ},o;e.loginWithUsername&&(o={...dQ},typeof e.loginWithUsername=="object"&&(e.loginWithUsername.requireEmail===!1&&(r.required=!1),e.loginWithUsername.requireUsername===!1&&(o.required=!1),e.loginWithUsername.allowEmailLogin===!1&&(r.unique=!1))),t.push(r),o&&t.push(o),t.push(...cQ),e.verify&&t.push(...fQ),e?.maxLoginAttempts&&e.maxLoginAttempts>0&&t.push(...aQ),e.useSessions&&t.push(uQ)}return t};var Bg=class extends F{constructor(t){super(`Timestamps are required in the collection ${t.slug} because you have opted in to Versions.`)}};import{deepMergeSimple as Sue}from"@payloadcms/translations/utilities";var Qg=We(jQ(),1),{isPlural:O2,singular:M2}=Qg.default,Bue=e=>e.charAt(0).toUpperCase()+e.slice(1),Pr=(e,t=!1)=>{let n=(e||"").trim().split(/[\s-]/),i=[];return n.forEach(s=>{if(s!==""){let a=s.split(/(?=[A-Z])/).join(" ");i.push(Bue(a))}}),t?i.join("").replace(/\s/g,""):i.join(" ")},Mi=e=>{let t=Pr(e);return O2(e)?{plural:t,singular:M2(t)}:{plural:(0,Qg.default)(t),singular:t}},Que=e=>{let t=Pr(e,!0);return O2(e)?{plural:t,singular:M2(t)}:{plural:(0,Qg.default)(t),singular:t}};var VQ=We(Sa(),1),HQ=VQ.default.default||VQ.default,_u={name:"id",type:"text",admin:{hidden:!0},defaultValue:()=>new HQ().toHexString(),hooks:{beforeChange:[({value:e})=>e||new HQ().toHexString()],beforeDuplicate:[()=>new HQ().toHexString()]},label:"ID"};var Gu=[_u,{name:"blockName",type:"text",admin:{disabled:!0},label:"Block Name",required:!1}];var _2=({name:e,defaultValue:t,options:r,required:o})=>({name:e,type:"select",admin:{hidden:!0},defaultValue:t,options:r,required:o});var Kl=[{label:"(UTC-11:00) Midway Island, Samoa",value:"Pacific/Midway"},{label:"(UTC-11:00) Niue",value:"Pacific/Niue"},{label:"(UTC-10:00) Hawaii",value:"Pacific/Honolulu"},{label:"(UTC-10:00) Cook Islands",value:"Pacific/Rarotonga"},{label:"(UTC-09:00) Alaska",value:"America/Anchorage"},{label:"(UTC-09:00) Gambier Islands",value:"Pacific/Gambier"},{label:"(UTC-08:00) Pacific Time (US & Canada)",value:"America/Los_Angeles"},{label:"(UTC-08:00) Tijuana, Baja California",value:"America/Tijuana"},{label:"(UTC-07:00) Mountain Time (US & Canada)",value:"America/Denver"},{label:"(UTC-07:00) Arizona (No DST)",value:"America/Phoenix"},{label:"(UTC-06:00) Central Time (US & Canada)",value:"America/Chicago"},{label:"(UTC-06:00) Central America",value:"America/Guatemala"},{label:"(UTC-05:00) Eastern Time (US & Canada)",value:"America/New_York"},{label:"(UTC-05:00) Bogota, Lima, Quito",value:"America/Bogota"},{label:"(UTC-04:00) Caracas",value:"America/Caracas"},{label:"(UTC-04:00) Santiago",value:"America/Santiago"},{label:"(UTC-03:00) Buenos Aires",value:"America/Buenos_Aires"},{label:"(UTC-03:00) Brasilia",value:"America/Sao_Paulo"},{label:"(UTC-02:00) South Georgia",value:"Atlantic/South_Georgia"},{label:"(UTC-01:00) Azores",value:"Atlantic/Azores"},{label:"(UTC-01:00) Cape Verde",value:"Atlantic/Cape_Verde"},{label:"(UTC+00:00) London (GMT)",value:"Europe/London"},{label:"(UTC+01:00) Berlin, Paris",value:"Europe/Berlin"},{label:"(UTC+01:00) Lagos",value:"Africa/Lagos"},{label:"(UTC+02:00) Athens, Bucharest",value:"Europe/Athens"},{label:"(UTC+02:00) Cairo",value:"Africa/Cairo"},{label:"(UTC+03:00) Moscow, St. Petersburg",value:"Europe/Moscow"},{label:"(UTC+03:00) Riyadh",value:"Asia/Riyadh"},{label:"(UTC+04:00) Dubai",value:"Asia/Dubai"},{label:"(UTC+04:00) Baku",value:"Asia/Baku"},{label:"(UTC+05:00) Islamabad, Karachi",value:"Asia/Karachi"},{label:"(UTC+05:00) Tashkent",value:"Asia/Tashkent"},{label:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",value:"Asia/Calcutta"},{label:"(UTC+06:00) Dhaka",value:"Asia/Dhaka"},{label:"(UTC+06:00) Almaty",value:"Asia/Almaty"},{label:"(UTC+07:00) Jakarta",value:"Asia/Jakarta"},{label:"(UTC+07:00) Bangkok",value:"Asia/Bangkok"},{label:"(UTC+08:00) Beijing, Shanghai",value:"Asia/Shanghai"},{label:"(UTC+08:00) Singapore",value:"Asia/Singapore"},{label:"(UTC+09:00) Tokyo, Osaka, Sapporo",value:"Asia/Tokyo"},{label:"(UTC+09:00) Seoul",value:"Asia/Seoul"},{label:"(UTC+10:00) Brisbane",value:"Australia/Brisbane"},{label:"(UTC+10:00) Sydney, Melbourne",value:"Australia/Sydney"},{label:"(UTC+10:00) Guam, Port Moresby",value:"Pacific/Guam"},{label:"(UTC+11:00) New Caledonia",value:"Pacific/Noumea"},{label:"(UTC+12:00) Auckland, Wellington",value:"Pacific/Auckland"},{label:"(UTC+12:00) Fiji",value:"Pacific/Fiji"}];var G2=e=>typeof e=="string"&&e.trim()!=="",bue=({value:e})=>G2(e)?`${e} - Copy`:void 0,wue=({req:e,value:t})=>G2(t)?`${t} - ${e?.t("general:copy")??"Copy"}`:void 0,j2=(e,t)=>{("required"in e&&e.required||e.unique)&&(!e.hooks?.beforeDuplicate||Array.isArray(e.hooks.beforeDuplicate)&&e.hooks.beforeDuplicate.length===0)&&e.unique&&(["email","number","point","relationship","select","upload"].includes(e.type)?e.hooks.beforeDuplicate=[()=>{}]:["code","json","text","textarea"].includes(e.type)&&(e.hooks.beforeDuplicate=ft({field:e,parentIsLocalized:t})?[wue]:[bue]))};var H2=["salt","hash"],V2=[],q2=[],Y2=["file"];var ju=class extends F{constructor(t){super(`Invalid join field ${t.name}. The config does not have a field '${t.on}' in collection '${t.collection}'.`)}};var bg=({block:e})=>({...e,flattenedFields:Nt({fields:e.fields})}),W2=new Map,Nt=({cache:e,fields:t})=>{if(e){let o=W2.get(t);if(o)return o}let r=[];for(let o of t)switch(o.type){case"array":case"group":{if(J(o))r.push({...o,flattenedFields:Nt({fields:o.fields})});else for(let n of Nt({fields:o.fields}))r.push(n);break}case"blocks":{let n=[],i;if(o.blockReferences){i=[];for(let a of o.blockReferences){if(typeof a=="string"){i.push(a);continue}i.push(bg({block:a}))}}else for(let a of o.blocks){if(typeof a=="string"){n.push(a);continue}n.push(bg({block:a}))}let s={...o,blockReferences:i,blocks:n};r.push(s);break}case"collapsible":case"row":{for(let n of Nt({fields:o.fields}))r.push(n);break}case"join":{r.push(o);break}case"tabs":{for(let n of o.tabs)if(yt(n))r.push({...n,type:"tab",flattenedFields:Nt({fields:n.fields})});else for(let i of Nt({fields:n.fields}))r.push(i);break}default:o.type!=="ui"&&r.push(o)}return W2.set(t,r),r};var Zl=({fields:e,localizedPath:t="",path:r})=>{let o=e,n=null,i=r.split("."),s=!1;for(;i.length>0;){let a=i.shift();t=`${t?`${t}.`:""}${a}`;let l=o.find(c=>c.name===a);if(!l)return null;if(l.localized&&(s=!0,t=`${t}.<locale>`),"flattenedFields"in l&&(o=l.flattenedFields),"blocks"in l)for(let c of l.blocks){let A=Zl({fields:c.flattenedFields,localizedPath:t,path:[...i].join(".")});if(A)return A}n=l}return n?{field:n,localizedPath:t,pathHasLocalized:s}:null};var qQ=({config:e,field:t,joinPath:r,joins:o,parentIsLocalized:n,polymorphicJoins:i,validateOnly:s})=>{if(typeof o>"u")throw new F("Join fields cannot be added to arrays, blocks or globals.");typeof t.maxDepth>"u"&&(t.maxDepth=1);let a={field:t,joinPath:`${r?r+".":""}${t.name}`,parentIsLocalized:n,targetField:void 0};if(Array.isArray(t.collection)){for(let A of t.collection){let d={...t,collection:A};qQ({config:e,field:d,joinPath:r,joins:o,parentIsLocalized:n,polymorphicJoins:i,validateOnly:!0})}Array.isArray(i)&&i.push(a);return}let l=e.collections?.find(A=>A.slug===t.collection);if(!l)throw new ju(t);let c=Zl({fields:Nt({cache:!0,fields:l.fields}),path:t.on});if(!c||c.field.type!=="relationship"&&c.field.type!=="upload")throw new ju(a.field);c.pathHasLocalized&&(a.getForeignPath=({locale:A})=>c.localizedPath.replace("<locale>",A)),!c.field.index&&!c.field.unique&&(c.field.index=!0),!s&&(a.targetField=c.field,t.localized=c.field.localized,t.hasMany=c.field.hasMany,t.targetField=a.targetField,o[t.collection]?o[t.collection]?.push(a):o[t.collection]=[a])};var cn=async({collectionConfig:e,config:t,existingFieldNames:r=new Set,fields:o,isTopLevelField:n=!0,joinPath:i="",joins:s,parentIsLocalized:a,polymorphicJoins:l,requireFieldLevelRichTextEditor:c=!1,richTextSanitizationPromises:A,validRelationships:d})=>{if(!o)return[];for(let f=0;f<o.length;f++){let u=o[f];if("_sanitized"in u&&u._sanitized===!0)continue;if("_sanitized"in u&&(u._sanitized=!0),!u.type)throw new Ba(u);let p=J(u);if(n&&p&&u.name){if(e&&e.upload&&Y2.includes(u.name))throw new ts(u,u.name);if(e&&e.auth&&typeof e.auth=="object"&&!e.auth.disableLocalStrategy){if(H2.includes(u.name))throw new ts(u,u.name);if(e.auth.verify){if(q2.includes(u.name))throw new ts(u,u.name);if(V2.includes(u.name))throw new ts(u,u.name)}}}if(p&&u.name.includes("."))throw new ya(u,u.name);if("name"in u&&u.name&&typeof u.label!="object"&&typeof u.label!="string"&&typeof u.label!="function"&&u.label!==!1&&(u.label=Pr(u.name)),u.type==="checkbox"&&typeof u.defaultValue>"u"&&u.required===!0&&(u.defaultValue=!1),u.type==="join"&&qQ({config:t,field:u,joinPath:i,joins:s,parentIsLocalized:a,polymorphicJoins:l}),(u.type==="relationship"||u.type==="upload")&&(d&&(Array.isArray(u.relationTo)?u.relationTo:[u.relationTo]).forEach(g=>{if(!d.includes(g))throw new Ea(u,g)}),u.min&&!u.minRows&&(console.warn(`(payload): The "min" property is deprecated for the Relationship field "${u.name}" and will be removed in a future version. Please use "minRows" instead.`),u.minRows=u.min),u.max&&!u.maxRows&&(console.warn(`(payload): The "max" property is deprecated for the Relationship field "${u.name}" and will be removed in a future version. Please use "maxRows" instead.`),u.maxRows=u.max)),u.type==="upload"&&(!u.admin||!("isSortable"in u.admin))&&(u.admin={isSortable:!0,...u.admin}),u.type==="array"&&u.fields&&u.fields.push(_u),(u.type==="blocks"||u.type==="array")&&u.label&&(u.labels=u.labels||Mi(u.name)),p){if(r.has(u.name))throw new Zi(u.name);if(["blockName","id"].includes(u.name)||r.add(u.name),typeof u.localized<"u"){let h=!t.localization;process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized!=="true"&&a&&process.env.PAYLOAD_DO_NOT_SANITIZE_LOCALIZED_PROPERTY!=="true"&&(h=!0),h&&delete u.localized}if(typeof u.validate>"u"){let h=DE[u.type];h?u.validate=(g,m)=>h(g,{...u,...m}):u.validate=()=>!0}u.hooks||(u.hooks={}),u.access||(u.access={}),j2(u,a)}if(u.admin||(u.admin={}),u.type==="richText"){let h=async g=>{if(!u.editor)if(g.editor&&!c)u.editor=g.editor;else throw new Et(u);typeof u.editor=="function"&&(u.editor=await u.editor({config:g,isRoot:c,parentIsLocalized:a||u.localized})),u.editor.i18n&&Object.keys(u.editor.i18n).length>=0&&(t.i18n.translations=Sue(t.i18n.translations,u.editor.i18n))};A?A.push(h):await h(t)}if(u.type==="blocks"&&u.blocks){if(u.blockReferences&&u.blocks?.length)throw new Error("You cannot have both blockReferences and blocks in the same blocks field");let h=[];for(let g of u.blockReferences??u.blocks){let m=typeof g=="string"?g:g.slug;if(h.includes(m))throw new Zi(m);h.push(m),typeof g!="string"&&g._sanitized!==!0&&(g._sanitized=!0,g.fields=g.fields.concat(Gu),g.labels=g.labels?g.labels:Mi(g.slug),g.fields=await cn({collectionConfig:e,config:t,existingFieldNames:new Set,fields:g.fields,isTopLevelField:!1,parentIsLocalized:a||u.localized,requireFieldLevelRichTextEditor:c,richTextSanitizationPromises:A,validRelationships:d}))}}if("fields"in u&&u.fields&&(u.fields=await cn({collectionConfig:e,config:t,existingFieldNames:p?new Set:r,fields:u.fields,isTopLevelField:n&&!p,joinPath:p?`${i?i+".":""}${u.name}`:i,joins:s,parentIsLocalized:a||FS(u),polymorphicJoins:l,requireFieldLevelRichTextEditor:c,richTextSanitizationPromises:A,validRelationships:d})),u.type==="tabs")for(let h=0;h<u.tabs.length;h++){let g=u.tabs[h],m=yt(g);m&&typeof g.label>"u"&&(g.label=Pr(g.name)),"admin"in g&&g.admin?.condition&&typeof g.admin.condition=="function"&&!g.id&&(g.id=m?`${g.name}_${ei()}`:ei()),g.fields=await cn({collectionConfig:e,config:t,existingFieldNames:m?new Set:r,fields:g.fields,isTopLevelField:n&&!m,joinPath:m?`${i?i+".":""}${g.name}`:i,joins:s,parentIsLocalized:a||m&&g.localized,polymorphicJoins:l,requireFieldLevelRichTextEditor:c,richTextSanitizationPromises:A,validRelationships:d}),u.tabs[h]=g}if(u.type==="ui"&&typeof u.admin.disableBulkEdit>"u"&&(u.admin.disableBulkEdit=!0),o[f]=u,u.type==="date"&&u.timezone){let h=u.name+"_tz",g=t.admin?.timezones?.defaultTimezone,m=t.admin?.timezones?.supportedTimezones,y=typeof m=="function"?m({defaultTimezones:Kl}):m,E=_2({name:h,defaultValue:g,options:y,required:u.required});o.splice(++f,0,E)}}return o};var ia=(e,t)=>{let r=[...e||[]];return t.forEach(o=>{let n=null;if(J(o)){let i=r.find((s,a)=>J(s)&&s.name===o.name?(n=a,!0):!1);if(i){let s={...i};r.splice(n,1);let a=_E(o,s);es(o)&&es(s)&&(a.fields=ia(s.fields,o.fields)),r.push(a)}else r.push(o)}}),r};import Fue from"fs/promises";import kue from"path";var J2=async({collection:e,filename:t,req:r})=>{if(t.includes("../")||t.includes("..\\"))throw new ae(r.t);let{config:o}=e,n=await oe({data:{filename:t},isReadingStaticFile:!0,req:r},o.access.read);if(typeof n=="object"){let i={and:[{or:[{filename:{equals:t}}]},n]};o.upload.imageSizes&&o.upload.imageSizes.forEach(({name:a})=>{i.and?.[0]?.or?.push({[`sizes.${a}.filename`]:{equals:t}})});let s=await r.payload.db.findOne({collection:o.slug,req:r,where:i});if(!s)throw new ae(r.t);return s}};import Tue from"fs";function xue(e){return new ReadableStream({async pull(t){let{done:r,value:o}=await e.next();r?t.close():t.enqueue(o)}})}async function*Rue(e){for await(let t of e)yield new Uint8Array(t)}function z2(e){let t=Tue.createReadStream(e);return xue(Rue(t))}var Due={css:"text/css",csv:"text/csv",htm:"text/html",html:"text/html",js:"application/javascript",json:"application/json",md:"text/markdown",svg:"image/svg+xml",xml:"application/xml",yml:"application/x-yaml"},$2=e=>{let t=e.split(".").pop()||"txt";return{ext:t,mime:Due[t]||"text/plain"}};var K2=async e=>{let t=De(e),r=e.routeParams?.filename;if(!t.config.upload)throw new F(`This collection is not an upload collection: ${t.config.slug}`,N.BAD_REQUEST);let o=await J2({collection:t,filename:r,req:e});if(o instanceof Response)return o;if(t.config.upload.handlers?.length){let A=null;for(let d of t.config.upload.handlers)A=await d(e,{doc:o,params:{collection:t.config.slug,filename:r}});if(A instanceof Response)return A}let n=t.config.upload?.staticDir||t.config.slug,i=kue.resolve(`${n}/${r}`),s;try{s=await Fue.stat(i)}catch(A){if(A.code==="ENOENT")return e.payload.logger.error(`File ${r} for collection ${t.config.slug} is missing on the disk. Expected path: ${i}`),Response.json({errors:[{message:"Something went wrong."}]},{headers:j({headers:new Headers,req:e}),status:500});throw A}let a=z2(i),l=await Df(i)||$2(i),c=new Headers;return c.set("Content-Type",l.mime),c.set("Content-Length",s.size+""),c=t.config.upload?.modifyResponseHeaders?t.config.upload.modifyResponseHeaders({headers:c}):c,new Response(a,{headers:j({headers:c,req:e}),status:N.OK})};var Z2=async e=>{let{id:t,collection:r}=gt(e,{optionalID:!0});if(!e.user)throw new ae(e.t);let o=r?.config;if(t){if(!await oe({req:e},o.access.update))throw new ae(e.t)}else if(!await oe({req:e},o.access?.create))throw new ae(e.t);try{if(!e.url)throw new F("Request URL is missing.",400);let{searchParams:n}=new URL(e.url),i=n.get("src");if(!i||typeof i!="string")throw new F("A valid URL string is required.",400);let s=new URL(i);if(typeof o.upload?.pasteURL=="object"&&!mA(s.href,o.upload.pasteURL.allowList))throw new F(`The provided URL (${s.href}) is not allowed.`,400);let a=await fetch(s.href,{headers:{"Accept-Encoding":"identity"}});if(!a.ok)throw new F(`Failed to fetch file from ${s.href}`,a.status);let l=decodeURIComponent(s.pathname.split("/").pop()||"");return new Response(a.body,{headers:{"Content-Disposition":`attachment; filename="${l}"`,"Content-Length":a.headers.get("content-length")||"","Content-Type":a.headers.get("content-type")||"application/octet-stream"}})}catch(n){throw new F(`Error fetching file: ${n instanceof Error?n.message:"Unknown error"}`,500)}};var X2=Wn([{handler:Z2,method:"get",path:"/paste-url/:id?"},{handler:K2,method:"get",path:"/file/:filename"}]);var eG=(e,t)=>t.map(o=>o.replace("*","")).some(o=>e.startsWith(o));var tG=e=>(t,{siblingData:r})=>r.filename?t?eG(t,e)?!0:`Invalid file type: '${t}'`:"Invalid file type":!0;var rG=({collectionSlug:e,config:t,filename:r})=>{if(r)return`${t.serverURL||""}${t.routes?.api||""}/${e}/file/${encodeURIComponent(r)}`},oG=({collection:e,config:t})=>{let r=typeof e.upload=="object"?e.upload:{},o={name:"mimeType",type:"text",admin:{hidden:!0,readOnly:!0},label:"MIME Type"},n={name:"thumbnailURL",type:"text",admin:{hidden:!0,readOnly:!0},hooks:{afterRead:[({originalDoc:d})=>{let f=typeof e.upload!="boolean"?e.upload?.adminThumbnail:void 0;return typeof f=="function"?f({doc:d}):typeof f=="string"&&"sizes"in d&&d.sizes?.[f]?.filename?rG({collectionSlug:e.slug,config:t,filename:d.sizes?.[f].filename}):null}]},label:"Thumbnail URL"},i={name:"width",type:"number",admin:{hidden:!0,readOnly:!0},label:({t:d})=>d("upload:width")},s={name:"height",type:"number",admin:{hidden:!0,readOnly:!0},label:({t:d})=>d("upload:height")},a={name:"filesize",type:"number",admin:{hidden:!0,readOnly:!0},label:({t:d})=>d("upload:fileSize")},l={name:"filename",type:"text",admin:{disableBulkEdit:!0,hidden:!0,readOnly:!0},index:!0,label:({t:d})=>d("upload:fileName")};(e.upload===!0||typeof e.upload=="object"&&!e.upload.filenameCompoundIndex)&&(l.unique=!0);let c={name:"url",type:"text",admin:{hidden:!0,readOnly:!0},label:"URL"},A=[{...c,hooks:{afterRead:[({data:d,value:f})=>f&&!d?.filename?f:rG({collectionSlug:e.slug,config:t,filename:d?.filename})]}},n,l,o,a,i,s];return(r.focalPoint!==!1||r.imageSizes||r.resizeOptions)&&(A=A.concat(["focalX","focalY"].map(d=>({name:d,type:"number",admin:{disableListColumn:!0,disableListFilter:!0,hidden:!0}})))),r.mimeTypes&&(o.validate=tG(r.mimeTypes)),r.imageSizes&&(A=A.concat([{name:"sizes",type:"group",admin:{hidden:!0},fields:r.imageSizes.map(d=>({name:d.name,type:"group",admin:{hidden:!0},fields:[{...c,hooks:{afterRead:[({data:f,value:u})=>{if(u&&d.height&&d.width&&!f?.filename)return u;let p=f?.sizes?.[d.name]?.filename;return p?`${t.serverURL}${t.routes?.api}/${e.slug}/file/${p}`:null}]}},i,s,o,a,{...l,unique:!1}],label:d.name})),label:({t:d})=>d("upload:sizes")}])),A};var Hu={autosaveInterval:2e3};var nG=async e=>{let t=De(e),{where:r}=e.query,o=await uA({collection:t,req:e,where:r});return Response.json(o,{status:N.OK})};import{getTranslation as Nue}from"@payloadcms/translations";var ke=e=>{if(e&&typeof e=="object")for(let t in e){let r=t;e[r]==="true"?e[r]=!0:e[r]==="false"?e[r]=!1:typeof e[r]=="object"&&ke(e[r])}return e};var Fe=e=>{if(!(!e||typeof e!="object")){for(let t in e)e[t]=ke(e[t]);return e}};var iG=async e=>{let t=De(e),{searchParams:r}=e,o=r.get("autosave")==="true",n=r.get("draft")==="true",i=r.get("depth"),s=await ea({autosave:o,collection:t,data:e.data,depth:Z(i)?i:void 0,draft:n,populate:Fe(e.query.populate),req:e,select:ke(e.query.select)});return Response.json({doc:s,message:e.t("general:successfullyCreated",{label:Nue(t.config.labels.singular,e.i18n)})},{headers:j({headers:new Headers,req:e}),status:N.CREATED})};import{getTranslation as sG}from"@payloadcms/translations";var aG=async e=>{let t=De(e),{depth:r,overrideLock:o,populate:n,select:i,where:s}=e.query,a=await mu({collection:t,depth:Z(r)?Number(r):void 0,overrideLock:o==="true",populate:Fe(n),req:e,select:ke(i),where:s}),l=j({headers:new Headers,req:e});if(a.errors.length===0){let d=e.t("general:deletedCountSuccessfully",{count:a.docs.length,label:sG(t.config.labels[a.docs.length===1?"singular":"plural"],e.i18n)});return Response.json({...a,message:d},{headers:l,status:N.OK})}let c=a.docs.length+a.errors.length,A=e.t("error:unableToDeleteCount",{count:a.errors.length,label:sG(t.config.labels[c===1?"singular":"plural"],e.i18n),total:c});return Response.json({...a,message:A},{headers:l,status:N.BAD_REQUEST})};var lG=async e=>{let{id:t,collection:r}=gt(e),{searchParams:o}=e,n=o.get("depth"),i=o.get("overrideLock"),s=await yu({id:t,collection:r,depth:Z(n)?n:void 0,overrideLock:i==="true",populate:Fe(e.query.populate),req:e,select:ke(e.query.select)}),a=j({headers:new Headers,req:e});return s?Response.json({doc:s,message:e.t("general:deletedSuccessfully")},{headers:a,status:N.OK}):Response.json({message:e.t("general:notFound")},{headers:a,status:N.NOT_FOUND})};var cG=async e=>{let{id:t,collection:r}=gt(e,{optionalID:!0}),o=await IQ({id:t,collection:r,req:e});return Response.json(o,{headers:j({headers:new Headers,req:e}),status:N.OK})};import{getTranslation as vue}from"@payloadcms/translations";var AG=async e=>{let{id:t,collection:r}=gt(e),{searchParams:o}=e,n=o.get("depth"),i=o.get("draft")!=="false",s=await Eu({id:t,collection:r,data:e.data,depth:Z(n)?Number(n):void 0,draft:i,populate:Fe(e.query.populate),req:e,select:ke(e.query.select)}),a=e.t("general:successfullyDuplicated",{label:vue(r.config.labels.singular,e.i18n)});return Response.json({doc:s,message:a},{headers:j({headers:new Headers,req:e}),status:N.OK})};var Vu=(e={})=>{let t={},r=e;return Object.keys(r).forEach(o=>{r[o]==="false"||r[o]===!1?t[o]=!1:t[o]={count:r[o].count==="true",limit:Z(r[o]?.limit)?Number(r[o].limit):void 0,page:Z(r[o]?.page)?Number(r[o].page):void 0,sort:r[o]?.sort?r[o].sort:void 0,where:r[o]?.where?r[o].where:void 0}}),t};var uG=async e=>{let t=De(e),{depth:r,draft:o,joins:n,limit:i,page:s,pagination:a,populate:l,select:c,sort:A,where:d}=e.query,f=await Iu({collection:t,depth:Z(r)?Number(r):void 0,draft:o==="true",joins:Vu(n),limit:Z(i)?Number(i):void 0,page:Z(s)?Number(s):void 0,pagination:a==="false"?!1:void 0,populate:Fe(l),req:e,select:ke(c),sort:typeof A=="string"?A.split(","):void 0,where:d});return Response.json(f,{headers:j({headers:new Headers,req:e}),status:N.OK})};var dG=async e=>{let{searchParams:t}=e,{id:r,collection:o}=gt(e),n=t.get("depth"),i=await ta({id:r,collection:o,depth:Z(n)?Number(n):void 0,draft:t.get("draft")==="true",joins:Vu(e.query.joins),populate:Fe(e.query.populate),req:e,select:ke(e.query.select)});return Response.json(i,{headers:j({headers:new Headers,req:e}),status:N.OK})};var fG=async e=>{let{searchParams:t}=e,r=t.get("depth"),{id:o,collection:n}=gt(e),i=await Bu({id:o,collection:n,depth:Z(r)?Number(r):void 0,populate:Fe(e.query.populate),req:e,select:ke(e.query.select)});return Response.json(i,{headers:j({headers:new Headers,req:e}),status:N.OK})};var pG=async e=>{let t=De(e),{depth:r,limit:o,page:n,pagination:i,populate:s,select:a,sort:l,where:c}=e.query,A=await Qu({collection:t,depth:Z(r)?Number(r):void 0,limit:Z(o)?Number(o):void 0,page:Z(n)?Number(n):void 0,pagination:i==="false"?!1:void 0,populate:Fe(s),req:e,select:ke(a),sort:typeof l=="string"?l.split(","):void 0,where:c});return Response.json(A,{headers:j({headers:new Headers,req:e}),status:N.OK})};var hG=async e=>{let{id:t,collection:r}=gt(e),{searchParams:o}=e,n=o.get("depth"),i=await ta({id:t,collection:r,depth:Z(n)?Number(n):void 0,draft:o.get("draft")==="true",req:e}),s,a=e.payload?.collections?.[r.config.slug]?.config?.admin?.preview,l=Sn(e);return typeof a=="function"&&(s=await a(i,{locale:e.locale,req:e,token:l})),Response.json(s,{headers:j({headers:new Headers,req:e}),status:N.OK})};var gG=async e=>{let{id:t,collection:r}=gt(e),{searchParams:o}=e,n=o.get("depth"),i=o.get("draft"),s=await bu({id:t,collection:r,depth:Z(n)?Number(n):void 0,draft:i==="true"?!0:void 0,populate:Fe(e.query.populate),req:e});return Response.json({...s,message:e.t("version:restoredSuccessfully")},{headers:j({headers:new Headers,req:e}),status:N.OK})};import{getTranslation as mG}from"@payloadcms/translations";var yG=async e=>{let t=De(e),{depth:r,draft:o,limit:n,overrideLock:i,populate:s,select:a,sort:l,where:c}=e.query,A=await wu({collection:t,data:e.data,depth:Z(r)?Number(r):void 0,draft:o==="true",limit:Z(n)?Number(n):void 0,overrideLock:i==="true",populate:Fe(s),req:e,select:ke(a),sort:typeof l=="string"?l.split(","):void 0,where:c}),d=j({headers:new Headers,req:e});if(A.errors.length===0){let p=e.t("general:updatedCountSuccessfully",{count:A.docs.length,label:mG(t.config.labels[A.docs.length===1?"singular":"plural"],e.i18n)});return Response.json({...A,message:p},{headers:d,status:N.OK})}let f=A.docs.length+A.errors.length,u=e.t("error:unableToUpdateCount",{count:A.errors.length,label:mG(t.config.labels[f===1?"singular":"plural"],e.i18n),total:f});return Response.json({...A,message:u},{headers:d,status:N.BAD_REQUEST})};var EG=async e=>{let{id:t,collection:r}=gt(e),{searchParams:o}=e,n=o.get("depth"),i=o.get("autosave")==="true",s=o.get("draft")==="true",a=o.get("overrideLock"),l=e.query.publishSpecificLocale,c=await Su({id:t,autosave:i,collection:r,data:e.data,depth:Z(n)?Number(n):void 0,draft:s,overrideLock:a==="true",populate:Fe(e.query.populate),publishSpecificLocale:l,req:e,select:ke(e.query.select)}),A=e.t("general:updatedSuccessfully");return s&&(A=e.t("version:draftSavedSuccessfully")),i&&(A=e.t("version:autosavedSuccessfully")),Response.json({doc:c,message:A},{headers:j({headers:new Headers,req:e}),status:N.OK})};var CG=[...Wn([{handler:nG,method:"get",path:"/count"},{handler:iG,method:"post",path:"/"},{handler:aG,method:"delete",path:"/"},{handler:lG,method:"delete",path:"/:id"},{handler:cG,method:"post",path:"/access/:id?"},{handler:pG,method:"get",path:"/versions"},{handler:AG,method:"post",path:"/:id/duplicate"},{handler:uG,method:"get",path:"/"},{handler:dG,method:"get",path:"/:id"},{handler:fG,method:"get",path:"/versions/:id"},{handler:hG,method:"get",path:"/:id/preview"},{handler:gG,method:"post",path:"/versions/:id"},{handler:yG,method:"patch",path:"/"},{handler:EG,method:"patch",path:"/:id"}])];var IG=e=>(e.access={create:nt,delete:nt,read:nt,unlock:nt,update:nt,...e.access||{}},e.admin={components:{},custom:{},enableRichTextLink:!0,enableRichTextRelationship:!0,useAsTitle:"id",...e.admin||{},pagination:{defaultLimit:10,limits:[5,10,25,50,100],...e.admin?.pagination||{}}},e.auth=e.auth??!1,e.custom=e.custom??{},e.endpoints=e.endpoints??[],e.fields=e.fields??[],e.folders=e.folders??!1,e.hooks={afterChange:[],afterDelete:[],afterForgotPassword:[],afterLogin:[],afterLogout:[],afterMe:[],afterOperation:[],afterRead:[],afterRefresh:[],beforeChange:[],beforeDelete:[],beforeLogin:[],beforeOperation:[],beforeRead:[],beforeValidate:[],me:[],refresh:[],...e.hooks||{}},e.timestamps=e.timestamps??!0,e.upload=e.upload??!1,e.versions=e.versions??!1,e.indexes=e.indexes??[],e);var BG=e=>(e.cookies={sameSite:"Lax",secure:!1,...e.cookies||{}},e.forgotPassword=e.forgotPassword??{},e.lockTime=e.lockTime??6e5,e.loginWithUsername=e.loginWithUsername??!1,e.maxLoginAttempts=e.maxLoginAttempts??5,e.tokenExpiration=e.tokenExpiration??7200,e.useSessions=e.useSessions??!0,e.verify=e.verify??!1,e.strategies=e.strategies??[],!e.disableLocalStrategy&&e.verify===!0&&(e.verify={}),e);var YQ=e=>({allowEmailLogin:!1,requireEmail:!1,requireUsername:!0,...e||{}});var QG=({fields:e,indexes:t})=>{let r=[];for(let o of t){let n={fields:[],unique:o.unique??!1};for(let i of o.fields){let s=Zl({fields:e,path:i});if(!s)throw new qt(`Field ${i} was not found`);let{field:a,localizedPath:l,pathHasLocalized:c}=s;if(["array","blocks","group","tab"].includes(a.type))throw new qt(`Compound index on ${a.type} cannot be set. Path: ${l}`);n.fields.push({field:a,localizedPath:l,path:i,pathHasLocalized:c})}r.push(n)}return r};import{getTranslation as WQ}from"@payloadcms/translations";function ln(e,t){let r=typeof t=="boolean"?{keepPresentationalFields:t}:t??{},{i18n:o,keepPresentationalFields:n,labelPrefix:i,moveSubFieldsToTop:s=!1,pathPrefix:a}=r;return e.reduce((l,c)=>{if(c.type==="group"&&"fields"in c)if(s){let A="name"in c&&typeof c.name=="string"&&!!c.name,d="name"in c?c.name:void 0,f="label"in c&&c.label&&o?WQ(c.label,o):void 0,u=i?`${i} > ${f??d}`:f??d,p="name"in c&&c.name?a?`${a}.${c.name}`:c.name:a;l.push(c,...ln(c.fields,{i18n:o,keepPresentationalFields:n,labelPrefix:A?u:i,moveSubFieldsToTop:s,pathPrefix:A?p:a}))}else J(c)?l.push(c):l.push(...ln(c.fields,t));else{if(c.type==="tabs"&&"tabs"in c)return[...l,...c.tabs.reduce((A,d)=>{if(yt(d))if(s){let f="label"in d&&d.label&&o?WQ(d.label,o):void 0,u=i?`${i} > ${f??d.name}`:f??d.name,p=d.name?a?`${a}.${d.name}`:d.name:a;return[...A,...ln(d.fields,{i18n:o,keepPresentationalFields:n,labelPrefix:u,moveSubFieldsToTop:s,pathPrefix:p})]}else return[...A,{...d,type:"tab"}];else return[...A,...ln(d.fields,t)]},[])];if(es(c)&&["collapsible","row"].includes(c.type))l.push(...ln(c.fields,t));else if(J(c)||n&&Bm(c)){if(c.name==="id"&&i!==void 0)return l;let A="label"in c&&c.label&&o?WQ(c.label,o):void 0,d="name"in c?c.name:void 0,f=a!==void 0||i!==void 0;l.push({...c,...s&&f&&{accessor:a&&d?`${a}.${d}`:d??"",labelWithPrefix:i?`${i} > ${A??d}`:A??d}})}}return l},[])}var bG=e=>{if(e.admin?.useAsTitle?.includes("."))throw new qt(`"useAsTitle" cannot be a nested field. Please specify a top-level field in the collection "${e.slug}"`);if(e?.admin&&e.admin?.useAsTitle&&e.admin.useAsTitle!=="id"){let r=ln(e.fields).find(o=>J(o)&&e.admin?o.name===e.admin.useAsTitle:!1);if(e.auth){if(e.admin.useAsTitle!=="email"&&!r)throw new qt(`The field "${e.admin.useAsTitle}" specified in "admin.useAsTitle" does not exist in the collection "${e.slug}"`)}else{if(r&&"virtual"in r&&r.virtual===!0)throw new qt(`The field "${e.admin.useAsTitle}" specified in "admin.useAsTitle" in the collection "${e.slug}" is virtual. A virtual field can be used as the title only when linked to a relationship field.`);if(!r)throw new qt(`The field "${e.admin.useAsTitle}" specified in "admin.useAsTitle" does not exist in the collection "${e.slug}"`)}}};var sa=async(e,t,r,o)=>{if(t._sanitized)return t;t._sanitized=!0;let n=IG(t),i=o??e.collections.map(c=>c.slug)??[],s={},a=[];if(n.fields=await cn({collectionConfig:n,config:e,fields:n.fields,joinPath:"",joins:s,parentIsLocalized:!1,polymorphicJoins:a,richTextSanitizationPromises:r,validRelationships:i}),n.endpoints!==!1){if(n.endpoints||(n.endpoints=[]),n.auth)for(let c of L2)n.endpoints.push(c);if(n.upload)for(let c of X2)n.endpoints.push(c);for(let c of CG)n.endpoints.push(c)}if(n.timestamps!==!1){let c=null,A=null;n.fields.some(d=>(J(d)&&(d.name==="updatedAt"&&(c=!0),d.name==="createdAt"&&(A=!0)),A&&c)),c||n.fields.push({name:"updatedAt",type:"date",admin:{disableBulkEdit:!0,hidden:!0},index:!0,label:({t:d})=>d("general:updatedAt")}),A||n.fields.push({name:"createdAt",admin:{disableBulkEdit:!0,hidden:!0},type:"date",index:!0,label:({t:d})=>d("general:createdAt")})}if(n.labels=n.labels||Mi(n.slug),n.versions){if(n.versions===!0&&(n.versions={drafts:!1,maxPerDoc:100}),n.timestamps===!1)throw new Bg(t);n.versions.maxPerDoc=typeof n.versions.maxPerDoc=="number"?n.versions.maxPerDoc:100,n.versions.drafts&&(n.versions.drafts===!0&&(n.versions.drafts={autosave:!1,validate:!1}),n.versions.drafts.autosave===!0&&(n.versions.drafts.autosave={interval:Hu.autosaveInterval}),n.versions.drafts.validate===void 0&&(n.versions.drafts.validate=!1),n.fields=ia(n.fields,tg))}if(n.folders===!0?n.folders={browseByFolder:!0}:n.folders&&(n.folders.browseByFolder=n.folders.browseByFolder??!0),n.upload){n.upload===!0&&(n.upload={}),n.upload.cacheTags=n.upload?.cacheTags??!0,n.upload.bulkUpload=n.upload?.bulkUpload??!0,n.upload.staticDir=n.upload.staticDir||n.slug,n.admin.useAsTitle=n.admin?.useAsTitle&&n.admin.useAsTitle!=="id"?n.admin.useAsTitle:"filename";let c=oG({collection:n,config:e});n.fields=ia(n.fields,c)}if(n.auth){if(n.auth=BG(typeof n.auth=="boolean"?{}:n.auth),n.disableDuplicate=n.disableDuplicate??!0,n.auth.loginWithUsername)if(n.auth.loginWithUsername===!0)n.auth.loginWithUsername=YQ({});else{let c=YQ(n.auth.loginWithUsername);c.allowEmailLogin===!1&&(c.requireUsername=!0),n.auth.loginWithUsername=c}else n.auth.loginWithUsername=!1;t?.admin?.useAsTitle||(n.admin.useAsTitle=n.auth.loginWithUsername?"username":"email"),n.fields=ia(n.fields,U2(n.auth))}t?.admin?.pagination?.limits?.length&&(n.admin.pagination.limits=t.admin.pagination.limits),bG(n);let l=n;return l.joins=s,l.polymorphicJoins=a,l.flattenedFields=Nt({fields:l.fields}),l.sanitizedIndexes=QG({fields:l.flattenedFields,indexes:l.indexes}),l};var JQ={slug:"payload-migrations",admin:{hidden:!0},endpoints:!1,fields:[{name:"name",type:"text"},{name:"batch",type:"number"}],graphQL:!1,lockDocuments:!1};function Xl(e,t="and"){return e.length===0?{}:{[t]:e.filter(r=>!!(r&&typeof r=="object"&&Object.keys(r).length>0))}}var zQ=e=>Object.keys(e).length===0,Pue=(e,t)=>zQ(t)?e:zQ(e)?t:("and"in e&&e.and?e.and.push(t):"or"in e?e={and:[e,t]}:e={and:[e,t]},e),wG=({collectionConfig:e,search:t,where:r={}})=>{if(t){let o={...r||{}},n=(e.admin.listSearchableFields||[e.admin?.useAsTitle||"id"]).map(i=>({[i]:{like:t}}));n.length>0&&(o=Pue(o,{or:n})),zQ(o)||(r=o)}return r};async function wg({collectionConfig:e,folderID:t,localeCode:r,req:o,search:n="",sort:i}){let s=[wG({collectionConfig:e,search:n})];if(typeof e.admin?.baseListFilter=="function"){let l=await e.admin.baseListFilter({limit:0,locale:r,page:1,req:o,sort:i||(typeof e.defaultSort=="string"?e.defaultSort:"id")});l&&s.push(l)}t&&s.push({relationTo:{equals:e.slug}});let a=s.filter(Boolean);if(a.length>1)return Xl(a);if(a.length===1)return a[0]}var $Q=async({breadcrumbs:e=[],folderID:t,req:r})=>{let{payload:o,user:n}=r;if(t&&o.config.folders){let i=o.config.folders.fieldName,a=(await o.find({collection:o.config.folders.slug,depth:0,limit:1,overrideAccess:!1,req:r,select:{name:!0,[i]:!0},user:n,where:{id:{equals:t}}})).docs[0];if(a&&(e.push({id:a.id,name:a.name}),a[i]))return $Q({breadcrumbs:e,folderID:typeof a[i]=="number"||typeof a[i]=="string"?a[i]:a[i].id,req:r})}return e.reverse()};var SG=({sizes:e,targetSizeMax:t=180,targetSizeMin:r=40,thumbnailURL:o,url:n,width:i})=>o||e&&Object.values(e).reduce((a,l)=>!l.width||l.width<r?a:l.width>=r&&l.width<=t?!a.width||l.width<a.width||a.width<r||a.width>t?l:a:!a.width||!a.original&&a.width<r&&l.width>a.width||a.width>t&&l.width<a.width?l:a,{original:!0,url:n,width:i}).url||n;function Sg({folderFieldName:e,isUpload:t,relationTo:r,useAsTitle:o,value:n}){let i={id:n?.id,_folderOrDocumentTitle:String(o&&n?.[o]||n.id),createdAt:n?.createdAt,folderID:n?.[e],updatedAt:n?.updatedAt};return t&&(i.filename=n.filename,i.mimeType=n.mimeType,i.url=Yh(n.mimeType)?SG({sizes:n.sizes,targetSizeMax:520,targetSizeMin:300,url:n.url,width:n.width}):void 0),{itemKey:`${r}-${n.id}`,relationTo:r,value:i}}async function TG({documentWhere:e,folderWhere:t,parentFolderID:r,req:o}){let{payload:n,user:i}=o;if(n.config.folders===!1)throw new F("Folders are not enabled",500);return((await n.find({collection:n.config.folders.slug,joins:{documentsAndFolders:{limit:1e8,sort:"name",where:Xl([t,e],"or")}},limit:1,overrideAccess:!1,req:o,user:i,where:{id:{equals:r}}}))?.docs[0]?.documentsAndFolders?.docs||[]).reduce((c,A)=>{if(!n.config.folders)return c;let{relationTo:d,value:f}=A,u=Sg({folderFieldName:n.config.folders.fieldName,isUpload:!!n.collections[d].config.upload,relationTo:d,useAsTitle:n.collections[d].config.admin?.useAsTitle,value:f});return d===n.config.folders.slug?c.subfolders.push(u):c.documents.push(u),c},{documents:[],subfolders:[]})}async function KQ({collectionSlug:e,folderFieldName:t,req:r,where:o}){let{payload:n,user:i}=r,s={or:[{[t]:{exists:!1}},{[t]:{equals:null}}]};return(await n.find({collection:e,limit:0,overrideAccess:!1,req:r,sort:n.collections[e]?.config.admin.useAsTitle,user:i,where:o?Xl([s,o]):s}))?.docs.map(l=>Sg({folderFieldName:t,isUpload:!!n.collections[e]?.config.upload,relationTo:e,useAsTitle:n.collections[e]?.config.admin.useAsTitle,value:l}))||[]}var ZQ=async({collectionSlug:e,documentWhere:t,folderID:r,folderWhere:o,req:n})=>{let{payload:i}=n;if(i.config.folders===!1)throw new Error("Folders are not enabled");let s=XQ({id:r,collectionSlug:i.config.folders.slug,payload:i}),a=$Q({folderID:s,req:n});if(s){let l=TG({documentWhere:t,folderWhere:o,parentFolderID:s,req:n}),[c,A]=await Promise.all([a,l]);return{breadcrumbs:c,documents:A.documents,subfolders:A.subfolders}}else{let l=KQ({collectionSlug:i.config.folders.slug,folderFieldName:i.config.folders.fieldName,req:n,where:o}),c=e?KQ({collectionSlug:e,folderFieldName:i.config.folders.fieldName,req:n,where:t}):Promise.resolve([]),[A,d,f]=await Promise.all([a,l,c]);return{breadcrumbs:A,documents:f,subfolders:d}}};var xG={handler:async e=>{if(!e?.user)return Response.json({message:"Unauthorized request."},{status:ha.UNAUTHORIZED});if(!(e.payload.config.folders&&e.payload.collections?.[e.payload.config.folders.slug]))return Response.json({message:"Folders are not configured"},{status:ha.NOT_FOUND});let t,r,o=e.searchParams?.get("collectionSlug");if(o){let a=e.payload.collections?.[o]?.config;if(!a)return Response.json({message:`Collection with slug "${o}" not found`},{status:ha.NOT_FOUND});let l=await wg({collectionConfig:a,folderID:e.searchParams?.get("folderID")||void 0,localeCode:typeof e?.locale=="string"?e.locale:void 0,req:e,search:e.searchParams?.get("search")||void 0,sort:e.searchParams?.get("sort")||void 0});l&&(t=l)}else for(let a of Object.keys(e.payload.collections)){let l=e.payload.collections[a]?.config;if(l?.folders){let c=await wg({collectionConfig:l,folderID:e.searchParams?.get("folderID")||void 0,localeCode:typeof e?.locale=="string"?e.locale:void 0,req:e,search:e.searchParams?.get("search")||void 0});c&&(t||(t={or:[]}),Array.isArray(t.or)?Array.isArray(t.or)&&t.or.push(c):t.or=[t])}}let n=e.payload.collections?.[e.payload.config.folders.slug]?.config;if(!n)return Response.json({message:"Folder collection not found"},{status:ha.NOT_FOUND});let i=await wg({collectionConfig:n,folderID:e.searchParams?.get("folderID")||void 0,localeCode:typeof e?.locale=="string"?e.locale:void 0,req:e,search:e.searchParams?.get("search")||void 0});i&&(r=i);let s=await ZQ({collectionSlug:e.searchParams?.get("collectionSlug")||void 0,documentWhere:t||void 0,folderID:e.searchParams?.get("folderID")||void 0,folderWhere:r,req:e});return Response.json(s)},method:"get",path:"/populate-folder-data"};var RG=({folderFieldName:e,folderSlug:t})=>async({id:r,req:o})=>{await o.payload.delete({collection:t,req:o,where:{[e]:{equals:r}}})};var DG=({collectionSlugs:e,folderFieldName:t})=>async({id:r,req:o})=>{for(let n of e)await o.payload.update({collection:n,data:{[t]:null},req:o,where:{[t]:{equals:r}}})};var Tg=e=>typeof e=="string"||typeof e=="number"?e:e.id;async function FG({folderCollectionSlug:e,folderFieldName:t,folderID:r,parentIDToFind:o,payload:n}){let i=await n.findByID({id:r,collection:e}),s=i[t]?Tg(i[t]):void 0;return s?s===o?!0:FG({folderCollectionSlug:e,folderFieldName:t,folderID:s,parentIDToFind:o,payload:n}):!1}var kG=({folderFieldName:e})=>async({doc:t,previousDoc:r,req:o})=>{if(r[e]!==t[e]&&t[e]&&o.payload.config.folders){let n=Tg(t[e]);(n?await FG({folderCollectionSlug:o.payload.config.folders.slug,folderFieldName:e,folderID:n,parentIDToFind:t.id,payload:o.payload}):!1)&&await o.payload.update({id:n,collection:o.payload.config.folders.slug,data:{[e]:r[e]?Tg(r[e]):null},req:o})}};var NG=({slug:e,collectionSlugs:t,debug:r,folderFieldName:o})=>({slug:e,admin:{hidden:!r,useAsTitle:"name"},endpoints:[xG],fields:[{name:"name",type:"text",index:!0,required:!0},{name:o,type:"relationship",admin:{hidden:!r},index:!0,relationTo:e},{name:"documentsAndFolders",type:"join",admin:{hidden:!r},collection:[e,...t],hasMany:!0,on:o}],hooks:{afterChange:[kG({folderFieldName:o})],afterDelete:[DG({collectionSlugs:t,folderFieldName:o})],beforeDelete:[RG({folderFieldName:o,folderSlug:e})]},labels:{plural:"Folders",singular:"Folder"},typescript:{interface:"FolderInterface"}});async function vG(e){if(!e.collections||!e.folders)return;let t=[],r=!!e?.folders?.debug,o=e?.folders?.fieldName,n=e?.folders?.slug;for(let i=0;i<e.collections.length;i++){let s=e.collections[i];s&&s?.folders&&(s.fields.push({name:o,type:"relationship",admin:{allowCreate:!1,allowEdit:!1,components:{Cell:"@payloadcms/ui/rsc#FolderTableCell",Field:"@payloadcms/ui/rsc#FolderEditField"}},index:!0,label:"Folder",relationTo:n}),t.push(s.slug))}if(t.length){let i=NG({slug:n,collectionSlugs:t,debug:r,folderFieldName:o});if(Array.isArray(e?.folders?.collectionOverrides)&&e?.folders.collectionOverrides.length)for(let s of e.folders.collectionOverrides)i=await s({collection:i});e.collections.push(i)}}var eb=async e=>{let{globalConfig:t,req:r}=e,o=["read","update"];t.versions&&o.push("readVersions");try{let n=await de(r),i=await Mo({type:"global",blockPolicies:{},entity:t,operations:o,req:r});return n&&await pe(r),Wl({globals:{[t.slug]:i}}).globals[t.slug]}catch(n){throw await H(r),n}};var PG=async e=>{let t=mr(e),r=await eb({globalConfig:t,req:e});return Response.json(r,{headers:j({headers:new Headers,req:e}),status:N.OK})};var LG=async e=>{let t=mr(e),{searchParams:r}=e,o=r.get("depth"),n=await ra({slug:t.slug,depth:Z(o)?Number(o):void 0,draft:r.get("draft")==="true",globalConfig:t,populate:Fe(e.query.populate),req:e,select:ke(e.query.select)});return Response.json(n,{headers:j({headers:new Headers,req:e}),status:N.OK})};var UG=async e=>{let t=mr(e),{searchParams:r}=e,o=r.get("depth"),n=await Tu({id:e.routeParams.id,depth:Z(o)?Number(o):void 0,globalConfig:t,populate:Fe(e.query.populate),req:e,select:ke(e.query.select)});return Response.json(n,{headers:j({headers:new Headers,req:e}),status:N.OK})};var OG=async e=>{let t=mr(e),{depth:r,limit:o,page:n,pagination:i,populate:s,select:a,sort:l,where:c}=e.query,A=await xu({depth:Z(r)?Number(r):void 0,globalConfig:t,limit:Z(o)?Number(o):void 0,page:Z(n)?Number(n):void 0,pagination:i==="false"?!1:void 0,populate:Fe(s),req:e,select:ke(a),sort:typeof l=="string"?l.split(","):void 0,where:c});return Response.json(A,{headers:j({headers:new Headers,req:e}),status:N.OK})};var MG=async e=>{let t=mr(e),{searchParams:r}=e,o=r.get("depth"),n=await ra({slug:t.slug,depth:Z(o)?Number(o):void 0,draft:r.get("draft")==="true",globalConfig:t,req:e}),i,s=e.payload.config.globals.find(l=>l.slug===t.slug)?.admin?.preview,a=Sn(e);return typeof s=="function"&&(i=await s(n,{locale:e.locale,req:e,token:a})),Response.json(i,{headers:j({headers:new Headers,req:e}),status:N.OK})};var _G=async e=>{let t=mr(e),{searchParams:r}=e,o=r.get("depth"),n=r.get("draft"),i=await Ru({id:e.routeParams.id,depth:Z(o)?Number(o):void 0,draft:n==="true"?!0:void 0,globalConfig:t,populate:Fe(e.query.populate),req:e});return Response.json({doc:i,message:e.t("version:restoredSuccessfully")},{headers:j({headers:new Headers,req:e}),status:N.OK})};var GG=async e=>{let t=mr(e),{searchParams:r}=e,o=r.get("depth"),n=r.get("draft")==="true",i=r.get("autosave")==="true",s=e.query.publishSpecificLocale,a=await Du({slug:t.slug,autosave:i,data:e.data,depth:Z(o)?Number(o):void 0,draft:n,globalConfig:t,populate:Fe(e.query.populate),publishSpecificLocale:s,req:e,select:ke(e.query.select)}),l=e.t("general:updatedSuccessfully");return n&&(l=e.t("version:draftSavedSuccessfully")),i&&(l=e.t("version:autosavedSuccessfully")),Response.json({message:l,result:a},{headers:j({headers:new Headers,req:e}),status:N.OK})};var jG=Wn([{handler:PG,method:"post",path:"/access"},{handler:LG,method:"get",path:"/"},{handler:UG,method:"get",path:"/versions/:id"},{handler:OG,method:"get",path:"/versions"},{handler:MG,method:"get",path:"/preview"},{handler:_G,method:"post",path:"/versions/:id"},{handler:GG,method:"post",path:"/"}]);var HG=async(e,t,r,o)=>{if(t._sanitized)return t;t._sanitized=!0,t.label=t.label||Pr(t.slug),t.endpoints=t.endpoints??[],t.hooks||(t.hooks={}),t.access||(t.access={}),t.admin||(t.admin={}),t.access.read||(t.access.read=nt),t.access.update||(t.access.update=nt),t.hooks.beforeValidate||(t.hooks.beforeValidate=[]),t.hooks.beforeChange||(t.hooks.beforeChange=[]),t.hooks.afterChange||(t.hooks.afterChange=[]),t.hooks.beforeRead||(t.hooks.beforeRead=[]),t.hooks.afterRead||(t.hooks.afterRead=[]);let n=o??e.collections?.map(a=>a.slug)??[];if(t.fields=await cn({config:e,fields:t.fields,parentIsLocalized:!1,richTextSanitizationPromises:r,validRelationships:n}),t.endpoints!==!1){t.endpoints||(t.endpoints=[]);for(let a of jG)t.endpoints.push(a)}t.versions&&(t.versions===!0&&(t.versions={drafts:!1,max:100}),t.versions.max=typeof t.versions.max=="number"?t.versions.max:100,t.versions.drafts&&(t.versions.drafts===!0&&(t.versions.drafts={autosave:!1,validate:!1}),t.versions.drafts.autosave===!0&&(t.versions.drafts.autosave={interval:Hu.autosaveInterval}),t.versions.drafts.validate===void 0&&(t.versions.drafts.validate=!1),t.fields=ia(t.fields,tg))),t.custom||(t.custom={});let i=null,s=null;return t.fields.some(a=>(J(a)&&(a.name==="updatedAt"&&(i=!0),a.name==="createdAt"&&(s=!0)),s&&i)),i||t.fields.push({name:"updatedAt",type:"date",admin:{disableBulkEdit:!0,hidden:!0},label:({t:a})=>a("general:updatedAt")}),s||t.fields.push({name:"createdAt",type:"date",admin:{disableBulkEdit:!0,hidden:!0},label:({t:a})=>a("general:createdAt")}),t.flattenedFields=Nt({fields:t.fields}),t};var VG=e=>e?e.or&&!e.and?{or:e.or.map(t=>t.and?t:{and:[t]})}:e.and&&!e.or?{or:[{and:e.and}]}:!e.or&&!e.and?{or:[{and:[e]}]}:e:{};var qG=e=>e?.or&&e?.or?.length>0&&e?.or?.[0]?.and&&e?.or?.[0]?.and?.length>0?e.or.every(r=>r.and&&Array.isArray(r.and)?r.and.every(o=>{if(typeof o!="object")return!1;let n=Object.keys(o);if(n.length===0)return!1;for(let i of n){let s=Object.keys(o[i])[0];if(!s||!Qf.has(s))return!1}return!0}):!1):!1;var Lue=["delete","read","update","create"],YG={create:nt,delete:nt,read:nt,unlock:nt,update:nt},WG=e=>Lue.reduce((t,r)=>(t[r]=async o=>{let{req:n}=o,i=e?.queryPresets?.access?.[r]?await e.queryPresets.access[r](o):YG?.[r]?YG[r](o):!0;return i===!1?!1:r==="create"?i:{and:[{or:[...n?.user?[{and:[{[`access.${r}.users`]:{in:[n.user.id]}},{[`access.${r}.constraint`]:{in:["onlyMe","specificUsers"]}}]}]:[],{[`access.${r}.constraint`]:{equals:"everyone"}},...await Promise.all((e?.queryPresets?.constraints?.[r]||[]).map(async s=>{let a=s.access?await s.access(o):void 0;return{and:[...typeof a=="object"?[a]:a===!1?[{id:{equals:null}}]:[],{[`access.${r}.constraint`]:{equals:s.value}}]}}))]},...typeof i=="object"?[i]:[]]}},t),{});import{getTranslation as Uue}from"@payloadcms/translations";var JG=async(e,{data:t,overrideAccess:r,req:o})=>{if(!o.context._preventLockout&&!r){let n=await W({context:{_preventLockout:!0},req:{user:o.user}},o.payload),i=await de(n),s=await n.payload.create({collection:Jn,data:{...t,isTemp:!0},req:n}),a=!1,l=!1;try{await n.payload.findByID({id:s.id,collection:Jn,overrideAccess:!1,req:n,user:n.user}),l=!0,await n.payload.update({id:s.id,collection:Jn,data:s,overrideAccess:!1,req:n,user:n.user}),a=!0}catch{if(!l||!a)throw new F("This action will lock you out of this preset.",403,{},!0)}finally{i?await H(n):await n.payload.delete({id:s.id,collection:Jn,req:n})}}return!0};var xg=["read","update","delete"];var Oue=[{label:"Everyone",value:"everyone"},{label:"Only Me",value:"onlyMe"},{label:"Specific Users",value:"specificUsers"}],zG=e=>({name:"access",type:"group",admin:{components:{Cell:"@payloadcms/ui#QueryPresetsAccessCell"},condition:t=>!!t?.isShared},fields:xg.map(t=>({type:"collapsible",fields:[{name:t,type:"group",admin:{hideGutter:!0},fields:[{name:"constraint",type:"select",defaultValue:"onlyMe",filterOptions:r=>typeof e?.queryPresets?.filterConstraints=="function"?e.queryPresets.filterConstraints(r):r.options,label:({i18n:r})=>`Specify who can ${t} this ${Uue(e.queryPresets?.labels?.singular||"Preset",r)}`,options:[...Oue,...e?.queryPresets?.constraints?.[t]?.map(r=>({label:r.label,value:r.value}))||[]]},{name:"users",type:"relationship",admin:{condition:r=>r?.access?.[t]?.constraint==="specificUsers"},hasMany:!0,hooks:{beforeChange:[({data:r,req:o})=>{if(r?.access?.[t]?.constraint==="onlyMe"&&o.user)return[o.user.id];if(r?.access?.[t]?.constraint==="specificUsers"&&o.user)return[...r?.access?.[t]?.users||[],o.user.id]}]},relationTo:e.admin?.user??"users"},...e?.queryPresets?.constraints?.[t]?.reduce((r,o)=>(o.fields?.forEach((n,i)=>{r.push({...n}),J(n)&&(r[i].admin={...r[i]?.admin||{},condition:s=>s?.access?.[t]?.constraint===o.value})}),r),[])||[]],label:!1}],label:()=>Pr(t)})),label:"Sharing settings",validate:JG});var Jn="payload-query-presets",$G=e=>({slug:Jn,access:WG(e),admin:{defaultColumns:["title","isShared","access","where","columns"],hidden:!0,useAsTitle:"title"},fields:[{name:"title",type:"text",required:!0},{name:"isShared",type:"checkbox",defaultValue:!1,validate:(t,{data:r})=>{let o=r;if(o?.access){let n=Object.values(o.access).some(i=>i.constraint!=="onlyMe");if(!t&&n)return'If any constraint is not "onlyMe", the preset must be shared'}return!0}},zG(e),{name:"where",type:"json",admin:{components:{Cell:"@payloadcms/ui#QueryPresetsWhereCell",Field:"@payloadcms/ui#QueryPresetsWhereField"}},hooks:{beforeValidate:[({data:t})=>t?.where?qG(t.where)?t.where:VG(t.where):t?.where]},label:"Filters"},{name:"columns",type:"json",admin:{components:{Cell:"@payloadcms/ui#QueryPresetsColumnsCell",Field:"@payloadcms/ui#QueryPresetsColumnField"}},validate:t=>{if(t)try{JSON.parse(JSON.stringify(t))}catch{return"Invalid JSON"}return!0}},{name:"relatedCollection",type:"select",admin:{hidden:!0},options:e.collections?e.collections.reduce((t,r)=>(r.enableQueryPresets&&t.push({label:r.labels?.plural||r.slug,value:r.slug}),t),[]):[],required:!0},{name:"isTemp",type:"checkbox",admin:{description:"This is a tempoary field used to determine if updating the preset would remove the user's access to it. When `true`, this record will be deleted after running the preset's `validate` function.",disabled:!0,hidden:!0}}],hooks:{beforeValidate:[({data:t,operation:r})=>{let o=t;if((r==="create"||r==="update")&&(xg.forEach(n=>{o.access||(o.access={}),o.access?.[n]||(o[n]={}),o.access[n]?.constraint||(o.access[n]={...o.access[n],constraint:"onlyMe"})}),o?.access)){let n=Object.values(o.access).some(i=>i.constraint!=="onlyMe");o.isShared=n}return o}]},labels:{plural:"Presets",singular:"Preset",...e.queryPresets?.labels||{}},lockDocuments:!1});var KG=({adminUserSlug:e,collections:t,globals:r})=>({slug:"schedulePublish",handler:async({input:o,req:n})=>{let i=o?.type==="publish"||!o?.type?"published":"draft",s=o.user,a=null;s&&(a=await n.payload.findByID({id:s,collection:e,depth:0}),a.collection=e);let l;return o?.type==="publish"&&o.locale&&n.payload.config.localization&&n.payload.config.localization.locales.find(({code:A})=>A===o.locale)&&(l=o.locale),o.doc&&await n.payload.update({id:o.doc.value,collection:o.doc.relationTo,data:{_status:i},depth:0,overrideAccess:a===null,publishSpecificLocale:l,user:a}),o.global&&await n.payload.updateGlobal({slug:o.global,data:{_status:i},depth:0,overrideAccess:a===null,publishSpecificLocale:l,user:a}),{output:{}}},inputSchema:[{name:"type",type:"radio",defaultValue:"publish",options:["publish","unpublish"]},{name:"locale",type:"text"},...t.length>0?[{name:"doc",type:"relationship",relationTo:t}]:[],{name:"global",type:"select",options:r},{name:"user",type:"relationship",relationTo:e}]});var ZG="payload-folders",XG="folder";var Mue={admin:{avatar:"gravatar",components:{},custom:{},dateFormat:"MMMM do yyyy, h:mm a",dependencies:{},importMap:{baseDir:`${typeof process?.cwd=="function"?process.cwd():""}`},meta:{defaultOGImageType:"dynamic",robots:"noindex, nofollow",titleSuffix:"- Payload"},routes:{account:"/account",browseByFolder:"/browse-by-folder",createFirstUser:"/create-first-user",forgot:"/forgot",inactivity:"/logout-inactivity",login:"/login",logout:"/logout",reset:"/reset",unauthorized:"/unauthorized"},theme:"all"},auth:{jwtOrder:["JWT","Bearer","cookie"]},bin:[],collections:[],cookiePrefix:"payload",cors:[],csrf:[],custom:{},defaultDepth:2,defaultMaxTextLength:4e4,endpoints:[],globals:[],graphQL:{disablePlaygroundInProduction:!0,maxComplexity:1e3,schemaOutputFile:`${typeof process?.cwd=="function"?process.cwd():""}/schema.graphql`},hooks:{},i18n:{},jobs:{access:{run:nt},deleteJobOnComplete:!0,depth:0},localization:!1,maxDepth:10,routes:{admin:"/admin",api:"/api",graphQL:"/graphql",graphQLPlayground:"/graphql-playground"},serverURL:"",telemetry:!0,typescript:{autoGenerate:!0,outputFile:`${typeof process?.cwd=="function"?process.cwd():""}/payload-types.ts`},upload:{}},ej=e=>(e.admin={avatar:"gravatar",components:{},custom:{},dateFormat:"MMMM do yyyy, h:mm a",dependencies:{},theme:"all",...e.admin||{},importMap:{baseDir:`${typeof process?.cwd=="function"?process.cwd():""}`,...e?.admin?.importMap||{}},meta:{defaultOGImageType:"dynamic",robots:"noindex, nofollow",titleSuffix:"- Payload",...e?.admin?.meta||{}},routes:{account:"/account",browseByFolder:"/browse-by-folder",createFirstUser:"/create-first-user",forgot:"/forgot",inactivity:"/logout-inactivity",login:"/login",logout:"/logout",reset:"/reset",unauthorized:"/unauthorized",...e?.admin?.routes||{}}},e.bin=e.bin??[],e.collections=e.collections??[],e.cookiePrefix=e.cookiePrefix??"payload",e.cors=e.cors??[],e.csrf=e.csrf??[],e.custom=e.custom??{},e.defaultDepth=e.defaultDepth??2,e.defaultMaxTextLength=e.defaultMaxTextLength??4e4,e.endpoints=e.endpoints??[],e.globals=e.globals??[],e.graphQL={disableIntrospectionInProduction:!0,disablePlaygroundInProduction:!0,maxComplexity:1e3,schemaOutputFile:`${typeof process?.cwd=="function"?process.cwd():""}/schema.graphql`,...e.graphQL||{}},e.hooks=e.hooks??{},e.i18n=e.i18n??{},e.jobs={deleteJobOnComplete:!0,depth:0,...e.jobs||{},access:{run:nt,...e.jobs?.access||{}}},e.localization=e.localization??!1,e.maxDepth=e.maxDepth??10,e.routes={admin:"/admin",api:(process.env.NEXT_BASE_PATH??"")+"/api",graphQL:"/graphql",graphQLPlayground:"/graphql-playground",...e.routes||{}},e.serverURL=e.serverURL??"",e.telemetry=e.telemetry??!0,e.typescript={autoGenerate:!0,outputFile:`${typeof process?.cwd=="function"?process.cwd():""}/payload-types.ts`,...e.typescript||{}},e.upload=e.upload??{},e.auth={jwtOrder:["JWT","Bearer","cookie"],...e.auth||{}},e.collections.some(r=>!!r.folders)?e.folders={slug:ZG,browseByFolder:!0,debug:!1,fieldName:XG,...e.folders||{}}:e.folders=!1,e);var oj="0123456789abcdefghijklmnopqrstuvwxyz";function ec(e,t,r){let o=r[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===o||t&&t.slice(-1)===o)throw new Error("trailing zero");if(t){let s=0;for(;(e[s]||o)===t[s];)s++;if(s>0)return t.slice(0,s)+ec(e.slice(s),t.slice(s),r)}let n=e?r.indexOf(e[0]):0,i=t!=null?r.indexOf(t[0]):r.length;if(i-n>1){let s=Math.round(.5*(n+i));return r[s]}else return t&&t.length>1?t.slice(0,1):r[n]+ec(e.slice(1),null,r)}function nj(e){if(e.length!==ij(e[0]))throw new Error("invalid integer part of order key: "+e)}function ij(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function qu(e){let t=ij(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function tj(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);let r=qu(e);if(e.slice(r.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function rj(e,t){nj(e);let[r,...o]=e.split(""),n=!0;for(let i=o.length-1;n&&i>=0;i--){let s=t.indexOf(o[i])+1;s===t.length?o[i]=t[0]:(o[i]=t[s],n=!1)}if(n){if(r==="Z")return"a"+t[0];if(r==="z")return null;let i=String.fromCharCode(r.charCodeAt(0)+1);return i>"a"?o.push(t[0]):o.pop(),i+o.join("")}else return r+o.join("")}function _ue(e,t){nj(e);let[r,...o]=e.split(""),n=!0;for(let i=o.length-1;n&&i>=0;i--){let s=t.indexOf(o[i])-1;s===-1?o[i]=t.slice(-1):(o[i]=t[s],n=!1)}if(n){if(r==="a")return"Z"+t.slice(-1);if(r==="A")return null;let i=String.fromCharCode(r.charCodeAt(0)-1);return i<"Z"?o.push(t.slice(-1)):o.pop(),i+o.join("")}else return r+o.join("")}function _i(e,t,r=oj){if(e!=null&&tj(e,r),t!=null&&tj(t,r),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+r[0];let l=qu(t),c=t.slice(l.length);if(l==="A"+r[0].repeat(26))return l+ec("",c,r);if(l<t)return l;let A=_ue(l,r);if(A==null)throw new Error("cannot decrement any more");return A}if(t==null){let l=qu(e),c=e.slice(l.length),A=rj(l,r);return A??l+ec(c,null,r)}let o=qu(e),n=e.slice(o.length),i=qu(t),s=t.slice(i.length);if(o===i)return o+ec(n,s,r);let a=rj(o,r);if(a==null)throw new Error("cannot increment any more");return a<t?a:o+ec(n,null,r)}function Yu(e,t,r,o=oj){if(r===0)return[];if(r===1)return[_i(e,t,o)];if(t==null){let s=_i(e,t,o),a=[s];for(let l=0;l<r-1;l++)s=_i(s,t,o),a.push(s);return a}if(e==null){let s=_i(e,t,o),a=[s];for(let l=0;l<r-1;l++)s=_i(e,s,o),a.push(s);return a.reverse(),a}let n=Math.floor(r/2),i=_i(e,t,o);return[...Yu(e,i,n,o),i,...Yu(i,t,r-n-1,o)]}var sj=e=>{let t=new Map;e.collections.forEach(r=>{if(r.orderable){let o=t.get(r)||[];t.set(r,[...o,"_order"]),r.defaultSort=r.defaultSort??"_order"}vr({callback:({field:o,parentRef:n,ref:i})=>{if(o.type==="array"||o.type==="blocks")return!1;if(o.type==="group"||o.type==="tab"){let s=n?.prefix?`${n.prefix}_`:"";i.prefix=`${s}${o.name}`}if(o.type==="join"&&o.orderable===!0){if(Array.isArray(o.collection))throw new F("Orderable joins must target a single collection",N.BAD_REQUEST,{},!0);let s=e.collections.find(c=>c.slug===o.collection);if(!s)return!1;o.defaultSort=o.defaultSort??`_${o.collection}_${o.name}_order`;let a=t.get(s)||[],l=n?.prefix?`${n.prefix}_`:"";t.set(s,[...a,`_${o.collection}_${l}${o.name}_order`])}},fields:r.fields})}),Array.from(t.entries()).forEach(([r,o])=>{Gue(r,o)}),t.size>0&&jue(e)},Gue=(e,t)=>{t.forEach(o=>{let n={name:o,type:"text",admin:{disableBulkEdit:!0,disabled:!0,disableListColumn:!0,disableListFilter:!0,hidden:!0,readOnly:!0},hooks:{beforeDuplicate:[({siblingData:i})=>{delete i[o]}]},index:!0};e.fields.unshift(n)}),e.hooks||(e.hooks={}),e.hooks.beforeChange||(e.hooks.beforeChange=[]);let r=async({data:o,originalDoc:n,req:i})=>{for(let s of t)if(!o[s]&&!n?.[s]){let l=(await i.payload.find({collection:e.slug,depth:0,limit:1,pagination:!1,req:i,select:{[s]:!0},sort:`-${s}`,where:{[s]:{exists:!0}}})).docs[0]?.[s]||null;o[s]=_i(l,null)}return o};e.hooks.beforeChange.push(r)},jue=e=>{let r={handler:async o=>{let n=await o.json?.(),{collectionSlug:i,docsToMove:s,newKeyWillBe:a,orderableFieldName:l,target:c}=n;if(!Array.isArray(s)||s.length===0)return new Response(JSON.stringify({error:"docsToMove must be a non-empty array"}),{headers:{"Content-Type":"application/json"},status:400});if(a!=="greater"&&a!=="less")return new Response(JSON.stringify({error:'newKeyWillBe must be "greater" or "less"'}),{headers:{"Content-Type":"application/json"},status:400});let A=e.collections.find(g=>g.slug===i);if(!A)return new Response(JSON.stringify({error:`Collection ${i} not found`}),{headers:{"Content-Type":"application/json"},status:400});if(typeof l!="string")return new Response(JSON.stringify({error:"orderableFieldName must be a string"}),{headers:{"Content-Type":"application/json"},status:400});if(A.access?.update&&await oe({id:s[0],data:{},req:o},A.access.update),!c.key){let{docs:g}=await o.payload.find({collection:A.slug,depth:0,limit:0,req:o,select:{[l]:!0},where:{[l]:{exists:!1}}});await de(o);try{for(let m of g)await o.payload.update({id:m.id,collection:A.slug,data:{},depth:0,req:o}),await pe(o)}catch(m){if(await H(o),m instanceof Error)throw new F(m.message,N.INTERNAL_SERVER_ERROR)}return new Response(JSON.stringify({message:"initial migration",success:!0}),{headers:{"Content-Type":"application/json"},status:200})}if(typeof c!="object"||typeof c.id>"u"||typeof c.key!="string")return new Response(JSON.stringify({error:"target must be an object with id"}),{headers:{"Content-Type":"application/json"},status:400});let d=c.id,f=c.key;f==="pending"&&(f=(await o.payload.findByID({id:d,collection:A.slug,depth:0,select:{[l]:!0}}))?.[l]||null);let p=(await o.payload.find({collection:A.slug,depth:0,limit:1,pagination:!1,select:{[l]:!0},sort:a==="greater"?l:`-${l}`,where:{[l]:{[a==="greater"?"greater_than":"less_than"]:f}}})).docs?.[0]?.[l]||null,h=a==="greater"?Yu(f,p,s.length):Yu(p,f,s.length);for(let[g,m]of s.entries())await o.payload.update({id:m,collection:A.slug,data:{[l]:h[g]},depth:0,req:o});return new Response(JSON.stringify({orderValues:h,success:!0}),{headers:{"Content-Type":"application/json"},status:200})},method:"post",path:"/reorder"};e.endpoints||(e.endpoints=[]),e.endpoints.push(r)};var que=e=>{let t={...e};if(e?.compatibility?.allowLocalizedWithinLocalized&&(process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized="true"),t.loggingLevels={Forbidden:"info",Locked:"info",MissingFile:"info",NotFound:"info",ValidationError:"info",...t.loggingLevels||{}},!t?.admin?.user){let n=t.collections.find(({auth:i})=>!!i);n?t.admin.user=n.slug:(t.admin.user=BQ.slug,t.collections.push(BQ))}let r=t.collections.find(({slug:n})=>n===t.admin.user);if(!r||!r.auth)throw new qt(`${t.admin.user} is not a valid admin user collection`);t?.admin?.timezones?(typeof t?.admin?.timezones?.supportedTimezones=="function"&&(t.admin.timezones.supportedTimezones=t.admin.timezones.supportedTimezones({defaultTimezones:Kl})),t?.admin?.timezones?.supportedTimezones||(t.admin.timezones.supportedTimezones=Kl)):t.admin.timezones={supportedTimezones:Kl};let o=Intl.supportedValuesOf("timeZone");return t.admin.timezones.supportedTimezones.forEach(n=>{if(!o.includes(n.value))throw new qt(`Timezone ${n.value} is not supported by the current runtime via the Intl API.`)}),t},Rg=async e=>{let t=ej(e),r=que(t);sj(r),r.endpoints||(r.endpoints=[]);for(let f of P2)r.endpoints.push(f);r.localization&&r.localization.locales?.length>0&&(typeof r.localization.locales[0]=="string"?(r.localization.localeCodes=[...r.localization.locales],r.localization.locales=r.localization.locales.map(u=>({code:u,label:u,rtl:!1,toString:()=>u}))):(r.localization.localeCodes=r.localization.locales.map(u=>u.code),r.localization.locales=r.localization.locales.map(u=>({...u,toString:()=>u.code}))),r.localization.fallback=r.localization?.fallback??!0);let o={fallbackLanguage:"en",supportedLanguages:{en:Hue},translations:{}};if(e?.i18n){o.supportedLanguages=e.i18n?.supportedLanguages||o.supportedLanguages;let f=Object.keys(o.supportedLanguages),u=e.i18n?.fallbackLanguage||o.fallbackLanguage;o.fallbackLanguage=f.includes(u)?u:f[0],o.translations=e.i18n?.translations||o.translations}r.i18n=o;let n=[],i=[],s=[],a=[],l=new Set;await vG(r);let c=[...r.collections?.map(f=>f.slug)??[],wt,no,oo];if(r.blocks=[],e.blocks?.length)for(let f of e.blocks){let u=f;if(u._sanitized===!0)continue;u._sanitized=!0,u.fields=u.fields.concat(Gu),u.labels=u.labels?u.labels:Mi(u.slug),u.fields=await cn({config:r,existingFieldNames:new Set,fields:u.fields,parentIsLocalized:!1,richTextSanitizationPromises:n,validRelationships:c});let p=bg({block:f});r.blocks.push(p)}for(let f=0;f<r.collections.length;f++){if(l.has(r.collections[f].slug))throw new ga("slug",r.collections[f].slug);l.add(r.collections[f].slug);let u=r.collections[f]?.versions?.drafts;typeof u=="object"&&u.schedulePublish&&i.push(r.collections[f].slug),r.collections[f].enableQueryPresets&&(s.push(r.collections[f].slug),c.includes(Jn)||c.push(Jn)),r.collections[f]=await sa(r,r.collections[f],n,c)}if(r.globals.length>0)for(let f=0;f<r.globals.length;f++){let u=r.globals[f]?.versions?.drafts;typeof u=="object"&&u.schedulePublish&&a.push(r.globals[f].slug),r.globals[f]=await HG(r,r.globals[f],n,c)}if((i.length||a.length)&&((r.jobs??={}).tasks??=[]).push(KG({adminUserSlug:r.admin.user,collections:i,globals:a})),(r.jobs??={}).enabled=!!(Array.isArray(t.jobs?.tasks)&&t.jobs?.tasks?.length||Array.isArray(t.jobs?.workflows)&&t.jobs?.workflows?.length),r.jobs.enabled){let f=EM(r);if(typeof r.jobs.jobsCollectionOverrides=="function"){f=r.jobs.jobsCollectionOverrides({defaultJobsCollection:f});let p=f?.hooks;if(p&&r?.jobs?.runHooks!==!0)for(let[h,g]of Object.entries(p)){let m=h==="afterRead"||h==="beforeChange"?1:0;if(g.length>m){console.warn(`The jobsCollectionOverrides function is returning a collection with an additional ${h} hook defined. These hooks will not run unless the jobs.runHooks option is set to true. Setting this option to true will negatively impact performance.`);break}}}let u=await sa(r,f,n,c);t.collections.push(u)}t.collections.push(await sa(r,dM(r),n,c)),t.collections.push(await sa(r,AM(r),n,c)),t.collections.push(await sa(r,JQ,n,c)),s.length>0&&t.collections.push(await sa(r,$G(r),n,c)),r.serverURL!==""&&r.csrf.push(r.serverURL);let A=new Set;for(let f of r.collections)f.upload?.adapter&&A.add(f.upload.adapter);r.upload||(r.upload={adapters:[]}),r.upload.adapters=Array.from(new Set(r.collections.map(f=>f.upload?.adapter).filter(Boolean))),e.email&&(r.email=e.email),typeof e.editor=="function"&&(r.editor=await e.editor({config:r,isRoot:!0,parentIsLocalized:!1}),r.editor.i18n&&Object.keys(r.editor.i18n).length>=0&&(r.i18n.translations=Vue(r.i18n.translations,r.editor.i18n)));let d=[];for(let f of n)d.push(f(r));return await Promise.all(d),r};async function Yue(e){if(Array.isArray(e.plugins)){let t=e;for(let r of e.plugins)t=await r(t);return await Rg(t)}return await Rg(e)}var Wue=["hooks","access","endpoints","custom","flattenedFields"],Jue=["hidden","components"],aj=({defaultIDType:e,global:t,i18n:r,importMap:o})=>{let n={};for(let i in t)if(!Wue.includes(i))switch(i){case"admin":if(!t.admin)break;n.admin={};for(let s in t.admin)if(!Jue.includes(s))switch(s){case"livePreview":if(!t.admin.livePreview)break;n.admin.livePreview={},t.admin.livePreview.breakpoints&&(n.admin.livePreview.breakpoints=t.admin.livePreview.breakpoints);break;case"preview":n.admin.preview=!0;break;default:n.admin[s]=t.admin[s]}break;case"fields":n.fields=Ui({defaultIDType:e,fields:t.fields,i18n:r,importMap:o});break;case"label":n.label=typeof t.label=="function"?t.label({i18n:r,t:r.t}):t.label;break;default:{n[i]=t[i];break}}return n},tb=({defaultIDType:e,globals:t,i18n:r,importMap:o})=>{let n=new Array(t.length);for(let i=0;i<t.length;i++){let s=t[i];n[i]=aj({defaultIDType:e,global:s,i18n:r,importMap:o})}return n};var zue=[],lj=["endpoints","db","editor","plugins","sharp","onInit","secret","hooks","bin","i18n","typescript","cors","csrf","email","custom","graphQL","jobs","logger","queryPresets"],$ue=({config:e,i18n:t,importMap:r})=>{let o={};for(let n in e)if(!lj.includes(n))switch(n){case"admin":o.admin={autoLogin:e.admin.autoLogin,avatar:e.admin.avatar,custom:e.admin.custom,dateFormat:e.admin.dateFormat,importMap:e.admin.importMap,meta:e.admin.meta,routes:e.admin.routes,theme:e.admin.theme,timezones:e.admin.timezones,user:e.admin.user},e.admin.livePreview&&(o.admin.livePreview={},e.admin.livePreview.breakpoints&&(o.admin.livePreview.breakpoints=e.admin.livePreview.breakpoints),e.admin.livePreview.collections&&(o.admin.livePreview.collections=e.admin.livePreview.collections),e.admin.livePreview.globals&&(o.admin.livePreview.globals=e.admin.livePreview.globals));break;case"blocks":{o.blocks=gg({blocks:e.blocks,defaultIDType:e.db.defaultIDType,i18n:t,importMap:r}).filter(i=>typeof i!="string");break}case"collections":o.collections=CQ({collections:e.collections,defaultIDType:e.db.defaultIDType,i18n:t,importMap:r});break;case"folders":e.folders&&(o.folders={slug:e.folders.slug,browseByFolder:e.folders.browseByFolder,debug:e.folders.debug,fieldName:e.folders.fieldName});break;case"globals":o.globals=tb({defaultIDType:e.db.defaultIDType,globals:e.globals,i18n:t,importMap:r});break;case"localization":if(typeof e.localization=="object"&&e.localization&&(o.localization={},e.localization.defaultLocale&&(o.localization.defaultLocale=e.localization.defaultLocale),e.localization.defaultLocalePublishOption&&(o.localization.defaultLocalePublishOption=e.localization.defaultLocalePublishOption),e.localization.fallback&&(o.localization.fallback=e.localization.fallback),e.localization.localeCodes&&(o.localization.localeCodes=e.localization.localeCodes),e.localization.locales)){o.localization.locales=[];for(let i of e.localization.locales)if(i){let s={};i.code&&(s.code=i.code),i.fallbackLocale&&(s.fallbackLocale=i.fallbackLocale),i.label&&(s.label=i.label),i.rtl&&(s.rtl=i.rtl),o.localization.locales.push(s)}}break;default:o[n]=e[n]}return o};var cj=async function({id:t,data:r,limit:o,req:n,returning:i,where:s}){let a=[],l=(t?[await this.findOne({collection:wt,req:n,where:{id:{equals:t}}})]:(await this.find({collection:wt,limit:o,pagination:!1,req:n,where:s})).docs).filter(Boolean);if(!l)return null;for(let c of l){let A={...c,...r},d=await this.updateOne({id:c.id,collection:wt,data:A,req:n,returning:i});a.push(d)}return a};import ob from"fs";var rb=`
import {
  MigrateUpArgs,
  MigrateDownArgs,
} from "@payloadcms/db-mongodb";

export async function up({ payload, req }: MigrateUpArgs): Promise<void> {
  // Migration code
};

export async function down({ payload, req }: MigrateDownArgs): Promise<void> {
  // Migration code
};
`;var nb=function({migrationName:t,payload:r}){let o=r.db.migrationDir;ob.existsSync(o)||ob.mkdirSync(o);let[n,i]=new Date().toISOString().split("T"),s=n.replace(/\D/g,""),a=i.split(".")[0].replace(/\D/g,""),l=`${s}_${a}`,c=t.replace(/\W/g,"_"),A=`${l}_${c}.ts`,d=`${o}/${A}`;ob.writeFileSync(d,rb),ib({migrationsDir:r.db.migrationDir}),r.logger.info({msg:`Migration created at ${d}`})};async function wo({payload:e}){let r=(await e.find({collection:"payload-migrations",limit:0,sort:["-batch","-name"],where:{batch:{not_equals:-1}}})).docs,o=Number(r?.[0]?.batch)||0;return{existingMigrations:r,latestBatch:o}}import Aj from"fs";import{pathToFileURL as Kue}from"node:url";import uj from"path";var So=async({payload})=>{if(!Aj.existsSync(payload.db.migrationDir))return payload.logger.error({msg:`No migration directory found at ${payload.db.migrationDir}`}),[];payload.logger.info({msg:`Reading migration files from ${payload.db.migrationDir}`});let files=Aj.readdirSync(payload.db.migrationDir).sort().filter(e=>(e.endsWith(".ts")||e.endsWith(".js"))&&e!=="index.js"&&e!=="index.ts").map(e=>uj.resolve(payload.db.migrationDir,e));return Promise.all(files.map(async filePath=>{let migration=typeof v=="function"?await eval(`require('${filePath.replaceAll("\\","/")}')`):await eval(`import('${Kue(filePath).href}')`);"default"in migration&&(migration=migration.default);let result={name:uj.basename(filePath).split(".")[0],down:migration.down,up:migration.up};return result}))};var sb=async function(t){let{payload:r}=this,o=t?.migrations||await So({payload:r}),{existingMigrations:n,latestBatch:i}=await wo({payload:r}),s=i+1;for(let a of o){if(n.find(d=>d.name===a.name))continue;let c=Date.now(),A=await W({},r);r.logger.info({msg:`Migrating: ${a.name}`});try{await de(A);let d=r.db.sessions?.[await A.transactionID];await a.up({payload:r,req:A,session:d}),r.logger.info({msg:`Migrated:  ${a.name} (${Date.now()-c}ms)`}),await r.create({collection:"payload-migrations",data:{name:a.name,batch:s},req:A}),await pe(A)}catch(d){throw await H(A),r.logger.error({err:d,msg:`Error running migration ${a.name}`}),d}}};async function ab(){let{payload:e}=this,t=await So({payload:e}),{existingMigrations:r,latestBatch:o}=await wo({payload:e});if(!r?.length){e.logger.info({msg:"No migrations to rollback."});return}e.logger.info({msg:`Rolling back batch ${o} consisting of ${r.length} migration(s).`});let n=r.filter(({batch:i})=>i===o);for(let i of n){let s=t.find(c=>c.name===i.name);if(!s)throw new Error(`Migration ${i.name} not found locally.`);let a=Date.now(),l=await W({},e);try{e.logger.info({msg:`Migrating down: ${s.name}`}),await de(l);let c=e.db.sessions?.[await l.transactionID];await s.down({payload:e,req:l,session:c}),e.logger.info({msg:`Migrated down:  ${s.name} (${Date.now()-a}ms)`}),await e.delete({id:i.id,collection:"payload-migrations",req:l}),await pe(l)}catch(c){await H(l),e.logger.error({err:c,msg:`Error running migration ${s.name}`}),process.exit(1)}}}async function lb(){let{payload:e}=this,t=await So({payload:e}),{existingMigrations:r}=await wo({payload:e}),o=await W({},e);if(r?.length){e.logger.info({msg:`Rolling back all ${r.length} migration(s).`}),r.reverse();for(let n of r)try{let i=t.find(l=>l.name===n.name);if(!i)throw new Error(`Migration ${n.name} not found locally.`);e.logger.info({msg:`Migrating down: ${n.name}`});let s=Date.now();await de(o);let a=e.db.sessions?.[await o.transactionID];await i.down({payload:e,req:o,session:a}),e.logger.info({msg:`Migrated down:  ${n.name} (${Date.now()-s}ms)`}),await e.delete({collection:"payload-migrations",req:o,where:{name:{equals:n.name}}})}catch(i){await H(o);let s=`Error running migration ${n.name}. Rolling back.`;i instanceof Error&&(s+=` ${i.message}`),e.logger.error({err:i,msg:s}),process.exit(1)}}else e.logger.info({msg:"No migrations to rollback."});for(let n of t){e.logger.info({msg:`Migrating: ${n.name}`});try{let i=Date.now();await de(o),await n.up({payload:e,req:o}),await e.create({collection:"payload-migrations",data:{name:n.name,executed:!0},req:o}),await pe(o),e.logger.info({msg:`Migrated:  ${n.name} (${Date.now()-i}ms)`})}catch(i){await H(o);let s=`Error running migration ${n.name}. Rolling back.`;i instanceof Error&&(s+=` ${i.message}`),e.logger.error({err:i,msg:s}),process.exit(1)}}}async function cb(){let{payload:e}=this,t=await So({payload:e}),{existingMigrations:r}=await wo({payload:e});if(!r?.length){e.logger.info({msg:"No migrations to reset."});return}let o=await W({},e);t.reverse();for(let n of t){let i=r.find(s=>s.name===n.name);if(i){e.logger.info({msg:`Migrating down: ${n.name}`});try{let s=Date.now();await de(o);let a=e.db.sessions?.[await o.transactionID];await n.down({payload:e,req:o,session:a}),await e.delete({collection:"payload-migrations",req:o,where:{id:{equals:i.id}}}),await pe(o),e.logger.info({msg:`Migrated down:  ${n.name} (${Date.now()-s}ms)`})}catch(s){throw await H(o),e.logger.error({err:s,msg:`Error running migration ${n.name}`}),s}}}try{await e.delete({collection:"payload-migrations",where:{batch:{equals:-1}}})}catch(n){e.logger.error({err:n,msg:"Error deleting dev migration"})}}var Dj=We(Rj(),1);async function Sb(){let{payload:e}=this,t=await So({payload:e});e.logger.debug({msg:`Found ${t.length} migration files.`});let{existingMigrations:r}=await wo({payload:e});if(!t.length){e.logger.info({msg:"No migrations found."});return}let o=t.map(i=>{let s=r.find(a=>a.name===i.name);return{Name:i.name,Batch:s?.batch,Ran:s?"Yes":"No"}}),n=new Dj.Table;o.forEach(i=>{n.addRow(i,{color:i.Ran==="Yes"?"green":"red"})}),n.printTable()}var Xde=()=>Promise.resolve(null),efe=()=>Promise.resolve(null),tfe=()=>Promise.resolve(null);function rfe(e){return{beginTransaction:Xde,commitTransaction:tfe,createMigration:nb,migrate:sb,migrateDown:ab,migrateFresh:()=>Promise.resolve(null),migrateRefresh:lb,migrateReset:cb,migrateStatus:Sb,rollbackTransaction:efe,updateJobs:cj,...e,migrationDir:e.migrationDir||"migrations"}}function ofe(){let e=Promise.resolve(null);return()=>e}function Fj(e){let t=[];for(let[r,o]of Object.entries(e))if((r==="and"||r==="or")&&Array.isArray(o))for(let n of o){let i=Fj(n);t.push(...i)}else t.push(o);return t}import kj from"fs";import nfe from"path";import{pathToFileURL as ife}from"url";var sfe=async({dirname,file,migrationName:migrationNameArg,payload})=>{let importPath=file??migrationNameArg;if(importPath?.startsWith("@payloadcms/db-")){let migrationName=importPath.split("/").slice(2).join("/"),cleanPath=nfe.join(dirname,`./predefinedMigrations/${migrationName}`);kj.existsSync(`${cleanPath}.mjs`)?cleanPath=`${cleanPath}.mjs`:kj.existsSync(`${cleanPath}.js`)?cleanPath=`${cleanPath}.js`:(payload.logger.error({msg:`Canned migration ${migrationName} not found.`}),process.exit(1)),cleanPath=cleanPath.replaceAll("\\","/");let moduleURL=ife(cleanPath);try{let{downSQL,imports,upSQL}=await eval(`import('${moduleURL.href}')`);return{downSQL,imports,upSQL}}catch(e){payload.logger.error({err:e,msg:`Error loading predefined migration ${migrationName}`}),process.exit(1)}}else if(importPath)try{let{downSQL,imports,upSQL}=await eval(`import('${importPath}')`);return{downSQL,imports,upSQL}}catch(e){if(importPath?.includes("/"))throw new Error(`Error importing migration file from ${importPath}`);return{}}return{}};import tH from"fs";import Ie from"node:path";import Uj from"node:fs";import gfe from"node:module";var Nj=e=>e!==null&&typeof e=="object",nc=(e,t)=>Object.assign(new Error(`[${e}]: ${t}`),{code:e}),vj="ERR_INVALID_PACKAGE_CONFIG",Tb="ERR_INVALID_PACKAGE_TARGET",afe="ERR_PACKAGE_PATH_NOT_EXPORTED";var lfe=/^\d+$/,cfe=/^(\.{1,2}|node_modules)$/i,Afe=/\/|\\/,Pj=(e=>(e.Export="exports",e.Import="imports",e))(Pj||{}),xb=(e,t,r,o,n)=>{if(t==null)return[];if(typeof t=="string"){let[i,...s]=t.split(Afe);if(i===".."||s.some(a=>cfe.test(a)))throw nc(Tb,`Invalid "${e}" target "${t}" defined in the package config`);return[n?t.replace(/\*/g,n):t]}if(Array.isArray(t))return t.flatMap(i=>xb(e,i,r,o,n));if(Nj(t)){for(let i of Object.keys(t)){if(lfe.test(i))throw nc(vj,"Cannot contain numeric property keys");if(i==="default"||o.includes(i))return xb(e,t[i],r,o,n)}return[]}throw nc(Tb,`Invalid "${e}" target "${t}"`)},Zu="*",ufe=(e,t)=>{let r=e.indexOf(Zu),o=t.indexOf(Zu);return r===o?t.length>e.length:o>r};function dfe(e,t){if(!t.includes(Zu)&&e.hasOwnProperty(t))return[t];let r,o;for(let n of Object.keys(e))if(n.includes(Zu)){let[i,s,a]=n.split(Zu);if(a===void 0&&t.startsWith(i)&&t.endsWith(s)){let l=t.slice(i.length,-s.length||void 0);l&&(!r||ufe(r,n))&&(r=n,o=l)}}return[r,o]}var ffe=e=>Object.keys(e).reduce((t,r)=>{let o=r===""||r[0]!==".";if(t===void 0||t===o)return o;throw nc(vj,'"exports" cannot contain some keys starting with "." and some not')},void 0),pfe=/^\w+:/,Lj=(e,t,r)=>{if(!e)throw new Error('"exports" is required');t=t===""?".":`./${t}`,(typeof e=="string"||Array.isArray(e)||Nj(e)&&ffe(e))&&(e={".":e});let[o,n]=dfe(e,t),i=xb(Pj.Export,e[o],t,r,n);if(i.length===0)throw nc(afe,t==="."?'No "exports" main defined':`Package subpath '${t}' is not defined by "exports"`);for(let s of i)if(!s.startsWith("./")&&!pfe.test(s))throw nc(Tb,`Invalid "exports" target "${s}" defined in the package config`);return i};import mfe from"fs";var hfe=Object.defineProperty,q=(e,t)=>hfe(e,"name",{value:t,configurable:!0});function yr(e){return e.startsWith("\\\\?\\")?e:e.replace(/\\/g,"/")}q(yr,"slash");var Ob=q(e=>{let t=Uj[e];return(r,...o)=>{let n=`${e}:${o.join(":")}`,i=r?.get(n);return i===void 0&&(i=Reflect.apply(t,Uj,o),r?.set(n,i)),i}},"cacheFs"),xo=Ob("existsSync"),yfe=Ob("readFileSync"),Ng=Ob("statSync"),Wj=q((e,t,r)=>{for(;;){let o=Ie.posix.join(e,t);if(xo(r,o))return o;let n=Ie.dirname(e);if(n===e)return;e=n}},"findUp"),Mb=/^\.{1,2}(\/.*)?$/,Pb=q(e=>{let t=yr(e);return Mb.test(t)?t:`./${t}`},"normalizeRelativePath");function Jj(e,t=!1){let r=e.length,o=0,n="",i=0,s=16,a=0,l=0,c=0,A=0,d=0;function f(E,I){let C=0,B=0;for(;C<E||!I;){let R=e.charCodeAt(o);if(R>=48&&R<=57)B=B*16+R-48;else if(R>=65&&R<=70)B=B*16+R-65+10;else if(R>=97&&R<=102)B=B*16+R-97+10;else break;o++,C++}return C<E&&(B=-1),B}q(f,"scanHexDigits");function u(E){o=E,n="",i=0,s=16,d=0}q(u,"setPosition");function p(){let E=o;if(e.charCodeAt(o)===48)o++;else for(o++;o<e.length&&la(e.charCodeAt(o));)o++;if(o<e.length&&e.charCodeAt(o)===46)if(o++,o<e.length&&la(e.charCodeAt(o)))for(o++;o<e.length&&la(e.charCodeAt(o));)o++;else return d=3,e.substring(E,o);let I=o;if(o<e.length&&(e.charCodeAt(o)===69||e.charCodeAt(o)===101))if(o++,(o<e.length&&e.charCodeAt(o)===43||e.charCodeAt(o)===45)&&o++,o<e.length&&la(e.charCodeAt(o))){for(o++;o<e.length&&la(e.charCodeAt(o));)o++;I=o}else d=3;return e.substring(E,I)}q(p,"scanNumber");function h(){let E="",I=o;for(;;){if(o>=r){E+=e.substring(I,o),d=2;break}let C=e.charCodeAt(o);if(C===34){E+=e.substring(I,o),o++;break}if(C===92){if(E+=e.substring(I,o),o++,o>=r){d=2;break}switch(e.charCodeAt(o++)){case 34:E+='"';break;case 92:E+="\\";break;case 47:E+="/";break;case 98:E+="\b";break;case 102:E+="\f";break;case 110:E+=`
`;break;case 114:E+="\r";break;case 116:E+="	";break;case 117:let B=f(4,!0);B>=0?E+=String.fromCharCode(B):d=4;break;default:d=5}I=o;continue}if(C>=0&&C<=31)if(sc(C)){E+=e.substring(I,o),d=2;break}else d=6;o++}return E}q(h,"scanString");function g(){if(n="",d=0,i=o,l=a,A=c,o>=r)return i=r,s=17;let E=e.charCodeAt(o);if(Ug(E)){do o++,n+=String.fromCharCode(E),E=e.charCodeAt(o);while(Ug(E));return s=15}if(sc(E))return o++,n+=String.fromCharCode(E),E===13&&e.charCodeAt(o)===10&&(o++,n+=`
`),a++,c=o,s=14;switch(E){case 123:return o++,s=1;case 125:return o++,s=2;case 91:return o++,s=3;case 93:return o++,s=4;case 58:return o++,s=6;case 44:return o++,s=5;case 34:return o++,n=h(),s=10;case 47:let I=o-1;if(e.charCodeAt(o+1)===47){for(o+=2;o<r&&!sc(e.charCodeAt(o));)o++;return n=e.substring(I,o),s=12}if(e.charCodeAt(o+1)===42){o+=2;let C=r-1,B=!1;for(;o<C;){let R=e.charCodeAt(o);if(R===42&&e.charCodeAt(o+1)===47){o+=2,B=!0;break}o++,sc(R)&&(R===13&&e.charCodeAt(o)===10&&o++,a++,c=o)}return B||(o++,d=1),n=e.substring(I,o),s=13}return n+=String.fromCharCode(E),o++,s=16;case 45:if(n+=String.fromCharCode(E),o++,o===r||!la(e.charCodeAt(o)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return n+=p(),s=11;default:for(;o<r&&m(E);)o++,E=e.charCodeAt(o);if(i!==o){switch(n=e.substring(i,o),n){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return n+=String.fromCharCode(E),o++,s=16}}q(g,"scanNext");function m(E){if(Ug(E)||sc(E))return!1;switch(E){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}q(m,"isUnknownContentCharacter");function y(){let E;do E=g();while(E>=12&&E<=15);return E}return q(y,"scanNextNonTrivia"),{setPosition:u,getPosition:q(()=>o,"getPosition"),scan:t?y:g,getToken:q(()=>s,"getToken"),getTokenValue:q(()=>n,"getTokenValue"),getTokenOffset:q(()=>i,"getTokenOffset"),getTokenLength:q(()=>o-i,"getTokenLength"),getTokenStartLine:q(()=>l,"getTokenStartLine"),getTokenStartCharacter:q(()=>i-A,"getTokenStartCharacter"),getTokenError:q(()=>d,"getTokenError")}}q(Jj,"createScanner");function Ug(e){return e===32||e===9}q(Ug,"isWhiteSpace");function sc(e){return e===10||e===13}q(sc,"isLineBreak");function la(e){return e>=48&&e<=57}q(la,"isDigit");var Oj;(function(e){e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.space=32]="space",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.asterisk=42]="asterisk",e[e.backslash=92]="backslash",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.plus=43]="plus",e[e.slash=47]="slash",e[e.formFeed=12]="formFeed",e[e.tab=9]="tab"})(Oj||(Oj={})),new Array(20).fill(0).map((e,t)=>" ".repeat(t));var ic=200;new Array(ic).fill(0).map((e,t)=>`
`+" ".repeat(t)),new Array(ic).fill(0).map((e,t)=>"\r"+" ".repeat(t)),new Array(ic).fill(0).map((e,t)=>`\r
`+" ".repeat(t)),new Array(ic).fill(0).map((e,t)=>`
`+"	".repeat(t)),new Array(ic).fill(0).map((e,t)=>"\r"+"	".repeat(t)),new Array(ic).fill(0).map((e,t)=>`\r
`+"	".repeat(t));var Og;(function(e){e.DEFAULT={allowTrailingComma:!1}})(Og||(Og={}));function zj(e,t=[],r=Og.DEFAULT){let o=null,n=[],i=[];function s(a){Array.isArray(n)?n.push(a):o!==null&&(n[o]=a)}return q(s,"onValue"),$j(e,{onObjectBegin:q(()=>{let a={};s(a),i.push(n),n=a,o=null},"onObjectBegin"),onObjectProperty:q(a=>{o=a},"onObjectProperty"),onObjectEnd:q(()=>{n=i.pop()},"onObjectEnd"),onArrayBegin:q(()=>{let a=[];s(a),i.push(n),n=a,o=null},"onArrayBegin"),onArrayEnd:q(()=>{n=i.pop()},"onArrayEnd"),onLiteralValue:s,onError:q((a,l,c)=>{t.push({error:a,offset:l,length:c})},"onError")},r),n[0]}q(zj,"parse$1");function $j(e,t,r=Og.DEFAULT){let o=Jj(e,!1),n=[];function i(D){return D?()=>D(o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter()):()=>!0}q(i,"toNoArgVisit");function s(D){return D?()=>D(o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter(),()=>n.slice()):()=>!0}q(s,"toNoArgVisitWithPath");function a(D){return D?k=>D(k,o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter()):()=>!0}q(a,"toOneArgVisit");function l(D){return D?k=>D(k,o.getTokenOffset(),o.getTokenLength(),o.getTokenStartLine(),o.getTokenStartCharacter(),()=>n.slice()):()=>!0}q(l,"toOneArgVisitWithPath");let c=s(t.onObjectBegin),A=l(t.onObjectProperty),d=i(t.onObjectEnd),f=s(t.onArrayBegin),u=i(t.onArrayEnd),p=l(t.onLiteralValue),h=a(t.onSeparator),g=i(t.onComment),m=a(t.onError),y=r&&r.disallowComments,E=r&&r.allowTrailingComma;function I(){for(;;){let D=o.scan();switch(o.getTokenError()){case 4:C(14);break;case 5:C(15);break;case 3:C(13);break;case 1:y||C(11);break;case 2:C(12);break;case 6:C(16);break}switch(D){case 12:case 13:y?C(10):g();break;case 16:C(1);break;case 15:case 14:break;default:return D}}}q(I,"scanNext");function C(D,k=[],P=[]){if(m(D),k.length+P.length>0){let U=o.getToken();for(;U!==17;){if(k.indexOf(U)!==-1){I();break}else if(P.indexOf(U)!==-1)break;U=I()}}}q(C,"handleError");function B(D){let k=o.getTokenValue();return D?p(k):(A(k),n.push(k)),I(),!0}q(B,"parseString");function R(){switch(o.getToken()){case 11:let D=o.getTokenValue(),k=Number(D);isNaN(k)&&(C(2),k=0),p(k);break;case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return I(),!0}q(R,"parseLiteral");function x(){return o.getToken()!==10?(C(3,[],[2,5]),!1):(B(!1),o.getToken()===6?(h(":"),I(),T()||C(4,[],[2,5])):C(5,[],[2,5]),n.pop(),!0)}q(x,"parseProperty");function S(){c(),I();let D=!1;for(;o.getToken()!==2&&o.getToken()!==17;){if(o.getToken()===5){if(D||C(4,[],[]),h(","),I(),o.getToken()===2&&E)break}else D&&C(6,[],[]);x()||C(4,[],[2,5]),D=!0}return d(),o.getToken()!==2?C(7,[2],[]):I(),!0}q(S,"parseObject");function Q(){f(),I();let D=!0,k=!1;for(;o.getToken()!==4&&o.getToken()!==17;){if(o.getToken()===5){if(k||C(4,[],[]),h(","),I(),o.getToken()===4&&E)break}else k&&C(6,[],[]);D?(n.push(0),D=!1):n[n.length-1]++,T()||C(4,[],[4,5]),k=!0}return u(),D||n.pop(),o.getToken()!==4?C(8,[4],[]):I(),!0}q(Q,"parseArray");function T(){switch(o.getToken()){case 3:return Q();case 1:return S();case 10:return B(!0);default:return R()}}return q(T,"parseValue"),I(),o.getToken()===17?r.allowEmptyContent?!0:(C(4,[],[]),!1):T()?(o.getToken()!==17&&C(9,[],[]),!0):(C(4,[],[]),!1)}q($j,"visit");var Mj;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(Mj||(Mj={}));var _j;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(_j||(_j={}));var Efe=zj,Gj;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(Gj||(Gj={}));var Kj=q((e,t)=>Efe(yfe(t,e,"utf8")),"readJsonc"),Lb=Symbol("implicitBaseUrl"),Hi="${configDir}",Cfe=q(()=>{let{findPnpApi:e}=gfe;return e&&e(process.cwd())},"getPnpApi"),Rb=q((e,t,r,o)=>{let n=`resolveFromPackageJsonPath:${e}:${t}:${r}`;if(o!=null&&o.has(n))return o.get(n);let i=Kj(e,o);if(!i)return;let s=t||"tsconfig.json";if(!r&&i.exports)try{let[a]=Lj(i.exports,t,["require","types"]);s=a}catch{return!1}else!t&&i.tsconfig&&(s=i.tsconfig);return s=Ie.join(e,"..",s),o?.set(n,s),s},"resolveFromPackageJsonPath"),Db="package.json",Fb="tsconfig.json",Ife=q((e,t,r)=>{let o=e;if(e===".."&&(o=Ie.join(o,Fb)),e[0]==="."&&(o=Ie.resolve(t,o)),Ie.isAbsolute(o)){if(xo(r,o)){if(Ng(r,o).isFile())return o}else if(!o.endsWith(".json")){let u=`${o}.json`;if(xo(r,u))return u}return}let[n,...i]=e.split("/"),s=n[0]==="@"?`${n}/${i.shift()}`:n,a=i.join("/"),l=Cfe();if(l){let{resolveRequest:u}=l;try{if(s===e){let p=u(Ie.join(s,Db),t);if(p){let h=Rb(p,a,!1,r);if(h&&xo(r,h))return h}}else{let p;try{p=u(e,t,{extensions:[".json"]})}catch{p=u(Ie.join(e,Fb),t)}if(p)return p}}catch{}}let c=Wj(Ie.resolve(t),Ie.join("node_modules",s),r);if(!c||!Ng(r,c).isDirectory())return;let A=Ie.join(c,Db);if(xo(r,A)){let u=Rb(A,a,!1,r);if(u===!1)return;if(u&&xo(r,u)&&Ng(r,u).isFile())return u}let d=Ie.join(c,a),f=d.endsWith(".json");if(!f){let u=`${d}.json`;if(xo(r,u))return u}if(xo(r,d)){if(Ng(r,d).isDirectory()){let u=Ie.join(d,Db);if(xo(r,u)){let h=Rb(u,"",!0,r);if(h&&xo(r,h))return h}let p=Ie.join(d,Fb);if(xo(r,p))return p}else if(f)return d}},"resolveExtendsPath"),Ub=q((e,t)=>Pb(Ie.relative(e,t)),"pathRelative"),Zj=["files","include","exclude"],Bfe=q((e,t,r,o)=>{let n=Ife(e,t,o);if(!n)throw new Error(`File '${e}' not found.`);if(r.has(n))throw new Error(`Circularity detected while resolving configuration: ${n}`);r.add(n);let i=Ie.dirname(n),s=Xj(n,o,r);delete s.references;let{compilerOptions:a}=s;if(a){let{baseUrl:l}=a;l&&!l.startsWith(Hi)&&(a.baseUrl=yr(Ie.relative(t,Ie.join(i,l)))||"./");let{outDir:c}=a;c&&(c.startsWith(Hi)||(c=Ie.relative(t,Ie.join(i,c))),a.outDir=yr(c)||"./")}for(let l of Zj){let c=s[l];c&&(s[l]=c.map(A=>A.startsWith(Hi)?A:yr(Ie.relative(t,Ie.join(i,A)))))}return s},"resolveExtends"),Qfe=["outDir","declarationDir"],Xj=q((e,t,r=new Set)=>{let o;try{o=Kj(e,t)||{}}catch{throw new Error(`Cannot resolve tsconfig at path: ${e}`)}if(typeof o!="object")throw new SyntaxError(`Failed to parse tsconfig at: ${e}`);let n=Ie.dirname(e);if(o.compilerOptions){let{compilerOptions:i}=o;i.paths&&!i.baseUrl&&(i[Lb]=n)}if(o.extends){let i=Array.isArray(o.extends)?o.extends:[o.extends];delete o.extends;for(let s of i.reverse()){let a=Bfe(s,n,new Set(r),t),l={...a,...o,compilerOptions:{...a.compilerOptions,...o.compilerOptions}};a.watchOptions&&(l.watchOptions={...a.watchOptions,...o.watchOptions}),o=l}}if(o.compilerOptions){let{compilerOptions:i}=o,s=["baseUrl","rootDir"];for(let a of s){let l=i[a];if(l&&!l.startsWith(Hi)){let c=Ie.resolve(n,l),A=Ub(n,c);i[a]=A}}for(let a of Qfe){let l=i[a];l&&(Array.isArray(o.exclude)||(o.exclude=[]),o.exclude.includes(l)||o.exclude.push(l),l.startsWith(Hi)||(l=Pb(l)),i[a]=l)}}else o.compilerOptions={};if(o.include?(o.include=o.include.map(yr),o.files&&delete o.files):o.files&&(o.files=o.files.map(i=>i.startsWith(Hi)?i:Pb(i))),o.watchOptions){let{watchOptions:i}=o;i.excludeDirectories&&(i.excludeDirectories=i.excludeDirectories.map(s=>yr(Ie.resolve(n,s))))}return o},"_parseTsconfig"),vg=q((e,t)=>{if(e.startsWith(Hi))return yr(Ie.join(t,e.slice(Hi.length)))},"interpolateConfigDir"),bfe=["outDir","declarationDir","outFile","rootDir","baseUrl","tsBuildInfoFile"],wfe=q((e,t=new Map)=>{let r=Ie.resolve(e),o=Xj(r,t),n=Ie.dirname(r),{compilerOptions:i}=o;if(i){for(let a of bfe){let l=i[a];if(l){let c=vg(l,n);i[a]=c?Ub(n,c):l}}for(let a of["rootDirs","typeRoots"]){let l=i[a];l&&(i[a]=l.map(c=>{let A=vg(c,n);return A?Ub(n,A):c}))}let{paths:s}=i;if(s)for(let a of Object.keys(s))s[a]=s[a].map(l=>{var c;return(c=vg(l,n))!=null?c:l})}for(let s of Zj){let a=o[s];a&&(o[s]=a.map(l=>{var c;return(c=vg(l,n))!=null?c:l}))}return o},"parseTsconfig"),eH=q((e=process.cwd(),t="tsconfig.json",r=new Map)=>{let o=Wj(yr(e),t,r);if(!o)return null;let n=wfe(o,r);return{path:o,config:n}},"getTsconfig"),Sfe=/\*/g,jj=q((e,t)=>{let r=e.match(Sfe);if(r&&r.length>1)throw new Error(t)},"assertStarCount"),Tfe=q(e=>{if(e.includes("*")){let[t,r]=e.split("*");return{prefix:t,suffix:r}}return e},"parsePattern"),xfe=q(({prefix:e,suffix:t},r)=>r.startsWith(e)&&r.endsWith(t),"isPatternMatch"),Rfe=q((e,t,r)=>Object.entries(e).map(([o,n])=>(jj(o,`Pattern '${o}' can have at most one '*' character.`),{pattern:Tfe(o),substitutions:n.map(i=>{if(jj(i,`Substitution '${i}' in pattern '${o}' can have at most one '*' character.`),!t&&!Mb.test(i))throw new Error("Non-relative paths are not allowed when 'baseUrl' is not set. Did you forget a leading './'?");return Ie.resolve(r,i)})})),"parsePaths"),ZJe=q(e=>{let{compilerOptions:t}=e.config;if(!t)return null;let{baseUrl:r,paths:o}=t;if(!r&&!o)return null;let n=Lb in t&&t[Lb],i=Ie.resolve(Ie.dirname(e.path),r||n||"."),s=o?Rfe(o,r,i):[];return a=>{if(Mb.test(a))return[];let l=[];for(let f of s){if(f.pattern===a)return f.substitutions.map(yr);typeof f.pattern!="string"&&l.push(f)}let c,A=-1;for(let f of l)xfe(f.pattern,a)&&f.pattern.prefix.length>A&&(A=f.pattern.prefix.length,c=f);if(!c)return r?[yr(Ie.join(i,a))]:[];let d=a.slice(c.pattern.prefix.length,a.length-c.pattern.suffix.length);return c.substitutions.map(f=>yr(f.replace("*",d)))}},"createPathsMatcher"),Hj=q(e=>{let t="";for(let r=0;r<e.length;r+=1){let o=e[r],n=o.toUpperCase();t+=o===n?o.toLowerCase():n}return t},"s"),Dfe=65,Ffe=97,kfe=q(()=>Math.floor(Math.random()*26),"m"),Nfe=q(e=>Array.from({length:e},()=>String.fromCodePoint(kfe()+(Math.random()>.5?Dfe:Ffe))).join(""),"S"),vfe=q((e=mfe)=>{let t=process.execPath;if(e.existsSync(t))return!e.existsSync(Hj(t));let r=`/${Nfe(10)}`;e.writeFileSync(r,"");let o=!e.existsSync(Hj(r));return e.unlinkSync(r),o},"l"),{join:Pg}=Ie.posix,kb={ts:[".ts",".tsx",".d.ts"],cts:[".cts",".d.cts"],mts:[".mts",".d.mts"]},Pfe=q(e=>{let t=[...kb.ts],r=[...kb.cts],o=[...kb.mts];return e!=null&&e.allowJs&&(t.push(".js",".jsx"),r.push(".cjs"),o.push(".mjs")),[...t,...r,...o]},"getSupportedExtensions"),Lfe=q(e=>{let t=[];if(!e)return t;let{outDir:r,declarationDir:o}=e;return r&&t.push(r),o&&t.push(o),t},"getDefaultExcludeSpec"),Vj=q(e=>e.replaceAll(/[.*+?^${}()|[\]\\]/g,String.raw`\$&`),"escapeForRegexp"),Ufe=["node_modules","bower_components","jspm_packages"],Nb=`(?!(${Ufe.join("|")})(/|$))`,Ofe=/(?:^|\/)[^.*?]+$/,qj="**/*",Lg="[^/]",vb="[^./]",Yj=process.platform==="win32",XJe=q(({config:e,path:t},r=vfe())=>{if("extends"in e)throw new Error("tsconfig#extends must be resolved. Use getTsconfig or parseTsconfig to resolve it.");if(!Ie.isAbsolute(t))throw new Error("The tsconfig path must be absolute");Yj&&(t=yr(t));let o=Ie.dirname(t),{files:n,include:i,exclude:s,compilerOptions:a}=e,l=n?.map(p=>Pg(o,p)),c=Pfe(a),A=r?"":"i",d=(s||Lfe(a)).map(p=>{let h=Pg(o,p),g=Vj(h).replaceAll(String.raw`\*\*/`,"(.+/)?").replaceAll(String.raw`\*`,`${Lg}*`).replaceAll(String.raw`\?`,Lg);return new RegExp(`^${g}($|/)`,A)}),f=n||i?i:[qj],u=f?f.map(p=>{let h=Pg(o,p);Ofe.test(h)&&(h=Pg(h,qj));let g=Vj(h).replaceAll(String.raw`/\*\*`,`(/${Nb}${vb}${Lg}*)*?`).replaceAll(/(\/)?\\\*/g,(m,y)=>{let E=`(${vb}|(\\.(?!min\\.js$))?)*`;return y?`/${Nb}${vb}${E}`:E}).replaceAll(/(\/)?\\\?/g,(m,y)=>{let E=Lg;return y?`/${Nb}${E}`:E});return new RegExp(`^${g}$`,A)}):void 0;return p=>{if(!Ie.isAbsolute(p))throw new Error("filePath must be absolute");if(Yj&&(p=yr(p)),l!=null&&l.includes(p)||!(!c.some(h=>p.endsWith(h))||d.some(h=>h.test(p)))&&u&&u.some(h=>h.test(p)))return e}},"createFilesMatcher");import Mfe from"path";var _fe=e=>tH.readdirSync(e).filter(t=>(t.endsWith(".ts")||t.endsWith(".js"))&&t!=="index.ts"&&t!=="index.js").sort(),Gfe=e=>{let r=eH()?.config?.compilerOptions?.moduleResolution==="NodeNext"?".js":"",o="",n=`export const migrations = [
`;return e.forEach((i,s)=>{let a=i.replace(/\.[^/.]+$/,"");o+=`import * as migration_${a} from './${a}${r}';
`,n+=`  {
    up: migration_${a}.up,
    down: migration_${a}.down,
    name: '${a}'${s!==e.length-1?",":""}
  },
`}),n+=`];
`,o+`
`+n},ib=e=>{let t=_fe(e.migrationsDir),r=Gfe(t);tH.writeFileSync(Mfe.join(e.migrationsDir,"index.ts"),r)};var jfe=["text","textarea","code","json","number","email","radio","select","date"];var sH=We(jQ(),1);function rH(e,t,r,o,n){let i={tasks:{},workflows:{}},s=new Map;if(t?.tasks?.length){for(let a of t.tasks){let l={type:"object",additionalProperties:!1,properties:{input:{},output:{}},required:[]};if(a?.inputSchema?.length){let A=Ro(o,Nt({fields:a.inputSchema}),r,e,n),d={type:"object",additionalProperties:!1,properties:A.properties,required:A.required};l.properties.input=d,l.required.push("input")}if(a?.outputSchema?.length){let A=Ro(o,Nt({fields:a.outputSchema}),r,e,n),d={type:"object",additionalProperties:!1,properties:A.properties,required:A.required};l.properties.output=d,l.required.push("output")}let c=a.slug[0].toUpperCase()+a.slug.slice(1);s.set(a.interfaceName??`Task${c}`,l)}i.tasks={type:"object",additionalProperties:!1,properties:{...Object.fromEntries((t.tasks??[]).map(a=>{let l=a.slug[0].toUpperCase()+a.slug.slice(1),c={$ref:a.interfaceName?`#/definitions/${a.interfaceName}`:`#/definitions/Task${l}`};return[a.slug,c]})),inline:{type:"object",additionalProperties:!1,properties:{input:{},output:{}},required:["input","output"]}},required:[...(t.tasks??[]).map(a=>a.slug),"inline"]}}if(t?.workflows?.length)for(let a of t.workflows){let l={type:"object",additionalProperties:!1,properties:{input:{}},required:[]};if(a?.inputSchema?.length){let A=Ro(o,Nt({fields:a.inputSchema}),r,e,n),d={type:"object",additionalProperties:!1,properties:A.properties,required:A.required};l.properties.input=d,l.required.push("input")}let c=a.slug[0].toUpperCase()+a.slug.slice(1);s.set(a.interfaceName??`Workflow${c}`,l),i.workflows={type:"object",additionalProperties:!1,properties:Object.fromEntries(t.workflows.map(A=>{let d=A.slug[0].toUpperCase()+A.slug.slice(1),f={$ref:A.interfaceName?`#/definitions/${A.interfaceName}`:`#/definitions/Workflow${d}`};return[A.slug,f]})),required:t.workflows.map(A=>A.slug)}}return{definitions:s,properties:i}}function Mg({config:e,defaultIDType:t}){return e.collections.reduce((r,o)=>{let n=o.fields.find(i=>"name"in i&&i.name==="id");return r[o.slug]=t==="text"?"string":"number",n&&(r[o.slug]=n.type==="number"?"number":"string"),r},{})}var{singular:aH}=sH.default,lH=e=>{if(!!(e?.admin&&e?.admin?.condition))return!1;let r="required"in e&&e.required===!0;return J(e)&&r?!0:"fields"in e&&e.type!=="array"?e.flattenedFields.some(o=>lH(o)):!1};function oH(e){return e.map(t=>typeof t=="object"&&"value"in t?t.value:t)}function nH(e){let t=[...e].reduce((r,{slug:o})=>(r[o]={$ref:`#/definitions/${o}`},r),{});return{type:"object",additionalProperties:!1,properties:t,required:Object.keys(t)}}function iH(e){let t=[...e].reduce((r,{slug:o})=>(r[o]={$ref:`#/definitions/${o}_select`},r),{});return{type:"object",additionalProperties:!1,properties:t,required:Object.keys(t)}}function Hfe(e){let t=[...e].reduce((r,{slug:o,joins:n,polymorphicJoins:i})=>{let s={type:"object",additionalProperties:!1,properties:{},required:[]};for(let a in n)for(let l of n[a])s.properties[l.joinPath]={type:"string",enum:[a]},s.required.push(l.joinPath);for(let a of i)s.properties[a.joinPath]={type:"string",enum:a.field.collection},s.required.push(a.joinPath);return Object.keys(s.properties).length>0&&(r[o]=s),r},{});return{type:"object",additionalProperties:!1,properties:t,required:Object.keys(t)}}function Vfe(e){return e&&"locales"in e&&e?.locales?{type:"string",enum:[...e?.locales].map(o=>o.code,[])}:{type:"null"}}function qfe(e){return{oneOf:[...e].filter(({auth:r})=>!!r).map(({slug:r})=>({allOf:[{$ref:`#/definitions/${r}`},{type:"object",additionalProperties:!1,properties:{collection:{type:"string",enum:[r]}},required:["collection"]}]}),{})}}function Yfe(e){return{type:"object",additionalProperties:!1,properties:{defaultIDType:e.db?.defaultIDType==="number"?{type:"number"}:{type:"string"}},required:["defaultIDType"]}}function St(e,t){let r=[e];return t?e:(r.push("null"),r)}function cH({entity:e,i18n:t}){let r;return e?.admin?.description&&(typeof e?.admin?.description=="string"?r=e?.admin?.description:typeof e?.admin?.description=="object"?e?.admin?.description?.en?r=e?.admin?.description?.en:e?.admin?.description?.[t.language]&&(r=e?.admin?.description?.[t.language]):e?.admin?.description),r}function Ro(e,t,r,o,n){let i=new Set;return{properties:Object.fromEntries(t.reduce((s,a,l)=>{let c=J(a)&&lH(a),A=cH({entity:a,i18n:n}),d={};A&&(d.description=A);let f;switch(a.type){case"array":{f={...d,type:St("array",c),items:{type:"object",additionalProperties:!1,...Ro(e,a.flattenedFields,r,o,n)}},a.interfaceName&&(r.set(a.interfaceName,f),f={$ref:`#/definitions/${a.interfaceName}`});break}case"blocks":{let u=!!(a.blockReferences?a.blockReferences.length:a.blocks.length);f={...d,type:St("array",c),items:u?{oneOf:(a.blockReferences??a.blocks).map(p=>{if(typeof p=="string"){let m=o?.blocks?.find(y=>y.slug===p);return{$ref:`#/definitions/${m.interfaceName??m.slug}`}}let h=Ro(e,p.flattenedFields,r,o,n),g={type:"object",additionalProperties:!1,properties:{...h.properties,blockType:{const:p.slug}},required:["blockType",...h.required]};return p.interfaceName?(r.set(p.interfaceName,g),{$ref:`#/definitions/${p.interfaceName}`}):g})}:{}};break}case"checkbox":{f={...d,type:St("boolean",c)};break}case"code":case"date":case"email":case"textarea":{f={...d,type:St("string",c)};break}case"group":{J(a)&&(f={...d,type:"object",additionalProperties:!1,...Ro(e,a.flattenedFields,r,o,n)},a.interfaceName&&(r.set(a.interfaceName,f),f={$ref:`#/definitions/${a.interfaceName}`}));break}case"join":{let u;Array.isArray(a.collection)?u={oneOf:a.collection.map(p=>({type:"object",additionalProperties:!1,properties:{relationTo:{const:p},value:{oneOf:[{type:e[p]},{$ref:`#/definitions/${p}`}]}},required:["collectionSlug","value"]}))}:u={oneOf:[{type:e[a.collection]},{$ref:`#/definitions/${a.collection}`}]},f={...d,type:"object",additionalProperties:!1,properties:{docs:{type:"array",items:u},hasNextPage:{type:"boolean"},totalDocs:{type:"number"}}};break}case"json":{f=a.jsonSchema?.schema||{...d,type:["object","array","string","number","boolean","null"]};break}case"number":{a.hasMany===!0?f={...d,type:St("array",c),items:{type:"number"}}:f={...d,type:St("number",c)};break}case"point":{f={...d,type:St("array",c),items:[{type:"number"},{type:"number"}],maxItems:2,minItems:2};break}case"radio":{f={...d,type:St("string",c),enum:oH(a.options)},a.interfaceName&&(r.set(a.interfaceName,f),f={$ref:`#/definitions/${a.interfaceName}`});break}case"relationship":case"upload":{Array.isArray(a.relationTo)?a.hasMany?f={...d,type:St("array",c),items:{oneOf:a.relationTo.map(u=>({type:"object",additionalProperties:!1,properties:{relationTo:{const:u},value:{oneOf:[{type:e[u]},{$ref:`#/definitions/${u}`}]}},required:["value","relationTo"]}))}}:f={...d,oneOf:a.relationTo.map(u=>({type:St("object",c),additionalProperties:!1,properties:{relationTo:{const:u},value:{oneOf:[{type:e[u]},{$ref:`#/definitions/${u}`}]}},required:["value","relationTo"]}))}:a.hasMany?f={...d,type:St("array",c),items:{oneOf:[{type:e[a.relationTo]},{$ref:`#/definitions/${a.relationTo}`}]}}:f={...d,oneOf:[{type:St(e[a.relationTo],c)},{$ref:`#/definitions/${a.relationTo}`}]};break}case"richText":{if(!a?.editor)throw new Et(a);if(typeof a.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");a.editor.outputSchema?f={...d,...a.editor.outputSchema({collectionIDFieldTypes:e,config:o,field:a,i18n:n,interfaceNameDefinitions:r,isRequired:c})}:f={...d,type:St("array",c),items:{type:"object"}};break}case"select":{let u=oH(a.options),p=t?.[l-1];if(p?.type==="date"&&p.timezone&&a.name.includes("_tz"))f={$ref:"#/definitions/supportedTimezones"};else{a.hasMany?(f={...d,type:St("array",c),items:{type:"string"}},u?.length&&(f.items.enum=u)):(f={...d,type:St("string",c)},u?.length&&(f.enum=u)),a.interfaceName&&(r.set(a.interfaceName,f),f={$ref:`#/definitions/${a.interfaceName}`});break}break}case"tab":{f={...d,type:"object",additionalProperties:!1,...Ro(e,a.flattenedFields,r,o,n)},a.interfaceName&&(r.set(a.interfaceName,f),f={$ref:`#/definitions/${a.interfaceName}`});break}case"text":a.hasMany===!0?f={...d,type:St("array",c),items:{type:"string"}}:f={...d,type:St("string",c)};break;default:break}if("typescriptSchema"in a&&a?.typescriptSchema?.length)for(let u of a.typescriptSchema)f=u({jsonSchema:f});return f&&J(a)&&(c&&f.required!==!1&&i.add(a.name),s.set(a.name,f)),s},new Map)),required:Array.from(i)}}function AH(e,t,r,o,n,i){n||(n=Mg({config:e,defaultIDType:o}));let s=t.typescript?.interface?t.typescript.interface:aH(Pr(t.slug,!0)),a=[...t.flattenedFields],l={name:"id",type:o,required:!0},c=a.find(f=>f.name==="id");c&&c.type!=="group"&&c.type!=="tab"?a=a.map(f=>f===c?{...f,required:!0}:f):a.unshift(l),"timestamps"in t&&t.timestamps!==!1&&(a=a.map(f=>f.name==="createdAt"||f.name==="updatedAt"?{...f,required:!0}:f)),"auth"in t&&t.auth&&(!t.auth?.disableLocalStrategy||typeof t.auth?.disableLocalStrategy=="object"&&t.auth.disableLocalStrategy.enableFields)&&a.push({name:"password",type:"text"});let A={type:"object",additionalProperties:!1,title:s,...Ro(n,a,r,e,i)},d=cH({entity:t,i18n:i});return d&&(A.description=d),A}function Gb({config:e,fields:t,interfaceNameDefinitions:r}){let o={type:"object",additionalProperties:!1,properties:{}};for(let n of t)switch(n.type){case"array":case"group":case"tab":{let i=Gb({config:e,fields:n.flattenedFields,interfaceNameDefinitions:r});if(n.interfaceName){let s=`${n.interfaceName}_select`;r.set(s,i),i={$ref:`#/definitions/${s}`}}o.properties[n.name]={oneOf:[{type:"boolean"},i]};break}case"blocks":{let i={type:"object",additionalProperties:!1,properties:{}};for(let s of n.blockReferences??n.blocks){if(typeof s=="string")continue;let a=Gb({config:e,fields:s.flattenedFields,interfaceNameDefinitions:r});if(s.interfaceName){let l=`${s.interfaceName}_select`;r.set(l,a),a={$ref:`#/definitions/${l}`}}i.properties[s.slug]={oneOf:[{type:"boolean"},a]}}o.properties[n.name]={oneOf:[{type:"boolean"},i]};break}default:o.properties[n.name]={type:"boolean"};break}return o}var Er={type:"string",required:!1},_b=({type:e,loginWithUsername:t})=>{if(t)switch(e){case"forgotOrUnlock":return t.allowEmailLogin?{additionalProperties:!1,oneOf:[{additionalProperties:!1,properties:{email:Er},required:["email"]},{additionalProperties:!1,properties:{username:Er},required:["username"]}]}:{additionalProperties:!1,properties:{username:Er},required:["username"]};case"login":return t.allowEmailLogin?{additionalProperties:!1,oneOf:[{additionalProperties:!1,properties:{email:Er,password:Er},required:["email","password"]},{additionalProperties:!1,properties:{password:Er,username:Er},required:["username","password"]}]}:{additionalProperties:!1,properties:{password:Er,username:Er},required:["username","password"]};case"register":{let r=["password"],o={password:Er,username:Er};return t.requireEmail&&r.push("email"),t.requireUsername&&r.push("username"),(t.requireEmail||t.allowEmailLogin)&&(o.email=Er),{additionalProperties:!1,properties:o,required:r}}}return{additionalProperties:!1,properties:{email:Er,password:Er},required:["email","password"]}};function Wfe(e){let t=e.auth?.loginWithUsername,r=_b({type:"login",loginWithUsername:t}),o=_b({type:"forgotOrUnlock",loginWithUsername:t}),n=_b({type:"register",loginWithUsername:t}),i={forgotPassword:o,login:r,registerFirstUser:n,unlock:o};return{type:"object",additionalProperties:!1,properties:i,required:Object.keys(i),title:`${aH(Pr(`${e.slug}`,!0))}AuthOperations`}}function Jfe(e){return{description:"Supported timezones in IANA format.",enum:e.map(t=>typeof t=="string"?t:t.value)}}function zfe(e){let t=e.reduce((r,o)=>(o.auth&&(r[o.slug]={$ref:`#/definitions/auth/${o.slug}`}),r),{});return{type:"object",additionalProperties:!1,properties:t,required:Object.keys(t)}}function $fe(e,t,r){let o=new Map,n=Mg({config:e,defaultIDType:t}),s=[...e.globals.map(f=>({type:"global",entity:f})),...e.collections.map(f=>({type:"collection",entity:f}))].reduce((f,{type:u,entity:p})=>{f[p.slug]=AH(e,p,o,t,n,r);let h=Gb({config:e,fields:p.flattenedFields,interfaceNameDefinitions:o});return u==="global"&&(h.properties.globalType={type:"boolean"}),f[`${p.slug}_select`]={type:"object",additionalProperties:!1,...h},f},{}),a=Jfe(e.admin.timezones.supportedTimezones),l=[...e.collections].filter(({auth:f})=>!!f).reduce((f,u)=>(f.auth[u.slug]=Wfe(u),f),{auth:{}}),c=e.jobs?rH(e,e.jobs,o,n,r):{},A={type:"object",additionalProperties:!1,properties:{},required:[]};if(e?.blocks?.length)for(let f of e.blocks){let u=Ro(n,f.flattenedFields,o,e,r),p={type:"object",additionalProperties:!1,properties:{...u.properties,blockType:{const:f.slug}},required:["blockType",...u.required]},h=f.interfaceName??f.slug;o.set(h,p),A.properties[f.slug]={$ref:`#/definitions/${h}`},A.required.push(f.slug)}let d={additionalProperties:!1,definitions:{supportedTimezones:a,...s,...Object.fromEntries(o),...l},type:"object",properties:{auth:zfe(e.collections),blocks:A,collections:nH(e.collections||[]),collectionsJoins:Hfe(e.collections||[]),collectionsSelect:iH(e.collections||[]),db:Yfe(e),globals:nH(e.globals||[]),globalsSelect:iH(e.globals||[]),locale:Vfe(e.localization),user:qfe(e.collections)},required:["user","locale","collections","collectionsSelect","collectionsJoins","globalsSelect","globals","auth","db","jobs","blocks"],title:"Config"};if(c.definitions?.size)for(let[f,u]of c.definitions)d.definitions[f]=u;if(c.properties&&(d.properties.jobs={type:"object",additionalProperties:!1,properties:c.properties,required:["tasks","workflows"]}),e?.typescript?.schema?.length)for(let f of e.typescript.schema)d=f({collectionIDFieldTypes:n,config:e,i18n:r,jsonSchema:d});return d}function Kfe(e){return Array.isArray(e)?e:e.indexOf(",")>-1?e.split(","):[e]}import{initI18n as upe}from"@payloadcms/translations";var jb=Object.prototype.hasOwnProperty,ca=Array.isArray,mze=function(){let e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),Zfe=function(t){for(;t.length>1;){let r=t.pop(),o=r.obj[r.prop];if(ca(o)){let n=[];for(let i=0;i<o.length;++i)typeof o[i]<"u"&&n.push(o[i]);r.obj[r.prop]=n}}},Xfe=function(t,r){let o=r&&r.plainObjects?Object.create(null):{};for(let n=0;n<t.length;++n)typeof t[n]<"u"&&(o[n]=t[n]);return o},uH=function e(t,r,o){if(!r)return t;if(typeof r!="object"){if(ca(t))t.push(r);else if(t&&typeof t=="object")(o&&(o.plainObjects||o.allowPrototypes)||!jb.call(Object.prototype,r))&&(t[r]=!0);else return[t,r];return t}if(!t||typeof t!="object")return[t].concat(r);let n=t;return ca(t)&&!ca(r)&&(n=Xfe(t,o)),ca(t)&&ca(r)?(r.forEach(function(i,s){if(jb.call(t,s)){let a=t[s];a&&typeof a=="object"&&i&&typeof i=="object"?t[s]=e(a,i,o):t.push(i)}else t[s]=i}),t):Object.keys(r).reduce(function(i,s){let a=r[s];return jb.call(i,s)?i[s]=e(i[s],a,o):i[s]=a,i},n)};var dH=function(e,t,r){let o=e.replace(/\+/g," ");if(r==="iso-8859-1")return o.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(o)}catch{return o}};var fH=function(t){let r=[{obj:{o:t},prop:"o"}],o=[];for(let n=0;n<r.length;++n){let i=r[n],s=i.obj[i.prop],a=Object.keys(s);for(let l=0;l<a.length;++l){let c=a[l],A=s[c];typeof A=="object"&&A!==null&&o.indexOf(A)===-1&&(r.push({obj:s,prop:c}),o.push(A))}}return Zfe(r),t},pH=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"};var hH=function(t,r){return[].concat(t,r)},gH=function(t,r){if(ca(t)){let o=[];for(let n=0;n<t.length;n+=1)o.push(r(t[n]));return o}return r(t)};var Hb=Object.prototype.hasOwnProperty,tpe=Array.isArray,dt={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:dH,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},rpe=function(e){return e.replace(/&#(\d+);/g,function(t,r){return String.fromCharCode(parseInt(r,10))})},mH=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},ope="utf8=%26%2310003%3B",npe="utf8=%E2%9C%93",ipe=function(t,r){let o={__proto__:null},n=r.ignoreQueryPrefix?t.replace(/^\?/,""):t,i=r.parameterLimit===1/0?void 0:r.parameterLimit,s=n.split(r.delimiter,i),a=-1,l,c=r.charset;if(r.charsetSentinel)for(l=0;l<s.length;++l)s[l].indexOf("utf8=")===0&&(s[l]===npe?c="utf-8":s[l]===ope&&(c="iso-8859-1"),a=l,l=s.length);for(l=0;l<s.length;++l){if(l===a)continue;let A=s[l],d=A.indexOf("]="),f=d===-1?A.indexOf("="):d+1,u,p;f===-1?(u=r.decoder(A,dt.decoder,c,"key"),p=r.strictNullHandling?null:""):(u=r.decoder(A.slice(0,f),dt.decoder,c,"key"),p=gH(mH(A.slice(f+1),r),function(g){return r.decoder(g,dt.decoder,c,"value")})),p&&r.interpretNumericEntities&&c==="iso-8859-1"&&(p=rpe(p)),A.indexOf("[]=")>-1&&(p=tpe(p)?[p]:p);let h=Hb.call(o,u);h&&r.duplicates==="combine"?o[u]=hH(o[u],p):(!h||r.duplicates==="last")&&(o[u]=p)}return o},spe=function(e,t,r,o){let n=o?t:mH(t,r);for(let i=e.length-1;i>=0;--i){let s,a=e[i];if(a==="[]"&&r.parseArrays)s=r.allowEmptyArrays&&n===""?[]:[].concat(n);else{s=r.plainObjects?Object.create(null):{};let l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=r.decodeDotInKeys?l.replace(/%2E/g,"."):l,A=parseInt(c,10);!r.parseArrays&&c===""?s={0:n}:!isNaN(A)&&a!==c&&String(A)===c&&A>=0&&r.parseArrays&&A<=r.arrayLimit?(s=[],s[A]=n):c!=="__proto__"&&(s[c]=n)}n=s}return n},ape=function(t,r,o,n){if(!t)return;let i=o.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=o.depth>0&&s.exec(i),c=l?i.slice(0,l.index):i,A=[];if(c){if(!o.plainObjects&&Hb.call(Object.prototype,c)&&!o.allowPrototypes)return;A.push(c)}let d=0;for(;o.depth>0&&(l=a.exec(i))!==null&&d<o.depth;){if(d+=1,!o.plainObjects&&Hb.call(Object.prototype,l[1].slice(1,-1))&&!o.allowPrototypes)return;A.push(l[1])}return l&&A.push("["+i.slice(l.index)+"]"),spe(A,r,o,n)},lpe=function(t){if(!t)return dt;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=typeof t.charset>"u"?dt.charset:t.charset,o=typeof t.duplicates>"u"?dt.duplicates:t.duplicates;if(o!=="combine"&&o!=="first"&&o!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");return{allowDots:typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:dt.allowDots:!!t.allowDots,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:dt.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:dt.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:dt.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:dt.arrayLimit,charset:r,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:dt.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:dt.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:dt.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:dt.decoder,delimiter:typeof t.delimiter=="string"||pH(t.delimiter)?t.delimiter:dt.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:dt.depth,duplicates:o,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:dt.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:dt.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:dt.plainObjects,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:dt.strictNullHandling}};function Vb(e,t){let r=lpe(t);if(e===""||e===null||typeof e>"u")return r.plainObjects?Object.create(null):{};let o=typeof e=="string"?ipe(e,r):e,n=r.plainObjects?Object.create(null):{},i=Object.keys(o);for(let s=0;s<i.length;++s){let a=i[s],l=ape(a,o[a],r,typeof e=="string");n=uH(n,l,r)}return r.allowSparse===!0?n:fH(n)}import{extractHeaderLanguage as Ape}from"@payloadcms/translations";var qb=({config:e,cookies:t,headers:r})=>{let o=Object.keys(e.i18n.supportedLanguages),n=t.get(`${e.cookiePrefix||"payload"}-lng`),i=typeof n=="string"?n:n?.value;if(i&&o.includes(i))return i;let s=r.get("Accept-Language")?Ape(r.get("Accept-Language")):void 0;return s&&o.includes(s)?s:e.i18n.fallbackLanguage};var Yb=async({canSetHeaders:e,config:t,params:r,request:o})=>{let n=Bf(o.headers),i=await _g({config:t}),{config:s}=i,a=s.localization,l=new URL(o.url),{pathname:c,searchParams:A}=l,d=!s.graphQL.disable&&c===`${s.routes.api}${s.routes.graphQL}`,f=qb({config:s,cookies:n,headers:o.headers}),u=await upe({config:s.i18n,context:"api",language:f}),p=A.get("fallback-locale")||A.get("fallbackLocale"),h=A.get("locale"),g=p,{search:m}=l,y=m?Vb(m,{arrayLimit:1e3,depth:10,ignoreQueryPrefix:!0}):{};if(a){let R=Ig({fallbackLocale:g,locale:h,localization:a});g=R.fallbackLocale,h=R.locale}let E={context:{},fallbackLocale:g,hash:l.hash,host:l.host,href:l.href,i18n:u,locale:h,origin:l.origin,pathname:l.pathname,payload:i,payloadAPI:d?"GraphQL":"REST",payloadDataLoader:void 0,payloadUploadSizes:{},port:l.port,protocol:l.protocol,query:y,routeParams:r||{},search:l.search,searchParams:l.searchParams,t:u.t,transactionID:void 0,user:null},I=Object.assign(o,E);I.payloadDataLoader=yc(I);let{responseHeaders:C,user:B}=await vu({canSetHeaders:e,headers:I.headers,isGraphQL:d,payload:i});return I.user=B,C&&(I.responseHeaders=C),I};import{promises as QH}from"fs";import Xu from"path";import{fileURLToPath as ppe}from"url";import{createRequire as fpe}from"module";import IH from"path";function yH(e){return typeof e=="object"&&e!==null&&"name"in e&&"message"in e}import EH from"fs";var dpe=process.platform==="win32",CH=dpe?EH.realpathSync:EH.realpathSync.native;var BH=(e,t,r)=>{if(typeof e!="string")throw new TypeError(`Expected \`fromDir\` to be of type \`string\`, got \`${typeof e}\``);if(typeof t!="string")throw new TypeError(`Expected \`moduleId\` to be of type \`string\`, got \`${typeof t}\``);try{e=CH(e)}catch(a){if(yH(a)&&a.code==="ENOENT")e=IH.resolve(e);else{if(r)return;throw a}}let o=IH.join(e,"noop.js"),i=fpe(import.meta.url)("module"),s=()=>i._resolveFilename(t,{id:o,filename:o,paths:i._nodeModulePaths(e)});if(r)try{return s()}catch{return}return s()};var hpe=ppe(import.meta.url),gpe=Xu.dirname(hpe),Wb=Xu.resolve(gpe,"../../../");Wb.includes("node_modules")&&Wb.split("node_modules").slice(0,-1);var mpe=Xu.resolve(process.cwd());async function ug(e,t){let r=new Map,o=[];return await Promise.all(t.map(async n=>{try{let i=await QH.realpath(BH(e,n)),s=Xu.dirname(i),a=null,l=await Uu({dir:s,fileNames:["package.json"]});if(l){let c=Xu.resolve(l);(c.startsWith(mpe)||c.startsWith(Wb))&&(a=c)}if(a){let A=JSON.parse(await QH.readFile(a,"utf8")).version;r.set(n,{path:a,version:A})}else return o.push(n)}catch{return o.push(n)}})),{missing:o,resolved:r}}var Gg=e=>{if(e){let t=Object.getPrototypeOf(e);if((t.constructor.name===wa||t.constructor.name===gc)&&e.data)return{errors:[{name:e.name,data:e.data,message:e.message}]};if(t.constructor.name===wa&&"errors"in e&&e.errors)return{errors:Object.keys(e.errors).reduce((r,o)=>(r.push({field:e.errors[o].path,message:e.errors[o].message}),r),[])};if(Array.isArray(e.message))return{errors:e.message};if(e.name)return{errors:[{message:e.message}]}}return{errors:[{message:"An unknown error occurred."}]}};var ype=(e,t,r)=>{if(!t||!e)return r;let o=t.split(".").reduce((n,i)=>n?.[i],e);return o===void 0?r:o};var DH=We(TH(),1);var xH=async({collection:e,config:t,err:r,req:o})=>{if("payloadInitError"in r&&r.payloadInitError===!0)return console.error(r),Response.json({message:"There was an error initializing Payload"},{status:N.INTERNAL_SERVER_ERROR});let n=o&&"payload"in o&&o?.payload;if(!n)try{n=await _g({config:t})}catch{return Response.json({message:"There was an error initializing Payload"},{status:N.INTERNAL_SERVER_ERROR})}let i=Gg(r),s=r.status||N.INTERNAL_SERVER_ERROR;Nu({err:r,payload:n});let a=o;a.payload=n;let l=j({headers:new Headers,req:a}),{config:c}=n;return!c.debug&&!r.isPublic&&s===N.INTERNAL_SERVER_ERROR&&(i=Gg(new F("Something went wrong."))),c.debug&&c.debug===!0&&(i.stack=r.stack),e&&await e.config.hooks.afterError?.reduce(async(A,d)=>{await A;let f=await d({collection:e.config,context:a.context,error:r,req:a,result:i});f&&(i=f.response||i,s=f.status||s)},Promise.resolve()),await c.hooks.afterError?.reduce(async(A,d)=>{await A;let f=await d({collection:e?.config,context:a.context,error:r,req:a,result:i});f&&(i=f.response||i,s=f.status||s)},Promise.resolve()),Response.json(i,{headers:a.responseHeaders?oa(a.responseHeaders,l):l,status:s})};var RH=(e,t)=>Response.json({message:`Route not found "${t??new URL(e.url).pathname}"`},{headers:j({headers:new Headers,req:e}),status:N.NOT_FOUND}),FH=async({basePath:e="",config:t,path:r,request:o})=>{let n,i,s;if(o.method.toLowerCase()==="post"&&(o.headers.get("X-Payload-HTTP-Method-Override")==="GET"||o.headers.get("X-HTTP-Method-Override")==="GET")){let a=await o.text(),l=`${o.url}?${new URLSearchParams(a).toString()}`;return await FH({basePath:e,config:t,path:r,request:new Request(l,{cache:o.cache,credentials:o.credentials,headers:o.headers,method:"GET",signal:o.signal})})}try{if(i=await Yb({canSetHeaders:!0,config:t,request:o}),i.method?.toLowerCase()==="options")return Response.json({},{headers:j({headers:new Headers,req:i}),status:200});let{payload:a}=i,{config:l}=a,c=`${e}${r??new URL(i.url).pathname}`;if(!c.startsWith(l.routes.api))return RH(i,c);let A=c.replace(l.routes.api,""),d=!1;A.startsWith("/globals")&&(d=!0,A=A.replace("/globals",""));let f=A.split("/");f.shift();let u=f[0],p;u&&(d?p=a.globals.config.find(y=>y.slug===u):a.collections[u]&&(s=a.collections[u]));let h=l.endpoints;if(s?(h=s.config.endpoints,A=A.replace(`/${s.config.slug}`,"")):p&&(A=A.replace(`/${p.slug}`,""),h=p.endpoints),A===""&&(A="/"),h===!1)return Response.json({message:`Cannot ${i.method?.toUpperCase()} ${i.url}`},{headers:j({headers:new Headers,req:i}),status:N.NOT_IMPLEMENTED});let g=h?.find(y=>{if(y.method!==i.method?.toLowerCase())return!1;let I=(0,DH.match)(y.path,{decode:decodeURIComponent})(A);return I?(i.routeParams=I.params,s?i.routeParams.collection=s.config.slug:p&&(i.routeParams.global=p.slug),!0):!1});if(g&&(n=g.handler),!n)return RH(i,c);let m=await n(i);return new Response(m.body,{headers:j({headers:oa(i.responseHeaders??new Headers,m.headers),req:i}),status:m.status,statusText:m.statusText})}catch(a){return xH({collection:s,config:t,err:a,req:i})}};var wpe=({hidden:e,user:t})=>typeof e=="function"?e({user:t}):e===!0;function XQ({id:e,collectionSlug:t,payload:r}){let o=r.collections[t]?.customIDType??r.db.defaultIDType;return e?o==="number"&&Z(e)?parseFloat(String(e)):e:void 0}var Spe=({indexes:e})=>e.map(t=>({fields:t.fields.map(({field:r,localizedPath:o,path:n,pathHasLocalized:i})=>({field:r,localizedPath:`version.${o}`,path:`version.${n}`,pathHasLocalized:i})),unique:!1}));import{deepMergeSimple as H3e}from"@payloadcms/translations/utilities";var Dpe=Rpe(import.meta.url),Fpe=NH.dirname(Dpe),kH=!1,jg=class{auth=async t=>KM(this,t);authStrategies;blocks={};collections={};config;count=async t=>mD(this,t);countGlobalVersions=async t=>kM(this,t);countVersions=async t=>f_(this,t);create=async t=>rM(this,t);crons=[];db;decrypt=YM;destroy=async()=>{if(this.crons.length){let t=this.crons.splice(0,this.crons.length);await Promise.all(t.map(r=>r.stop()))}this.db?.destroy&&typeof this.db.destroy=="function"&&await this.db.destroy()};duplicate=async t=>IM(this,t);email;encrypt=qM;extensions;find=async t=>bM(this,t);findByID=async t=>SM(this,t);findGlobal=async t=>NM(this,t);findGlobalVersionByID=async t=>vM(this,t);findGlobalVersions=async t=>PM(this,t);findVersionByID=async t=>TM(this,t);findVersions=async t=>xM(this,t);forgotPassword=async t=>qS(this,t);getAdminURL=()=>`${this.config.serverURL}${this.config.routes.admin}`;getAPIURL=()=>`${this.config.serverURL}${this.config.routes.api}`;globals;importMap;jobs=g_(this);logger;login=async t=>xT(this,t);resetPassword=async t=>dD(this,t);restoreGlobalVersion=async t=>LM(this,t);restoreVersion=async t=>RM(this,t);schema;secret;sendEmail;types;unlock=async t=>fD(this,t);updateGlobal=async t=>UM(this,t);validationRules;verifyEmail=async t=>pD(this,t);versions={};async bin({args:t,cwd:r,log:o}){return new Promise((n,i)=>{let s=Tpe("node",[NH.resolve(Fpe,"../bin.js"),...t],{cwd:r,stdio:o||o===void 0?"inherit":"ignore"});s.on("exit",a=>{n({code:a})}),s.on("error",a=>{i(a)})})}delete(t){return CM(this,t)}async init(t){if(process.env.NODE_ENV!=="production"&&process.env.PAYLOAD_DISABLE_DEPENDENCY_CHECKER!=="true"&&!kH&&(kH=!0,u_()),this.importMap=t.importMap,!t?.config)throw new Error("Error: the payload config is required to initialize payload.");if(this.config=await t.config,this.logger=I_("payload",this.config.logger),!this.config.secret)throw new Error("Error: missing secret key. A secret key is needed to secure Payload.");this.secret=xpe.createHash("sha256").update(this.config.secret).digest("hex").slice(0,32),this.globals={config:this.config.globals};for(let o of this.config.collections){let n;vr({callback:({field:s})=>{if(["array","blocks","group"].includes(s.type)||s.type==="tab"&&"name"in s)return!0;if(J(s)&&s.name==="id")return n=s.type,!0},config:this.config,fields:o.fields,parentIsLocalized:!1}),this.collections[o.slug]={config:o,customIDType:n}}if(this.blocks=this.config.blocks.reduce((o,n)=>(o[n.slug]=n,o),{}),process.env.NODE_ENV!=="production"&&this.config.typescript.autoGenerate!==!1&&this.bin({args:["generate:types"],log:!1}),this.db=this.config.db.init({payload:this}),this.db.payload=this,this.db?.init&&await this.db.init(),!t.disableDBConnect&&this.db.connect&&await this.db.connect(),this.config.email instanceof Promise){let o=await this.config.email;this.email=o({payload:this})}else this.config.email?this.email=this.config.email({payload:this}):(process.env.NEXT_PHASE!=="phase-production-build"&&this.logger.warn("No email adapter provided. Email will be written to console. More info at https://payloadcms.com/docs/email/overview."),this.email=h_({payload:this}));if(!this.config.sharp&&this.config.collections.some(o=>o.upload.imageSizes||o.upload.formatOptions)&&this.logger.warn("Image resizing is enabled for one or more collections, but sharp not installed. Please install 'sharp' and pass into the config."),process.env.VERCEL){let o=this.config.collections.filter(n=>n.upload&&n.upload.adapter===void 0);if(o.length){let n=o.map(i=>i.slug).join(", ");this.logger.warn(`Collections with uploads enabled require a storage adapter when deploying to Vercel. Collection(s) without storage adapters: ${n}. See https://payloadcms.com/docs/upload/storage-adapters for more info.`)}}this.sendEmail=this.email.sendEmail,v_(this);let r=!1;this.authStrategies=this.config.collections.reduce((o,n)=>(n?.auth&&(n.auth.strategies.length>0&&o.push(...n.auth.strategies),n.auth?.useAPIKey&&o.push({name:`${n.slug}-api-key`,authenticate:ZM(n)}),!n.auth.disableLocalStrategy&&!r&&(r=!0)),o),[]),r&&this.authStrategies.push({name:"local-jwt",authenticate:$0});try{t.disableOnInit||(typeof t.onInit=="function"&&await t.onInit(this),typeof this.config.onInit=="function"&&await this.config.onInit(this))}catch(o){throw this.logger.error({err:o},"Error running onInit function"),o}if(this.config.jobs.enabled&&this.config.jobs.autoRun&&!m_()){let o="* * * * *",i=typeof this.config.jobs.autoRun=="function"?await this.config.jobs.autoRun(this):this.config.jobs.autoRun;await Promise.all(i.map(s=>{let a=new HM(s.cron??o,async()=>{if(typeof this.config.jobs.shouldAutoRun=="function"&&!await this.config.jobs.shouldAutoRun(this))return a.stop(),!1;await this.jobs.run({limit:s.limit??10,queue:s.queue})});this.crons.push(a)}))}return this}update(t){return DM(this,t)}},kpe=new jg,t4e=kpe,at=global._payload;at||(at=global._payload={payload:null,promise:null,reload:!1,ws:null});var Npe=async(e,t,r)=>{await t.destroy(),t.config=e,t.collections=e.collections.reduce((o,n)=>(o[n.slug]={config:n,customIDType:t.collections[n.slug]?.customIDType},o),{}),t.blocks=e.blocks.reduce((o,n)=>(o[n.slug]=n,o),{}),t.globals={config:e.globals},e.typescript.autoGenerate!==!1&&t.bin({args:["generate:types"],log:!1}),r!==!0&&e.admin?.importMap?.autoGenerate!==!1&&await X0(e,{log:!0}),await t.db.init?.(),t.db.connect&&await t.db.connect({hotReload:!0}),global._payload_clientConfigs={},global._payload_schemaMap=null,global._payload_clientSchemaMap=null,global._payload_doNotCacheClientConfig=!0,global._payload_doNotCacheSchemaMap=!0,global._payload_doNotCacheClientSchemaMap=!0},_g=async e=>{if(!e?.config)throw new Error("Error: the payload config is required for getPayload to work.");if(at.payload){if(at.reload===!0){let t;at.reload=new Promise(o=>t=o);let r=await e.config;await Npe(r,at.payload,!e.importMap),t()}return at.reload instanceof Promise&&await at.reload,e?.importMap&&(at.payload.importMap=e.importMap),at.payload}at.promise||(at.promise=new jg().init(e));try{if(at.payload=await at.promise,!at.ws&&process.env.NODE_ENV!=="production"&&process.env.NODE_ENV!=="test"&&process.env.DISABLE_PAYLOAD_HMR!=="true")try{let t=process.env.PORT||"3000",r="/_next/webpack-hmr",o=process.env.__NEXT_ASSET_PREFIX??"";at.ws=new TS(process.env.PAYLOAD_HMR_URL_OVERRIDE??`ws://localhost:${t}${o}${r}`),at.ws.onmessage=n=>{if(typeof n.data=="string"){let i=JSON.parse(n.data);"action"in i&&i.action==="serverComponentChanges"&&(at.reload=!0)}},at.ws.onerror=n=>{}}catch{}}catch(t){throw at.promise=null,t.payloadInitError=!0,t}return e?.importMap&&(at.payload.importMap=e.importMap),at.payload};var export_deepMerge=Ka.default;export{F as APIError,gc as APIErrorName,Ki as AuthenticationError,jg as BasePayload,ga as DuplicateCollection,Zi as DuplicateFieldName,hd as DuplicateGlobal,Xi as ErrorDeletingFile,ma as FileRetrievalError,Zn as FileUploadError,ae as Forbidden,qt as InvalidConfiguration,ya as InvalidFieldName,Ea as InvalidFieldRelationship,$0 as JWTAuthentication,Ca as Locked,Ia as LockedAuth,gd as MissingCollectionLabel,Et as MissingEditorProp,md as MissingFieldInputOptions,Ba as MissingFieldType,Qa as MissingFile,Ke as NotFound,Xn as QueryError,ba as UnverifiedEmail,xt as ValidationError,wa as ValidationErrorName,pQ as accessOperation,OQ as addDataAndFileToRequest,MQ as addLocalesToRequestFromData,ho as afterChangeTraverseFields,vm as afterReadPromise,Ir as afterReadTraverseFields,qr as appendVersionToQueryKey,lQ as baseAPIKeyFields,aQ as baseAccountLockFields,cQ as baseAuthFields,Gu as baseBlockFields,AQ as baseEmailField,_u as baseIDField,uQ as baseSessionsField,dQ as baseUsernameField,fQ as baseVerificationFields,jo as beforeChangeTraverseFields,Ho as beforeValidateTraverseFields,Yue as buildConfig,Qo as buildVersionCollectionFields,Spe as buildVersionCompoundIndexes,vi as buildVersionGlobalFields,eQ as checkDependencies,TT as checkLoginPermission,Ae as combineQueries,pe as commitTransaction,$fe as configToJSONSchema,uA as countOperation,Kfe as createArrayFromCommaDelineated,G_ as createClientCollectionConfig,CQ as createClientCollectionConfigs,$ue as createClientConfig,__ as createClientField,Ui as createClientFields,aj as createClientGlobalConfig,tb as createClientGlobalConfigs,rfe as createDatabaseAdapter,xa as createDataloaderCacheKey,W as createLocalReq,nb as createMigration,ea as createOperation,Yb as createPayloadRequest,Ic as deepCopyObject,Id as deepCopyObjectComplex,He as deepCopyObjectSimple,export_deepMerge as deepMerge,H3e as deepMergeSimple,j8 as deepMergeWithCombinedArrays,_E as deepMergeWithReactComponents,Ff as deepMergeWithSourceArrays,t4e as default,ofe as defaultBeginTransaction,C_ as defaultLoggerOptions,Mue as defaults,yu as deleteByIDOperation,pu as deleteCollectionVersions,mu as deleteOperation,IQ as docAccessOperation,eb as docAccessOperationGlobal,wM as docHasTimestamps,Eu as duplicateOperation,G0 as enforceMaxVersions,AH as entityToJSONSchema,oe as executeAccess,vu as executeAuthStrategies,EAe as extractAccessFromPermission,Sn as extractJWT,Ro as fieldsToJSONSchema,ta as findByIDOperation,ra as findOneOperation,Iu as findOperation,Uu as findUp,Zce as findUpSync,Bu as findVersionByIDOperation,Tu as findVersionByIDOperationGlobal,Qu as findVersionsOperation,xu as findVersionsOperationGlobal,Nt as flattenAllFields,ln as flattenTopLevelFields,Fj as flattenWhereToOperators,Cc as forgotPasswordOperation,Gg as formatErrors,Mi as formatLabels,Que as formatNames,sn as genImportMapIterateFields,hD as generateCookie,gD as generateExpiredPayloadCookie,X0 as generateImportMap,ci as generatePayloadCookie,Pu as getAccessResults,Fm as getBlockSelect,Mg as getCollectionIDFieldTypes,f8 as getCookieExpiration,yc as getDataLoader,Bc as getDefaultValue,ug as getDependencies,Zl as getFieldByPath,ns as getFieldsToSign,Es as getFileByPath,ZQ as getFolderData,xn as getLatestCollectionVersion,sg as getLatestGlobalVersion,xm as getLocalI18n,bf as getLocalizedPaths,mn as getLoginOptions,wo as getMigrations,ype as getObjectDotNotation,_g as getPayload,sfe as getPredefinedMigration,Cu as getQueryDraftsSort,qb as getRequestLanguage,FH as handleEndpoints,Vr as hasWhereAccessResult,j as headersWithCors,zh as importHandlerPath,Hm as incrementLoginAttempts,hQ as initOperation,de as initTransaction,wpe as isEntityHidden,ME as isPlainObject,Ta as isValidID,AA as isolateObjectProperty,Yl as jobAfterRead,as as jwtSign,H as killTransaction,Nu as logError,kc as loginOperation,gQ as logoutOperation,M0 as mapAsync,mQ as meOperation,oa as mergeHeaders,sb as migrate,ab as migrateDown,lb as migrateRefresh,cb as migrateReset,Sb as migrateStatus,rb as migrationTemplate,JQ as migrationsCollection,E0e as parseCookies,XQ as parseDocumentID,x_ as pathExistsAndIsAccessible,T_ as pathExistsAndIsAccessibleSync,So as readMigrationFiles,yQ as refreshOperation,EQ as registerFirstUserOperation,Npe as reload,Fc as resetLoginAttempts,aA as resetPasswordOperation,bu as restoreVersionOperation,Ru as restoreVersionOperationGlobal,Rg as sanitizeConfig,Ec as sanitizeFallbackLocale,cn as sanitizeFields,Vu as sanitizeJoinParams,Ig as sanitizeLocales,Fe as sanitizePopulateParam,ke as sanitizeSelectParam,Xs as saveVersion,zue as serverOnlyAdminConfigProperties,lj as serverOnlyConfigProperties,jfe as sortableFieldTypes,km as stripUnselectedFields,Pr as toWords,vr as traverseFields,lA as unlockOperation,Su as updateByIDOperation,wu as updateOperation,Du as updateOperationGlobal,Ye as validateQueryPaths,FE as validateSearchParam,DE as validations,cA as verifyEmailOperation,Hu as versionDefaults,St as withNullableJSONSchemaType,ib as writeMigrationIndex};
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)
*/
//# sourceMappingURL=index.js.map
