var Bs=Object.create;var Ii=Object.defineProperty;var Gs=Object.getOwnPropertyDescriptor;var Ws=Object.getOwnPropertyNames;var Js=Object.getPrototypeOf,Hs=Object.prototype.hasOwnProperty;var Li=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var b=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Ks=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Ws(t))!Hs.call(e,i)&&i!==r&&Ii(e,i,{get:()=>t[i],enumerable:!(n=Gs(t,i))||n.enumerable});return e};var it=(e,t,r)=>(r=e!=null?Bs(Js(e)):{},Ks(t||!e||!e.__esModule?Ii(r,"default",{value:e,enumerable:!0}):r,e));var lt=b(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.regexpCode=E.getEsmExportName=E.getProperty=E.safeStringify=E.stringify=E.strConcat=E.addCodeArg=E.str=E._=E.nil=E._Code=E.Name=E.IDENTIFIER=E._CodeOrName=void 0;var at=class{};E._CodeOrName=at;E.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var Te=class extends at{constructor(t){if(super(),!E.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};E.Name=Te;var X=class extends at{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,n)=>(n instanceof Te&&(r[n.str]=(r[n.str]||0)+1),r),{})}};E._Code=X;E.nil=new X("");function Vi(e,...t){let r=[e[0]],n=0;for(;n<t.length;)Er(r,t[n]),r.push(e[++n]);return new X(r)}E._=Vi;var kr=new X("+");function Mi(e,...t){let r=[st(e[0])],n=0;for(;n<t.length;)r.push(kr),Er(r,t[n]),r.push(kr,st(e[++n]));return vl(r),new X(r)}E.str=Mi;function Er(e,t){t instanceof X?e.push(...t._items):t instanceof Te?e.push(t):e.push(wl(t))}E.addCodeArg=Er;function vl(e){let t=1;for(;t<e.length-1;){if(e[t]===kr){let r=$l(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function $l(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof Te||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof Te))return`"${e}${t.slice(1)}`}function Sl(e,t){return t.emptyStr()?e:e.emptyStr()?t:Mi`${e}${t}`}E.strConcat=Sl;function wl(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:st(Array.isArray(e)?e.join(","):e)}function xl(e){return new X(st(e))}E.stringify=xl;function st(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}E.safeStringify=st;function Tl(e){return typeof e=="string"&&E.IDENTIFIER.test(e)?new X(`.${e}`):Vi`[${e}]`}E.getProperty=Tl;function Pl(e){if(typeof e=="string"&&E.IDENTIFIER.test(e))return new X(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}E.getEsmExportName=Pl;function _l(e){return new X(e.toString())}E.regexpCode=_l});var Ar=b(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.ValueScope=J.ValueScopeName=J.Scope=J.varKinds=J.UsedValueState=void 0;var W=lt(),Rr=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},Lt;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(Lt||(J.UsedValueState=Lt={}));J.varKinds={const:new W.Name("const"),let:new W.Name("let"),var:new W.Name("var")};var qt=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof W.Name?t:this.name(t)}name(t){return new W.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};J.Scope=qt;var Vt=class extends W.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:n}){this.value=t,this.scopePath=(0,W._)`.${new W.Name(r)}[${n}]`}};J.ValueScopeName=Vt;var kl=(0,W._)`\n`,Or=class extends qt{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?kl:W.nil}}get(){return this._scope}name(t){return new Vt(t,this._newName(t))}value(t,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let i=this.toName(t),{prefix:o}=i,a=(n=r.key)!==null&&n!==void 0?n:r.ref,s=this._values[o];if(s){let c=s.get(a);if(c)return c}else s=this._values[o]=new Map;s.set(a,i);let l=this._scope[o]||(this._scope[o]=[]),d=l.length;return l[d]=r.ref,i.setValue(r,{property:o,itemIndex:d}),i}getValue(t,r){let n=this._values[t];if(n)return n.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,W._)`${t}${n.scopePath}`})}scopeCode(t=this._values,r,n){return this._reduceValues(t,i=>{if(i.value===void 0)throw new Error(`CodeGen: name "${i}" has no value`);return i.value.code},r,n)}_reduceValues(t,r,n={},i){let o=W.nil;for(let a in t){let s=t[a];if(!s)continue;let l=n[a]=n[a]||new Map;s.forEach(d=>{if(l.has(d))return;l.set(d,Lt.Started);let c=r(d);if(c){let u=this.opts.es5?J.varKinds.var:J.varKinds.const;o=(0,W._)`${o}${u} ${d} = ${c};${this.opts._n}`}else if(c=i?.(d))o=(0,W._)`${o}${c}${this.opts._n}`;else throw new Rr(d);l.set(d,Lt.Completed)})}return o}};J.ValueScope=Or});var T=b(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.or=w.and=w.not=w.CodeGen=w.operators=w.varKinds=w.ValueScopeName=w.ValueScope=w.Scope=w.Name=w.regexpCode=w.stringify=w.getProperty=w.nil=w.strConcat=w.str=w._=void 0;var _=lt(),te=Ar(),ge=lt();Object.defineProperty(w,"_",{enumerable:!0,get:function(){return ge._}});Object.defineProperty(w,"str",{enumerable:!0,get:function(){return ge.str}});Object.defineProperty(w,"strConcat",{enumerable:!0,get:function(){return ge.strConcat}});Object.defineProperty(w,"nil",{enumerable:!0,get:function(){return ge.nil}});Object.defineProperty(w,"getProperty",{enumerable:!0,get:function(){return ge.getProperty}});Object.defineProperty(w,"stringify",{enumerable:!0,get:function(){return ge.stringify}});Object.defineProperty(w,"regexpCode",{enumerable:!0,get:function(){return ge.regexpCode}});Object.defineProperty(w,"Name",{enumerable:!0,get:function(){return ge.Name}});var Bt=Ar();Object.defineProperty(w,"Scope",{enumerable:!0,get:function(){return Bt.Scope}});Object.defineProperty(w,"ValueScope",{enumerable:!0,get:function(){return Bt.ValueScope}});Object.defineProperty(w,"ValueScopeName",{enumerable:!0,get:function(){return Bt.ValueScopeName}});Object.defineProperty(w,"varKinds",{enumerable:!0,get:function(){return Bt.varKinds}});w.operators={GT:new _._Code(">"),GTE:new _._Code(">="),LT:new _._Code("<"),LTE:new _._Code("<="),EQ:new _._Code("==="),NEQ:new _._Code("!=="),NOT:new _._Code("!"),OR:new _._Code("||"),AND:new _._Code("&&"),ADD:new _._Code("+")};var ce=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},jr=class extends ce{constructor(t,r,n){super(),this.varKind=t,this.name=r,this.rhs=n}render({es5:t,_n:r}){let n=t?te.varKinds.var:this.varKind,i=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${i};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=Ve(this.rhs,t,r)),this}get names(){return this.rhs instanceof _._CodeOrName?this.rhs.names:{}}},Mt=class extends ce{constructor(t,r,n){super(),this.lhs=t,this.rhs=r,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof _.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Ve(this.rhs,t,r),this}get names(){let t=this.lhs instanceof _.Name?{}:{...this.lhs.names};return zt(t,this.rhs)}},Nr=class extends Mt{constructor(t,r,n,i){super(t,n,i),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},Dr=class extends ce{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},Ir=class extends ce{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},Lr=class extends ce{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},qr=class extends ce{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=Ve(this.code,t,r),this}get names(){return this.code instanceof _._CodeOrName?this.code.names:{}}},dt=class extends ce{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,n)=>r+n.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let n=t[r].optimizeNodes();Array.isArray(n)?t.splice(r,1,...n):n?t[r]=n:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:n}=this,i=n.length;for(;i--;){let o=n[i];o.optimizeNames(t,r)||(El(t,o.names),n.splice(i,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>ke(t,r.names),{})}},pe=class extends dt{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},Vr=class extends dt{},qe=class extends pe{};qe.kind="else";var Pe=class e extends pe{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new qe(n):n}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(Ui(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=Ve(this.condition,t,r),this}get names(){let t=super.names;return zt(t,this.condition),this.else&&ke(t,this.else.names),t}};Pe.kind="if";var _e=class extends pe{};_e.kind="for";var Mr=class extends _e{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=Ve(this.iteration,t,r),this}get names(){return ke(super.names,this.iteration.names)}},Ur=class extends _e{constructor(t,r,n,i){super(),this.varKind=t,this.name=r,this.from=n,this.to=i}render(t){let r=t.es5?te.varKinds.var:this.varKind,{name:n,from:i,to:o}=this;return`for(${r} ${n}=${i}; ${n}<${o}; ${n}++)`+super.render(t)}get names(){let t=zt(super.names,this.from);return zt(t,this.to)}},Ut=class extends _e{constructor(t,r,n,i){super(),this.loop=t,this.varKind=r,this.name=n,this.iterable=i}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=Ve(this.iterable,t,r),this}get names(){return ke(super.names,this.iterable.names)}},ut=class extends pe{constructor(t,r,n){super(),this.name=t,this.args=r,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};ut.kind="func";var ct=class extends dt{render(t){return"return "+super.render(t)}};ct.kind="return";var zr=class extends pe{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var n,i;return super.optimizeNames(t,r),(n=this.catch)===null||n===void 0||n.optimizeNames(t,r),(i=this.finally)===null||i===void 0||i.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&ke(t,this.catch.names),this.finally&&ke(t,this.finally.names),t}},pt=class extends pe{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};pt.kind="catch";var ft=class extends pe{render(t){return"finally"+super.render(t)}};ft.kind="finally";var Br=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new te.Scope({parent:t}),this._nodes=[new Vr]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let n=this._extScope.value(t,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,n,i){let o=this._scope.toName(r);return n!==void 0&&i&&(this._constants[o.str]=n),this._leafNode(new jr(t,o,n)),o}const(t,r,n){return this._def(te.varKinds.const,t,r,n)}let(t,r,n){return this._def(te.varKinds.let,t,r,n)}var(t,r,n){return this._def(te.varKinds.var,t,r,n)}assign(t,r,n){return this._leafNode(new Mt(t,r,n))}add(t,r){return this._leafNode(new Nr(t,w.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==_.nil&&this._leafNode(new qr(t)),this}object(...t){let r=["{"];for(let[n,i]of t)r.length>1&&r.push(","),r.push(n),(n!==i||this.opts.es5)&&(r.push(":"),(0,_.addCodeArg)(r,i));return r.push("}"),new _._Code(r)}if(t,r,n){if(this._blockNode(new Pe(t)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new Pe(t))}else(){return this._elseNode(new qe)}endIf(){return this._endBlockNode(Pe,qe)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new Mr(t),r)}forRange(t,r,n,i,o=this.opts.es5?te.varKinds.var:te.varKinds.let){let a=this._scope.toName(t);return this._for(new Ur(o,a,r,n),()=>i(a))}forOf(t,r,n,i=te.varKinds.const){let o=this._scope.toName(t);if(this.opts.es5){let a=r instanceof _.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,_._)`${a}.length`,s=>{this.var(o,(0,_._)`${a}[${s}]`),n(o)})}return this._for(new Ut("of",i,o,r),()=>n(o))}forIn(t,r,n,i=this.opts.es5?te.varKinds.var:te.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,_._)`Object.keys(${r})`,n);let o=this._scope.toName(t);return this._for(new Ut("in",i,o,r),()=>n(o))}endFor(){return this._endBlockNode(_e)}label(t){return this._leafNode(new Dr(t))}break(t){return this._leafNode(new Ir(t))}return(t){let r=new ct;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ct)}try(t,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let i=new zr;if(this._blockNode(i),this.code(t),r){let o=this.name("e");this._currNode=i.catch=new pt(o),r(o)}return n&&(this._currNode=i.finally=new ft,this.code(n)),this._endBlockNode(pt,ft)}throw(t){return this._leafNode(new Lr(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||t!==void 0&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=_.nil,n,i){return this._blockNode(new ut(t,r,n)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(ut)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let n=this._currNode;if(n instanceof t||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof Pe))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};w.CodeGen=Br;function ke(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function zt(e,t){return t instanceof _._CodeOrName?ke(e,t.names):e}function Ve(e,t,r){if(e instanceof _.Name)return n(e);if(!i(e))return e;return new _._Code(e._items.reduce((o,a)=>(a instanceof _.Name&&(a=n(a)),a instanceof _._Code?o.push(...a._items):o.push(a),o),[]));function n(o){let a=r[o.str];return a===void 0||t[o.str]!==1?o:(delete t[o.str],a)}function i(o){return o instanceof _._Code&&o._items.some(a=>a instanceof _.Name&&t[a.str]===1&&r[a.str]!==void 0)}}function El(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function Ui(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,_._)`!${Gr(e)}`}w.not=Ui;var Rl=zi(w.operators.AND);function Ol(...e){return e.reduce(Rl)}w.and=Ol;var Al=zi(w.operators.OR);function jl(...e){return e.reduce(Al)}w.or=jl;function zi(e){return(t,r)=>t===_.nil?r:r===_.nil?t:(0,_._)`${Gr(t)} ${e} ${Gr(r)}`}function Gr(e){return e instanceof _.Name?e:(0,_._)`(${e})`}});var R=b(P=>{"use strict";Object.defineProperty(P,"__esModule",{value:!0});P.checkStrictMode=P.getErrorPath=P.Type=P.useFunc=P.setEvaluated=P.evaluatedPropsToName=P.mergeEvaluated=P.eachItem=P.unescapeJsonPointer=P.escapeJsonPointer=P.escapeFragment=P.unescapeFragment=P.schemaRefOrVal=P.schemaHasRulesButRef=P.schemaHasRules=P.checkUnknownRules=P.alwaysValidSchema=P.toHash=void 0;var N=T(),Nl=lt();function Dl(e){let t={};for(let r of e)t[r]=!0;return t}P.toHash=Dl;function Il(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Wi(e,t),!Ji(t,e.self.RULES.all))}P.alwaysValidSchema=Il;function Wi(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;let i=n.RULES.keywords;for(let o in t)i[o]||Qi(e,`unknown keyword: "${o}"`)}P.checkUnknownRules=Wi;function Ji(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}P.schemaHasRules=Ji;function Ll(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}P.schemaHasRulesButRef=Ll;function ql({topSchemaRef:e,schemaPath:t},r,n,i){if(!i){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,N._)`${r}`}return(0,N._)`${e}${t}${(0,N.getProperty)(n)}`}P.schemaRefOrVal=ql;function Vl(e){return Hi(decodeURIComponent(e))}P.unescapeFragment=Vl;function Ml(e){return encodeURIComponent(Jr(e))}P.escapeFragment=Ml;function Jr(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}P.escapeJsonPointer=Jr;function Hi(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}P.unescapeJsonPointer=Hi;function Ul(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}P.eachItem=Ul;function Bi({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(i,o,a,s)=>{let l=a===void 0?o:a instanceof N.Name?(o instanceof N.Name?e(i,o,a):t(i,o,a),a):o instanceof N.Name?(t(i,a,o),o):r(o,a);return s===N.Name&&!(l instanceof N.Name)?n(i,l):l}}P.mergeEvaluated={props:Bi({mergeNames:(e,t,r)=>e.if((0,N._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,N._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,N._)`${r} || {}`).code((0,N._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,N._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,N._)`${r} || {}`),Hr(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Ki}),items:Bi({mergeNames:(e,t,r)=>e.if((0,N._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,N._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,N._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,N._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Ki(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,N._)`{}`);return t!==void 0&&Hr(e,r,t),r}P.evaluatedPropsToName=Ki;function Hr(e,t,r){Object.keys(r).forEach(n=>e.assign((0,N._)`${t}${(0,N.getProperty)(n)}`,!0))}P.setEvaluated=Hr;var Gi={};function zl(e,t){return e.scopeValue("func",{ref:t,code:Gi[t.code]||(Gi[t.code]=new Nl._Code(t.code))})}P.useFunc=zl;var Wr;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(Wr||(P.Type=Wr={}));function Bl(e,t,r){if(e instanceof N.Name){let n=t===Wr.Num;return r?n?(0,N._)`"[" + ${e} + "]"`:(0,N._)`"['" + ${e} + "']"`:n?(0,N._)`"/" + ${e}`:(0,N._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,N.getProperty)(e).toString():"/"+Jr(e)}P.getErrorPath=Bl;function Qi(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}P.checkStrictMode=Qi});var fe=b(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});var M=T(),Gl={data:new M.Name("data"),valCxt:new M.Name("valCxt"),instancePath:new M.Name("instancePath"),parentData:new M.Name("parentData"),parentDataProperty:new M.Name("parentDataProperty"),rootData:new M.Name("rootData"),dynamicAnchors:new M.Name("dynamicAnchors"),vErrors:new M.Name("vErrors"),errors:new M.Name("errors"),this:new M.Name("this"),self:new M.Name("self"),scope:new M.Name("scope"),json:new M.Name("json"),jsonPos:new M.Name("jsonPos"),jsonLen:new M.Name("jsonLen"),jsonPart:new M.Name("jsonPart")};Kr.default=Gl});var mt=b(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.extendErrors=U.resetErrorsCount=U.reportExtraError=U.reportError=U.keyword$DataError=U.keywordError=void 0;var k=T(),Gt=R(),B=fe();U.keywordError={message:({keyword:e})=>(0,k.str)`must pass "${e}" keyword validation`};U.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,k.str)`"${e}" keyword must be ${t} ($data)`:(0,k.str)`"${e}" keyword is invalid ($data)`};function Wl(e,t=U.keywordError,r,n){let{it:i}=e,{gen:o,compositeRule:a,allErrors:s}=i,l=Zi(e,t,r);n??(a||s)?Xi(o,l):Yi(i,(0,k._)`[${l}]`)}U.reportError=Wl;function Jl(e,t=U.keywordError,r){let{it:n}=e,{gen:i,compositeRule:o,allErrors:a}=n,s=Zi(e,t,r);Xi(i,s),o||a||Yi(n,B.default.vErrors)}U.reportExtraError=Jl;function Hl(e,t){e.assign(B.default.errors,t),e.if((0,k._)`${B.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,k._)`${B.default.vErrors}.length`,t),()=>e.assign(B.default.vErrors,null)))}U.resetErrorsCount=Hl;function Kl({gen:e,keyword:t,schemaValue:r,data:n,errsCount:i,it:o}){if(i===void 0)throw new Error("ajv implementation error");let a=e.name("err");e.forRange("i",i,B.default.errors,s=>{e.const(a,(0,k._)`${B.default.vErrors}[${s}]`),e.if((0,k._)`${a}.instancePath === undefined`,()=>e.assign((0,k._)`${a}.instancePath`,(0,k.strConcat)(B.default.instancePath,o.errorPath))),e.assign((0,k._)`${a}.schemaPath`,(0,k.str)`${o.errSchemaPath}/${t}`),o.opts.verbose&&(e.assign((0,k._)`${a}.schema`,r),e.assign((0,k._)`${a}.data`,n))})}U.extendErrors=Kl;function Xi(e,t){let r=e.const("err",t);e.if((0,k._)`${B.default.vErrors} === null`,()=>e.assign(B.default.vErrors,(0,k._)`[${r}]`),(0,k._)`${B.default.vErrors}.push(${r})`),e.code((0,k._)`${B.default.errors}++`)}function Yi(e,t){let{gen:r,validateName:n,schemaEnv:i}=e;i.$async?r.throw((0,k._)`new ${e.ValidationError}(${t})`):(r.assign((0,k._)`${n}.errors`,t),r.return(!1))}var Ee={keyword:new k.Name("keyword"),schemaPath:new k.Name("schemaPath"),params:new k.Name("params"),propertyName:new k.Name("propertyName"),message:new k.Name("message"),schema:new k.Name("schema"),parentSchema:new k.Name("parentSchema")};function Zi(e,t,r){let{createErrors:n}=e.it;return n===!1?(0,k._)`{}`:Ql(e,t,r)}function Ql(e,t,r={}){let{gen:n,it:i}=e,o=[Xl(i,r),Yl(e,r)];return Zl(e,t,o),n.object(...o)}function Xl({errorPath:e},{instancePath:t}){let r=t?(0,k.str)`${e}${(0,Gt.getErrorPath)(t,Gt.Type.Str)}`:e;return[B.default.instancePath,(0,k.strConcat)(B.default.instancePath,r)]}function Yl({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let i=n?t:(0,k.str)`${t}/${e}`;return r&&(i=(0,k.str)`${i}${(0,Gt.getErrorPath)(r,Gt.Type.Str)}`),[Ee.schemaPath,i]}function Zl(e,{params:t,message:r},n){let{keyword:i,data:o,schemaValue:a,it:s}=e,{opts:l,propertyName:d,topSchemaRef:c,schemaPath:u}=s;n.push([Ee.keyword,i],[Ee.params,typeof t=="function"?t(e):t||(0,k._)`{}`]),l.messages&&n.push([Ee.message,typeof r=="function"?r(e):r]),l.verbose&&n.push([Ee.schema,a],[Ee.parentSchema,(0,k._)`${c}${u}`],[B.default.data,o]),d&&n.push([Ee.propertyName,d])}});var to=b(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.boolOrEmptySchema=Me.topBoolOrEmptySchema=void 0;var ed=mt(),td=T(),rd=fe(),nd={message:"boolean schema is false"};function id(e){let{gen:t,schema:r,validateName:n}=e;r===!1?eo(e,!1):typeof r=="object"&&r.$async===!0?t.return(rd.default.data):(t.assign((0,td._)`${n}.errors`,null),t.return(!0))}Me.topBoolOrEmptySchema=id;function od(e,t){let{gen:r,schema:n}=e;n===!1?(r.var(t,!1),eo(e)):r.var(t,!0)}Me.boolOrEmptySchema=od;function eo(e,t){let{gen:r,data:n}=e,i={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,ed.reportError)(i,nd,void 0,t)}});var Qr=b(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.getRules=Ue.isJSONType=void 0;var ad=["string","number","integer","boolean","null","object","array"],sd=new Set(ad);function ld(e){return typeof e=="string"&&sd.has(e)}Ue.isJSONType=ld;function dd(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Ue.getRules=dd});var Xr=b(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.shouldUseRule=be.shouldUseGroup=be.schemaHasRulesForType=void 0;function ud({schema:e,self:t},r){let n=t.RULES.types[r];return n&&n!==!0&&ro(e,n)}be.schemaHasRulesForType=ud;function ro(e,t){return t.rules.some(r=>no(e,r))}be.shouldUseGroup=ro;function no(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}be.shouldUseRule=no});var ht=b(z=>{"use strict";Object.defineProperty(z,"__esModule",{value:!0});z.reportTypeError=z.checkDataTypes=z.checkDataType=z.coerceAndCheckDataType=z.getJSONTypes=z.getSchemaTypes=z.DataType=void 0;var cd=Qr(),pd=Xr(),fd=mt(),S=T(),io=R(),ze;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(ze||(z.DataType=ze={}));function md(e){let t=oo(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}z.getSchemaTypes=md;function oo(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(cd.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}z.getJSONTypes=oo;function hd(e,t){let{gen:r,data:n,opts:i}=e,o=yd(t,i.coerceTypes),a=t.length>0&&!(o.length===0&&t.length===1&&(0,pd.schemaHasRulesForType)(e,t[0]));if(a){let s=Zr(t,n,i.strictNumbers,ze.Wrong);r.if(s,()=>{o.length?gd(e,t,o):en(e)})}return a}z.coerceAndCheckDataType=hd;var ao=new Set(["string","number","integer","boolean","null"]);function yd(e,t){return t?e.filter(r=>ao.has(r)||t==="array"&&r==="array"):[]}function gd(e,t,r){let{gen:n,data:i,opts:o}=e,a=n.let("dataType",(0,S._)`typeof ${i}`),s=n.let("coerced",(0,S._)`undefined`);o.coerceTypes==="array"&&n.if((0,S._)`${a} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,(0,S._)`${i}[0]`).assign(a,(0,S._)`typeof ${i}`).if(Zr(t,i,o.strictNumbers),()=>n.assign(s,i))),n.if((0,S._)`${s} !== undefined`);for(let d of r)(ao.has(d)||d==="array"&&o.coerceTypes==="array")&&l(d);n.else(),en(e),n.endIf(),n.if((0,S._)`${s} !== undefined`,()=>{n.assign(i,s),bd(e,s)});function l(d){switch(d){case"string":n.elseIf((0,S._)`${a} == "number" || ${a} == "boolean"`).assign(s,(0,S._)`"" + ${i}`).elseIf((0,S._)`${i} === null`).assign(s,(0,S._)`""`);return;case"number":n.elseIf((0,S._)`${a} == "boolean" || ${i} === null
              || (${a} == "string" && ${i} && ${i} == +${i})`).assign(s,(0,S._)`+${i}`);return;case"integer":n.elseIf((0,S._)`${a} === "boolean" || ${i} === null
              || (${a} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(s,(0,S._)`+${i}`);return;case"boolean":n.elseIf((0,S._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(s,!1).elseIf((0,S._)`${i} === "true" || ${i} === 1`).assign(s,!0);return;case"null":n.elseIf((0,S._)`${i} === "" || ${i} === 0 || ${i} === false`),n.assign(s,null);return;case"array":n.elseIf((0,S._)`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${i} === null`).assign(s,(0,S._)`[${i}]`)}}}function bd({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,S._)`${t} !== undefined`,()=>e.assign((0,S._)`${t}[${r}]`,n))}function Yr(e,t,r,n=ze.Correct){let i=n===ze.Correct?S.operators.EQ:S.operators.NEQ,o;switch(e){case"null":return(0,S._)`${t} ${i} null`;case"array":o=(0,S._)`Array.isArray(${t})`;break;case"object":o=(0,S._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a((0,S._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return(0,S._)`typeof ${t} ${i} ${e}`}return n===ze.Correct?o:(0,S.not)(o);function a(s=S.nil){return(0,S.and)((0,S._)`typeof ${t} == "number"`,s,r?(0,S._)`isFinite(${t})`:S.nil)}}z.checkDataType=Yr;function Zr(e,t,r,n){if(e.length===1)return Yr(e[0],t,r,n);let i,o=(0,io.toHash)(e);if(o.array&&o.object){let a=(0,S._)`typeof ${t} != "object"`;i=o.null?a:(0,S._)`!${t} || ${a}`,delete o.null,delete o.array,delete o.object}else i=S.nil;o.number&&delete o.integer;for(let a in o)i=(0,S.and)(i,Yr(a,t,r,n));return i}z.checkDataTypes=Zr;var Cd={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,S._)`{type: ${e}}`:(0,S._)`{type: ${t}}`};function en(e){let t=Fd(e);(0,fd.reportError)(t,Cd)}z.reportTypeError=en;function Fd(e){let{gen:t,data:r,schema:n}=e,i=(0,io.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:e}}});var lo=b(Wt=>{"use strict";Object.defineProperty(Wt,"__esModule",{value:!0});Wt.assignDefaults=void 0;var Be=T(),vd=R();function $d(e,t){let{properties:r,items:n}=e.schema;if(t==="object"&&r)for(let i in r)so(e,i,r[i].default);else t==="array"&&Array.isArray(n)&&n.forEach((i,o)=>so(e,o,i.default))}Wt.assignDefaults=$d;function so(e,t,r){let{gen:n,compositeRule:i,data:o,opts:a}=e;if(r===void 0)return;let s=(0,Be._)`${o}${(0,Be.getProperty)(t)}`;if(i){(0,vd.checkStrictMode)(e,`default is ignored for: ${s}`);return}let l=(0,Be._)`${s} === undefined`;a.useDefaults==="empty"&&(l=(0,Be._)`${l} || ${s} === null || ${s} === ""`),n.if(l,(0,Be._)`${s} = ${(0,Be.stringify)(r)}`)}});var Y=b(A=>{"use strict";Object.defineProperty(A,"__esModule",{value:!0});A.validateUnion=A.validateArray=A.usePattern=A.callValidateCode=A.schemaProperties=A.allSchemaProperties=A.noPropertyInData=A.propertyInData=A.isOwnProperty=A.hasPropFunc=A.reportMissingProp=A.checkMissingProp=A.checkReportMissingProp=void 0;var D=T(),tn=R(),Ce=fe(),Sd=R();function wd(e,t){let{gen:r,data:n,it:i}=e;r.if(nn(r,n,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,D._)`${t}`},!0),e.error()})}A.checkReportMissingProp=wd;function xd({gen:e,data:t,it:{opts:r}},n,i){return(0,D.or)(...n.map(o=>(0,D.and)(nn(e,t,o,r.ownProperties),(0,D._)`${i} = ${o}`)))}A.checkMissingProp=xd;function Td(e,t){e.setParams({missingProperty:t},!0),e.error()}A.reportMissingProp=Td;function uo(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,D._)`Object.prototype.hasOwnProperty`})}A.hasPropFunc=uo;function rn(e,t,r){return(0,D._)`${uo(e)}.call(${t}, ${r})`}A.isOwnProperty=rn;function Pd(e,t,r,n){let i=(0,D._)`${t}${(0,D.getProperty)(r)} !== undefined`;return n?(0,D._)`${i} && ${rn(e,t,r)}`:i}A.propertyInData=Pd;function nn(e,t,r,n){let i=(0,D._)`${t}${(0,D.getProperty)(r)} === undefined`;return n?(0,D.or)(i,(0,D.not)(rn(e,t,r))):i}A.noPropertyInData=nn;function co(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}A.allSchemaProperties=co;function _d(e,t){return co(t).filter(r=>!(0,tn.alwaysValidSchema)(e,t[r]))}A.schemaProperties=_d;function kd({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:i,errorPath:o},it:a},s,l,d){let c=d?(0,D._)`${e}, ${t}, ${n}${i}`:t,u=[[Ce.default.instancePath,(0,D.strConcat)(Ce.default.instancePath,o)],[Ce.default.parentData,a.parentData],[Ce.default.parentDataProperty,a.parentDataProperty],[Ce.default.rootData,Ce.default.rootData]];a.opts.dynamicRef&&u.push([Ce.default.dynamicAnchors,Ce.default.dynamicAnchors]);let h=(0,D._)`${c}, ${r.object(...u)}`;return l!==D.nil?(0,D._)`${s}.call(${l}, ${h})`:(0,D._)`${s}(${h})`}A.callValidateCode=kd;var Ed=(0,D._)`new RegExp`;function Rd({gen:e,it:{opts:t}},r){let n=t.unicodeRegExp?"u":"",{regExp:i}=t.code,o=i(r,n);return e.scopeValue("pattern",{key:o.toString(),ref:o,code:(0,D._)`${i.code==="new RegExp"?Ed:(0,Sd.useFunc)(e,i)}(${r}, ${n})`})}A.usePattern=Rd;function Od(e){let{gen:t,data:r,keyword:n,it:i}=e,o=t.name("valid");if(i.allErrors){let s=t.let("valid",!0);return a(()=>t.assign(s,!1)),s}return t.var(o,!0),a(()=>t.break()),o;function a(s){let l=t.const("len",(0,D._)`${r}.length`);t.forRange("i",0,l,d=>{e.subschema({keyword:n,dataProp:d,dataPropType:tn.Type.Num},o),t.if((0,D.not)(o),s)})}}A.validateArray=Od;function Ad(e){let{gen:t,schema:r,keyword:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(l=>(0,tn.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;let a=t.let("valid",!1),s=t.name("_valid");t.block(()=>r.forEach((l,d)=>{let c=e.subschema({keyword:n,schemaProp:d,compositeRule:!0},s);t.assign(a,(0,D._)`${a} || ${s}`),e.mergeValidEvaluated(c,s)||t.if((0,D.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}A.validateUnion=Ad});var mo=b(ae=>{"use strict";Object.defineProperty(ae,"__esModule",{value:!0});ae.validateKeywordUsage=ae.validSchemaType=ae.funcKeywordCode=ae.macroKeywordCode=void 0;var G=T(),Re=fe(),jd=Y(),Nd=mt();function Dd(e,t){let{gen:r,keyword:n,schema:i,parentSchema:o,it:a}=e,s=t.macro.call(a.self,i,o,a),l=fo(r,n,s);a.opts.validateSchema!==!1&&a.self.validateSchema(s,!0);let d=r.name("valid");e.subschema({schema:s,schemaPath:G.nil,errSchemaPath:`${a.errSchemaPath}/${n}`,topSchemaRef:l,compositeRule:!0},d),e.pass(d,()=>e.error(!0))}ae.macroKeywordCode=Dd;function Id(e,t){var r;let{gen:n,keyword:i,schema:o,parentSchema:a,$data:s,it:l}=e;qd(l,t);let d=!s&&t.compile?t.compile.call(l.self,o,a,l):t.validate,c=fo(n,i,d),u=n.let("valid");e.block$data(u,h),e.ok((r=t.valid)!==null&&r!==void 0?r:u);function h(){if(t.errors===!1)m(),t.modifying&&po(e),y(()=>e.error());else{let g=t.async?p():f();t.modifying&&po(e),y(()=>Ld(e,g))}}function p(){let g=n.let("ruleErrs",null);return n.try(()=>m((0,G._)`await `),F=>n.assign(u,!1).if((0,G._)`${F} instanceof ${l.ValidationError}`,()=>n.assign(g,(0,G._)`${F}.errors`),()=>n.throw(F))),g}function f(){let g=(0,G._)`${c}.errors`;return n.assign(g,null),m(G.nil),g}function m(g=t.async?(0,G._)`await `:G.nil){let F=l.opts.passContext?Re.default.this:Re.default.self,x=!("compile"in t&&!s||t.schema===!1);n.assign(u,(0,G._)`${g}${(0,jd.callValidateCode)(e,c,F,x)}`,t.modifying)}function y(g){var F;n.if((0,G.not)((F=t.valid)!==null&&F!==void 0?F:u),g)}}ae.funcKeywordCode=Id;function po(e){let{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,G._)`${n.parentData}[${n.parentDataProperty}]`))}function Ld(e,t){let{gen:r}=e;r.if((0,G._)`Array.isArray(${t})`,()=>{r.assign(Re.default.vErrors,(0,G._)`${Re.default.vErrors} === null ? ${t} : ${Re.default.vErrors}.concat(${t})`).assign(Re.default.errors,(0,G._)`${Re.default.vErrors}.length`),(0,Nd.extendErrors)(e)},()=>e.error())}function qd({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function fo(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,G.stringify)(r)})}function Vd(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}ae.validSchemaType=Vd;function Md({schema:e,opts:t,self:r,errSchemaPath:n},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");let a=i.dependencies;if(a?.some(s=>!Object.prototype.hasOwnProperty.call(e,s)))throw new Error(`parent schema must have dependencies of ${o}: ${a.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){let l=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(l);else throw new Error(l)}}ae.validateKeywordUsage=Md});var yo=b(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.extendSubschemaMode=Fe.extendSubschemaData=Fe.getSubschema=void 0;var se=T(),ho=R();function Ud(e,{keyword:t,schemaProp:r,schema:n,schemaPath:i,errSchemaPath:o,topSchemaRef:a}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let s=e.schema[t];return r===void 0?{schema:s,schemaPath:(0,se._)`${e.schemaPath}${(0,se.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:s[r],schemaPath:(0,se._)`${e.schemaPath}${(0,se.getProperty)(t)}${(0,se.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,ho.escapeFragment)(r)}`}}if(n!==void 0){if(i===void 0||o===void 0||a===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:i,topSchemaRef:a,errSchemaPath:o}}throw new Error('either "keyword" or "schema" must be passed')}Fe.getSubschema=Ud;function zd(e,t,{dataProp:r,dataPropType:n,data:i,dataTypes:o,propertyName:a}){if(i!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:s}=t;if(r!==void 0){let{errorPath:d,dataPathArr:c,opts:u}=t,h=s.let("data",(0,se._)`${t.data}${(0,se.getProperty)(r)}`,!0);l(h),e.errorPath=(0,se.str)`${d}${(0,ho.getErrorPath)(r,n,u.jsPropertySyntax)}`,e.parentDataProperty=(0,se._)`${r}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){let d=i instanceof se.Name?i:s.let("data",i,!0);l(d),a!==void 0&&(e.propertyName=a)}o&&(e.dataTypes=o);function l(d){e.data=d,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,d]}}Fe.extendSubschemaData=zd;function Bd(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:o}){n!==void 0&&(e.compositeRule=n),i!==void 0&&(e.createErrors=i),o!==void 0&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}Fe.extendSubschemaMode=Bd});var on=b((Ph,go)=>{"use strict";go.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(o=Object.keys(t),n=o.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;i--!==0;){var a=o[i];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}});var Co=b((_h,bo)=>{"use strict";var ve=bo.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},i=r.post||function(){};Jt(t,n,i,e,"",e)};ve.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};ve.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};ve.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};ve.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Jt(e,t,r,n,i,o,a,s,l,d){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,i,o,a,s,l,d);for(var c in n){var u=n[c];if(Array.isArray(u)){if(c in ve.arrayKeywords)for(var h=0;h<u.length;h++)Jt(e,t,r,u[h],i+"/"+c+"/"+h,o,i,c,n,h)}else if(c in ve.propsKeywords){if(u&&typeof u=="object")for(var p in u)Jt(e,t,r,u[p],i+"/"+c+"/"+Gd(p),o,i,c,n,p)}else(c in ve.keywords||e.allKeys&&!(c in ve.skipKeywords))&&Jt(e,t,r,u,i+"/"+c,o,i,c,n)}r(n,i,o,a,s,l,d)}}function Gd(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var yt=b(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});H.getSchemaRefs=H.resolveUrl=H.normalizeId=H._getFullPath=H.getFullPath=H.inlineRef=void 0;var Wd=R(),Jd=on(),Hd=Co(),Kd=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Qd(e,t=!0){return typeof e=="boolean"?!0:t===!0?!an(e):t?Fo(e)<=t:!1}H.inlineRef=Qd;var Xd=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function an(e){for(let t in e){if(Xd.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(an)||typeof r=="object"&&an(r))return!0}return!1}function Fo(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!Kd.has(r)&&(typeof e[r]=="object"&&(0,Wd.eachItem)(e[r],n=>t+=Fo(n)),t===1/0))return 1/0}return t}function vo(e,t="",r){r!==!1&&(t=Ge(t));let n=e.parse(t);return $o(e,n)}H.getFullPath=vo;function $o(e,t){return e.serialize(t).split("#")[0]+"#"}H._getFullPath=$o;var Yd=/#\/?$/;function Ge(e){return e?e.replace(Yd,""):""}H.normalizeId=Ge;function Zd(e,t,r){return r=Ge(r),e.resolve(t,r)}H.resolveUrl=Zd;var eu=/^[a-z_][-a-z0-9._]*$/i;function tu(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,i=Ge(e[r]||t),o={"":i},a=vo(n,i,!1),s={},l=new Set;return Hd(e,{allKeys:!0},(u,h,p,f)=>{if(f===void 0)return;let m=a+h,y=o[f];typeof u[r]=="string"&&(y=g.call(this,u[r])),F.call(this,u.$anchor),F.call(this,u.$dynamicAnchor),o[h]=y;function g(x){let O=this.opts.uriResolver.resolve;if(x=Ge(y?O(y,x):x),l.has(x))throw c(x);l.add(x);let $=this.refs[x];return typeof $=="string"&&($=this.refs[$]),typeof $=="object"?d(u,$.schema,x):x!==Ge(m)&&(x[0]==="#"?(d(u,s[x],x),s[x]=u):this.refs[x]=m),x}function F(x){if(typeof x=="string"){if(!eu.test(x))throw new Error(`invalid anchor "${x}"`);g.call(this,`#${x}`)}}}),s;function d(u,h,p){if(h!==void 0&&!Jd(u,h))throw c(p)}function c(u){return new Error(`reference "${u}" resolves to more than one schema`)}}H.getSchemaRefs=tu});var Ct=b($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});$e.getData=$e.KeywordCxt=$e.validateFunctionCode=void 0;var Po=to(),So=ht(),ln=Xr(),Ht=ht(),ru=lo(),bt=mo(),sn=yo(),C=T(),v=fe(),nu=yt(),me=R(),gt=mt();function iu(e){if(Eo(e)&&(Ro(e),ko(e))){su(e);return}_o(e,()=>(0,Po.topBoolOrEmptySchema)(e))}$e.validateFunctionCode=iu;function _o({gen:e,validateName:t,schema:r,schemaEnv:n,opts:i},o){i.code.es5?e.func(t,(0,C._)`${v.default.data}, ${v.default.valCxt}`,n.$async,()=>{e.code((0,C._)`"use strict"; ${wo(r,i)}`),au(e,i),e.code(o)}):e.func(t,(0,C._)`${v.default.data}, ${ou(i)}`,n.$async,()=>e.code(wo(r,i)).code(o))}function ou(e){return(0,C._)`{${v.default.instancePath}="", ${v.default.parentData}, ${v.default.parentDataProperty}, ${v.default.rootData}=${v.default.data}${e.dynamicRef?(0,C._)`, ${v.default.dynamicAnchors}={}`:C.nil}}={}`}function au(e,t){e.if(v.default.valCxt,()=>{e.var(v.default.instancePath,(0,C._)`${v.default.valCxt}.${v.default.instancePath}`),e.var(v.default.parentData,(0,C._)`${v.default.valCxt}.${v.default.parentData}`),e.var(v.default.parentDataProperty,(0,C._)`${v.default.valCxt}.${v.default.parentDataProperty}`),e.var(v.default.rootData,(0,C._)`${v.default.valCxt}.${v.default.rootData}`),t.dynamicRef&&e.var(v.default.dynamicAnchors,(0,C._)`${v.default.valCxt}.${v.default.dynamicAnchors}`)},()=>{e.var(v.default.instancePath,(0,C._)`""`),e.var(v.default.parentData,(0,C._)`undefined`),e.var(v.default.parentDataProperty,(0,C._)`undefined`),e.var(v.default.rootData,v.default.data),t.dynamicRef&&e.var(v.default.dynamicAnchors,(0,C._)`{}`)})}function su(e){let{schema:t,opts:r,gen:n}=e;_o(e,()=>{r.$comment&&t.$comment&&Ao(e),pu(e),n.let(v.default.vErrors,null),n.let(v.default.errors,0),r.unevaluated&&lu(e),Oo(e),hu(e)})}function lu(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,C._)`${r}.evaluated`),t.if((0,C._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,C._)`${e.evaluated}.props`,(0,C._)`undefined`)),t.if((0,C._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,C._)`${e.evaluated}.items`,(0,C._)`undefined`))}function wo(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,C._)`/*# sourceURL=${r} */`:C.nil}function du(e,t){if(Eo(e)&&(Ro(e),ko(e))){uu(e,t);return}(0,Po.boolOrEmptySchema)(e,t)}function ko({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function Eo(e){return typeof e.schema!="boolean"}function uu(e,t){let{schema:r,gen:n,opts:i}=e;i.$comment&&r.$comment&&Ao(e),fu(e),mu(e);let o=n.const("_errs",v.default.errors);Oo(e,o),n.var(t,(0,C._)`${o} === ${v.default.errors}`)}function Ro(e){(0,me.checkUnknownRules)(e),cu(e)}function Oo(e,t){if(e.opts.jtd)return xo(e,[],!1,t);let r=(0,So.getSchemaTypes)(e.schema),n=(0,So.coerceAndCheckDataType)(e,r);xo(e,r,!n,t)}function cu(e){let{schema:t,errSchemaPath:r,opts:n,self:i}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,me.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function pu(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,me.checkStrictMode)(e,"default is ignored in the schema root")}function fu(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,nu.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function mu(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Ao({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:i}){let o=r.$comment;if(i.$comment===!0)e.code((0,C._)`${v.default.self}.logger.log(${o})`);else if(typeof i.$comment=="function"){let a=(0,C.str)`${n}/$comment`,s=e.scopeValue("root",{ref:t.root});e.code((0,C._)`${v.default.self}.opts.$comment(${o}, ${a}, ${s}.schema)`)}}function hu(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:i,opts:o}=e;r.$async?t.if((0,C._)`${v.default.errors} === 0`,()=>t.return(v.default.data),()=>t.throw((0,C._)`new ${i}(${v.default.vErrors})`)):(t.assign((0,C._)`${n}.errors`,v.default.vErrors),o.unevaluated&&yu(e),t.return((0,C._)`${v.default.errors} === 0`))}function yu({gen:e,evaluated:t,props:r,items:n}){r instanceof C.Name&&e.assign((0,C._)`${t}.props`,r),n instanceof C.Name&&e.assign((0,C._)`${t}.items`,n)}function xo(e,t,r,n){let{gen:i,schema:o,data:a,allErrors:s,opts:l,self:d}=e,{RULES:c}=d;if(o.$ref&&(l.ignoreKeywordsWithRef||!(0,me.schemaHasRulesButRef)(o,c))){i.block(()=>No(e,"$ref",c.all.$ref.definition));return}l.jtd||gu(e,t),i.block(()=>{for(let h of c.rules)u(h);u(c.post)});function u(h){(0,ln.shouldUseGroup)(o,h)&&(h.type?(i.if((0,Ht.checkDataType)(h.type,a,l.strictNumbers)),To(e,h),t.length===1&&t[0]===h.type&&r&&(i.else(),(0,Ht.reportTypeError)(e)),i.endIf()):To(e,h),s||i.if((0,C._)`${v.default.errors} === ${n||0}`))}}function To(e,t){let{gen:r,schema:n,opts:{useDefaults:i}}=e;i&&(0,ru.assignDefaults)(e,t.type),r.block(()=>{for(let o of t.rules)(0,ln.shouldUseRule)(n,o)&&No(e,o.keyword,o.definition,t.type)})}function gu(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(bu(e,t),e.opts.allowUnionTypes||Cu(e,t),Fu(e,e.dataTypes))}function bu(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{jo(e.dataTypes,r)||dn(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),$u(e,t)}}function Cu(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&dn(e,"use allowUnionTypes to allow union type keyword")}function Fu(e,t){let r=e.self.RULES.all;for(let n in r){let i=r[n];if(typeof i=="object"&&(0,ln.shouldUseRule)(e.schema,i)){let{type:o}=i.definition;o.length&&!o.some(a=>vu(t,a))&&dn(e,`missing type "${o.join(",")}" for keyword "${n}"`)}}}function vu(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function jo(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function $u(e,t){let r=[];for(let n of e.dataTypes)jo(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function dn(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,me.checkStrictMode)(e,t,e.opts.strictTypes)}var Kt=class{constructor(t,r,n){if((0,bt.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,me.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Do(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,bt.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",v.default.errors))}result(t,r,n){this.failResult((0,C.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,C.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,C._)`${r} !== undefined && (${(0,C.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?gt.reportExtraError:gt.reportError)(this,this.def.error,r)}$dataError(){(0,gt.reportError)(this,this.def.$dataError||gt.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,gt.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=C.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=C.nil,r=C.nil){if(!this.$data)return;let{gen:n,schemaCode:i,schemaType:o,def:a}=this;n.if((0,C.or)((0,C._)`${i} === undefined`,r)),t!==C.nil&&n.assign(t,!0),(o.length||a.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==C.nil&&n.assign(t,!1)),n.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:n,def:i,it:o}=this;return(0,C.or)(a(),s());function a(){if(n.length){if(!(r instanceof C.Name))throw new Error("ajv implementation error");let l=Array.isArray(n)?n:[n];return(0,C._)`${(0,Ht.checkDataTypes)(l,r,o.opts.strictNumbers,Ht.DataType.Wrong)}`}return C.nil}function s(){if(i.validateSchema){let l=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,C._)`!${l}(${r})`}return C.nil}}subschema(t,r){let n=(0,sn.getSubschema)(this.it,t);(0,sn.extendSubschemaData)(n,this.it,t),(0,sn.extendSubschemaMode)(n,t);let i={...this.it,...n,items:void 0,props:void 0};return du(i,r),i}mergeEvaluated(t,r){let{it:n,gen:i}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=me.mergeEvaluated.props(i,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=me.mergeEvaluated.items(i,t.items,n.items,r)))}mergeValidEvaluated(t,r){let{it:n,gen:i}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return i.if(r,()=>this.mergeEvaluated(t,C.Name)),!0}};$e.KeywordCxt=Kt;function No(e,t,r,n){let i=new Kt(e,r,t);"code"in r?r.code(i,n):i.$data&&r.validate?(0,bt.funcKeywordCode)(i,r):"macro"in r?(0,bt.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,bt.funcKeywordCode)(i,r)}var Su=/^\/(?:[^~]|~0|~1)*$/,wu=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Do(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let i,o;if(e==="")return v.default.rootData;if(e[0]==="/"){if(!Su.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=v.default.rootData}else{let d=wu.exec(e);if(!d)throw new Error(`Invalid JSON-pointer: ${e}`);let c=+d[1];if(i=d[2],i==="#"){if(c>=t)throw new Error(l("property/index",c));return n[t-c]}if(c>t)throw new Error(l("data",c));if(o=r[t-c],!i)return o}let a=o,s=i.split("/");for(let d of s)d&&(o=(0,C._)`${o}${(0,C.getProperty)((0,me.unescapeJsonPointer)(d))}`,a=(0,C._)`${a} && ${o}`);return a;function l(d,c){return`Cannot access ${d} ${c} levels up, current level is ${t}`}}$e.getData=Do});var Qt=b(cn=>{"use strict";Object.defineProperty(cn,"__esModule",{value:!0});var un=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};cn.default=un});var Ft=b(mn=>{"use strict";Object.defineProperty(mn,"__esModule",{value:!0});var pn=yt(),fn=class extends Error{constructor(t,r,n,i){super(i||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,pn.resolveUrl)(t,r,n),this.missingSchema=(0,pn.normalizeId)((0,pn.getFullPath)(t,this.missingRef))}};mn.default=fn});var Yt=b(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.resolveSchema=Z.getCompilingSchema=Z.resolveRef=Z.compileSchema=Z.SchemaEnv=void 0;var re=T(),xu=Qt(),Oe=fe(),ne=yt(),Io=R(),Tu=Ct(),We=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,ne.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}};Z.SchemaEnv=We;function yn(e){let t=Lo.call(this,e);if(t)return t;let r=(0,ne.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:i}=this.opts.code,{ownProperties:o}=this.opts,a=new re.CodeGen(this.scope,{es5:n,lines:i,ownProperties:o}),s;e.$async&&(s=a.scopeValue("Error",{ref:xu.default,code:(0,re._)`require("ajv/dist/runtime/validation_error").default`}));let l=a.scopeName("validate");e.validateName=l;let d={gen:a,allErrors:this.opts.allErrors,data:Oe.default.data,parentData:Oe.default.parentData,parentDataProperty:Oe.default.parentDataProperty,dataNames:[Oe.default.data],dataPathArr:[re.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:a.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,re.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:s,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:re.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,re._)`""`,opts:this.opts,self:this},c;try{this._compilations.add(e),(0,Tu.validateFunctionCode)(d),a.optimize(this.opts.code.optimize);let u=a.toString();c=`${a.scopeRefs(Oe.default.scope)}return ${u}`,this.opts.code.process&&(c=this.opts.code.process(c,e));let p=new Function(`${Oe.default.self}`,`${Oe.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:p}),p.errors=null,p.schema=e.schema,p.schemaEnv=e,e.$async&&(p.$async=!0),this.opts.code.source===!0&&(p.source={validateName:l,validateCode:u,scopeValues:a._values}),this.opts.unevaluated){let{props:f,items:m}=d;p.evaluated={props:f instanceof re.Name?void 0:f,items:m instanceof re.Name?void 0:m,dynamicProps:f instanceof re.Name,dynamicItems:m instanceof re.Name},p.source&&(p.source.evaluated=(0,re.stringify)(p.evaluated))}return e.validate=p,e}catch(u){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),u}finally{this._compilations.delete(e)}}Z.compileSchema=yn;function Pu(e,t,r){var n;r=(0,ne.resolveUrl)(this.opts.uriResolver,t,r);let i=e.refs[r];if(i)return i;let o=Eu.call(this,e,r);if(o===void 0){let a=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:s}=this.opts;a&&(o=new We({schema:a,schemaId:s,root:e,baseId:t}))}if(o!==void 0)return e.refs[r]=_u.call(this,o)}Z.resolveRef=Pu;function _u(e){return(0,ne.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:yn.call(this,e)}function Lo(e){for(let t of this._compilations)if(ku(t,e))return t}Z.getCompilingSchema=Lo;function ku(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Eu(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||Xt.call(this,e,t)}function Xt(e,t){let r=this.opts.uriResolver.parse(t),n=(0,ne._getFullPath)(this.opts.uriResolver,r),i=(0,ne.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===i)return hn.call(this,r,e);let o=(0,ne.normalizeId)(n),a=this.refs[o]||this.schemas[o];if(typeof a=="string"){let s=Xt.call(this,e,a);return typeof s?.schema!="object"?void 0:hn.call(this,r,s)}if(typeof a?.schema=="object"){if(a.validate||yn.call(this,a),o===(0,ne.normalizeId)(t)){let{schema:s}=a,{schemaId:l}=this.opts,d=s[l];return d&&(i=(0,ne.resolveUrl)(this.opts.uriResolver,i,d)),new We({schema:s,schemaId:l,root:e,baseId:i})}return hn.call(this,r,a)}}Z.resolveSchema=Xt;var Ru=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function hn(e,{baseId:t,schema:r,root:n}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(let s of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let l=r[(0,Io.unescapeFragment)(s)];if(l===void 0)return;r=l;let d=typeof r=="object"&&r[this.opts.schemaId];!Ru.has(s)&&d&&(t=(0,ne.resolveUrl)(this.opts.uriResolver,t,d))}let o;if(typeof r!="boolean"&&r.$ref&&!(0,Io.schemaHasRulesButRef)(r,this.RULES)){let s=(0,ne.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=Xt.call(this,n,s)}let{schemaId:a}=this.opts;if(o=o||new We({schema:r,schemaId:a,root:n,baseId:t}),o.schema!==o.root.schema)return o}});var qo=b((jh,Ou)=>{Ou.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var Mo=b((Nh,Vo)=>{"use strict";var Au={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};Vo.exports={HEX:Au}});var Ko=b((Dh,Ho)=>{"use strict";var{HEX:ju}=Mo();function Go(e){if(Jo(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[r]=t;return r?{host:Du(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function gn(e,t=!1){let r="",n=!0;for(let i of e){if(ju[i]===void 0)return;i!=="0"&&n===!0&&(n=!1),n||(r+=i)}return t&&r.length===0&&(r="0"),r}function Nu(e){let t=0,r={error:!1,address:"",zone:""},n=[],i=[],o=!1,a=!1,s=!1;function l(){if(i.length){if(o===!1){let d=gn(i);if(d!==void 0)n.push(d);else return r.error=!0,!1}i.length=0}return!0}for(let d=0;d<e.length;d++){let c=e[d];if(!(c==="["||c==="]"))if(c===":"){if(a===!0&&(s=!0),!l())break;if(t++,n.push(":"),t>7){r.error=!0;break}d-1>=0&&e[d-1]===":"&&(a=!0);continue}else if(c==="%"){if(!l())break;o=!0}else{i.push(c);continue}}return i.length&&(o?r.zone=i.join(""):s?n.push(i.join("")):n.push(gn(i))),r.address=n.join(""),r}function Wo(e,t={}){if(Jo(e,":")<2)return{host:e,isIPV6:!1};let r=Nu(e);if(r.error)return{host:e,isIPV6:!1};{let n=r.address,i=r.address;return r.zone&&(n+="%"+r.zone,i+="%25"+r.zone),{host:n,escapedHost:i,isIPV6:!0}}}function Du(e,t){let r="",n=!0,i=e.length;for(let o=0;o<i;o++){let a=e[o];a==="0"&&n?(o+1<=i&&e[o+1]===t||o+1===i)&&(r+=a,n=!1):(a===t?n=!0:n=!1,r+=a)}return r}function Jo(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}var Uo=/^\.\.?\//u,zo=/^\/\.(?:\/|$)/u,Bo=/^\/\.\.(?:\/|$)/u,Iu=/^\/?(?:.|\n)*?(?=\/|$)/u;function Lu(e){let t=[];for(;e.length;)if(e.match(Uo))e=e.replace(Uo,"");else if(e.match(zo))e=e.replace(zo,"/");else if(e.match(Bo))e=e.replace(Bo,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(Iu);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function qu(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function Vu(e,t){let r=[];if(e.userinfo!==void 0&&(r.push(e.userinfo),r.push("@")),e.host!==void 0){let n=unescape(e.host),i=Go(n);if(i.isIPV4)n=i.host;else{let o=Wo(i.host,{isIPV4:!1});o.isIPV6===!0?n=`[${o.escapedHost}]`:n=e.host}r.push(n)}return(typeof e.port=="number"||typeof e.port=="string")&&(r.push(":"),r.push(String(e.port))),r.length?r.join(""):void 0}Ho.exports={recomposeAuthority:Vu,normalizeComponentEncoding:qu,removeDotSegments:Lu,normalizeIPv4:Go,normalizeIPv6:Wo,stringArrayToHexStripped:gn}});var ta=b((Ih,ea)=>{"use strict";var Mu=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,Uu=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function Qo(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function Xo(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function Yo(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function zu(e){return e.secure=Qo(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function Bu(e){if((e.port===(Qo(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function Gu(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(Uu);if(r){let n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let i=`${n}:${t.nid||e.nid}`,o=bn[i];e.path=void 0,o&&(e=o.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function Wu(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),i=`${r}:${t.nid||n}`,o=bn[i];o&&(e=o.serialize(e,t));let a=e,s=e.nss;return a.path=`${n||t.nid}:${s}`,t.skipEscape=!0,a}function Ju(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!Mu.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function Hu(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var Zo={scheme:"http",domainHost:!0,parse:Xo,serialize:Yo},Ku={scheme:"https",domainHost:Zo.domainHost,parse:Xo,serialize:Yo},Zt={scheme:"ws",domainHost:!0,parse:zu,serialize:Bu},Qu={scheme:"wss",domainHost:Zt.domainHost,parse:Zt.parse,serialize:Zt.serialize},Xu={scheme:"urn",parse:Gu,serialize:Wu,skipNormalize:!0},Yu={scheme:"urn:uuid",parse:Ju,serialize:Hu,skipNormalize:!0},bn={http:Zo,https:Ku,ws:Zt,wss:Qu,urn:Xu,"urn:uuid":Yu};ea.exports=bn});var na=b((Lh,tr)=>{"use strict";var{normalizeIPv6:Zu,normalizeIPv4:ec,removeDotSegments:vt,recomposeAuthority:tc,normalizeComponentEncoding:er}=Ko(),Cn=ta();function rc(e,t){return typeof e=="string"?e=le(he(e,t),t):typeof e=="object"&&(e=he(le(e,t),t)),e}function nc(e,t,r){let n=Object.assign({scheme:"null"},r),i=ra(he(e,n),he(t,n),n,!0);return le(i,{...n,skipEscape:!0})}function ra(e,t,r,n){let i={};return n||(e=he(le(e,r),r),t=he(le(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(i.scheme=t.scheme,i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=vt(t.path||""),i.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(i.userinfo=t.userinfo,i.host=t.host,i.port=t.port,i.path=vt(t.path||""),i.query=t.query):(t.path?(t.path.charAt(0)==="/"?i.path=vt(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?i.path="/"+t.path:e.path?i.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:i.path=t.path,i.path=vt(i.path)),i.query=t.query):(i.path=e.path,t.query!==void 0?i.query=t.query:i.query=e.query),i.userinfo=e.userinfo,i.host=e.host,i.port=e.port),i.scheme=e.scheme),i.fragment=t.fragment,i}function ic(e,t,r){return typeof e=="string"?(e=unescape(e),e=le(er(he(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=le(er(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=le(er(he(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=le(er(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function le(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),i=[],o=Cn[(n.scheme||r.scheme||"").toLowerCase()];o&&o.serialize&&o.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&i.push(r.scheme,":");let a=tc(r,n);if(a!==void 0&&(n.reference!=="suffix"&&i.push("//"),i.push(a),r.path&&r.path.charAt(0)!=="/"&&i.push("/")),r.path!==void 0){let s=r.path;!n.absolutePath&&(!o||!o.absolutePath)&&(s=vt(s)),a===void 0&&(s=s.replace(/^\/\//u,"/%2F")),i.push(s)}return r.query!==void 0&&i.push("?",r.query),r.fragment!==void 0&&i.push("#",r.fragment),i.join("")}var oc=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function ac(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||oc[t])return!0;return!1}var sc=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function he(e,t){let r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},i=e.indexOf("%")!==-1,o=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let a=e.match(sc);if(a){if(n.scheme=a[1],n.userinfo=a[3],n.host=a[4],n.port=parseInt(a[5],10),n.path=a[6]||"",n.query=a[7],n.fragment=a[8],isNaN(n.port)&&(n.port=a[5]),n.host){let l=ec(n.host);if(l.isIPV4===!1){let d=Zu(l.host,{isIPV4:!1});n.host=d.host.toLowerCase(),o=d.isIPV6}else n.host=l.host,o=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&!n.path&&n.query===void 0?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let s=Cn[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!s||!s.unicodeSupport)&&n.host&&(r.domainHost||s&&s.domainHost)&&o===!1&&ac(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(l){n.error=n.error||"Host's domain name can not be converted to ASCII: "+l}(!s||s&&!s.skipNormalize)&&(i&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),i&&n.host!==void 0&&(n.host=unescape(n.host)),n.path!==void 0&&n.path.length&&(n.path=escape(unescape(n.path))),n.fragment!==void 0&&n.fragment.length&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),s&&s.parse&&s.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var Fn={SCHEMES:Cn,normalize:rc,resolve:nc,resolveComponents:ra,equal:ic,serialize:le,parse:he};tr.exports=Fn;tr.exports.default=Fn;tr.exports.fastUri=Fn});var oa=b(vn=>{"use strict";Object.defineProperty(vn,"__esModule",{value:!0});var ia=na();ia.code='require("ajv/dist/runtime/uri").default';vn.default=ia});var fa=b(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});q.CodeGen=q.Name=q.nil=q.stringify=q.str=q._=q.KeywordCxt=void 0;var lc=Ct();Object.defineProperty(q,"KeywordCxt",{enumerable:!0,get:function(){return lc.KeywordCxt}});var Je=T();Object.defineProperty(q,"_",{enumerable:!0,get:function(){return Je._}});Object.defineProperty(q,"str",{enumerable:!0,get:function(){return Je.str}});Object.defineProperty(q,"stringify",{enumerable:!0,get:function(){return Je.stringify}});Object.defineProperty(q,"nil",{enumerable:!0,get:function(){return Je.nil}});Object.defineProperty(q,"Name",{enumerable:!0,get:function(){return Je.Name}});Object.defineProperty(q,"CodeGen",{enumerable:!0,get:function(){return Je.CodeGen}});var dc=Qt(),ua=Ft(),uc=Qr(),$t=Yt(),cc=T(),St=yt(),rr=ht(),Sn=R(),aa=qo(),pc=oa(),ca=(e,t)=>new RegExp(e,t);ca.code="new RegExp";var fc=["removeAdditional","useDefaults","coerceTypes"],mc=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),hc={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},yc={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},sa=200;function gc(e){var t,r,n,i,o,a,s,l,d,c,u,h,p,f,m,y,g,F,x,O,$,oe,ue,Sr,wr;let nt=e.strict,xr=(t=e.code)===null||t===void 0?void 0:t.optimize,Ni=xr===!0||xr===void 0?1:xr||0,Di=(n=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:ca,zs=(i=e.uriResolver)!==null&&i!==void 0?i:pc.default;return{strictSchema:(a=(o=e.strictSchema)!==null&&o!==void 0?o:nt)!==null&&a!==void 0?a:!0,strictNumbers:(l=(s=e.strictNumbers)!==null&&s!==void 0?s:nt)!==null&&l!==void 0?l:!0,strictTypes:(c=(d=e.strictTypes)!==null&&d!==void 0?d:nt)!==null&&c!==void 0?c:"log",strictTuples:(h=(u=e.strictTuples)!==null&&u!==void 0?u:nt)!==null&&h!==void 0?h:"log",strictRequired:(f=(p=e.strictRequired)!==null&&p!==void 0?p:nt)!==null&&f!==void 0?f:!1,code:e.code?{...e.code,optimize:Ni,regExp:Di}:{optimize:Ni,regExp:Di},loopRequired:(m=e.loopRequired)!==null&&m!==void 0?m:sa,loopEnum:(y=e.loopEnum)!==null&&y!==void 0?y:sa,meta:(g=e.meta)!==null&&g!==void 0?g:!0,messages:(F=e.messages)!==null&&F!==void 0?F:!0,inlineRefs:(x=e.inlineRefs)!==null&&x!==void 0?x:!0,schemaId:(O=e.schemaId)!==null&&O!==void 0?O:"$id",addUsedSchema:($=e.addUsedSchema)!==null&&$!==void 0?$:!0,validateSchema:(oe=e.validateSchema)!==null&&oe!==void 0?oe:!0,validateFormats:(ue=e.validateFormats)!==null&&ue!==void 0?ue:!0,unicodeRegExp:(Sr=e.unicodeRegExp)!==null&&Sr!==void 0?Sr:!0,int32range:(wr=e.int32range)!==null&&wr!==void 0?wr:!0,uriResolver:zs}}var wt=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...gc(t)};let{es5:r,lines:n}=this.opts.code;this.scope=new cc.ValueScope({scope:{},prefixes:mc,es5:r,lines:n}),this.logger=Sc(t.logger);let i=t.validateFormats;t.validateFormats=!1,this.RULES=(0,uc.getRules)(),la.call(this,hc,t,"NOT SUPPORTED"),la.call(this,yc,t,"DEPRECATED","warn"),this._metaOpts=vc.call(this),t.formats&&Cc.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&Fc.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),bc.call(this),t.validateFormats=i}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:n}=this.opts,i=aa;n==="id"&&(i={...aa},i.id=i.$id,delete i.$id),r&&t&&this.addMetaSchema(i,i[n],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let n;if(typeof t=="string"){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);let i=n(r);return"$async"in n||(this.errors=n.errors),i}compile(t,r){let n=this._addSchema(t,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return i.call(this,t,r);async function i(c,u){await o.call(this,c.$schema);let h=this._addSchema(c,u);return h.validate||a.call(this,h)}async function o(c){c&&!this.getSchema(c)&&await i.call(this,{$ref:c},!0)}async function a(c){try{return this._compileSchemaEnv(c)}catch(u){if(!(u instanceof ua.default))throw u;return s.call(this,u),await l.call(this,u.missingSchema),a.call(this,c)}}function s({missingSchema:c,missingRef:u}){if(this.refs[c])throw new Error(`AnySchema ${c} is loaded but ${u} cannot be resolved`)}async function l(c){let u=await d.call(this,c);this.refs[c]||await o.call(this,u.$schema),this.refs[c]||this.addSchema(u,c,r)}async function d(c){let u=this._loading[c];if(u)return u;try{return await(this._loading[c]=n(c))}finally{delete this._loading[c]}}}addSchema(t,r,n,i=this.opts.validateSchema){if(Array.isArray(t)){for(let a of t)this.addSchema(a,void 0,n,i);return this}let o;if(typeof t=="object"){let{schemaId:a}=this.opts;if(o=t[a],o!==void 0&&typeof o!="string")throw new Error(`schema ${a} must be string`)}return r=(0,St.normalizeId)(r||o),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,i,!0),this}addMetaSchema(t,r,n=this.opts.validateSchema){return this.addSchema(t,r,!0,n),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let n;if(n=t.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let i=this.validate(n,t);if(!i&&r){let o="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(o);else throw new Error(o)}return i}getSchema(t){let r;for(;typeof(r=da.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:n}=this.opts,i=new $t.SchemaEnv({schema:{},schemaId:n});if(r=$t.resolveSchema.call(this,i,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=da.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let n=t[this.opts.schemaId];return n&&(n=(0,St.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let n;if(typeof t=="string")n=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof t=="object"&&r===void 0){if(r=t,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(xc.call(this,n,r),!r)return(0,Sn.eachItem)(n,o=>$n.call(this,o)),this;Pc.call(this,r);let i={...r,type:(0,rr.getJSONTypes)(r.type),schemaType:(0,rr.getJSONTypes)(r.schemaType)};return(0,Sn.eachItem)(n,i.type.length===0?o=>$n.call(this,o,i):o=>i.type.forEach(a=>$n.call(this,o,i,a))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let n of r.rules){let i=n.rules.findIndex(o=>o.keyword===t);i>=0&&n.rules.splice(i,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!t||t.length===0?"No errors":t.map(i=>`${n}${i.instancePath} ${i.message}`).reduce((i,o)=>i+r+o)}$dataMetaSchema(t,r){let n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let i of r){let o=i.split("/").slice(1),a=t;for(let s of o)a=a[s];for(let s in n){let l=n[s];if(typeof l!="object")continue;let{$data:d}=l.definition,c=a[s];d&&c&&(a[s]=pa(c))}}return t}_removeAllSchemas(t,r){for(let n in t){let i=t[n];(!r||r.test(n))&&(typeof i=="string"?delete t[n]:i&&!i.meta&&(this._cache.delete(i.schema),delete t[n]))}}_addSchema(t,r,n,i=this.opts.validateSchema,o=this.opts.addUsedSchema){let a,{schemaId:s}=this.opts;if(typeof t=="object")a=t[s];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let l=this._cache.get(t);if(l!==void 0)return l;n=(0,St.normalizeId)(a||n);let d=St.getSchemaRefs.call(this,t,n);return l=new $t.SchemaEnv({schema:t,schemaId:s,meta:r,baseId:n,localRefs:d}),this._cache.set(l.schema,l),o&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=l),i&&this.validateSchema(t,!0),l}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):$t.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{$t.compileSchema.call(this,t)}finally{this.opts=r}}};wt.ValidationError=dc.default;wt.MissingRefError=ua.default;q.default=wt;function la(e,t,r,n="error"){for(let i in e){let o=i;o in t&&this.logger[n](`${r}: option ${i}. ${e[o]}`)}}function da(e){return e=(0,St.normalizeId)(e),this.schemas[e]||this.refs[e]}function bc(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function Cc(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function Fc(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function vc(){let e={...this.opts};for(let t of fc)delete e[t];return e}var $c={log(){},warn(){},error(){}};function Sc(e){if(e===!1)return $c;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var wc=/^[a-z_$][a-z0-9_$:-]*$/i;function xc(e,t){let{RULES:r}=this;if((0,Sn.eachItem)(e,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!wc.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function $n(e,t,r){var n;let i=t?.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:o}=this,a=i?o.post:o.rules.find(({type:l})=>l===r);if(a||(a={type:r,rules:[]},o.rules.push(a)),o.keywords[e]=!0,!t)return;let s={keyword:e,definition:{...t,type:(0,rr.getJSONTypes)(t.type),schemaType:(0,rr.getJSONTypes)(t.schemaType)}};t.before?Tc.call(this,a,s,t.before):a.rules.push(s),o.all[e]=s,(n=t.implements)===null||n===void 0||n.forEach(l=>this.addKeyword(l))}function Tc(e,t,r){let n=e.rules.findIndex(i=>i.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function Pc(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=pa(t)),e.validateSchema=this.compile(t,!0))}var _c={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function pa(e){return{anyOf:[e,_c]}}});var ma=b(wn=>{"use strict";Object.defineProperty(wn,"__esModule",{value:!0});var kc={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};wn.default=kc});var ba=b(Ae=>{"use strict";Object.defineProperty(Ae,"__esModule",{value:!0});Ae.callRef=Ae.getValidate=void 0;var Ec=Ft(),ha=Y(),K=T(),He=fe(),ya=Yt(),nr=R(),Rc={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:n}=e,{baseId:i,schemaEnv:o,validateName:a,opts:s,self:l}=n,{root:d}=o;if((r==="#"||r==="#/")&&i===d.baseId)return u();let c=ya.resolveRef.call(l,d,i,r);if(c===void 0)throw new Ec.default(n.opts.uriResolver,i,r);if(c instanceof ya.SchemaEnv)return h(c);return p(c);function u(){if(o===d)return ir(e,a,o,o.$async);let f=t.scopeValue("root",{ref:d});return ir(e,(0,K._)`${f}.validate`,d,d.$async)}function h(f){let m=ga(e,f);ir(e,m,f,f.$async)}function p(f){let m=t.scopeValue("schema",s.code.source===!0?{ref:f,code:(0,K.stringify)(f)}:{ref:f}),y=t.name("valid"),g=e.subschema({schema:f,dataTypes:[],schemaPath:K.nil,topSchemaRef:m,errSchemaPath:r},y);e.mergeEvaluated(g),e.ok(y)}}};function ga(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,K._)`${r.scopeValue("wrapper",{ref:t})}.validate`}Ae.getValidate=ga;function ir(e,t,r,n){let{gen:i,it:o}=e,{allErrors:a,schemaEnv:s,opts:l}=o,d=l.passContext?He.default.this:K.nil;n?c():u();function c(){if(!s.$async)throw new Error("async schema referenced by sync schema");let f=i.let("valid");i.try(()=>{i.code((0,K._)`await ${(0,ha.callValidateCode)(e,t,d)}`),p(t),a||i.assign(f,!0)},m=>{i.if((0,K._)`!(${m} instanceof ${o.ValidationError})`,()=>i.throw(m)),h(m),a||i.assign(f,!1)}),e.ok(f)}function u(){e.result((0,ha.callValidateCode)(e,t,d),()=>p(t),()=>h(t))}function h(f){let m=(0,K._)`${f}.errors`;i.assign(He.default.vErrors,(0,K._)`${He.default.vErrors} === null ? ${m} : ${He.default.vErrors}.concat(${m})`),i.assign(He.default.errors,(0,K._)`${He.default.vErrors}.length`)}function p(f){var m;if(!o.opts.unevaluated)return;let y=(m=r?.validate)===null||m===void 0?void 0:m.evaluated;if(o.props!==!0)if(y&&!y.dynamicProps)y.props!==void 0&&(o.props=nr.mergeEvaluated.props(i,y.props,o.props));else{let g=i.var("props",(0,K._)`${f}.evaluated.props`);o.props=nr.mergeEvaluated.props(i,g,o.props,K.Name)}if(o.items!==!0)if(y&&!y.dynamicItems)y.items!==void 0&&(o.items=nr.mergeEvaluated.items(i,y.items,o.items));else{let g=i.var("items",(0,K._)`${f}.evaluated.items`);o.items=nr.mergeEvaluated.items(i,g,o.items,K.Name)}}}Ae.callRef=ir;Ae.default=Rc});var Ca=b(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});var Oc=ma(),Ac=ba(),jc=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",Oc.default,Ac.default];xn.default=jc});var Fa=b(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});var or=T(),Se=or.operators,ar={maximum:{okStr:"<=",ok:Se.LTE,fail:Se.GT},minimum:{okStr:">=",ok:Se.GTE,fail:Se.LT},exclusiveMaximum:{okStr:"<",ok:Se.LT,fail:Se.GTE},exclusiveMinimum:{okStr:">",ok:Se.GT,fail:Se.LTE}},Nc={message:({keyword:e,schemaCode:t})=>(0,or.str)`must be ${ar[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,or._)`{comparison: ${ar[e].okStr}, limit: ${t}}`},Dc={keyword:Object.keys(ar),type:"number",schemaType:"number",$data:!0,error:Nc,code(e){let{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,or._)`${r} ${ar[t].fail} ${n} || isNaN(${r})`)}};Tn.default=Dc});var va=b(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});var xt=T(),Ic={message:({schemaCode:e})=>(0,xt.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,xt._)`{multipleOf: ${e}}`},Lc={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Ic,code(e){let{gen:t,data:r,schemaCode:n,it:i}=e,o=i.opts.multipleOfPrecision,a=t.let("res"),s=o?(0,xt._)`Math.abs(Math.round(${a}) - ${a}) > 1e-${o}`:(0,xt._)`${a} !== parseInt(${a})`;e.fail$data((0,xt._)`(${n} === 0 || (${a} = ${r}/${n}, ${s}))`)}};Pn.default=Lc});var Sa=b(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});function $a(e){let t=e.length,r=0,n=0,i;for(;n<t;)r++,i=e.charCodeAt(n++),i>=55296&&i<=56319&&n<t&&(i=e.charCodeAt(n),(i&64512)===56320&&n++);return r}_n.default=$a;$a.code='require("ajv/dist/runtime/ucs2length").default'});var wa=b(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});var je=T(),qc=R(),Vc=Sa(),Mc={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,je.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,je._)`{limit: ${e}}`},Uc={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Mc,code(e){let{keyword:t,data:r,schemaCode:n,it:i}=e,o=t==="maxLength"?je.operators.GT:je.operators.LT,a=i.opts.unicode===!1?(0,je._)`${r}.length`:(0,je._)`${(0,qc.useFunc)(e.gen,Vc.default)}(${r})`;e.fail$data((0,je._)`${a} ${o} ${n}`)}};kn.default=Uc});var xa=b(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});var zc=Y(),sr=T(),Bc={message:({schemaCode:e})=>(0,sr.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,sr._)`{pattern: ${e}}`},Gc={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Bc,code(e){let{data:t,$data:r,schema:n,schemaCode:i,it:o}=e,a=o.opts.unicodeRegExp?"u":"",s=r?(0,sr._)`(new RegExp(${i}, ${a}))`:(0,zc.usePattern)(e,n);e.fail$data((0,sr._)`!${s}.test(${t})`)}};En.default=Gc});var Ta=b(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});var Tt=T(),Wc={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,Tt.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,Tt._)`{limit: ${e}}`},Jc={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Wc,code(e){let{keyword:t,data:r,schemaCode:n}=e,i=t==="maxProperties"?Tt.operators.GT:Tt.operators.LT;e.fail$data((0,Tt._)`Object.keys(${r}).length ${i} ${n}`)}};Rn.default=Jc});var Pa=b(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});var Pt=Y(),_t=T(),Hc=R(),Kc={message:({params:{missingProperty:e}})=>(0,_t.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,_t._)`{missingProperty: ${e}}`},Qc={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Kc,code(e){let{gen:t,schema:r,schemaCode:n,data:i,$data:o,it:a}=e,{opts:s}=a;if(!o&&r.length===0)return;let l=r.length>=s.loopRequired;if(a.allErrors?d():c(),s.strictRequired){let p=e.parentSchema.properties,{definedProperties:f}=e.it;for(let m of r)if(p?.[m]===void 0&&!f.has(m)){let y=a.schemaEnv.baseId+a.errSchemaPath,g=`required property "${m}" is not defined at "${y}" (strictRequired)`;(0,Hc.checkStrictMode)(a,g,a.opts.strictRequired)}}function d(){if(l||o)e.block$data(_t.nil,u);else for(let p of r)(0,Pt.checkReportMissingProp)(e,p)}function c(){let p=t.let("missing");if(l||o){let f=t.let("valid",!0);e.block$data(f,()=>h(p,f)),e.ok(f)}else t.if((0,Pt.checkMissingProp)(e,r,p)),(0,Pt.reportMissingProp)(e,p),t.else()}function u(){t.forOf("prop",n,p=>{e.setParams({missingProperty:p}),t.if((0,Pt.noPropertyInData)(t,i,p,s.ownProperties),()=>e.error())})}function h(p,f){e.setParams({missingProperty:p}),t.forOf(p,n,()=>{t.assign(f,(0,Pt.propertyInData)(t,i,p,s.ownProperties)),t.if((0,_t.not)(f),()=>{e.error(),t.break()})},_t.nil)}}};On.default=Qc});var _a=b(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});var kt=T(),Xc={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,kt.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,kt._)`{limit: ${e}}`},Yc={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Xc,code(e){let{keyword:t,data:r,schemaCode:n}=e,i=t==="maxItems"?kt.operators.GT:kt.operators.LT;e.fail$data((0,kt._)`${r}.length ${i} ${n}`)}};An.default=Yc});var lr=b(jn=>{"use strict";Object.defineProperty(jn,"__esModule",{value:!0});var ka=on();ka.code='require("ajv/dist/runtime/equal").default';jn.default=ka});var Ea=b(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});var Nn=ht(),V=T(),Zc=R(),ep=lr(),tp={message:({params:{i:e,j:t}})=>(0,V.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,V._)`{i: ${e}, j: ${t}}`},rp={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:tp,code(e){let{gen:t,data:r,$data:n,schema:i,parentSchema:o,schemaCode:a,it:s}=e;if(!n&&!i)return;let l=t.let("valid"),d=o.items?(0,Nn.getSchemaTypes)(o.items):[];e.block$data(l,c,(0,V._)`${a} === false`),e.ok(l);function c(){let f=t.let("i",(0,V._)`${r}.length`),m=t.let("j");e.setParams({i:f,j:m}),t.assign(l,!0),t.if((0,V._)`${f} > 1`,()=>(u()?h:p)(f,m))}function u(){return d.length>0&&!d.some(f=>f==="object"||f==="array")}function h(f,m){let y=t.name("item"),g=(0,Nn.checkDataTypes)(d,y,s.opts.strictNumbers,Nn.DataType.Wrong),F=t.const("indices",(0,V._)`{}`);t.for((0,V._)`;${f}--;`,()=>{t.let(y,(0,V._)`${r}[${f}]`),t.if(g,(0,V._)`continue`),d.length>1&&t.if((0,V._)`typeof ${y} == "string"`,(0,V._)`${y} += "_"`),t.if((0,V._)`typeof ${F}[${y}] == "number"`,()=>{t.assign(m,(0,V._)`${F}[${y}]`),e.error(),t.assign(l,!1).break()}).code((0,V._)`${F}[${y}] = ${f}`)})}function p(f,m){let y=(0,Zc.useFunc)(t,ep.default),g=t.name("outer");t.label(g).for((0,V._)`;${f}--;`,()=>t.for((0,V._)`${m} = ${f}; ${m}--;`,()=>t.if((0,V._)`${y}(${r}[${f}], ${r}[${m}])`,()=>{e.error(),t.assign(l,!1).break(g)})))}}};Dn.default=rp});var Ra=b(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});var In=T(),np=R(),ip=lr(),op={message:"must be equal to constant",params:({schemaCode:e})=>(0,In._)`{allowedValue: ${e}}`},ap={keyword:"const",$data:!0,error:op,code(e){let{gen:t,data:r,$data:n,schemaCode:i,schema:o}=e;n||o&&typeof o=="object"?e.fail$data((0,In._)`!${(0,np.useFunc)(t,ip.default)}(${r}, ${i})`):e.fail((0,In._)`${o} !== ${r}`)}};Ln.default=ap});var Oa=b(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});var Et=T(),sp=R(),lp=lr(),dp={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Et._)`{allowedValues: ${e}}`},up={keyword:"enum",schemaType:"array",$data:!0,error:dp,code(e){let{gen:t,data:r,$data:n,schema:i,schemaCode:o,it:a}=e;if(!n&&i.length===0)throw new Error("enum must have non-empty array");let s=i.length>=a.opts.loopEnum,l,d=()=>l??(l=(0,sp.useFunc)(t,lp.default)),c;if(s||n)c=t.let("valid"),e.block$data(c,u);else{if(!Array.isArray(i))throw new Error("ajv implementation error");let p=t.const("vSchema",o);c=(0,Et.or)(...i.map((f,m)=>h(p,m)))}e.pass(c);function u(){t.assign(c,!1),t.forOf("v",o,p=>t.if((0,Et._)`${d()}(${r}, ${p})`,()=>t.assign(c,!0).break()))}function h(p,f){let m=i[f];return typeof m=="object"&&m!==null?(0,Et._)`${d()}(${r}, ${p}[${f}])`:(0,Et._)`${r} === ${m}`}}};qn.default=up});var Aa=b(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});var cp=Fa(),pp=va(),fp=wa(),mp=xa(),hp=Ta(),yp=Pa(),gp=_a(),bp=Ea(),Cp=Ra(),Fp=Oa(),vp=[cp.default,pp.default,fp.default,mp.default,hp.default,yp.default,gp.default,bp.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Cp.default,Fp.default];Vn.default=vp});var Un=b(Rt=>{"use strict";Object.defineProperty(Rt,"__esModule",{value:!0});Rt.validateAdditionalItems=void 0;var Ne=T(),Mn=R(),$p={message:({params:{len:e}})=>(0,Ne.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Ne._)`{limit: ${e}}`},Sp={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:$p,code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,Mn.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}ja(e,n)}};function ja(e,t){let{gen:r,schema:n,data:i,keyword:o,it:a}=e;a.items=!0;let s=r.const("len",(0,Ne._)`${i}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,Ne._)`${s} <= ${t.length}`);else if(typeof n=="object"&&!(0,Mn.alwaysValidSchema)(a,n)){let d=r.var("valid",(0,Ne._)`${s} <= ${t.length}`);r.if((0,Ne.not)(d),()=>l(d)),e.ok(d)}function l(d){r.forRange("i",t.length,s,c=>{e.subschema({keyword:o,dataProp:c,dataPropType:Mn.Type.Num},d),a.allErrors||r.if((0,Ne.not)(d),()=>r.break())})}}Rt.validateAdditionalItems=ja;Rt.default=Sp});var zn=b(Ot=>{"use strict";Object.defineProperty(Ot,"__esModule",{value:!0});Ot.validateTuple=void 0;var Na=T(),dr=R(),wp=Y(),xp={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return Da(e,"additionalItems",t);r.items=!0,!(0,dr.alwaysValidSchema)(r,t)&&e.ok((0,wp.validateArray)(e))}};function Da(e,t,r=e.schema){let{gen:n,parentSchema:i,data:o,keyword:a,it:s}=e;c(i),s.opts.unevaluated&&r.length&&s.items!==!0&&(s.items=dr.mergeEvaluated.items(n,r.length,s.items));let l=n.name("valid"),d=n.const("len",(0,Na._)`${o}.length`);r.forEach((u,h)=>{(0,dr.alwaysValidSchema)(s,u)||(n.if((0,Na._)`${d} > ${h}`,()=>e.subschema({keyword:a,schemaProp:h,dataProp:h},l)),e.ok(l))});function c(u){let{opts:h,errSchemaPath:p}=s,f=r.length,m=f===u.minItems&&(f===u.maxItems||u[t]===!1);if(h.strictTuples&&!m){let y=`"${a}" is ${f}-tuple, but minItems or maxItems/${t} are not specified or different at path "${p}"`;(0,dr.checkStrictMode)(s,y,h.strictTuples)}}}Ot.validateTuple=Da;Ot.default=xp});var Ia=b(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});var Tp=zn(),Pp={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Tp.validateTuple)(e,"items")};Bn.default=Pp});var qa=b(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});var La=T(),_p=R(),kp=Y(),Ep=Un(),Rp={message:({params:{len:e}})=>(0,La.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,La._)`{limit: ${e}}`},Op={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Rp,code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:i}=r;n.items=!0,!(0,_p.alwaysValidSchema)(n,t)&&(i?(0,Ep.validateAdditionalItems)(e,i):e.ok((0,kp.validateArray)(e)))}};Gn.default=Op});var Va=b(Wn=>{"use strict";Object.defineProperty(Wn,"__esModule",{value:!0});var ee=T(),ur=R(),Ap={message:({params:{min:e,max:t}})=>t===void 0?(0,ee.str)`must contain at least ${e} valid item(s)`:(0,ee.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ee._)`{minContains: ${e}}`:(0,ee._)`{minContains: ${e}, maxContains: ${t}}`},jp={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Ap,code(e){let{gen:t,schema:r,parentSchema:n,data:i,it:o}=e,a,s,{minContains:l,maxContains:d}=n;o.opts.next?(a=l===void 0?1:l,s=d):a=1;let c=t.const("len",(0,ee._)`${i}.length`);if(e.setParams({min:a,max:s}),s===void 0&&a===0){(0,ur.checkStrictMode)(o,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(s!==void 0&&a>s){(0,ur.checkStrictMode)(o,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,ur.alwaysValidSchema)(o,r)){let m=(0,ee._)`${c} >= ${a}`;s!==void 0&&(m=(0,ee._)`${m} && ${c} <= ${s}`),e.pass(m);return}o.items=!0;let u=t.name("valid");s===void 0&&a===1?p(u,()=>t.if(u,()=>t.break())):a===0?(t.let(u,!0),s!==void 0&&t.if((0,ee._)`${i}.length > 0`,h)):(t.let(u,!1),h()),e.result(u,()=>e.reset());function h(){let m=t.name("_valid"),y=t.let("count",0);p(m,()=>t.if(m,()=>f(y)))}function p(m,y){t.forRange("i",0,c,g=>{e.subschema({keyword:"contains",dataProp:g,dataPropType:ur.Type.Num,compositeRule:!0},m),y()})}function f(m){t.code((0,ee._)`${m}++`),s===void 0?t.if((0,ee._)`${m} >= ${a}`,()=>t.assign(u,!0).break()):(t.if((0,ee._)`${m} > ${s}`,()=>t.assign(u,!1).break()),a===1?t.assign(u,!0):t.if((0,ee._)`${m} >= ${a}`,()=>t.assign(u,!0)))}}};Wn.default=jp});var za=b(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.validateSchemaDeps=de.validatePropertyDeps=de.error=void 0;var Jn=T(),Np=R(),At=Y();de.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let n=t===1?"property":"properties";return(0,Jn.str)`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,Jn._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var Dp={keyword:"dependencies",type:"object",schemaType:"object",error:de.error,code(e){let[t,r]=Ip(e);Ma(e,t),Ua(e,r)}};function Ip({schema:e}){let t={},r={};for(let n in e){if(n==="__proto__")continue;let i=Array.isArray(e[n])?t:r;i[n]=e[n]}return[t,r]}function Ma(e,t=e.schema){let{gen:r,data:n,it:i}=e;if(Object.keys(t).length===0)return;let o=r.let("missing");for(let a in t){let s=t[a];if(s.length===0)continue;let l=(0,At.propertyInData)(r,n,a,i.opts.ownProperties);e.setParams({property:a,depsCount:s.length,deps:s.join(", ")}),i.allErrors?r.if(l,()=>{for(let d of s)(0,At.checkReportMissingProp)(e,d)}):(r.if((0,Jn._)`${l} && (${(0,At.checkMissingProp)(e,s,o)})`),(0,At.reportMissingProp)(e,o),r.else())}}de.validatePropertyDeps=Ma;function Ua(e,t=e.schema){let{gen:r,data:n,keyword:i,it:o}=e,a=r.name("valid");for(let s in t)(0,Np.alwaysValidSchema)(o,t[s])||(r.if((0,At.propertyInData)(r,n,s,o.opts.ownProperties),()=>{let l=e.subschema({keyword:i,schemaProp:s},a);e.mergeValidEvaluated(l,a)},()=>r.var(a,!0)),e.ok(a))}de.validateSchemaDeps=Ua;de.default=Dp});var Ga=b(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});var Ba=T(),Lp=R(),qp={message:"property name must be valid",params:({params:e})=>(0,Ba._)`{propertyName: ${e.propertyName}}`},Vp={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:qp,code(e){let{gen:t,schema:r,data:n,it:i}=e;if((0,Lp.alwaysValidSchema)(i,r))return;let o=t.name("valid");t.forIn("key",n,a=>{e.setParams({propertyName:a}),e.subschema({keyword:"propertyNames",data:a,dataTypes:["string"],propertyName:a,compositeRule:!0},o),t.if((0,Ba.not)(o),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(o)}};Hn.default=Vp});var Qn=b(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});var cr=Y(),ie=T(),Mp=fe(),pr=R(),Up={message:"must NOT have additional properties",params:({params:e})=>(0,ie._)`{additionalProperty: ${e.additionalProperty}}`},zp={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Up,code(e){let{gen:t,schema:r,parentSchema:n,data:i,errsCount:o,it:a}=e;if(!o)throw new Error("ajv implementation error");let{allErrors:s,opts:l}=a;if(a.props=!0,l.removeAdditional!=="all"&&(0,pr.alwaysValidSchema)(a,r))return;let d=(0,cr.allSchemaProperties)(n.properties),c=(0,cr.allSchemaProperties)(n.patternProperties);u(),e.ok((0,ie._)`${o} === ${Mp.default.errors}`);function u(){t.forIn("key",i,y=>{!d.length&&!c.length?f(y):t.if(h(y),()=>f(y))})}function h(y){let g;if(d.length>8){let F=(0,pr.schemaRefOrVal)(a,n.properties,"properties");g=(0,cr.isOwnProperty)(t,F,y)}else d.length?g=(0,ie.or)(...d.map(F=>(0,ie._)`${y} === ${F}`)):g=ie.nil;return c.length&&(g=(0,ie.or)(g,...c.map(F=>(0,ie._)`${(0,cr.usePattern)(e,F)}.test(${y})`))),(0,ie.not)(g)}function p(y){t.code((0,ie._)`delete ${i}[${y}]`)}function f(y){if(l.removeAdditional==="all"||l.removeAdditional&&r===!1){p(y);return}if(r===!1){e.setParams({additionalProperty:y}),e.error(),s||t.break();return}if(typeof r=="object"&&!(0,pr.alwaysValidSchema)(a,r)){let g=t.name("valid");l.removeAdditional==="failing"?(m(y,g,!1),t.if((0,ie.not)(g),()=>{e.reset(),p(y)})):(m(y,g),s||t.if((0,ie.not)(g),()=>t.break()))}}function m(y,g,F){let x={keyword:"additionalProperties",dataProp:y,dataPropType:pr.Type.Str};F===!1&&Object.assign(x,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(x,g)}}};Kn.default=zp});var Ha=b(Yn=>{"use strict";Object.defineProperty(Yn,"__esModule",{value:!0});var Bp=Ct(),Wa=Y(),Xn=R(),Ja=Qn(),Gp={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:n,data:i,it:o}=e;o.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&Ja.default.code(new Bp.KeywordCxt(o,Ja.default,"additionalProperties"));let a=(0,Wa.allSchemaProperties)(r);for(let u of a)o.definedProperties.add(u);o.opts.unevaluated&&a.length&&o.props!==!0&&(o.props=Xn.mergeEvaluated.props(t,(0,Xn.toHash)(a),o.props));let s=a.filter(u=>!(0,Xn.alwaysValidSchema)(o,r[u]));if(s.length===0)return;let l=t.name("valid");for(let u of s)d(u)?c(u):(t.if((0,Wa.propertyInData)(t,i,u,o.opts.ownProperties)),c(u),o.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(u),e.ok(l);function d(u){return o.opts.useDefaults&&!o.compositeRule&&r[u].default!==void 0}function c(u){e.subschema({keyword:"properties",schemaProp:u,dataProp:u},l)}}};Yn.default=Gp});var Ya=b(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});var Ka=Y(),fr=T(),Qa=R(),Xa=R(),Wp={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:n,parentSchema:i,it:o}=e,{opts:a}=o,s=(0,Ka.allSchemaProperties)(r),l=s.filter(m=>(0,Qa.alwaysValidSchema)(o,r[m]));if(s.length===0||l.length===s.length&&(!o.opts.unevaluated||o.props===!0))return;let d=a.strictSchema&&!a.allowMatchingProperties&&i.properties,c=t.name("valid");o.props!==!0&&!(o.props instanceof fr.Name)&&(o.props=(0,Xa.evaluatedPropsToName)(t,o.props));let{props:u}=o;h();function h(){for(let m of s)d&&p(m),o.allErrors?f(m):(t.var(c,!0),f(m),t.if(c))}function p(m){for(let y in d)new RegExp(m).test(y)&&(0,Qa.checkStrictMode)(o,`property ${y} matches pattern ${m} (use allowMatchingProperties)`)}function f(m){t.forIn("key",n,y=>{t.if((0,fr._)`${(0,Ka.usePattern)(e,m)}.test(${y})`,()=>{let g=l.includes(m);g||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:y,dataPropType:Xa.Type.Str},c),o.opts.unevaluated&&u!==!0?t.assign((0,fr._)`${u}[${y}]`,!0):!g&&!o.allErrors&&t.if((0,fr.not)(c),()=>t.break())})})}}};Zn.default=Wp});var Za=b(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});var Jp=R(),Hp={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:n}=e;if((0,Jp.alwaysValidSchema)(n,r)){e.fail();return}let i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};ei.default=Hp});var es=b(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});var Kp=Y(),Qp={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Kp.validateUnion,error:{message:"must match a schema in anyOf"}};ti.default=Qp});var ts=b(ri=>{"use strict";Object.defineProperty(ri,"__esModule",{value:!0});var mr=T(),Xp=R(),Yp={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,mr._)`{passingSchemas: ${e.passing}}`},Zp={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Yp,code(e){let{gen:t,schema:r,parentSchema:n,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(i.opts.discriminator&&n.discriminator)return;let o=r,a=t.let("valid",!1),s=t.let("passing",null),l=t.name("_valid");e.setParams({passing:s}),t.block(d),e.result(a,()=>e.reset(),()=>e.error(!0));function d(){o.forEach((c,u)=>{let h;(0,Xp.alwaysValidSchema)(i,c)?t.var(l,!0):h=e.subschema({keyword:"oneOf",schemaProp:u,compositeRule:!0},l),u>0&&t.if((0,mr._)`${l} && ${a}`).assign(a,!1).assign(s,(0,mr._)`[${s}, ${u}]`).else(),t.if(l,()=>{t.assign(a,!0),t.assign(s,u),h&&e.mergeEvaluated(h,mr.Name)})})}}};ri.default=Zp});var rs=b(ni=>{"use strict";Object.defineProperty(ni,"__esModule",{value:!0});var ef=R(),tf={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let i=t.name("valid");r.forEach((o,a)=>{if((0,ef.alwaysValidSchema)(n,o))return;let s=e.subschema({keyword:"allOf",schemaProp:a},i);e.ok(i),e.mergeEvaluated(s)})}};ni.default=tf});var os=b(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});var hr=T(),is=R(),rf={message:({params:e})=>(0,hr.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,hr._)`{failingKeyword: ${e.ifClause}}`},nf={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:rf,code(e){let{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,is.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let i=ns(n,"then"),o=ns(n,"else");if(!i&&!o)return;let a=t.let("valid",!0),s=t.name("_valid");if(l(),e.reset(),i&&o){let c=t.let("ifClause");e.setParams({ifClause:c}),t.if(s,d("then",c),d("else",c))}else i?t.if(s,d("then")):t.if((0,hr.not)(s),d("else"));e.pass(a,()=>e.error(!0));function l(){let c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},s);e.mergeEvaluated(c)}function d(c,u){return()=>{let h=e.subschema({keyword:c},s);t.assign(a,s),e.mergeValidEvaluated(h,a),u?t.assign(u,(0,hr._)`${c}`):e.setParams({ifClause:c})}}}};function ns(e,t){let r=e.schema[t];return r!==void 0&&!(0,is.alwaysValidSchema)(e,r)}ii.default=nf});var as=b(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});var of=R(),af={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,of.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};oi.default=af});var ss=b(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});var sf=Un(),lf=Ia(),df=zn(),uf=qa(),cf=Va(),pf=za(),ff=Ga(),mf=Qn(),hf=Ha(),yf=Ya(),gf=Za(),bf=es(),Cf=ts(),Ff=rs(),vf=os(),$f=as();function Sf(e=!1){let t=[gf.default,bf.default,Cf.default,Ff.default,vf.default,$f.default,ff.default,mf.default,pf.default,hf.default,yf.default];return e?t.push(lf.default,uf.default):t.push(sf.default,df.default),t.push(cf.default),t}ai.default=Sf});var ls=b(si=>{"use strict";Object.defineProperty(si,"__esModule",{value:!0});var L=T(),wf={message:({schemaCode:e})=>(0,L.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,L._)`{format: ${e}}`},xf={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:wf,code(e,t){let{gen:r,data:n,$data:i,schema:o,schemaCode:a,it:s}=e,{opts:l,errSchemaPath:d,schemaEnv:c,self:u}=s;if(!l.validateFormats)return;i?h():p();function h(){let f=r.scopeValue("formats",{ref:u.formats,code:l.code.formats}),m=r.const("fDef",(0,L._)`${f}[${a}]`),y=r.let("fType"),g=r.let("format");r.if((0,L._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>r.assign(y,(0,L._)`${m}.type || "string"`).assign(g,(0,L._)`${m}.validate`),()=>r.assign(y,(0,L._)`"string"`).assign(g,m)),e.fail$data((0,L.or)(F(),x()));function F(){return l.strictSchema===!1?L.nil:(0,L._)`${a} && !${g}`}function x(){let O=c.$async?(0,L._)`(${m}.async ? await ${g}(${n}) : ${g}(${n}))`:(0,L._)`${g}(${n})`,$=(0,L._)`(typeof ${g} == "function" ? ${O} : ${g}.test(${n}))`;return(0,L._)`${g} && ${g} !== true && ${y} === ${t} && !${$}`}}function p(){let f=u.formats[o];if(!f){F();return}if(f===!0)return;let[m,y,g]=x(f);m===t&&e.pass(O());function F(){if(l.strictSchema===!1){u.logger.warn($());return}throw new Error($());function $(){return`unknown format "${o}" ignored in schema at path "${d}"`}}function x($){let oe=$ instanceof RegExp?(0,L.regexpCode)($):l.code.formats?(0,L._)`${l.code.formats}${(0,L.getProperty)(o)}`:void 0,ue=r.scopeValue("formats",{key:o,ref:$,code:oe});return typeof $=="object"&&!($ instanceof RegExp)?[$.type||"string",$.validate,(0,L._)`${ue}.validate`]:["string",$,ue]}function O(){if(typeof f=="object"&&!(f instanceof RegExp)&&f.async){if(!c.$async)throw new Error("async format in sync schema");return(0,L._)`await ${g}(${n})`}return typeof y=="function"?(0,L._)`${g}(${n})`:(0,L._)`${g}.test(${n})`}}}};si.default=xf});var ds=b(li=>{"use strict";Object.defineProperty(li,"__esModule",{value:!0});var Tf=ls(),Pf=[Tf.default];li.default=Pf});var us=b(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.contentVocabulary=Ke.metadataVocabulary=void 0;Ke.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Ke.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var ps=b(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});var _f=Ca(),kf=Aa(),Ef=ss(),Rf=ds(),cs=us(),Of=[_f.default,kf.default,(0,Ef.default)(),Rf.default,cs.metadataVocabulary,cs.contentVocabulary];di.default=Of});var ms=b(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});yr.DiscrError=void 0;var fs;(function(e){e.Tag="tag",e.Mapping="mapping"})(fs||(yr.DiscrError=fs={}))});var ys=b(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});var Qe=T(),ui=ms(),hs=Yt(),Af=Ft(),jf=R(),Nf={message:({params:{discrError:e,tagName:t}})=>e===ui.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,Qe._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},Df={keyword:"discriminator",type:"object",schemaType:"object",error:Nf,code(e){let{gen:t,data:r,schema:n,parentSchema:i,it:o}=e,{oneOf:a}=i;if(!o.opts.discriminator)throw new Error("discriminator: requires discriminator option");let s=n.propertyName;if(typeof s!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!a)throw new Error("discriminator: requires oneOf keyword");let l=t.let("valid",!1),d=t.const("tag",(0,Qe._)`${r}${(0,Qe.getProperty)(s)}`);t.if((0,Qe._)`typeof ${d} == "string"`,()=>c(),()=>e.error(!1,{discrError:ui.DiscrError.Tag,tag:d,tagName:s})),e.ok(l);function c(){let p=h();t.if(!1);for(let f in p)t.elseIf((0,Qe._)`${d} === ${f}`),t.assign(l,u(p[f]));t.else(),e.error(!1,{discrError:ui.DiscrError.Mapping,tag:d,tagName:s}),t.endIf()}function u(p){let f=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:p},f);return e.mergeEvaluated(m,Qe.Name),f}function h(){var p;let f={},m=g(i),y=!0;for(let O=0;O<a.length;O++){let $=a[O];if($?.$ref&&!(0,jf.schemaHasRulesButRef)($,o.self.RULES)){let ue=$.$ref;if($=hs.resolveRef.call(o.self,o.schemaEnv.root,o.baseId,ue),$ instanceof hs.SchemaEnv&&($=$.schema),$===void 0)throw new Af.default(o.opts.uriResolver,o.baseId,ue)}let oe=(p=$?.properties)===null||p===void 0?void 0:p[s];if(typeof oe!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${s}"`);y=y&&(m||g($)),F(oe,O)}if(!y)throw new Error(`discriminator: "${s}" must be required`);return f;function g({required:O}){return Array.isArray(O)&&O.includes(s)}function F(O,$){if(O.const)x(O.const,$);else if(O.enum)for(let oe of O.enum)x(oe,$);else throw new Error(`discriminator: "properties/${s}" must have "const" or "enum"`)}function x(O,$){if(typeof O!="string"||O in f)throw new Error(`discriminator: "${s}" values must be unique strings`);f[O]=$}}}};ci.default=Df});var gs=b((Ty,If)=>{If.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Cs=b((I,pi)=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});I.MissingRefError=I.ValidationError=I.CodeGen=I.Name=I.nil=I.stringify=I.str=I._=I.KeywordCxt=I.Ajv=void 0;var Lf=fa(),qf=ps(),Vf=ys(),bs=gs(),Mf=["/properties"],gr="http://json-schema.org/draft-07/schema",Xe=class extends Lf.default{_addVocabularies(){super._addVocabularies(),qf.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(Vf.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(bs,Mf):bs;this.addMetaSchema(t,gr,!1),this.refs["http://json-schema.org/schema"]=gr}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(gr)?gr:void 0)}};I.Ajv=Xe;pi.exports=I=Xe;pi.exports.Ajv=Xe;Object.defineProperty(I,"__esModule",{value:!0});I.default=Xe;var Uf=Ct();Object.defineProperty(I,"KeywordCxt",{enumerable:!0,get:function(){return Uf.KeywordCxt}});var Ye=T();Object.defineProperty(I,"_",{enumerable:!0,get:function(){return Ye._}});Object.defineProperty(I,"str",{enumerable:!0,get:function(){return Ye.str}});Object.defineProperty(I,"stringify",{enumerable:!0,get:function(){return Ye.stringify}});Object.defineProperty(I,"nil",{enumerable:!0,get:function(){return Ye.nil}});Object.defineProperty(I,"Name",{enumerable:!0,get:function(){return Ye.Name}});Object.defineProperty(I,"CodeGen",{enumerable:!0,get:function(){return Ye.CodeGen}});var zf=Qt();Object.defineProperty(I,"ValidationError",{enumerable:!0,get:function(){return zf.default}});var Bf=Ft();Object.defineProperty(I,"MissingRefError",{enumerable:!0,get:function(){return Bf.default}})});var mi=b((Py,xs)=>{"use strict";var fi=Math.floor(Math.random()*16777215),Fs=j.index=parseInt(Math.random()*16777215,10),vs=(typeof process>"u"||typeof process.pid!="number"?Math.floor(Math.random()*1e5):process.pid)%65535,$s=(()=>{try{return _Buffer}catch{try{return Buffer}catch{return null}}})(),br=function(e){return!!(e!=null&&e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))},ws=[];for(Q=0;Q<256;Q++)ws[Q]=(Q<=15?"0":"")+Q.toString(16);var Q,Ss=new RegExp("^[0-9a-fA-F]{24}$"),jt=[];Q=0;for(;Q<10;)jt[48+Q]=Q++;for(;Q<16;)jt[55+Q]=jt[87+Q]=Q++;function j(e){if(!(this instanceof j))return new j(e);if(e&&(e instanceof j||e._bsontype==="ObjectID"))return e;if(this._bsontype="ObjectID",e==null||typeof e=="number"){this.id=this.generate(e);return}var t=j.isValid(e);if(!t&&e!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(t&&typeof e=="string"&&e.length===24)return j.createFromHexString(e);if(e!=null&&e.length===12)this.id=e;else{if(e!=null&&typeof e.toHexString=="function")return e;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}}xs.exports=j;j.default=j;j.createFromTime=function(e){return e=parseInt(e,10)%4294967295,new j(Wf(8,e)+"0000000000000000")};j.createFromHexString=function(e){if(typeof e>"u"||e!=null&&e.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var t="",r=0;r<24;)t+=String.fromCharCode(jt[e.charCodeAt(r++)]<<4|jt[e.charCodeAt(r++)]);return new j(t)};j.isValid=function(e){return e==null?!1:typeof e=="number"?!0:typeof e=="string"?e.length===12||e.length===24&&Ss.test(e):e instanceof j?!0:br(e)?j.isValid(e.toString("hex")):typeof e.toHexString=="function"&&$s&&(e.id instanceof $s||typeof e.id=="string")?e.id.length===12||e.id.length===24&&Ss.test(e.id):!1};j.prototype={constructor:j,toHexString:function(){if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id.length===24)return this.id;if(br(this.id))return this.id.toString("hex");for(var e="",t=0;t<this.id.length;t++)e+=ws[this.id.charCodeAt(t)];return e},equals:function(e){return e instanceof j?this.toString()===e.toString():typeof e=="string"&&j.isValid(e)&&e.length===12&&br(this.id)?e===this.id.toString("binary"):typeof e=="string"&&j.isValid(e)&&e.length===24?e.toLowerCase()===this.toHexString():typeof e=="string"&&j.isValid(e)&&e.length===12?e===this.id:e!=null&&(e instanceof j||e.toHexString)?e.toHexString()===this.toHexString():!1},getTimestamp:function(){var e=new Date,t;return br(this.id)?t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24:t=this.id.charCodeAt(3)|this.id.charCodeAt(2)<<8|this.id.charCodeAt(1)<<16|this.id.charCodeAt(0)<<24,e.setTime(Math.floor(t)*1e3),e},generate:function(e){typeof e!="number"&&(e=~~(Date.now()/1e3)),e=parseInt(e,10)%4294967295;var t=Gf();return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255,fi>>16&255,fi>>8&255,fi&255,vs>>8&255,vs&255,t>>16&255,t>>8&255,t&255)}};function Gf(){return Fs=(Fs+1)%16777215}function Wf(e,t){return t=t.toString(16),t.length===e?t:"00000000".substring(t.length,e)+t}var Jf=Symbol&&Symbol.for&&Symbol.for("nodejs.util.inspect.custom")||"inspect";j.prototype[Jf]=function(){return"ObjectID("+this+")"};j.prototype.toJSON=j.prototype.toHexString;j.prototype.toString=j.prototype.toHexString});var Ns=b((Hy,js)=>{"use strict";var hm=function(t){return ym(t)&&!gm(t)};function ym(e){return!!e&&typeof e=="object"}function gm(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Fm(e)}var bm=typeof Symbol=="function"&&Symbol.for,Cm=bm?Symbol.for("react.element"):60103;function Fm(e){return e.$$typeof===Cm}function vm(e){return Array.isArray(e)?[]:{}}function Dt(e,t){return t.clone!==!1&&t.isMergeableObject(e)?et(vm(e),e,t):e}function $m(e,t,r){return e.concat(t).map(function(n){return Dt(n,r)})}function Sm(e,t){if(!t.customMerge)return et;var r=t.customMerge(e);return typeof r=="function"?r:et}function wm(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Os(e){return Object.keys(e).concat(wm(e))}function As(e,t){try{return t in e}catch{return!1}}function xm(e,t){return As(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Tm(e,t,r){var n={};return r.isMergeableObject(e)&&Os(e).forEach(function(i){n[i]=Dt(e[i],r)}),Os(t).forEach(function(i){xm(e,i)||(As(e,i)&&r.isMergeableObject(t[i])?n[i]=Sm(i,r)(e[i],t[i],r):n[i]=Dt(t[i],r))}),n}function et(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||$m,r.isMergeableObject=r.isMergeableObject||hm,r.cloneUnlessOtherwiseSpecified=Dt;var n=Array.isArray(t),i=Array.isArray(e),o=n===i;return o?n?r.arrayMerge(e,t,r):Tm(e,t,r):Dt(t,r)}et.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return et(n,i,r)},{})};var Pm=et;js.exports=Pm});var Vs=b((Ri,Oi)=>{"use strict";(function(e,t){typeof Li=="function"&&typeof Ri=="object"&&typeof Oi=="object"?Oi.exports=t():typeof define=="function"&&define.amd?define(function(){return t()}):e.pluralize=t()})(Ri,function(){var e=[],t=[],r={},n={},i={};function o(p){return typeof p=="string"?new RegExp("^"+p+"$","i"):p}function a(p,f){return p===f?f:p===p.toLowerCase()?f.toLowerCase():p===p.toUpperCase()?f.toUpperCase():p[0]===p[0].toUpperCase()?f.charAt(0).toUpperCase()+f.substr(1).toLowerCase():f.toLowerCase()}function s(p,f){return p.replace(/\$(\d{1,2})/g,function(m,y){return f[y]||""})}function l(p,f){return p.replace(f[0],function(m,y){var g=s(f[1],arguments);return a(m===""?p[y-1]:m,g)})}function d(p,f,m){if(!p.length||r.hasOwnProperty(p))return f;for(var y=m.length;y--;){var g=m[y];if(g[0].test(f))return l(f,g)}return f}function c(p,f,m){return function(y){var g=y.toLowerCase();return f.hasOwnProperty(g)?a(y,g):p.hasOwnProperty(g)?a(y,p[g]):d(g,y,m)}}function u(p,f,m,y){return function(g){var F=g.toLowerCase();return f.hasOwnProperty(F)?!0:p.hasOwnProperty(F)?!1:d(F,F,m)===F}}function h(p,f,m){var y=f===1?h.singular(p):h.plural(p);return(m?f+" ":"")+y}return h.plural=c(i,n,e),h.isPlural=u(i,n,e),h.singular=c(n,i,t),h.isSingular=u(n,i,t),h.addPluralRule=function(p,f){e.push([o(p),f])},h.addSingularRule=function(p,f){t.push([o(p),f])},h.addUncountableRule=function(p){if(typeof p=="string"){r[p.toLowerCase()]=!0;return}h.addPluralRule(p,"$0"),h.addSingularRule(p,"$0")},h.addIrregularRule=function(p,f){f=f.toLowerCase(),p=p.toLowerCase(),i[p]=f,n[f]=p},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(p){return h.addIrregularRule(p[0],p[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(p){return h.addPluralRule(p[0],p[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(p){return h.addSingularRule(p[0],p[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(h.addUncountableRule),h})});var Tr=e=>{let{name:t,domain:r,expires:n,httpOnly:i,maxAge:o,path:a,returnCookieAsObject:s,sameSite:l,secure:d,value:c}=e,u=`${t}=${c||""}`,h={name:t,value:c},p=d||l==="None";return n&&(s?h.expires=n.toUTCString():u+=`; Expires=${n.toUTCString()}`),o&&(s?h.maxAge=o:u+=`; Max-Age=${o.toString()}`),r&&(s?h.domain=r:u+=`; Domain=${r}`),a&&(s?h.path=a:u+=`; Path=${a}`),p&&(s?h.secure=p:u+=`; Secure=${p}`),i&&(s?h.httpOnly=i:u+=`; HttpOnly=${i}`),l&&(s?h.sameSite=l:u+=`; SameSite=${l}`),s?h:u},qi=({seconds:e=7200})=>{let t=new Date;return t.setSeconds(t.getSeconds()+e),t},Qs=({collectionAuthConfig:e,cookiePrefix:t,returnCookieAsObject:r=!1,token:n})=>{let i=typeof e.cookies.sameSite=="string"?e.cookies.sameSite:e.cookies.sameSite?"Strict":void 0;return Tr({name:`${t}-token`,domain:e.cookies.domain??void 0,expires:qi({seconds:e.tokenExpiration}),httpOnly:!0,path:"/",returnCookieAsObject:r,sameSite:i,secure:e.cookies.secure,value:n})},Xs=({collectionAuthConfig:e,cookiePrefix:t,returnCookieAsObject:r=!1})=>{let n=typeof e.cookies.sameSite=="string"?e.cookies.sameSite:e.cookies.sameSite?"Strict":void 0,i=new Date(Date.now()-1e3);return Tr({name:`${t}-token`,domain:e.cookies.domain??void 0,expires:i,httpOnly:!0,path:"/",returnCookieAsObject:r,sameSite:n,secure:e.cookies.secure})};function Ys(e){let t=new Map,r=e.get("Cookie");if(!r)return t;for(let n of r.split(/; */)){if(!n)continue;let i=n.indexOf("=");if(i===-1){t.set(n,"true");continue}let[o,a]=[n.slice(0,i),n.slice(i+1)];try{t.set(o,decodeURIComponent(a??"true"))}catch{}}return t}var Zs=e=>({canLoginWithEmail:!e||e.allowEmailLogin,canLoginWithUsername:!!e});function Pr(e){if(!e)return null;let t=typeof e=="string"?e:e.path,r="",n="default";return t?.includes("#")?[r,n]=t.split("#"):r=t,typeof e=="object"&&e.exportName&&(n=e.exportName),{exportName:n,path:r}}var el=e=>{let{importMap:t,PayloadComponent:r,schemaPath:n,silent:i}=e,{exportName:o,path:a}=Pr(r),s=a+"#"+o,l=t[s];return!l&&!i&&console.error("getFromImportMap: PayloadComponent not found in importMap",{key:s,PayloadComponent:r,schemaPath:n},"You may need to run the `payload generate:importmap` command to generate the importMap ahead of runtime."),l};var Le=({req:{user:e}})=>!!e;var tl={access:{create:Le,delete:Le,read:Le,unlock:Le,update:Le},admin:{components:{},custom:{},enableRichTextLink:!0,enableRichTextRelationship:!0,pagination:{defaultLimit:10,limits:[5,10,25,50,100]},useAsTitle:"id"},auth:!1,custom:{},endpoints:[],fields:[],hooks:{afterChange:[],afterDelete:[],afterForgotPassword:[],afterLogin:[],afterLogout:[],afterMe:[],afterOperation:[],afterRead:[],afterRefresh:[],beforeChange:[],beforeDelete:[],beforeLogin:[],beforeOperation:[],beforeRead:[],beforeValidate:[],me:[],refresh:[]},indexes:[],timestamps:!0,upload:!1,versions:!1};var rl=["payload","i18n","locale","params","permissions","searchParams","permissions"];var nl=[{label:"(UTC-11:00) Midway Island, Samoa",value:"Pacific/Midway"},{label:"(UTC-11:00) Niue",value:"Pacific/Niue"},{label:"(UTC-10:00) Hawaii",value:"Pacific/Honolulu"},{label:"(UTC-10:00) Cook Islands",value:"Pacific/Rarotonga"},{label:"(UTC-09:00) Alaska",value:"America/Anchorage"},{label:"(UTC-09:00) Gambier Islands",value:"Pacific/Gambier"},{label:"(UTC-08:00) Pacific Time (US & Canada)",value:"America/Los_Angeles"},{label:"(UTC-08:00) Tijuana, Baja California",value:"America/Tijuana"},{label:"(UTC-07:00) Mountain Time (US & Canada)",value:"America/Denver"},{label:"(UTC-07:00) Arizona (No DST)",value:"America/Phoenix"},{label:"(UTC-06:00) Central Time (US & Canada)",value:"America/Chicago"},{label:"(UTC-06:00) Central America",value:"America/Guatemala"},{label:"(UTC-05:00) Eastern Time (US & Canada)",value:"America/New_York"},{label:"(UTC-05:00) Bogota, Lima, Quito",value:"America/Bogota"},{label:"(UTC-04:00) Caracas",value:"America/Caracas"},{label:"(UTC-04:00) Santiago",value:"America/Santiago"},{label:"(UTC-03:00) Buenos Aires",value:"America/Buenos_Aires"},{label:"(UTC-03:00) Brasilia",value:"America/Sao_Paulo"},{label:"(UTC-02:00) South Georgia",value:"Atlantic/South_Georgia"},{label:"(UTC-01:00) Azores",value:"Atlantic/Azores"},{label:"(UTC-01:00) Cape Verde",value:"Atlantic/Cape_Verde"},{label:"(UTC+00:00) London (GMT)",value:"Europe/London"},{label:"(UTC+01:00) Berlin, Paris",value:"Europe/Berlin"},{label:"(UTC+01:00) Lagos",value:"Africa/Lagos"},{label:"(UTC+02:00) Athens, Bucharest",value:"Europe/Athens"},{label:"(UTC+02:00) Cairo",value:"Africa/Cairo"},{label:"(UTC+03:00) Moscow, St. Petersburg",value:"Europe/Moscow"},{label:"(UTC+03:00) Riyadh",value:"Asia/Riyadh"},{label:"(UTC+04:00) Dubai",value:"Asia/Dubai"},{label:"(UTC+04:00) Baku",value:"Asia/Baku"},{label:"(UTC+05:00) Islamabad, Karachi",value:"Asia/Karachi"},{label:"(UTC+05:00) Tashkent",value:"Asia/Tashkent"},{label:"(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi",value:"Asia/Calcutta"},{label:"(UTC+06:00) Dhaka",value:"Asia/Dhaka"},{label:"(UTC+06:00) Almaty",value:"Asia/Almaty"},{label:"(UTC+07:00) Jakarta",value:"Asia/Jakarta"},{label:"(UTC+07:00) Bangkok",value:"Asia/Bangkok"},{label:"(UTC+08:00) Beijing, Shanghai",value:"Asia/Shanghai"},{label:"(UTC+08:00) Singapore",value:"Asia/Singapore"},{label:"(UTC+09:00) Tokyo, Osaka, Sapporo",value:"Asia/Tokyo"},{label:"(UTC+09:00) Seoul",value:"Asia/Seoul"},{label:"(UTC+10:00) Brisbane",value:"Australia/Brisbane"},{label:"(UTC+10:00) Sydney, Melbourne",value:"Australia/Sydney"},{label:"(UTC+10:00) Guam, Port Moresby",value:"Pacific/Guam"},{label:"(UTC+11:00) New Caledonia",value:"Pacific/Noumea"},{label:"(UTC+12:00) Auckland, Wellington",value:"Pacific/Auckland"},{label:"(UTC+12:00) Fiji",value:"Pacific/Fiji"}];function il(e){return e!==null&&typeof e=="object"&&"relationTo"in e&&"value"in e}function _r(e){return e.type==="group"||e.type==="array"||e.type==="row"||e.type==="collapsible"}function ol(e){return e.type==="array"}function al(e){return e.type==="blocks"}function sl(e){return e.type==="group"}function ll(e){return typeof e=="object"}function dl(e){return Array.isArray(e)&&typeof e?.[0]=="object"}function ul(e){return typeof e=="string"}function cl(e){return e.type==="select"||e.type==="relationship"||e.type==="upload"}function pl(e){return(e.type==="upload"||e.type==="relationship"||e.type==="join")&&typeof e.maxDepth=="number"}function It(e){return e.type==="ui"}function fl(e){return"admin"in e&&"position"in e.admin&&e.admin.position==="sidebar"}function ml(e){return"name"in e&&e.name==="id"}function hl(e){return"hidden"in e&&e.hidden||"admin"in e&&"disabled"in e.admin&&e.admin.disabled}function ye(e){return"name"in e&&!It(e)}function ot(e){return"name"in e}function yl(e){return"name"in e}function gl(e){return"localized"in e&&e.localized}function bl({field:e,parentIsLocalized:t}){return"localized"in e&&e.localized&&(!t||process.env.NEXT_PUBLIC_PAYLOAD_COMPATIBILITY_allowLocalizedWithinLocalized==="true")}function Cl(e){return"virtual"in e&&!!e.virtual}function Fl({field:e,index:t,parentIndexPath:r,parentPath:n,parentSchemaPath:i}){if("name"in e)return{indexPath:`${r?r+"-":""}${t}`,path:`${n?n+".":""}${e.name}`,schemaPath:`${i?i+".":""}${e.name}`};let o=`_index-${`${r?r+"-":""}${t}`}`;return{indexPath:`${r?r+"-":""}${t}`,path:`${n?n+".":""}${o}`,schemaPath:`${i?i+".":""}${o}`}}var Ps=it(Cs(),1),gi=it(mi(),1);function Cr(e){return e==null||typeof e=="string"&&e.trim()===""?!1:!Number.isNaN(Number(e))}var hi=it(mi(),1),Ts=hi.default.default||hi.default,yi=(e,t)=>{if(t==="text"&&e){if(["object","string"].includes(typeof e)){let r=Ts.isValid(e);return typeof e=="string"||r}return!1}if(typeof e=="number"&&!Number.isNaN(e))return!0;if(t==="ObjectID")return Ts.isValid(String(e))};var Fr=gi.default.default||gi.default,Hf=(e,{hasMany:t,maxLength:r,maxRows:n,minLength:i,minRows:o,req:{payload:{config:a},t:s},required:l})=>{let d;if(!l&&!e)return!0;if(t===!0){let u=vr(e,{maxRows:n,minRows:o,required:l,t:s});if(typeof u=="string")return u}typeof a?.defaultMaxTextLength=="number"&&(d=a.defaultMaxTextLength),typeof r=="number"&&(d=r);let c=Array.isArray(e)?e:[e];for(let u of c){let h=u?.length||0;if(typeof d=="number"&&h>d)return s("validation:shorterThanMax",{label:s("general:value"),maxLength:d,stringValue:u});if(typeof i=="number"&&h<i)return s("validation:longerThanMin",{label:s("general:value"),minLength:i,stringValue:u})}return l&&(!(typeof e=="string"||Array.isArray(e))||e?.length===0)?s("validation:required"):!0},Kf=(e,{maxLength:t,minLength:r=3,req:{payload:{config:n},t:i},required:o})=>{let a;return typeof n?.defaultMaxTextLength=="number"&&(a=n.defaultMaxTextLength),typeof t=="number"&&(a=t),e&&a&&e.length>a?i("validation:shorterThanMax",{maxLength:a}):e&&r&&e.length<r?i("validation:longerThanMin",{minLength:r}):o&&!e?i("validation:required"):!0},Qf=(e,{req:{t},required:r,siblingData:n})=>r&&!e?t("validation:required"):e&&e!==n.password?t("fields:passwordsDoNotMatch"):!0,Xf=(e,{collectionSlug:t,req:{payload:{collections:r,config:n},t:i},required:o,siblingData:a})=>{if(t){let l=r?.[t]?.config??n.collections.find(({slug:d})=>d===t);if(l.auth.loginWithUsername&&!l.auth.loginWithUsername?.requireUsername&&!l.auth.loginWithUsername?.requireEmail&&!e&&!a?.username)return i("validation:required")}return e&&!/^(?!.*\.\.)[\w!#$%&'*+/=?^`{|}~-](?:[\w!#$%&'*+/=?^`{|}~.-]*[\w!#$%&'*+/=?^`{|}~-])?@[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]*[a-z0-9])?)*\.[a-z]{2,}$/i.test(e)||!e&&o?i("validation:emailAddress"):!0},Oy=(e,{collectionSlug:t,req:{payload:{collections:r,config:n},t:i},required:o,siblingData:a})=>{let s;if(t){let l=r?.[t]?.config??n.collections.find(({slug:d})=>d===t);if(l.auth.loginWithUsername&&!l.auth.loginWithUsername?.requireUsername&&!l.auth.loginWithUsername?.requireEmail&&!e&&!a?.email)return i("validation:required")}return typeof n?.defaultMaxTextLength=="number"&&(s=n.defaultMaxTextLength),e&&s&&e.length>s?i("validation:shorterThanMax",{maxLength:s}):!e&&o?i("validation:required"):!0},Yf=(e,{maxLength:t,minLength:r,req:{payload:{config:n},t:i},required:o})=>{let a;return typeof n?.defaultMaxTextLength=="number"&&(a=n.defaultMaxTextLength),typeof t=="number"&&(a=t),e&&a&&e.length>a?i("validation:shorterThanMax",{maxLength:a}):e&&r&&e.length<r?i("validation:longerThanMin",{minLength:r}):o&&!e?i("validation:required"):!0},Zf=(e,{req:{t},required:r})=>r&&e===void 0?t("validation:required"):!0,em=(e,{jsonError:t,jsonSchema:r,req:{t:n},required:i})=>{let o=s=>!(s==null||Array.isArray(s)&&s.length===0||typeof s=="object"&&Object.keys(s).length===0),a=({schema:s,uri:l})=>l&&s?s:fetch(l).then(d=>{if(!d.ok)throw new Error("Network response was not ok");return d.json()}).then(d=>{let c=d,u={id:void 0,$id:c.id,$schema:"http://json-schema.org/draft-07/schema#"};return Object.assign(c,u)});if(i&&!e)return n("validation:required");if(t!==void 0)return n("validation:invalidInput");if(r&&o(e))try{r.schema=a(r);let{schema:s}=r,l=new Ps.default;if(!l.validate(s,e))return l.errorsText()}catch(s){return s instanceof Error?s.message:"Unknown error"}return!0},tm=(e,{req:{t},required:r})=>e&&typeof e!="boolean"||r&&typeof e!="boolean"?t("validation:trueOrFalse"):!0,rm=(e,{name:t,req:{t:r},required:n,siblingData:i,timezone:o})=>{let a=e&&!isNaN(Date.parse(e.toString())),s=o&&n,l=i?.[`${t}_tz`],d=s?!!l:!0;return a&&d?!0:a&&!d?r("validation:timezoneRequired"):e?r("validation:notValidDate",{value:e}):n?r("validation:required"):!0},nm=async(e,t)=>{if(!t?.editor)throw new Error("richText field has no editor property.");if(typeof t?.editor=="function")throw new Error("Attempted to access unsanitized rich text editor.");return(t?.editor).validate(e,t)},vr=(e,t)=>{let{maxRows:r,minRows:n,required:i,t:o}=t,a=Array.isArray(e)?e.length:e||0;return!i&&a===0?!0:n&&a<n?o("validation:requiresAtLeast",{count:n,label:o("general:rows")}):r&&a>r?o("validation:requiresNoMoreThan",{count:r,label:o("general:rows")}):i&&!a?o("validation:requiresAtLeast",{count:1,label:o("general:row")}):!0},im=(e,{hasMany:t,max:r,maxRows:n,min:i,minRows:o,req:{t:a},required:s})=>{if(t===!0){let d=vr(e,{maxRows:n,minRows:o,required:s,t:a});if(typeof d=="string")return d}if(!e&&!Cr(e)){if(s)return a("validation:required");if(!s)return!0}let l=Array.isArray(e)?e:[e];for(let d of l){if(!Cr(d))return a("validation:enterNumber");let c=parseFloat(d);if(typeof r=="number"&&c>r)return a("validation:greaterThanMax",{label:a("general:value"),max:r,value:e});if(typeof i=="number"&&c<i)return a("validation:lessThanMin",{label:a("general:value"),min:i,value:e})}return!0},om=(e,{maxRows:t,minRows:r,req:{t:n},required:i})=>vr(e,{maxRows:t,minRows:r,required:i,t:n}),am=(e,{maxRows:t,minRows:r,req:{t:n},required:i})=>vr(e,{maxRows:t,minRows:r,required:i,t:n}),_s=async(e,{id:t,blockData:r,data:n,filterOptions:i,relationTo:o,req:a,req:{t:s,user:l},siblingData:d})=>{if(typeof i<"u"&&e){let c={},u=[],h=Array.isArray(o)?o:[o],p=Array.isArray(e)?e:[e];for(let m of h)try{let y=typeof i=="function"?await i({id:t,blockData:r,data:n,relationTo:m,req:a,siblingData:d,user:l}):i;y===!0&&(y=null);let g=[];if(p.forEach(F=>{typeof F=="object"&&(F?.value?g.push(F.value):Fr.isValid(F)&&g.push(new Fr(F).toHexString())),(typeof F=="string"||typeof F=="number")&&g.push(F)}),g.length>0){let F={and:[{id:{in:g}}]};y&&y!==!0&&F.and?.push(y),y===!1&&u.push(m);let x=await a.payloadDataLoader.find({collection:m,depth:0,limit:0,pagination:!1,req:a,where:F});c[m]=x.docs.map(O=>O.id)}else c[m]=[]}catch(y){a.payload.logger.error({err:y,msg:`Error validating filter options for collection ${m}`}),c[m]=[]}let f=p.filter(m=>{let y,g;return typeof o=="string"&&(y=o,(typeof m=="string"||typeof m=="number")&&(g=m),typeof m=="object"&&Fr.isValid(m)&&(g=new Fr(m).toHexString())),Array.isArray(o)&&typeof m=="object"&&m?.relationTo&&(y=m.relationTo,g=m.value),u.find(F=>o===F)||!c[y]?!0:c[y].indexOf(g)===-1});return f.length>0?f.reduce((m,y,g)=>`${m} ${JSON.stringify(y)}${f.length===g+1?",":""} `,s("validation:invalidSelections")):!0}return!0},sm=async(e,t)=>{let{event:r,maxRows:n,minRows:i,relationTo:o,req:{payload:a,t:s},required:l}=t;if((!e&&typeof e!="number"||Array.isArray(e)&&e.length===0)&&l)return s("validation:required");if(Array.isArray(e)&&e.length>0){if(i&&e.length<i)return s("validation:lessThanMin",{label:s("general:rows"),min:i,value:e.length});if(n&&e.length>n)return s("validation:greaterThanMax",{label:s("general:rows"),max:n,value:e.length})}if(typeof e<"u"&&e!==null){let c=(Array.isArray(e)?e:[e]).filter(u=>{let h,p;if(typeof o=="string"&&(h=o,(u||typeof u=="number")&&(p=u)),Array.isArray(o)&&typeof u=="object"&&u?.relationTo&&(h=u.relationTo,p=u.value),p===null)return!1;let f=a.collections[h]?.customIDType||a?.db?.defaultIDType||"text";return!yi(p,f)});if(c.length>0)return`This relationship field has the following invalid relationships: ${c.map((u,h)=>`${u} ${JSON.stringify(h)}`).join(", ")}`}return r==="onChange"?!0:_s(e,t)},lm=async(e,t)=>{let{event:r,maxRows:n,minRows:i,relationTo:o,req:{payload:a,t:s},required:l}=t;if((!e&&typeof e!="number"||Array.isArray(e)&&e.length===0)&&l)return s("validation:required");if(Array.isArray(e)&&e.length>0){if(i&&e.length<i)return s("validation:lessThanMin",{label:s("general:rows"),min:i,value:e.length});if(n&&e.length>n)return s("validation:greaterThanMax",{label:s("general:rows"),max:n,value:e.length})}if(typeof e<"u"&&e!==null){let c=(Array.isArray(e)?e:[e]).filter(u=>{let h,p;if(typeof o=="string"&&(h=o,(u||typeof u=="number")&&(p=u)),Array.isArray(o)&&typeof u=="object"&&u?.relationTo&&(h=u.relationTo,p=u.value),p===null)return!1;let f=a.collections[h]?.customIDType||a?.db?.defaultIDType||"text";return!yi(p,f)});if(c.length>0)return`This relationship field has the following invalid relationships: ${c.map((u,h)=>`${u} ${JSON.stringify(h)}`).join(", ")}`}return r==="onChange"?!0:_s(e,t)},dm=(e,{data:t,filterOptions:r,hasMany:n,options:i,req:o,req:{t:a},required:s,siblingData:l})=>{let d=typeof r=="function"?r({data:t,options:i,req:o,siblingData:l}):i;return Array.isArray(e)&&e.some(c=>!d.some(u=>u===c||typeof u!="string"&&u?.value===c))||typeof e=="string"&&!d.some(c=>c===e||typeof c!="string"&&c.value===e)?a("validation:invalidSelection"):s&&(typeof e>"u"||e===null||n&&Array.isArray(e)&&e?.length===0)?a("validation:required"):!0},um=(e,{options:t,req:{t:r},required:n})=>e?t.some(o=>o===e||typeof o!="string"&&o.value===e)||r("validation:invalidSelection"):n?r("validation:required"):!0,cm=(e=["",""],{req:{t},required:r})=>{if(e===null)return r?t("validation:required"):!0;let n=parseFloat(String(e[0])),i=parseFloat(String(e[1]));return r&&(e[0]&&e[1]&&typeof n!="number"&&typeof i!="number"||Number.isNaN(n)||Number.isNaN(i)||Array.isArray(e)&&e.length!==2)?t("validation:requiresTwoNumbers"):e[1]&&Number.isNaN(n)||e[0]&&Number.isNaN(i)?t("validation:invalidInput"):!0},Ay={array:om,blocks:am,checkbox:tm,code:Zf,confirmPassword:Qf,date:rm,email:Xf,json:em,number:im,password:Kf,point:cm,radio:um,relationship:lm,richText:nm,select:dm,text:Hf,textarea:Yf,upload:sm};function bi(e,t="and"){return e.length===0?{}:{[t]:e.filter(r=>!!(r&&typeof r=="object"&&Object.keys(r).length>0))}}var Ci=e=>Object.keys(e).length===0,ks=(e,t)=>Ci(t)?e:Ci(e)?t:("and"in e&&e.and?e.and.push(t):"or"in e?e={and:[e,t]}:e={and:[e,t]},e),Fi=({collectionConfig:e,search:t,where:r={}})=>{if(t){let n={...r||{}},i=(e.admin.listSearchableFields||[e.admin?.useAsTitle||"id"]).map(o=>({[o]:{like:t}}));i.length>0&&(n=ks(n,{or:i})),Ci(n)||(r=n)}return r};async function pm({collectionConfig:e,folderID:t,localeCode:r,req:n,search:i="",sort:o}){let a=[Fi({collectionConfig:e,search:i})];if(typeof e.admin?.baseListFilter=="function"){let l=await e.admin.baseListFilter({limit:0,locale:r,page:1,req:n,sort:o||(typeof e.defaultSort=="string"?e.defaultSort:"id")});l&&a.push(l)}t&&a.push({relationTo:{equals:e.slug}});let s=a.filter(Boolean);if(s.length>1)return bi(s);if(s.length===1)return s[0]}function vi(e){return["image/jpeg","image/png","image/gif","image/svg+xml","image/webp","image/avif","image/jxl"].indexOf(e)>-1}var $i=({sizes:e,targetSizeMax:t=180,targetSizeMin:r=40,thumbnailURL:n,url:i,width:o})=>n||e&&Object.values(e).reduce((s,l)=>!l.width||l.width<r?s:l.width>=r&&l.width<=t?!s.width||l.width<s.width||s.width<r||s.width>t?l:s:!s.width||!s.original&&s.width<r&&l.width>s.width||s.width>t&&l.width<s.width?l:s,{original:!0,url:i,width:o}).url||i;function fm({folderFieldName:e,isUpload:t,relationTo:r,useAsTitle:n,value:i}){let o={id:i?.id,_folderOrDocumentTitle:String(n&&i?.[n]||i.id),createdAt:i?.createdAt,folderID:i?.[e],updatedAt:i?.updatedAt};return t&&(o.filename=i.filename,o.mimeType=i.mimeType,o.url=vi(i.mimeType)?$i({sizes:i.sizes,targetSizeMax:520,targetSizeMin:300,url:i.url,width:i.width}):void 0),{itemKey:`${r}-${i.id}`,relationTo:r,value:o}}var Es=["equals","contains","not_equals","in","all","not_in","exists","greater_than","greater_than_equal","less_than","less_than_equal","like","not_like","within","intersects","near"],Si=new Set(Es);function mm(e,t=0){if(e===0)return"0 bytes";let r=1024,n=t<0?0:t,i=[" bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(r));return`${parseFloat((e/r**o).toFixed(n))}${i[o]}`}function Rs(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}var De=new Map;De.set(Date,e=>new Date(e));De.set(Map,(e,t)=>new Map(Ti(Array.from(e),t)));De.set(Set,(e,t)=>new Set(Ti(Array.from(e),t)));De.set(RegExp,e=>new RegExp(e.source,e.flags));var Ze=null;function Ti(e,t){let r=Object.keys(e),n=new Array(r.length);for(let i=0;i<r.length;i++){let o=r[i],a=e[o];typeof a!="object"||a===null?n[o]=a:a instanceof RegExp?n[o]=new RegExp(a.source,a.flags):a.constructor!==Object&&(Ze=De.get(a.constructor))?n[o]=Ze(a,t):ArrayBuffer.isView(a)?n[o]=Rs(a):n[o]=t(a)}return n}var Nt=e=>{if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return Ti(e,Nt);if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e.constructor!==Object&&(Ze=De.get(e.constructor)))return Ze(e,Nt);let t={};for(let r in e){if(Object.hasOwnProperty.call(e,r)===!1)continue;let n=e[r];typeof n!="object"||n===null?t[r]=n:n instanceof RegExp?t[r]=new RegExp(n.source,n.flags):n.constructor!==Object&&(Ze=De.get(n.constructor))?t[r]=Ze(n,Nt):ArrayBuffer.isView(n)?t[r]=Rs(n):t[r]=Nt(n)}return t};function wi(e,t=!1){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(r=>typeof r!="object"||r===null?r:wi(r,t));{if(e instanceof Date)return new Date(e);let r={};for(let n in e){let i=e[n];t&&i===void 0||(r[n]=typeof i!="object"||i===null?i:wi(i,t))}return r}}function xi(e){if(!(typeof e=="object"&&e!==null&&"$$typeof"in e&&typeof e.$$typeof=="symbol")){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(t=>typeof t!="object"||t===null?t:xi(t));{if(e instanceof Date)return new Date(e);let t={};for(let r in e){let n=e[r];t[r]=typeof n!="object"||n===null?n:xi(n)}return t}}}function $r(e,t=new WeakMap){if(e===null)return null;if(t.has(e))return t.get(e);if(e instanceof File)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e instanceof Map){let r=new Map;t.set(e,r);for(let[n,i]of e.entries())r.set(n,$r(i,t));return r}if(e instanceof Set){let r=new Set;t.set(e,r);for(let n of e.values())r.add($r(n,t));return r}if(typeof e=="object"&&e!==null){if("$$typeof"in e&&typeof e.$$typeof=="symbol")return e;let r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));t.set(e,r);for(let n in e)(Object.prototype.hasOwnProperty.call(e,n)||Object.getOwnPropertySymbols(e).includes(n))&&(r[n]=$r(e[n],t));return r}return e}var tt=it(Ns(),1);var Ds=Symbol.for("react.client.reference");function Pi(e){if(e==null)return!1;let t=e.$$typeof==Ds,r=typeof e=="function",n=typeof e=="function"&&e.name==="";return r&&!n&&!t}function Is(e){return e==null?!1:!Pi(e)&&e.$$typeof==Ds}function _i(e){return Pi(e)||Is(e)}function ki(e){return _i(e)?!1:typeof e=="object"&&e!==null&&!(e instanceof RegExp)&&!(e instanceof Date)}function _m(e,t,r={}){return(0,tt.default)(e,t,{arrayMerge:(n,i,o)=>{let a=n.slice();return i.forEach((s,l)=>{typeof a[l]>"u"?a[l]=o?.cloneUnlessOtherwiseSpecified(s,o):o?.isMergeableObject(s)?a[l]=(0,tt.default)(n[l],s,o):n.indexOf(s)===-1&&a.push(s)}),a},...r})}function km(e,t){return(0,tt.default)(e,t,{arrayMerge:(r,n)=>n})}function Em(e,t){return(0,tt.default)(e,t,{isMergeableObject:ki})}var Rm=e=>typeof e=="string"||typeof e=="number"?e:e.id;var we=(e,t)=>e.reduce((r,n)=>{let i=r;switch(n.type){case"array":r.push({name:n.name,type:n.type,fields:we([...n.fields,{name:"id",type:"text"}],t)});break;case"blocks":r.push({name:n.name,type:n.type,blocks:(n.blockReferences??n.blocks).reduce((o,a)=>{let s=typeof a=="string"?t.blocksMap[a]:a;return o[s.slug]={fields:we([...s.fields,{name:"id",type:"text"}],t)},o},{})});break;case"collapsible":case"row":i=i.concat(we(n.fields,t));break;case"group":ye(n)?r.push({name:n.name,type:n.type,fields:we(n.fields,t)}):i=i.concat(we(n.fields,t));break;case"relationship":case"upload":r.push({name:n.name,type:n.type,hasMany:"hasMany"in n?!!n.hasMany:!1,relationTo:n.relationTo});break;case"tabs":{let o=[];n.tabs.forEach(a=>{if("name"in a){o.push({name:a.name,type:n.type,fields:we(a.fields,t)});return}o=o.concat(we(a.fields,t))}),i=i.concat(o);break}default:"name"in n&&r.push({name:n.name,type:n.type})}return i},[]);var Ls=({block:e})=>({...e,flattenedFields:Ie({fields:e.fields})}),qs=new Map,Ie=({cache:e,fields:t})=>{if(e){let n=qs.get(t);if(n)return n}let r=[];for(let n of t)switch(n.type){case"array":case"group":{if(ye(n))r.push({...n,flattenedFields:Ie({fields:n.fields})});else for(let i of Ie({fields:n.fields}))r.push(i);break}case"blocks":{let i=[],o;if(n.blockReferences){o=[];for(let s of n.blockReferences){if(typeof s=="string"){o.push(s);continue}o.push(Ls({block:s}))}}else for(let s of n.blocks){if(typeof s=="string"){i.push(s);continue}i.push(Ls({block:s}))}let a={...n,blockReferences:o,blocks:i};r.push(a);break}case"collapsible":case"row":{for(let i of Ie({fields:n.fields}))r.push(i);break}case"join":{r.push(n);break}case"tabs":{for(let i of n.tabs)if(ot(i))r.push({...i,type:"tab",flattenedFields:Ie({fields:i.fields})});else for(let o of Ie({fields:i.fields}))r.push(o);break}default:n.type!=="ui"&&r.push(n)}return qs.set(t,r),r};import{getTranslation as Ei}from"@payloadcms/translations";function rt(e,t){let r=typeof t=="boolean"?{keepPresentationalFields:t}:t??{},{i18n:n,keepPresentationalFields:i,labelPrefix:o,moveSubFieldsToTop:a=!1,pathPrefix:s}=r;return e.reduce((l,d)=>{if(d.type==="group"&&"fields"in d)if(a){let c="name"in d&&typeof d.name=="string"&&!!d.name,u="name"in d?d.name:void 0,h="label"in d&&d.label&&n?Ei(d.label,n):void 0,p=o?`${o} > ${h??u}`:h??u,f="name"in d&&d.name?s?`${s}.${d.name}`:d.name:s;l.push(d,...rt(d.fields,{i18n:n,keepPresentationalFields:i,labelPrefix:c?p:o,moveSubFieldsToTop:a,pathPrefix:c?f:s}))}else ye(d)?l.push(d):l.push(...rt(d.fields,t));else{if(d.type==="tabs"&&"tabs"in d)return[...l,...d.tabs.reduce((c,u)=>{if(ot(u))if(a){let h="label"in u&&u.label&&n?Ei(u.label,n):void 0,p=o?`${o} > ${h??u.name}`:h??u.name,f=u.name?s?`${s}.${u.name}`:u.name:s;return[...c,...rt(u.fields,{i18n:n,keepPresentationalFields:i,labelPrefix:p,moveSubFieldsToTop:a,pathPrefix:f})]}else return[...c,{...u,type:"tab"}];else return[...c,...rt(u.fields,t)]},[])];if(_r(d)&&["collapsible","row"].includes(d.type))l.push(...rt(d.fields,t));else if(ye(d)||i&&It(d)){if(d.name==="id"&&o!==void 0)return l;let c="label"in d&&d.label&&n?Ei(d.label,n):void 0,u="name"in d?d.name:void 0,h=s!==void 0||o!==void 0;l.push({...d,...a&&h&&{accessor:s&&u?`${s}.${u}`:u??"",labelWithPrefix:o?`${o} > ${c??u}`:c??u}})}}return l},[])}var Om=e=>{let{adminRoute:t,basePath:r="",path:n,serverURL:i}=e,o=n||"";if(t)if(t==="/"){if(!o)return`${i||""}${r}${t}`}else return`${i||""}${r}${t}${o}`;return`${i||""}${r}${o}`};var Ai=it(Vs(),1),{isPlural:Am,singular:jm}=Ai.default,Nm=e=>e.charAt(0).toUpperCase()+e.slice(1),Ms=(e,t=!1)=>{let i=(e||"").trim().split(/[\s-]/),o=[];return i.forEach(a=>{if(a!==""){let s=a.split(/(?=[A-Z])/).join(" ");o.push(Nm(s))}}),t?o.join("").replace(/\s/g,""):o.join(" ")},Dm=e=>{let t=Ms(e);return Am(e)?{plural:t,singular:jm(t)}:{plural:(0,Ai.default)(t),singular:t}};function Im(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}var xe=(e,t)=>{t=t||{};let r=t.delimiter||".",n=t.overwrite||!1,i=t.recursive||!1,o={};if(Im(e)||Object.prototype.toString.call(e)!=="[object Object]")return e;let s=d=>{let c=Number(d);return isNaN(c)||d.indexOf(".")!==-1||t.object?d:c};return Object.keys(e).sort((d,c)=>d.length-c.length).forEach(d=>{let c=d.split(r),u=s(c.shift()),h=s(c[0]),p=o;for(;h!==void 0;){if(u==="__proto__")return;let f=Object.prototype.toString.call(p[u]),m=f==="[object Object]"||f==="[object Array]";if(!n&&!m&&typeof p[u]<"u")return;(n&&!m||!n&&p[u]==null)&&(p[u]=typeof h=="number"&&!t.object?[]:{}),p=p[u],c.length>0&&(u=s(c.shift()),h=s(c[0]))}p[u]=i?xe(e[d],t):e[d]}),o};var Lm=(e,t)=>{let r=t.substring(0,t.lastIndexOf(".")+1),n=t.split(".").pop(),i={};return Object.keys(e).forEach(a=>{!e[a]?.disableFormData&&(a.indexOf(`${t}.`)===0||a===t)&&(i[a.replace(r,"")]=e[a]?.value,e[a]?.rows&&e[a].rows.length===0&&(i[a.replace(r,"")]=[]))}),xe(i)?.[n]};var qm=({field:e,operation:t,parentName:r,permissions:n})=>({operation:n===!0||n?.[t]===!0||n?.[r]===!0||"name"in e&&typeof n=="object"&&n?.[e.name]&&(n[e.name]===!0||t in n[e.name]&&n[e.name][t]),permissions:n==null||n===!0?!0:"name"in e?n[e.name]:n,read:n===!0||n?.read===!0||n?.[r]===!0||"name"in e&&typeof n=="object"&&n?.[e.name]&&(n[e.name]===!0||"read"in n[e.name]&&n[e.name].read)});var Vm=({allowAbsoluteUrls:e=!1,fallbackTo:t="/",redirectTo:r})=>{if(typeof r!="string")return t;let n;try{n=decodeURIComponent(r.trim())}catch{return t}let i=n.startsWith("/")&&!n.startsWith("//")&&!n.startsWith("/%2F")&&!n.startsWith("/\\/")&&!n.startsWith("/\\\\")&&!n.startsWith("/\\")&&!n.toLowerCase().startsWith("/javascript:")&&!n.toLowerCase().startsWith("/http"),o=e&&/^https?:\/\/\S+$/i.test(n);return i||o?n:t};var Us=e=>{for(let t in e){let r=e[t];if(r===!1)return"exclude";if(typeof r=="object")return Us(r)}return"include"};var ji=(e,t,r)=>{let n={};return e&&(Object.keys(e).forEach(i=>{(r===!0||!e[i]?.disableFormData)&&(n[i]=e[i]?.value)}),t&&(n=xe(n))),n};var Mm=(e,t)=>{if(!e)return null;if(t.indexOf(".")===-1)return ji(e,!0);let r={},n=t.split("."),i=n[n.length-1],o=!Number.isNaN(Number(i)),a;return o?a=`${t}.`:a=t.substring(0,t.lastIndexOf(".")+1),Object.keys(e).forEach(s=>{!e[s]?.disableFormData&&s.indexOf(a)===0&&(r[s.replace(a,"")]=e[s]?.value)}),xe(r)};function Um(e,t){return[...new Map(e.map(r=>[r[t],r])).values()]}function zm(){return process.env.NEXT_PHASE==="phase-production-build"||process.env.npm_lifecycle_event==="build"}var Bm=(e,t)=>e.size===t.size&&[...e].every(r=>t.has(r));var Gm=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase();var Wm=e=>{let t=e;if(typeof e=="string")try{t=JSON.parse(e)}catch(r){console.error("Error parsing columns",e,r)}if(t&&Array.isArray(t))return t.map(r=>{if(typeof r=="string"){let n=r[0]!=="-";return{accessor:n?r:r.slice(1),active:n}}return{accessor:r.accessor,active:r.active}})},Jm=e=>e.map(t=>t.active?t.accessor:`-${t.accessor}`);var Hm=e=>e?e.or&&!e.and?{or:e.or.map(t=>t.and?t:{and:[t]})}:e.and&&!e.or?{or:[{and:e.and}]}:!e.or&&!e.and?{or:[{and:[e]}]}:e:{};var Km=(e,t)=>t.map(n=>n.replace("*","")).some(n=>e.startsWith(n));var Qm=e=>e?.or&&e?.or?.length>0&&e?.or?.[0]?.and&&e?.or?.[0]?.and?.length>0?e.or.every(r=>r.and&&Array.isArray(r.and)?r.and.every(n=>{if(typeof n!="object")return!1;let i=Object.keys(n);if(i.length===0)return!1;for(let o of i){let a=Object.keys(n[o])[0];if(!a||!Si.has(a))return!1}return!0}):!1):!1;async function Xm(e){return new Promise(t=>{setTimeout(t,e)})}var Ym=e=>{let t=e.split(" "),r="(?:(?:[^\\p{L}\\p{N}])|^)",n="(?=[^\\p{L}\\p{N}]|$)",i=t.reduce((o,a,s)=>{let l=a.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&");return`${o}(?=.*${r}.*${l}.*${n})${s+1===t.length?".+":""}`},"");return new RegExp(i,"i")};var Zm={autosaveInterval:2e3};import{deepMergeSimple as kb}from"@payloadcms/translations/utilities";var export_deepMerge=tt.default;export{om as array,am as blocks,pm as buildFolderWhereConstraints,tm as checkbox,Zf as code,tl as collectionDefaults,bi as combineWhereConstraints,Qf as confirmPassword,rm as date,Nt as deepCopyObject,$r as deepCopyObjectComplex,wi as deepCopyObjectSimple,xi as deepCopyObjectSimpleWithoutReactComponents,export_deepMerge as deepMerge,kb as deepMergeSimple,_m as deepMergeWithCombinedArrays,Em as deepMergeWithReactComponents,km as deepMergeWithSourceArrays,nl as defaultTimezones,Xf as email,Rm as extractID,ye as fieldAffectsData,pl as fieldHasMaxDepth,_r as fieldHasSubFields,ol as fieldIsArrayType,al as fieldIsBlockType,sl as fieldIsGroupType,hl as fieldIsHiddenOrDisabled,ml as fieldIsID,gl as fieldIsLocalized,It as fieldIsPresentationalOnly,fl as fieldIsSidebar,Cl as fieldIsVirtual,we as fieldSchemaToJSON,bl as fieldShouldBeLocalized,cl as fieldSupportsMany,Ie as flattenAllFields,rt as flattenTopLevelFields,Om as formatAdminURL,mm as formatFilesize,fm as formatFolderOrDocumentItem,Dm as formatLabels,Tr as generateCookie,Xs as generateExpiredPayloadCookie,Qs as generatePayloadCookie,$i as getBestFitFromSizes,qi as getCookieExpiration,Lm as getDataByPath,Fl as getFieldPaths,qm as getFieldPermissions,el as getFromImportMap,Zs as getLoginOptions,Vm as getSafeRedirect,Us as getSelectMode,Mm as getSiblingData,Um as getUniqueListBy,yl as groupHasName,ks as hoistQueryParamsToAnd,vi as isImage,zm as isNextBuild,Cr as isNumber,ki as isPlainObject,Is as isReactClientComponent,_i as isReactComponentOrFunction,Pi as isReactServerComponentOrFunction,em as json,Fi as mergeListSearchAndWhere,im as number,ll as optionIsObject,ul as optionIsValue,dl as optionsAreObjects,Ys as parseCookies,Pr as parsePayloadComponent,Kf as password,cm as point,um as radio,ji as reduceFieldsToValues,lm as relationship,nm as richText,dm as select,rl as serverProps,Bm as setsAreEqual,ot as tabHasName,Hf as text,Yf as textarea,Gm as toKebabCase,Ms as toWords,Wm as transformColumnsToPreferences,Jm as transformColumnsToSearchParams,Hm as transformWhereQuery,xe as unflatten,sm as upload,Oy as username,Si as validOperatorSet,Es as validOperators,Km as validateMimeType,Qm as validateWhereQuery,Ay as validations,il as valueIsValueWithRelation,Zm as versionDefaults,Xm as wait,Ym as wordBoundariesRegex};
//# sourceMappingURL=shared.js.map
