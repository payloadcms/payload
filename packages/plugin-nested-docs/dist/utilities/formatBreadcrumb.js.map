{"version":3,"sources":["../../src/utilities/formatBreadcrumb.ts"],"sourcesContent":["import type { PayloadRequest, SanitizedCollectionConfig } from 'payload'\n\nimport type { Breadcrumb, GenerateLabel, GenerateURL } from '../types.js'\n\ntype Args = {\n  /**\n   * Existing breadcrumb, if any, to base the new breadcrumb on.\n   * This ensures that row IDs are maintained across updates, etc.\n   */\n  breadcrumb?: Breadcrumb\n  collection: SanitizedCollectionConfig\n  docs: Record<string, unknown>[]\n  generateLabel?: GenerateLabel\n  generateURL?: GenerateURL\n  req: PayloadRequest\n}\n\nexport const formatBreadcrumb = ({\n  breadcrumb,\n  collection,\n  docs,\n  generateLabel,\n  generateURL,\n  req,\n}: Args): Breadcrumb => {\n  let url: string | undefined = undefined\n  let label: string\n\n  const lastDoc = docs[docs.length - 1]!\n\n  if (typeof generateURL === 'function') {\n    url = generateURL(docs, lastDoc, collection, req)\n  }\n\n  if (typeof generateLabel === 'function') {\n    label = generateLabel(docs, lastDoc, collection, req)\n  } else {\n    const title = collection.admin?.useAsTitle ? lastDoc[collection.admin.useAsTitle] : ''\n\n    label = typeof title === 'string' || typeof title === 'number' ? String(title) : ''\n  }\n\n  return {\n    ...(breadcrumb || {}),\n    doc: lastDoc.id as string,\n    label,\n    url,\n  }\n}\n"],"names":["formatBreadcrumb","breadcrumb","collection","docs","generateLabel","generateURL","req","url","undefined","label","lastDoc","length","title","admin","useAsTitle","String","doc","id"],"mappings":"AAiBA,OAAO,MAAMA,mBAAmB,CAAC,EAC/BC,UAAU,EACVC,UAAU,EACVC,IAAI,EACJC,aAAa,EACbC,WAAW,EACXC,GAAG,EACE;IACL,IAAIC,MAA0BC;IAC9B,IAAIC;IAEJ,MAAMC,UAAUP,IAAI,CAACA,KAAKQ,MAAM,GAAG,EAAE;IAErC,IAAI,OAAON,gBAAgB,YAAY;QACrCE,MAAMF,YAAYF,MAAMO,SAASR,YAAYI;IAC/C;IAEA,IAAI,OAAOF,kBAAkB,YAAY;QACvCK,QAAQL,cAAcD,MAAMO,SAASR,YAAYI;IACnD,OAAO;QACL,MAAMM,QAAQV,WAAWW,KAAK,EAAEC,aAAaJ,OAAO,CAACR,WAAWW,KAAK,CAACC,UAAU,CAAC,GAAG;QAEpFL,QAAQ,OAAOG,UAAU,YAAY,OAAOA,UAAU,WAAWG,OAAOH,SAAS;IACnF;IAEA,OAAO;QACL,GAAIX,cAAc,CAAC,CAAC;QACpBe,KAAKN,QAAQO,EAAE;QACfR;QACAF;IACF;AACF,EAAC"}