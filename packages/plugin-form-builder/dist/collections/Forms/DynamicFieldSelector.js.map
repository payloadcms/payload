{"version":3,"sources":["../../../src/collections/Forms/DynamicFieldSelector.tsx"],"sourcesContent":["'use client'\n\nimport type { SelectFieldClientProps, SelectFieldValidation } from 'payload'\n\nimport { SelectField, useForm } from '@payloadcms/ui'\nimport React, { useEffect, useState } from 'react'\n\nimport type { SelectFieldOption } from '../../types.js'\n\nexport const DynamicFieldSelector: React.FC<\n  { validate: SelectFieldValidation } & SelectFieldClientProps\n> = (props) => {\n  const { fields, getDataByPath } = useForm()\n\n  const [options, setOptions] = useState<SelectFieldOption[]>([])\n\n  useEffect(() => {\n    const fields: any[] = getDataByPath('fields')\n\n    if (fields) {\n      const allNonPaymentFields = fields\n        .map((block): null | SelectFieldOption => {\n          const { name, blockType, label } = block\n\n          if (blockType !== 'payment') {\n            return {\n              label,\n              value: name,\n            }\n          }\n\n          return null\n        })\n        .filter((field) => field !== null)\n      setOptions(allNonPaymentFields)\n    }\n  }, [fields, getDataByPath])\n\n  return (\n    <SelectField\n      {...props}\n      field={{\n        ...(props.field || {}),\n        options,\n      }}\n    />\n  )\n}\n"],"names":["SelectField","useForm","React","useEffect","useState","DynamicFieldSelector","props","fields","getDataByPath","options","setOptions","allNonPaymentFields","map","block","name","blockType","label","value","filter","field"],"mappings":"AAAA;;AAIA,SAASA,WAAW,EAAEC,OAAO,QAAQ,iBAAgB;AACrD,OAAOC,SAASC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAIlD,OAAO,MAAMC,uBAET,CAACC;IACH,MAAM,EAAEC,MAAM,EAAEC,aAAa,EAAE,GAAGP;IAElC,MAAM,CAACQ,SAASC,WAAW,GAAGN,SAA8B,EAAE;IAE9DD,UAAU;QACR,MAAMI,SAAgBC,cAAc;QAEpC,IAAID,QAAQ;YACV,MAAMI,sBAAsBJ,OACzBK,GAAG,CAAC,CAACC;gBACJ,MAAM,EAAEC,IAAI,EAAEC,SAAS,EAAEC,KAAK,EAAE,GAAGH;gBAEnC,IAAIE,cAAc,WAAW;oBAC3B,OAAO;wBACLC;wBACAC,OAAOH;oBACT;gBACF;gBAEA,OAAO;YACT,GACCI,MAAM,CAAC,CAACC,QAAUA,UAAU;YAC/BT,WAAWC;QACb;IACF,GAAG;QAACJ;QAAQC;KAAc;IAE1B,qBACE,KAACR;QACE,GAAGM,KAAK;QACTa,OAAO;YACL,GAAIb,MAAMa,KAAK,IAAI,CAAC,CAAC;YACrBV;QACF;;AAGN,EAAC"}