{"version":3,"sources":["../../src/utilities/getPaymentTotal.ts"],"sourcesContent":["import type { FieldValues, PaymentField, PriceCondition } from '../types.js'\n\nexport const getPaymentTotal = (\n  args: {\n    fieldValues: FieldValues\n  } & Partial<PaymentField>,\n): number => {\n  const { basePrice = 0, fieldValues, priceConditions } = args\n\n  let total = basePrice\n\n  if (Array.isArray(priceConditions) && priceConditions.length > 0) {\n    priceConditions.forEach((priceCondition: PriceCondition) => {\n      const { condition, fieldToUse, operator, valueForCondition, valueForOperator, valueType } =\n        priceCondition\n\n      const valueOfField = fieldValues?.[fieldToUse]\n\n      if (valueOfField) {\n        if (\n          condition === 'hasValue' ||\n          (condition === 'equals' && valueOfField === valueForCondition) ||\n          (condition === 'notEquals' && valueOfField !== valueForCondition)\n        ) {\n          const valueToUse = Number(valueType === 'valueOfField' ? valueOfField : valueForOperator)\n          switch (operator) {\n            case 'add': {\n              total += valueToUse\n              break\n            }\n            case 'divide': {\n              total /= valueToUse\n              break\n            }\n            case 'multiply': {\n              total *= valueToUse\n              break\n            }\n            case 'subtract': {\n              total -= valueToUse\n              break\n            }\n            default: {\n              break\n            }\n          }\n        }\n      }\n    })\n  }\n\n  return total\n}\n"],"names":["getPaymentTotal","args","basePrice","fieldValues","priceConditions","total","Array","isArray","length","forEach","priceCondition","condition","fieldToUse","operator","valueForCondition","valueForOperator","valueType","valueOfField","valueToUse","Number"],"mappings":"AAEA,OAAO,MAAMA,kBAAkB,CAC7BC;IAIA,MAAM,EAAEC,YAAY,CAAC,EAAEC,WAAW,EAAEC,eAAe,EAAE,GAAGH;IAExD,IAAII,QAAQH;IAEZ,IAAII,MAAMC,OAAO,CAACH,oBAAoBA,gBAAgBI,MAAM,GAAG,GAAG;QAChEJ,gBAAgBK,OAAO,CAAC,CAACC;YACvB,MAAM,EAAEC,SAAS,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,iBAAiB,EAAEC,gBAAgB,EAAEC,SAAS,EAAE,GACvFN;YAEF,MAAMO,eAAed,aAAa,CAACS,WAAW;YAE9C,IAAIK,cAAc;gBAChB,IACEN,cAAc,cACbA,cAAc,YAAYM,iBAAiBH,qBAC3CH,cAAc,eAAeM,iBAAiBH,mBAC/C;oBACA,MAAMI,aAAaC,OAAOH,cAAc,iBAAiBC,eAAeF;oBACxE,OAAQF;wBACN,KAAK;4BAAO;gCACVR,SAASa;gCACT;4BACF;wBACA,KAAK;4BAAU;gCACbb,SAASa;gCACT;4BACF;wBACA,KAAK;4BAAY;gCACfb,SAASa;gCACT;4BACF;wBACA,KAAK;4BAAY;gCACfb,SAASa;gCACT;4BACF;wBACA;4BAAS;gCACP;4BACF;oBACF;gBACF;YACF;QACF;IACF;IAEA,OAAOb;AACT,EAAC"}