{"version":3,"sources":["../../src/utilities/replaceDoubleCurlys.ts"],"sourcesContent":["import { keyValuePairToHtmlTable } from './keyValuePairToHtmlTable.js'\n\ninterface EmailVariable {\n  field: string\n  value: string\n}\n\ntype EmailVariables = EmailVariable[]\n\nexport const replaceDoubleCurlys = (str: string, variables?: EmailVariables): string => {\n  const regex = /\\{\\{(.+?)\\}\\}/g\n  if (str && variables) {\n    return str.replace(regex, (_, variable: string) => {\n      if (variable.includes('*')) {\n        if (variable === '*') {\n          return variables.map(({ field, value }) => `${field} : ${value}`).join(' <br /> ')\n        } else if (variable === '*:table') {\n          return keyValuePairToHtmlTable(\n            variables.reduce<Record<string, string>>((acc, { field, value }) => {\n              acc[field] = value\n              return acc\n            }, {}),\n          )\n        }\n      } else {\n        const foundVariable = variables.find(({ field: fieldName }) => {\n          return variable === fieldName\n        })\n        if (foundVariable) {\n          return foundVariable.value\n        }\n      }\n\n      return variable\n    })\n  }\n  return str\n}\n"],"names":["keyValuePairToHtmlTable","replaceDoubleCurlys","str","variables","regex","replace","_","variable","includes","map","field","value","join","reduce","acc","foundVariable","find","fieldName"],"mappings":"AAAA,SAASA,uBAAuB,QAAQ,+BAA8B;AAStE,OAAO,MAAMC,sBAAsB,CAACC,KAAaC;IAC/C,MAAMC,QAAQ;IACd,IAAIF,OAAOC,WAAW;QACpB,OAAOD,IAAIG,OAAO,CAACD,OAAO,CAACE,GAAGC;YAC5B,IAAIA,SAASC,QAAQ,CAAC,MAAM;gBAC1B,IAAID,aAAa,KAAK;oBACpB,OAAOJ,UAAUM,GAAG,CAAC,CAAC,EAAEC,KAAK,EAAEC,KAAK,EAAE,GAAK,GAAGD,MAAM,GAAG,EAAEC,OAAO,EAAEC,IAAI,CAAC;gBACzE,OAAO,IAAIL,aAAa,WAAW;oBACjC,OAAOP,wBACLG,UAAUU,MAAM,CAAyB,CAACC,KAAK,EAAEJ,KAAK,EAAEC,KAAK,EAAE;wBAC7DG,GAAG,CAACJ,MAAM,GAAGC;wBACb,OAAOG;oBACT,GAAG,CAAC;gBAER;YACF,OAAO;gBACL,MAAMC,gBAAgBZ,UAAUa,IAAI,CAAC,CAAC,EAAEN,OAAOO,SAAS,EAAE;oBACxD,OAAOV,aAAaU;gBACtB;gBACA,IAAIF,eAAe;oBACjB,OAAOA,cAAcJ,KAAK;gBAC5B;YACF;YAEA,OAAOJ;QACT;IACF;IACA,OAAOL;AACT,EAAC"}