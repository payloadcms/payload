import type { ImportMap, SanitizedConfig, ServerFunctionClient } from 'payload'

import { NavProvider, WindowInfoProvider } from '@payloadcms/ui'
import React from 'react'
import '@payloadcms/ui/scss/app.scss'

export const metadata = {
  description: 'Generated by Next.js',
  title: 'Next.js',
}

export const RootLayout = async ({
  children,
  htmlProps = {},
}: {
  readonly children: React.ReactNode
  readonly config: Promise<SanitizedConfig>
  readonly htmlProps?: React.HtmlHTMLAttributes<HTMLHtmlElement>
  readonly importMap: ImportMap
  readonly serverFunction: ServerFunctionClient
}) => {
  const theme = 'dark'

  return (
    <html data-theme={theme} dir={'LTR'} lang={'en'} {...htmlProps}>
      <head>
        <style>{`@layer payload-default, payload;`}</style>
      </head>
      <body>
        <WindowInfoProvider
          breakpoints={{
            l: '(max-width: 1440px)',
            m: '(max-width: 1024px)',
            s: '(max-width: 768px)',
            xs: '(max-width: 400px)',
          }}
        >
          <NavProvider initialIsOpen={true}>{children}</NavProvider>
        </WindowInfoProvider>
        <div id="portal" />
      </body>
    </html>
  )
}
