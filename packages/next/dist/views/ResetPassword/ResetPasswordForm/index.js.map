{"version":3,"file":"index.js","names":["c","_c","ConfirmPasswordField","Form","FormSubmit","HiddenField","PasswordField","useAuth","useConfig","useTranslation","useRouter","formatAdminURL","React","ResetPasswordForm","t0","$","token","i18n","config","t1","admin","t2","routes","t3","t4","user","userSlug","login","loginRoute","adminRoute","api","apiRoute","history","fetchFullUser","t5","push","path","onSuccess","t6","initialState","initialValue","valid","value","password","_jsxs","action","method","children","className","_jsx","field","name","label","t","required","schemaPath","size"],"sources":["../../../../src/views/ResetPassword/ResetPasswordForm/index.tsx"],"sourcesContent":["'use client'\nimport {\n  ConfirmPasswordField,\n  Form,\n  FormSubmit,\n  HiddenField,\n  PasswordField,\n  useAuth,\n  useConfig,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { useRouter } from 'next/navigation.js'\nimport { type FormState } from 'payload'\nimport { formatAdminURL } from 'payload/shared'\nimport React from 'react'\n\ntype Args = {\n  readonly token: string\n}\n\nexport const ResetPasswordForm: React.FC<Args> = ({ token }) => {\n  const i18n = useTranslation()\n  const {\n    config: {\n      admin: {\n        routes: { login: loginRoute },\n        user: userSlug,\n      },\n      routes: { admin: adminRoute, api: apiRoute },\n      serverURL,\n    },\n  } = useConfig()\n\n  const history = useRouter()\n  const { fetchFullUser } = useAuth()\n\n  const onSuccess = React.useCallback(async () => {\n    const user = await fetchFullUser()\n    if (user) {\n      history.push(adminRoute)\n    } else {\n      history.push(\n        formatAdminURL({\n          adminRoute,\n          path: loginRoute,\n        }),\n      )\n    }\n  }, [adminRoute, fetchFullUser, history, loginRoute])\n\n  const initialState: FormState = {\n    'confirm-password': {\n      initialValue: '',\n      valid: false,\n      value: '',\n    },\n    password: {\n      initialValue: '',\n      valid: false,\n      value: '',\n    },\n    token: {\n      initialValue: token,\n      valid: true,\n      value: token,\n    },\n  }\n\n  return (\n    <Form\n      action={formatAdminURL({\n        apiRoute,\n        path: `/${userSlug}/reset-password`,\n      })}\n      initialState={initialState}\n      method=\"POST\"\n      onSuccess={onSuccess}\n    >\n      <div className=\"inputWrap\">\n        <PasswordField\n          field={{\n            name: 'password',\n            label: i18n.t('authentication:newPassword'),\n            required: true,\n          }}\n          path=\"password\"\n          schemaPath={`${userSlug}.password`}\n        />\n        <ConfirmPasswordField />\n        <HiddenField path=\"token\" schemaPath={`${userSlug}.token`} value={token} />\n      </div>\n      <FormSubmit size=\"large\">{i18n.t('authentication:resetPassword')}</FormSubmit>\n    </Form>\n  )\n}\n"],"mappings":"AAAA;;AAAA,SAAAA,CAAA,IAAAC,EAAA;;AACA,SACEC,oBAAoB,EACpBC,IAAI,EACJC,UAAU,EACVC,WAAW,EACXC,aAAa,EACbC,OAAO,EACPC,SAAS,EACTC,cAAc,QACT;AACP,SAASC,SAAS,QAAQ;AAE1B,SAASC,cAAc,QAAQ;AAC/B,OAAOC,KAAA,MAAW;AAMlB,OAAO,MAAMC,iBAAA,GAAoCC,EAAA;EAAA,MAAAC,CAAA,GAAAd,EAAA;EAAC;IAAAe;EAAA,IAAAF,EAAS;EACzD,MAAAG,IAAA,GAAaR,cAAA;EACb;IAAAS,MAAA,EAAAC;EAAA,IASIX,SAAA;EARM;IAAAY,KAAA,EAAAC,EAAA;IAAAC,MAAA,EAAAC;EAAA,IAAAJ,EAOP;EANQ;IAAAG,MAAA,EAAAE,EAAA;IAAAC,IAAA,EAAAC;EAAA,IAAAL,EAGN;EAFS;IAAAM,KAAA,EAAAC;EAAA,IAAAJ,EAAqB;EAGvB;IAAAJ,KAAA,EAAAS,UAAA;IAAAC,GAAA,EAAAC;EAAA,IAAAR,EAAoC;EAKhD,MAAAS,OAAA,GAAgBtB,SAAA;EAChB;IAAAuB;EAAA,IAA0B1B,OAAA;EAAA,IAAA2B,EAAA;EAAA,IAAAnB,CAAA,QAAAc,UAAA,IAAAd,CAAA,QAAAkB,aAAA,IAAAlB,CAAA,QAAAiB,OAAA,IAAAjB,CAAA,QAAAa,UAAA;IAEUM,EAAA,SAAAA,CAAA;MAClC,MAAAT,IAAA,SAAmBQ,aAAA;MAAA,IACfR,IAAA;QACFO,OAAA,CAAAG,IAAA,CAAaN,UAAA;MAAA;QAEbG,OAAA,CAAAG,IAAA,CACExB,cAAA;UAAAkB,UAAA;UAAAO,IAAA,EAEQR;QAAA,CACR;MAAA;IAAA;IAGNb,CAAA,MAAAc,UAAA;IAAAd,CAAA,MAAAkB,aAAA;IAAAlB,CAAA,MAAAiB,OAAA;IAAAjB,CAAA,MAAAa,UAAA;IAAAb,CAAA,MAAAmB,EAAA;EAAA;IAAAA,EAAA,GAAAnB,CAAA;EAAA;EAZA,MAAAsB,SAAA,GAAkBH,EAYiC;EAAA,IAAAI,EAAA;EAAA,IAAAvB,CAAA,QAAAgB,QAAA,IAAAhB,CAAA,QAAAE,IAAA,IAAAF,CAAA,QAAAsB,SAAA,IAAAtB,CAAA,QAAAC,KAAA,IAAAD,CAAA,QAAAW,QAAA;IAEnD,MAAAa,YAAA;MAAA;QAAAC,YAAA,EAEkB;QAAAC,KAAA;QAAAC,KAAA,EAEP;MAAA;MAAAC,QAAA;QAAAH,YAAA,EAGO;QAAAC,KAAA;QAAAC,KAAA,EAEP;MAAA;MAAA1B,KAAA;QAAAwB,YAAA,EAGOxB,KAAA;QAAAyB,KAAA;QAAAC,KAAA,EAEP1B;MAAA;IAAA;IAKTsB,EAAA,GAAAM,KAAA,CAAAzC,IAAA;MAAA0C,MAAA,EACUlC,cAAA;QAAAoB,QAAA;QAAAK,IAAA,EAEA,IAAIV,QAAA;MAAyB,CACrC;MAAAa,YAAA;MAAAO,MAAA,EAEO;MAAAT,SAAA;MAAAU,QAAA,GAGPH,KAAA,CAAC;QAAAI,SAAA,EAAc;QAAAD,QAAA,GACbE,IAAA,CAAA3C,aAAA;UAAA4C,KAAA;YAAAC,IAAA,EAEU;YAAAC,KAAA,EACCnC,IAAA,CAAAoC,CAAA,CAAO;YAAAC,QAAA;UAAA;UAAAlB,IAAA,EAGX;UAAAmB,UAAA,EACO,GAAG7B,QAAA;QAAmB,C,GAEpCuB,IAAA,CAAA/C,oBAAA,IAAC,GACD+C,IAAA,CAAA5C,WAAA;UAAA+B,IAAA,EAAkB;UAAAmB,UAAA,EAAoB,GAAG7B,QAAA,QAAgB;UAAAgB,KAAA,EAAS1B;QAAA,C;UAEpEiC,IAAA,CAAA7C,UAAA;QAAAoD,IAAA,EAAiB;QAAAT,QAAA,EAAS9B,IAAA,CAAAoC,CAAA,CAAO;MAAA,C;;;;;;;;;;;SAtBnCf,E;CAyBJ","ignoreList":[]}