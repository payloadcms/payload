{"version":3,"file":"DashboardStepNav.js","names":["c","_c","Button","DrawerToggler","ItemsDrawer","ReactSelect","useStepNav","useTranslation","useEffect","useId","DashboardStepNav","t0","$","addWidget","cancel","isEditing","resetLayout","saveLayout","setIsEditing","widgets","t","setStepNav","uuid","drawerSlug","t1","t2","label","_jsx","DashboardBreadcrumbDropdown","onCancel","onEditClick","onResetLayout","onSaveChanges","widgetsDrawerSlug","t3","_Fragment","children","items","onItemClick","widget","slug","searchPlaceholder","title","props","_jsxs","className","buttonStyle","el","size","onClick","options","value","handleChange","selectedOption","option","Array","isArray","isClearable","isSearchable","menuIsOpen","undefined","onChange","placeholder"],"sources":["../../../../../src/views/Dashboard/Default/ModularDashboard/DashboardStepNav.tsx"],"sourcesContent":["'use client'\nimport type { ClientWidget } from 'payload'\n\nimport {\n  Button,\n  DrawerToggler,\n  ItemsDrawer,\n  type ReactSelectOption as Option,\n  ReactSelect,\n  useStepNav,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { useEffect, useId } from 'react'\n\nexport function DashboardStepNav({\n  addWidget,\n  cancel,\n  isEditing,\n  resetLayout,\n  saveLayout,\n  setIsEditing,\n  widgets,\n}: {\n  addWidget: (slug: string) => void\n  cancel: () => void\n  isEditing: boolean\n  resetLayout: () => Promise<void>\n  saveLayout: () => Promise<void>\n  setIsEditing: (isEditing: boolean) => void\n  widgets: ClientWidget[]\n}) {\n  const { t } = useTranslation()\n  const { setStepNav } = useStepNav()\n  const uuid = useId()\n  const drawerSlug = `widgets-drawer-${uuid}`\n\n  useEffect(() => {\n    setStepNav([\n      {\n        label: (\n          <DashboardBreadcrumbDropdown\n            isEditing={isEditing}\n            onCancel={cancel}\n            onEditClick={() => setIsEditing(true)}\n            onResetLayout={resetLayout}\n            onSaveChanges={saveLayout}\n            widgetsDrawerSlug={drawerSlug}\n          />\n        ),\n      },\n    ])\n  }, [isEditing, drawerSlug, cancel, resetLayout, saveLayout, setIsEditing, setStepNav])\n\n  return (\n    <>\n      {isEditing && (\n        <ItemsDrawer\n          drawerSlug={drawerSlug}\n          items={widgets}\n          onItemClick={(widget) => addWidget(widget.slug)}\n          searchPlaceholder={t('dashboard:searchWidgets')}\n          title={t('dashboard:addWidget')}\n        />\n      )}\n    </>\n  )\n}\n\nexport function DashboardBreadcrumbDropdown(props: {\n  isEditing: boolean\n  onCancel: () => void\n  onEditClick: () => void\n  onResetLayout: () => void\n  onSaveChanges: () => void\n  widgetsDrawerSlug: string\n}) {\n  const { isEditing, onCancel, onEditClick, onResetLayout, onSaveChanges, widgetsDrawerSlug } =\n    props\n  if (isEditing) {\n    return (\n      <div className=\"dashboard-breadcrumb-dropdown__editing\">\n        <span>Editing Dashboard</span>\n        <div className=\"dashboard-breadcrumb-dropdown__actions\">\n          <DrawerToggler className=\"drawer-toggler--unstyled\" slug={widgetsDrawerSlug}>\n            <Button buttonStyle=\"pill\" el=\"span\" size=\"small\">\n              Add +\n            </Button>\n          </DrawerToggler>\n          <Button buttonStyle=\"pill\" onClick={onSaveChanges} size=\"small\">\n            Save Changes\n          </Button>\n          <Button buttonStyle=\"pill\" onClick={onCancel} size=\"small\">\n            Cancel\n          </Button>\n        </div>\n      </div>\n    )\n  }\n\n  const options = [\n    { label: 'Edit Dashboard', value: 'edit' },\n    { label: 'Reset Layout', value: 'reset' },\n  ]\n\n  const handleChange = (selectedOption: Option | Option[]) => {\n    // Since isMulti is false, we expect a single Option\n    const option = Array.isArray(selectedOption) ? selectedOption[0] : selectedOption\n\n    if (option?.value === 'edit') {\n      onEditClick()\n    } else if (option?.value === 'reset') {\n      onResetLayout()\n    }\n  }\n\n  return (\n    <ReactSelect\n      className=\"dashboard-breadcrumb-select\"\n      isClearable={false}\n      isSearchable={false}\n      menuIsOpen={undefined} // Let ReactSelect handle open/close\n      onChange={handleChange}\n      options={options}\n      placeholder=\"Dashboard\"\n      value={{ label: 'Dashboard', value: 'dashboard' }}\n    />\n  )\n}\n"],"mappings":"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","ignoreList":[]}