{"version":3,"file":"withPayload.spec.js","names":["describe","expect","it","withPayload","originalBasePath","process","env","NEXT_BASE_PATH","mockNextConfig","basePath","toBe","undefined"],"sources":["../../src/withPayload/withPayload.spec.ts"],"sourcesContent":["import { describe, expect, it } from 'vitest'\n\nimport { withPayload } from './withPayload.js'\n\ndescribe('withPayload', () => {\n  it('should set process.env.NEXT_BASE_PATH when nextConfig.basePath is provided', () => {\n    const originalBasePath = process.env.NEXT_BASE_PATH\n    delete process.env.NEXT_BASE_PATH\n\n    try {\n      const mockNextConfig = {\n        basePath: '/test/basepath',\n      }\n\n      withPayload(mockNextConfig)\n\n      // Verify it set the env var so formatAdminURL can read it\n      expect(process.env.NEXT_BASE_PATH).toBe('/test/basepath')\n    } finally {\n      // Restore original value\n      if (originalBasePath === undefined) {\n        delete process.env.NEXT_BASE_PATH\n      } else {\n        process.env.NEXT_BASE_PATH = originalBasePath\n      }\n    }\n  })\n\n  it('should not modify process.env.NEXT_BASE_PATH when basePath is not provided', () => {\n    const originalBasePath = process.env.NEXT_BASE_PATH\n\n    try {\n      const mockNextConfig = {}\n\n      withPayload(mockNextConfig)\n\n      // Verify it didn't set the env var\n      expect(process.env.NEXT_BASE_PATH).toBe(originalBasePath)\n    } finally {\n      // Restore original value\n      if (originalBasePath === undefined) {\n        delete process.env.NEXT_BASE_PATH\n      } else {\n        process.env.NEXT_BASE_PATH = originalBasePath\n      }\n    }\n  })\n})\n"],"mappings":"AAAA,SAASA,QAAQ,EAAEC,MAAM,EAAEC,EAAE,QAAQ;AAErC,SAASC,WAAW,QAAQ;AAE5BH,QAAA,CAAS,eAAe;EACtBE,EAAA,CAAG,8EAA8E;IAC/E,MAAME,gBAAA,GAAmBC,OAAA,CAAQC,GAAG,CAACC,cAAc;IACnD,OAAOF,OAAA,CAAQC,GAAG,CAACC,cAAc;IAEjC,IAAI;MACF,MAAMC,cAAA,GAAiB;QACrBC,QAAA,EAAU;MACZ;MAEAN,WAAA,CAAYK,cAAA;MAEZ;MACAP,MAAA,CAAOI,OAAA,CAAQC,GAAG,CAACC,cAAc,EAAEG,IAAI,CAAC;IAC1C,UAAU;MACR;MACA,IAAIN,gBAAA,KAAqBO,SAAA,EAAW;QAClC,OAAON,OAAA,CAAQC,GAAG,CAACC,cAAc;MACnC,OAAO;QACLF,OAAA,CAAQC,GAAG,CAACC,cAAc,GAAGH,gBAAA;MAC/B;IACF;EACF;EAEAF,EAAA,CAAG,8EAA8E;IAC/E,MAAME,gBAAA,GAAmBC,OAAA,CAAQC,GAAG,CAACC,cAAc;IAEnD,IAAI;MACF,MAAMC,cAAA,GAAiB,CAAC;MAExBL,WAAA,CAAYK,cAAA;MAEZ;MACAP,MAAA,CAAOI,OAAA,CAAQC,GAAG,CAACC,cAAc,EAAEG,IAAI,CAACN,gBAAA;IAC1C,UAAU;MACR;MACA,IAAIA,gBAAA,KAAqBO,SAAA,EAAW;QAClC,OAAON,OAAA,CAAQC,GAAG,CAACC,cAAc;MACnC,OAAO;QACLF,OAAA,CAAQC,GAAG,CAACC,cAAc,GAAGH,gBAAA;MAC/B;IACF;EACF;AACF","ignoreList":[]}