{"version":3,"sources":["../../../src/components/GlobalViewRedirect/index.ts"],"sourcesContent":["import type { CollectionSlug, ServerProps, ViewTypes } from 'payload'\n\nimport { headers as getHeaders } from 'next/headers.js'\nimport { redirect } from 'next/navigation.js'\n\nimport type { MultiTenantPluginConfig } from '../../types.js'\n\nimport { getGlobalViewRedirect } from '../../utilities/getGlobalViewRedirect.js'\n\ntype Args = {\n  basePath?: string\n  collectionSlug: CollectionSlug\n  docID?: number | string\n  globalSlugs: string[]\n  tenantArrayFieldName: string\n  tenantArrayTenantFieldName: string\n  tenantFieldName: string\n  tenantsCollectionSlug: string\n  useAsTitle: string\n  userHasAccessToAllTenants: Required<MultiTenantPluginConfig<any>>['userHasAccessToAllTenants']\n  viewType: ViewTypes\n} & ServerProps\n\nexport const GlobalViewRedirect = async (args: Args) => {\n  const collectionSlug = args?.collectionSlug\n  if (collectionSlug && args.globalSlugs?.includes(collectionSlug)) {\n    const headers = await getHeaders()\n    const redirectRoute = await getGlobalViewRedirect({\n      slug: collectionSlug,\n      basePath: args.basePath,\n      docID: args.docID,\n      headers,\n      payload: args.payload,\n      tenantFieldName: args.tenantFieldName,\n      tenantsArrayFieldName: args.tenantArrayFieldName,\n      tenantsArrayTenantFieldName: args.tenantArrayTenantFieldName,\n      tenantsCollectionSlug: args.tenantsCollectionSlug,\n      useAsTitle: args.useAsTitle,\n      user: args.user,\n      userHasAccessToAllTenants: args.userHasAccessToAllTenants,\n      view: args.viewType,\n    })\n\n    if (redirectRoute) {\n      redirect(redirectRoute)\n    }\n  }\n}\n"],"names":["headers","getHeaders","redirect","getGlobalViewRedirect","GlobalViewRedirect","args","collectionSlug","globalSlugs","includes","redirectRoute","slug","basePath","docID","payload","tenantFieldName","tenantsArrayFieldName","tenantArrayFieldName","tenantsArrayTenantFieldName","tenantArrayTenantFieldName","tenantsCollectionSlug","useAsTitle","user","userHasAccessToAllTenants","view","viewType"],"mappings":"AAEA,SAASA,WAAWC,UAAU,QAAQ,kBAAiB;AACvD,SAASC,QAAQ,QAAQ,qBAAoB;AAI7C,SAASC,qBAAqB,QAAQ,2CAA0C;AAgBhF,OAAO,MAAMC,qBAAqB,OAAOC;IACvC,MAAMC,iBAAiBD,MAAMC;IAC7B,IAAIA,kBAAkBD,KAAKE,WAAW,EAAEC,SAASF,iBAAiB;QAChE,MAAMN,UAAU,MAAMC;QACtB,MAAMQ,gBAAgB,MAAMN,sBAAsB;YAChDO,MAAMJ;YACNK,UAAUN,KAAKM,QAAQ;YACvBC,OAAOP,KAAKO,KAAK;YACjBZ;YACAa,SAASR,KAAKQ,OAAO;YACrBC,iBAAiBT,KAAKS,eAAe;YACrCC,uBAAuBV,KAAKW,oBAAoB;YAChDC,6BAA6BZ,KAAKa,0BAA0B;YAC5DC,uBAAuBd,KAAKc,qBAAqB;YACjDC,YAAYf,KAAKe,UAAU;YAC3BC,MAAMhB,KAAKgB,IAAI;YACfC,2BAA2BjB,KAAKiB,yBAAyB;YACzDC,MAAMlB,KAAKmB,QAAQ;QACrB;QAEA,IAAIf,eAAe;YACjBP,SAASO;QACX;IACF;AACF,EAAC"}