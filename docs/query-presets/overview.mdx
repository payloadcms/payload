---
title: Query Presets
label: Overview
order: 10
desc: Query Presets allow you to save and share filters, columns, and sort orders for your collections.
keywords:
---

Query Presets allow you to save and share filters, columns, and sort orders for your [Collections](../configuration/collections). This is useful for reusing common or complex filtering patterns and column configurations or sharing across your team.

Each Query Preset is saved as a new record in the database under the `payload-query-presets` collection. This allows for an endless number of preset configurations, where the users of your app define the presets that are most useful to them, rather than being hard coded into the Payload Config.

Within the [Admin Panel](../admin/overview), Query Presets are applied to the List View. When enabled, new controls are displayed for users to manage presets. Once saved, these presets can be loaded up at any time and optionally shared with others.

To enable Query Presets on a Collection, use the `enableQueryPresets` property in your [Collection Config](../configuration/collections).

```ts
import type { CollectionConfig } from 'payload'

export const MyCollection: CollectionConfig = {
  // ...
  // highlight-start
  enableQueryPresets: true,
  // highlight-end
}
```

## Config Options

Query Preset settings are managed on the `queryPresets` property in your [Collection Config](../configuration/collections).

```ts
import { buildConfig } from 'payload'

const config = buildConfig({
  // ...
  // highlight-start
  queryPresets: {
    // ...
  },
  // highlight-end
})
```

The following options are available for Query Presets:

| Option        | Description                                                                                                |
| ------------- | ---------------------------------------------------------------------------------------------------------- |
| `access`      | Custom access control rules for Query Presets collection. [More details](#custom-access-control).          |
| `constraints` | Used to define options and fields for custom access control rules. [More details](#custom-access-control). |
| `labels`      | Custom labels to use for the Query Presets Collection.                                                     |

## Access Control

Query Presets are subject to the same [Access Control](../access-control/overview) as the rest of Payload. This means you can use the same function patterns you are already familiar with to control who can read, update, and delete each individual preset.

### Default Access Control

By default, Payload provides a set of sensible defaults for all Query Presets, but you can customize these rules to suit your needs.

These defaults are as follows:

- **Only Me**: Only the user who created the preset can read, update, and delete it.
- **Everyone**: All users can read, update, and delete the preset.
- **Specific Users**: Only select users can read, update, and delete the preset.

When a user manages a preset, these options will be available to them in the Admin Panel for each operation.

### Custom Access Control

In addition to the defaults, you can also inject custom access control rules into Query Presets. For example, you could disallow all users of a particular role from operating on any preset. Or you could create a rule that only allows users with a specific role to read, update, or delete one particular preset.

There are two ways to customize access control for Query Presets:

1. [Collection Access Control](#static-access-control): Define a set of rules that apply to all Query Presets. These rules are _not_ controllable by the user.
2. [Document Access Control](#dynamic-access-control): Define a set of rules that apply to a specific Query Preset. These rules _are_ controllable by the user.

#### Collection Access Control

You can define static access control rules that apply to all Query Presets. These rules are not controllable by the user and are applied to all presets. They are written statically in your Collection Config.

To add Collection Access Control, use the `queryPresets.access` property in your [Collection Config](../configuration/collections):

```ts
import { buildConfig } from 'payload'

const config = buildConfig({
  // ...
  queryPresets: {
    // ...
    // highlight-start
    access: {
      read: ({ req: { user } }) =>
        user?.roles?.some((role) => role === 'admin'),
      update: ({ req: { user } }) =>
        user?.roles?.some((role) => role === 'admin'),
    },
    // highlight-end
  },
})
```

This example restricts all Query Presets to users with the role of `admin`.

#### Document Access Control

You can also define dynamic access control rules that apply to each specific Query Preset. These rules are controllable by the user and written to the database when the preset is saved.

Each rule will receive its own label to render in the dropdown, a set of fields to conditionally render when the rule is selected, and an access control function that determines how these fields affect access.

To do this, use the `queryPresets.constraints` property in your [Payload Config](../configuration/payload-config).

```ts
import { buildConfig } from 'payload'

const config = buildConfig({
  // ...
  queryPresets: {
    // ...
    // highlight-start
    constraints: {
      read: {
        label: 'Specific Roles',
        value: 'specificRoles',
        fields: [
          {
            name: 'roles',
            type: 'select',
            hasMany: true,
            options: [
              { label: 'Admin', value: 'admin' },
              { label: 'User', value: 'user' },
            ],
          },
        ],
        access: ({ req: { user } }) => ({
          'access.update.roles': {
            in: [user?.roles],
          },
        }),
      },
      // highlight-end
    },
  },
})
```

In this example, we've added a new option called `Specific Roles` that allows users to select from a list of roles. When this option is selected, the user will be prompted to select one or more roles from a list of options. The access control rule for this option is that the user operating on the preset must have one of the selected roles.

<Banner type="warning">
  **Note:** Payload places your custom fields into the `access[operation]` field
  group, so your rules will need to reflect this.
</Banner>

The following options are available for each constraint:

| Option   | Description                                                              |
| -------- | ------------------------------------------------------------------------ |
| `label`  | The label to display in the dropdown for this constraint.                |
| `value`  | The value to store in the database when this constraint is selected.     |
| `fields` | An array of fields to render when this constraint is selected.           |
| `access` | A function that determines the access control rules for this constraint. |
