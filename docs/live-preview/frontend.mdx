---
title: Implementing Live Preview in your app
label: Frontend Implementation
order: 20
desc: Learn how to implement Live Preview in your front-end application.
keywords: live preview, frontend, react, next.js, vue, nuxt.js, svelte, hook, useLivePreview
---

While using Live Preview, the Admin panel emits a new `window.postMessage` event every time a change is made to the document. Your front-end application can listen for these events and re-renders accordingly.

Wiring your front-end into Live Preview is easy. If your front-end application is built with React or Next.js, use the [`useLivePreview`](#react) React hook that Payload provides. In the future, all other major frameworks like Vue and Svelte will be officially supported. If you are these or any other framework today, you can still easily integrate with Live Preview using the same underlying tooling that Payload provides. See [building your own hook](#building-your-own-hook).

By default, hooks across all framework require the following args:

| Path                  | Description                                                                                                                                                                                 |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`serverURL`** \*    | The URL of your Payload server.                                                                                                                                                             |
| **`initialData`**     | The initial data of the document. The live data will be merged in as changes are made.                                                                                                      |
| **`depth`**           | The depth of the relationships to fetch. Defaults to `0`.                                                                                                                                   |

_\* An asterisk denotes that a property is required._

And return the following values:

| Path                  | Description                                                                                                                                                                                 |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`data`**            | The live data of the document, merged with the initial data.                                                                                                                                |
| **`isLoading`**       | A boolean that indicates whether or not the document is loading.                                                                                                                            |

<Banner type="info">
  If your front-end is tightly coupled to required fields, you should ensure that your UI does not break when these fields are removed. For example, if you are rendering something like `data.relatedPosts[0].title`, your page will break if you remove the first related post. To get around this, use conditional logic, optional chaining, or default values in your UI where needed.
</Banner>

### React

If your front-end application is built with React or Next.js, you can use the `useLivePreview` hook that Payload provides.

First, install the `@payloadcms/live-preview-react` package:

```bash
npm install @payloadcms/live-preview-react
```

Then, use the `useLivePreview` hook in your React component:

```tsx
'use client';
import { useLivePreview } from '@payloadcms/live-preview-react';
import { Page as PageType } from '@/payload-types'

// Fetch the page in a server component, then pass it to the client component and thread it through the hook
// The hook will take over from there and keep the preview in sync with the changes you make
// The `data` property will contain the live data of the document
export const PageClient: React.FC<{
  page: {
    title: string
  }
}> = ({ page: initialPage }) => {
  const { data } = useLivePreview<PageType>({
    initialData: initialPage,
    serverURL: PAYLOAD_SERVER_URL,
    depth: 2,
  })

  return (
    <h1>{data.title}</h1>
  )
}
```

## Building your own hook

No matter what JS-based front-end framework you are using, you can build your own hook using the underlying tooling that Payload provides.

First, install the base `@payloadcms/live-preview` package:

```bash
npm install @payloadcms/live-preview
```

This package provides the following functions:

| Path                  | Description                                                                                                                                                                                 |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`subscribe`**       | Subscribes to the Admin panel's `window.postMessage` events and calls the provided callback function.                                                                                       |
| **`unsubscribe`**     | Unsubscribes from the Admin panel's `window.postMessage` events.                                                                                                                            |

The `subscribe` function takes the following args:

| Path                  | Description                                                                                                                                                                                 |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **`callback`** \*     | A callback function that is called with `data` every time a change is made to the document.                                                                                                 |
| **`serverURL`** \*    | The URL of your Payload server.                                                                                                                                                        git s     |
| **`initialData`**     | The initial data of the document. The live data will be merged in as changes are made.                                                                                                      |
| **`depth`**           | The depth of the relationships to fetch. Defaults to `0`.                                                                                                                                   |

With these functions, you can build your own hook to use in your front-end application.

Here is an example of what the `useLivePreview` React hook from above looks like under the hood:

```tsx
import { subscribe, unsubscribe } from '@payloadcms/live-preview'
import { useCallback, useEffect, useState } from 'react'

export const useLivePreview = <T extends any>(props: {
  depth?: number
  initialData: T
  serverURL: string
}): {
  data: T
  isLoading: boolean
} => {
  const { depth = 0, initialData, serverURL } = props
  const [data, setData] = useState<T>(initialData)
  const [isLoading, setIsLoading] = useState<boolean>(true)

  const onChange = useCallback((mergedData) => {
    setData(mergedData)
    setIsLoading(false)
  }, [])

  useEffect(() => {
    const subscription = subscribe({
      callback: onChange,
      depth,
      initialData,
      serverURL,
    })

    return () => {
      unsubscribe(subscription)
    }
  }, [serverURL, onChange, depth, initialData])

  return {
    data,
    isLoading,
  }
}
```

<Banner type="info">
  When building your own hook, ensure that the args and return values are consistent with the ones listed at the top of this document. This will ensure that all hooks follow the same API.
</Banner>
