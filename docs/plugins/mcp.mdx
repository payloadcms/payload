---
title: MCP Plugin
label: MCP
order: 120
desc: MCP (Model Context Protocol) capabilities with Payload
keywords: plugins, mcp, ai, model context protocol, plugin, payload, cms
---

![https://www.npmjs.com/package/@payloadcms/plugin-mcp](https://img.shields.io/npm/v/@payloadcms/plugin-mcp)

This plugin allows you to easily manage MCP (Model Context Protocol) capabilities for your application from within your [Admin Panel](../admin/overview). It does so by adding a `payload-mcp-tools` global to your config that allows you specify MCP capabilities for your application. Your front-end application can use this data to modify which tools are available to the LLM. This is useful for AI integrations and LLM capabilities. This plugin also adds an `api/mcp` endpoint to your application that allows you to use MCP with any client.

For example, if you have a collection called `posts` and you want to allow the LLM to find, create, update, and delete posts, you can enable the `find`, `create`, `update`, and `delete` tools for the `posts` collection. This will ensure that the LLM can find, create, update, and delete posts without penalty. This is a very lightweight plugin that will allow you to integrate MCP capabilities for any front-end framework.

<Banner type="info">
  This plugin is completely open-source and the [source code can be found
  here](https://github.com/payloadcms/payload/tree/main/packages/plugin-mcp). If
  you need help, check out our [Community
  Help](https://payloadcms.com/community-help). If you think you've found a bug,
  please [open a new
  issue](https://github.com/payloadcms/payload/issues/new?assignees=&labels=plugin%3A%mcp&template=bug_report.md&title=plugin-mcp%3A)
  with as much detail as possible.
</Banner>

## Core features

- Adds a `payload-mcp-tools` global to your config that:
  - includes a `find`, `create`, `update`, and `delete` fields for each collection
  - allows you to enable or disable the tools for each collection
  - allows you to modify your own custom tools
- Adds an `api/mcp` endpoint to your application that allows you to use MCP with any client

## Installation

Install the plugin using any JavaScript package manager like [pnpm](https://pnpm.io), [npm](https://npmjs.com), or [Yarn](https://yarnpkg.com):

```bash
  pnpm add @payloadcms/plugin-mcp
```

## Basic Usage

In the `plugins` array of your [Payload Config](https://payloadcms.com/docs/configuration/overview), call the plugin with [options](#options):

```ts
import { buildConfig } from 'payload'
import { pluginMCP } from '@payloadcms/plugin-mcp'

const config = buildConfig({
  collections: [
    {
      slug: 'posts',
      fields: [],
    },
  ],
  plugins: [
    pluginMCP({
      collections: {
        posts: {
          enabled: true,
        },
      },
    }),
  ],
})

export default config
```

### Options

| Option                                 | Type                | Description                                                                                             |
| -------------------------------------- | ------------------- | ------------------------------------------------------------------------------------------------------- |
| `collections`                          | `object`            | An object of collection slugs to use for MCP capabilities.                                              |
| `collections[slug]`                    | `object`            | An object of collection slugs to use for MCP capabilities.                                              |
| `collections[slug].description`        | `string`            | A description for the collection.                                                                       |
| `collections[slug].override`           | `function`          | A function that allows you to override the data generated by the LLM before it is used in an operation. |
| `collections[slug].enabled`            | `object or boolean` | Determines whether the LLM can find, create, update, and delete documents in the collection.            |
| `collections[slug].enabled.find`       | `boolean`           | Whether to allow the LLM to find documents in the collection.                                           |
| `collections[slug].enabled.create`     | `boolean`           | Whether to allow the LLM to create documents in the collection.                                         |
| `collections[slug].enabled.update`     | `boolean`           | Whether to allow the LLM to update documents in the collection.                                         |
| `collections[slug].enabled.delete`     | `boolean`           | Whether to allow the LLM to delete documents in the collection.                                         |
| `mcp`                                  | `object`            | MCP options that allow you to customize the MCP server.                                                 |
| `mcp.tools`                            | `array`             | An array of custom tools to add to the MCP server.                                                      |
| `mcp.tools.name`                       | `string`            | The name of the tool.                                                                                   |
| `mcp.tools.description`                | `string`            | The description of the tool.                                                                            |
| `mcp.tools.handler`                    | `function`          | The handler function for the tool.                                                                      |
| `mcp.tools.parameters`                 | `object`            | The parameters for the tool.                                                                            |
| `mcp.handlerOptions`                   | `object`            | The handler options for the MCP server.                                                                 |
| `mcp.handlerOptions.basePath`          | `string`            | The base path for the MCP server.                                                                       |
| `mcp.handlerOptions.verboseLogs`       | `boolean`           | Whether to log verbose logs to the console.                                                             |
| `mcp.handlerOptions.maxDuration`       | `number`            | The maximum duration for the MCP server requests.                                                       |
| `mcp.handlerOptions.redisUrl`          | `string`            | The Redis URL for the MCP server for SSE support.                                                       |
| `mcp.serverOptions`                    | `object`            | The server options for the MCP server.                                                                  |
| `mcp.serverOptions.serverInfo`         | `object`            | The server info for the MCP server.                                                                     |
| `mcp.serverOptions.serverInfo.name`    | `string`            | The name of the MCP server.                                                                             |
| `mcp.serverOptions.serverInfo.version` | `string`            | The version of the MCP server.                                                                          |

```ts
pluginMCP({
  collections: {
    posts: {
      enabled: {
        find: false,
        create: true,
      },
      description: 'This is a Payload collection with Post documents.',
      override: (original) => {
        console.log('[Override MCP resource call for Posts]:', original)
        return { ...original, myCustomOverrideProp: true }
      },
    },
    media: {
      enabled: {
        find: true,
        create: false,
        update: true,
        delete: false,
      },
      description: 'This is a Payload collection with Media documents.',
    },
  },
  mcp: {
    handlerOptions: {
      verboseLogs: true,
      maxDuration: 60,
    },
    serverOptions: {
      serverInfo: {
        name: 'My Custom MCP Server',
        version: '1.0.0',
      },
    },
    tools: [
      {
        name: 'diceRoll',
        description: 'Rolls a virtual dice with a specified number of sides',
        handler: (args: Record<string, unknown>) => {
          const sides = (args.sides as number) || 6
          const result = Math.floor(Math.random() * sides) + 1
          return Promise.resolve({
            content: [
              {
                type: 'text' as const,
                text: `# Dice Roll Result\n\n**Sides:** ${sides}\n**Result:** ${result}\n\nðŸŽ² You rolled a **${result}** on a ${sides}-sided die!`,
              },
            ],
          })
        },
        parameters: z.object({
          sides: z
            .number()
            .int()
            .min(2)
            .max(1000)
            .optional()
            .default(6)
            .describe('Number of sides on the dice (default: 6)'),
        }).shape,
      },
    ],
  },
}),
```
